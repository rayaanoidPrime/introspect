"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[633],{1181:(e,t,n)=>{let r,i,o,s,a,l;n.d(t,{C:()=>ug,N:()=>kf,O:()=>RI,P:()=>T0,Q:()=>P3,R:()=>Rv,S:()=>T1});var c,u,h,d,f,p,m,g,y,b,v,x,w,k,O,S,C,T,A,E,M=n(1506),N=n(4109),_=n(3786),j=n(5775),D=n(9678),P=n(8718).Buffer,R=Object.defineProperty,I=(e,t,n)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,z=(e,t,n)=>I(e,"symbol"!=typeof t?t+"":t,n);let L=(0,M.f)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),q=(0,M.f)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),$=(0,M.f)("CaseSensitive",[["path",{d:"m3 15 4-8 4 8",key:"1vwr6u"}],["path",{d:"M4 13h6",key:"1r9ots"}],["circle",{cx:"18",cy:"12",r:"3",key:"1kchzo"}],["path",{d:"M21 9v6",key:"anns31"}]]),B=(0,M.f)("ChartBar",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 16h8",key:"srdodz"}],["path",{d:"M7 11h12",key:"127s9w"}],["path",{d:"M7 6h3",key:"w9rmul"}]]),F=(0,M.f)("ChartColumnIncreasing",[["path",{d:"M13 17V9",key:"1fwyjl"}],["path",{d:"M18 17V5",key:"sfb6ij"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Q=(0,M.f)("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),V=(0,M.f)("ChartNoAxesCombined",[["path",{d:"M12 16v5",key:"zza2cw"}],["path",{d:"M16 14v7",key:"1g90b9"}],["path",{d:"M20 10v11",key:"1iqoj0"}],["path",{d:"m22 3-8.646 8.646a.5.5 0 0 1-.708 0L9.354 8.354a.5.5 0 0 0-.707 0L2 15",key:"1fw8x9"}],["path",{d:"M4 18v3",key:"1yp0dc"}],["path",{d:"M8 14v7",key:"n3cwzv"}]]),H=(0,M.f)("ChartScatter",[["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}],["circle",{cx:"18.5",cy:"5.5",r:".5",fill:"currentColor",key:"lysivs"}],["circle",{cx:"11.5",cy:"11.5",r:".5",fill:"currentColor",key:"byv1b8"}],["circle",{cx:"7.5",cy:"16.5",r:".5",fill:"currentColor",key:"nkw3mc"}],["circle",{cx:"17.5",cy:"14.5",r:".5",fill:"currentColor",key:"1gjh6j"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}]]),U=(0,M.f)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),W=(0,M.f)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),G=(0,M.f)("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]),X=(0,M.f)("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]),Y=(0,M.f)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Z=(0,M.f)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),K=(0,M.f)("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]),J=(0,M.f)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),ee=(0,M.f)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),et=(0,M.f)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),en=(0,M.f)("MessageSquarePlus",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]]),er=(0,M.f)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),ei=(0,M.f)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),eo=(0,M.f)("Move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]),es=(0,M.f)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),ea=(0,M.f)("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),el=(0,M.f)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ec=(0,M.f)("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),eu=(0,M.f)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),eh=(0,M.f)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),ed=(0,M.f)("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),ef=(0,M.f)("Telescope",[["path",{d:"m10.065 12.493-6.18 1.318a.934.934 0 0 1-1.108-.702l-.537-2.15a1.07 1.07 0 0 1 .691-1.265l13.504-4.44",key:"k4qptu"}],["path",{d:"m13.56 11.747 4.332-.924",key:"19l80z"}],["path",{d:"m16 21-3.105-6.21",key:"7oh9d"}],["path",{d:"M16.485 5.94a2 2 0 0 1 1.455-2.425l1.09-.272a1 1 0 0 1 1.212.727l1.515 6.06a1 1 0 0 1-.727 1.213l-1.09.272a2 2 0 0 1-2.425-1.455z",key:"m7xp4m"}],["path",{d:"m6.158 8.633 1.114 4.456",key:"74o979"}],["path",{d:"m8 21 3.105-6.21",key:"1fvxut"}],["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}]]),ep=(0,M.f)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),em=(0,M.f)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),eg=[],ey=[];function eb(e){return e>=127462&&e<=127487}function ev(e,t,n){if(t==e.length)return t;t&&ew(e.charCodeAt(t))&&ek(e.charCodeAt(t-1))&&t--;let r=ex(e,t);for(t+=eO(r);t<e.length;){let i=ex(e,t);if(8205==r||8205==i||n&&function(e){if(e<768)return!1;for(let t=0,n=eg.length;;){let r=t+n>>1;if(e<eg[r])n=r;else{if(!(e>=ey[r]))return!0;t=r+1}if(t==n)return!1}}(i))t+=eO(i),r=i;else if(eb(i)){let n=0,r=t-2;for(;r>=0&&eb(ex(e,r));)n++,r-=2;if(n%2==0)break;t+=2}else break}return t}function ex(e,t){let n=e.charCodeAt(t);if(!ek(n)||t+1==e.length)return n;let r=e.charCodeAt(t+1);return ew(r)?(n-55296<<10)+(r-56320)+65536:n}function ew(e){return e>=56320&&e<57344}function ek(e){return e>=55296&&e<56320}function eO(e){return e<65536?1:2}(()=>{let e="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let t=0,n=0;t<e.length;t++)(t%2?ey:eg).push(n+=e[t])})();let eS=class e{lineAt(e){if(e<0||e>this.length)throw RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){[e,t]=ej(this,e,t);let r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),eT.from(r,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=ej(this,e,t);let n=[];return this.decompose(e,t,n,0),eT.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new eE(this),i=new eE(e);for(let e=t,o=t;;){if(r.next(e),i.next(e),e=0,r.lineBreak!=i.lineBreak||r.done!=i.done||r.value!=i.value)return!1;if(o+=r.value.length,r.done||o>=n)return!0}}iter(e=1){return new eE(this,e)}iterRange(e,t=this.length){return new eM(this,e,t)}iterLines(e,t){let n;if(null==e)n=this.iter();else{null==t&&(t=this.lines+1);let r=this.line(e).from;n=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new eN(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(t){if(0==t.length)throw RangeError("A document must have at least one line");return 1!=t.length||t[0]?t.length<=32?new eC(t):eT.from(eC.split(t,[])):e.empty}};class eC extends eS{constructor(e,t=function(e){let t=-1;for(let n of e)t+=n.length+1;return t}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,r){for(let i=0;;i++){let o=this.text[i],s=r+o.length;if((t?n:s)>=e)return new e_(r,s,n,o);r=s+1,n++}}decompose(e,t,n,r){var i;let o=e<=0&&t>=this.length?this:new eC((i=this.text,eA(i,[""],e,t)),Math.min(t,this.length)-Math.max(0,e));if(1&r){let e=n.pop(),t=eA(o.text,e.text.slice(),0,o.length);if(t.length<=32)n.push(new eC(t,e.length+o.length));else{let e=t.length>>1;n.push(new eC(t.slice(0,e)),new eC(t.slice(e)))}}else n.push(o)}replace(e,t,n){var r,i;if(!(n instanceof eC))return super.replace(e,t,n);[e,t]=ej(this,e,t);let o=eA(this.text,eA(n.text,(r=this.text,i=0,eA(r,[""],0,e))),t),s=this.length+n.length-(t-e);return o.length<=32?new eC(o,s):eT.from(eC.split(o,[]),s)}sliceString(e,t=this.length,n=`
`){[e,t]=ej(this,e,t);let r="";for(let i=0,o=0;i<=t&&o<this.text.length;o++){let s=this.text[o],a=i+s.length;i>e&&o&&(r+=n),e<a&&t>i&&(r+=s.slice(Math.max(0,e-i),t-i)),i=a+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],r=-1;for(let i of e)n.push(i),r+=i.length+1,32==n.length&&(t.push(new eC(n,r)),n=[],r=-1);return r>-1&&t.push(new eC(n,r)),t}}let eT=class e extends eS{constructor(e,t){for(let n of(super(),this.children=e,this.length=t,this.lines=0,e))this.lines+=n.lines}lineInner(e,t,n,r){for(let i=0;;i++){let o=this.children[i],s=r+o.length,a=n+o.lines-1;if((t?a:s)>=e)return o.lineInner(e,t,n,r);r=s+1,n=a+1}}decompose(e,t,n,r){for(let i=0,o=0;o<=t&&i<this.children.length;i++){let s=this.children[i],a=o+s.length;if(e<=a&&t>=o){let i=r&(+(o<=e)|2*(a>=t));o>=e&&a<=t&&!i?n.push(s):s.decompose(e-o,t-o,n,i)}o=a+1}}replace(t,n,r){if([t,n]=ej(this,t,n),r.lines<this.lines)for(let i=0,o=0;i<this.children.length;i++){let s=this.children[i],a=o+s.length;if(t>=o&&n<=a){let l=s.replace(t-o,n-o,r),c=this.lines-s.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let o=this.children.slice();return o[i]=l,new e(o,this.length-(n-t)+r.length)}return super.replace(o,a,l)}o=a+1}return super.replace(t,n,r)}sliceString(e,t=this.length,n=`
`){[e,t]=ej(this,e,t);let r="";for(let i=0,o=0;i<this.children.length&&o<=t;i++){let s=this.children[i],a=o+s.length;o>e&&i&&(r+=n),e<a&&t>o&&(r+=s.sliceString(e-o,t-o,n)),o=a+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(t,n){if(!(t instanceof e))return 0;let r=0,[i,o,s,a]=n>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;i+=n,o+=n){if(i==s||o==a)return r;let e=this.children[i],l=t.children[o];if(e!=l)return r+e.scanIdentical(l,n);r+=e.length+1}}static from(t,n=t.reduce((e,t)=>e+t.length+1,-1)){let r=0;for(let e of t)r+=e.lines;if(r<32){let e=[];for(let n of t)n.flatten(e);return new eC(e,n)}let i=Math.max(32,r>>5),o=i<<1,s=i>>1,a=[],l=0,c=-1,u=[];function h(){0!=l&&(a.push(1==u.length?u[0]:e.from(u,c)),c=-1,l=u.length=0)}for(let n of t)!function t(n){let r;if(n.lines>o&&n instanceof e)for(let e of n.children)t(e);else n.lines>s&&(l>s||!l)?(h(),a.push(n)):n instanceof eC&&l&&(r=u[u.length-1])instanceof eC&&n.lines+r.lines<=32?(l+=n.lines,c+=n.length+1,u[u.length-1]=new eC(r.text.concat(n.text),r.length+1+n.length)):(l+n.lines>i&&h(),l+=n.lines,c+=n.length+1,u.push(n))}(n);return h(),1==a.length?a[0]:new e(a,n)}};function eA(e,t,n=0,r=1e9){for(let i=0,o=0,s=!0;o<e.length&&i<=r;o++){let a=e[o],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),s?(t[t.length-1]+=a,s=!1):t.push(a)),i=l+1}return t}eS.empty=new eC([""],0);class eE{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof eC?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],i=this.offsets[n],o=i>>1,s=r instanceof eC?r.text.length:r.children.length;if(o==(t>0?s:0)){if(0==n)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&i)==(t>0?0:1)){if(this.offsets[n]+=t,0==e)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof eC){let i=r.text[o+(t<0?-1:0)];if(this.offsets[n]+=t,i.length>Math.max(0,e))return this.value=0==e?i:t>0?i.slice(e):i.slice(0,i.length-e),this;e-=i.length}else{let i=r.children[o+(t<0?-1:0)];e>i.length?(e-=i.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(i),this.offsets.push(t>0?1:(i instanceof eC?i.text.length:i.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class eM{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new eE(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=n?r:t<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class eN{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}"u">typeof Symbol&&(eS.prototype[Symbol.iterator]=function(){return this.iter()},eE.prototype[Symbol.iterator]=eM.prototype[Symbol.iterator]=eN.prototype[Symbol.iterator]=function(){return this});let e_=class{constructor(e,t,n,r){this.from=e,this.to=t,this.number=n,this.text=r}get length(){return this.to-this.from}};function ej(e,t,n){return[t=Math.max(0,Math.min(e.length,t)),Math.max(t,Math.min(e.length,n))]}function eD(e,t,n=!0,r=!0){return function(e,t,n=!0,r=!0){return(n?ev:function(e,t,n){for(;t>0;){let r=ev(e,t-2,n);if(r<t)return r;t--}return 0})(e,t,r)}(e,t,n,r)}function eP(e,t){let n=e.charCodeAt(t);if(!(n>=55296&&n<56320)||t+1==e.length)return n;let r=e.charCodeAt(t+1);return r>=56320&&r<57344?(n-55296<<10)+(r-56320)+65536:n}function eR(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(((e-=65536)>>10)+55296,(1023&e)+56320)}function eI(e){return e<65536?1:2}let ez=/\r\n?|\n/;var eL=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(eL||(eL={}));class eq{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,r=0;t<this.sections.length;){let i=this.sections[t++],o=this.sections[t++];o<0?(e(n,r,i),r+=i):r+=o,n+=i}}iterChangedRanges(e,t=!1){eQ(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];r<0?e.push(n,r):e.push(r,n)}return new eq(e)}composeDesc(e){return this.empty?e:e.empty?this:eH(this,e)}mapDesc(e,t=!1){return e.empty?this:eV(this,e,t)}mapPos(e,t=-1,n=eL.Simple){let r=0,i=0;for(let o=0;o<this.sections.length;){let s=this.sections[o++],a=this.sections[o++],l=r+s;if(a<0){if(l>e)return i+(e-r);i+=s}else{if(n!=eL.Simple&&l>=e&&(n==eL.TrackDel&&r<e&&l>e||n==eL.TrackBefore&&r<e||n==eL.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!s)return e==r||t<0?i:i+a;i+=a}r=l}if(e>r)throw RangeError(`Position ${e} is out of range for changeset of length ${r}`);return i}touchesRange(e,t=e){for(let n=0,r=0;n<this.sections.length&&r<=t;){let i=this.sections[n++],o=this.sections[n++],s=r+i;if(o>=0&&r<=t&&s>=e)return!(r<e)||!(s>t)||"cover";r=s}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(e=>"number"!=typeof e))throw RangeError("Invalid JSON representation of ChangeDesc");return new eq(e)}static create(e){return new eq(e)}}class e$ extends eq{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw RangeError("Applying change set to a document with the wrong length");return eQ(this,(t,n,r,i,o)=>e=e.replace(r,r+(n-t),o),!1),e}mapDesc(e,t=!1){return eV(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let r=0,i=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s>=0){t[r]=s,t[r+1]=o;let a=r>>1;for(;n.length<a;)n.push(eS.empty);n.push(o?e.slice(i,i+o):eS.empty)}i+=o}return new e$(t,n)}compose(e){return this.empty?e:e.empty?this:eH(this,e,!0)}map(e,t=!1){return e.empty?this:eV(this,e,t,!0)}iterChanges(e,t=!1){eQ(this,e,t)}get desc(){return eq.create(this.sections)}filter(e){let t=[],n=[],r=[],i=new eU(this);e:for(let o=0,s=0;;){let a=o==e.length?1e9:e[o++];for(;s<a||s==a&&0==i.len;){if(i.done)break e;let e=Math.min(i.len,a-s);eB(r,e,-1);let o=-1==i.ins?-1:0==i.off?i.ins:0;eB(t,e,o),o>0&&eF(n,t,i.text),i.forward(e),s+=e}let l=e[o++];for(;s<l;){if(i.done)break e;let e=Math.min(i.len,l-s);eB(t,e,-1),eB(r,e,-1==i.ins?-1:0==i.off?i.ins:0),i.forward(e),s+=e}}return{changes:new e$(t,n),filtered:eq.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],r=this.sections[t+1];r<0?e.push(n):0==r?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let r=[],i=[],o=0,s=null;function a(e=!1){if(!e&&!r.length)return;o<t&&eB(r,t-o,-1);let n=new e$(r,i);s=s?s.compose(n.map(s)):n,r=[],i=[],o=0}return function e(l){if(Array.isArray(l))for(let t of l)e(t);else if(l instanceof e$){if(l.length!=t)throw RangeError(`Mismatched change set length (got ${l.length}, expected ${t})`);a(),s=s?s.compose(l.map(s)):l}else{let{from:e,to:s=e,insert:c}=l;if(e>s||e<0||s>t)throw RangeError(`Invalid change range ${e} to ${s} (in doc of length ${t})`);let u=c?"string"==typeof c?eS.of(c.split(n||ez)):c:eS.empty,h=u.length;if(e==s&&0==h)return;e<o&&a(),e>o&&eB(r,e-o,-1),eB(r,s-e,h),eF(i,r,u),o=s}}(e),a(!s),s}static empty(e){return new e$(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let r=0;r<e.length;r++){let i=e[r];if("number"==typeof i)t.push(i,-1);else{if(!Array.isArray(i)||"number"!=typeof i[0]||i.some((e,t)=>t&&"string"!=typeof e))throw RangeError("Invalid JSON representation of ChangeSet");if(1==i.length)t.push(i[0],0);else{for(;n.length<r;)n.push(eS.empty);n[r]=eS.of(i.slice(1)),t.push(i[0],n[r].length)}}}return new e$(t,n)}static createSet(e,t){return new e$(e,t)}}function eB(e,t,n,r=!1){if(0==t&&n<=0)return;let i=e.length-2;i>=0&&n<=0&&n==e[i+1]?e[i]+=t:i>=0&&0==t&&0==e[i]?e[i+1]+=n:r?(e[i]+=t,e[i+1]+=n):e.push(t,n)}function eF(e,t,n){if(0==n.length)return;let r=t.length-2>>1;if(r<e.length)e[e.length-1]=e[e.length-1].append(n);else{for(;e.length<r;)e.push(eS.empty);e.push(n)}}function eQ(e,t,n){let r=e.inserted;for(let i=0,o=0,s=0;s<e.sections.length;){let a=e.sections[s++],l=e.sections[s++];if(l<0)i+=a,o+=a;else{let c=i,u=o,h=eS.empty;for(;c+=a,u+=l,l&&r&&(h=h.append(r[s-2>>1])),!(n||s==e.sections.length||e.sections[s+1]<0);)a=e.sections[s++],l=e.sections[s++];t(i,c,o,u,h),i=c,o=u}}}function eV(e,t,n,r=!1){let i=[],o=r?[]:null,s=new eU(e),a=new eU(t);for(let e=-1;;){if(s.done&&a.len||a.done&&s.len)throw Error("Mismatched change set lengths");if(-1==s.ins&&-1==a.ins){let e=Math.min(s.len,a.len);eB(i,e,-1),s.forward(e),a.forward(e)}else if(a.ins>=0&&(s.ins<0||e==s.i||0==s.off&&(a.len<s.len||a.len==s.len&&!n))){let t=a.len;for(eB(i,a.ins,-1);t;){let n=Math.min(s.len,t);s.ins>=0&&e<s.i&&s.len<=n&&(eB(i,0,s.ins),o&&eF(o,i,s.text),e=s.i),s.forward(n),t-=n}a.next()}else if(s.ins>=0){let t=0,n=s.len;for(;n;)if(-1==a.ins){let e=Math.min(n,a.len);t+=e,n-=e,a.forward(e)}else if(0==a.ins&&a.len<n)n-=a.len,a.next();else break;eB(i,t,e<s.i?s.ins:0),o&&e<s.i&&eF(o,i,s.text),e=s.i,s.forward(s.len-n)}else{if(s.done&&a.done)return o?e$.createSet(i,o):eq.create(i);throw Error("Mismatched change set lengths")}}}function eH(e,t,n=!1){let r=[],i=n?[]:null,o=new eU(e),s=new eU(t);for(let e=!1;;){if(o.done&&s.done)return i?e$.createSet(r,i):eq.create(r);if(0==o.ins)eB(r,o.len,0,e),o.next();else if(0!=s.len||s.done){if(o.done||s.done)throw Error("Mismatched change set lengths");{let t=Math.min(o.len2,s.len),n=r.length;if(-1==o.ins){let n=-1==s.ins?-1:s.off?0:s.ins;eB(r,t,n,e),i&&n&&eF(i,r,s.text)}else -1==s.ins?(eB(r,o.off?0:o.len,t,e),i&&eF(i,r,o.textBit(t))):(eB(r,o.off?0:o.len,s.off?0:s.ins,e),i&&!s.off&&eF(i,r,s.text));e=(o.ins>t||s.ins>=0&&s.len>t)&&(e||r.length>n),o.forward2(t),s.forward(t)}}else eB(r,0,s.ins,e),i&&eF(i,r,s.text),s.next()}}class eU{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return -2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?eS.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?eS.empty:t[n].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}let eW=class e{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let e=7&this.flags;return 7==e?null:e}get goalColumn(){let e=this.flags>>6;return 0xffffff==e?void 0:e}map(t,n=-1){let r,i;return this.empty?r=i=t.mapPos(this.from,n):(r=t.mapPos(this.from,1),i=t.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new e(r,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return eG.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return eG.range(this.anchor,n)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw RangeError("Invalid JSON representation for SelectionRange");return eG.range(e.anchor,e.head)}static create(t,n,r){return new e(t,n,r)}};class eG{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:eG.create(this.ranges.map(n=>n.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new eG([this.main],0)}addRange(e,t=!0){return eG.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,eG.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw RangeError("Invalid JSON representation for EditorSelection");return new eG(e.ranges.map(e=>eW.fromJSON(e)),e.main)}static single(e,t=e){return new eG([eG.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw RangeError("A selection needs at least one range");for(let n=0,r=0;r<e.length;r++){let i=e[r];if(i.empty?i.from<=n:i.from<n)return eG.normalized(e.slice(),t);n=i.to}return new eG(e,t)}static cursor(e,t=0,n,r){return eW.create(e,e,(0==t?0:t<0?8:16)|(null==n?7:Math.min(6,n))|(r??0xffffff)<<6)}static range(e,t,n,r){let i=(n??0xffffff)<<6|(null==r?7:Math.min(6,r));return t<e?eW.create(t,e,48|i):eW.create(e,t,8*(t>e)|i)}static normalized(e,t=0){let n=e[t];e.sort((e,t)=>e.from-t.from),t=e.indexOf(n);for(let n=1;n<e.length;n++){let r=e[n],i=e[n-1];if(r.empty?r.from<=i.to:r.from<i.to){let o=i.from,s=Math.max(r.to,i.to);n<=t&&t--,e.splice(--n,2,r.anchor>r.head?eG.range(s,o):eG.range(o,s))}}return new eG(e,t)}}function eX(e,t){for(let n of e.ranges)if(n.to>t)throw RangeError("Selection points outside of document")}let eY=0;class eZ{constructor(e,t,n,r,i){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=r,this.id=eY++,this.default=e([]),this.extensions="function"==typeof i?i(this):i}get reader(){return this}static define(e={}){return new eZ(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:eK),!!e.static,e.enables)}of(e){return new eJ([],this,0,e)}compute(e,t){if(this.isStatic)throw Error("Can't compute a static facet");return new eJ(e,this,1,t)}computeN(e,t){if(this.isStatic)throw Error("Can't compute a static facet");return new eJ(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],n=>t(n.field(e)))}}function eK(e,t){return e==t||e.length==t.length&&e.every((e,n)=>e===t[n])}class eJ{constructor(e,t,n,r){this.dependencies=e,this.facet=t,this.type=n,this.value=r,this.id=eY++}dynamicSlot(e){var t;let n=this.value,r=this.facet.compareInput,i=this.id,o=e[i]>>1,s=2==this.type,a=!1,l=!1,c=[];for(let n of this.dependencies)"doc"==n?a=!0:"selection"==n?l=!0:(null!==(t=e[n.id])&&void 0!==t?t:1)&1||c.push(e[n.id]);return{create:e=>(e.values[o]=n(e),1),update(e,t){if(a&&t.docChanged||l&&(t.docChanged||t.selection)||e1(e,c)){let t=n(e);if(s?!e0(t,e.values[o],r):!r(t,e.values[o]))return e.values[o]=t,1}return 0},reconfigure:(e,t)=>{let a,l=t.config.address[i];if(null!=l){let i=tn(t,l);if(this.dependencies.every(n=>n instanceof eZ?t.facet(n)===e.facet(n):!(n instanceof e4)||t.field(n,!1)==e.field(n,!1))||(s?e0(a=n(e),i,r):r(a=n(e),i)))return e.values[o]=i,0}else a=n(e);return e.values[o]=a,1}}}}function e0(e,t,n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function e1(e,t){let n=!1;for(let r of t)1&tt(e,r)&&(n=!0);return n}let e2=eZ.define({static:!0});class e4{constructor(e,t,n,r,i){this.id=e,this.createF=t,this.updateF=n,this.compareF=r,this.spec=i,this.provides=void 0}static define(e){let t=new e4(eY++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(e2).find(e=>e.field==this);return((null==t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,n)=>{let r=e.values[t],i=this.updateF(r,n);return this.compareF(r,i)?0:(e.values[t]=i,1)},reconfigure:(e,n)=>{let r=e.facet(e2),i=n.facet(e2),o;return(o=r.find(e=>e.field==this))&&o!=i.find(e=>e.field==this)?(e.values[t]=o.create(e),1):null!=n.config.address[this.id]?(e.values[t]=n.field(this),0):(e.values[t]=this.create(e),1)}}}init(e){return[this,e2.of({field:this,create:e})]}get extension(){return this}}let e5={lowest:4,low:3,default:2,high:1,highest:0};function e3(e){return t=>new e7(t,e)}let e6={highest:e3(e5.highest),high:e3(e5.high),default:e3(e5.default),low:e3(e5.low),lowest:e3(e5.lowest)};class e7{constructor(e,t){this.inner=e,this.prec=t}}class e8{of(e){return new e9(this,e)}reconfigure(e){return e8.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class e9{constructor(e,t){this.compartment=e,this.inner=t}}let te=class e{constructor(e,t,n,r,i,o){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=r,this.staticValues=i,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(t,n,r){var i,o,s;let a,l,c=[],u=Object.create(null),h=new Map;for(let e of(i=t,o=n,s=h,a=[[],[],[],[],[]],l=new Map,function e(t,n){let r=l.get(t);if(null!=r){if(r<=n)return;let e=a[r].indexOf(t);e>-1&&a[r].splice(e,1),t instanceof e9&&s.delete(t.compartment)}if(l.set(t,n),Array.isArray(t))for(let r of t)e(r,n);else if(t instanceof e9){if(s.has(t.compartment))throw RangeError("Duplicate use of compartment in extensions");let r=o.get(t.compartment)||t.inner;s.set(t.compartment,r),e(r,n)}else if(t instanceof e7)e(t.inner,t.prec);else if(t instanceof e4)a[n].push(t),t.provides&&e(t.provides,n);else if(t instanceof eJ)a[n].push(t),t.facet.extensions&&e(t.facet.extensions,e5.default);else{let r=t.extension;if(!r)throw Error(`Unrecognized extension value in extension set (${t}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);e(r,n)}}(i,e5.default),a.reduce((e,t)=>e.concat(t))))e instanceof e4?c.push(e):(u[e.facet.id]||(u[e.facet.id]=[])).push(e);let d=Object.create(null),f=[],p=[];for(let e of c)d[e.id]=p.length<<1,p.push(t=>e.slot(t));let m=null==r?void 0:r.config.facets;for(let e in u){let t=u[e],n=t[0].facet,i=m&&m[e]||[];if(t.every(e=>0==e.type)){if(d[n.id]=f.length<<1|1,eK(i,t))f.push(r.facet(n));else{let e=n.combine(t.map(e=>e.value));f.push(r&&n.compare(e,r.facet(n))?r.facet(n):e)}}else{for(let e of t)0==e.type?(d[e.id]=f.length<<1|1,f.push(e.value)):(d[e.id]=p.length<<1,p.push(t=>e.dynamicSlot(t)));d[n.id]=p.length<<1,p.push(e=>(function(e,t,n){let r=n.map(t=>e[t.id]),i=n.map(e=>e.type),o=r.filter(e=>!(1&e)),s=e[t.id]>>1;function a(e){let n=[];for(let t=0;t<r.length;t++){let o=tn(e,r[t]);if(2==i[t])for(let e of o)n.push(e);else n.push(o)}return t.combine(n)}return{create(e){for(let t of r)tt(e,t);return e.values[s]=a(e),1},update(e,n){if(!e1(e,o))return 0;let r=a(e);return t.compare(r,e.values[s])?0:(e.values[s]=r,1)},reconfigure(e,i){let o=e1(e,r),l=i.config.facets[t.id],c=i.facet(t);if(l&&!o&&eK(n,l))return e.values[s]=c,0;let u=a(e);return t.compare(u,c)?(e.values[s]=c,0):(e.values[s]=u,1)}}})(e,n,t))}}return new e(t,h,p.map(e=>e(d)),d,f,u)}};function tt(e,t){if(1&t)return 2;let n=t>>1,r=e.status[n];if(4==r)throw Error("Cyclic dependency between fields and/or facets");if(2&r)return r;e.status[n]=4;let i=e.computeSlot(e,e.config.dynamicSlots[n]);return e.status[n]=2|i}function tn(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}let tr=eZ.define(),ti=eZ.define({combine:e=>e.some(e=>e),static:!0}),to=eZ.define({combine:e=>e.length?e[0]:void 0,static:!0}),ts=eZ.define(),ta=eZ.define(),tl=eZ.define(),tc=eZ.define({combine:e=>!!e.length&&e[0]});class tu{constructor(e,t){this.type=e,this.value=t}static define(){return new th}}class th{of(e){return new tu(this,e)}}class td{constructor(e){this.map=e}of(e){return new tf(this,e)}}class tf{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new tf(this.type,t)}is(e){return this.type==e}static define(e={}){return new td(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let r of e){let e=r.map(t);e&&n.push(e)}return n}}tf.reconfigure=tf.define(),tf.appendConfig=tf.define();let tp=class e{constructor(t,n,r,i,o,s){this.startState=t,this.changes=n,this.selection=r,this.effects=i,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,r&&eX(r,n.newLength),o.some(t=>t.type==e.time)||(this.annotations=o.concat(e.time.of(Date.now())))}static create(t,n,r,i,o,s){return new e(t,n,r,i,o,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let n=this.annotation(e.userEvent);return!!(n&&(n==t||n.length>t.length&&n.slice(0,t.length)==t&&"."==n[t.length]))}};function tm(e,t,n){var r;let i,o,s;return n?(i=t.changes,o=e$.empty(t.changes.length),s=e.changes.compose(t.changes)):(i=t.changes.map(e.changes),o=e.changes.mapDesc(t.changes,!0),s=e.changes.compose(i)),{changes:s,selection:t.selection?t.selection.map(o):null===(r=e.selection)||void 0===r?void 0:r.map(i),effects:tf.mapEffects(e.effects,i).concat(tf.mapEffects(t.effects,o)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function tg(e,t,n){let r=t.selection,i=tb(t.annotations);return t.userEvent&&(i=i.concat(tp.userEvent.of(t.userEvent))),{changes:t.changes instanceof e$?t.changes:e$.of(t.changes||[],n,e.facet(to)),selection:r&&(r instanceof eG?r:eG.single(r.anchor,r.head)),effects:tb(t.effects),annotations:i,scrollIntoView:!!t.scrollIntoView}}tp.time=tu.define(),tp.userEvent=tu.define(),tp.addToHistory=tu.define(),tp.remote=tu.define();let ty=[];function tb(e){return null==e?ty:Array.isArray(e)?e:[e]}var tv=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(tv||(tv={}));let tx=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;try{r=RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}let tw=class e{constructor(e,t,n,r,i,o){this.config=e,this.doc=t,this.selection=n,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=i,o&&(o._state=this);for(let e=0;e<this.config.dynamicSlots.length;e++)tt(this,e<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(null==n){if(t)throw RangeError("Field is not present in this state");return}return tt(this,n),tn(this,n)}update(...e){return function e(t,n,r){let i=tg(t,n.length?n[0]:{},t.doc.length);n.length&&!1===n[0].filter&&(r=!1);for(let e=1;e<n.length;e++){!1===n[e].filter&&(r=!1);let o=!!n[e].sequential;i=tm(i,tg(t,n[e],o?i.changes.newLength:t.doc.length),o)}let o=tp.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return function(e){let t=e.startState,n=t.facet(tl),r=e;for(let i=n.length-1;i>=0;i--){let o=n[i](e);o&&Object.keys(o).length&&(r=tm(r,tg(t,o,e.changes.newLength),!0))}return r==e?e:tp.create(t,e.changes,e.selection,r.effects,r.annotations,r.scrollIntoView)}(r?function(t){let n=t.startState,r=!0;for(let e of n.facet(ts)){let n=e(t);if(!1===n){r=!1;break}Array.isArray(n)&&(r=!0===r?n:function(e,t){let n=[];for(let r=0,i=0;;){let o,s;if(r<e.length&&(i==t.length||t[i]>=e[r]))o=e[r++],s=e[r++];else{if(!(i<t.length))return n;o=t[i++],s=t[i++]}!n.length||n[n.length-1]<o?n.push(o,s):n[n.length-1]<s&&(n[n.length-1]=s)}}(r,n))}if(!0!==r){let e,i;if(!1===r)i=t.changes.invertedDesc,e=e$.empty(n.doc.length);else{let n=t.changes.filter(r);e=n.changes,i=n.filtered.mapDesc(n.changes).invertedDesc}t=tp.create(n,e,t.selection&&t.selection.map(i),tf.mapEffects(t.effects,i),t.annotations,t.scrollIntoView)}let i=n.facet(ta);for(let r=i.length-1;r>=0;r--){let o=i[r](t);t=o instanceof tp?o:Array.isArray(o)&&1==o.length&&o[0]instanceof tp?o[0]:e(n,tb(o),!1)}return t}(o):o)}(this,e,!0)}applyTransaction(t){let n,r=this.config,{base:i,compartments:o}=r;for(let e of t.effects)e.is(e8.reconfigure)?(r&&(o=new Map,r.compartments.forEach((e,t)=>o.set(t,e)),r=null),o.set(e.value.compartment,e.value.extension)):e.is(tf.reconfigure)?(r=null,i=e.value):e.is(tf.appendConfig)&&(r=null,i=tb(i).concat(e.value));n=r?t.startState.values.slice():new e(r=te.resolve(i,o,this),this.doc,this.selection,r.dynamicSlots.map(()=>null),(e,t)=>t.reconfigure(e,this),null).values;let s=t.startState.facet(ti)?t.newSelection:t.newSelection.asSingle();new e(r,t.newDoc,s,n,(e,n)=>n.update(e,t),t)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:eG.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),i=[n.range],o=tb(n.effects);for(let n=1;n<t.ranges.length;n++){let s=e(t.ranges[n]),a=this.changes(s.changes),l=a.map(r);for(let e=0;e<n;e++)i[e]=i[e].map(l);let c=r.mapDesc(a,!0);i.push(s.range.map(c)),r=r.compose(l),o=tf.mapEffects(o,l).concat(tf.mapEffects(tb(s.effects),c))}return{changes:r,selection:eG.create(i,t.mainIndex),effects:o}}changes(t=[]){return t instanceof e$?t:e$.of(t,this.doc.length,this.facet(e.lineSeparator))}toText(t){return eS.of(t.split(this.facet(e.lineSeparator)||ez))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(tt(this,t),tn(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let r=e[n];r instanceof e4&&null!=this.config.address[r.id]&&(t[n]=r.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(t,n={},r){if(!t||"string"!=typeof t.doc)throw RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let e in r)if(Object.prototype.hasOwnProperty.call(t,e)){let n=r[e],o=t[e];i.push(n.init(e=>n.spec.fromJSON(o,e)))}}return e.create({doc:t.doc,selection:eG.fromJSON(t.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(t={}){let n=te.resolve(t.extensions||[],new Map),r=t.doc instanceof eS?t.doc:eS.of((t.doc||"").split(n.staticFacet(e.lineSeparator)||ez)),i=t.selection?t.selection instanceof eG?t.selection:eG.single(t.selection.anchor,t.selection.head):eG.single(0);return eX(i,r.length),n.staticFacet(ti)||(i=i.asSingle()),new e(n,r,i,n.dynamicSlots.map(()=>null),(e,t)=>t.create(e),null)}get tabSize(){return this.facet(e.tabSize)}get lineBreak(){return this.facet(e.lineSeparator)||`
`}get readOnly(){return this.facet(tc)}phrase(t,...n){for(let n of this.facet(e.phrases))if(Object.prototype.hasOwnProperty.call(n,t)){t=n[t];break}return n.length&&(t=t.replace(/\$(\$|\d*)/g,(e,t)=>{if("$"==t)return"$";let r=+(t||1);return!r||r>n.length?e:n[r-1]})),t}languageDataAt(e,t,n=-1){let r=[];for(let i of this.facet(tr))for(let o of i(this,t,n))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){var t;return t=this.languageDataAt("wordChars",e).join(""),e=>{if(!/\S/.test(e))return tv.Space;if(function(e){if(r)return r.test(e);for(let t=0;t<e.length;t++){let n=e[t];if(/\w/.test(n)||n>"\x80"&&(n.toUpperCase()!=n.toLowerCase()||tx.test(n)))return!0}return!1}(e))return tv.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return tv.Word;return tv.Other}}wordAt(e){let{text:t,from:n,length:r}=this.doc.lineAt(e),i=this.charCategorizer(e),o=e-n,s=e-n;for(;o>0;){let e=eD(t,o,!1);if(i(t.slice(e,o))!=tv.Word)break;o=e}for(;s<r;){let e=eD(t,s);if(i(t.slice(s,e))!=tv.Word)break;s=e}return o==s?null:eG.range(o+n,s+n)}};function tk(e,t,n={}){let r={};for(let t of e)for(let e of Object.keys(t)){let i=t[e],o=r[e];if(void 0===o)r[e]=i;else if(o!==i&&void 0!==i){if(Object.hasOwnProperty.call(n,e))r[e]=n[e](o,i);else throw Error("Config merge conflict for field "+e)}}for(let e in t)void 0===r[e]&&(r[e]=t[e]);return r}tw.allowMultipleSelections=ti,tw.tabSize=eZ.define({combine:e=>e.length?e[0]:4}),tw.lineSeparator=to,tw.readOnly=tc,tw.phrases=eZ.define({compare(e,t){let n=Object.keys(e),r=Object.keys(t);return n.length==r.length&&n.every(n=>e[n]==t[n])}}),tw.languageData=tr,tw.changeFilter=ts,tw.transactionFilter=ta,tw.transactionExtender=tl,e8.reconfigure=tf.define();class tO{eq(e){return this==e}range(e,t=e){return tS.create(e,t,this)}}tO.prototype.startSide=tO.prototype.endSide=0,tO.prototype.point=!1,tO.prototype.mapMode=eL.TrackDel;let tS=class e{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(t,n,r){return new e(t,n,r)}};function tC(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class tT{constructor(e,t,n,r){this.from=e,this.to=t,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,r=0){let i=n?this.to:this.from;for(let o=r,s=i.length;;){if(o==s)return o;let r=o+s>>1,a=i[r]-e||(n?this.value[r].endSide:this.value[r].startSide)-t;if(r==o)return a>=0?o:s;a>=0?s=r:o=r+1}}between(e,t,n,r){for(let i=this.findIndex(t,-1e9,!0),o=this.findIndex(n,1e9,!1,i);i<o;i++)if(!1===r(this.from[i]+e,this.to[i]+e,this.value[i]))return!1}map(e,t){let n=[],r=[],i=[],o=-1,s=-1;for(let a=0;a<this.value.length;a++){let l=this.value[a],c=this.from[a]+e,u=this.to[a]+e,h,d;if(c==u){let e=t.mapPos(c,l.startSide,l.mapMode);if(null==e||(h=d=e,l.startSide!=l.endSide&&(d=t.mapPos(c,l.endSide))<h))continue}else if((h=t.mapPos(c,l.startSide))>(d=t.mapPos(u,l.endSide))||h==d&&l.startSide>0&&l.endSide<=0)continue;0>(d-h||l.endSide-l.startSide)||(o<0&&(o=h),l.point&&(s=Math.max(s,d-h)),n.push(l),r.push(h-o),i.push(d-o))}return{mapped:n.length?new tT(r,i,n,s):null,pos:o}}}class tA{constructor(e,t,n,r){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=r}static create(e,t,n,r){return new tA(e,t,n,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:r=0,filterTo:i=this.length}=e,o=e.filter;if(0==t.length&&!o)return this;if(n&&(t=t.slice().sort(tC)),this.isEmpty)return t.length?tA.of(t):this;let s=new tN(this,null,-1).goto(0),a=0,l=[],c=new tE;for(;s.value||a<t.length;)if(a<t.length&&(s.from-t[a].from||s.startSide-t[a].value.startSide)>=0){let e=t[a++];c.addInner(e.from,e.to,e.value)||l.push(e)}else 1==s.rangeIndex&&s.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(s.chunkIndex)<t[a].from)&&(!o||r>this.chunkEnd(s.chunkIndex)||i<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!o||r>s.to||i<s.from||o(s.from,s.to,s.value))&&(c.addInner(s.from,s.to,s.value)||l.push(tS.create(s.from,s.to,s.value))),s.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?tA.empty:this.nextLayer.update({add:l,filter:o,filterFrom:r,filterTo:i}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],r=-1;for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],s=this.chunk[i],a=e.touchesRange(o,o+s.length);if(!1===a)r=Math.max(r,s.maxPoint),t.push(s),n.push(e.mapPos(o));else if(!0===a){let{mapped:i,pos:a}=s.map(o,e);i&&(r=Math.max(r,i.maxPoint),t.push(i),n.push(a))}}let i=this.nextLayer.map(e);return 0==t.length?i:new tA(n,t,i||tA.empty,r)}between(e,t,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let i=this.chunkPos[r],o=this.chunk[r];if(t>=i&&e<=i+o.length&&!1===o.between(i,e-i,t-i,n))return}this.nextLayer.between(e,t,n)}}iter(e=0){return t_.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return t_.from(e).goto(t)}static compare(e,t,n,r,i=-1){let o=e.filter(e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i),s=t.filter(e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i),a=tM(o,s,n),l=new tD(o,a,i),c=new tD(s,a,i);n.iterGaps((e,t,n)=>tP(l,e,c,t,n,r)),n.empty&&0==n.length&&tP(l,0,c,0,0,r)}static eq(e,t,n=0,r){null==r&&(r=0x3b9ac9ff);let i=e.filter(e=>!e.isEmpty&&0>t.indexOf(e)),o=t.filter(t=>!t.isEmpty&&0>e.indexOf(t));if(i.length!=o.length)return!1;if(!i.length)return!0;let s=tM(i,o),a=new tD(i,s,0).goto(n),l=new tD(o,s,0).goto(n);for(;;){if(a.to!=l.to||!tR(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>r)return!0;a.next(),l.next()}}static spans(e,t,n,r,i=-1){let o=new tD(e,null,i).goto(t),s=t,a=o.openStart;for(;;){let e=Math.min(o.to,n);if(o.point){let n=o.activeForPoint(o.to),i=o.pointFrom<t?n.length+1:o.point.startSide<0?n.length:Math.min(n.length,a);r.point(s,e,o.point,n,i,o.pointRank),a=Math.min(o.openEnd(e),n.length)}else e>s&&(r.span(s,e,o.active,a),a=o.openEnd(e));if(o.to>n)return a+(o.point&&o.to>n?1:0);s=o.to,o.next()}}static of(e,t=!1){let n=new tE;for(let r of e instanceof tS?[e]:t?function(e){if(e.length>1)for(let t=e[0],n=1;n<e.length;n++){let r=e[n];if(tC(t,r)>0)return e.slice().sort(tC);t=r}return e}(e):e)n.add(r.from,r.to,r.value);return n.finish()}static join(e){if(!e.length)return tA.empty;let t=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let r=e[n];r!=tA.empty;r=r.nextLayer)t=new tA(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}tA.empty=new tA([],[],null,-1),tA.empty.nextLayer=tA.empty;class tE{finishChunk(e){this.chunks.push(new tT(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new tE)).add(e,t,n)}addInner(e,t,n){let r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&0>(e-this.lastFrom||n.startSide-this.last.startSide))throw Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if(0>(e-this.lastTo||t.value[0].startSide-this.last.endSide))return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(tA.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=tA.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function tM(e,t,n){let r=new Map;for(let t of e)for(let e=0;e<t.chunk.length;e++)t.chunk[e].maxPoint<=0&&r.set(t.chunk[e],t.chunkPos[e]);let i=new Set;for(let e of t)for(let t=0;t<e.chunk.length;t++){let o=r.get(e.chunk[t]);null==o||(n?n.mapPos(o):o)!=e.chunkPos[t]||null!=n&&n.touchesRange(o,o+e.chunk[t].length)||i.add(e.chunk[t])}return i}class tN{constructor(e,t,n,r=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){0>(this.to-e||this.endSide-t)&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class t_{constructor(e){this.heap=e}static from(e,t=null,n=-1){let r=[];for(let i=0;i<e.length;i++)for(let o=e[i];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&r.push(new tN(o,t,n,i));return 1==r.length?r[0]:new t_(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let e=this.heap.length>>1;e>=0;e--)tj(this.heap,e);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let e=this.heap.length>>1;e>=0;e--)tj(this.heap,e);0>(this.to-e||this.value.endSide-t)&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),tj(this.heap,0)}}}function tj(e,t){for(let n=e[t];;){let r=(t<<1)+1;if(r>=e.length)break;let i=e[r];if(r+1<e.length&&i.compare(e[r+1])>=0&&(i=e[r+1],r++),0>n.compare(i))break;e[r]=n,e[t]=i,t=r}}class tD{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=t_.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&0>(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t);)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){tI(this.active,e),tI(this.activeTo,e),tI(this.activeRank,e),this.minActive=tL(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:r,rank:i}=this.cursor;for(;t<this.activeRank.length&&(i-this.activeRank[t]||r-this.activeTo[t])>0;)t++;tz(this.active,t,n),tz(this.activeTo,t,r),tz(this.activeRank,t,i),e&&tz(e,t,this.cursor.from),this.minActive=tL(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&0>(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),n&&tI(n,r)}else if(this.cursor.value){if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let e=this.cursor.value;if(e.point){if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=e,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else this.addActive(n),this.cursor.next()}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let t=n.length-1;t>=0&&n[t]<e;t--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function tP(e,t,n,r,i,o){e.goto(t),n.goto(r);let s=r+i,a=r,l=r-t;for(;;){let t=e.to+l-n.to,r=t||e.endSide-n.endSide,i=r<0?e.to+l:n.to,c=Math.min(i,s);if(e.point||n.point?e.point&&n.point&&(e.point==n.point||e.point.eq(n.point))&&tR(e.activeForPoint(e.to),n.activeForPoint(n.to))||o.comparePoint(a,c,e.point,n.point):c>a&&!tR(e.active,n.active)&&o.compareRange(a,c,e.active,n.active),i>s)break;(t||e.openEnd!=n.openEnd)&&o.boundChange&&o.boundChange(i),a=i,r<=0&&e.next(),r>=0&&n.next()}}function tR(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n]&&!e[n].eq(t[n]))return!1;return!0}function tI(e,t){for(let n=t,r=e.length-1;n<r;n++)e[n]=e[n+1];e.pop()}function tz(e,t,n){for(let n=e.length-1;n>=t;n--)e[n+1]=e[n];e[t]=n}function tL(e,t){let n=-1,r=1e9;for(let i=0;i<t.length;i++)0>(t[i]-r||e[i].endSide-e[n].endSide)&&(n=i,r=t[i]);return n}function tq(e,t,n=e.length){let r=0;for(let i=0;i<n&&i<e.length;)9==e.charCodeAt(i)?(r+=t-r%t,i++):(r++,i=eD(e,i));return r}function t$(e,t,n,r){for(let r=0,i=0;;){if(i>=t)return r;if(r==e.length)break;i+=9==e.charCodeAt(r)?n-i%n:1,r=eD(e,r)}return!0===r?-1:e.length}function tB(e,t){let n=0;for(let t of e)null!=t&&(t*=1)>=t&&++n;return n}function tF(e){return 0|e.length}function tQ(e){return!(e>0)}function tV(e){return"object"!=typeof e||"length"in e?e:Array.from(e)}function tH(e,t){let n=0,r,i=0,o=0;if(void 0===t)for(let t of e)null!=t&&(t*=1)>=t&&(r=t-i,i+=r/++n,o+=r*(t-i));else{let s=-1;for(let a of e)null!=(a=t(a,++s,e))&&(a*=1)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i))}if(n>1)return o/(n-1)}function tU(e,t){let n=tH(e,t);return n&&Math.sqrt(n)}function tW(e,t){let n,r;if(void 0===t)for(let t of e)null!=t&&(void 0===n?t>=t&&(n=r=t):(n>t&&(n=t),r<t&&(r=t)));else{let i=-1;for(let o of e)null!=(o=t(o,++i,e))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class tG{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){let t=this._partials,n=0;for(let r=0;r<this._n&&r<32;r++){let i=t[r],o=e+i,s=Math.abs(e)<Math.abs(i)?e-(o-i):i-(o-e);s&&(t[n++]=s),e=o}return t[n]=e,this._n=n+1,this}valueOf(){let e=this._partials,t=this._n,n,r,i,o=0;if(t>0){for(o=e[--t];t>0&&(o=(n=o)+(r=e[--t]),!(i=r-(o-n))););t>0&&(i<0&&e[t-1]<0||i>0&&e[t-1]>0)&&(n=o+(r=2*i),r==n-o&&(o=n))}return o}}class tX extends Map{constructor(e,t=t0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(let[t,n]of e)this.set(t,n)}get(e){return super.get(tZ(this,e))}has(e){return super.has(tZ(this,e))}set(e,t){return super.set(tK(this,e),t)}delete(e){return super.delete(tJ(this,e))}}class tY extends Set{constructor(e,t=t0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(let t of e)this.add(t)}has(e){return super.has(tZ(this,e))}add(e){return super.add(tK(this,e))}delete(e){return super.delete(tJ(this,e))}}function tZ({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):n}function tK({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function tJ({_intern:e,_key:t},n){let r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function t0(e){return null!==e&&"object"==typeof e?e.valueOf():e}function t1(e){return e}function t2(e,...t){return t5(e,t1,t1,t)}function t4(e,t,...n){return t5(e,t1,t,n)}function t5(e,t,n,r){return function e(i,o){if(o>=r.length)return n(i);let s=new tX,a=r[o++],l=-1;for(let e of i){let t=a(e,++l,i),n=s.get(t);n?n.push(e):s.set(t,[e])}for(let[t,n]of s)s.set(t,e(n,o));return t(s)}(e,0)}function t3(e,...t){if("function"!=typeof e[Symbol.iterator])throw TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&2!==n.length||t.length>1){var r;let i=Uint32Array.from(e,(e,t)=>t);return t.length>1?(t=t.map(t=>e.map(t)),i.sort((e,n)=>{for(let r of t){let t=t7(r[e],r[n]);if(t)return t}})):(n=e.map(n),i.sort((e,t)=>t7(n[e],n[t]))),r=e,Array.from(i,e=>r[e])}return e.sort(t6(n))}function t6(e=M.a3){if(e===M.a3)return t7;if("function"!=typeof e)throw TypeError("compare is not a function");return(t,n)=>{let r=e(t,n);return r||0===r?r:(0===e(n,n))-(0===e(t,t))}}function t7(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:+(e>t))}function t8(e,t,n){return(2!==t.length?t3(t4(e,t,n),([e,t],[n,r])=>(0,M.a3)(t,r)||(0,M.a3)(e,n)):t3(t2(e,n),([e,n],[r,i])=>t(n,i)||(0,M.a3)(e,r))).map(([e])=>e)}let t9=Math.sqrt(50),ne=Math.sqrt(10),nt=Math.sqrt(2);function nn(e,t,n){let r,i,o;let s=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(s)),l=s/Math.pow(10,a),c=l>=t9?10:l>=ne?5:l>=nt?2:1;return a<0?(r=Math.round(e*(o=Math.pow(10,-a)/c)),i=Math.round(t*o),r/o<e&&++r,i/o>t&&--i,o=-o):(r=Math.round(e/(o=Math.pow(10,a)*c)),i=Math.round(t/o),r*o<e&&++r,i*o>t&&--i),i<r&&.5<=n&&n<2?nn(e,t,2*n):[r,i,o]}function nr(e,t,n){if(t*=1,e*=1,!((n*=1)>0))return[];if(e===t)return[e];let r=t<e,[i,o,s]=r?nn(t,e,n):nn(e,t,n);if(!(o>=i))return[];let a=o-i+1,l=Array(a);if(r){if(s<0)for(let e=0;e<a;++e)l[e]=-((o-e)/s);else for(let e=0;e<a;++e)l[e]=(o-e)*s}else if(s<0)for(let e=0;e<a;++e)l[e]=-((i+e)/s);else for(let e=0;e<a;++e)l[e]=(i+e)*s;return l}function ni(e,t,n){return nn(e*=1,t*=1,n*=1)[2]}function no(e,t,n){t*=1,e*=1,n*=1;let r=t<e,i=r?ni(t,e,n):ni(e,t,n);return(r?-1:1)*(i<0?-(1/i):i)}function ns(e){return Math.max(1,Math.ceil(Math.log(tB(e))/Math.LN2)+1)}function na(e,t){let n;if(void 0===t)for(let t of e)null!=t&&(n<t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function nl(e,t){let n,r=-1,i=-1;if(void 0===t)for(let t of e)++i,null!=t&&(n<t||void 0===n&&t>=t)&&(n=t,r=i);else for(let o of e)null!=(o=t(o,++i,e))&&(n<o||void 0===n&&o>=o)&&(n=o,r=i);return r}function nc(e,t){let n;if(void 0===t)for(let t of e)null!=t&&(n>t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function nu(e,t){let n,r=-1,i=-1;if(void 0===t)for(let t of e)++i,null!=t&&(n>t||void 0===n&&t>=t)&&(n=t,r=i);else for(let o of e)null!=(o=t(o,++i,e))&&(n>o||void 0===n&&o>=o)&&(n=o,r=i);return r}function nh(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function nd(e,t=M.a3){let n,r=!1;if(1===t.length){let i;for(let o of e){let e=t(o);(r?(0,M.a3)(e,i)>0:0===(0,M.a3)(e,e))&&(n=o,i=e,r=!0)}}else for(let i of e)(r?t(i,n)>0:0===t(i,i))&&(n=i,r=!0);return n}function nf(e,t,n){if(!(!(r=(e=Float64Array.from((0,M.a5)(e,n))).length)||isNaN(t*=1))){if(t<=0||r<2)return nc(e);if(t>=1)return na(e);var r,i=(r-1)*t,o=Math.floor(i),s=na((function e(t,n,r=0,i=1/0,o){if(n=Math.floor(n),r=Math.floor(Math.max(0,r)),i=Math.floor(Math.min(t.length-1,i)),!(r<=n&&n<=i))return t;for(o=void 0===o?t7:t6(o);i>r;){if(i-r>600){let s=i-r+1,a=n-r+1,l=Math.log(s),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(s-c)/s)*(a-s/2<0?-1:1),h=Math.max(r,Math.floor(n-a*c/s+u)),d=Math.min(i,Math.floor(n+(s-a)*c/s+u));e(t,n,h,d,o)}let s=t[n],a=r,l=i;for(nh(t,r,n),o(t[i],s)>0&&nh(t,r,i);a<l;){for(nh(t,a,l),++a,--l;0>o(t[a],s);)++a;for(;o(t[l],s)>0;)--l}0===o(t[r],s)?nh(t,r,l):nh(t,++l,i),l<=n&&(r=l+1),n<=l&&(i=l-1)}return t})(e,o).subarray(0,o+1));return s+(nc(e.subarray(o+1))-s)*(i-o)}}function np(e,t,n){let r=tB(e),i=nf(e,.75)-nf(e,.25);return r&&i?Math.ceil((n-t)/(2*i*Math.pow(r,-1/3))):1}function nm(e,t,n){let r=tB(e),i=tU(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}function ng(e,t){return nf(e,.5,t)}function ny(e){return Array.from(function*(e){for(let t of e)yield*t}(e))}function nb(e,t){let n=new tX;if(void 0===t)for(let t of e)null!=t&&t>=t&&n.set(t,(n.get(t)||0)+1);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&i>=i&&n.set(i,(n.get(i)||0)+1)}let r,i=0;for(let[e,t]of n)t>i&&(i=t,r=e);return r}function nv(e,t){let n=0;if(void 0===t)for(let t of e)(t*=1)&&(n+=t);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function nx(e){if("function"!=typeof e[Symbol.iterator])throw TypeError("values is not iterable");return Array.from(e).reverse()}function nw(e){return e}function nk(e){return"translate("+e+",0)"}function nO(){return!this.__axis}function nS(e){return"string"==typeof e?new _.S([[document.querySelector(e)]],[document.documentElement]):new _.S([[e]],_.r)}let nC=Math.PI/180,nT=180/Math.PI,nA=4/29,nE=6/29,nM=6/29*3*(6/29),nN=6/29*(6/29)*(6/29);function n_(e){if(e instanceof nD)return new nD(e.l,e.a,e.b,e.opacity);if(e instanceof nq)return n$(e);e instanceof _.R||(e=(0,_.b)(e));var t,n,r=nz(e.r),i=nz(e.g),o=nz(e.b),s=nP((.2225045*r+.7168786*i+.0606169*o)/1);return r===i&&i===o?t=n=s:(t=nP((.4360747*r+.3850649*i+.1430804*o)/.96422),n=nP((.0139322*r+.0971045*i+.7141733*o)/.82521)),new nD(116*s-16,500*(t-s),200*(s-n),e.opacity)}function nj(e,t,n,r){return 1==arguments.length?n_(e):new nD(e,t,n,r??1)}function nD(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function nP(e){return e>nN?Math.pow(e,1/3):e/nM+nA}function nR(e){return e>nE?e*e*e:nM*(e-nA)}function nI(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function nz(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function nL(e,t,n,r){return 1==arguments.length?function(e){if(e instanceof nq)return new nq(e.h,e.c,e.l,e.opacity);if(e instanceof nD||(e=n_(e)),0===e.a&&0===e.b)return new nq(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*nT;return new nq(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}(e):new nq(e,t,n,r??1)}function nq(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function n$(e){if(isNaN(e.h))return new nD(e.l,0,0,e.opacity);var t=e.h*nC;return new nD(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}(0,_.d)(nD,nj,(0,_.e)(_.C,{brighter(e){return new nD(this.l+18*(e??1),this.a,this.b,this.opacity)},darker(e){return new nD(this.l-18*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=.96422*nR(t),e=+nR(e),n=.82521*nR(n),new _.R(nI(3.1338561*t-1.6168667*e-.4906146*n),nI(-.9787684*t+1.9161415*e+.033454*n),nI(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),(0,_.d)(nq,nL,(0,_.e)(_.C,{brighter(e){return new nq(this.h,this.c,this.l+18*(e??1),this.opacity)},darker(e){return new nq(this.h,this.c,this.l-18*(e??1),this.opacity)},rgb(){return n$(this).rgb()}}));var nB=-1.78277*.29227-.1347134789;function nF(e,t,n,r){return 1==arguments.length?function(e){if(e instanceof nQ)return new nQ(e.h,e.s,e.l,e.opacity);e instanceof _.R||(e=(0,_.b)(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(nB*r+-1.7884503806*t-3.5172982438*n)/(nB+-1.7884503806-3.5172982438),o=r-i,s=-((1.97294*(n-i)- -.29227*o)/.90649),a=Math.sqrt(s*s+o*o)/(1.97294*i*(1-i)),l=a?Math.atan2(s,o)*nT-120:NaN;return new nQ(l<0?l+360:l,a,i,e.opacity)}(e):new nQ(e,t,n,r??1)}function nQ(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function nV(e,t){var n,r,i=typeof t;return null==t||"boolean"===i?(0,_.j)(t):("number"===i?_.k:"string"===i?(r=(0,_.n)(t))?(t=r,_.l):_.m:t instanceof _.n?_.l:t instanceof Date?function(e,t){var n=new Date;return e*=1,t*=1,function(r){return n.setTime(e*(1-r)+t*r),n}}:!ArrayBuffer.isView(n=t)||n instanceof DataView?Array.isArray(t)?function(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=Array(i),s=Array(r);for(n=0;n<i;++n)o[n]=nV(e[n],t[n]);for(;n<r;++n)s[n]=t[n];return function(e){for(n=0;n<i;++n)s[n]=o[n](e);return s}}:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?function(e,t){var n,r={},i={};for(n in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)n in e?r[n]=nV(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}:_.k:function(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}})(e,t)}function nH(e,t){return e*=1,t*=1,function(n){return Math.round(e*(1-n)+t*n)}}(0,_.d)(nQ,nF,(0,_.e)(_.C,{brighter(e){return e=null==e?_.h:Math.pow(_.h,e),new nQ(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?_.c:Math.pow(_.c,e),new nQ(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*nC,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new _.R(255*(t+n*(-.14861*r+1.78277*i)),255*(t+n*(-.29227*r+-.90649*i)),255*(t+1.97294*r*n),this.opacity)}}));let nU=(r2=_.s,function(e,t){var n=r2((e=(0,_.o)(e)).h,(t=(0,_.o)(t)).h),r=(0,_.q)(e.s,t.s),i=(0,_.q)(e.l,t.l),o=(0,_.q)(e.opacity,t.opacity);return function(t){return e.h=n(t),e.s=r(t),e.l=i(t),e.opacity=o(t),e+""}}),nW=(r4=_.s,function(e,t){var n=r4((e=nL(e)).h,(t=nL(t)).h),r=(0,_.q)(e.c,t.c),i=(0,_.q)(e.l,t.l),o=(0,_.q)(e.opacity,t.opacity);return function(t){return e.h=n(t),e.c=r(t),e.l=i(t),e.opacity=o(t),e+""}});function nG(e){return function t(n){function r(t,r){var i=e((t=nF(t)).h,(r=nF(r)).h),o=(0,_.q)(t.s,r.s),s=(0,_.q)(t.l,r.l),a=(0,_.q)(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=o(e),t.l=s(Math.pow(e,n)),t.opacity=a(e),t+""}}return n*=1,r.gamma=t,r}(1)}nG(_.s);var nX=nG(_.q);function nY(e,t){void 0===t&&(t=e,e=nV);for(var n=0,r=t.length-1,i=t[0],o=Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return o[t](e-t)}}function nZ(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}let nK=Math.PI,nJ=2*nK,n0=nJ-1e-6;function n1(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class n2{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?n1:function(e){let t=Math.floor(e);if(!(t>=0))throw Error(`invalid digits: ${e}`);if(t>15)return n1;let n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,r){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(e,t,n,r,i,o){this._append`C${+e},${+t},${+n},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(e,t,n,r,i){if(e*=1,t*=1,n*=1,r*=1,(i*=1)<0)throw Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,a=n-e,l=r-t,c=o-e,u=s-t,h=c*c+u*u;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(h>1e-6){if(Math.abs(u*a-l*c)>1e-6&&i){let d=n-o,f=r-s,p=a*a+l*l,m=Math.sqrt(p),g=Math.sqrt(h),y=i*Math.tan((nK-Math.acos((p+h-(d*d+f*f))/(2*m*g)))/2),b=y/g,v=y/m;Math.abs(b-1)>1e-6&&this._append`L${e+b*c},${t+b*u}`,this._append`A${i},${i},0,0,${+(u*d>c*f)},${this._x1=e+v*a},${this._y1=t+v*l}`}else this._append`L${this._x1=e},${this._y1=t}`}}arc(e,t,n,r,i,o){if(e*=1,t*=1,n*=1,o=!!o,n<0)throw Error(`negative radius: ${n}`);let s=n*Math.cos(r),a=n*Math.sin(r),l=e+s,c=t+a,u=1^o,h=o?r-i:i-r;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-c)>1e-6)&&this._append`L${l},${c}`,n&&(h<0&&(h=h%nJ+nJ),h>n0?this._append`A${n},${n},0,1,${u},${e-s},${t-a}A${n},${n},0,1,${u},${this._x1=l},${this._y1=c}`:h>1e-6&&this._append`A${n},${n},0,${+(h>=nK)},${u},${this._x1=e+n*Math.cos(i)},${this._y1=t+n*Math.sin(i)}`)}rect(e,t,n,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n*=1}v${+r}h${-n}Z`}toString(){return this._}}function n4(e=3){return new n2(+e)}function n5(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function n3(e){return(e=n5(Math.abs(e)))?e[1]:NaN}var n6=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function n7(e){var t;if(!(t=n6.exec(e)))throw Error("invalid format: "+e);return new n8({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function n8(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function n9(e,t){var n=n5(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+Array(i-r.length+2).join("0")}n7.prototype=n8.prototype,n8.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};let re={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>n9(100*e,t),r:n9,s:function(e,t){var n=n5(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(r5=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=r.length;return o===s?r:o>s?r+Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+Array(1-o).join("0")+n5(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function rt(e){return e}var rn=Array.prototype.map,rr=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];r6=(r3=function(e){var t,n,r,i=void 0===e.grouping||void 0===e.thousands?rt:(t=rn.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],s=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(e.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[s=(s+1)%t.length];return o.reverse().join(n)}),o=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",l=void 0===e.numerals?rt:(r=rn.call(e.numerals,String),function(e){return e.replace(/[0-9]/g,function(e){return r[+e]})}),c=void 0===e.percent?"%":e.percent+"",u=void 0===e.minus?"":e.minus+"",h=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=n7(e)).fill,n=e.align,r=e.sign,d=e.symbol,f=e.zero,p=e.width,m=e.comma,g=e.precision,y=e.trim,b=e.type;"n"===b?(m=!0,b="g"):re[b]||(void 0===g&&(g=12),y=!0,b="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var v="$"===d?o:"#"===d&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",x="$"===d?s:/[%p]/.test(b)?c:"",w=re[b],k=/[defgprs%]/.test(b);function O(e){var o,s,c,d=v,O=x;if("c"===b)O=w(e)+O,e="";else{var S=(e*=1)<0||1/e<0;if(e=isNaN(e)?h:w(Math.abs(e),g),y&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),S&&0==+e&&"+"!==r&&(S=!1),d=(S?"("===r?r:u:"-"===r||"("===r?"":r)+d,O=("s"===b?rr[8+r5/3]:"")+O+(S&&"("===r?")":""),k){for(o=-1,s=e.length;++o<s;)if(48>(c=e.charCodeAt(o))||c>57){O=(46===c?a+e.slice(o+1):e.slice(o))+O,e=e.slice(0,o);break}}}m&&!f&&(e=i(e,1/0));var C=d.length+e.length+O.length,T=C<p?Array(p-C+1).join(t):"";switch(m&&f&&(e=i(T+e,T.length?p-O.length:1/0),T=""),n){case"<":e=d+e+O+T;break;case"=":e=d+T+e+O;break;case"^":e=T.slice(0,C=T.length>>1)+d+e+O+T.slice(C);break;default:e=T+d+e+O}return l(e)}return g=void 0===g?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),O.toString=function(){return e+""},O}return{format:d,formatPrefix:function(e,t){var n=d(((e=n7(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(n3(t)/3))),i=Math.pow(10,-r),o=rr[8+r/3];return function(e){return n(i*e)+o}}}}({thousands:",",grouping:[3],currency:["$",""]})).format,r7=r3.formatPrefix;var ri=Math.PI,ro=ri/2,rs=ri/4,ra=2*ri,rl=180/ri,rc=ri/180,ru=Math.abs,rh=Math.atan,rd=Math.atan2,rf=Math.cos,rp=Math.exp,rm=Math.log,rg=Math.pow,ry=Math.sin,rb=Math.sign||function(e){return e>0?1:e<0?-1:0},rv=Math.sqrt,rx=Math.tan;function rw(e){return e>1?0:e<-1?ri:Math.acos(e)}function rk(e){return e>1?ro:e<-1?-ro:Math.asin(e)}function rO(){}function rS(e,t){e&&rT.hasOwnProperty(e.type)&&rT[e.type](e,t)}var rC={Feature:function(e,t){rS(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)rS(n[r].geometry,t)}},rT={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){rA(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)rA(n[r],t,0)},Polygon:function(e,t){rE(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)rE(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)rS(n[r],t)}};function rA(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function rE(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)rA(e[n],t,1);t.polygonEnd()}function rM(e,t){e&&rC.hasOwnProperty(e.type)?rC[e.type](e,t):rS(e,t)}function rN(e){return[rd(e[1],e[0]),rk(e[2])]}function r_(e){var t=e[0],n=e[1],r=rf(n);return[r*rf(t),r*ry(t),ry(n)]}function rj(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function rD(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function rP(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function rR(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function rI(e){var t=rv(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function rz(e,t){function n(n,r){return t((n=e(n,r))[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function rL(e,t){return ru(e)>ri&&(e-=Math.round(e/ra)*ra),[e,t]}function rq(e,t,n){return(e%=ra)?t||n?rz(rB(e),rF(t,n)):rB(e):t||n?rF(t,n):rL}function r$(e){return function(t,n){return ru(t+=e)>ri&&(t-=Math.round(t/ra)*ra),[t,n]}}function rB(e){var t=r$(e);return t.invert=r$(-e),t}function rF(e,t){var n=rf(e),r=ry(e),i=rf(t),o=ry(t);function s(e,t){var s=rf(t),a=rf(e)*s,l=ry(e)*s,c=ry(t),u=c*n+a*r;return[rd(l*i-u*o,a*n-c*r),rk(u*i+l*o)]}return s.invert=function(e,t){var s=rf(t),a=rf(e)*s,l=ry(e)*s,c=ry(t),u=c*i-l*o;return[rd(l*i+c*o,a*n+u*r),rk(u*n-a*r)]},s}function rQ(e,t){t=r_(t),t[0]-=e,rI(t);var n=rw(-t[1]);return((0>-t[2]?-n:n)+ra-1e-6)%ra}function rV(){var e,t=[];return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){t.push(e=[])},lineEnd:rO,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function rH(e,t){return 1e-6>ru(e[0]-t[0])&&1e-6>ru(e[1]-t[1])}function rU(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function rW(e,t,n,r,i){var o,s,a=[],l=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],s=e[t];if(rH(r,s)){if(!r[2]&&!s[2]){for(i.lineStart(),o=0;o<t;++o)i.point((r=e[o])[0],r[1]);i.lineEnd();return}s[0]+=2e-6}a.push(n=new rU(r,e,null,!0)),l.push(n.o=new rU(r,null,n,!1)),a.push(n=new rU(s,e,null,!1)),l.push(n.o=new rU(s,null,n,!0))}}),a.length){for(l.sort(t),rG(a),rG(l),o=0,s=l.length;o<s;++o)l[o].e=n=!n;for(var c,u,h=a[0];;){for(var d=h,f=!0;d.v;)if((d=d.n)===h)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(o=0,s=c.length;o<s;++o)i.point((u=c[o])[0],u[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(f)for(o=(c=d.p.z).length-1;o>=0;--o)i.point((u=c[o])[0],u[1]);else r(d.x,d.p.x,-1,i);d=d.p}c=(d=d.o).z,f=!f}while(!d.v);i.lineEnd()}}}function rG(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function rX(e){return ru(e[0])<=ri?e[0]:rb(e[0])*((ru(e[0])+ri)%ra-ri)}function rY(e,t,n,r){return function(i){var o,s,a,l=t(i),c=rV(),u=t(c),h=!1,d={point:f,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=b,d.lineEnd=v,s=[],o=[]},polygonEnd:function(){d.point=f,d.lineStart=m,d.lineEnd=g,s=ny(s);var e=function(e,t){var n=rX(t),r=t[1],i=ry(r),o=[ry(n),-rf(n),0],s=0,a=0,l=new tG;1===i?r=ro+1e-6:-1===i&&(r=-ro-1e-6);for(var c=0,u=e.length;c<u;++c)if(d=(h=e[c]).length)for(var h,d,f=h[d-1],p=rX(f),m=f[1]/2+rs,g=ry(m),y=rf(m),b=0;b<d;++b,p=x,g=k,y=O,f=v){var v=h[b],x=rX(v),w=v[1]/2+rs,k=ry(w),O=rf(w),S=x-p,C=S>=0?1:-1,T=C*S,A=T>ri,E=g*k;if(l.add(rd(E*C*ry(T),y*O+E*rf(T))),s+=A?S+C*ra:S,A^p>=n^x>=n){var M=rD(r_(f),r_(v));rI(M);var N=rD(o,M);rI(N);var _=(A^S>=0?-1:1)*rk(N[2]);(r>_||r===_&&(M[0]||M[1]))&&(a+=A^S>=0?1:-1)}}return(s<-1e-6||s<1e-6&&l<-1e-12)^1&a}(o,r);s.length?(h||(i.polygonStart(),h=!0),rW(s,rK,e,n,i)):e&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),s=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function f(t,n){e(t,n)&&i.point(t,n)}function p(e,t){l.point(e,t)}function m(){d.point=p,l.lineStart()}function g(){d.point=f,l.lineEnd()}function y(e,t){a.push([e,t]),u.point(e,t)}function b(){u.lineStart(),a=[]}function v(){y(a[0][0],a[0][1]),u.lineEnd();var e,t,n,r,l=u.clean(),d=c.result(),f=d.length;if(a.pop(),o.push(a),a=null,f){if(1&l){if((t=(n=d[0]).length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),e=0;e<t;++e)i.point((r=n[e])[0],r[1]);i.lineEnd()}return}f>1&&2&l&&d.push(d.pop().concat(d.shift())),s.push(d.filter(rZ))}}return d}}function rZ(e){return e.length>1}function rK(e,t){return((e=e.x)[0]<0?e[1]-ro-1e-6:ro-e[1])-((t=t.x)[0]<0?t[1]-ro-1e-6:ro-t[1])}rL.invert=rL;let rJ=rY(function(){return!0},function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,s){var a,l,c,u,h,d,f,p=o>0?ri:-ri,m=ru(o-n);1e-6>ru(m-ri)?(e.point(n,r=(r+s)/2>0?ro:-ro),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(p,r),e.point(o,r),t=0):i!==p&&m>=ri&&(1e-6>ru(n-i)&&(n-=1e-6*i),1e-6>ru(o-p)&&(o-=1e-6*p),a=n,l=r,c=o,u=s,r=ru(f=ry(a-c))>1e-6?rh((ry(l)*(d=rf(u))*ry(c)-ry(u)*(h=rf(l))*ry(a))/(h*d*f)):(l+u)/2,e.point(i,r),e.lineEnd(),e.lineStart(),e.point(p,r),t=0),e.point(n=o,r=s),i=p},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}},function(e,t,n,r){var i;if(null==e)i=n*ro,r.point(-ri,i),r.point(0,i),r.point(ri,i),r.point(ri,0),r.point(ri,-i),r.point(0,-i),r.point(-ri,-i),r.point(-ri,0),r.point(-ri,i);else if(ru(e[0]-t[0])>1e-6){var o=e[0]<t[0]?ri:-ri;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])},[-ri,-ro]);function r0(e,t,n,r){function i(i,o){return e<=i&&i<=n&&t<=o&&o<=r}function o(i,o,a,c){var u=0,h=0;if(null==i||(u=s(i,a))!==(h=s(o,a))||0>l(i,o)^a>0)do c.point(0===u||3===u?e:n,u>1?r:t);while((u=(u+a+4)%4)!==h);else c.point(o[0],o[1])}function s(r,i){return 1e-6>ru(r[0]-e)?i>0?0:3:1e-6>ru(r[0]-n)?i>0?2:1:1e-6>ru(r[1]-t)?+(i>0):i>0?3:2}function a(e,t){return l(e.x,t.x)}function l(e,t){var n=s(e,1),r=s(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(s){var l,c,u,h,d,f,p,m,g,y,b,v=s,x=rV(),w={point:k,lineStart:function(){w.point=O,c&&c.push(u=[]),y=!0,g=!1,p=m=NaN},lineEnd:function(){l&&(O(h,d),f&&g&&x.rejoin(),l.push(x.result())),w.point=k,g&&v.lineEnd()},polygonStart:function(){v=x,l=[],c=[],b=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,i=c.length;n<i;++n)for(var o,s,a=c[n],l=1,u=a.length,h=a[0],d=h[0],f=h[1];l<u;++l)o=d,s=f,d=(h=a[l])[0],f=h[1],s<=r?f>r&&(d-o)*(r-s)>(f-s)*(e-o)&&++t:f<=r&&(d-o)*(r-s)<(f-s)*(e-o)&&--t;return t}(),n=b&&t,i=(l=ny(l)).length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),i&&rW(l,a,t,o,s),s.polygonEnd()),v=s,l=c=u=null}};function k(e,t){i(e,t)&&v.point(e,t)}function O(o,s){var a=i(o,s);if(c&&u.push([o,s]),y)h=o,d=s,f=a,y=!1,a&&(v.lineStart(),v.point(o,s));else if(a&&g)v.point(o,s);else{var l=[p=Math.max(-1e9,Math.min(1e9,p)),m=Math.max(-1e9,Math.min(1e9,m))],x=[o=Math.max(-1e9,Math.min(1e9,o)),s=Math.max(-1e9,Math.min(1e9,s))];!function(e,t,n,r,i,o){var s,a=e[0],l=e[1],c=t[0],u=t[1],h=0,d=1,f=c-a,p=u-l;if(s=n-a,!(!f&&s>0)){if(s/=f,f<0){if(s<h)return;s<d&&(d=s)}else if(f>0){if(s>d)return;s>h&&(h=s)}if(s=i-a,!(!f&&s<0)){if(s/=f,f<0){if(s>d)return;s>h&&(h=s)}else if(f>0){if(s<h)return;s<d&&(d=s)}if(s=r-l,!(!p&&s>0)){if(s/=p,p<0){if(s<h)return;s<d&&(d=s)}else if(p>0){if(s>d)return;s>h&&(h=s)}if(s=o-l,!(!p&&s<0)){if(s/=p,p<0){if(s>d)return;s>h&&(h=s)}else if(p>0){if(s<h)return;s<d&&(d=s)}return h>0&&(e[0]=a+h*f,e[1]=l+h*p),d<1&&(t[0]=a+d*f,t[1]=l+d*p),!0}}}}}(l,x,e,t,n,r)?a&&(v.lineStart(),v.point(o,s),b=!1):(g||(v.lineStart(),v.point(l[0],l[1])),v.point(x[0],x[1]),a||v.lineEnd(),b=!1)}p=o,m=s,g=a}return w}}let r1=e=>e;var r2,r4,r5,r3,r6,r7,r8,r9,ie,ir,ii=new tG,io=new tG,is={point:rO,lineStart:rO,lineEnd:rO,polygonStart:function(){is.lineStart=ia,is.lineEnd=iu},polygonEnd:function(){is.lineStart=is.lineEnd=is.point=rO,ii.add(ru(io)),io=new tG},result:function(){var e=ii/2;return ii=new tG,e}};function ia(){is.point=il}function il(e,t){is.point=ic,r8=ie=e,r9=ir=t}function ic(e,t){io.add(ir*e-ie*t),ie=e,ir=t}function iu(){ic(r8,r9)}var ih,id,ip,im,ig=1/0,iy=1/0,ib=-1/0,iv=ib,ix={point:function(e,t){e<ig&&(ig=e),e>ib&&(ib=e),t<iy&&(iy=t),t>iv&&(iv=t)},lineStart:rO,lineEnd:rO,polygonStart:rO,polygonEnd:rO,result:function(){var e=[[ig,iy],[ib,iv]];return ib=iv=-(iy=ig=1/0),e}},iw=0,ik=0,iO=0,iS=0,iC=0,iT=0,iA=0,iE=0,iM=0,iN={point:i_,lineStart:ij,lineEnd:iR,polygonStart:function(){iN.lineStart=iI,iN.lineEnd=iz},polygonEnd:function(){iN.point=i_,iN.lineStart=ij,iN.lineEnd=iR},result:function(){var e=iM?[iA/iM,iE/iM]:iT?[iS/iT,iC/iT]:iO?[iw/iO,ik/iO]:[NaN,NaN];return iw=ik=iO=iS=iC=iT=iA=iE=iM=0,e}};function i_(e,t){iw+=e,ik+=t,++iO}function ij(){iN.point=iD}function iD(e,t){iN.point=iP,i_(ip=e,im=t)}function iP(e,t){var n=e-ip,r=t-im,i=rv(n*n+r*r);iS+=i*(ip+e)/2,iC+=i*(im+t)/2,iT+=i,i_(ip=e,im=t)}function iR(){iN.point=i_}function iI(){iN.point=iL}function iz(){iq(ih,id)}function iL(e,t){iN.point=iq,i_(ih=ip=e,id=im=t)}function iq(e,t){var n=e-ip,r=t-im,i=rv(n*n+r*r);iS+=i*(ip+e)/2,iC+=i*(im+t)/2,iT+=i,iA+=(i=im*e-ip*t)*(ip+e),iE+=i*(im+t),iM+=3*i,i_(ip=e,im=t)}function i$(e){this._context=e}i$.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ra)}},result:rO};var iB,iF,iQ,iV,iH,iU=new tG,iW={point:rO,lineStart:function(){iW.point=iG},lineEnd:function(){iB&&iX(iF,iQ),iW.point=rO},polygonStart:function(){iB=!0},polygonEnd:function(){iB=null},result:function(){var e=+iU;return iU=new tG,e}};function iG(e,t){iW.point=iX,iF=iV=e,iQ=iH=t}function iX(e,t){iV-=e,iH-=t,iU.add(rv(iV*iV+iH*iH)),iV=e,iH=t}class iY{constructor(e){this._append=null==e?iZ:function(e){let t=Math.floor(e);if(!(t>=0))throw RangeError(`invalid digits: ${e}`);if(t>15)return iZ;if(t!==i){let e=10**t;i=t,o=function(t){let n=1;this._+=t[0];for(let r=t.length;n<r;++n)this._+=Math.round(arguments[n]*e)/e+t[n]}}return o}(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(e,t){switch(this._point){case 0:this._append`M${e},${t}`,this._point=1;break;case 1:this._append`L${e},${t}`;break;default:if(this._append`M${e},${t}`,this._radius!==s||this._append!==o){let e=this._radius,t=this._;this._="",this._append`m0,${e}a${e},${e} 0 1,1 0,${-2*e}a${e},${e} 0 1,1 0,${2*e}z`,s=e,o=this._append,a=this._,this._=t}this._+=a}}result(){let e=this._;return this._="",e.length?e:null}}function iZ(e){let t=1;this._+=e[0];for(let n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function iK(e,t){let n=3,r=4.5,i,o;function s(e){return e&&("function"==typeof r&&o.pointRadius(+r.apply(this,arguments)),rM(e,i(o))),o.result()}return s.area=function(e){return rM(e,i(is)),is.result()},s.measure=function(e){return rM(e,i(iW)),iW.result()},s.bounds=function(e){return rM(e,i(ix)),ix.result()},s.centroid=function(e){return rM(e,i(iN)),iN.result()},s.projection=function(t){return arguments.length?(i=null==t?(e=null,r1):(e=t).stream,s):e},s.context=function(e){return arguments.length?(o=null==e?(t=null,new iY(n)):new i$(t=e),"function"!=typeof r&&o.pointRadius(r),s):t},s.pointRadius=function(e){return arguments.length?(r="function"==typeof e?e:(o.pointRadius(+e),+e),s):r},s.digits=function(e){if(!arguments.length)return n;if(null==e)n=null;else{let t=Math.floor(e);if(!(t>=0))throw RangeError(`invalid digits: ${e}`);n=t}return null===t&&(o=new iY(n)),s},s.projection(e).digits(n).context(t)}function iJ(e){return{stream:i0(e)}}function i0(e){return function(t){var n=new i1;for(var r in e)n[r]=e[r];return n.stream=t,n}}function i1(){}function i2(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),rM(n,e.stream(ix)),t(ix.result()),null!=r&&e.clipExtent(r),e}function i4(e,t,n){return i2(e,function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),s=+t[0][0]+(r-o*(n[1][0]+n[0][0]))/2,a=+t[0][1]+(i-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([s,a])},n)}function i5(e,t,n){return i4(e,[[0,0],t],n)}function i3(e,t,n){return i2(e,function(n){var r=+t,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,s=-i*n[0][1];e.scale(150*i).translate([o,s])},n)}function i6(e,t,n){return i2(e,function(n){var r=+t,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],s=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([o,s])},n)}i1.prototype={constructor:i1,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var i7=rf(30*rc);function i8(e,t){var n;return+t?function(e,t){function n(r,i,o,s,a,l,c,u,h,d,f,p,m,g){var y=c-r,b=u-i,v=y*y+b*b;if(v>4*t&&m--){var x=s+d,w=a+f,k=l+p,O=rv(x*x+w*w+k*k),S=rk(k/=O),C=1e-6>ru(ru(k)-1)||1e-6>ru(o-h)?(o+h)/2:rd(w,x),T=e(C,S),A=T[0],E=T[1],M=A-r,N=E-i,_=b*M-y*N;(_*_/v>t||ru((y*M+b*N)/v-.5)>.3||s*d+a*f+l*p<i7)&&(n(r,i,o,s,a,l,A,E,C,x/=O,w/=O,k,m,g),g.point(A,E),n(A,E,C,x,w,k,c,u,h,d,f,p,m,g))}}return function(t){var r,i,o,s,a,l,c,u,h,d,f,p,m={point:g,lineStart:y,lineEnd:v,polygonStart:function(){t.polygonStart(),m.lineStart=x},polygonEnd:function(){t.polygonEnd(),m.lineStart=y}};function g(n,r){n=e(n,r),t.point(n[0],n[1])}function y(){u=NaN,m.point=b,t.lineStart()}function b(r,i){var o=r_([r,i]),s=e(r,i);n(u,h,c,d,f,p,u=s[0],h=s[1],c=r,d=o[0],f=o[1],p=o[2],16,t),t.point(u,h)}function v(){m.point=g,t.lineEnd()}function x(){y(),m.point=w,m.lineEnd=k}function w(e,t){b(r=e,t),i=u,o=h,s=d,a=f,l=p,m.point=b}function k(){n(u,h,c,d,f,p,i,o,r,s,a,l,16,t),m.lineEnd=v,v()}return m}}(e,t):(n=e,i0({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}}))}var i9=i0({point:function(e,t){this.stream.point(e*rc,t*rc)}});function oe(e,t,n,r,i,o){if(!o)return function(e,t,n,r,i){function o(o,s){return[t+e*(o*=r),n-e*(s*=i)]}return o.invert=function(o,s){return[(o-t)/e*r,(n-s)/e*i]},o}(e,t,n,r,i);var s=rf(o),a=ry(o),l=s*e,c=a*e,u=s/e,h=a/e,d=(a*n-s*t)/e,f=(a*t+s*n)/e;function p(e,o){return[l*(e*=r)-c*(o*=i)+t,n-c*e-l*o]}return p.invert=function(e,t){return[r*(u*e-h*t+d),i*(f-h*e-u*t)]},p}function ot(e){return on(function(){return e})()}function on(e){var t,n,r,i,o,s,a,l,c,u,h=150,d=480,f=250,p=0,m=0,g=0,y=0,b=0,v=0,x=1,w=1,k=null,O=rJ,S=null,C=r1,T=.5;function A(e){return l(e[0]*rc,e[1]*rc)}function E(e){return(e=l.invert(e[0],e[1]))&&[e[0]*rl,e[1]*rl]}function M(){var e=oe(h,0,0,x,w,v).apply(null,t(p,m)),r=oe(h,d-e[0],f-e[1],x,w,v);return n=rq(g,y,b),a=rz(t,r),l=rz(n,a),s=i8(a,T),N()}function N(){return c=u=null,A}return A.stream=function(e){var t;return c&&u===e?c:c=i9((t=n,i0({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}}))(O(s(C(u=e)))))},A.preclip=function(e){return arguments.length?(O=e,k=void 0,N()):O},A.postclip=function(e){return arguments.length?(C=e,S=r=i=o=null,N()):C},A.clipAngle=function(e){return arguments.length?(O=+e?function(e){var t=rf(e),n=2*rc,r=t>0,i=ru(t)>1e-6;function o(e,n){return rf(e)*rf(n)>t}function s(e,n,r){var i=r_(e),o=r_(n),s=[1,0,0],a=rD(i,o),l=rj(a,a),c=a[0],u=l-c*c;if(!u)return!r&&e;var h=rD(s,a),d=rR(s,t*l/u);rP(d,rR(a,-t*c/u));var f=rj(d,h),p=rj(h,h),m=f*f-p*(rj(d,d)-1);if(!(m<0)){var g=rv(m),y=rR(h,(-f-g)/p);if(rP(y,d),y=rN(y),!r)return y;var b,v=e[0],x=n[0],w=e[1],k=n[1];x<v&&(b=v,v=x,x=b);var O=x-v,S=1e-6>ru(O-ri);if(!S&&k<w&&(b=w,w=k,k=b),S||O<1e-6?S?w+k>0^y[1]<(1e-6>ru(y[0]-v)?w:k):w<=y[1]&&y[1]<=k:O>ri^(v<=y[0]&&y[0]<=x)){var C=rR(h,(-f+g)/p);return rP(C,d),[y,rN(C)]}}}function a(t,n){var i=r?e:ri-e,o=0;return t<-i?o|=1:t>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return rY(o,function(e){var t,n,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(h,d){var f,p,m=[h,d],g=o(h,d),y=r?g?0:a(h,d):g?a(h+(h<0?ri:-ri),d):0;(!t&&(c=l=g)&&e.lineStart(),g!==l&&(!(p=s(t,m))||rH(t,p)||rH(m,p))&&(m[2]=1),g!==l)?(u=0,g?(e.lineStart(),p=s(m,t),e.point(p[0],p[1])):(p=s(t,m),e.point(p[0],p[1],2),e.lineEnd()),t=p):i&&t&&r^g&&!(y&n)&&(f=s(m,t,!0))&&(u=0,r?(e.lineStart(),e.point(f[0][0],f[0][1]),e.point(f[1][0],f[1][1]),e.lineEnd()):(e.point(f[1][0],f[1][1]),e.lineEnd(),e.lineStart(),e.point(f[0][0],f[0][1],3))),!g||t&&rH(t,m)||e.point(m[0],m[1]),t=m,l=g,n=y},lineEnd:function(){l&&e.lineEnd(),t=null},clean:function(){return u|(c&&l)<<1}}},function(t,r,i,o){!function(e,t,n,r,i,o){if(n){var s=rf(t),a=ry(t),l=r*n;null==i?(i=t+r*ra,o=t-l/2):(i=rQ(s,i),o=rQ(s,o),(r>0?i<o:i>o)&&(i+=r*ra));for(var c,u=i;r>0?u>o:u<o;u-=l)c=rN([s,-a*rf(u),-a*ry(u)]),e.point(c[0],c[1])}}(o,e,n,i,t,r)},r?[0,-e]:[-ri,e-ri])}(k=e*rc):(k=null,rJ),N()):k*rl},A.clipExtent=function(e){return arguments.length?(C=null==e?(S=r=i=o=null,r1):r0(S=+e[0][0],r=+e[0][1],i=+e[1][0],o=+e[1][1]),N()):null==S?null:[[S,r],[i,o]]},A.scale=function(e){return arguments.length?(h=+e,M()):h},A.translate=function(e){return arguments.length?(d=+e[0],f=+e[1],M()):[d,f]},A.center=function(e){return arguments.length?(p=e[0]%360*rc,m=e[1]%360*rc,M()):[p*rl,m*rl]},A.rotate=function(e){return arguments.length?(g=e[0]%360*rc,y=e[1]%360*rc,b=e.length>2?e[2]%360*rc:0,M()):[g*rl,y*rl,b*rl]},A.angle=function(e){return arguments.length?(v=e%360*rc,M()):v*rl},A.reflectX=function(e){return arguments.length?(x=e?-1:1,M()):x<0},A.reflectY=function(e){return arguments.length?(w=e?-1:1,M()):w<0},A.precision=function(e){return arguments.length?(s=i8(a,T=e*e),N()):rv(T)},A.fitExtent=function(e,t){return i4(A,e,t)},A.fitSize=function(e,t){return i5(A,e,t)},A.fitWidth=function(e,t){return i3(A,e,t)},A.fitHeight=function(e,t){return i6(A,e,t)},function(){return t=e.apply(this,arguments),A.invert=t.invert&&E,M()}}function or(e){var t=0,n=ri/3,r=on(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*rc,n=e[1]*rc):[t*rl,n*rl]},i}function oi(e,t){var n=ry(e),r=(n+ry(t))/2;if(1e-6>ru(r))return function(e){var t=rf(e);function n(e,n){return[e*t,ry(n)/t]}return n.invert=function(e,n){return[e/t,rk(n*t)]},n}(e);var i=1+n*(2*r-n),o=rv(i)/r;function s(e,t){var n=rv(i-2*r*ry(t))/r;return[n*ry(e*=r),o-n*rf(e)]}return s.invert=function(e,t){var n=o-t,s=rd(e,ru(n))*rb(n);return n*r<0&&(s-=ri*rb(e)*rb(n)),[s/r,rk((i-(e*e+n*n)*r*r)/(2*r))]},s}function oo(){return or(oi).scale(155.424).center([0,33.6442])}function oa(){return oo().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ol(){var e,t,n,r,i,o,s=oa(),a=oo().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=oo().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){o=[e,t]}};function u(e){var t=e[0],s=e[1];return o=null,n.point(t,s),o||(r.point(t,s),o)||(i.point(t,s),o)}function h(){return e=t=null,u}return u.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?a:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:s).invert(e)},u.stream=function(n){var r,i;return e&&t===n?e:(i=(r=[s.stream(t=n),a.stream(n),l.stream(n)]).length,e={point:function(e,t){for(var n=-1;++n<i;)r[n].point(e,t)},sphere:function(){for(var e=-1;++e<i;)r[e].sphere()},lineStart:function(){for(var e=-1;++e<i;)r[e].lineStart()},lineEnd:function(){for(var e=-1;++e<i;)r[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<i;)r[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<i;)r[e].polygonEnd()}})},u.precision=function(e){return arguments.length?(s.precision(e),a.precision(e),l.precision(e),h()):s.precision()},u.scale=function(e){return arguments.length?(s.scale(e),a.scale(.35*e),l.scale(e),u.translate(s.translate())):s.scale()},u.translate=function(e){if(!arguments.length)return s.translate();var t=s.scale(),o=+e[0],u=+e[1];return n=s.translate(e).clipExtent([[o-.455*t,u-.238*t],[o+.455*t,u+.238*t]]).stream(c),r=a.translate([o-.307*t,u+.201*t]).clipExtent([[o-.425*t+1e-6,u+.12*t+1e-6],[o-.214*t-1e-6,u+.234*t-1e-6]]).stream(c),i=l.translate([o-.205*t,u+.212*t]).clipExtent([[o-.214*t+1e-6,u+.166*t+1e-6],[o-.115*t-1e-6,u+.234*t-1e-6]]).stream(c),h()},u.fitExtent=function(e,t){return i4(u,e,t)},u.fitSize=function(e,t){return i5(u,e,t)},u.fitWidth=function(e,t){return i3(u,e,t)},u.fitHeight=function(e,t){return i6(u,e,t)},u.scale(1070)}function oc(e){return function(t,n){var r=rf(t),i=rf(n),o=e(r*i);return o===1/0?[2,0]:[o*i*ry(t),o*ry(n)]}}function ou(e){return function(t,n){var r=rv(t*t+n*n),i=e(r),o=ry(i);return[rd(t*o,r*rf(i)),rk(r&&n*o/r)]}}var oh=oc(function(e){return rv(2/(1+e))});function od(){return ot(oh).scale(124.75).clipAngle(179.999)}oh.invert=ou(function(e){return 2*rk(e/2)});var of=oc(function(e){return(e=rw(e))&&e/ry(e)});function op(){return ot(of).scale(79.4188).clipAngle(179.999)}function om(e,t){return[e,rm(rx((ro+t)/2))]}function og(){return oy(om).scale(961/ra)}function oy(e){var t,n,r,i=ot(e),o=i.center,s=i.scale,a=i.translate,l=i.clipExtent,c=null;function u(){var o=ri*s(),a=i((function(e){function t(t){return t=e(t[0]*rc,t[1]*rc),t[0]*=rl,t[1]*=rl,t}return e=rq(e[0]*rc,e[1]*rc,e.length>2?e[2]*rc:0),t.invert=function(t){return t=e.invert(t[0]*rc,t[1]*rc),t[0]*=rl,t[1]*=rl,t},t})(i.rotate()).invert([0,0]));return l(null==c?[[a[0]-o,a[1]-o],[a[0]+o,a[1]+o]]:e===om?[[Math.max(a[0]-o,c),t],[Math.min(a[0]+o,n),r]]:[[c,Math.max(a[1]-o,t)],[n,Math.min(a[1]+o,r)]])}return i.scale=function(e){return arguments.length?(s(e),u()):s()},i.translate=function(e){return arguments.length?(a(e),u()):a()},i.center=function(e){return arguments.length?(o(e),u()):o()},i.clipExtent=function(e){return arguments.length?(null==e?c=t=n=r=null:(c=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),u()):null==c?null:[[c,t],[n,r]]},u()}function ob(e){return rx((ro+e)/2)}function ov(e,t){var n=rf(e),r=e===t?ry(e):rm(n/rf(t))/rm(ob(t)/ob(e)),i=n*rg(ob(e),r)/r;if(!r)return om;function o(e,t){i>0?t<-ro+1e-6&&(t=-ro+1e-6):t>ro-1e-6&&(t=ro-1e-6);var n=i/rg(ob(t),r);return[n*ry(r*e),i-n*rf(r*e)]}return o.invert=function(e,t){var n=i-t,o=rb(r)*rv(e*e+n*n),s=rd(e,ru(n))*rb(n);return n*r<0&&(s-=ri*rb(e)*rb(n)),[s/r,2*rh(rg(i/o,1/r))-ro]},o}function ox(){return or(ov).scale(109.5).parallels([30,30])}function ow(e,t){return[e,t]}function ok(){return ot(ow).scale(152.63)}function oO(e,t){var n=rf(e),r=e===t?ry(e):(n-rf(t))/(t-e),i=n/r+e;if(1e-6>ru(r))return ow;function o(e,t){var n=i-t,o=r*e;return[n*ry(o),i-n*rf(o)]}return o.invert=function(e,t){var n=i-t,o=rd(e,ru(n))*rb(n);return n*r<0&&(o-=ri*rb(e)*rb(n)),[o/r,i-rb(r)*rv(e*e+n*n)]},o}function oS(){return or(oO).scale(131.154).center([0,13.9389])}of.invert=ou(function(e){return e}),om.invert=function(e,t){return[e,2*rh(rp(t))-ro]},ow.invert=ow;var oC=rv(3)/2;function oT(e,t){var n=rk(oC*ry(t)),r=n*n,i=r*r*r;return[e*rf(n)/(oC*(1.340264+-.24331799999999998*r+i*(.0062510000000000005+.034164*r))),n*(1.340264+-.081106*r+i*(893e-6+.003796*r))]}function oA(){return ot(oT).scale(177.158)}function oE(e,t){var n=rf(t),r=rf(e)*n;return[n*ry(e)/r,ry(t)/r]}function oM(){return ot(oE).scale(144.049).clipAngle(60)}function oN(e,t){return[rf(t)*ry(e),ry(t)]}function o_(){return ot(oN).scale(249.5).clipAngle(90.000001)}function oj(e,t){var n=rf(t),r=1+rf(e)*n;return[n*ry(e)/r,ry(t)/r]}function oD(){return ot(oj).scale(250).clipAngle(142)}function oP(e,t){return[rm(rx((ro+t)/2)),-e]}function oR(){var e=oy(oP),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)}function oI(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function oz(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}oT.invert=function(e,t){for(var n,r,i=t,o=i*i,s=o*o*o,a=0;a<12&&(r=i*(1.340264+-.081106*o+s*(893e-6+.003796*o))-t,i-=n=r/(1.340264+-.24331799999999998*o+s*(.0062510000000000005+.034164*o)),s=(o=i*i)*o*o,!(1e-12>ru(n)));++a);return[oC*e*(1.340264+-.24331799999999998*o+s*(.0062510000000000005+.034164*o))/rf(i),rk(ry(i)/oC)]},oE.invert=ou(rh),oN.invert=ou(rk),oj.invert=ou(function(e){return 2*rh(e)}),oP.invert=function(e,t){return[-t,2*rh(rp(e))-ro]};let oL=Symbol("implicit");function oq(){var e=new tX,t=[],n=[],r=oL;function i(i){let o=e.get(i);if(void 0===o){if(r!==oL)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();for(let r of(t=[],e=new tX,n))e.has(r)||e.set(r,t.push(r)-1);return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return oq(t,n).unknown(r)},oI.apply(i,arguments),i}function o$(){var e,t,n=oq().unknown(void 0),r=n.domain,i=n.range,o=0,s=1,a=!1,l=0,c=0,u=.5;function h(){var n=r().length,h=s<o,d=h?s:o,f=h?o:s;e=(f-d)/Math.max(1,n-l+2*c),a&&(e=Math.floor(e)),d+=(f-d-e*(n-l))*u,t=e*(1-l),a&&(d=Math.round(d),t=Math.round(t));var p=(0,M.A)(n).map(function(t){return d+e*t});return i(h?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),h()):r()},n.range=function(e){return arguments.length?([o,s]=e,o*=1,s*=1,h()):[o,s]},n.rangeRound=function(e){return[o,s]=e,o*=1,s*=1,a=!0,h()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(a=!!e,h()):a},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),h()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),h()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,h()):c},n.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),h()):u},n.copy=function(){return o$(r(),[o,s]).round(a).paddingInner(l).paddingOuter(c).align(u)},oI.apply(h(),arguments)}function oB(e){return+e}var oF=[0,1];function oQ(e){return e}function oV(e,t){var n;return(t-=e*=1)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n})}function oH(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=oV(i,r),o=n(s,o)):(r=oV(r,i),o=n(o,s)),function(e){return o(r(e))}}function oU(e,t,n){var r=Math.min(e.length,t.length)-1,i=Array(r),o=Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=oV(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(t){var n=(0,M.a6)(e,t,1,r)-1;return o[n](i[n](t))}}function oW(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function oG(){var e,t,n,r,i,o,s=oF,a=oF,l=nV,c=oQ;function u(){var e,t,n,l=Math.min(s.length,a.length);return c!==oQ&&(e=s[0],t=s[l-1],e>t&&(n=e,e=t,t=n),c=function(n){return Math.max(e,Math.min(t,n))}),r=l>2?oU:oH,i=o=null,h}function h(t){return null==t||isNaN(t*=1)?n:(i||(i=r(s.map(e),a,l)))(e(c(t)))}return h.invert=function(n){return c(t((o||(o=r(a,s.map(e),_.k)))(n)))},h.domain=function(e){return arguments.length?(s=Array.from(e,oB),u()):s.slice()},h.range=function(e){return arguments.length?(a=Array.from(e),u()):a.slice()},h.rangeRound=function(e){return a=Array.from(e),l=nH,u()},h.clamp=function(e){return arguments.length?(c=!!e||oQ,u()):c!==oQ},h.interpolate=function(e){return arguments.length?(l=e,u()):l},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,r){return e=n,t=r,u()}}function oX(e){var t=e.domain;return e.ticks=function(e){var n=t();return nr(n[0],n[n.length-1],e??10)},e.tickFormat=function(e,n){var r=t();return function(e,t,n,r){var i,o,s,a=no(e,t,n);switch((r=n7(r??",f")).type){case"s":var l=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(s=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(n3(l)/3)))-n3(Math.abs(a))))||(r.precision=s),r7(r,l);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(s=Math.max(0,n3(Math.abs(Math.max(Math.abs(e),Math.abs(t)))-(i=Math.abs(i=a)))-n3(i))+1)||(r.precision=s-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(s=Math.max(0,-n3(Math.abs(a))))||(r.precision=s-("%"===r.type)*2)}return r6(r)}(r[0],r[r.length-1],e??10,n)},e.nice=function(n){null==n&&(n=10);var r,i,o=t(),s=0,a=o.length-1,l=o[s],c=o[a],u=10;for(c<l&&(i=l,l=c,c=i,i=s,s=a,a=i);u-- >0;){if((i=ni(l,c,n))===r)return o[s]=l,o[a]=c,t(o);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else if(i<0)l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i;else break;r=i}return e},e}function oY(){var e=oG()(oQ,oQ);return e.copy=function(){return oW(e,oY())},oI.apply(e,arguments),oX(e)}function oZ(e,t){e=e.slice();var n,r=0,i=e.length-1,o=e[r],s=e[i];return s<o&&(n=r,r=i,i=n,n=o,o=s,s=n),e[r]=t.floor(o),e[i]=t.ceil(s),e}function oK(e){return Math.log(e)}function oJ(e){return Math.exp(e)}function o0(e){return-Math.log(-e)}function o1(e){return-Math.exp(-e)}function o2(e){return isFinite(e)?+("1e"+e):e<0?0:e}function o4(e){return(t,n)=>-e(-t,n)}function o5(e){let t=e(oK,oJ),n=t.domain,r=10,i,o;function s(){var s,a;return i=(s=r)===Math.E?Math.log:10===s&&Math.log10||2===s&&Math.log2||(s=Math.log(s),e=>Math.log(e)/s),o=10===(a=r)?o2:a===Math.E?Math.exp:e=>Math.pow(a,e),n()[0]<0?(i=o4(i),o=o4(o),e(o0,o1)):e(oK,oJ),t}return t.base=function(e){return arguments.length?(r=+e,s()):r},t.domain=function(e){return arguments.length?(n(e),s()):n()},t.ticks=e=>{let t=n(),s=t[0],a=t[t.length-1],l=a<s;l&&([s,a]=[a,s]);let c=i(s),u=i(a),h,d,f=null==e?10:+e,p=[];if(!(r%1)&&u-c<f){if(c=Math.floor(c),u=Math.ceil(u),s>0){for(;c<=u;++c)for(h=1;h<r;++h)if(!((d=c<0?h/o(-c):h*o(c))<s)){if(d>a)break;p.push(d)}}else for(;c<=u;++c)for(h=r-1;h>=1;--h)if(!((d=c>0?h/o(-c):h*o(c))<s)){if(d>a)break;p.push(d)}2*p.length<f&&(p=nr(s,a,f))}else p=nr(c,u,Math.min(u-c,f)).map(o);return l?p.reverse():p},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===r?"s":","),"function"!=typeof n&&(r%1||null!=(n=n7(n)).precision||(n.trim=!0),n=r6(n)),e===1/0)return n;let s=Math.max(1,r*e/t.ticks().length);return e=>{let t=e/o(Math.round(i(e)));return t*r<r-.5&&(t*=r),t<=s?n(e):""}},t.nice=()=>n(oZ(n(),{floor:e=>o(Math.floor(i(e))),ceil:e=>o(Math.ceil(i(e)))})),t}function o3(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function o6(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function o7(e){var t=1,n=e(o3(1),o6(t));return n.constant=function(n){return arguments.length?e(o3(t=+n),o6(t)):t},oX(n)}function o8(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function o9(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function se(e){return e<0?-e*e:e*e}function st(e){var t=e(oQ,oQ),n=1;return t.exponent=function(t){return arguments.length?1==(n=+t)?e(oQ,oQ):.5===n?e(o9,se):e(o8(n),o8(1/n)):n},oX(t)}let sn=new Date,sr=new Date;function si(e,t,n,r){function i(t){return e(t=0==arguments.length?new Date:new Date(+t)),t}return i.floor=t=>(e(t=new Date(+t)),t),i.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),i.round=e=>{let t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),i.range=(n,r,o)=>{let s;let a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return a;do a.push(s=new Date(+n)),t(n,o),e(n);while(s<n&&n<r);return a},i.filter=n=>si(t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},(e,r)=>{if(e>=e){if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}}),n&&(i.count=(t,r)=>(sn.setTime(+t),sr.setTime(+r),e(sn),e(sr),Math.floor(n(sn,sr))),i.every=e=>isFinite(e=Math.floor(e))&&e>0?e>1?i.filter(r?t=>r(t)%e==0:t=>i.count(0,t)%e==0):i:null),i}let so=si(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);so.every=e=>isFinite(e=Math.floor(e))&&e>0?e>1?si(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):so:null,so.range;let ss=si(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+1e3*t)},(e,t)=>(t-e)/1e3,e=>e.getUTCSeconds());ss.range;let sa=si(e=>{e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())},(e,t)=>{e.setTime(+e+6e4*t)},(e,t)=>(t-e)/6e4,e=>e.getMinutes());sa.range;let sl=si(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+6e4*t)},(e,t)=>(t-e)/6e4,e=>e.getUTCMinutes());sl.range;let sc=si(e=>{e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-6e4*e.getMinutes())},(e,t)=>{e.setTime(+e+36e5*t)},(e,t)=>(t-e)/36e5,e=>e.getHours());sc.range;let su=si(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+36e5*t)},(e,t)=>(t-e)/36e5,e=>e.getUTCHours());su.range;let sh=si(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/864e5,e=>e.getDate()-1);sh.range;let sd=si(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>e.getUTCDate()-1);sd.range;let sf=si(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>Math.floor(e/864e5));function sp(e){return si(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/6048e5)}sf.range;let sm=sp(0),sg=sp(1),sy=sp(2),sb=sp(3),sv=sp(4),sx=sp(5),sw=sp(6);function sk(e){return si(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/6048e5)}sm.range,sg.range,sy.range,sb.range,sv.range,sx.range,sw.range;let sO=sk(0),sS=sk(1),sC=sk(2),sT=sk(3),sA=sk(4),sE=sk(5),sM=sk(6);sO.range,sS.range,sC.range,sT.range,sA.range,sE.range,sM.range;let sN=si(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());sN.range;let s_=si(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());s_.range;let sj=si(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());sj.every=e=>isFinite(e=Math.floor(e))&&e>0?si(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}):null,sj.range;let sD=si(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());function sP(e,t,n,r,i,o){let s=[[ss,1,1e3],[ss,5,5e3],[ss,15,15e3],[ss,30,3e4],[o,1,6e4],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,36e5],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,864e5],[r,2,1728e5],[n,1,6048e5],[t,1,2592e6],[t,3,7776e6],[e,1,31536e6]];function a(t,n,r){let i=Math.abs(n-t)/r,o=(0,M.a7)(([,,e])=>e).right(s,i);if(o===s.length)return e.every(no(t/31536e6,n/31536e6,r));if(0===o)return so.every(Math.max(no(t,n,r),1));let[a,l]=s[i/s[o-1][2]<s[o][2]/i?o-1:o];return a.every(l)}return[function(e,t,n){let r=t<e;r&&([e,t]=[t,e]);let i=n&&"function"==typeof n.range?n:a(e,t,n),o=i?i.range(e,+t+1):[];return r?o.reverse():o},a]}sD.every=e=>isFinite(e=Math.floor(e))&&e>0?si(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null,sD.range;let[sR,sI]=sP(sD,s_,sO,sf,su,sl),[sz,sL]=sP(sj,sN,sm,sh,sc,sa);function sq(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function s$(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function sB(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var sF={"-":"",_:" ",0:"0"},sQ=/^\s*\d+/,sV=/^%/,sH=/[\\^$*+?|[\]().{}]/g;function sU(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?Array(n-o+1).join(t)+i:i)}function sW(e){return e.replace(sH,"\\$&")}function sG(e){return RegExp("^(?:"+e.map(sW).join("|")+")","i")}function sX(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function sY(e,t,n){var r=sQ.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function sZ(e,t,n){var r=sQ.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function sK(e,t,n){var r=sQ.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function sJ(e,t,n){var r=sQ.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function s0(e,t,n){var r=sQ.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function s1(e,t,n){var r=sQ.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function s2(e,t,n){var r=sQ.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function s4(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function s5(e,t,n){var r=sQ.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function s3(e,t,n){var r=sQ.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function s6(e,t,n){var r=sQ.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function s7(e,t,n){var r=sQ.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function s8(e,t,n){var r=sQ.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function s9(e,t,n){var r=sQ.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function ae(e,t,n){var r=sQ.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function at(e,t,n){var r=sQ.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function an(e,t,n){var r=sQ.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ar(e,t,n){var r=sV.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function ai(e,t,n){var r=sQ.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function ao(e,t,n){var r=sQ.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function as(e,t){return sU(e.getDate(),t,2)}function aa(e,t){return sU(e.getHours(),t,2)}function al(e,t){return sU(e.getHours()%12||12,t,2)}function ac(e,t){return sU(1+sh.count(sj(e),e),t,3)}function au(e,t){return sU(e.getMilliseconds(),t,3)}function ah(e,t){return au(e,t)+"000"}function ad(e,t){return sU(e.getMonth()+1,t,2)}function af(e,t){return sU(e.getMinutes(),t,2)}function ap(e,t){return sU(e.getSeconds(),t,2)}function am(e){var t=e.getDay();return 0===t?7:t}function ag(e,t){return sU(sm.count(sj(e)-1,e),t,2)}function ay(e){var t=e.getDay();return t>=4||0===t?sv(e):sv.ceil(e)}function ab(e,t){return e=ay(e),sU(sv.count(sj(e),e)+(4===sj(e).getDay()),t,2)}function av(e){return e.getDay()}function ax(e,t){return sU(sg.count(sj(e)-1,e),t,2)}function aw(e,t){return sU(e.getFullYear()%100,t,2)}function ak(e,t){return sU((e=ay(e)).getFullYear()%100,t,2)}function aO(e,t){return sU(e.getFullYear()%1e4,t,4)}function aS(e,t){var n=e.getDay();return sU((e=n>=4||0===n?sv(e):sv.ceil(e)).getFullYear()%1e4,t,4)}function aC(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+sU(t/60|0,"0",2)+sU(t%60,"0",2)}function aT(e,t){return sU(e.getUTCDate(),t,2)}function aA(e,t){return sU(e.getUTCHours(),t,2)}function aE(e,t){return sU(e.getUTCHours()%12||12,t,2)}function aM(e,t){return sU(1+sd.count(sD(e),e),t,3)}function aN(e,t){return sU(e.getUTCMilliseconds(),t,3)}function a_(e,t){return aN(e,t)+"000"}function aj(e,t){return sU(e.getUTCMonth()+1,t,2)}function aD(e,t){return sU(e.getUTCMinutes(),t,2)}function aP(e,t){return sU(e.getUTCSeconds(),t,2)}function aR(e){var t=e.getUTCDay();return 0===t?7:t}function aI(e,t){return sU(sO.count(sD(e)-1,e),t,2)}function az(e){var t=e.getUTCDay();return t>=4||0===t?sA(e):sA.ceil(e)}function aL(e,t){return e=az(e),sU(sA.count(sD(e),e)+(4===sD(e).getUTCDay()),t,2)}function aq(e){return e.getUTCDay()}function a$(e,t){return sU(sS.count(sD(e)-1,e),t,2)}function aB(e,t){return sU(e.getUTCFullYear()%100,t,2)}function aF(e,t){return sU((e=az(e)).getUTCFullYear()%100,t,2)}function aQ(e,t){return sU(e.getUTCFullYear()%1e4,t,4)}function aV(e,t){var n=e.getUTCDay();return sU((e=n>=4||0===n?sA(e):sA.ceil(e)).getUTCFullYear()%1e4,t,4)}function aH(){return"+0000"}function aU(){return"%"}function aW(e){return+e}function aG(e){return Math.floor(+e/1e3)}function aX(e){return new Date(e)}function aY(e){return e instanceof Date?+e:+new Date(+e)}function aZ(e,t,n,r,i,o,s,a,l,c){var u=oG()(oQ,oQ),h=u.invert,d=u.domain,f=c(".%L"),p=c(":%S"),m=c("%I:%M"),g=c("%I %p"),y=c("%a %d"),b=c("%b %d"),v=c("%B"),x=c("%Y");function w(e){return(l(e)<e?f:a(e)<e?p:s(e)<e?m:o(e)<e?g:r(e)<e?i(e)<e?y:b:n(e)<e?v:x)(e)}return u.invert=function(e){return new Date(h(e))},u.domain=function(e){return arguments.length?d(Array.from(e,aY)):d().map(aX)},u.ticks=function(t){var n=d();return e(n[0],n[n.length-1],t??10)},u.tickFormat=function(e,t){return null==t?w:c(t)},u.nice=function(e){var n=d();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],e??10)),e?d(oZ(n,e)):u},u.copy=function(){return oW(u,aZ(e,t,n,r,i,o,s,a,l,c))},u}function aK(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function aJ(){var e,t,n,r,i,o,s,a=0,l=.5,c=1,u=1,h=oQ,d=!1;function f(e){return isNaN(e*=1)?s:(e=.5+((e=+o(e))-t)*(u*e<u*t?r:i),h(d?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,h=nY(e,[n,r,i]),f):[h(0),h(.5),h(1)]}}return f.domain=function(s){return arguments.length?([a,l,c]=s,e=o(a*=1),t=o(l*=1),n=o(c*=1),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,f):[a,l,c]},f.clamp=function(e){return arguments.length?(d=!!e,f):d},f.interpolator=function(e){return arguments.length?(h=e,f):h},f.range=p(nV),f.rangeRound=p(nH),f.unknown=function(e){return arguments.length?(s=e,f):s},function(s){return o=s,e=s(a),t=s(l),n=s(c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,f}}function a0(e){for(var t=e.length/6|0,n=Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}d=(h=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,l=e.shortMonths,c=sG(i),u=sX(i),h=sG(o),d=sX(o),f=sG(s),p=sX(s),m=sG(a),g=sX(a),y=sG(l),b=sX(l),v={a:function(e){return s[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return a[e.getMonth()]},c:null,d:as,e:as,f:ah,g:ak,G:aS,H:aa,I:al,j:ac,L:au,m:ad,M:af,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:aW,s:aG,S:ap,u:am,U:ag,V:ab,w:av,W:ax,x:null,X:null,y:aw,Y:aO,Z:aC,"%":aU},x={a:function(e){return s[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return a[e.getUTCMonth()]},c:null,d:aT,e:aT,f:a_,g:aF,G:aV,H:aA,I:aE,j:aM,L:aN,m:aj,M:aD,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:aW,s:aG,S:aP,u:aR,U:aI,V:aL,w:aq,W:a$,x:null,X:null,y:aB,Y:aQ,Z:aH,"%":aU},w={a:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.m=b.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return S(e,t,n,r)},d:s6,e:s6,f:an,g:s2,G:s1,H:s8,I:s8,j:s7,L:at,m:s3,M:s9,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:s5,Q:ai,s:ao,S:ae,u:sZ,U:sK,V:sJ,w:sY,W:s0,x:function(e,t,r){return S(e,n,t,r)},X:function(e,t,n){return S(e,r,t,n)},y:s2,Y:s1,Z:s4,"%":ar};function k(e,t){return function(n){var r,i,o,s=[],a=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++a<c;)37===e.charCodeAt(a)&&(s.push(e.slice(l,a)),null!=(i=sF[r=e.charAt(++a)])?r=e.charAt(++a):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),s.push(r),l=a+1);return s.push(e.slice(l,a)),s.join("")}}function O(e,t){return function(n){var r,i,o=sB(1900,void 0,1);if(S(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(!t||"Z"in o||(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=(i=(r=s$(sB(o.y,0,1))).getUTCDay())>4||0===i?sS.ceil(r):sS(r),r=sd.offset(r,(o.V-1)*7),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(r=(i=(r=sq(sB(o.y,0,1))).getDay())>4||0===i?sg.ceil(r):sg(r),r=sh.offset(r,(o.V-1)*7),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:+("W"in o)),i="Z"in o?s$(sB(o.y,0,1)).getUTCDay():sq(sB(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,s$(o)):sq(o)}}function S(e,t,n,r){for(var i,o,s=0,a=t.length,l=n.length;s<a;){if(r>=l)return -1;if(37===(i=t.charCodeAt(s++))){if(!(o=w[(i=t.charAt(s++))in sF?t.charAt(s++):i])||(r=o(e,n,r))<0)return -1}else if(i!=n.charCodeAt(r++))return -1}return r}return v.x=k(n,v),v.X=k(r,v),v.c=k(t,v),x.x=k(n,x),x.X=k(r,x),x.c=k(t,x),{format:function(e){var t=k(e+="",v);return t.toString=function(){return e},t},parse:function(e){var t=O(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=k(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=O(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})).format,h.parse,f=h.utcFormat,h.utcParse;let a1=a0("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),a2=a0("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),a4=a0("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),a5=a0("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),a3=a0("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),a6=a0("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),a7=a0("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),a8=a0("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),a9=a0("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),le=a0("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),lt=a0("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ln=e=>(0,_.t)(e[e.length-1]);var lr=[,,,].concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(a0);let li=ln(lr);var lo=[,,,].concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(a0);let ls=ln(lo);var la=[,,,].concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(a0);let ll=ln(la);var lc=[,,,].concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(a0);let lu=ln(lc);var lh=[,,,].concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(a0);let ld=ln(lh);var lf=[,,,].concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(a0);let lp=ln(lf);var lm=[,,,].concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(a0);let lg=ln(lm);var ly=[,,,].concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(a0);let lb=ln(ly);var lv=[,,,].concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(a0);let lx=ln(lv);var lw=[,,,].concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(a0);let lk=ln(lw);var lO=[,,,].concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(a0);let lS=ln(lO);var lC=[,,,].concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(a0);let lT=ln(lC);var lA=[,,,].concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(a0);let lE=ln(lA);var lM=[,,,].concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(a0);let lN=ln(lM);var l_=[,,,].concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(a0);let lj=ln(l_);var lD=[,,,].concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(a0);let lP=ln(lD);var lR=[,,,].concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(a0);let lI=ln(lR);var lz=[,,,].concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(a0);let lL=ln(lz);var lq=[,,,].concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(a0);let l$=ln(lq);var lB=[,,,].concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(a0);let lF=ln(lB);var lQ=[,,,].concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(a0);let lV=ln(lQ);var lH=[,,,].concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(a0);let lU=ln(lH);var lW=[,,,].concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(a0);let lG=ln(lW);var lX=[,,,].concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(a0);let lY=ln(lX);var lZ=[,,,].concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(a0);let lK=ln(lZ);var lJ=[,,,].concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(a0);let l0=ln(lJ);var l1=[,,,].concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(a0);let l2=ln(l1);function l4(e){return"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-(e=Math.max(0,Math.min(1,e)))*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-2710.57*e)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-67.37*e)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-2475.67*e)))))))+")"}let l5=nX(nF(300,.5,0),nF(-240,.5,1));var l3=nX(nF(-100,.75,.35),nF(80,1.5,.8)),l6=nX(nF(260,.75,.35),nF(80,1.5,.8)),l7=nF();function l8(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return l7.h=360*e-100,l7.s=1.5-1.5*t,l7.l=.8-.9*t,l7+""}var l9=(0,_.u)(),ce=Math.PI/3,ct=2*Math.PI/3;function cn(e){var t;return l9.r=255*(t=Math.sin(e=(.5-e)*Math.PI))*t,l9.g=255*(t=Math.sin(e+ce))*t,l9.b=255*(t=Math.sin(e+ct))*t,l9+""}function cr(e){return"rgb("+Math.max(0,Math.min(255,Math.round(34.61+(e=Math.max(0,Math.min(1,e)))*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-14825.05*e)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+707.56*e)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-6838.66*e)))))))+")"}function ci(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}let co=ci(a0("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var cs=ci(a0("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),ca=ci(a0("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),cl=ci(a0("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));let cc=Object.freeze(Object.defineProperty({__proto__:null,interpolateBlues:lU,interpolateBrBG:li,interpolateBuGn:lk,interpolateBuPu:lS,interpolateCividis:l4,interpolateCool:l6,interpolateCubehelixDefault:l5,interpolateGnBu:lT,interpolateGreens:lG,interpolateGreys:lY,interpolateInferno:ca,interpolateMagma:cs,interpolateOrRd:lE,interpolateOranges:l2,interpolatePRGn:ls,interpolatePiYG:ll,interpolatePlasma:cl,interpolatePuBu:lj,interpolatePuBuGn:lN,interpolatePuOr:lu,interpolatePuRd:lP,interpolatePurples:lK,interpolateRainbow:l8,interpolateRdBu:ld,interpolateRdGy:lp,interpolateRdPu:lI,interpolateRdYlBu:lg,interpolateRdYlGn:lb,interpolateReds:l0,interpolateSinebow:cn,interpolateSpectral:lx,interpolateTurbo:cr,interpolateViridis:co,interpolateWarm:l3,interpolateYlGn:l$,interpolateYlGnBu:lL,interpolateYlOrBr:lF,interpolateYlOrRd:lV,schemeAccent:a2,schemeBlues:lH,schemeBrBG:lr,schemeBuGn:lw,schemeBuPu:lO,schemeCategory10:a1,schemeDark2:a4,schemeGnBu:lC,schemeGreens:lW,schemeGreys:lX,schemeObservable10:a5,schemeOrRd:lA,schemeOranges:l1,schemePRGn:lo,schemePaired:a3,schemePastel1:a6,schemePastel2:a7,schemePiYG:la,schemePuBu:l_,schemePuBuGn:lM,schemePuOr:lc,schemePuRd:lD,schemePurples:lZ,schemeRdBu:lh,schemeRdGy:lf,schemeRdPu:lR,schemeRdYlBu:lm,schemeRdYlGn:ly,schemeReds:lJ,schemeSet1:a8,schemeSet2:a9,schemeSet3:le,schemeSpectral:lv,schemeTableau10:lt,schemeYlGn:lq,schemeYlGnBu:lz,schemeYlOrBr:lB,schemeYlOrRd:lQ},Symbol.toStringTag,{value:"Module"}));function cu(e){return function(){return e}}let ch=Math.cos,cd=Math.min,cf=Math.sin,cp=Math.sqrt,cm=Math.PI,cg=2*cm;function cy(e){this._context=e}function cb(e){return new cy(e)}function cv(e){return e[0]}function cx(e){return e[1]}cy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};class cw{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}let ck=cp(3),cO={draw(e,t){let n=.59436*cp(t+cd(t/28,.75)),r=n/2,i=r*ck;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},cS={draw(e,t){let n=cp(t/cm);e.moveTo(n,0),e.arc(0,0,n,0,cg)}},cC={draw(e,t){let n=cp(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},cT=cp(1/3),cA=2*cT,cE={draw(e,t){let n=cp(t/cA),r=n*cT;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},cM={draw(e,t){let n=.62625*cp(t);e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},cN={draw(e,t){let n=.87559*cp(t-cd(t/7,2));e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},c_={draw(e,t){let n=cp(t),r=-n/2;e.rect(r,r,n,n)}},cj={draw(e,t){let n=.4431*cp(t);e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},cD=cf(cm/10)/cf(7*cm/10),cP=cf(cg/10)*cD,cR=-ch(cg/10)*cD,cI={draw(e,t){let n=cp(.8908130915292852*t),r=cP*n,i=cR*n;e.moveTo(0,-n),e.lineTo(r,i);for(let t=1;t<5;++t){let o=cg*t/5,s=ch(o),a=cf(o);e.lineTo(a*n,-s*n),e.lineTo(s*r-a*i,a*r+s*i)}e.closePath()}},cz=cp(3),cL={draw(e,t){let n=-cp(t/(3*cz));e.moveTo(0,2*n),e.lineTo(-cz*n,-n),e.lineTo(cz*n,-n),e.closePath()}},cq=cp(3),c$={draw(e,t){let n=.6824*cp(t),r=n/2,i=n*cq/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},cB=cp(3)/2,cF=1/cp(12),cQ=(cF/2+1)*3,cV={draw(e,t){let n=cp(t/cQ),r=n/2,i=n*cF,o=n*cF+n,s=-r;e.moveTo(r,i),e.lineTo(r,o),e.lineTo(s,o),e.lineTo(-.5*r-cB*i,cB*r+-.5*i),e.lineTo(-.5*r-cB*o,cB*r+-.5*o),e.lineTo(-.5*s-cB*o,cB*s+-.5*o),e.lineTo(-.5*r+cB*i,-.5*i-cB*r),e.lineTo(-.5*r+cB*o,-.5*o-cB*r),e.lineTo(-.5*s+cB*o,-.5*o-cB*s),e.closePath()}},cH={draw(e,t){let n=.6189*cp(t-cd(t/6,1.7));e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},cU=[cS,cC,cE,c_,cI,cL,cV],cW=[cS,cN,cH,c$,cO,cj,cM];function cG(){}function cX(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function cY(e){this._context=e}function cZ(e){this._context=e}function cK(e){this._context=e}function cJ(e,t){this._basis=new cY(e),this._beta=t}cY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:cX(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:cX(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},cZ.prototype={areaStart:cG,areaEnd:cG,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:cX(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},cK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:cX(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},cJ.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],o=t[0],s=e[n]-i,a=t[n]-o,l=-1;++l<=n;)r=l/n,this._basis.point(this._beta*e[l]+(1-this._beta)*(i+r*s),this._beta*t[l]+(1-this._beta)*(o+r*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};let c0=function e(t){function n(e){return 1===t?new cY(e):new cJ(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function c1(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function c2(e,t){this._context=e,this._k=(1-t)/6}c2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:c1(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:c1(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};let c4=function e(t){function n(e){return new c2(e,t)}return n.tension=function(t){return e(+t)},n}(0);function c5(e,t){this._context=e,this._k=(1-t)/6}c5.prototype={areaStart:cG,areaEnd:cG,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:c1(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};let c3=function e(t){function n(e){return new c5(e,t)}return n.tension=function(t){return e(+t)},n}(0);function c6(e,t){this._context=e,this._k=(1-t)/6}c6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:c1(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};let c7=function e(t){function n(e){return new c6(e,t)}return n.tension=function(t){return e(+t)},n}(0);function c8(e,t,n){var r=e._x1,i=e._y1,o=e._x2,s=e._y2;if(e._l01_a>1e-12){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>1e-12){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*c+e._x1*e._l23_2a-t*e._l12_2a)/u,s=(s*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,o,s,e._x2,e._y2)}function c9(e,t){this._context=e,this._alpha=t}c9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e*=1,t*=1,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:c8(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};let ue=function e(t){function n(e){return t?new c9(e,t):new c2(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function ut(e,t){this._context=e,this._alpha=t}ut.prototype={areaStart:cG,areaEnd:cG,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e*=1,t*=1,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:c8(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};let un=function e(t){function n(e){return t?new ut(e,t):new c5(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function ur(e,t){this._context=e,this._alpha=t}ur.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e*=1,t*=1,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:c8(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};let ui=function e(t){function n(e){return t?new ur(e,t):new c6(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function uo(e){this._context=e}uo.prototype={areaStart:cG,areaEnd:cG,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e*=1,t*=1,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function us(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0);return((o<0?-1:1)+(s<0?-1:1))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs((o*i+s*r)/(r+i)))||0}function ua(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function ul(e,t,n){var r=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,i+a*t,o-a,s-a*n,o,s)}function uc(e){this._context=e}function uu(e){this._context=new uh(e)}function uh(e){this._context=e}function ud(e){this._context=e}function uf(e){var t,n,r=e.length-1,i=Array(r),o=Array(r),s=Array(r);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,s[t]-=n*s[t-1];for(i[r-1]=s[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function up(e,t){this._context=e,this._t=t}uc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ul(this,this._t0,ua(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t*=1,(e*=1)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ul(this,ua(this,n=us(this,e,t)),n);break;default:ul(this,this._t0,n=us(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(uu.prototype=Object.create(uc.prototype)).point=function(e,t){uc.prototype.point.call(this,t,e)},uh.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}},ud.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n){if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=uf(e),i=uf(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[s],t[s])}(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},up.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};let um=[{message:"Checking format...",time:4e3},{message:"Cleaning formatting niggles...",time:1e4}],ug=({apiEndpoint:e,token:t,onClick:n=null,onProjectCreated:r=(...e)=>{},children:i=null})=>{let o=(0,N.useContext)(M.a),[s,a]=(0,N.useState)(!1),[l,c]=(0,N.useState)([]),[u,h]=(0,N.useState)("Uploading");return M.j.jsxs("div",{className:"w-full h-full",children:[M.j.jsx(M.Y,{disabled:s,acceptedFileTypes:[".csv",".xls",".xlsx",".pdf"],showIcon:!0,allowMultiple:!0,selectedFiles:l,onRemoveFile:e=>{console.time("CreateNewProject:onRemoveFile"),c(l.filter((t,n)=>n!==e)),console.timeEnd("CreateNewProject:onRemoveFile")},onFileSelect:async(e,t)=>{console.time("CreateNewProject:onFileSelect");try{c([...l,...t])}catch(e){console.error(e),o.error("Failed to process the files")}console.timeEnd("CreateNewProject:onFileSelect")},onDrop:async(e,t)=>{console.time("CreateNewProject:onDrop");try{c([...l,...t])}catch(e){o.error(e.message||"Failed to process the files"),console.log(e.stack)}console.timeEnd("CreateNewProject:onDrop")},onInvalidFiles:(e,t,n)=>{console.warn("Invalid files:",n,t),o.error("Only CSV or Excel files are accepted")}}),M.j.jsx(M.D,{className:(0,M.t)("absolute bottom-1/4 p-4 left-0 right-0 mx-auto w-fit rounded-full z-[10] shadow-md",s||!l.length?"pointer-events-none":""),disabled:s||0===l.length,variant:"primary",onClick:async()=>{try{if(n){await n(l);return}console.time("CreateNewProject:uploadFiles"),a(!0);let i=um.map(({message:e,time:t})=>setTimeout(()=>{h(e)},t));h("Sending to servers");let{projectName:s,dbInfo:c}=await (0,_.v)(e,t,l);i.forEach(clearTimeout),o.success(`Project ${s} created successfully`),r(s,c)}catch(e){console.error("Error during file upload:",e),o.error(e.message||"Failed to upload files")}finally{a(!1),h(""),console.timeEnd("CreateNewProject:uploadFiles")}},children:i||(l.length?s?M.j.jsxs(M.j.Fragment,{children:[M.j.jsx(M.d,{}),u]}):"Click to upload":"Select some files")})]})},uy=N.memo(({oracleHistory:e,selectedProjectName:t,uploadNewProjectOption:n,selectedItemId:r,updateUrlWithItemId:i,projectSelector:o,setSelectedItem:s})=>M.j.jsx(M.Q,{open:!0,beforeTitle:o,location:"left",rootClassNames:"absolute left-0 h-full shadow-lg lg:shadow-none lg:sticky top-0 bg-gray-50 dark:bg-gray-800 z-20 border-r border-gray-100 dark:border-gray-700",title:M.j.jsxs("h2",{className:"font-bold text-gray-800 dark:text-gray-200 mb-3 text-lg flex items-center",children:[M.j.jsx("span",{className:"mr-2",children:"\uD83D\uDCDA"})," History"]}),contentClassNames:"p-5 pr-6 rounded-tl-lg relative sm:block min-h-96 max-h-full overflow-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600 scrollbar-track-transparent",resizable:!0,minWidth:200,maxWidth:500,defaultWidth:288,children:M.j.jsxs("div",{className:"space-y-4",children:[t!==n?M.j.jsx("div",{className:(0,M.t)("title hover:cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 history-item p-3 text-sm rounded-md transition-colors duration-200 mb-3 flex items-center border border-transparent",r?"text-gray-700 dark:text-gray-300 hover:border-gray-200 dark:hover:border-gray-700":"font-medium bg-blue-50 dark:bg-gray-700 border-blue-200 dark:border-blue-800 shadow-sm text-blue-700 dark:text-blue-300"),onClick:()=>{i(null),s(null)},children:M.j.jsxs("div",{className:"flex flex-row items-center gap-2",children:[M.j.jsx(eh,{size:18}),M.j.jsx("span",{className:"font-medium",children:"New Report"}),M.j.jsx(M.a2,{keyValue:M.a8.NEW_QUESTION,meta:!0})]})}):M.j.jsx("p",{className:"text-xs",children:"Upload a new CSV/Excel file on the right"}),t!==n&&e[t]&&Object.entries(e[t]).map(([e,t])=>t&&0!==Object.keys(t).length?M.j.jsxs("div",{className:"mb-6",children:[M.j.jsxs("div",{className:"px-2 mb-3 text-xs font-medium tracking-wide text-blue-600 dark:text-blue-400 uppercase flex items-center",children:[M.j.jsx("div",{className:"h-px bg-blue-100 dark:bg-blue-800 flex-grow mr-2"}),e,M.j.jsx("div",{className:"h-px bg-blue-100 dark:bg-blue-800 flex-grow ml-2"})]}),t.map(e=>{var t,n,o;let a="report"===e.itemType,l=e.itemId,c=a?e.report_name||(null==(t=e.inputs)?void 0:t.user_question)||"Untitled report":e.analysisTree&&(null==(o=null==(n=Object.values(e.analysisTree)[0])?void 0:n.root)?void 0:o.user_question)||"Untitled analysis";return M.j.jsxs("div",{onClick:()=>{i(l),s(e)},className:(0,M.t)("title hover:cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 history-item p-3 text-sm rounded-md transition-colors duration-200 mb-2 border border-transparent",String(l)===String(r)?"font-medium bg-blue-50 dark:bg-gray-700 border-blue-200 dark:border-blue-800 shadow-sm text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:border-gray-200 dark:hover:border-gray-700"),children:[M.j.jsx("div",{className:"overflow-hidden transition-all duration-300 hover:max-h-[500px]",children:M.j.jsx("p",{className:"font-medium hover:line-clamp-none line-clamp-2",children:c})}),M.j.jsxs("div",{className:"flex items-center text-xs mt-1.5 text-gray-500 dark:text-gray-400",children:[M.j.jsx("span",{className:`inline-block w-3 h-3 mr-1.5 rounded-full ${a?e.status===Wl.DONE?"bg-blue-200 dark:bg-blue-800":e.status===Wl.THINKING?"bg-green-300 dark:bg-green-600":e.status===Wl.ERRORED?"bg-red-200 dark:bg-red-800":"bg-blue-200 dark:bg-blue-800":"bg-yellow-200 dark:bg-yellow-800"}`,title:`Type: ${a?"Report":"Analysis"}`}),new Date(e.date_created+"Z").toLocaleString(void 0,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})]})]},l)})]},e):null)]})}));function ub(){return{reportId:"",status:"blank",loading:!1,mode:"query-data",userQuestion:"",useWebsearch:!0,uploadedFiles:[]}}let uv={blank:"Add a spreadsheet or select a database, and start asking your questions!",getting_clarifications:"Analyzing database and thinking if I need to ask clarifying questions. This can take 15-20 seconds...",clarifications_received:"Please answer these clarifying questions...",submitting:"Submitting for generation..."};function ux(){let e=ub(),t=[];function n(n){e="function"==typeof n?n(e):n,t.forEach(e=>e())}return{getDraft:function(){return e},setDraft:n,resetDraft:function(){n(ub())},subscribeToDraftChanges:function(e){return t.push(e),function(){t=t.filter(t=>t!==e)}},setMode:function(e){n(t=>({...t,mode:e}))},setReportId:function(e){n(t=>({...t,reportId:e}))},setStatus:function(e){n(t=>({...t,status:e}))},setQuestion:function(e){n(t=>({...t,userQuestion:e}))}}}let uw=(0,N.createContext)({apiEndpoint:"",token:"",searchBarManager:ux()}),uk=({key:e,ctrl:t=!1,meta:n=!1,shift:r=!1,alt:i=!1,target:o,callback:s=()=>{}},a=[])=>{(0,N.useEffect)(()=>{let a=o??document,l=o=>{let a=window.navigator.platform.includes("Mac");o.key.toLowerCase()===e.toLowerCase()&&(n&&(a?o.metaKey:o.ctrlKey)||!n&&!(a?o.metaKey:o.ctrlKey))&&(t&&o.ctrlKey||!t&&!o.ctrlKey)&&(r&&o.shiftKey||!r&&!o.shiftKey)&&(i&&o.altKey||!i&&!o.altKey)&&(o.stopPropagation(),o.preventDefault(),s(o))};return a.addEventListener("keydown",l),()=>{a.removeEventListener("keydown",l)}},[e,s,...a])},uO=({clarification:e,options:t,input_type:n,onAnswerChange:r,onDismiss:i})=>{let o=(0,N.useMemo)(()=>{switch(n){case"single_choice":return M.j.jsx(M.S,{label:e,options:t.map(e=>({label:e,value:e})),onChange:r});case"multiple_choice":return M.j.jsx(M.P,{label:e,options:t.map(e=>({label:e,value:e})),onChange:r});default:return M.j.jsx(M.V,{label:e,onChange:e=>r(e.target.value)})}},[]);return M.j.jsxs("div",{className:"relative antialiased will-change-auto",children:[i&&M.j.jsx("button",{onClick:i,className:"absolute -right-2 -top-2 p-1 rounded-full bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 transition-colors will-change-auto z-[26]",title:"Dismiss",children:M.j.jsx(M.X,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),M.j.jsx("div",{className:"text-base font-medium will-change-auto",children:o})]})};function uS(){let{searchBarManager:e}=(0,N.useContext)(uw),t=(0,N.useSyncExternalStore)(e.subscribeToDraftChanges,e.getDraft);return M.j.jsx("div",{className:"w-full flex flex-col items-start relative justify-center m-auto antialiased",children:t.clarifications&&M.j.jsx("div",{className:"w-full max-w-4xl",children:M.j.jsx("div",{className:"space-y-4",children:t.clarifications.map((t,n)=>(0,N.createElement)(uO,{...t,key:n+t.clarification,onAnswerChange:t=>{e.setDraft(e=>({...e,clarifications:e.clarifications.map((e,r)=>r===n?{...e,answer:t,is_answered:!!t&&("string"==typeof t?!!t:t.length>0)}:e)}))},onDismiss:()=>{e.setDraft(e=>({...e,clarifications:e.clarifications.filter((e,t)=>t!==n)}))}}))})})})}let uC=(0,N.memo)(({selectedItem:e})=>{let{searchBarManager:t}=(0,N.useContext)(uw),[n,r]=(0,N.useState)(!1);(0,N.useEffect)(()=>{r(navigator.userAgent.toLowerCase().includes("mac"))},[]);let i=(0,N.useSyncExternalStore)(t.subscribeToDraftChanges,t.getDraft);return M.j.jsx("div",{className:(0,M.t)("text-lg dark:text-gray-200 font-light mb-0 flex items-center justify-between"),children:M.j.jsx("div",{children:(null==e?void 0:e.itemType)==="query-data"?"Ask a follow on question":uv[i.status]})})}),uT={"query-data":M.j.jsx(em,{className:"w-5 stroke-yellow-500"}),report:M.j.jsx(ef,{className:"w-5 stroke-fuchsia-300"})},uA={default:"absolute bottom-1/2 left-1/2 -translate-x-1/2 translate-y-1/2 w-full px-4 py-2","query-data":"absolute bottom-2 left-1/2 -translate-x-1/2 w-full px-4",report:"absolute -bottom-48 left-1/2 -translate-x-1/2 w-full px-4 opacity-0 h-0 overflow-hidden","new-project":"absolute -bottom-48 left-1/2 -translate-x-1/2 w-full px-4 opacity-0 h-0 overflow-hidden"},uE=N.memo(function({projectName:e,uploadNewProjectOption:t,onReportGenerated:n,onNewProjectCreated:r,createNewFastAnalysis:i,rootClassNames:o="",selectedItem:s=null,setSelectedItemId:a}){let[l,c]=(0,N.useState)(""),[u,h]=(0,N.useState)(!1),{searchBarManager:d,apiEndpoint:f,token:p}=(0,N.useContext)(uw),m=(0,N.useContext)(M.a),[g,y]=(0,N.useState)(!1),[b,v]=(0,N.useState)(!1),[x,w]=(0,N.useState)([]),[k,O]=(0,N.useState)([]),[S,C]=(0,N.useState)(!1),[T,A]=(0,N.useState)(!1),[E,j]=(0,N.useState)(!1),D=(0,N.useRef)(null),P=(0,N.useSyncExternalStore)(d.subscribeToDraftChanges,d.getDraft),R=(0,N.useRef)(null),I=(0,N.useCallback)(async()=>{var t,r;try{if(!P.reportId)throw Error("No report ID");if(!R.current.value&&!P.userQuestion)throw Error("No question!");let i=P.reportId,o=P.userQuestion||(null==(t=R.current)?void 0:t.value);d.setDraft(e=>({...e,status:"submitting"})),v(!0),c("");try{n({userQuestion:o,reportId:i,status:Wl.THINKING}),a(i),m.success("Report submitted for generation");try{await Wk(f,p,e,i,o,(null==(r=P.clarifications)?void 0:r.filter(e=>e.answer&&e.is_answered))||[],P.useWebsearch)}catch{console.log("Expected timeout for report generation")}}catch(e){console.error("Error handling report generation:",e)}d.resetDraft(),R.current.value=""}catch(e){c(`Error generating report: ${e}`),m.error(`Error generating report: ${e}`)}finally{v(!1)}},[P,f,p,e,n,m]);(0,N.useEffect)(()=>{y(navigator.userAgent.toLowerCase().includes("mac"))},[]),(0,N.useEffect)(()=>{(async()=>{if(!e||e===t||!p){w([]),O([]);return}try{C(!0);let t=await WS(f,p,e);w(t.tables),O(t.pdf_files)}catch(e){console.error("Error fetching tables and files:",e)}finally{C(!1)}})()},[e,f,p,t]);let[z,L]=(0,N.useState)(!1);(0,N.useEffect)(()=>{var e,t;P.userQuestion!==(null==(e=R.current)?void 0:e.value)&&(R.current.value=P.userQuestion,null==(t=R.current)||t.focus())},[P]),uk({key:M.a8.FOCUS_ORACLE_SEARCH,callback:n=>{var r;e===t||(null==s?void 0:s.itemType)==="report"||null==(r=R.current)||r.focus()}},[R]),uk({key:M.a8.NEW_QUESTION,meta:!0,callback:()=>{s&&window.dispatchEvent(new CustomEvent("oracle:new-report")),d.resetDraft(),R.current&&(R.current.value="",R.current.focus())}},[d,s,R]),uk({key:M.a8.TOGGLE_MODE,meta:!0,callback:()=>{if(!s){let e="query-data"===P.mode?"report":"query-data";R.current&&(R.current.style.transition="height 0.3s ease-in-out, opacity 0.3s ease-in-out"),d.setMode(e)}}},[P.mode,d,s,R]);let q=(0,N.useMemo)(()=>null,[]),$=(0,N.useCallback)(async()=>{var t,n;if(!(null!=(t=R.current)&&t.value)){c("Please enter a question");return}try{if(L(!0),v(!0),d.setDraft(e=>({...e,userQuestion:R.current.value,status:"getting_clarifications"})),c(""),(null==(n=P.uploadedFiles)?void 0:n.length)>0)try{await (0,_.v)(f,p,P.uploadedFiles,e);let t=await WS(f,p,e);w(t.tables),O(t.pdf_files)}catch(e){throw Error(`Failed to upload files: ${e.message}`)}let t=D.current||e;if("query-data"===P.mode||(null==s?void 0:s.itemType)==="query-data")d.resetDraft(),i(R.current.value,t),R.current&&(R.current.value="");else{let e=await WO(f,p,t,R.current.value);d.setDraft(t=>({...t,loading:!1,userQuestion:R.current.value,status:"clarifications_received",clarifications:e.clarifications,reportId:e.report_id,uploadedFiles:[]}))}}catch(e){console.log(e),c(e.toString()),d.resetDraft()}finally{v(!1),L(!1),D.current=null}},[f,p,P,s,e,R,L,v,d,c,w,O,D,i]),B=(0,N.useCallback)(async t=>{var n;if("/"===t.key&&t.stopPropagation(),"Enter"!==t.key||t.metaKey||t.ctrlKey||t.shiftKey||E||(t.stopPropagation(),A(!0),j(!0),setTimeout(()=>{A(!1)},3e3)),"Enter"===t.key&&(t.metaKey||t.ctrlKey)){let r=t.currentTarget.value;if(!r){c("Please enter a question");return}try{if(L(!0),v(!0),d.setDraft(e=>({...e,userQuestion:r,status:"getting_clarifications"})),c(""),(null==(n=P.uploadedFiles)?void 0:n.length)>0)try{await (0,_.v)(f,p,P.uploadedFiles,e);let t=await WS(f,p,e);w(t.tables),O(t.pdf_files)}catch(e){throw Error(`Failed to upload files: ${e.message}`)}let t=D.current||e;if("query-data"===P.mode||(null==s?void 0:s.itemType)==="query-data")d.resetDraft(),i(r,t),R.current&&(R.current.value="");else{let e=await WO(f,p,t,r);d.setDraft(t=>({...t,loading:!1,userQuestion:r,status:"clarifications_received",clarifications:e.clarifications,reportId:e.report_id,uploadedFiles:[]}))}}catch(e){console.log(e),c(e.toString()),d.resetDraft()}finally{v(!1),L(!1),D.current=null}}},[f,p,P,s,e,R,L,v,d,A,j,c,E,D,i]),F=(0,N.useMemo)(()=>0===x.length&&0===k.length||(null==s?void 0:s.itemType)==="query-data"||(null==s?void 0:s.itemType)==="report"?null:M.j.jsx("div",{className:"mb-3",children:M.j.jsx("div",{className:"p-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm max-h-96 overflow-y-auto custom-scrollbar",children:M.j.jsxs("div",{className:"flex flex-col gap-2",children:[x.length>0&&M.j.jsxs("div",{children:[M.j.jsxs("div",{className:"font-medium mb-1 flex items-center",children:[M.j.jsx(K,{className:"w-4 h-4 mr-2 text-blue-500 dark:text-blue-400"}),M.j.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:"Available Tables"})]}),M.j.jsx("div",{className:"flex flex-wrap gap-2 max-h-32 overflow-y-auto pr-1 custom-scrollbar",children:x.map(e=>M.j.jsx("div",{className:"bg-white dark:bg-gray-700 px-2 py-1 rounded border border-gray-200 dark:border-gray-600 text-xs text-gray-900 dark:text-gray-200 flex items-center",children:e},e))})]}),k.length>0&&M.j.jsxs("div",{children:[M.j.jsxs("div",{className:"font-medium mb-1 flex items-center",children:[M.j.jsx(M.a9,{className:"w-4 h-4 mr-2 text-blue-500 dark:text-blue-400"}),M.j.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:"Available PDF Files"})]}),M.j.jsx("div",{className:"flex flex-wrap gap-2 max-h-32 overflow-y-auto pr-1 custom-scrollbar",children:k.map(e=>M.j.jsx("div",{className:"bg-white dark:bg-gray-700 px-2 py-1 rounded border border-gray-200 dark:border-gray-600 text-xs text-gray-900 dark:text-gray-200 flex items-center",title:e.file_id,children:e.file_name},e.file_id))})]}),S&&M.j.jsxs("div",{className:"flex items-center justify-center p-1",children:[M.j.jsx(M.d,{classNames:"w-4 h-4 mr-2"}),M.j.jsx("span",{className:"text-xs text-gray-500",children:"Loading resources..."})]})]})})}),[x.length,k.length,S,null==s?void 0:s.itemType]);return M.j.jsxs("div",{className:(0,M.t)("oracle-search max-h-full transition-all duration-700 ease-in-out z-[30] *:transition-all *:duration-700 *:ease-in-out",uA[(null==s?void 0:s.itemType)||(e===t?"new-project":"default")]),children:[l&&M.j.jsx("div",{className:"mb-4 absolute -top-16",children:M.j.jsx(M.J,{type:"error",message:l,dismissable:!0,onDismiss:()=>c("")})}),F,M.j.jsxs(M.Z,{rootClassNames:(0,M.t)("min-h-0 relative z-[2] rounded-2xl p-2 border bg-white dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700 overflow-visible",(null==s?void 0:s.itemType)==="query-data"?"shadow-custom border-gray-300 dark:border-gray-600":"",o),acceptedFileTypes:[".csv",".pdf",".xlsx",".xls"],fileSelection:!1,allowMultiple:!0,onDragOver:e=>{e.preventDefault(),e.stopPropagation(),h(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),h(!1)},onInvalidFiles:(e,t,n)=>{m.error(n)},onDrop:async(t,n)=>{try{if(t.preventDefault(),t.stopPropagation(),(null==s?void 0:s.itemType)==="query-data")return;if(h(!1),!t.dataTransfer){console.error("No dataTransfer in drop event");return}if(0===n.length)throw console.error("No valid files found"),Error("Only CSV, Excel or PDF files are accepted.");v(!0),m.info("Uploading files...");try{let t=await (0,_.v)(f,p,n,e);if(t.projectName!==e){console.log("New project created from file upload:",t.projectName),m.success("New project created from file upload: "+t.projectName),D.current=t.projectName,r(D.current);let e=await WS(f,p,D.current);w(e.tables),O(e.pdf_files)}else{let t=await WS(f,p,e);w(t.tables),O(t.pdf_files)}}catch(e){throw console.error("Error uploading files:",e),Error(`Failed to upload files: ${e.message}`)}finally{v(!1)}}catch(e){console.error("Error processing files:",e),m.error(e.message),v(!1)}},children:[M.j.jsx(uC,{selectedItem:s}),M.j.jsx(M.V,{onChange:e=>{d.setQuestion(e.target.value)},prefix:q,ref:R,rootClassNames:(0,M.t)("w-full py-2 transition-all duration-300 ease-in-out","report"===P.mode?"min-h-[8rem]":"min-h-[5rem]"),textAreaClassNames:"border-0 outline-0 ring-0 focus:ring-0 bg-gray-50 w-full max-h-60",suffix:M.j.jsxs("div",{className:(0,M.t)("flex flex-col"),children:[M.j.jsxs("div",{className:(0,M.t)("dark:text-gray-400"),children:[M.j.jsxs("div",{className:"flex items-center justify-between",children:[M.j.jsxs("div",{children:["Press"," ",g?M.j.jsxs(M.j.Fragment,{children:[M.j.jsx(M.aa,{className:"inline align-middle w-2.5"}),"+ Enter"]}):"Ctrl + Enter",null!=s&&s.itemType?" to submit. ":" to start. Drop CSV or Excel files to analyse them. Drop PDFs to add context to the report. "]}),M.j.jsxs("div",{className:"relative",children:[M.j.jsx("button",{onClick:$,disabled:b,className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-lg text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Submit"}),T&&M.j.jsxs("div",{className:"absolute -top-10 right-0 z-40 px-3 py-2 text-sm font-medium bg-white text-gray-800 dark:bg-gray-800 dark:text-gray-200 rounded-md border border-gray-300 dark:border-gray-700 shadow-md whitespace-nowrap",children:["Press ",g?"+Enter":"Ctrl+Enter"," to submit",M.j.jsx("div",{className:"absolute w-3 h-3 bg-white dark:bg-gray-800 border-r border-b border-gray-300 dark:border-gray-700 transform rotate-45 -bottom-1.5 right-4"})]})]})]}),M.j.jsxs("div",{className:"flex gap-2 mt-1 text-xs text-gray-500 dark:text-gray-400",children:[M.j.jsx("span",{className:"flex items-center",children:M.j.jsx(M.a2,{keyValue:M.a8.FOCUS_ORACLE_SEARCH,className:"mr-1",text:"Focus search"})}),s&&M.j.jsx("span",{className:"flex items-center",children:M.j.jsx(M.a2,{keyValue:M.a8.NEW_QUESTION,className:"mr-1",meta:!0,text:"New question"})}),!(null!=s&&s.itemType)&&M.j.jsx("span",{className:"flex items-center",children:M.j.jsx(M.a2,{keyValue:M.a8.TOGGLE_MODE,className:"mr-1",meta:!0,text:"Toggle mode"})})]})]}),M.j.jsxs("div",{className:(0,M.t)("flex flex-row mt-8 gap-4 items-center",(null==s?void 0:s.itemType)==="query-data"&&"h-0 mt-0 overflow-hidden opacity-0"),children:[M.j.jsx("div",{className:"flex items-center gap-3",children:M.j.jsx(M.W,{disabled:(null==s?void 0:s.itemType)==="query-data"||z||!!(P.clarifications&&P.clarifications.length),onToggle:e=>{R.current&&(R.current.style.transition="height 0.3s ease-in-out, opacity 0.3s ease-in-out"),d.setMode(e?"report":"query-data"),L(!1)},checked:"report"===P.mode,showBothLabels:!0,onLabel:M.j.jsxs("span",{className:"flex items-center gap-1 transition-all duration-300 ease-in-out",children:[uT.report,M.j.jsx("span",{className:"whitespace-nowrap",children:"Deep Research"})]}),offLabel:M.j.jsxs("span",{className:"flex items-center gap-1 transition-all duration-300 ease-in-out",children:[uT["query-data"],M.j.jsx("span",{className:"whitespace-nowrap",children:"Fast Analysis"})]})})}),"report"===P.mode&&(null==s?void 0:s.itemType)!=="query-data"?M.j.jsx(M.W,{onLabel:"Use web search to enhance report",offLabel:"Use web search to enhance report",defaultOn:P.useWebsearch,disabled:z||!!(P.clarifications&&P.clarifications.length),onToggle:e=>{d.setDraft(t=>({...t,useWebsearch:e}))}}):null]})]}),disabled:b,placeholder:(null==s?void 0:s.itemType)==="query-data"?"Type here":u?"Release to drop":"report"===P.mode?`I will start a Deep Research process on your data tables, any PDF files you have uploaded, and the web. For best results:
- include the kind of analysis you want done
- your desired areas of focus
- any concrete sources you want me to look at`:"Type your question here or drop PDF, CSV or Excel files",autoResize:!0,defaultRows:1,textAreaHtmlProps:{style:{resize:"none"}},onKeyDown:B})]}),!b&&P.clarifications&&P.clarifications.length>0&&!s&&"query-data"!==P.mode&&M.j.jsxs("div",{className:"w-11/12 mx-auto my-0 flex flex-col z-[20] relative",children:[M.j.jsx("div",{className:"border border-blue-500 dark:border-sky-600 rounded-t-xl bg-sky-200 dark:bg-sky-900 border-b-0 mt-4",children:M.j.jsx("div",{className:"h-96 overflow-y-auto py-2 px-4",children:M.j.jsx(uS,{})})}),M.j.jsx("div",{className:"border border-blue-500 dark:border-sky-600 rounded-b-xl bg-sky-200 dark:bg-sky-900 py-3 px-4 border-t-0",children:M.j.jsx("button",{className:"bg-gray-600 text-white border-0 hover:bg-gray-700 dark:bg-gray-600 dark:hover:bg-gray-600 text-base py-2 px-4 rounded",onClick:I,children:"Generate"})})]}),b&&M.j.jsx("div",{className:"w-11/12 mx-auto border border-blue-500 dark:border-sky-600 rounded-xl bg-sky-200 dark:bg-sky-900 overflow-hidden mt-4",children:M.j.jsx("div",{className:"flex flex-col gap-2 py-2 px-4",children:M.j.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-300 flex items-center",children:[M.j.jsx(M.d,{classNames:"w-4 mr-1"}),uv[P.status]]})})})]})}),uM=({selectedProjectName:e,projectNames:t,uploadNewProjectOption:n,hasUploadedFiles:r,onProjectChange:i})=>M.j.jsx("div",{children:M.j.jsx(M.S,{disabled:r,label:"Select project",rootClassNames:"mb-2",value:e,allowClear:!1,allowCreateNewOption:!1,options:[{value:n,label:"Upload new"}].concat(t.map(e=>({value:e,label:e}))),onChange:e=>i(e)})});async function uN({question:e,projectName:t,analysisId:n,selectedItem:r,createNewFastAnalysis:i,setOracleHistory:o,updateUrlWithItemId:s,setSelectedItemId:a,setSelectedProjectName:l,messageManager:c}){try{let{rootAnalysisId:u,analysisTree:h,treeManager:d}=await i({question:e,projectName:t,analysisId:n,rootAnalysisId:n,treeManager:(null==r?void 0:r.itemType)==="query-data"?r.treeManager:void 0}),f={date_created:KN(),itemId:u,analysisTree:h,treeManager:d,itemType:"query-data"};return o(e=>{var n,r,i,o,s;let a={...e};return{...e,[t]:{...e[t],Today:[f,...(null==(n=null==e?void 0:e[t])?void 0:n.Today)||[]],Yesterday:(null==(r=null==e?void 0:e[t])?void 0:r.Yesterday)||[],"Past week":(null==(i=null==e?void 0:e[t])?void 0:i["Past week"])||[],"Past month":(null==(o=null==e?void 0:e[t])?void 0:o["Past month"])||[],Earlier:(null==(s=null==e?void 0:e[t])?void 0:s.Earlier)||[]}}}),s(u),a(u),l(t),c.success("New analysis created"),{rootAnalysisId:u,analysisTree:h,treeManager:d}}catch(e){throw console.error("Error in OracleCreateNewAnalysis:",e),c.error("Failed to create analysis: "+e.message),e}}function u_(){return(u_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}let uj=typeof Symbol>"u"?"__":Symbol.for(""),uD=typeof Symbol>"u"?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),uP="u">typeof globalThis?globalThis:"u">typeof window?window:{};class uR{constructor(e,t){this.rules=[];let{finish:n}=t||{};function r(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}for(let t in e)!function e(t,i,o,s){let a=[],l=/^@(\w+)\b/.exec(t[0]),c=l&&"keyframes"==l[1];if(l&&null==i)return o.push(t[0]+";");for(let n in i){let s=i[n];if(/&/.test(n))e(n.split(/,\s*/).map(e=>t.map(t=>e.replace(/&/,t))).reduce((e,t)=>e.concat(t)),s,o);else if(s&&"object"==typeof s){if(!l)throw RangeError("The value of a property ("+n+") should be a primitive value.");e(r(n),s,a,c)}else null!=s&&a.push(n.replace(/_.*/,"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())+": "+s+";")}(a.length||c)&&o.push((!n||l||s?t:t.map(n)).join(", ")+" {"+a.join(" ")+"}")}(r(t),e[t],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=uP[uj]||1;return uP[uj]=e+1,""+e.toString(36)}static mount(e,t,n){let r=e[uD],i=n&&n.nonce;r?i&&r.setNonce(i):r=new uz(e,i),r.mount(Array.isArray(t)?t:[t],e)}}let uI=new Map;class uz{constructor(e,t){let n=e.ownerDocument||e,r=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let t=uI.get(n);if(t)return e[uD]=t;this.sheet=new r.CSSStyleSheet,uI.set(n,this)}else this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[uD]=this}mount(e,t){let n=this.sheet,r=0,i=0;for(let t=0;t<e.length;t++){let o=e[t],s=this.modules.indexOf(o);if(s<i&&s>-1&&(this.modules.splice(s,1),i--,s=-1),-1==s){if(this.modules.splice(i++,0,o),n)for(let e=0;e<o.rules.length;e++)n.insertRule(o.rules[e],r++)}else{for(;i<s;)r+=this.modules[i++].rules.length;r+=o.rules.length,i++}}if(n)0>t.adoptedStyleSheets.indexOf(this.sheet)&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+`
`;this.styleTag.textContent=e;let n=t.head||t;this.styleTag.parentNode!=n&&n.insertBefore(this.styleTag,n.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}for(var uL={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},uq={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},u$="u">typeof navigator&&/Mac/.test(navigator.platform),uB="u">typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),uF=0;uF<10;uF++)uL[48+uF]=uL[96+uF]=String(uF);for(var uF=1;uF<=24;uF++)uL[uF+111]="F"+uF;for(var uF=65;uF<=90;uF++)uL[uF]=String.fromCharCode(uF+32),uq[uF]=String.fromCharCode(uF);for(var uQ in uL)uq.hasOwnProperty(uQ)||(uq[uQ]=uL[uQ]);function uV(e){var t=!(u$&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||uB&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?uq:uL)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}function uH(e){let t;return(11==e.nodeType?e.getSelection?e:e.ownerDocument:e).getSelection()}function uU(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function uW(e,t){if(!t.anchorNode)return!1;try{return uU(e,t.anchorNode)}catch{return!1}}function uG(e){return 3==e.nodeType?u3(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function uX(e,t,n,r){return!!n&&(uK(e,t,n,r,-1)||uK(e,t,n,r,1))}function uY(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function uZ(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}function uK(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:uJ(e))){if("DIV"==e.nodeName)return!1;let n=e.parentNode;if(!n||1!=n.nodeType)return!1;t=uY(e)+(i<0?0:1),e=n}else{if(1!=e.nodeType||1==(e=e.childNodes[t+(i<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=i<0?uJ(e):0}}}function uJ(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function u0(e,t){let n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function u1(e,t){let n=t.width/e.offsetWidth,r=t.height/e.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||1>Math.abs(t.width-e.offsetWidth))&&(n=1),(r>.995&&r<1.005||!isFinite(r)||1>Math.abs(t.height-e.offsetHeight))&&(r=1),{scaleX:n,scaleY:r}}class u2{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?uJ(t):0),n,Math.min(e.focusOffset,n?uJ(n):0))}set(e,t,n,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=r}}let u4=null;function u5(e){if(e.setActive)return e.setActive();if(u4)return e.focus(u4);let t=[];for(let n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(null==u4?{get preventScroll(){return u4={preventScroll:!0},!0}}:void 0),!u4){u4=!1;for(let e=0;e<t.length;){let n=t[e++],r=t[e++],i=t[e++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=i&&(n.scrollLeft=i)}}}function u3(e,t,n=t){let r=l||(l=document.createRange());return r.setEnd(e,n),r.setStart(e,t),r}function u6(e,t,n,r){let i={key:t,code:t,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let o=new KeyboardEvent("keydown",i);o.synthetic=!0,e.dispatchEvent(o);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,e.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function u7(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}function u8(e){return e.scrollTop>Math.max(1,e.scrollHeight-e.clientHeight-4)}function u9(e,t){for(let n=e,r=t;;){if(3==n.nodeType&&r>0)return{node:n,offset:r};if(1==n.nodeType&&r>0){if("false"==n.contentEditable)return null;r=uJ(n=n.childNodes[r-1])}else{if(!n.parentNode||uZ(n))return null;r=uY(n),n=n.parentNode}}}function he(e,t){for(let n=e,r=t;;){if(3==n.nodeType&&r<n.nodeValue.length)return{node:n,offset:r};if(1==n.nodeType&&r<n.childNodes.length){if("false"==n.contentEditable)return null;n=n.childNodes[r],r=0}else{if(!n.parentNode||uZ(n))return null;r=uY(n)+1,n=n.parentNode}}}class ht{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new ht(e.parentNode,uY(e),t)}static after(e,t){return new ht(e.parentNode,uY(e)+1,t)}}let hn=[];class hr{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(2&this.flags){let n=this.dom,r=null,i;for(let o of this.children){if(7&o.flags){if(!o.dom&&(i=r?r.nextSibling:n.firstChild)){let e=hr.get(i);(!e||!e.parent&&e.canReuseDOM(o))&&o.reuseDOM(i)}o.sync(e,t),o.flags&=-8}if(i=r?r.nextSibling:n.firstChild,t&&!t.written&&t.node==n&&i!=o.dom&&(t.written=!0),o.dom.parentNode==n)for(;i&&i!=o.dom;)i=hi(i);else n.insertBefore(o.dom,i);r=o.dom}for((i=r?r.nextSibling:n.firstChild)&&t&&t.node==n&&(t.written=!0);i;)i=hi(i)}else if(1&this.flags)for(let n of this.children)7&n.flags&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let r=0==uJ(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==r&&t.firstChild!=t.lastChild&&(r=e==t.firstChild?-1:1),e=t}n=r<0?e:e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!hr.get(n);)n=n.nextSibling;if(!n)return this.length;for(let e=0,t=0;;e++){let r=this.children[e];if(r.dom==n)return t;t+=r.length+r.breakAfter}}domBoundsAround(e,t,n=0){let r=-1,i=-1,o=-1,s=-1;for(let a=0,l=n,c=n;a<this.children.length;a++){let n=this.children[a],u=l+n.length;if(l<e&&u>t)return n.domBoundsAround(e,t,l);if(u>=e&&-1==r&&(r=a,i=l),l>t&&n.dom.parentNode==this.dom){o=a,s=c;break}c=u,l=u+n.breakAfter}return{from:i,to:s<0?n+this.length:s,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),1&t.flags)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,7&this.flags&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=hn){this.markDirty();for(let r=e;r<t;r++){let e=this.children[r];e.parent==this&&0>n.indexOf(e)&&e.destroy()}n.length<250?this.children.splice(e,t-e,...n):this.children=[].concat(this.children.slice(0,e),n,this.children.slice(t));for(let e=0;e<n.length;e++)n[e].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ho(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,r,i,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}function hi(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}hr.prototype.breakAfter=0;class ho{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function hs(e,t,n,r,i,o,s,a,l){let{children:c}=e,u=c.length?c[t]:null,h=o.length?o[o.length-1]:null,d=h?h.breakAfter:s;if(!(t==r&&u&&!s&&!d&&o.length<2&&u.merge(n,i,o.length?h:null,0==n,a,l))){if(r<c.length){let e=c[r];e&&(i<e.length||e.breakAfter&&null!=h&&h.breakAfter)?(t==r&&(e=e.split(i),i=0),!d&&h&&e.merge(0,i,h,!0,0,l)?o[o.length-1]=e:((i||e.children.length&&!e.children[0].length)&&e.merge(0,i,null,!1,0,l),o.push(e))):null!=e&&e.breakAfter&&(h?h.breakAfter=1:s=1),r++}for(u&&(u.breakAfter=s,n>0&&(!s&&o.length&&u.merge(n,u.length,o[0],!1,a,0)?u.breakAfter=o.shift().breakAfter:(n<u.length||u.children.length&&0==u.children[u.children.length-1].length)&&u.merge(n,u.length,null,!1,a,0),t++));t<r&&o.length;)if(c[r-1].become(o[o.length-1]))r--,o.pop(),l=o.length?0:a;else if(c[t].become(o[0]))t++,o.shift(),a=o.length?0:l;else break;!o.length&&t&&r<c.length&&!c[t-1].breakAfter&&c[r].merge(0,0,c[t-1],!1,a,l)&&t--,(t<r||o.length)&&e.replaceChildren(t,r,o)}}function ha(e,t,n,r,i,o){let s=e.childCursor(),{i:a,off:l}=s.findPos(n,1),{i:c,off:u}=s.findPos(t,-1),h=t-n;for(let e of r)h+=e.length;e.length+=h,hs(e,c,u,a,l,r,0,i,o)}let hl="u">typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},hc="u">typeof document?document:{documentElement:{style:{}}},hu=/Edge\/(\d+)/.exec(hl.userAgent),hh=/MSIE \d/.test(hl.userAgent),hd=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(hl.userAgent),hf=!!(hh||hd||hu),hp=!hf&&/gecko\/(\d+)/i.test(hl.userAgent),hm=!hf&&/Chrome\/(\d+)/.exec(hl.userAgent),hg="webkitFontSmoothing"in hc.documentElement.style,hy=!hf&&/Apple Computer/.test(hl.vendor),hb=hy&&(/Mobile\/\w+/.test(hl.userAgent)||hl.maxTouchPoints>2);var hv={mac:hb||/Mac/.test(hl.platform),windows:/Win/.test(hl.platform),linux:/Linux|X11/.test(hl.platform),ie:hf,ie_version:hh?hc.documentMode||6:hd?+hd[1]:hu?+hu[1]:0,gecko:hp,gecko_version:hp?+(/Firefox\/(\d+)/.exec(hl.userAgent)||[0,0])[1]:0,chrome:!!hm,chrome_version:hm?+hm[1]:0,ios:hb,android:/Android\b/.test(hl.userAgent),webkit:hg,safari:hy,webkit_version:hg?+(/\bAppleWebKit\/(\d+)/.exec(hl.userAgent)||[0,0])[1]:0,tabSize:null!=hc.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class hx extends hr{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,n){return!(8&this.flags)&&(!n||n instanceof hx&&!(this.length-(t-e)+n.length>256)&&!(8&n.flags))&&(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new hx(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=8&this.flags,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new ht(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return function(e,t,n){let r=e.nodeValue.length;t>r&&(t=r);let i=t,o=t,s=0;0==t&&n<0||t==r&&n>=0?hv.chrome||hv.gecko||(t?(i--,s=1):o<r&&(o++,s=-1)):n<0?i--:o<r&&o++;let a=u3(e,i,o).getClientRects();if(!a.length)return null;let l=a[(s?s<0:n>=0)?0:a.length-1];return hv.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,e=>e.width)||l),s?u0(l,s<0):l||null}(this.dom,e,t)}}class hw extends hr{constructor(e,t=[],n=0){for(let r of(super(),this.mark=e,this.children=t,this.length=n,t))r.setParent(this)}setAttrs(e){if(u7(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,r,i,o){return(!n||!!(n instanceof hw&&n.mark.eq(this.mark))&&(!e||!(i<=0))&&(!(t<this.length)||!(o<=0)))&&(ha(this,e,t,n?n.children.slice():[],i-1,o-1),this.markDirty(),!0)}split(e){let t=[],n=0,r=-1,i=0;for(let o of this.children){let s=n+o.length;s>e&&t.push(n<e?o.split(e-n):o),r<0&&n>=e&&(r=i),n=s,i++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new hw(this.mark,t,o)}domAtPos(e){return hS(this,e)}coordsAt(e,t){return hC(this,e,t)}}class hk extends hr{static create(e,t,n){return new hk(e,t,n)}constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}split(e){let t=hk.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,n,r,i,o){return(!n||n instanceof hk&&!!this.widget.compare(n.widget)&&(!(e>0)||!(i<=0))&&(!(t<this.length)||!(o<=0)))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof hk&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return eS.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):eS.empty}domAtPos(e){return(this.length?0==e:this.side>0)?ht.before(this.dom):ht.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let r=this.dom.getClientRects(),i=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let t=o?r.length-1:0;i=r[t],!(e>0?0==t:t==r.length-1||i.top<i.bottom);t+=o?-1:1);return u0(i,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class hO extends hr{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof hO&&e.side==this.side}split(){return new hO(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?ht.before(this.dom):ht.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return eS.empty}get isHidden(){return!0}}function hS(e,t){let n=e.dom,{children:r}=e,i=0;for(let e=0;i<r.length;i++){let o=r[i],s=e+o.length;if(!(s==e&&0>=o.getSide())){if(t>e&&t<s&&o.dom.parentNode==n)return o.domAtPos(t-e);if(t<=e)break;e=s}}for(let e=i;e>0;e--){let t=r[e-1];if(t.dom.parentNode==n)return t.domAtPos(t.length)}for(let e=i;e<r.length;e++){let t=r[e];if(t.dom.parentNode==n)return t.domAtPos(0)}return new ht(n,0)}function hC(e,t,n){let r=null,i=-1,o=null,s=-1;!function e(t,a){for(let l=0,c=0;l<t.children.length&&c<=a;l++){let u=t.children[l],h=c+u.length;h>=a&&(u.children.length?e(u,a-c):(!o||o.isHidden&&n>0)&&(h>a||c==h&&u.getSide()>0)?(o=u,s=a-c):(c<a||c==h&&0>u.getSide()&&!u.isHidden)&&(r=u,i=a-c)),c=h}}(e,t);let a=(n<0?r:o)||r||o;return a?a.coordsAt(Math.max(0,a==r?i:s),n):function(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let n=uG(t);return n[n.length-1]||null}(e)}function hT(e,t){for(let n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}hx.prototype.children=hk.prototype.children=hO.prototype.children=hn;let hA=Object.create(null);function hE(e,t,n){if(e==t)return!0;e||(e=hA),t||(t=hA);let r=Object.keys(e),i=Object.keys(t);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let o of r)if(o!=n&&(-1==i.indexOf(o)||e[o]!==t[o]))return!1;return!0}function hM(e,t,n){let r=!1;if(t)for(let i in t)n&&i in n||(r=!0,"style"==i?e.style.cssText="":e.removeAttribute(i));if(n)for(let i in n)t&&t[i]==n[i]||(r=!0,"style"==i?e.style.cssText=n[i]:e.setAttribute(i,n[i]));return r}let hN=class{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return -1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}};var h_=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(h_||(h_={}));let hj=class extends tO{constructor(e,t,n,r){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(e){return new hD(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new hR(e,t,t,n,e.widget||null,!1)}static replace(e){let t=!!e.block,n,r;if(e.isBlockGap)n=-5e8,r=4e8;else{let{start:i,end:o}=hI(e,t);n=(i?t?-3e8:-1:5e8)-1,r=(o?t?2e8:1:-6e8)+1}return new hR(e,n,r,t,e.widget||null,!0)}static line(e){return new hP(e)}static set(e,t=!1){return tA.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}};hj.none=tA.empty;class hD extends hj{constructor(e){let{start:t,end:n}=hI(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof hD&&this.tagName==e.tagName&&(this.class||(null===(t=this.attrs)||void 0===t?void 0:t.class))==(e.class||(null===(n=e.attrs)||void 0===n?void 0:n.class))&&hE(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw RangeError("Mark decorations may not be empty");return super.range(e,t)}}hD.prototype.point=!1;class hP extends hj{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof hP&&this.spec.class==e.spec.class&&hE(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}hP.prototype.mapMode=eL.TrackBefore,hP.prototype.point=!0;class hR extends hj{constructor(e,t,n,r,i,o){super(t,n,i,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?eL.TrackBefore:eL.TrackAfter:eL.TrackDel}get type(){return this.startSide!=this.endSide?h_.WidgetRange:this.startSide<=0?h_.WidgetBefore:h_.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){var t,n;return e instanceof hR&&(t=this.widget,t==(n=e.widget)||!!(t&&n&&t.compare(n)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function hI(e,t=!1){let{inclusiveStart:n,inclusiveEnd:r}=e;return null==n&&(n=e.inclusive),null==r&&(r=e.inclusive),{start:n??t,end:r??t}}function hz(e,t,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=e?n[i]=Math.max(n[i],t):n.push(e,t)}hR.prototype.point=!0;class hL extends hr{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,r,i,o){if(n){if(!(n instanceof hL))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),ha(this,e,t,n?n.children.slice():[],i,o),!0}split(e){let t=new hL;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:n,off:r}=this.childPos(e);r&&(t.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let e=n;e<this.children.length;e++)t.append(this.children[e],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){hE(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){!function e(t,n,r){let i,{children:o}=t;r>0&&n instanceof hw&&o.length&&(i=o[o.length-1])instanceof hw&&i.mark.eq(n.mark)?e(i,n.children[0],r-1):(o.push(n),n.setParent(t)),t.length+=n.length}(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=hT(t,this.attrs||{})),n&&(this.attrs=hT({class:n},this.attrs||{}))}domAtPos(e){return hS(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?4&this.flags&&(u7(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(hM(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&hr.get(r)instanceof hw;)r=r.lastChild;if(!r||!this.length||"BR"!=r.nodeName&&(null===(n=hr.get(r))||void 0===n?void 0:n.isEditable)==!1&&(!hv.ios||!this.children.some(e=>e instanceof hx))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e=0,t;for(let n of this.children){if(!(n instanceof hx)||/[^ -~]/.test(n.text))return null;let r=uG(n.dom);if(1!=r.length)return null;e+=r[0].width,t=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let n=hC(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:e}=this.parent.view.viewState,t=n.bottom-n.top;if(2>Math.abs(t-e.lineHeight)&&e.textHeight<t){let r=(t-e.textHeight)/2;return{top:n.top+r,bottom:n.bottom-r,left:n.left,right:n.left}}}return n}become(e){return e instanceof hL&&0==this.children.length&&0==e.children.length&&hE(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let n=0,r=0;n<e.children.length;n++){let i=e.children[n],o=r+i.length;if(o>=t){if(i instanceof hL)return i;if(o>t)break}r=o+i.breakAfter}return null}}class hq extends hr{constructor(e,t,n){super(),this.widget=e,this.length=t,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,r,i,o){return(!n||n instanceof hq&&!!this.widget.compare(n.widget)&&(!(e>0)||!(i<=0))&&(!(t<this.length)||!(o<=0)))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return 0==e?ht.before(this.dom):ht.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new hq(this.widget,t,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return hn}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):eS.empty}domBoundsAround(){return null}become(e){return e instanceof hq&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)||(this.widget instanceof h$?null:u0(this.dom.getBoundingClientRect(),this.length?0==e:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:n}=this.deco;return t!=n&&(e<0?t<0:n>0)}}class h$ extends hN{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class hB{constructor(e,t,n,r){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof hq&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new hL),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(hF(new hO(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||e&&this.content.length&&this.content[this.content.length-1]instanceof hq||this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:n,done:r}=this.cursor.next(this.skip);if(this.skip=0,r)throw Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=t,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(hF(new hx(this.text.slice(this.textOff,this.textOff+r)),t),n),this.atCursorPos=!0,this.textOff+=r,e-=r,n=0}}span(e,t,n,r){this.buildText(t-e,n,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,n,r,i,o){if(this.disallowBlockEffectsFor[o]&&n instanceof hR){if(n.block)throw RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=t-e;if(n instanceof hR){if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new hq(n.widget||hQ.block,s,n));else{let o=hk.create(n.widget||hQ.inline,s,s?0:n.startSide),a=this.atCursorPos&&!o.isEditable&&i<=r.length&&(e<t||n.startSide>0),l=!o.isEditable&&(e<t||i>r.length||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||o.isEditable||(this.pendingBuffer=0),this.flushBuffer(r),a&&(c.append(hF(new hO(1),r),i),i=r.length+Math.max(0,i-r.length)),c.append(hF(o,r),i),this.atCursorPos=l,this.pendingBuffer=l?e<t||i>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=i)}static build(e,t,n,r,i){let o=new hB(e,t,n,i);return o.openEnd=tA.spans(r,t,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function hF(e,t){for(let n of t)e=new hw(n,[e],e.length);return e}class hQ extends hN{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}hQ.inline=new hQ("span"),hQ.block=new hQ("div");var hV=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(hV||(hV={}));let hH=hV.LTR,hU=hV.RTL;function hW(e){let t=[];for(let n=0;n<e.length;n++)t.push(1<<+e[n]);return t}let hG=hW("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),hX=hW("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),hY=Object.create(null),hZ=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),n=e.charCodeAt(1);hY[t]=n,hY[n]=-t}function hK(e){return e<=247?hG[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?hX[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8204?256:64336<=e&&e<=65023?4:1}let hJ=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class h0{get dir(){return this.level%2?hU:hH}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,n,r){let i=-1;for(let o=0;o<e.length;o++){let s=e[o];if(s.from<=t&&s.to>=t){if(s.level==n)return o;(i<0||(0!=r?r<0?s.from<t:s.to>t:e[i].level>s.level))&&(i=o)}}if(i<0)throw RangeError("Index out of range");return i}}let h1=[];function h2(e){return[new h0(0,e,0)]}let h4="",h5=eZ.define(),h3=eZ.define(),h6=eZ.define(),h7=eZ.define(),h8=eZ.define(),h9=eZ.define(),de=eZ.define(),dt=eZ.define(),dn=eZ.define(),dr=eZ.define({combine:e=>e.some(e=>e)}),di=eZ.define({combine:e=>e.some(e=>e)}),ds=eZ.define();class da{constructor(e,t="nearest",n="nearest",r=5,i=5,o=!1){this.range=e,this.y=t,this.x=n,this.yMargin=r,this.xMargin=i,this.isSnapshot=o}map(e){return e.empty?this:new da(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new da(eG.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}let dl=tf.define({map:(e,t)=>e.map(t)}),dc=tf.define();function du(e,t,n){let r=e.facet(h7);r.length?r[0](t):window.onerror?window.onerror(String(t),n,void 0,void 0,t):n?console.error(n+":",t):console.error(t)}let dh=eZ.define({combine:e=>!e.length||e[0]}),dd=0,df=eZ.define();class dp{constructor(e,t,n,r,i){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=r,this.extension=i(this)}static define(e,t){let{eventHandlers:n,eventObservers:r,provide:i,decorations:o}=t||{};return new dp(dd++,e,n,r,e=>{let t=[df.of(e)];return o&&t.push(db.of(t=>{let n=t.plugin(e);return n?o(n):hj.none})),i&&t.push(i(e)),t})}static fromClass(e,t){return dp.define(t=>new e(t),t)}}class dm{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(du(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){du(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null!==(t=this.value)&&void 0!==t&&t.destroy)try{this.value.destroy()}catch(t){du(e.state,t,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}let dg=eZ.define(),dy=eZ.define(),db=eZ.define(),dv=eZ.define(),dx=eZ.define(),dw=eZ.define();function dk(e,t){let n=e.state.facet(dw);if(!n.length)return n;let r=n.map(t=>t instanceof Function?t(e):t),i=[];return tA.spans(r,t.from,t.to,{point(){},span(e,n,r,o){let s=e-t.from,a=n-t.from,l=i;for(let e=r.length-1;e>=0;e--,o--){let n=r[e].spec.bidiIsolate,i;if(null==n&&(n=function(e,t,n){for(let r=t;r<n;r++){let t=hK(e.charCodeAt(r));if(1==t)break;if(2==t||4==t)return hU}return hH}(t.text,s,a)),o>0&&l.length&&(i=l[l.length-1]).to==s&&i.direction==n)i.to=a,l=i.inner;else{let e={from:s,to:a,direction:n,inner:[]};l.push(e),l=e.inner}}}}),i}let dO=eZ.define();function dS(e){let t=0,n=0,r=0,i=0;for(let o of e.state.facet(dO)){let s=o(e);s&&(null!=s.left&&(t=Math.max(t,s.left)),null!=s.right&&(n=Math.max(n,s.right)),null!=s.top&&(r=Math.max(r,s.top)),null!=s.bottom&&(i=Math.max(i,s.bottom)))}return{left:t,right:n,top:r,bottom:i}}let dC=eZ.define();class dT{constructor(e,t,n,r){this.fromA=e,this.toA=t,this.fromB=n,this.toB=r}join(e){return new dT(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(0==t.length)return e;let n=[];for(let r=0,i=0,o=0,s=0;;r++){let a=r==e.length?null:e[r],l=o-s,c=a?a.fromB:1e9;for(;i<t.length&&t[i]<c;){let e=t[i],r=t[i+1],o=Math.max(s,e),a=Math.min(c,r);if(o<=a&&new dT(o+l,a+l,o,a).addToSet(n),r>c)break;i+=2}if(!a)return n;new dT(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),o=a.toA,s=a.toB}}}class dA{constructor(e,t,n){for(let r of(this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=e$.empty(this.startState.doc.length),n))this.changes=this.changes.compose(r.changes);let r=[];this.changes.iterChangedRanges((e,t,n,i)=>r.push(new dT(e,t,n,i))),this.changedRanges=r}static create(e,t,n){return new dA(e,t,n)}get viewportChanged(){return(4&this.flags)>0}get viewportMoved(){return(8&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(18&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return 0==this.flags&&0==this.transactions.length}}class dE extends hr{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=hj.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new hL],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new dT(0,0,0,e.state.doc.length)],0,null)}update(e){var t,n,r,i,o,s;let a,l;let c=e.changedRanges;this.minWidth>0&&c.length&&(c.every(({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let u=-1;!(this.view.inputState.composing>=0)||this.view.observer.editContext||(null!==(t=this.domChanged)&&void 0!==t&&t.newSel?u=this.domChanged.newSel.head:(n=e.changes,r=this.hasComposition,a=!1,r&&n.iterChangedRanges((e,t)=>{e<r.to&&t>r.from&&(a=!0)}),a||e.selectionSet||(u=e.state.selection.main.head)));let h=u>-1?function(e,t,n){let r=dM(e,n);if(!r)return null;let{node:i,from:o,to:s}=r,a=i.nodeValue;if(/[\n\r]/.test(a)||e.state.doc.sliceString(r.from,r.to)!=a)return null;let l=t.invertedDesc,c=new dT(l.mapPos(o),l.mapPos(s),o,s),u=[];for(let t=i.parentNode;;t=t.parentNode){let n=hr.get(t);if(n instanceof hw)u.push({node:t,deco:n.mark});else{if(n instanceof hL||"DIV"==t.nodeName&&t.parentNode==e.contentDOM)return{range:c,text:i,marks:u,line:t};if(t==e.contentDOM)return null;u.push({node:t,deco:new hD({inclusive:!0,attributes:function(e){let t=Object.create(null);for(let n=0;n<e.attributes.length;n++){let r=e.attributes[n];t[r.name]=r.value}return t}(t),tagName:t.tagName.toLowerCase()})})}}}(this.view,e.changes,u):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:t,to:n}=this.hasComposition;c=new dT(t,n,e.changes.mapPos(t,-1),e.changes.mapPos(n,1)).addToSet(c.slice())}this.hasComposition=h?{from:h.range.fromB,to:h.range.toB}:null,(hv.ie||hv.chrome)&&!h&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let d=(i=this.decorations,o=this.updateDeco(),s=e.changes,l=new dN,tA.compare(i,o,s,l),l.changes);return c=dT.extendWithRanges(c,d),(!!(7&this.flags)||0!=c.length)&&(this.updateInner(c,e.startState.doc.length,h),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=hv.chrome||hv.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,e),this.flags&=-8,e&&(e.written||r.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(e=>e.flags&=-9);let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let e of this.children)e instanceof hq&&e.widget instanceof h$&&i.push(e.dom);r.updateGaps(i)}updateChildren(e,t,n){let r=n?n.range.addToSet(e.slice()):e,i=this.childCursor(t);for(let e=r.length-1;;e--){let t=e>=0?r[e]:null;if(!t)break;let{fromA:o,toA:s,fromB:a,toB:l}=t,c,u,h,d;if(n&&n.range.fromB<l&&n.range.toB>a){let e=hB.build(this.view.state.doc,a,n.range.fromB,this.decorations,this.dynamicDecorationMap),t=hB.build(this.view.state.doc,n.range.toB,l,this.decorations,this.dynamicDecorationMap);u=e.breakAtStart,h=e.openStart,d=t.openEnd;let r=this.compositionView(n);t.breakAtStart?r.breakAfter=1:t.content.length&&r.merge(r.length,r.length,t.content[0],!1,t.openStart,0)&&(r.breakAfter=t.content[0].breakAfter,t.content.shift()),e.content.length&&r.merge(0,0,e.content[e.content.length-1],!0,0,e.openEnd)&&e.content.pop(),c=e.content.concat(r).concat(t.content)}else({content:c,breakAtStart:u,openStart:h,openEnd:d}=hB.build(this.view.state.doc,a,l,this.decorations,this.dynamicDecorationMap));let{i:f,off:p}=i.findPos(s,1),{i:m,off:g}=i.findPos(o,-1);hs(this,m,g,f,p,c,u,h,d)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(e){for(let t of(this.editContextFormatting=this.editContextFormatting.map(e.changes),e.transactions))for(let e of t.effects)e.is(dc)&&(this.editContextFormatting=e.value)}compositionView(e){let t=new hx(e.text.nodeValue);for(let{deco:n}of(t.flags|=8,e.marks))t=new hw(n,[t],t.length);let n=new hL;return n.append(t,0),n}fixCompositionDOM(e){let t=(e,t)=>{t.flags|=8|+!!t.children.some(e=>7&e.flags),this.markedForComposition.add(t);let n=hr.get(e);n&&n!=t&&(n.dom=null),t.setDOM(e)},n=this.childPos(e.range.fromB,1),r=this.children[n.i];t(e.line,r);for(let i=e.marks.length-1;i>=-1;i--)n=r.childPos(n.off,1),r=r.children[n.i],t(i>=0?e.marks[i].node:e.text,r)}updateSelection(e=!1,t=!1){var n;(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,o=!i&&!(this.view.state.facet(dh)||this.dom.tabIndex>-1)&&uW(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||t||o))return;let s=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(hv.gecko&&a.empty&&!this.hasComposition&&1==(n=l).node.nodeType&&n.node.firstChild&&(0==n.offset||"false"==n.node.childNodes[n.offset-1].contentEditable)&&(n.offset==n.node.childNodes.length||"false"==n.node.childNodes[n.offset].contentEditable)){let e=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(e,l.node.childNodes[l.offset]||null)),l=c=new ht(e,0),s=!0}let u=this.view.observer.selectionRange;!s&&u.focusNode&&(uX(l.node,l.offset,u.anchorNode,u.anchorOffset)&&uX(c.node,c.offset,u.focusNode,u.focusOffset)||this.suppressWidgetCursorChange(u,a))||(this.view.observer.ignore(()=>{hv.android&&hv.chrome&&this.dom.contains(u.focusNode)&&function(e,t){for(let n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=uH(this.view.root);if(e){if(a.empty){if(hv.gecko){var t,n;let e=(t=l.node,n=l.offset,1!=t.nodeType?0:(n&&"false"==t.childNodes[n-1].contentEditable?1:0)|2*(n<t.childNodes.length&&"false"==t.childNodes[n].contentEditable));if(e&&3!=e){let t=(1==e?u9:he)(l.node,l.offset);t&&(l=new ht(t.node,t.offset))}}e.collapse(l.node,l.offset),null!=a.bidiLevel&&void 0!==e.caretBidiLevel&&(e.caretBidiLevel=a.bidiLevel)}else if(e.extend){e.collapse(l.node,l.offset);try{e.extend(c.node,c.offset)}catch{}}else{let t=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),t.setEnd(c.node,c.offset),t.setStart(l.node,l.offset),e.removeAllRanges(),e.addRange(t)}}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new ht(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new ht(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&uX(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=uH(e.root),{anchorNode:r,anchorOffset:i}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let o=hL.find(this,t.head);if(!o)return;let s=o.posAtStart;if(t.head==s||t.head==s+o.length)return;let a=this.coordsAt(t.head,-1),l=this.coordsAt(t.head,1);if(!a||!l||a.bottom>l.top)return;let c=this.domAtPos(t.head+t.assoc);n.collapse(c.node,c.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=t.from&&n.collapse(r,i)}moveToLine(e){let t=this.dom,n;if(e.node!=t)return e;for(let r=e.offset;!n&&r<t.childNodes.length;r++){let e=hr.get(t.childNodes[r]);e instanceof hL&&(n=e.domAtPos(0))}for(let r=e.offset-1;!n&&r>=0;r--){let e=hr.get(t.childNodes[r]);e instanceof hL&&(n=e.domAtPos(e.length))}return n?new ht(n.node,n.offset,!0):e}nearest(e){for(let t=e;t;){let e=hr.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(n<e.length||e instanceof hL)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){let n=null,r=0;for(let i=this.length,o=this.children.length-1;o>=0;o--){let s=this.children[o],a=i-s.breakAfter,l=a-s.length;if(a<e)break;if(l<=e&&(l<e||s.covers(-1))&&(a>e||s.covers(1))&&(!n||s instanceof hL&&!(n instanceof hL&&t>=0)))n=s,r=l;else if(n&&l==e&&a==e&&s instanceof hq&&2>Math.abs(t)){if(s.deco.startSide<0)break;o&&(n=null)}i=l}return n?n.coordsAt(e-r,t):null}coordsForChar(e){let{i:t,off:n}=this.childPos(e,1),r=this.children[t];if(!(r instanceof hL))return null;for(;r.children.length;){let{i:e,off:t}=r.childPos(n,1);for(;;e++){if(e==r.children.length)return null;if((r=r.children[e]).length)break}n=t}if(!(r instanceof hx))return null;let i=eD(r.text,n);if(i==n)return null;let o=u3(r.dom,n,i).getClientRects();for(let e=0;e<o.length;e++){let t=o[e];if(e==o.length-1||t.top<t.bottom&&t.left<t.right)return t}return null}measureVisibleLineHeights(e){let t=[],{from:n,to:r}=e,i=this.view.contentDOM.clientWidth,o=i>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==hV.LTR;for(let e=0,l=0;l<this.children.length;l++){let c=this.children[l],u=e+c.length;if(u>r)break;if(e>=n){let n=c.dom.getBoundingClientRect();if(t.push(n.height),o){let t=c.dom.lastChild,r=t?uG(t):[];if(r.length){let t=r[r.length-1],o=a?t.right-n.left:n.right-t.left;o>s&&(s=o,this.minWidth=i,this.minWidthFrom=e,this.minWidthTo=u)}}}e=u+c.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?hV.RTL:hV.LTR}measureTextSize(){for(let e of this.children)if(e instanceof hL){let t=e.measureTextSize();if(t)return t}let e=document.createElement("div"),t,n,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let i=uG(e.firstChild)[0];t=e.getBoundingClientRect().height,n=i?i.width/27:7,r=i?i.height:t,e.remove()}),{lineHeight:t,charWidth:n,textHeight:r}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new ho(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,r=0;;r++){let i=r==t.viewports.length?null:t.viewports[r],o=i?i.from-1:this.length;if(o>n){let r=(t.lineBlockAt(o).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(hj.replace({widget:new h$(r),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!i)break;n=i.to+1}return hj.set(e)}updateDeco(){let e=1,t=this.view.state.facet(db).map(t=>(this.dynamicDecorationMap[e++]="function"==typeof t)?t(this.view):t),n=!1,r=this.view.state.facet(dv).map((e,t)=>{let r="function"==typeof e;return r&&(n=!0),r?e(this.view):e});for(r.length&&(this.dynamicDecorationMap[e++]=n,t.push(tA.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let t=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=t.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let t of this.view.state.facet(ds))try{if(t(this.view,e.range,e))return!0}catch(e){du(this.view.state,e,"scroll handler")}let{range:t}=e,n=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!n)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(n={left:Math.min(n.left,r.left),top:Math.min(n.top,r.top),right:Math.max(n.right,r.right),bottom:Math.max(n.bottom,r.bottom)});let i=dS(this.view),o={left:n.left-i.left,top:n.top-i.top,right:n.right+i.right,bottom:n.bottom+i.bottom},{offsetWidth:s,offsetHeight:a}=this.view.scrollDOM;!function(e,t,n,r,i,o,s,a){let l=e.ownerDocument,c=l.defaultView||window;for(let u=e,h=!1;u&&!h;)if(1==u.nodeType){let e,d=u==l.body,f=1,p=1;if(d)e=function(e){let t=e.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(h=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let t=u.getBoundingClientRect();({scaleX:f,scaleY:p}=u1(u,t)),e={left:t.left,right:t.left+u.clientWidth*f,top:t.top,bottom:t.top+u.clientHeight*p}}let m=0,g=0;if("nearest"==i)t.top<e.top?(g=-(e.top-t.top+s),n>0&&t.bottom>e.bottom+g&&(g=t.bottom-e.bottom+g+s)):t.bottom>e.bottom&&(g=t.bottom-e.bottom+s,n<0&&t.top-g<e.top&&(g=-(e.top+g-t.top+s)));else{let r=t.bottom-t.top,o=e.bottom-e.top;g=("center"==i&&r<=o?t.top+r/2-o/2:"start"==i||"center"==i&&n<0?t.top-s:t.bottom-o+s)-e.top}if("nearest"==r?t.left<e.left?(m=-(e.left-t.left+o),n>0&&t.right>e.right+m&&(m=t.right-e.right+m+o)):t.right>e.right&&(m=t.right-e.right+o,n<0&&t.left<e.left+m&&(m=-(e.left+m-t.left+o))):m=("center"==r?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==r==a?t.left-o:t.right-(e.right-e.left)+o)-e.left,m||g){if(d)c.scrollBy(m,g);else{let e=0,n=0;if(g){let e=u.scrollTop;u.scrollTop+=g/p,n=(u.scrollTop-e)*p}if(m){let t=u.scrollLeft;u.scrollLeft+=m/f,e=(u.scrollLeft-t)*f}t={left:t.left-e,top:t.top-n,right:t.right-e,bottom:t.bottom-n},e&&1>Math.abs(e-m)&&(r="nearest"),n&&1>Math.abs(n-g)&&(i="nearest")}}if(d)break;u=u.assignedSlot||u.parentNode}else if(11==u.nodeType)u=u.host;else break}(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,s),-s),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==hV.LTR)}}function dM(e,t){let n=e.observer.selectionRange;if(!n.focusNode)return null;let r=u9(n.focusNode,n.focusOffset),i=he(n.focusNode,n.focusOffset),o=r||i;if(i&&r&&i.node!=r.node){let t=hr.get(i.node);if(!t||t instanceof hx&&t.text!=i.node.nodeValue)o=i;else if(e.docView.lastCompositionAfterCursor){let e=hr.get(r.node);!e||e instanceof hx&&e.text!=r.node.nodeValue||(o=i)}}if(e.docView.lastCompositionAfterCursor=o!=r,!o)return null;let s=t-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}let dN=class{constructor(){this.changes=[]}compareRange(e,t){hz(e,t,this.changes)}comparePoint(e,t){hz(e,t,this.changes)}boundChange(e){hz(e,e,this.changes)}};function d_(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function dj(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function dD(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function dP(e,t,n){let r=e.nodeValue.length,i=-1,o=1e9,s=0;for(let a=0;a<r;a++){let r=u3(e,a,a+1).getClientRects();for(let l=0;l<r.length;l++){let c=r[l];if(c.top==c.bottom)continue;s||(s=t-c.left);let u=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=t&&c.right+1>=t&&u<o){let n=t>=(c.left+c.right)/2,r=n;if((hv.chrome||hv.gecko)&&u3(e,a).getBoundingClientRect().left==c.right&&(r=!n),u<=0)return{node:e,offset:a+ +!!r};i=a+ +!!r,o=u}}}return{node:e,offset:i>-1?i:s>0?e.nodeValue.length:0}}function dR(e,t,n,r=-1){var i,o;let s=e.contentDOM.getBoundingClientRect(),a=s.top+e.viewState.paddingTop,l,{docHeight:c}=e.viewState,{x:u,y:h}=t,d=h-a;if(d<0)return 0;if(d>c)return e.state.doc.length;for(let t=e.viewState.heightOracle.textHeight/2,i=!1;(l=e.elementAtHeight(d)).type!=h_.Text;)for(;!((d=r>0?l.bottom+t:l.top-t)>=0&&d<=c);){if(i)return n?null:0;i=!0,r=-r}h=a+d;let f=l.from;if(f<e.viewport.from)return 0==e.viewport.from?0:n?null:dI(e,s,l,u,h);if(f>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:n?null:dI(e,s,l,u,h);let p=e.dom.ownerDocument,m=e.root.elementFromPoint?e.root:p,g=m.elementFromPoint(u,h);g&&!e.contentDOM.contains(g)&&(g=null),g||(u=Math.max(s.left+1,Math.min(s.right-1,u)),(g=m.elementFromPoint(u,h))&&!e.contentDOM.contains(g)&&(g=null));let y,b=-1;if(g&&(null===(i=e.docView.nearest(g))||void 0===i?void 0:i.isEditable)!=!1){if(p.caretPositionFromPoint){let e=p.caretPositionFromPoint(u,h);e&&({offsetNode:y,offset:b}=e)}else if(p.caretRangeFromPoint){let t=p.caretRangeFromPoint(u,h);t&&({startContainer:y,startOffset:b}=t,(!e.contentDOM.contains(y)||hv.safari&&function(e,t,n){let r;if(3!=e.nodeType||t!=(r=e.nodeValue.length))return!1;for(let t=e.nextSibling;t;t=t.nextSibling)if(1!=t.nodeType||"BR"!=t.nodeName)return!1;return u3(e,r-1,r).getBoundingClientRect().left>n}(y,b,u)||hv.chrome&&function(e,t,n){if(0!=t)return!1;for(let t=e;;){let e=t.parentNode;if(!e||1!=e.nodeType||e.firstChild!=t)return!1;if(e.classList.contains("cm-line"))break;t=e}return n-(1==e.nodeType?e.getBoundingClientRect():u3(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect()).left>5}(y,b,u))&&(y=void 0))}y&&(b=Math.min(uJ(y),b))}if(!y||!e.docView.dom.contains(y)){let t=hL.find(e.docView,f);if(!t)return d>l.top+l.height/2?l.to:l.from;({node:y,offset:b}=function e(t,n,r){let i,o,s,a,l=!1,c,u,h,d;for(let m=t.firstChild;m;m=m.nextSibling){let t=uG(m);for(let g=0;g<t.length;g++){var f,p;let y=t[g];o&&d_(o,y)&&(y=dj(dD(y,o.bottom),o.top));let b=(f=y).left>n?f.left-n:Math.max(0,n-f.right),v=(p=y).top>r?p.top-r:Math.max(0,r-p.bottom);if(0==b&&0==v)return 3==m.nodeType?dP(m,n,r):e(m,n,r);if(!i||a>v||a==v&&s>b){i=m,o=y,s=b,a=v;let e=v?r<y.top?-1:1:b?n<y.left?-1:1:0;l=!e||(e>0?g<t.length-1:g>0)}0==b?r>y.bottom&&(!h||h.bottom<y.bottom)?(c=m,h=y):r<y.top&&(!d||d.top>y.top)&&(u=m,d=y):h&&d_(h,y)?h=dD(h,y.bottom):d&&d_(d,y)&&(d=dj(d,y.top))}}if(h&&h.bottom>=r?(i=c,o=h):d&&d.top<=r&&(i=u,o=d),!i)return{node:t,offset:0};let m=Math.max(o.left,Math.min(o.right,n));if(3==i.nodeType)return dP(i,m,r);if(l&&"false"!=i.contentEditable)return e(i,m,r);let g=Array.prototype.indexOf.call(t.childNodes,i)+ +(n>=(o.left+o.right)/2);return{node:t,offset:g}}(t.dom,u,h))}let v=e.docView.nearest(y);if(!v)return null;if(!v.isWidget||(null===(o=v.dom)||void 0===o?void 0:o.nodeType)!=1)return v.localPosFromDOM(y,b)+v.posAtStart;{let e=v.dom.getBoundingClientRect();return t.y<e.top||t.y<=e.bottom&&t.x<=(e.left+e.right)/2?v.posAtStart:v.posAtEnd}}function dI(e,t,n,r,i){let o=Math.round((r-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&n.height>1.5*e.defaultLineHeight){let t=e.viewState.heightOracle.textHeight;o+=Math.floor((i-n.top-(e.defaultLineHeight-t)*.5)/t)*e.viewState.heightOracle.lineLength}let s=e.state.sliceDoc(n.from,n.to);return n.from+t$(s,o,e.state.tabSize)}function dz(e,t){let n=e.lineBlockAt(t);if(Array.isArray(n.type)){for(let e of n.type)if(e.to>t||e.to==t&&(e.to==n.to||e.type==h_.Text))return e}return n}function dL(e,t,n,r){let i=e.state.doc.lineAt(t.head),o=e.bidiSpans(i),s=e.textDirectionAt(i.from);for(let a=t,l=null;;){let t=function(e,t,n,r,i){var o;let s=r.head-e.from,a=h0.find(t,s,null!==(o=r.bidiLevel)&&void 0!==o?o:-1,r.assoc),l=t[a],c=l.side(i,n);if(s==c){let e=a+=i?1:-1;if(e<0||e>=t.length)return null;s=(l=t[a=e]).side(!i,n),c=l.side(i,n)}let u=eD(e.text,s,l.forward(i,n));(u<l.from||u>l.to)&&(u=c),h4=e.text.slice(Math.min(s,u),Math.max(s,u));let h=a==(i?t.length-1:0)?null:t[a+(i?1:-1)];return h&&u==c&&h.level+ +!i<l.level?eG.cursor(h.side(!i,n)+e.from,h.forward(i,n)?1:-1,h.level):eG.cursor(u+e.from,l.forward(i,n)?-1:1,l.level)}(i,o,s,a,n),c=h4;if(!t){if(i.number==(n?e.state.doc.lines:1))return a;c=`
`,i=e.state.doc.line(i.number+(n?1:-1)),o=e.bidiSpans(i),t=e.visualLineSide(i,!n)}if(l){if(!l(c))return a}else{if(!r)return t;l=r(c)}a=t}}function dq(e,t,n){for(;;){let r=0;for(let i of e)i.between(t-1,t+1,(e,i,o)=>{if(t>e&&t<i){let o=r||n||(t-e<i-t?-1:1);t=o<0?e:i,r=o}});if(!r)return t}}function d$(e,t,n){let r=dq(e.state.facet(dx).map(t=>t(e)),n.from,t.head>n.from?-1:1);return r==n.from?n:eG.cursor(r,r<n.from?1:-1)}class dB{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(tw.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=""}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let r=e;;){this.findPointBefore(n,r);let e=this.text.length;this.readNode(r);let i=r.nextSibling;if(i==t)break;let o=hr.get(r),s=hr.get(i);(o&&s?o.breakAfter:(o?o.breakAfter:uZ(r))||uZ(i)&&("BR"!=r.nodeName||r.cmIgnore)&&this.text.length>e)&&this.lineBreak(),r=i}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let i=-1,o=1,s;if(this.lineSeparator?(i=t.indexOf(this.lineSeparator,n),o=this.lineSeparator.length):(s=r.exec(t))&&(i=s.index,o=s[0].length),this.append(t.slice(n,i<0?t.length:i)),i<0)break;if(this.lineBreak(),o>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=o-1);n=i+o}}readNode(e){if(e.cmIgnore)return;let t=hr.get(e),n=t&&t.overrideDOMText;if(null!=n){this.findPointInside(e,n.length);for(let e=n.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(3==e.nodeType?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(!function(e,t,n){for(;;){if(!t||n<uJ(t))return!1;if(t==e)return!0;n=uY(t)+1,t=t.parentNode}}(e,n.node,n.offset)?0:t))}}class dF{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class dQ{constructor(e,t,n,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:i,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let t=i||o?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}=e.observer.selectionRange;return n&&(t.push(new dF(n,r)),(i!=n||o!=r)&&t.push(new dF(i,o))),t}(e),n=new dB(t,e.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(e,t){if(0==e.length)return null;let n=e[0].pos,r=2==e.length?e[1].pos:n;return n>-1&&r>-1?eG.single(n+t,r+t):null}(t,this.bounds.from)}else{let t=e.observer.selectionRange,n=i&&i.node==t.focusNode&&i.offset==t.focusOffset||!uU(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),r=o&&o.node==t.anchorNode&&o.offset==t.anchorOffset||!uU(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset),s=e.viewport;if((hv.ios||hv.chrome)&&e.state.selection.main.empty&&n!=r&&(s.from>0||s.to<e.state.doc.length)){let t=Math.min(n,r),i=Math.max(n,r),o=s.from-t,a=s.to-i;(0==o||1==o||0==t)&&(0==a||-1==a||i==e.state.doc.length)&&(n=0,r=e.state.doc.length)}this.newSel=eG.single(r,n)}}}function dV(e,t){let n,{newSel:r}=t,i=e.state.selection.main,o=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(t.bounds){let{from:r,to:s}=t.bounds,a=i.from,l=null;(8===o||hv.android&&t.text.length<s-r)&&(a=i.to,l="end");let c=function(e,t,n,r){let i=Math.min(e.length,t.length),o=0;for(;o<i&&e.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==i&&e.length==t.length)return null;let s=e.length,a=t.length;for(;s>0&&a>0&&e.charCodeAt(s-1)==t.charCodeAt(a-1);)s--,a--;if("end"==r){let e=Math.max(0,o-Math.min(s,a));n-=s+e-o}if(s<o&&e.length<t.length){let e=n<=o&&n>=s?o-n:0;o-=e,a=o+(a-s),s=o}else if(a<o){let e=n<=o&&n>=a?o-n:0;o-=e,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}(e.state.doc.sliceString(r,s,""),t.text,a-r,l);c&&(hv.chrome&&13==o&&c.toB==c.from+2&&""==t.text.slice(c.from,c.toB)&&c.toB--,n={from:r+c.from,to:r+c.toA,insert:eS.of(t.text.slice(c.from,c.toB).split(""))})}else r&&(!e.hasFocus&&e.state.facet(dh)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&t.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:e.state.doc.slice(i.from,i.to)}:(hv.mac||hv.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==e.contentDOM.getAttribute("autocorrect")?(r&&2==n.insert.length&&(r=eG.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:eS.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:e.state.doc.slice(i.from,n.from).append(n.insert).append(e.state.doc.slice(n.to,i.to))}:hv.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&e.lineWrapping&&(r&&(r=eG.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:eS.of([" "])}),n)return dH(e,n,r,o);if(!r||r.main.eq(i))return!1;{let t=!1,n="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),n=e.inputState.lastSelectionOrigin),e.dispatch({selection:r,scrollIntoView:t,userEvent:n}),!0}}function dH(e,t,n,r=-1){if(hv.ios&&e.inputState.flushIOSKey(t))return!0;let i=e.state.selection.main;if(hv.android&&(t.to==i.to&&(t.from==i.from||t.from==i.from-1&&" "==e.state.sliceDoc(t.from,i.from))&&1==t.insert.length&&2==t.insert.lines&&u6(e.contentDOM,"Enter",13)||(t.from==i.from-1&&t.to==i.to&&0==t.insert.length||8==r&&t.insert.length<t.to-t.from&&t.to>i.head)&&u6(e.contentDOM,"Backspace",8)||t.from==i.from&&t.to==i.to+1&&0==t.insert.length&&u6(e.contentDOM,"Delete",46)))return!0;let o=t.insert.toString();e.inputState.composing>=0&&e.inputState.composing++;let s,a=()=>s||(s=function(e,t,n){let r,i=e.state,o=i.selection.main;if(t.from>=o.from&&t.to<=o.to&&t.to-t.from>=(o.to-o.from)/3&&(!n||n.main.empty&&n.main.from==t.from+t.insert.length)&&e.inputState.composing<0){let n=o.from<t.from?i.sliceDoc(o.from,t.from):"",s=o.to>t.to?i.sliceDoc(t.to,o.to):"";r=i.replaceSelection(e.state.toText(n+t.insert.sliceString(0,void 0,e.state.lineBreak)+s))}else{let s=i.changes(t),a=n&&n.main.to<=s.newLength?n.main:void 0;if(i.selection.ranges.length>1&&e.inputState.composing>=0&&t.to<=o.to&&t.to>=o.to-10){let l=e.state.sliceDoc(t.from,t.to),c,u=n&&dM(e,n.main.head);if(u){let e=t.insert.length-(t.to-t.from);c={from:u.from,to:u.to-e}}else c=e.state.doc.lineAt(o.head);let h=o.to-t.to,d=o.to-o.from;r=i.changeByRange(n=>{if(n.from==o.from&&n.to==o.to)return{changes:s,range:a||n.map(s)};let r=n.to-h,u=r-l.length;if(n.to-n.from!=d||e.state.sliceDoc(u,r)!=l||n.to>=c.from&&n.from<=c.to)return{range:n};let f=i.changes({from:u,to:r,insert:t.insert}),p=n.to-o.to;return{changes:f,range:a?eG.range(Math.max(0,a.anchor+p),Math.max(0,a.head+p)):n.map(f)}})}else r={changes:s,selection:a&&i.selection.replaceRange(a)}}let s="input.type";return(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,s+=".compose",e.inputState.compositionFirstChange&&(s+=".start",e.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:s,scrollIntoView:!0})}(e,t,n));return e.state.facet(h9).some(n=>n(e,t.from,t.to,o,a))||e.dispatch(a()),!0}let dU=class{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,hv.safari&&e.contentDOM.addEventListener("input",()=>null),hv.gecko&&function(e){fl.has(e)||(fl.add(e),e.addEventListener("copy",()=>{}),e.addEventListener("cut",()=>{}))}(e.contentDOM.ownerDocument)}handleEvent(e){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target,r;n!=e.contentDOM;n=n.parentNode)if(!n||11==n.nodeType||(r=hr.get(n))&&r.ignoreEvent(t))return!1;return!0}(this.view,e)||this.ignoreDuringComposition(e)||"keydown"==e.type&&this.keydown(e)||(0!=this.view.updateState?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let n=this.handlers[e];if(n){for(let e of n.observers)e(this.view,t);for(let e of n.handlers){if(t.defaultPrevented)break;if(e(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=function(e){let t=Object.create(null);function n(e){return t[e]||(t[e]={observers:[],handlers:[]})}for(let t of e){let e=t.spec;if(e&&e.domEventHandlers)for(let r in e.domEventHandlers){let i=e.domEventHandlers[r];i&&n(r).handlers.push(dW(t.value,i))}if(e&&e.domEventObservers)for(let r in e.domEventObservers){let i=e.domEventObservers[r];i&&n(r).observers.push(dW(t.value,i))}}for(let e in dJ)n(e).handlers.push(dJ[e]);for(let e in d0)n(e).observers.push(d0[e]);return t}(e),n=this.handlers,r=this.view.contentDOM;for(let e in t)if("scroll"!=e){let i=!t[e].handlers.length,o=n[e];o&&!o.handlers.length!=i&&(r.removeEventListener(e,this.handleEvent),o=null),o||r.addEventListener(e,this.handleEvent,{passive:i})}for(let e in n)"scroll"==e||t[e]||r.removeEventListener(e,this.handleEvent);this.handlers=t}keydown(e){let t;return this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),!!(9==e.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))||((this.tabFocusMode>0&&27!=e.keyCode&&0>dY.indexOf(e.keyCode)&&(this.tabFocusMode=-1),hv.android&&hv.chrome&&!e.synthetic&&(13==e.keyCode||8==e.keyCode))?(this.view.observer.delayAndroidKey(e.key,e.keyCode),!0):hv.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=dG.find(t=>t.keyCode==e.keyCode))&&!e.ctrlKey||dX.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(229!=e.keyCode&&this.view.observer.forceFlush(),!1))}flushIOSKey(e){let t=this.pendingIOSKey;return!(!t||"Enter"==t.key&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString()))&&(this.pendingIOSKey=void 0,u6(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(hv.safari&&!hv.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}};function dW(e,t){return(n,r)=>{try{return t.call(e,r,n)}catch(e){du(n.state,e)}}}let dG=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],dX="dthko",dY=[16,17,18,20,91,92,224,225];function dZ(e){return .7*Math.max(0,e)+8}class dK{constructor(e,t,n,r){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=function(e){let t=e.ownerDocument,n,r;for(let i=e.parentNode;i&&!(i==t.body||n&&r);)if(1==i.nodeType)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(11==i.nodeType)i=i.host;else break;return{x:n,y:r}}(e.contentDOM),this.atoms=e.state.facet(dx).map(t=>t(e));let i=e.contentDOM.ownerDocument;i.addEventListener("mousemove",this.move=this.move.bind(this)),i.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(tw.allowMultipleSelections)&&function(e,t){let n=e.state.facet(h5);return n.length?n[0](t):hv.mac?t.metaKey:t.ctrlKey}(e,t),this.dragging=!!function(e,t){let{main:n}=e.state.selection;if(n.empty)return!1;let r=uH(e.root);if(!r||0==r.rangeCount)return!0;let i=r.getRangeAt(0).getClientRects();for(let e=0;e<i.length;e++){let n=i[e];if(n.left<=t.clientX&&n.right>=t.clientX&&n.top<=t.clientY&&n.bottom>=t.clientY)return!0}return!1}(e,t)&&1==fn(t)&&null}start(e){!1===this.dragging&&this.select(e)}move(e){var t;if(0==e.buttons)return this.destroy();if(this.dragging||null==this.dragging&&10>Math.max(Math.abs((t=this.startEvent).clientX-e.clientX),Math.abs(t.clientY-e.clientY)))return;this.select(this.lastEvent=e);let n=0,r=0,i=0,o=0,s=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:s}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=dS(this.view);e.clientX-l.left<=i+6?n=-dZ(i-e.clientX):e.clientX+l.right>=s-6&&(n=dZ(e.clientX-s)),e.clientY-l.top<=o+6?r=-dZ(o-e.clientY):e.clientY+l.bottom>=a-6&&(r=dZ(e.clientY-a)),this.setScrollSpeed(n,r)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let n=0;n<e.ranges.length;n++){let r=e.ranges[n],i=null;if(r.empty){let e=dq(this.atoms,r.from,0);e!=r.from&&(i=eG.cursor(e,-1))}else{let e=dq(this.atoms,r.from,-1),t=dq(this.atoms,r.to,1);(e!=r.from||t!=r.to)&&(i=eG.range(r.from==r.anchor?e:t,r.from==r.head?e:t))}i&&(t||(t=e.ranges.slice()),t[n]=i)}return t?eG.create(t,e.mainIndex):e}select(e){let{view:t}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(t.state.selection,!1===this.dragging))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(e=>e.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}let dJ=Object.create(null),d0=Object.create(null),d1=hv.ie&&hv.ie_version<15||hv.ios&&hv.webkit_version<604;function d2(e,t,n){for(let r of e.facet(t))n=r(n,e);return n}function d4(e,t){t=d2(e.state,dt,t);let{state:n}=e,r,i=1,o=n.toText(t),s=o.lines==n.selection.ranges.length;if(null!=fi&&n.selection.ranges.every(e=>e.empty)&&fi==o.toString()){let e=-1;r=n.changeByRange(r=>{let a=n.doc.lineAt(r.from);if(a.from==e)return{range:r};e=a.from;let l=n.toText((s?o.line(i++).text:t)+n.lineBreak);return{changes:{from:a.from,insert:l},range:eG.cursor(r.from+l.length)}})}else r=s?n.changeByRange(e=>{let t=o.line(i++);return{changes:{from:e.from,to:e.to,insert:t.text},range:eG.cursor(e.from+t.length)}}):n.replaceSelection(o);e.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}function d5(e,t,n,r){if(1==r)return eG.cursor(t,n);if(2==r)return function(e,t,n=1){let r=e.charCategorizer(t),i=e.doc.lineAt(t),o=t-i.from;if(0==i.length)return eG.cursor(t);0==o?n=1:o==i.length&&(n=-1);let s=o,a=o;n<0?s=eD(i.text,o,!1):a=eD(i.text,o);let l=r(i.text.slice(s,a));for(;s>0;){let e=eD(i.text,s,!1);if(r(i.text.slice(e,s))!=l)break;s=e}for(;a<i.length;){let e=eD(i.text,a);if(r(i.text.slice(a,e))!=l)break;a=e}return eG.range(s+i.from,a+i.from)}(e.state,t,n);{let n=hL.find(e.docView,t),r=e.state.doc.lineAt(n?n.posAtEnd:t),i=n?n.posAtStart:r.from,o=n?n.posAtEnd:r.to;return o<e.state.doc.length&&o==r.to&&o++,eG.range(i,o)}}d0.scroll=e=>{e.inputState.lastScrollTop=e.scrollDOM.scrollTop,e.inputState.lastScrollLeft=e.scrollDOM.scrollLeft},dJ.keydown=(e,t)=>(e.inputState.setSelectionOrigin("select"),27==t.keyCode&&0!=e.inputState.tabFocusMode&&(e.inputState.tabFocusMode=Date.now()+2e3),!1),d0.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},d0.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},dJ.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of e.state.facet(h6))if(n=r(e,t))break;if(n||0!=t.button||(n=function(e,t){let n=d6(e,t),r=fn(t),i=e.state.selection;return{update(e){e.docChanged&&(n.pos=e.changes.mapPos(n.pos),i=i.map(e.changes))},get(t,o,s){let a=d6(e,t),l,c=d5(e,a.pos,a.bias,r);if(n.pos!=a.pos&&!o){let t=d5(e,n.pos,n.bias,r),i=Math.min(t.from,c.from),o=Math.max(t.to,c.to);c=i<c.from?eG.range(i,o):eG.range(o,i)}return o?i.replaceRange(i.main.extend(c.from,c.to)):s&&1==r&&i.ranges.length>1&&(l=function(e,t){for(let n=0;n<e.ranges.length;n++){let{from:r,to:i}=e.ranges[n];if(r<=t&&i>=t)return eG.create(e.ranges.slice(0,n).concat(e.ranges.slice(n+1)),e.mainIndex==n?0:e.mainIndex-+(e.mainIndex>n))}return null}(i,a.pos))?l:s?i.addRange(c):eG.create([c])}}}(e,t)),n){let r=!e.hasFocus;e.inputState.startMouseSelection(new dK(e,t,n,r)),r&&e.observer.ignore(()=>{u5(e.contentDOM);let t=e.root.activeElement;t&&!t.contains(e.contentDOM)&&t.blur()});let i=e.inputState.mouseSelection;if(i)return i.start(t),!1===i.dragging}return!1};let d3=(e,t,n)=>t>=n.top&&t<=n.bottom&&e>=n.left&&e<=n.right;function d6(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:function(e,t,n,r){let i=hL.find(e.docView,t);if(!i)return 1;let o=t-i.posAtStart;if(0==o)return 1;if(o==i.length)return -1;let s=i.coordsAt(o,-1);if(s&&d3(n,r,s))return -1;let a=i.coordsAt(o,1);return a&&d3(n,r,a)?1:s&&s.bottom>=r?-1:1}(e,n,t.clientX,t.clientY)}}let d7=hv.ie&&hv.ie_version<=11,d8=null,d9=0,ft=0;function fn(e){if(!d7)return e.detail;let t=d8,n=ft;return d8=e,ft=Date.now(),d9=!t||n>Date.now()-400&&2>Math.abs(t.clientX-e.clientX)&&2>Math.abs(t.clientY-e.clientY)?(d9+1)%3:1}function fr(e,t,n,r){let i;if(!(n=d2(e.state,dt,n)))return;let o=e.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:s}=e.inputState,a=r&&s&&((i=e.state.facet(h3)).length?i[0](t):hv.mac?!t.altKey:!t.ctrlKey)?{from:s.from,to:s.to}:null,l={from:o,insert:n},c=e.state.changes(a?[a,l]:l);e.focus(),e.dispatch({changes:c,selection:{anchor:c.mapPos(o,-1),head:c.mapPos(o,1)},userEvent:a?"move.drop":"input.drop"}),e.inputState.draggedContent=null}dJ.dragstart=(e,t)=>{let{selection:{main:n}}=e.state;if(t.target.draggable){let r=e.docView.nearest(t.target);if(r&&r.isWidget){let e=r.posAtStart,t=e+r.length;(e>=n.to||t<=n.from)&&(n=eG.range(e,t))}}let{inputState:r}=e;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,t.dataTransfer&&(t.dataTransfer.setData("Text",d2(e.state,dn,e.state.sliceDoc(n.from,n.to))),t.dataTransfer.effectAllowed="copyMove"),!1},dJ.dragend=e=>(e.inputState.draggedContent=null,!1),dJ.drop=(e,t)=>{if(!t.dataTransfer)return!1;if(e.state.readOnly)return!0;let n=t.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,o=()=>{++i==n.length&&fr(e,t,r.filter(e=>null!=e).join(e.state.lineBreak),!1)};for(let e=0;e<n.length;e++){let t=new FileReader;t.onerror=o,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(r[e]=t.result),o()},t.readAsText(n[e])}return!0}{let n=t.dataTransfer.getData("Text");if(n)return fr(e,t,n,!0),!0}return!1},dJ.paste=(e,t)=>{if(e.state.readOnly)return!0;e.observer.flush();let n=d1?null:t.clipboardData;return n?(d4(e,n.getData("text/plain")||n.getData("text/uri-list")),!0):(function(e){let t=e.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{e.focus(),n.remove(),d4(e,n.value)},50)}(e),!1)};let fi=null;dJ.copy=dJ.cut=(e,t)=>{let{text:n,ranges:r,linewise:i}=function(e){let t=[],n=[],r=!1;for(let r of e.selection.ranges)r.empty||(t.push(e.sliceDoc(r.from,r.to)),n.push(r));if(!t.length){let i=-1;for(let{from:r}of e.selection.ranges){let o=e.doc.lineAt(r);o.number>i&&(t.push(o.text),n.push({from:o.from,to:Math.min(e.doc.length,o.to+1)})),i=o.number}r=!0}return{text:d2(e,dn,t.join(e.lineBreak)),ranges:n,linewise:r}}(e.state);if(!n&&!i)return!1;fi=i?n:null,"cut"!=t.type||e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let o=d1?null:t.clipboardData;return o?(o.clearData(),o.setData("text/plain",n),!0):(function(e,t){let n=e.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=t,r.focus(),r.selectionEnd=t.length,r.selectionStart=0,setTimeout(()=>{r.remove(),e.focus()},50)}(e,n),!1)};let fo=tu.define();function fs(e,t){let n=[];for(let r of e.facet(de)){let i=r(e,t);i&&n.push(i)}return n?e.update({effects:n,annotations:fo.of(!0)}):null}function fa(e){setTimeout(()=>{let t=e.hasFocus;if(t!=e.inputState.notifiedFocused){let n=fs(e.state,t);n?e.dispatch(n):e.update([])}},10)}d0.focus=e=>{e.inputState.lastFocusTime=Date.now(),!e.scrollDOM.scrollTop&&(e.inputState.lastScrollTop||e.inputState.lastScrollLeft)&&(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),fa(e)},d0.blur=e=>{e.observer.clearSelectionRange(),fa(e)},d0.compositionstart=d0.compositionupdate=e=>{e.observer.editContext||(null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0))},d0.compositionend=e=>{e.observer.editContext||(e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,hv.chrome&&hv.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then(()=>e.observer.flush()):setTimeout(()=>{e.inputState.composing<0&&e.docView.hasComposition&&e.update([])},50))},d0.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},dJ.beforeinput=(e,t)=>{var n,r;let i;if("insertReplacementText"==t.inputType&&e.observer.editContext){let r=null===(n=t.dataTransfer)||void 0===n?void 0:n.getData("text/plain"),i=t.getTargetRanges();if(r&&i.length){let t=i[0],n=e.posAtDOM(t.startContainer,t.startOffset),o=e.posAtDOM(t.endContainer,t.endOffset);return dH(e,{from:n,to:o,insert:e.state.toText(r)},null),!0}}if(hv.chrome&&hv.android&&(i=dG.find(e=>e.inputType==t.inputType))&&(e.observer.delayAndroidKey(i.key,i.keyCode),"Backspace"==i.key||"Delete"==i.key)){let t=(null===(r=window.visualViewport)||void 0===r?void 0:r.height)||0;setTimeout(()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())},100)}return hv.ios&&"deleteContentForward"==t.inputType&&e.observer.flushSoon(),hv.safari&&"insertText"==t.inputType&&e.inputState.composing>=0&&setTimeout(()=>d0.compositionend(e,t),20),!1};let fl=new Set,fc=["pre-wrap","normal","pre-line","break-spaces"],fu=!1;class fh{constructor(e){this.lineWrapping=e,this.doc=eS.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return fc.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let r=e[n];r<0?n++:this.heightSamples[Math.floor(10*r)]||(t=!0,this.heightSamples[Math.floor(10*r)]=!0)}return t}refresh(e,t,n,r,i,o){let s=fc.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=t,this.charWidth=n,this.textHeight=r,this.lineLength=i,a){this.heightSamples={};for(let e=0;e<o.length;e++){let t=o[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return a}}class fd{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class ff{constructor(e,t,n,r,i){this.from=e,this.length=t,this.top=n,this.height=r,this._content=i}get type(){return"number"==typeof this._content?h_.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof hR?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new ff(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var fp=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(fp||(fp={}));class fm{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=2*!!e|-3&this.flags}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>.001&&(fu=!0),this.height=e)}replace(e,t,n){return fm.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,r){let i=this,o=n.doc;for(let s=r.length-1;s>=0;s--){let{fromA:a,toA:l,fromB:c,toB:u}=r[s],h=i.lineAt(a,fp.ByPosNoHeight,n.setDoc(t),0,0),d=h.to>=l?h:i.lineAt(l,fp.ByPosNoHeight,n,0,0);for(u+=d.to-l,l=d.to;s>0&&h.from<=r[s-1].toA;)a=r[s-1].fromA,c=r[s-1].fromB,s--,a<h.from&&(h=i.lineAt(a,fp.ByPosNoHeight,n,0,0));c+=h.from-a,a=h.from;let f=fk.build(n.setDoc(o),e,c,u);i=fg(i,i.replace(a,l,f))}return i.updateHeight(n,0)}static empty(){return new fb(0,0)}static of(e){if(1==e.length)return e[0];let t=0,n=e.length,r=0,i=0;for(;;)if(t==n){if(r>2*i){let i=e[t-1];i.break?e.splice(--t,1,i.left,null,i.right):e.splice(--t,1,i.left,i.right),n+=1+i.break,r-=i.size}else if(i>2*r){let t=e[n];t.break?e.splice(n,1,t.left,null,t.right):e.splice(n,1,t.left,t.right),n+=2+t.break,i-=t.size}else break}else if(r<i){let n=e[t++];n&&(r+=n.size)}else{let t=e[--n];t&&(i+=t.size)}let o=0;return null==e[t-1]?(o=1,t--):null==e[t]&&(o=1,n++),new fx(fm.of(e.slice(0,t)),o,fm.of(e.slice(n)))}}function fg(e,t){return e==t?e:(e.constructor!=t.constructor&&(fu=!0),t)}fm.prototype.size=1;class fy extends fm{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,r){return new ff(r,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,r,i){return this.blockAt(0,n,r,i)}forEachLine(e,t,n,r,i,o){e<=i+this.length&&t>=i&&o(this.blockAt(0,n,r,i))}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class fb extends fy{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,r){return new ff(r,this.length,n,this.height,this.breaks)}replace(e,t,n){let r=n[0];return 1==n.length&&(r instanceof fb||r instanceof fv&&4&r.flags)&&10>Math.abs(this.length-r.length)?(r instanceof fv?r=new fb(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):fm.of(n)}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more?this.setHeight(r.heights[r.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class fv extends fm{constructor(e){super(e,0)}heightMetrics(e,t){let n=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,i=r-n+1,o,s=0;if(e.lineWrapping){let t=Math.min(this.height,e.lineHeight*i);o=t/i,this.length>i+1&&(s=(this.height-t)/(this.length-i-1))}else o=this.height/i;return{firstLine:n,lastLine:r,perLine:o,perChar:s}}blockAt(e,t,n,r){let{firstLine:i,lastLine:o,perLine:s,perChar:a}=this.heightMetrics(t,r);if(t.lineWrapping){let i=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),o=t.doc.lineAt(i),l=s+o.length*a,c=Math.max(n,e-l/2);return new ff(o.from,o.length,c,l,0)}{let r=Math.max(0,Math.min(o-i,Math.floor((e-n)/s))),{from:a,length:l}=t.doc.line(i+r);return new ff(a,l,n+s*r,s,0)}}lineAt(e,t,n,r,i){if(t==fp.ByHeight)return this.blockAt(e,n,r,i);if(t==fp.ByPosNoHeight){let{from:t,to:r}=n.doc.lineAt(e);return new ff(t,r-t,0,0,0)}let{firstLine:o,perLine:s,perChar:a}=this.heightMetrics(n,i),l=n.doc.lineAt(e),c=s+l.length*a,u=l.number-o,h=r+s*u+a*(l.from-i-u);return new ff(l.from,l.length,Math.max(r,Math.min(h,r+this.height-c)),c,0)}forEachLine(e,t,n,r,i,o){e=Math.max(e,i),t=Math.min(t,i+this.length);let{firstLine:s,perLine:a,perChar:l}=this.heightMetrics(n,i);for(let c=e,u=r;c<=t;){let t=n.doc.lineAt(c);if(c==e){let n=t.number-s;u+=a*n+l*(e-i-n)}let r=a+l*t.length;o(new ff(t.from,t.length,u,r,0)),u+=r,c=t.to+1}}replace(e,t,n){let r=this.length-t;if(r>0){let e=n[n.length-1];e instanceof fv?n[n.length-1]=new fv(e.length+r):n.push(null,new fv(r-1))}if(e>0){let t=n[0];t instanceof fv?n[0]=new fv(e+t.length):n.unshift(new fv(e-1),null)}return fm.of(n)}decomposeLeft(e,t){t.push(new fv(e-1),null)}decomposeRight(e,t){t.push(null,new fv(this.length-e-1))}updateHeight(e,t=0,n=!1,r){let i=t+this.length;if(r&&r.from<=t+this.length&&r.more){let n=[],o=Math.max(t,r.from),s=-1;for(r.from>t&&n.push(new fv(r.from-t-1).updateHeight(e,t));o<=i&&r.more;){let t=e.doc.lineAt(o).length;n.length&&n.push(null);let i=r.heights[r.index++];-1==s?s=i:Math.abs(i-s)>=.001&&(s=-2);let a=new fb(t,i);a.outdated=!1,n.push(a),o+=t+1}o<=i&&n.push(null,new fv(i-o).updateHeight(e,o));let a=fm.of(n);return(s<0||Math.abs(a.height-this.height)>=.001||Math.abs(s-this.heightMetrics(e,t).perLine)>=.001)&&(fu=!0),fg(this,a)}return(n||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class fx extends fm{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return 1&this.flags}blockAt(e,t,n,r){let i=n+this.left.height;return e<i?this.left.blockAt(e,t,n,r):this.right.blockAt(e,t,i,r+this.left.length+this.break)}lineAt(e,t,n,r,i){let o=r+this.left.height,s=i+this.left.length+this.break,a=t==fp.ByHeight?e<o:e<s,l=a?this.left.lineAt(e,t,n,r,i):this.right.lineAt(e,t,n,o,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=t==fp.ByPosNoHeight?fp.ByPosNoHeight:fp.ByPos;return a?l.join(this.right.lineAt(s,c,n,o,s)):this.left.lineAt(s,c,n,r,i).join(l)}forEachLine(e,t,n,r,i,o){let s=r+this.left.height,a=i+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,n,r,i,o),t>=a&&this.right.forEachLine(e,t,n,s,a,o);else{let l=this.lineAt(a,fp.ByPos,n,r,i);e<l.from&&this.left.forEachLine(e,l.from-1,n,r,i,o),l.to>=e&&l.from<=t&&o(l),t>l.to&&this.right.forEachLine(l.to+1,t,n,s,a,o)}}replace(e,t,n){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,n));let i=[];e>0&&this.decomposeLeft(e,i);let o=i.length;for(let e of n)i.push(e);if(e>0&&fw(i,o-1),t<this.length){let e=i.length;this.decomposeRight(t,i),fw(i,e)}return fm.of(i)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&e>=++n&&t.push(null),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?fm.of(this.break?[e,null,t]:[e,t]):(this.left=fg(this.left,e),this.right=fg(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,r){let{left:i,right:o}=this,s=t+i.length+this.break,a=null;return r&&r.from<=t+i.length&&r.more?a=i=i.updateHeight(e,t,n,r):i.updateHeight(e,t,n),r&&r.from<=s+o.length&&r.more?a=o=o.updateHeight(e,s,n,r):o.updateHeight(e,s,n),a?this.balanced(i,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function fw(e,t){let n,r;null==e[t]&&(n=e[t-1])instanceof fv&&(r=e[t+1])instanceof fv&&e.splice(t-1,3,new fv(n.length+1+r.length))}class fk{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof fb?n.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new fb(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0,i=n.widget?n.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=t-e;n.block?this.addBlock(new fy(o,r,n)):(o||i||r>=5)&&this.addLineDeco(r,i,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new fb(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new fv(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof fb)return e;let t=new fb(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let r=this.ensureLine();r.length+=n,r.collapsed+=n,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof fb||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new fb(0,-1));let n=e;for(let e of this.nodes)e instanceof fb&&e.updateHeight(this.oracle,n),n+=e?e.length:1;return this.nodes}static build(e,t,n,r){let i=new fk(n,e);return tA.spans(t,n,r,i,0),i.finish(n)}}class fO{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,r){(e<t||n&&n.heightRelevant||r&&r.heightRelevant)&&hz(e,t,this.changes,5)}}class fS{constructor(e,t,n,r){this.from=e,this.to=t,this.size=n,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],i=t[n];if(r.from!=i.from||r.to!=i.to||r.size!=i.size)return!1}return!0}draw(e,t){return hj.replace({widget:new fC(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class fC extends hN{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class fT{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=fN,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=hV.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(dy).some(e=>"function"!=typeof e&&"cm-lineWrapping"==e.class);this.heightOracle=new fh(t),this.stateDeco=e.facet(db).filter(e=>"function"!=typeof e),this.heightMap=fm.empty().applyChanges(this.stateDeco,eS.empty,this.heightOracle.setDoc(e.doc),[new dT(0,0,0,e.doc.length)]);for(let e=0;e<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());e++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=hj.set(this.lineGaps.map(e=>e.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let r=n?t.head:t.anchor;if(!e.some(({from:e,to:t})=>r>=e&&r<=t)){let{from:t,to:n}=this.lineBlockAt(r);e.push(new fA(t,n))}}return this.viewports=e.sort((e,t)=>e.from-t.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?fN:new f_(this.heightOracle,this.heightMap,this.viewports),2*!e.eq(this.scaler)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(fj(e,this.scaler))})}update(e,t=null){var n,r;let i;this.state=e.state;let o=this.stateDeco;this.stateDeco=this.state.facet(db).filter(e=>"function"!=typeof e);let s=e.changedRanges,a=dT.extendWithRanges(s,(n=this.stateDeco,r=e?e.changes:e$.empty(this.state.doc.length),i=new fO,tA.compare(o,n,r,i,0),i.changes)),l=this.heightMap.height,c=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);fu=!1,this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),a),(this.heightMap.height!=l||fu)&&(e.flags|=2),c?(this.scrollAnchorPos=e.changes.mapPos(c.from,-1),this.scrollAnchorHeight=c.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let u=a.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<u.from||t.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,t));let h=u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,e.flags|=this.updateForViewport(),(h||!e.changes.empty||2&e.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(di)&&(this.mustEnforceCursorAssoc=!0)}measure(e){var t;let n,r,i=e.contentDOM,o=window.getComputedStyle(i),s=this.heightOracle,a=o.whiteSpace;this.defaultTextDirection="rtl"==o.direction?hV.RTL:hV.LTR;let l=this.heightOracle.mustRefreshForWrapping(a),c=i.getBoundingClientRect(),u=l||this.mustMeasureContent||this.contentDOMHeight!=c.height;this.contentDOMHeight=c.height,this.mustMeasureContent=!1;let h=0,d=0;if(c.width&&c.height){let{scaleX:e,scaleY:t}=u1(i,c);(e>.005&&Math.abs(this.scaleX-e)>.005||t>.005&&Math.abs(this.scaleY-t)>.005)&&(this.scaleX=e,this.scaleY=t,h|=16,l=u=!0)}let f=(parseInt(o.paddingTop)||0)*this.scaleY,p=(parseInt(o.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=p)&&(this.paddingTop=f,this.paddingBottom=p,h|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(u=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=16);let m=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=m&&(this.scrollAnchorHeight=-1,this.scrollTop=m),this.scrolledToBottom=u8(e.scrollDOM);let g=(this.printing?function(e,t){let n=e.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}:function(e,t){let n=e.getBoundingClientRect(),r=e.ownerDocument,i=r.defaultView||window,o=Math.max(0,n.left),s=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let t=e.parentNode;t&&t!=r.body;)if(1==t.nodeType){let n=t,r=window.getComputedStyle(n);if((n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)&&"visible"!=r.overflow){let r=n.getBoundingClientRect();o=Math.max(o,r.left),s=Math.min(s,r.right),a=Math.max(a,r.top),l=Math.min(t==e.parentNode?i.innerHeight:l,r.bottom)}t="absolute"==r.position||"fixed"==r.position?n.offsetParent:n.parentNode}else if(11==t.nodeType)t=t.host;else break;return{left:o-n.left,right:Math.max(o,s)-n.left,top:a-(n.top+t),bottom:Math.max(a,l)-(n.top+t)}})(i,this.paddingTop),y=g.top-this.pixelViewport.top,b=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(u=!0)),!this.inView&&!this.scrollTarget&&(n=(t=e.dom).getBoundingClientRect(),r=t.ownerDocument.defaultView||window,!(n.left<r.innerWidth)||!(n.right>0)||!(n.top<r.innerHeight)||!(n.bottom>0)))return 0;let x=c.width;if((this.contentDOMWidth!=x||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=c.width,this.editorHeight=e.scrollDOM.clientHeight,h|=16),u){let t=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(t)&&(l=!0),l||s.lineWrapping&&Math.abs(x-this.contentDOMWidth)>s.charWidth){let{lineHeight:n,charWidth:r,textHeight:i}=e.docView.measureTextSize();(l=n>0&&s.refresh(a,n,r,i,x/r,t))&&(e.docView.minWidth=0,h|=16)}for(let n of(y>0&&b>0?d=Math.max(y,b):y<0&&b<0&&(d=Math.min(y,b)),fu=!1,this.viewports)){let r=n.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(n);this.heightMap=(l?fm.empty().applyChanges(this.stateDeco,eS.empty,this.heightOracle,[new dT(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,l,new fd(n.from,r))}fu&&(h|=2)}let w=!this.viewportIsAppropriate(this.viewport,d)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(2&h&&(h|=this.updateScaler()),this.viewport=this.getViewport(d,this.scrollTarget),h|=this.updateForViewport()),(2&h||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,i=this.heightOracle,{visibleTop:o,visibleBottom:s}=this,a=new fA(r.lineAt(o-1e3*n,fp.ByHeight,i,0,0).from,r.lineAt(s+(1-n)*1e3,fp.ByHeight,i,0,0).to);if(t){let{head:e}=t.range;if(e<a.from||e>a.to){let n=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),o=r.lineAt(e,fp.ByPos,i,0,0),s;s="center"==t.y?(o.top+o.bottom)/2-n/2:"start"==t.y||"nearest"==t.y&&e<a.from?o.top:o.bottom-n,a=new fA(r.lineAt(s-500,fp.ByHeight,i,0,0).from,r.lineAt(s+n+500,fp.ByHeight,i,0,0).to)}}return a}mapViewport(e,t){let n=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new fA(this.heightMap.lineAt(n,fp.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,fp.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,fp.ByPos,this.heightOracle,0,0),{bottom:i}=this.heightMap.lineAt(t,fp.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:s}=this;return(0==e||r<=o-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||i>=s+Math.max(10,Math.min(n,250)))&&r>o-2e3&&i<s+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let r of e)t.touchesRange(r.from,r.to)||n.push(new fS(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,r=n?1e4:2e3,i=r>>1,o=r<<1;if(this.defaultTextDirection!=hV.LTR&&!n)return[];let s=[],a=(r,o,l,c)=>{if(o-r<i)return;let u=this.state.selection.main,h=[u.from];for(let e of(u.empty||h.push(u.to),h))if(e>r&&e<o){a(r,e-10,l,c),a(e+10,o,l,c);return}let d=function(e,t){for(let n of e)if(t(n))return n}(e,e=>e.from>=l.from&&e.to<=l.to&&Math.abs(e.from-r)<i&&Math.abs(e.to-o)<i&&!h.some(t=>e.from<t&&e.to>t));if(!d){if(o<l.to&&t&&n&&t.visibleRanges.some(e=>e.from<=o&&e.to>=o)){let e=t.moveToLineBoundary(eG.cursor(o),!1,!0).head;e>r&&(o=e)}let e=this.gapSize(l,r,o,c),i=n||e<2e6?e:2e6;d=new fS(r,o,e,i)}s.push(d)},l=t=>{var i,s,l;let c,u,h;if(t.length<o||t.type!=h_.Text)return;let d=(i=t.from,s=t.to,l=this.stateDeco,c=[],u=i,h=0,tA.spans(l,i,s,{span(){},point(e,t){e>u&&(c.push({from:u,to:e}),h+=e-u),u=t}},20),u<s&&(c.push({from:u,to:s}),h+=s-u),{total:h,ranges:c});if(d.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,p,m;if(n){let e=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,n,i;if(null!=f){let r=fM(d,f),o=((this.visibleBottom-this.visibleTop)/2+e)/t.height;n=r-o,i=r+o}else n=(this.visibleTop-t.top-e)/t.height,i=(this.visibleBottom-t.top+e)/t.height;p=fE(d,n),m=fE(d,i)}else{let n=d.total*this.heightOracle.charWidth,i=r*this.heightOracle.charWidth,o=0;if(n>2e6)for(let n of e)n.from>=t.from&&n.from<t.to&&n.size!=n.displaySize&&n.from*this.heightOracle.charWidth+o<this.pixelViewport.left&&(o=n.size-n.displaySize);let s=this.pixelViewport.left+o,a=this.pixelViewport.right+o,l,c;if(null!=f){let e=fM(d,f),t=((a-s)/2+i)/n;l=e-t,c=e+t}else l=(s-i)/n,c=(a+i)/n;p=fE(d,l),m=fE(d,c)}p>t.from&&a(t.from,p,t,d),m<t.to&&a(m,t.to,t,d)};for(let e of this.viewportLines)Array.isArray(e.type)?e.type.forEach(l):l(e);return s}gapSize(e,t,n,r){let i=fM(r,n)-fM(r,t);return this.heightOracle.lineWrapping?e.height*i:r.total*this.heightOracle.charWidth*i}updateLineGaps(e){fS.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=hj.set(e.map(e=>e.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let n=[];tA.spans(t,this.viewport.from,this.viewport.to,{span(e,t){n.push({from:e,to:t})},point(){}},20);let r=0;if(n.length!=this.visibleRanges.length)r=12;else for(let t=0;t<n.length&&!(8&r);t++){let i=this.visibleRanges[t],o=n[t];(i.from!=o.from||i.to!=o.to)&&(r|=4,e&&e.mapPos(i.from,-1)==o.from&&e.mapPos(i.to,1)==o.to||(r|=8))}return this.visibleRanges=n,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||fj(this.heightMap.lineAt(e,fp.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||fj(this.heightMap.lineAt(this.scaler.fromDOM(e),fp.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return fj(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class fA{constructor(e,t){this.from=e,this.to=t}}function fE({total:e,ranges:t},n){if(n<=0)return t[0].from;if(n>=1)return t[t.length-1].to;let r=Math.floor(e*n);for(let e=0;;e++){let{from:n,to:i}=t[e],o=i-n;if(r<=o)return n+r;r-=o}}function fM(e,t){let n=0;for(let{from:r,to:i}of e.ranges){if(t<=i){n+=t-r;break}n+=i-r}return n/e.total}let fN={toDOM:e=>e,fromDOM:e=>e,scale:1,eq(e){return e==this}};class f_{constructor(e,t,n){let r=0,i=0,o=0;for(let s of(this.viewports=n.map(({from:n,to:i})=>{let o=t.lineAt(n,fp.ByPos,e,0,0).top,s=t.lineAt(i,fp.ByPos,e,0,0).bottom;return r+=s-o,{from:n,to:i,top:o,bottom:s,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r),this.viewports))s.domTop=o+(s.top-i)*this.scale,o=s.domBottom=s.domTop+(s.bottom-s.top),i=s.bottom}toDOM(e){for(let t=0,n=0,r=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.top)return r+(e-n)*this.scale;if(e<=i.bottom)return i.domTop+(e-i.top);n=i.bottom,r=i.domBottom}}fromDOM(e){for(let t=0,n=0,r=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.domTop)return n+(e-r)/this.scale;if(e<=i.domBottom)return i.top+(e-i.domTop);n=i.bottom,r=i.domBottom}}eq(e){return e instanceof f_&&this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,n)=>t.from==e.viewports[n].from&&t.to==e.viewports[n].to)}}function fj(e,t){if(1==t.scale)return e;let n=t.toDOM(e.top),r=t.toDOM(e.bottom);return new ff(e.from,e.length,n,r-n,Array.isArray(e._content)?e._content.map(e=>fj(e,t)):e._content)}let fD=eZ.define({combine:e=>e.join(" ")}),fP=eZ.define({combine:e=>e.indexOf(!0)>-1}),fR=uR.newName(),fI=uR.newName(),fz=uR.newName(),fL={"&light":"."+fI,"&dark":"."+fz};function fq(e,t,n){return new uR(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,t=>{if("&"==t)return e;if(!n||!n[t])throw RangeError(`Unsupported selector: ${t}`);return n[t]}):e+" "+t})}let f$=fq("."+fR,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},fL),fB={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},fF=hv.ie&&hv.ie_version<=11,fQ=class{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new u2,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let e of t)this.queue.push(e);(hv.ie&&hv.ie_version<=11||hv.ios&&e.composing)&&t.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&!1!==e.constructor.EDIT_CONTEXT&&!(hv.chrome&&hv.chrome_version<126)&&(this.editContext=new fU(e),e.state.facet(dh)&&(e.contentDOM.editContext=this.editContext.editContext)),fF&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver(()=>{var e;(null===(e=this.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){("change"!=e.type&&e.type||e.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,n)=>t!=e[n]))){for(let t of(this.gapIntersection.disconnect(),e))this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,r=this.selectionRange;if(n.state.facet(dh)?n.root.activeElement!=this.dom:!uW(this.dom,r))return;let i=r.anchorNode&&n.docView.nearest(r.anchorNode);if(i&&i.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(hv.ie&&hv.ie_version<=11||hv.android&&hv.chrome)&&!n.state.selection.main.empty&&r.focusNode&&uX(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=uH(e.root);if(!t)return!1;let n=hv.safari&&11==e.root.nodeType&&e.root.activeElement==this.dom&&function(e,t){if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return fH(e,n)}let n=null;function r(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.contentDOM.addEventListener("beforeinput",r,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",r,!0),n?fH(e,n):null}(this.view,t)||t;if(!n||this.selectionRange.eq(n))return!1;let r=uW(this.dom,n);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,t){let n=t.focusNode,r=t.focusOffset;if(!n||t.anchorNode!=n||t.anchorOffset!=r)return!1;for(r=Math.min(r,uJ(n));;)if(r){if(1!=n.nodeType)return!1;let e=n.childNodes[r-1];"false"==e.contentEditable?r--:r=uJ(n=e)}else{if(n==e)return!0;r=uY(n),n=n.parentNode}}(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else if(11==n.nodeType)n=n.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,fB),fF&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),fF&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;this.delayedAndroidKey||(this.flushingAndroidKey=this.view.win.requestAnimationFrame(()=>{let e=this.delayedAndroidKey;e&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=e.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&e.force&&u6(this.dom,e.key,e.keyCode))})),this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null!==(n=this.delayedAndroidKey)&&void 0!==n&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,r=!1;for(let i of e){let e=this.readMutation(i);e&&(e.typeOver&&(r=!0),-1==t?{from:t,to:n}=e:(t=Math.min(e.from,t),n=Math.max(e.to,n)))}return{from:t,to:n,typeOver:r}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),r=this.selectionChanged&&uW(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let i=new dQ(this.view,e,t,n);return this.view.docView.domChanged={newSel:i.newSel?i.newSel.main:null},i}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let n=this.view.state,r=dV(this.view,t);return this.view.state==n&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.flags|=4),"childList"!=e.type)return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null;{let n=fV(t,e.previousSibling||e.target.previousSibling,-1),r=fV(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(dh)!=e.state.facet(dh)&&(e.view.contentDOM.editContext=e.state.facet(dh)?this.editContext.editContext:null))}destroy(){var e,t,n;for(let r of(this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect(),this.scrollTargets))r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}};function fV(e,t,n){for(;t;){let r=hr.get(t);if(r&&r.parent==e)return r;let i=t.parentNode;t=i!=e.dom?i:n>0?t.nextSibling:t.previousSibling}return null}function fH(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,o=t.endOffset,s=e.docView.domAtPos(e.state.selection.main.anchor);return uX(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}class fU{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});for(let n in this.handlers.textupdate=t=>{let n=e.state.selection.main,{anchor:r,head:i}=n,o=this.toEditorPos(t.updateRangeStart),s=this.toEditorPos(t.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:t.updateRangeStart,editorBase:o,drifted:!1});let a={from:o,to:s,insert:eS.of(t.text.split(`
`))};if(a.from==this.from&&r<this.from?a.from=r:a.to==this.to&&r>this.to&&(a.to=r),a.from==a.to&&!a.insert.length){let r=eG.single(this.toEditorPos(t.selectionStart),this.toEditorPos(t.selectionEnd));r.main.eq(n)||e.dispatch({selection:r,userEvent:"select"});return}if((hv.mac||hv.android)&&a.from==i-1&&/^\. ?$/.test(t.text)&&"off"==e.contentDOM.getAttribute("autocorrect")&&(a={from:o,to:s,insert:eS.of([t.text.replace("."," ")])}),this.pendingContextChange=a,!e.state.readOnly){let n=this.to-this.from+(a.to-a.from+a.insert.length);dH(e,a,eG.single(this.toEditorPos(t.selectionStart,n),this.toEditorPos(t.selectionEnd,n)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=n=>{let r=[],i=null;for(let t=this.toEditorPos(n.rangeStart),o=this.toEditorPos(n.rangeEnd);t<o;t++){let n=e.coordsForChar(t);i=n&&new DOMRect(n.left,n.top,n.right-n.left,n.bottom-n.top)||i||new DOMRect,r.push(i)}t.updateCharacterBounds(n.rangeStart,r)},this.handlers.textformatupdate=t=>{let n=[];for(let e of t.getTextFormats()){let t=e.underlineStyle,r=e.underlineThickness;if("None"!=t&&"None"!=r){let i=this.toEditorPos(e.rangeStart),o=this.toEditorPos(e.rangeEnd);if(i<o){let e=`text-decoration: underline ${"Dashed"==t?"dashed ":"Squiggle"==t?"wavy ":""}${"Thin"==r?1:2}px`;n.push(hj.mark({attributes:{style:e}}).range(i,o))}}}e.dispatch({effects:dc.of(hj.set(n))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:t}=this.composing;this.composing=null,t&&this.reset(e.state)}},this.handlers)t.addEventListener(n,this.handlers[n]);this.measureReq={read:e=>{this.editContext.updateControlBounds(e.contentDOM.getBoundingClientRect());let t=uH(e.root);t&&t.rangeCount&&this.editContext.updateSelectionBounds(t.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,n=!1,r=this.pendingContextChange;return e.changes.iterChanges((i,o,s,a,l)=>{if(n)return;let c=l.length-(o-i);if(r&&o>=r.to){if(r.from==i&&r.to==o&&r.insert.eq(l)){r=this.pendingContextChange=null,t+=c,this.to+=c;return}r=null,this.revertPending(e.state)}if(i+=t,(o+=t)<=this.from)this.from+=c,this.to+=c;else if(i<this.to){if(i<this.from||o>this.to||this.to-this.from+l.length>3e4){n=!0;return}this.editContext.updateText(this.toContextPos(i),this.toContextPos(o),l.toString()),this.to+=c}t+=c}),r&&!n&&this.revertPending(e.state),!n}update(e){let t=this.pendingContextChange,n=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(n.from,n.to)&&e.transactions.some(e=>!e.isUserEvent("input.type")&&e.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):this.applyEdits(e)&&this.rangeIsValid(e.state)?(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state):(this.pendingContextChange=null,this.reset(e.state)),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);(this.editContext.selectionStart!=n||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(n,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>3e4)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let n=this.composing;return n&&n.drifted?n.editorBase+(e-n.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}let fW=class e{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;for(let t of(this.dispatchTransactions=e.dispatchTransactions||n&&(e=>e.forEach(e=>n(e,this)))||(e=>this.update(e)),this.dispatch=this.dispatch.bind(this),this._root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new fT(e.state||tw.create(e)),e.scrollTo&&e.scrollTo.is(dl)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(df).map(e=>new dm(e)),this.plugins))t.update(this);this.observer=new fQ(this),this.inputState=new dU(this),this.inputState.ensureHandlers(this.plugins),this.docView=new dE(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),null!==(t=document.fonts)&&void 0!==t&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=1==e.length&&e[0]instanceof tp?e:1==e.length&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(0!=this.updateState)throw Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,n=!1,r,i=this.state;for(let t of e){if(t.startState!=i)throw RangeError("Trying to update state with a transaction that doesn't start from the previous state.");i=t.state}if(this.destroyed){this.viewState.state=i;return}let o=this.hasFocus,s=0,a=null;e.some(e=>e.annotation(fo))?(this.inputState.notifiedFocused=o,s=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,(a=fs(i,o))||(s=1));let l=this.observer.delayedAndroidKey,c=null;if(l?(this.observer.clearDelayedAndroidKey(),((c=this.observer.readChange())&&!this.state.doc.eq(i.doc)||!this.state.selection.eq(i.selection))&&(c=null)):this.observer.clear(),i.facet(tw.phrases)!=this.state.facet(tw.phrases))return this.setState(i);r=dA.create(this,i,e),r.flags|=s;let u=this.viewState.scrollTarget;try{for(let t of(this.updateState=2,e)){if(u&&(u=u.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;u=new da(e.empty?e:eG.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(dl)&&(u=e.value.clip(this.state))}this.viewState.update(r,u),this.bidiCache=fY.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(dC)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(e=>e.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(fD)!=r.state.facet(fD)&&(this.viewState.mustMeasureContent=!0),(t||n||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!r.empty)for(let e of this.state.facet(h8))try{e(r)}catch(e){du(this.state,e,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!dV(this,c)&&l.force&&u6(this.contentDOM,l.key,l.keyCode)})}setState(e){if(0!=this.updateState)throw Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);for(let t of(this.viewState=new fT(e),this.plugins=e.facet(df).map(e=>new dm(e)),this.pluginMap.clear(),this.plugins))t.update(this);this.docView.destroy(),this.docView=new dE(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(df),n=e.state.facet(df);if(t!=n){let r=[];for(let i of n){let n=t.indexOf(i);if(n<0)r.push(new dm(i));else{let t=this.plugins[n];t.mustUpdate=e,r.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let t of this.plugins)t.mustUpdate=e;for(let e=0;e<this.plugins.length;e++)this.plugins[e].update(this);t!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(e){du(this.state,e,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,r=n.scrollTop*this.scaleY,{scrollAnchorPos:i,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let e=0;;e++){if(o<0){if(u8(n))i=-1,o=this.viewState.heightMap.height;else{let e=this.viewState.scrollAnchorAt(r);i=e.from,o=e.top}}this.updateState=1;let s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];4&s||([this.measureRequests,a]=[a,this.measureRequests]);let l=a.map(e=>{try{return e.read(this)}catch(e){return du(this.state,e),fX}}),c=dA.create(this,this.state,[]),u=!1;c.flags|=s,t?t.flags|=s:t=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),(u=this.docView.update(c))&&this.docViewUpdate());for(let e=0;e<a.length;e++)if(l[e]!=fX)try{let t=a[e];t.write&&t.write(l[e],this)}catch(e){du(this.state,e)}if(u&&this.docView.updateSelection(!0),!c.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}{let e=(i<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(i).top)-o;if(e>1||e<-1){n.scrollTop=(r+=e)/this.scaleY,o=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let e of this.state.facet(h8))e(t)}get themeClasses(){return fR+" "+(this.state.facet(fP)?fz:fI)+" "+this.state.facet(fD)}updateAttrs(){let e=fZ(this,dg,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(dh)?"true":"false",class:"cm-content",style:`${hv.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),fZ(this,dy,t);let n=this.observer.ignore(()=>{let n=hM(this.contentDOM,this.contentAttrs,t),r=hM(this.dom,this.editorAttrs,e);return n||r});return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(t){let n=!0;for(let r of t)for(let t of r.effects)t.is(e.announce)&&(n&&(this.announceDOM.textContent=""),n=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=t.value)}mountStyles(){this.styleModules=this.state.facet(dC);let t=this.state.facet(e.cspNonce);uR.mount(this.root,this.styleModules.concat(f$).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(2==this.updateState)throw Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e&&!(this.measureRequests.indexOf(e)>-1)){if(null!=e.key){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(t=>t.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return d$(this,e,dL(this,e,t,n))}moveByGroup(e,t){return d$(this,e,dL(this,e,t,t=>{var n;let r,i;return n=e.head,i=(r=this.state.charCategorizer(n))(t),e=>{let t=r(e);return i==tv.Space&&(i=t),i==t}}))}visualLineSide(e,t){let n=this.bidiSpans(e),r=this.textDirectionAt(e.from),i=n[t?n.length-1:0];return eG.cursor(i.side(t,r)+e.from,i.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,n=!0){return function(e,t,n,r){let i=dz(e,t.head),o=r&&i.type==h_.Text&&(e.lineWrapping||i.widgetLineBreaks)?e.coordsAtPos(t.assoc<0&&t.head>i.from?t.head-1:t.head):null;if(o){let t=e.dom.getBoundingClientRect(),r=e.textDirectionAt(i.from),s=e.posAtCoords({x:n==(r==hV.LTR)?t.right-1:t.left+1,y:(o.top+o.bottom)/2});if(null!=s)return eG.cursor(s,n?-1:1)}return eG.cursor(n?i.to:i.from,n?-1:1)}(this,e,t,n)}moveVertically(e,t,n){return d$(this,e,function(e,t,n,r){let i=t.head,o=n?1:-1;if(i==(n?e.state.doc.length:0))return eG.cursor(i,t.assoc);let s=t.goalColumn,a,l=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(i,t.assoc||-1),u=e.documentTop;if(c)null==s&&(s=c.left-l.left),a=o<0?c.top:c.bottom;else{let t=e.viewState.lineBlockAt(i);null==s&&(s=Math.min(l.right-l.left,e.defaultCharacterWidth*(i-t.from))),a=(o<0?t.top:t.bottom)+u}let h=l.left+s,d=r??e.viewState.heightOracle.textHeight>>1;for(let t=0;;t+=10){let n=a+(d+t)*o,r=dR(e,{x:h,y:n},!1,o);if(n<l.top||n>l.bottom||(o<0?r<i:r>i)){let t=e.docView.coordsForChar(r),i=!t||n<t.top?-1:1;return eG.cursor(r,i,void 0,s)}}}(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),dR(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(e),i=this.bidiSpans(r);return u0(n,i[h0.find(i,e-r.from,-1,t)].dir==hV.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(dr)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>fG)return h2(e.length);let t=this.textDirectionAt(e.from),n;for(let r of this.bidiCache)if(r.from==e.from&&r.dir==t&&(r.fresh||function e(t,n){if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=n[r];if(i.from!=o.from||i.to!=o.to||i.direction!=o.direction||!e(i.inner,o.inner))return!1}return!0}(r.isolates,n=dk(this,e))))return r.order;n||(n=dk(this,e));let r=function(e,t,n){if(!e)return[new h0(0,0,+(t==hU))];if(t==hH&&!n.length&&!hJ.test(e))return h2(e.length);if(n.length)for(;e.length>h1.length;)h1[h1.length]=256;let r=[],i=+(t!=hH);return function e(t,n,r,i,o,s,a){let l=n%2?2:1;(function(e,t,n,r,i){for(let o=0;o<=r.length;o++){let s=o?r[o-1].to:t,a=o<r.length?r[o].from:n,l=o?256:i;for(let t=s,n=l,r=l;t<a;t++){let i=hK(e.charCodeAt(t));512==i?i=n:8==i&&4==r&&(i=16),h1[t]=4==i?2:i,7&i&&(r=i),n=i}for(let e=s,t=l,r=l;e<a;e++){let i=h1[e];if(128==i)e<a-1&&t==h1[e+1]&&24&t?i=h1[e]=t:h1[e]=256;else if(64==i){let i=e+1;for(;i<a&&64==h1[i];)i++;let o=e&&8==t||i<n&&8==h1[i]?1==r?1:8:256;for(let t=e;t<i;t++)h1[t]=o;e=i-1}else 8==i&&1==r&&(h1[e]=1);t=i,7&i&&(r=i)}}})(t,o,s,i,l),function(e,t,n,r,i){let o=1==i?2:1;for(let s=0,a=0,l=0;s<=r.length;s++){let c=s?r[s-1].to:t,u=s<r.length?r[s].from:n;for(let t=c,n,r,s;t<u;t++)if(r=hY[n=e.charCodeAt(t)]){if(r<0){for(let e=a-3;e>=0;e-=3)if(hZ[e+1]==-r){let n=hZ[e+2],r=2&n?i:4&n?1&n?o:i:0;r&&(h1[t]=h1[hZ[e]]=r),a=e;break}}else{if(189==hZ.length)break;hZ[a++]=t,hZ[a++]=n,hZ[a++]=l}}else if(2==(s=h1[t])||1==s){let e=s==i;l=+!e;for(let t=a-3;t>=0;t-=3){let n=hZ[t+2];if(2&n)break;if(e)hZ[t+2]|=2;else{if(4&n)break;hZ[t+2]|=4}}}}}(t,o,s,i,l),function(e,t,n,r){for(let i=0,o=r;i<=n.length;i++){let s=i?n[i-1].to:e,a=i<n.length?n[i].from:t;for(let l=s;l<a;){let s=h1[l];if(256==s){let s=l+1;for(;;)if(s==a){if(i==n.length)break;s=n[i++].to,a=i<n.length?n[i].from:t}else if(256==h1[s])s++;else break;let c=1==o,u=c==((s<t?h1[s]:r)==1)?c?1:2:r;for(let t=s,r=i,o=r?n[r-1].to:e;t>l;)t==o&&(t=n[--r].from,o=r?n[r-1].to:e),h1[--t]=u;l=s}else o=s,l++}}}(o,s,i,l),function t(n,r,i,o,s,a,l){let c=o%2?2:1;if(o%2==s%2)for(let u=r,h=0;u<i;){let r=!0,d=!1;if(h==a.length||u<a[h].from){let e=h1[u];e!=c&&(r=!1,d=16==e)}let f=r||1!=c?null:[],p=r?o:o+1,m=u;e:for(;;)if(h<a.length&&m==a[h].from){if(d)break;let t=a[h];if(!r)for(let e=t.to,n=h+1;;){if(e==i)break e;if(n<a.length&&a[n].from==e)e=a[n++].to;else{if(h1[e]==c)break e;break}}(h++,f)?f.push(t):(t.from>u&&l.push(new h0(u,t.from,p)),e(n,t.direction==hH!=!(p%2)?o+1:o,s,t.inner,t.from,t.to,l),u=t.to),m=t.to}else{if(m==i||(r?h1[m]!=c:h1[m]==c))break;m++}f?t(n,u,m,o+1,s,f,l):u<m&&l.push(new h0(u,m,p)),u=m}else for(let u=i,h=a.length;u>r;){let i=!0,d=!1;if(!h||u>a[h-1].to){let e=h1[u-1];e!=c&&(i=!1,d=16==e)}let f=i||1!=c?null:[],p=i?o:o+1,m=u;e:for(;;)if(h&&m==a[h-1].to){if(d)break;let t=a[--h];if(!i)for(let e=t.from,n=h;;){if(e==r)break e;if(n&&a[n-1].to==e)e=a[--n].from;else{if(h1[e-1]==c)break e;break}}f?f.push(t):(t.to<u&&l.push(new h0(t.to,u,p)),e(n,t.direction==hH!=!(p%2)?o+1:o,s,t.inner,t.from,t.to,l),u=t.from),m=t.from}else{if(m==r||(i?h1[m-1]!=c:h1[m-1]==c))break;m--}f?t(n,m,u,o+1,s,f,l):m<u&&l.push(new h0(m,u,p)),u=m}}(t,o,s,n,r,i,a)}(e,i,i,n,0,e.length,r),r}(e.text,t,n);return this.bidiCache.push(new fY(e.from,e.to,t,n,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||hv.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{u5(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of(this.root.activeElement==this.contentDOM&&this.contentDOM.blur(),this.plugins))e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return dl.of(new da("number"==typeof e?eG.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return dl.of(new da(eG.cursor(n.from),"start","start",n.top-e,t,!0))}setTabFocusMode(e){null==e?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof e?this.inputState.tabFocusMode=e?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return dp.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return dp.define(()=>({}),{eventObservers:e})}static theme(e,t){let n=uR.newName(),r=[fD.of(n),dC.of(fq(`.${n}`,e))];return t&&t.dark&&r.push(fP.of(!0)),r}static baseTheme(e){return e6.lowest(dC.of(fq("."+fR,e,fL)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),r=n&&hr.get(n)||hr.get(e);return(null===(t=null==r?void 0:r.rootView)||void 0===t?void 0:t.view)||null}};fW.styleModule=dC,fW.inputHandler=h9,fW.clipboardInputFilter=dt,fW.clipboardOutputFilter=dn,fW.scrollHandler=ds,fW.focusChangeEffect=de,fW.perLineTextDirection=dr,fW.exceptionSink=h7,fW.updateListener=h8,fW.editable=dh,fW.mouseSelectionStyle=h6,fW.dragMovesSelection=h3,fW.clickAddsSelectionRange=h5,fW.decorations=db,fW.outerDecorations=dv,fW.atomicRanges=dx,fW.bidiIsolatedRanges=dw,fW.scrollMargins=dO,fW.darkTheme=fP,fW.cspNonce=eZ.define({combine:e=>e.length?e[0]:""}),fW.contentAttributes=dy,fW.editorAttributes=dg,fW.lineWrapping=fW.contentAttributes.of({class:"cm-lineWrapping"}),fW.announce=tf.define();let fG=4096,fX={};class fY{constructor(e,t,n,r,i,o){this.from=e,this.to=t,this.dir=n,this.isolates=r,this.fresh=i,this.order=o}static update(e,t){if(t.empty&&!e.some(e=>e.fresh))return e;let n=[],r=e.length?e[e.length-1].dir:hV.LTR;for(let i=Math.max(0,e.length-10);i<e.length;i++){let o=e[i];o.dir!=r||t.touchesRange(o.from,o.to)||n.push(new fY(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function fZ(e,t,n){for(let r=e.state.facet(t),i=r.length-1;i>=0;i--){let t=r[i],o="function"==typeof t?t(e):t;o&&hT(o,n)}return n}let fK=hv.mac?"mac":hv.windows?"win":hv.linux?"linux":"key";function fJ(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}let f0=e6.default(fW.domEventHandlers({keydown:(e,t)=>f6(f4(t.state),e,t,"editor")})),f1=eZ.define({enables:f0}),f2=new WeakMap;function f4(e){let t=e.facet(f1),n=f2.get(t);return n||f2.set(t,n=function(e,t=fK){let n=Object.create(null),r=Object.create(null),i=(e,t)=>{let n=r[e];if(null==n)r[e]=t;else if(n!=t)throw Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},o=(e,r,o,s,a)=>{var l,c;let u=n[e]||(n[e]=Object.create(null)),h=r.split(/ (?!$)/).map(e=>(function(e,t){let n,r,i,o;let s=e.split(/-(?!$)/),a=s[s.length-1];"Space"==a&&(a=" ");for(let e=0;e<s.length-1;++e){let a=s[e];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))n=!0;else if(/^(c|ctrl|control)$/i.test(a))r=!0;else if(/^s(hift)?$/i.test(a))i=!0;else if(/^mod$/i.test(a))"mac"==t?o=!0:r=!0;else throw Error("Unrecognized modifier name: "+a)}return n&&(a="Alt-"+a),r&&(a="Ctrl-"+a),o&&(a="Meta-"+a),i&&(a="Shift-"+a),a})(e,t));for(let t=1;t<h.length;t++){let n=h.slice(0,t).join(" ");i(n,!0),u[n]||(u[n]={preventDefault:!0,stopPropagation:!1,run:[t=>{let r=f5={view:t,prefix:n,scope:e};return setTimeout(()=>{f5==r&&(f5=null)},4e3),!0}]})}let d=h.join(" ");i(d,!1);let f=u[d]||(u[d]={preventDefault:!1,stopPropagation:!1,run:(null===(c=null===(l=u._any)||void 0===l?void 0:l.run)||void 0===c?void 0:c.slice())||[]});o&&f.run.push(o),s&&(f.preventDefault=!0),a&&(f.stopPropagation=!0)};for(let r of e){let e=r.scope?r.scope.split(" "):["editor"];if(r.any)for(let t of e){let e=n[t]||(n[t]=Object.create(null));e._any||(e._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:i}=r;for(let t in e)e[t].run.push(e=>i(e,f3))}let i=r[t]||r.key;if(i)for(let t of e)o(t,i,r.run,r.preventDefault,r.stopPropagation),r.shift&&o(t,"Shift-"+i,r.shift,r.preventDefault,r.stopPropagation)}return n}(t.reduce((e,t)=>e.concat(t),[]))),n}let f5=null,f3=null;function f6(e,t,n,r){f3=t;let i=uV(t),o=eI(eP(i,0))==i.length&&" "!=i,s="",a=!1,l=!1,c=!1;f5&&f5.view==n&&f5.scope==r&&(s=f5.prefix+" ",0>dY.indexOf(t.keyCode)&&(l=!0,f5=null));let u=new Set,h=e=>{if(e){for(let t of e.run)if(!u.has(t)&&(u.add(t),t(n)))return e.stopPropagation&&(c=!0),!0;e.preventDefault&&(e.stopPropagation&&(c=!0),l=!0)}return!1},d=e[r],f,p;return d&&(h(d[s+fJ(i,t,!o)])?a=!0:o&&(t.altKey||t.metaKey||t.ctrlKey)&&!(hv.windows&&t.ctrlKey&&t.altKey)&&(f=uL[t.keyCode])&&f!=i?(h(d[s+fJ(f,t,!0)])||t.shiftKey&&(p=uq[t.keyCode])!=i&&p!=f&&h(d[s+fJ(p,t,!1)]))&&(a=!0):o&&t.shiftKey&&h(d[s+fJ(i,t,!0)])&&(a=!0),!a&&h(d._any)&&(a=!0)),l&&(a=!0),a&&c&&t.stopPropagation(),f3=null,a}class f7{constructor(e,t,n,r,i){this.className=e,this.left=t,this.top=n,this.width=r,this.height=i}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className==this.className&&(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(!n.empty)return function(e,t,n){if(n.to<=e.viewport.from||n.from>=e.viewport.to)return[];let r=Math.max(n.from,e.viewport.from),i=Math.min(n.to,e.viewport.to),o=e.textDirection==hV.LTR,s=e.contentDOM,a=s.getBoundingClientRect(),l=f8(e),c=s.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),h=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),d=a.right-(u?parseInt(u.paddingRight):0),f=dz(e,r),p=dz(e,i),m=f.type==h_.Text?f:null,g=p.type==h_.Text?p:null;if(m&&(e.lineWrapping||f.widgetLineBreaks)&&(m=f9(e,r,1,m)),g&&(e.lineWrapping||p.widgetLineBreaks)&&(g=f9(e,i,-1,g)),m&&g&&m.from==g.from&&m.to==g.to)return b(v(n.from,n.to,m));{let t=m?v(n.from,null,m):x(f,!1),r=g?v(null,n.to,g):x(p,!0),i=[];return(m||f).to<(g||p).from-(m&&g?1:0)||f.widgetLineBreaks>1&&t.bottom+e.defaultLineHeight/2<r.top?i.push(y(h,t.bottom,d,r.top)):t.bottom<r.top&&e.elementAtHeight((t.bottom+r.top)/2).type==h_.Text&&(t.bottom=r.top=(t.bottom+r.top)/2),b(t).concat(i).concat(b(r))}function y(e,n,r,i){return new f7(t,e-l.left,n-l.top,r-e,i-n)}function b({top:e,bottom:t,horizontal:n}){let r=[];for(let i=0;i<n.length;i+=2)r.push(y(n[i],e,n[i+1],t));return r}function v(t,n,r){let i=1e9,s=-1e9,a=[];function l(t,n,l,c,u){let f=e.coordsAtPos(t,t==r.to?-2:2),p=e.coordsAtPos(l,l==r.from?2:-2);f&&p&&(i=Math.min(f.top,p.top,i),s=Math.max(f.bottom,p.bottom,s),u==hV.LTR?a.push(o&&n?h:f.left,o&&c?d:p.right):a.push(!o&&c?h:p.left,!o&&n?d:f.right))}let c=t??r.from,u=n??r.to;for(let r of e.visibleRanges)if(r.to>c&&r.from<u)for(let i=Math.max(r.from,c),o=Math.min(r.to,u);;){let r=e.state.doc.lineAt(i);for(let s of e.bidiSpans(r)){let e=s.from+r.from,a=s.to+r.from;if(e>=o)break;a>i&&l(Math.max(e,i),null==t&&e<=c,Math.min(a,o),null==n&&a>=u,s.dir)}if((i=r.to+1)>=o)break}return 0==a.length&&l(c,null==t,u,null==n,e.textDirection),{top:i,bottom:s,horizontal:a}}function x(e,t){let n=a.top+(t?e.top:e.bottom);return{top:n,bottom:n,horizontal:[]}}}(e,t,n);{let r=e.coordsAtPos(n.head,n.assoc||1);if(!r)return[];let i=f8(e);return[new f7(t,r.left-i.left,r.top-i.top,null,r.bottom-r.top)]}}}function f8(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==hV.LTR?t.left:t.right-e.scrollDOM.clientWidth*e.scaleX)-e.scrollDOM.scrollLeft*e.scaleX,top:t.top-e.scrollDOM.scrollTop*e.scaleY}}function f9(e,t,n,r){let i=e.coordsAtPos(t,2*n);if(!i)return r;let o=e.dom.getBoundingClientRect(),s=(i.top+i.bottom)/2,a=e.posAtCoords({x:o.left+1,y:s}),l=e.posAtCoords({x:o.right-1,y:s});return null==a||null==l?r:{from:Math.max(r.from,Math.min(a,l)),to:Math.min(r.to,Math.max(a,l))}}class pe{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(pt)!=e.state.facet(pt)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){!1!==this.layer.updateOnDocViewUpdate&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,n=e.facet(pt);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((e,t)=>{var n;return n=this.drawn[t],!(e.constructor==n.constructor&&e.eq(n))})){let t=this.dom.firstChild,n=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[n].constructor&&r.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(r.draw(),t);for(;t;){let e=t.nextSibling;t.remove(),t=e}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}let pt=eZ.define();function pn(e){return[dp.define(t=>new pe(t,e)),pt.of(e)]}let pr=!(hv.ios&&hv.webkit&&hv.webkit_version<534),pi=eZ.define({combine:e=>tk(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function po(e){return e.startState.facet(pi)!=e.state.facet(pi)}let ps=pn({above:!0,markers(e){let{state:t}=e,n=t.facet(pi),r=[];for(let i of t.selection.ranges){let o=i==t.selection.main;if(i.empty?!o||pr:n.drawRangeCursor){let t=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",n=i.empty?i:eG.cursor(i.head,i.head>i.anchor?-1:1);for(let i of f7.forRange(e,t,n))r.push(i)}}return r},update(e,t){e.transactions.some(e=>e.selection)&&(t.style.animationName="cm-blink"==t.style.animationName?"cm-blink2":"cm-blink");let n=po(e);return n&&pa(e.state,t),e.docChanged||e.selectionSet||n},mount(e,t){pa(t.state,e)},class:"cm-cursorLayer"});function pa(e,t){t.style.animationDuration=e.facet(pi).cursorBlinkRate+"ms"}let pl=pn({above:!1,markers:e=>e.state.selection.ranges.map(t=>t.empty?[]:f7.forRange(e,"cm-selectionBackground",t)).reduce((e,t)=>e.concat(t)),update:(e,t)=>e.docChanged||e.selectionSet||e.viewportChanged||po(e),class:"cm-selectionLayer"}),pc={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};pr&&(pc[".cm-line"].caretColor=pc[".cm-content"].caretColor="transparent !important");let pu=e6.highest(fW.theme(pc)),ph=tf.define({map:(e,t)=>null==e?null:t.mapPos(e)}),pd=e4.define({create:()=>null,update:(e,t)=>(null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce((e,t)=>t.is(ph)?t.value:e,e))}),pf=dp.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let n=e.state.field(pd);null==n?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(pd)!=n||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:e}=this,t=e.state.field(pd),n=null!=t&&e.coordsAtPos(t);if(!n)return null;let r=e.scrollDOM.getBoundingClientRect();return{left:n.left-r.left+e.scrollDOM.scrollLeft*e.scaleX,top:n.top-r.top+e.scrollDOM.scrollTop*e.scaleY,height:n.bottom-n.top}}drawCursor(e){if(this.cursor){let{scaleX:t,scaleY:n}=this.view;e?(this.cursor.style.left=e.left/t+"px",this.cursor.style.top=e.top/n+"px",this.cursor.style.height=e.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(pd)!=e&&this.view.dispatch({effects:ph.of(e)})}},{eventObservers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function pp(e,t,n,r,i){t.lastIndex=0;for(let o=e.iterRange(n,r),s=n,a;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;a=t.exec(o.value);)i(s+a.index,a)}class pm{constructor(e){let{regexp:t,decoration:n,decorate:r,boundary:i,maxLength:o=1e3}=e;if(!t.global)throw RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(e,t,n,i)=>r(i,n,n+e[0].length,e,t);else if("function"==typeof n)this.addMatch=(e,t,r,i)=>{let o=n(e,t,r);o&&i(r,r+e[0].length,o)};else if(n)this.addMatch=(e,t,r,i)=>i(r,r+e[0].length,n);else throw RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=i,this.maxLength=o}createDeco(e){let t=new tE,n=t.add.bind(t);for(let{from:t,to:r}of function(e,t){let n=e.visibleRanges;if(1==n.length&&n[0].from==e.viewport.from&&n[0].to==e.viewport.to)return n;let r=[];for(let{from:i,to:o}of n)i=Math.max(e.state.doc.lineAt(i).from,i-t),o=Math.min(e.state.doc.lineAt(o).to,o+t),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}(e,this.maxLength))pp(e.state.doc,this.regexp,t,r,(t,r)=>this.addMatch(r,e,t,n));return t.finish()}updateDeco(e,t){let n=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((t,i,o,s)=>{s>=e.view.viewport.from&&o<=e.view.viewport.to&&(n=Math.min(o,n),r=Math.max(s,r))}),e.viewportMoved||r-n>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),n,r):t}updateRange(e,t,n,r){for(let i of e.visibleRanges){let o=Math.max(i.from,n),s=Math.min(i.to,r);if(s>o){let n=e.state.doc.lineAt(o),r=n.to<s?e.state.doc.lineAt(s):n,a=Math.max(i.from,n.from),l=Math.min(i.to,r.to);if(this.boundary){for(;o>n.from;o--)if(this.boundary.test(n.text[o-1-n.from])){a=o;break}for(;s<r.to;s++)if(this.boundary.test(r.text[s-r.from])){l=s;break}}let c=[],u,h=(e,t,n)=>c.push(n.range(e,t));if(n==r)for(this.regexp.lastIndex=a-n.from;(u=this.regexp.exec(n.text))&&u.index<l-n.from;)this.addMatch(u,e,u.index+n.from,h);else pp(e.state.doc,this.regexp,a,l,(t,n)=>this.addMatch(n,e,t,h));t=t.update({filterFrom:a,filterTo:l,filter:(e,t)=>e<a||t>l,add:c})}}return t}}let pg=null!=/x/.unicode?"gu":"g",py=RegExp(`[\0-\b
-\x7f-\x9f\xad\u2028\u2029\uFEFF-]`,pg),pb={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},pv=null,px=eZ.define({combine(e){let t=tk(e,{render:null,specialChars:py,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==pv&&"u">typeof document&&document.body){let t=document.body.style;pv=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)!=null}return pv||!1}())&&(t.specialChars=RegExp("	|"+t.specialChars.source,pg)),t.addSpecialChars&&(t.specialChars=RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,pg)),t}}),pw=null;class pk extends hN{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){var t;let n=(t=this.code)>=32?"":10==t?"":String.fromCharCode(9216+t),r=e.state.phrase("Control character")+" "+(pb[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let o=document.createElement("span");return o.textContent=n,o.title=r,o.setAttribute("aria-label",r),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class pO extends hN{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}let pS=hj.line({class:"cm-activeLine"}),pC=dp.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,n=[];for(let r of e.state.selection.ranges){let i=e.lineBlockAt(r.head);i.from>t&&(n.push(pS.range(i.from)),t=i.from)}return hj.set(n)}},{decorations:e=>e.decorations});class pT extends hN{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild("string"==typeof this.content?document.createTextNode(this.content):"function"==typeof this.content?this.content(e):this.content.cloneNode(!0)),"string"==typeof this.content?t.setAttribute("aria-label","placeholder "+this.content):t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?uG(e.firstChild):[];if(!t.length)return null;let n=window.getComputedStyle(e.parentNode),r=u0(t[0],"rtl"!=n.direction),i=parseInt(n.lineHeight);return r.bottom-r.top>1.5*i?{left:r.left,right:r.right,top:r.top,bottom:r.top+i}:r}ignoreEvent(){return!1}}function pA(e,t){var n;let r;let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1),o=e.state.doc.lineAt(i),s=i-o.from,a=s>2e3?-1:s==o.length?(n=t.clientX,(r=e.coordsAtPos(e.viewport.from))?Math.round(Math.abs((r.left-n)/e.defaultCharacterWidth)):-1):tq(o.text,e.state.tabSize,i-o.from);return{line:o.number,col:a,off:s}}let pE={Alt:[18,e=>!!e.altKey],Control:[17,e=>!!e.ctrlKey],Shift:[16,e=>!!e.shiftKey],Meta:[91,e=>!!e.metaKey]},pM={style:"cursor: crosshair"},pN="-10000px";class p_{constructor(e,t,n,r){this.facet=t,this.createTooltipView=n,this.removeTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(e=>e);let i=null;this.tooltipViews=this.tooltips.map(e=>i=n(e,i))}update(e,t){var n;let r=e.state.facet(this.facet),i=r.filter(e=>e);if(r===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let o=[],s=t?[]:null;for(let n=0;n<i.length;n++){let r=i[n],a=-1;if(r){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==r.create&&(a=e)}if(a<0)o[n]=this.createTooltipView(r,n?o[n-1]:null),s&&(s[n]=!!r.above);else{let r=o[n]=this.tooltipViews[a];s&&(s[n]=t[a]),r.update&&r.update(e)}}}for(let e of this.tooltipViews)0>o.indexOf(e)&&(this.removeTooltipView(e),null===(n=e.destroy)||void 0===n||n.call(e));return t&&(s.forEach((e,n)=>t[n]=e),t.length=s.length),this.input=r,this.tooltips=i,this.tooltipViews=o,!0}}function pj(e){let t=e.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:t.clientHeight,right:t.clientWidth}}let pD=eZ.define({combine:e=>{var t,n,r;return{position:hv.ios?"absolute":(null===(t=e.find(e=>e.position))||void 0===t?void 0:t.position)||"fixed",parent:(null===(n=e.find(e=>e.parent))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(r=e.find(e=>e.tooltipSpace))||void 0===r?void 0:r.tooltipSpace)||pj}}}),pP=new WeakMap,pR=dp.fromClass(class{constructor(e){this.view=e,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(pD);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver="function"==typeof ResizeObserver?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new p_(e,pq,(e,t)=>this.createTooltip(e,t),e=>{this.resizeObserver&&this.resizeObserver.unobserve(e.dom),e.dom.remove()}),this.above=this.manager.tooltips.map(e=>!!e.above),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver(e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver)for(let e of(this.intersectionObserver.disconnect(),this.manager.tooltipViews))this.intersectionObserver.observe(e.dom)}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e,this.above);t&&this.observeIntersection();let n=t||e.geometryChanged,r=e.state.facet(pD);if(r.position!=this.position&&!this.madeAbsolute){for(let e of(this.position=r.position,this.manager.tooltipViews))e.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){for(let e of(this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer(),this.manager.tooltipViews))this.container.appendChild(e.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(e,t){let n=e.create(this.view),r=t?t.dom:null;if(n.dom.classList.add("cm-tooltip"),e.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",n.dom.appendChild(e)}return n.dom.style.position=this.position,n.dom.style.top=pN,n.dom.style.left="0px",this.container.insertBefore(n.dom,r),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var e,t,n;for(let t of(this.view.win.removeEventListener("resize",this.measureSoon),this.manager.tooltipViews))t.dom.remove(),null===(e=t.destroy)||void 0===e||e.call(t);this.parent&&this.container.remove(),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),null===(n=this.intersectionObserver)||void 0===n||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=1,t=1,n=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){let{dom:e}=this.manager.tooltipViews[0];if(hv.gecko)n=e.offsetParent!=this.container.ownerDocument.body;else if(e.style.top==pN&&"0px"==e.style.left){let t=e.getBoundingClientRect();n=Math.abs(t.top+1e4)>1||Math.abs(t.left)>1}}if(n||"absolute"==this.position){if(this.parent){let n=this.parent.getBoundingClientRect();n.width&&n.height&&(e=n.width/this.parent.offsetWidth,t=n.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState)}let r=this.view.scrollDOM.getBoundingClientRect(),i=dS(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((e,t)=>{let n=this.manager.tooltipViews[t];return n.getCoords?n.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(pD).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:n}}writeMeasure(e){var t;if(e.makeAbsolute)for(let e of(this.madeAbsolute=!0,this.position="absolute",this.manager.tooltipViews))e.dom.style.position="absolute";let{visible:n,space:r,scaleX:i,scaleY:o}=e,s=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,h=e.pos[a],d=e.size[a];if(!h||!1!==l.clip&&(h.bottom<=Math.max(n.top,r.top)||h.top>=Math.min(n.bottom,r.bottom)||h.right<Math.max(n.left,r.left)-.1||h.left>Math.min(n.right,r.right)+.1)){u.style.top=pN;continue}let f=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,p=7*!!f,m=d.right-d.left,g=null!==(t=pP.get(c))&&void 0!==t?t:d.bottom-d.top,y=c.offset||pL,b=this.view.textDirection==hV.LTR,v=d.width>r.right-r.left?b?r.left:r.right-d.width:b?Math.max(r.left,Math.min(h.left-14*!!f+y.x,r.right-m)):Math.min(Math.max(r.left,h.left-m+14*!!f-y.x),r.right-m),x=this.above[a];!l.strictSide&&(x?h.top-g-p-y.y<r.top:h.bottom+g+p+y.y>r.bottom)&&x==r.bottom-h.bottom>h.top-r.top&&(x=this.above[a]=!x);let w=(x?h.top-r.top:r.bottom-h.bottom)-p;if(w<g&&!1!==c.resize){if(w<this.view.defaultLineHeight){u.style.top=pN;continue}pP.set(c,g),u.style.height=(g=w)/o+"px"}else u.style.height&&(u.style.height="");let k=x?h.top-g-p-y.y:h.bottom+p+y.y,O=v+m;if(!0!==c.overlap)for(let e of s)e.left<O&&e.right>v&&e.top<k+g&&e.bottom>k&&(k=x?e.top-g-2-p:e.bottom+p+2);if("absolute"==this.position?(u.style.top=(k-e.parent.top)/o+"px",pI(u,(v-e.parent.left)/i)):(u.style.top=k/o+"px",pI(u,v/i)),f){let e=h.left+(b?y.x:-y.x)-(v+14-7);f.style.left=e/i+"px"}!0!==c.overlap&&s.push({left:v,top:k,right:O,bottom:k+g}),u.classList.toggle("cm-tooltip-above",x),u.classList.toggle("cm-tooltip-below",!x),c.positioned&&c.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=pN}},{eventObservers:{scroll(){this.maybeMeasure()}}});function pI(e,t){let n=parseInt(e.style.left,10);(isNaN(n)||Math.abs(t-n)>1)&&(e.style.left=t+"px")}let pz=fW.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),pL={x:0,y:0},pq=eZ.define({enables:[pR,pz]}),p$=eZ.define({combine:e=>e.reduce((e,t)=>e.concat(t),[])});class pB{static create(e){return new pB(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new p_(e,p$,(e,t)=>this.createHostedView(e,t),e=>e.dom.remove())}createHostedView(e,t){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)null===(e=t.destroy)||void 0===e||e.call(t)}passProp(e){let t;for(let n of this.manager.tooltipViews){let r=n[e];if(void 0!==r){if(void 0===t)t=r;else if(t!==r)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}let pF=pq.compute([p$],e=>{let t=e.facet(p$);return 0===t.length?null:{pos:Math.min(...t.map(e=>e.pos)),end:Math.max(...t.map(e=>{var t;return null!==(t=e.end)&&void 0!==t?t:e.pos})),create:pB.create,above:t[0].above,arrow:t.some(e=>e.arrow)}});class pQ{constructor(e,t,n,r,i){this.view=e,this.source=t,this.field=n,this.setHover=r,this.hoverTime=i,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,n=e.docView.nearest(t.target);if(!n)return;let r,i=1;if(n instanceof hk)r=n.posAtStart;else{if(null==(r=e.posAtCoords(t)))return;let n=e.coordsAtPos(r);if(!n||t.y<n.top||t.y>n.bottom||t.x<n.left-e.defaultCharacterWidth||t.x>n.right+e.defaultCharacterWidth)return;let o=e.bidiSpans(e.state.doc.lineAt(r)).find(e=>e.from<=r&&e.to>=r),s=o&&o.dir==hV.RTL?-1:1;i=t.x<n.left?-s:s}let o=this.source(e,r,i);if(null!=o&&o.then){let t=this.pending={pos:r};o.then(n=>{this.pending==t&&(this.pending=null,n&&!(Array.isArray(n)&&!n.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(n)?n:[n])}))},t=>du(e.state,t,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(pR),t=e?e.manager.tooltips.findIndex(e=>e.create==pB.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:i}=this;if(r.length&&i&&!function(e,t){let{left:n,right:r,top:i,bottom:o}=e.getBoundingClientRect(),s;if(s=e.querySelector(".cm-tooltip-arrow")){let e=s.getBoundingClientRect();i=Math.min(e.top,i),o=Math.max(e.bottom,o)}return t.clientX>=n-4&&t.clientX<=r+4&&t.clientY>=i-4&&t.clientY<=o+4}(i.dom,e)||this.pending){let{pos:i}=r[0]||this.pending,o=null!==(n=null===(t=r[0])||void 0===t?void 0:t.end)&&void 0!==n?n:i;(i==o?this.view.posAtCoords(this.lastMove)==i:function(e,t,n,r,i,o){let s=e.scrollDOM.getBoundingClientRect(),a=e.documentTop+e.documentPadding.top+e.contentHeight;if(s.left>r||s.right<r||s.top>i||Math.min(s.bottom,a)<i)return!1;let l=e.posAtCoords({x:r,y:i},!1);return l>=t&&l<=n}(this.view,i,o,e.clientX,e.clientY))||(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:t}=this;t&&t.dom.contains(e.relatedTarget)?this.watchTooltipLeave(t.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=n=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function pV(e,t){let n=e.plugin(pR);if(!n)return null;let r=n.manager.tooltips.indexOf(t);return r<0?null:n.manager.tooltipViews[r]}let pH=tf.define(),pU=eZ.define({combine(e){let t,n;for(let r of e)t=t||r.topContainer,n=n||r.bottomContainer;return{topContainer:t,bottomContainer:n}}});function pW(e,t){let n=e.plugin(pG),r=n?n.specs.indexOf(t):-1;return r>-1?n.panels[r]:null}let pG=dp.fromClass(class{constructor(e){this.input=e.state.facet(pZ),this.specs=this.input.filter(e=>e),this.panels=this.specs.map(t=>t(e));let t=e.state.facet(pU);for(let n of(this.top=new pX(e,!0,t.topContainer),this.bottom=new pX(e,!1,t.bottomContainer),this.top.sync(this.panels.filter(e=>e.top)),this.bottom.sync(this.panels.filter(e=>!e.top)),this.panels))n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(e){let t=e.state.facet(pU);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new pX(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new pX(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=e.state.facet(pZ);if(n!=this.input){let t=n.filter(e=>e),r=[],i=[],o=[],s=[];for(let n of t){let t=this.specs.indexOf(n),a;t<0?(a=n(e.view),s.push(a)):(a=this.panels[t]).update&&a.update(e),r.push(a),(a.top?i:o).push(a)}for(let e of(this.specs=t,this.panels=r,this.top.sync(i),this.bottom.sync(o),s))e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let t of this.panels)t.update&&t.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>fW.scrollMargins.of(t=>{let n=t.plugin(e);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class pX{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&0>e.indexOf(t)&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=pY(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=pY(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function pY(e){let t=e.nextSibling;return e.remove(),t}let pZ=eZ.define({enables:pG});class pK extends tO{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}pK.prototype.elementClass="",pK.prototype.toDOM=void 0,pK.prototype.mapMode=eL.TrackBefore,pK.prototype.startSide=pK.prototype.endSide=-1,pK.prototype.point=!0;let pJ=eZ.define(),p0=eZ.define(),p1={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>tA.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},p2=eZ.define(),p4=eZ.define({combine:e=>e.some(e=>e)}),p5=dp.fromClass(class{constructor(e){for(let t of(this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=e.state.facet(p2).map(t=>new p8(e,t)),this.gutters))this.dom.appendChild(t.dom);this.fixed=!e.state.facet(p4),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let t=this.prevViewport,n=e.view.viewport,r=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(p4)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&this.dom.remove();let n=tA.iter(this.view.state.facet(pJ),this.view.viewport.from),r=[],i=this.gutters.map(e=>new p7(e,this.view.viewport,-this.view.documentPadding.top));for(let e of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(e.type)){let t=!0;for(let o of e.type)if(o.type==h_.Text&&t){for(let e of(p6(n,r,o.from),i))e.line(this.view,o,r);t=!1}else if(o.widget)for(let e of i)e.widget(this.view,o)}else if(e.type==h_.Text)for(let t of(p6(n,r,e.from),i))t.line(this.view,e,r);else if(e.widget)for(let t of i)t.widget(this.view,e);for(let e of i)e.finish();e&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(e){let t=e.startState.facet(p2),n=e.state.facet(p2),r=e.docChanged||e.heightChanged||e.viewportChanged||!tA.eq(e.startState.facet(pJ),e.state.facet(pJ),e.view.viewport.from,e.view.viewport.to);if(t==n)for(let t of this.gutters)t.update(e)&&(r=!0);else{r=!0;let i=[];for(let r of n){let n=t.indexOf(r);n<0?i.push(new p8(this.view,r)):(this.gutters[n].update(e),i.push(this.gutters[n]))}for(let e of this.gutters)e.dom.remove(),0>i.indexOf(e)&&e.destroy();for(let e of i)this.dom.appendChild(e.dom);this.gutters=i}return r}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>fW.scrollMargins.of(t=>{let n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==hV.LTR?{left:n.dom.offsetWidth*t.scaleX}:{right:n.dom.offsetWidth*t.scaleX}:null})});function p3(e){return Array.isArray(e)?e:[e]}function p6(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}class p7{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=tA.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:r}=this,i=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==r.elements.length){let t=new p9(e,o,i,n);r.elements.push(t),r.dom.appendChild(t.dom)}else r.elements[this.i].update(e,o,i,n);this.height=t.bottom,this.i++}line(e,t,n){let r=[];p6(this.cursor,r,t.from),n.length&&(r=r.concat(n));let i=this.gutter.config.lineMarker(e,t,r);i&&r.unshift(i);let o=this.gutter;(0!=r.length||o.config.renderEmptyElements)&&this.addElement(e,t,r)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t),r=n?[n]:null;for(let n of e.state.facet(p0)){let i=n(e,t.widget,t);i&&(r||(r=[])).push(i)}r&&this.addElement(e,t,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class p8{constructor(e,t){for(let n in this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:""),t.domEventHandlers)this.dom.addEventListener(n,r=>{let i=r.target,o;if(i!=this.dom&&this.dom.contains(i)){for(;i.parentNode!=this.dom;)i=i.parentNode;let e=i.getBoundingClientRect();o=(e.top+e.bottom)/2}else o=r.clientY;let s=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[n](e,s,r)&&r.preventDefault()});this.markers=p3(t.markers(e)),t.initialSpacer&&(this.spacer=new p9(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=p3(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let n=e.view.viewport;return!tA.eq(this.markers,t,n.from,n.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class p9{constructor(e,t,n,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,r)}update(e,t,n,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let n="cm-gutterElement",r=this.dom.firstChild;for(let i=0,o=0;;){let s=o,a=i<t.length?t[i++]:null,l=!1;if(a){let e=a.elementClass;e&&(n+=" "+e);for(let e=o;e<this.markers.length;e++)if(this.markers[e].compare(a)){s=e,l=!0;break}}else s=this.markers.length;for(;o<s;){let e=this.markers[o++];if(e.toDOM){e.destroy(r);let t=r.nextSibling;r.remove(),r=t}}if(!a)break;a.toDOM&&(l?r=r.nextSibling:this.dom.insertBefore(a.toDOM(e),r)),l&&o++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}let me=eZ.define(),mt=eZ.define(),mn=eZ.define({combine:e=>tk(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let e in t){let r=n[e],i=t[e];n[e]=r?(e,t,n)=>r(e,t,n)||i(e,t,n):i}return n}})});class mr extends pK{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function mi(e,t){return e.state.facet(mn).formatNumber(t,e.state)}let mo=p2.compute([mn],e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(me),lineMarker:(e,t,n)=>n.some(e=>e.toDOM)?null:new mr(mi(e,e.state.doc.lineAt(t.from).number)),widgetMarker:(e,t,n)=>{for(let r of e.state.facet(mt)){let i=r(e,t,n);if(i)return i}return null},lineMarkerChange:e=>e.startState.facet(mn)!=e.state.facet(mn),initialSpacer:e=>new mr(mi(e,ms(e.state.doc.lines))),updateSpacer(e,t){let n=mi(t.view,ms(t.view.state.doc.lines));return n==e.number?e:new mr(n)},domEventHandlers:e.facet(mn).domEventHandlers}));function ms(e){let t=9;for(;t<e;)t=10*t+9;return t}let ma=new class extends pK{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},ml=pJ.compute(["selection"],e=>{let t=[],n=-1;for(let r of e.selection.ranges){let i=e.doc.lineAt(r.head).from;i>n&&(n=i,t.push(ma.range(i)))}return tA.of(t)}),mc=0;class mu{constructor(e,t){this.from=e,this.to=t}}class mh{constructor(e={}){this.id=mc++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=mp.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}mh.closedBy=new mh({deserialize:e=>e.split(" ")}),mh.openedBy=new mh({deserialize:e=>e.split(" ")}),mh.group=new mh({deserialize:e=>e.split(" ")}),mh.isolate=new mh({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw RangeError("Invalid value for isolate: "+e);return e||"auto"}}),mh.contextHash=new mh({perNode:!0}),mh.lookAhead=new mh({perNode:!0}),mh.mounted=new mh({perNode:!0});class md{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[mh.mounted.id]}}let mf=Object.create(null),mp=class e{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(t){let n=t.props&&t.props.length?Object.create(null):mf,r=+!!t.top|2*!!t.skipped|4*!!t.error|8*(null==t.name),i=new e(t.name||"",n,t.id,r);if(t.props){for(let e of t.props)if(Array.isArray(e)||(e=e(i)),e){if(e[0].perNode)throw RangeError("Can't store a per-node prop on a node type");n[e[0].id]=e[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(mh.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return e=>{for(let n=e.prop(mh.group),r=-1;r<(n?n.length:0);r++){let i=t[r<0?e.name:n[r]];if(i)return i}}}};mp.none=new mp("",Object.create(null),0,8);class mm{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let r=null;for(let t of e){let e=t(n);e&&(r||(r=Object.assign({},n.props)),r[e[0].id]=e[1])}t.push(r?new mp(n.name,r,n.id,n.flags):n)}return new mm(t)}}let mg=new WeakMap,my=new WeakMap;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(p||(p={}));class mb{constructor(e,t,n,r,i){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,i&&i.length)for(let[e,t]of(this.props=Object.create(null),i))this.props["number"==typeof e?e:e.id]=t}toString(){let e=md.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){let n=e.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new m_(this.topNode,e)}cursorAt(e,t=0,n=0){let r=new m_(mg.get(this)||this.topNode);return r.moveTo(e,t),mg.set(this,r._tree),r}get topNode(){return new mS(this,0,0,null)}resolve(e,t=0){let n=mk(mg.get(this)||this.topNode,e,t,!1);return mg.set(this,n),n}resolveInner(e,t=0){let n=mk(my.get(this)||this.topNode,e,t,!0);return my.set(this,n),n}resolveStack(e,t=0){return function(e,t,n){let r=e.resolveInner(t,n),i=null;for(let e=r instanceof mS?r:r.context.parent;e;e=e.parent)if(e.index<0){let o=e.parent;(i||(i=[r])).push(o.resolve(t,n)),e=o}else{let o=md.get(e.tree);if(o&&o.overlay&&o.overlay[0].from<=t&&o.overlay[o.overlay.length-1].to>=t){let s=new mS(o.tree,o.overlay[0].from+e.from,-1,e);(i||(i=[r])).push(mk(s,t,n,!1))}}return i?mM(i):r}(this,e,t)}iterate(e){let{enter:t,leave:n,from:r=0,to:i=this.length}=e,o=e.mode||0,s=(o&p.IncludeAnonymous)>0;for(let e=this.cursor(o|p.IncludeAnonymous);;){let o=!1;if(e.from<=i&&e.to>=r&&(!s&&e.type.isAnonymous||!1!==t(e))){if(e.firstChild())continue;o=!0}for(;o&&n&&(s||!e.type.isAnonymous)&&n(e),!e.nextSibling();){if(!e.parent())return;o=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:mR(mp.none,this.children,this.positions,0,this.children.length,0,this.length,(e,t,n)=>new mb(this.type,e,t,n,this.propValues),e.makeTree||((e,t,n)=>new mb(mp.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:r,maxBufferLength:i=1024,reused:o=[],minRepeatType:s=r.types.length}=e,a=Array.isArray(n)?new mv(n,n.length):n,l=r.types,c=0,u=0;function h(e,t,n,i,o,s,a,l,c){let u=[],h=[];for(;e.length>i;)u.push(e.pop()),h.push(t.pop()+n-o);e.push(d(r.types[a],u,h,s-o,l-s,c)),t.push(o-n)}function d(e,t,n,r,i,o,s){if(o){let e=[mh.contextHash,o];s=s?[e].concat(s):[e]}if(i>25){let e=[mh.lookAhead,i];s=s?[e].concat(s):[e]}return new mb(e,t,n,r,s)}let f=[],p=[];for(;a.pos>0;)!function e(t,n,f,p,m,g){let{id:y,start:b,end:v,size:x}=a,w=u,k=c;for(;x<0;)if(a.next(),-1==x){let e=o[y];f.push(e),p.push(b-t);return}else if(-3==x){c=y;return}else if(-4==x){u=y;return}else throw RangeError(`Unrecognized record size: ${x}`);let O=l[y],S,C,T=b-t;if(v-b<=i&&(C=function(e,t){let n=a.fork(),r=0,o=0,l=0,c=n.end-i,u={size:0,start:0,skip:0};e:for(let i=n.pos-e;n.pos>i;){let e=n.size;if(n.id==t&&e>=0){u.size=r,u.start=o,u.skip=l,l+=4,r+=4,n.next();continue}let a=n.pos-e;if(e<0||a<i||n.start<c)break;let h=4*(n.id>=s),d=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3==n.size)h+=4;else break e}else n.id>=s&&(h+=4);n.next()}o=d,r+=e,l+=h}return(t<0||r==e)&&(u.size=r,u.start=o,u.skip=l),u.size>4?u:void 0}(a.pos-n,m))){let e=new Uint16Array(C.size-C.skip),n=a.pos-C.size,i=e.length;for(;a.pos>n;)i=function e(t,n,r){let{id:i,start:o,end:l,size:h}=a;if(a.next(),h>=0&&i<s){let s=r;if(h>4){let i=a.pos-(h-4);for(;a.pos>i;)r=e(t,n,r)}n[--r]=s,n[--r]=l-t,n[--r]=o-t,n[--r]=i}else -3==h?c=i:-4==h&&(u=i);return r}(C.start,e,i);S=new mx(e,v-C.start,r),T=C.start-t}else{let t=a.pos-x;a.next();let n=[],o=[],l=y>=s?y:-1,c=0,u=v;for(;a.pos>t;)l>=0&&a.id==l&&a.size>=0?(a.end<=u-i&&(h(n,o,b,c,a.end,u,l,w,k),c=n.length,u=a.end),a.next()):g>2500?function(e,t,n,o){let s=[],l=0,c=-1;for(;a.pos>t;){let{id:e,start:t,end:n,size:r}=a;if(r>4)a.next();else{if(c>-1&&t<c)break;c<0&&(c=n-i),s.push(e,t,n),l++,a.next()}}if(l){let t=new Uint16Array(4*l),i=s[s.length-2];for(let e=s.length-3,n=0;e>=0;e-=3)t[n++]=s[e],t[n++]=s[e+1]-i,t[n++]=s[e+2]-i,t[n++]=n;n.push(new mx(t,s[2]-i,r)),o.push(i-e)}}(b,t,n,o):e(b,t,n,o,l,g+1);if(l>=0&&c>0&&c<n.length&&h(n,o,b,c,b,u,l,w,k),n.reverse(),o.reverse(),l>-1&&c>0){let e=function(e,t){return(n,r,i)=>{let o=0,s=n.length-1,a,l;if(s>=0&&(a=n[s])instanceof mb){if(!s&&a.type==e&&a.length==i)return a;(l=a.prop(mh.lookAhead))&&(o=r[s]+a.length+l)}return d(e,n,r,i,o,t)}}(O,k);S=mR(O,n,o,0,n.length,0,v-b,e,e)}else S=d(O,n,o,v-b,w-v,k)}f.push(S),p.push(T)}(e.start||0,e.bufferStart||0,f,p,-1,0);let m=null!==(t=e.length)&&void 0!==t?t:f.length?p[0]+f[0].length:0;return new mb(l[e.topID],f.reverse(),p.reverse(),m)}(e)}}mb.empty=new mb(mp.none,[],[],0);class mv{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new mv(this.buffer,this.index)}}class mx{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return mp.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],i=r.name;if(/\W/.test(i)&&!r.isError&&(i=JSON.stringify(i)),n==(e+=4))return i;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return i+"("+o.join(",")+")"}findChild(e,t,n,r,i){let{buffer:o}=this,s=-1;for(let a=e;a!=t&&!(mw(i,r,o[a+1],o[a+2])&&(s=a,n>0));a=o[a+3]);return s}slice(e,t,n){let r=this.buffer,i=new Uint16Array(t-e),o=0;for(let s=e,a=0;s<t;){i[a++]=r[s++],i[a++]=r[s++]-n;let t=i[a++]=r[s++]-n;i[a++]=r[s++]-e,o=Math.max(o,t)}return new mx(i,o,this.set)}}function mw(e,t,n,r){switch(e){case -2:return n<t;case -1:return r>=t&&n<t;case 0:return n<t&&r>t;case 1:return n<=t&&r>t;case 2:return r>t;case 4:return!0}}function mk(e,t,n,r){for(var i;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!r&&e instanceof mS&&e.index<0?null:e.parent;if(!t)return e;e=t}let o=r?0:p.IgnoreOverlays;if(r)for(let r=e,s=r.parent;s;s=(r=s).parent)r instanceof mS&&r.index<0&&(null===(i=s.enter(t,n,o))||void 0===i?void 0:i.from)!=r.from&&(e=s);for(;;){let r=e.enter(t,n,o);if(!r)return e;e=r}}class mO{cursor(e=0){return new m_(this,e)}getChild(e,t=null,n=null){let r=mC(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return mC(this,e,t,n)}resolve(e,t=0){return mk(this,e,t,!1)}resolveInner(e,t=0){return mk(this,e,t,!0)}matchContext(e){return mT(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(n=t,t=e.prevSibling):t=e}return n}get node(){return this}get next(){return this.parent}}class mS extends mO{constructor(e,t,n,r){super(),this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r,i=0){for(let o=this;;){for(let{children:s,positions:a}=o._tree,l=t>0?s.length:-1;e!=l;e+=t){let l=s[e],c=a[e]+o.from;if(mw(r,n,c,c+l.length)){if(l instanceof mx){if(i&p.ExcludeBuffers)continue;let s=l.findChild(0,l.buffer.length,t,n-c,r);if(s>-1)return new mE(new mA(o,l,e,c),null,s)}else if(i&p.IncludeAnonymous||!l.type.isAnonymous||mj(l)){let s;if(!(i&p.IgnoreMounts)&&(s=md.get(l))&&!s.overlay)return new mS(s.tree,c,e,o);let a=new mS(l,c,e,o);return i&p.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,n,r)}}}if(i&p.IncludeAnonymous||!o.type.isAnonymous||(e=o.index>=0?o.index+t:t<0?-1:o._parent._tree.children.length,!(o=o._parent)))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let r;if(!(n&p.IgnoreOverlays)&&(r=md.get(this._tree))&&r.overlay){let n=e-this.from;for(let{from:e,to:i}of r.overlay)if((t>0?e<=n:e<n)&&(t<0?i>=n:i>n))return new mS(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function mC(e,t,n,r){let i=e.cursor(),o=[];if(!i.firstChild())return o;if(null!=n){for(let e=!1;!e;)if(e=i.type.is(n),!i.nextSibling())return o}for(;;){if(null!=r&&i.type.is(r))return o;if(i.type.is(t)&&o.push(i.node),!i.nextSibling())return null==r?o:[]}}function mT(e,t,n=t.length-1){for(let r=e;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[n]&&t[n]!=r.name)return!1;n--}}return!0}class mA{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}}class mE extends mO{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return i<0?null:new mE(this.context,this,i)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&p.ExcludeBuffers)return null;let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return i<0?null:new mE(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new mE(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new mE(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,i=n.buffer[this.index+3];if(i>r){let o=n.buffer[this.index+1];e.push(n.slice(r,i,o)),t.push(0)}return new mb(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function mM(e){if(!e.length)return null;let t=0,n=e[0];for(let r=1;r<e.length;r++){let i=e[r];(i.from>n.from||i.to<n.to)&&(n=i,t=r)}let r=n instanceof mS&&n.index<0?null:n.parent,i=e.slice();return r?i[t]=r:i.splice(t,1),new mN(i,n)}class mN{constructor(e,t){this.heads=e,this.node=t}get next(){return mM(this.heads)}}class m_{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof mS)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return!!e&&(e instanceof mS?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return!(i<0)&&(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?!(n&p.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&p.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&p.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(r.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let r=t+e,i=e<0?-1:n._tree.children.length;r!=i;r+=e){let e=n._tree.children[r];if(this.mode&p.IncludeAnonymous||e instanceof mx||!e.type.isAnonymous||mj(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,i=this.stack.length;i>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,n=i+1;break e}r=this.stack[--i]}for(let e=n;e<this.stack.length;e++)t=new mE(this.buffer,t,this.stack[e]);return this.bufferNode=new mE(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return mT(this.node.parent,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,i=this.stack.length-1;r>=0;i--){if(i<0)return mT(this._tree,e,r);let o=n[t.buffer[this.stack[i]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function mj(e){return e.children.some(e=>e instanceof mx||!e.type.isAnonymous||mj(e))}let mD=new WeakMap;function mP(e,t){if(!e.isAnonymous||t instanceof mx||t.type!=e)return 1;let n=mD.get(t);if(null==n){for(let r of(n=1,t.children)){if(r.type!=e||!(r instanceof mb)){n=1;break}n+=mP(e,r)}mD.set(t,n)}return n}function mR(e,t,n,r,i,o,s,a,l){let c=0;for(let n=r;n<i;n++)c+=mP(e,t[n]);let u=Math.ceil(1.5*c/8),h=[],d=[];return function t(n,r,i,s,a){for(let c=i;c<s;){let i=c,f=r[c],p=mP(e,n[c]);for(c++;c<s;c++){let t=mP(e,n[c]);if(p+t>=u)break;p+=t}if(c==i+1){if(p>u){let e=n[i];t(e.children,e.positions,0,e.children.length,r[i]+a);continue}h.push(n[i])}else{let t=r[c-1]+n[c-1].length-f;h.push(mR(e,n,r,i,c,f,t,null,l))}d.push(f+a-o)}}(t,n,r,i,0),(a||l)(h,d,s)}class mI{constructor(){this.map=new WeakMap}setBuffer(e,t,n){let r=this.map.get(e);r||this.map.set(e,r=new Map),r.set(t,n)}getBuffer(e,t){let n=this.map.get(e);return n&&n.get(t)}set(e,t){e instanceof mE?this.setBuffer(e.context.buffer,e.index,t):e instanceof mS&&this.map.set(e.tree,t)}get(e){return e instanceof mE?this.getBuffer(e.context.buffer,e.index):e instanceof mS?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class mz{constructor(e,t,n,r,i=!1,o=!1){this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=+!!i|2*!!o}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],n=!1){let r=[new mz(0,e.length,e,0,!1,n)];for(let n of t)n.to>e.length&&r.push(n);return r}static applyChanges(e,t,n=128){if(!t.length)return e;let r=[],i=1,o=e.length?e[0]:null;for(let s=0,a=0,l=0;;s++){let c=s<t.length?t[s]:null,u=c?c.fromA:1e9;if(u-a>=n)for(;o&&o.from<u;){let t=o;if(a>=t.from||u<=t.to||l){let e=Math.max(t.from,a)-l,n=Math.min(t.to,u)-l;t=e>=n?null:new mz(e,n,t.tree,t.offset+l,s>0,!!c)}if(t&&r.push(t),o.to>u)break;o=i<e.length?e[i++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return r}}let mL=class{startParse(e,t,n){return"string"==typeof e&&(e=new mq(e)),n=n?n.length?n.map(e=>new mu(e.from,e.to)):[new mu(0,0)]:[new mu(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let e=r.advance();if(e)return e}}};class mq{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new mh({perNode:!0});let m$=0;class mB{constructor(e,t,n,r){this.name=e,this.set=t,this.base=n,this.modified=r,this.id=m$++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){if(e instanceof mB&&(t=e),null!=t&&t.base)throw Error("Can not derive from a modified tag");let n=new mB("string"==typeof e?e:"?",[],null,[]);if(n.set.push(n),t)for(let e of t.set)n.set.push(e);return n}static defineModifier(e){let t=new mQ(e);return e=>e.modified.indexOf(t)>-1?e:mQ.get(e.base||e,e.modified.concat(t).sort((e,t)=>e.id-t.id))}}let mF=0;class mQ{constructor(e){this.name=e,this.instances=[],this.id=mF++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(n=>{var r,i;return n.base==e&&(r=t,i=n.modified,r.length==i.length&&r.every((e,t)=>e==i[t]))});if(n)return n;let r=[],i=new mB(e.name,r,e,t);for(let e of t)e.instances.push(i);let o=function(e){let t=[[]];for(let n=0;n<e.length;n++)for(let r=0,i=t.length;r<i;r++)t.push(t[r].concat(e[n]));return t.sort((e,t)=>t.length-e.length)}(t);for(let t of e.set)if(!t.modified.length)for(let e of o)r.push(mQ.get(t,e));return i}}function mV(e){let t=Object.create(null);for(let n in e){let r=e[n];for(let e of(Array.isArray(r)||(r=[r]),n.split(" ")))if(e){let n=[],i=2,o=e;for(let t=0;;){if("..."==o&&t>0&&t+3==e.length){i=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!r)throw RangeError("Invalid path: "+e);if(n.push("*"==r[0]?"":'"'==r[0][0]?JSON.parse(r[0]):r[0]),(t+=r[0].length)==e.length)break;let s=e[t++];if(t==e.length&&"!"==s){i=0;break}if("/"!=s)throw RangeError("Invalid path: "+e);o=e.slice(t)}let s=n.length-1,a=n[s];if(!a)throw RangeError("Invalid path: "+e);let l=new mU(r,i,s>0?n.slice(0,s):null);t[a]=l.sort(t[a])}}return mH.add(t)}let mH=new mh,mU=class{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};function mW(e,t){let n=Object.create(null);for(let t of e)if(Array.isArray(t.tag))for(let e of t.tag)n[e.id]=t.class;else n[t.tag.id]=t.class;let{scope:r,all:i=null}=t||{};return{style:e=>{let t=i;for(let r of e)for(let e of r.set){let r=n[e.id];if(r){t=t?t+" "+r:r;break}}return t},scope:r}}mU.empty=new mU([],2,null);class mG{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,r,i){let{type:o,from:s,to:a}=e;if(s>=n||a<=t)return;o.isTop&&(i=this.highlighters.filter(e=>!e.scope||e.scope(o)));let l=r,c=function(e){let t=e.type.prop(mH);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}(e)||mU.empty,u=function(e,t){let n=null;for(let r of e){let e=r.style(t);e&&(n=n?n+" "+e:e)}return n}(i,c.tags);if(u&&(l&&(l+=" "),l+=u,1==c.mode&&(r+=(r?" ":"")+u)),this.startSpan(Math.max(t,s),l),c.opaque)return;let h=e.tree&&e.tree.prop(mh.mounted);if(h&&h.overlay){let o=e.node.enter(h.overlay[0].from+s,1),c=this.highlighters.filter(e=>!e.scope||e.scope(h.tree.type)),u=e.firstChild();for(let d=0,f=s;;d++){let p=d<h.overlay.length?h.overlay[d]:null,m=p?p.from+s:a,g=Math.max(t,f),y=Math.min(n,m);if(g<y&&u)for(;e.from<y&&(this.highlightRange(e,g,y,r,i),this.startSpan(Math.min(y,e.to),l),!(e.to>=m||!e.nextSibling())););if(!p||m>n)break;(f=p.to+s)>t&&(this.highlightRange(o.cursor(),Math.max(t,p.from+s),Math.min(n,f),"",c),this.startSpan(Math.min(n,f),l))}u&&e.parent()}else if(e.firstChild()){h&&(r="");do if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,r,i),this.startSpan(Math.min(n,e.to),l)}while(e.nextSibling());e.parent()}}}let mX=mB.define,mY=mX(),mZ=mX(),mK=mX(mZ),mJ=mX(mZ),m0=mX(),m1=mX(m0),m2=mX(m0),m4=mX(),m5=mX(m4),m3=mX(),m6=mX(),m7=mX(),m8=mX(m7),m9=mX(),ge={comment:mY,lineComment:mX(mY),blockComment:mX(mY),docComment:mX(mY),name:mZ,variableName:mX(mZ),typeName:mK,tagName:mX(mK),propertyName:mJ,attributeName:mX(mJ),className:mX(mZ),labelName:mX(mZ),namespace:mX(mZ),macroName:mX(mZ),literal:m0,string:m1,docString:mX(m1),character:mX(m1),attributeValue:mX(m1),number:m2,integer:mX(m2),float:mX(m2),bool:mX(m0),regexp:mX(m0),escape:mX(m0),color:mX(m0),url:mX(m0),keyword:m3,self:mX(m3),null:mX(m3),atom:mX(m3),unit:mX(m3),modifier:mX(m3),operatorKeyword:mX(m3),controlKeyword:mX(m3),definitionKeyword:mX(m3),moduleKeyword:mX(m3),operator:m6,derefOperator:mX(m6),arithmeticOperator:mX(m6),logicOperator:mX(m6),bitwiseOperator:mX(m6),compareOperator:mX(m6),updateOperator:mX(m6),definitionOperator:mX(m6),typeOperator:mX(m6),controlOperator:mX(m6),punctuation:m7,separator:mX(m7),bracket:m8,angleBracket:mX(m8),squareBracket:mX(m8),paren:mX(m8),brace:mX(m8),content:m4,heading:m5,heading1:mX(m5),heading2:mX(m5),heading3:mX(m5),heading4:mX(m5),heading5:mX(m5),heading6:mX(m5),contentSeparator:mX(m4),list:mX(m4),quote:mX(m4),emphasis:mX(m4),strong:mX(m4),link:mX(m4),monospace:mX(m4),strikethrough:mX(m4),inserted:mX(),deleted:mX(),changed:mX(),invalid:mX(),meta:m9,documentMeta:mX(m9),annotation:mX(m9),processingInstruction:mX(m9),definition:mB.defineModifier("definition"),constant:mB.defineModifier("constant"),function:mB.defineModifier("function"),standard:mB.defineModifier("standard"),local:mB.defineModifier("local"),special:mB.defineModifier("special")};for(let e in ge){let t=ge[e];t instanceof mB&&(t.name=e)}mW([{tag:ge.link,class:"tok-link"},{tag:ge.heading,class:"tok-heading"},{tag:ge.emphasis,class:"tok-emphasis"},{tag:ge.strong,class:"tok-strong"},{tag:ge.keyword,class:"tok-keyword"},{tag:ge.atom,class:"tok-atom"},{tag:ge.bool,class:"tok-bool"},{tag:ge.url,class:"tok-url"},{tag:ge.labelName,class:"tok-labelName"},{tag:ge.inserted,class:"tok-inserted"},{tag:ge.deleted,class:"tok-deleted"},{tag:ge.literal,class:"tok-literal"},{tag:ge.string,class:"tok-string"},{tag:ge.number,class:"tok-number"},{tag:[ge.regexp,ge.escape,ge.special(ge.string)],class:"tok-string2"},{tag:ge.variableName,class:"tok-variableName"},{tag:ge.local(ge.variableName),class:"tok-variableName tok-local"},{tag:ge.definition(ge.variableName),class:"tok-variableName tok-definition"},{tag:ge.special(ge.variableName),class:"tok-variableName2"},{tag:ge.definition(ge.propertyName),class:"tok-propertyName tok-definition"},{tag:ge.typeName,class:"tok-typeName"},{tag:ge.namespace,class:"tok-namespace"},{tag:ge.className,class:"tok-className"},{tag:ge.macroName,class:"tok-macroName"},{tag:ge.propertyName,class:"tok-propertyName"},{tag:ge.operator,class:"tok-operator"},{tag:ge.comment,class:"tok-comment"},{tag:ge.meta,class:"tok-meta"},{tag:ge.invalid,class:"tok-invalid"},{tag:ge.punctuation,class:"tok-punctuation"}]);let gt=new mh,gn=new mh;class gr{constructor(e,t,n=[],r=""){this.data=e,this.name=r,tw.prototype.hasOwnProperty("tree")||Object.defineProperty(tw.prototype,"tree",{get(){return gs(this)}}),this.parser=t,this.extension=[gm.of(this),tw.languageData.of((e,t,n)=>{let r=gi(e,t,n),i=r.type.prop(gt);if(!i)return[];let o=e.facet(i),s=r.type.prop(gn);if(s){let i=r.resolve(t-r.from,n);for(let t of s)if(t.test(i,e)){let n=e.facet(t.facet);return"replace"==t.type?n:n.concat(o)}}return o})].concat(n)}isActiveAt(e,t,n=-1){return gi(e,t,n).type.prop(gt)==this.data}findRegions(e){let t=e.facet(gm);if((null==t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(e,t)=>{if(e.prop(gt)==this.data){n.push({from:t,to:t+e.length});return}let i=e.prop(mh.mounted);if(i){if(i.tree.prop(gt)==this.data){if(i.overlay)for(let e of i.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(i.overlay){let e=n.length;if(r(i.tree,i.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let i=e.children[n];i instanceof mb&&r(i,e.positions[n]+t)}};return r(gs(e),0),n}get allowsNesting(){return!0}}function gi(e,t,n){let r=e.facet(gm),i=gs(e).topNode;if(!r||r.allowsNesting)for(let e=i;e;e=e.enter(t,n,p.ExcludeBuffers))e.type.isTop&&(i=e);return i}gr.setState=tf.define();class go extends gr{constructor(e,t,n){super(e,t,[],n),this.parser=t}static define(e){var t;let n=(t=e.languageData,eZ.define({combine:t?e=>e.concat(t):void 0}));return new go(n,e.parser.configure({props:[gt.add(e=>e.isTop?n:void 0)]}),e.name)}configure(e,t){return new go(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function gs(e){let t=e.field(gr.state,!1);return t?t.tree:mb.empty}class ga{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let gl=null,gc=class e{constructor(e,t,n=[],r,i,o,s,a){this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=i,this.viewport=o,this.skipped=s,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(t,n,r){return new e(t,n,[],mb.empty,0,r,[],null)}startParse(){return this.parser.startParse(new ga(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=mb.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r){if(this.fragments=this.withoutTempSkipped(mz.addTree(r,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=r,this.parse=null,!(this.treeLen<(t??this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(mz.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=gl;gl=this;try{return e()}finally{gl=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=gu(e,t.from,t.to);return e}changes(t,n){let{fragments:r,tree:i,treeLen:o,viewport:s,skipped:a}=this;if(this.takeTree(),!t.empty){let e=[];if(t.iterChangedRanges((t,n,r,i)=>e.push({fromA:t,toA:n,fromB:r,toB:i})),r=mz.applyChanges(r,e),i=mb.empty,o=0,s={from:t.mapPos(s.from,-1),to:t.mapPos(s.to,1)},this.skipped.length)for(let e of(a=[],this.skipped)){let n=t.mapPos(e.from,1),r=t.mapPos(e.to,-1);n<r&&a.push({from:n,to:r})}}return new e(this.parser,n,r,i,o,s,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let t=0;t<this.skipped.length;t++){let{from:n,to:r}=this.skipped[t];n<e.to&&r>e.from&&(this.fragments=gu(this.fragments,n,r),this.skipped.splice(t--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends mL{createParse(t,n,r){let i=r[0].from,o=r[r.length-1].to;return{parsedPos:i,advance(){let t=gl;if(t){for(let e of r)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=o,new mb(mp.none,[],[],o-i)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return gl}};function gu(e,t,n){return mz.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class gh{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new gh(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=gc.create(e.facet(gm).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new gh(n)}}gr.state=e4.define({create:gh.init,update(e,t){for(let e of t.effects)if(e.is(gr.setState))return e.value;return t.startState.facet(gm)!=t.state.facet(gm)?gh.init(t.state):e.apply(t)}});let gd=e=>{let t=setTimeout(()=>e(),500);return()=>clearTimeout(t)};"u">typeof requestIdleCallback&&(gd=e=>{let t=-1,n=setTimeout(()=>{t=requestIdleCallback(e,{timeout:400})},100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});let gf="u">typeof navigator&&null!==(m=navigator.scheduling)&&void 0!==m&&m.isInputPending?()=>navigator.scheduling.isInputPending():null,gp=dp.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(gr.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(gr.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=gd(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,i=n.field(gr.state);if(i.tree==i.context.tree&&i.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!gf?Math.max(25,e.timeRemaining()-5):1e9),s=i.context.treeLen<r&&n.doc.length>r+1e3,a=i.context.work(()=>gf&&gf()||Date.now()>o,r+1e5*!s);this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:gr.setState.of(new gh(i.context))})),this.chunkBudget>0&&!(a&&!s)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(e=>du(this.view.state,e)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),gm=eZ.define({combine:e=>e.length?e[0]:null,enables:e=>[gr.state,gp,fW.contentAttributes.compute([e],t=>{let n=t.facet(e);return n&&n.name?{"data-language":n.name}:{}})]});class gg{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}let gy=eZ.define(),gb=eZ.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some(e=>e!=t[0]))throw Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function gv(e){let t=e.facet(gb);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function gx(e,t){let n="",r=e.tabSize,i=e.facet(gb)[0];if("	"==i){for(;t>=r;)n+="	",t-=r;i=" "}for(let e=0;e<t;e++)n+=i;return n}function gw(e,t){for(let n of(e instanceof tw&&(e=new gk(e)),e.state.facet(gy))){let r=n(e,t);if(void 0!==r)return r}let n=gs(e.state);return n.length>=t?function(e,t,n){let r=t.resolveStack(n),i=t.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let e=[];for(let t=i;t&&(t.from!=r.node.from||t.type!=r.node.type);t=t.parent)e.push(t);for(let t=e.length-1;t>=0;t--)r={node:e[t],next:r}}return gS(r,e,n)}(e,n,t):null}class gk{constructor(e,t={}){this.state=e,this.options=t,this.unit=gv(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:i}=this.options;return null!=r&&r>=n.from&&r<=n.to?i&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(e,t);return n.slice(e-r,Math.min(n.length,e+100-r))}column(e,t=1){let{text:n,from:r}=this.lineAt(e,t),i=this.countColumn(n,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(i+=o-this.countColumn(n,n.search(/\S|$/))),i}countColumn(e,t=e.length){return tq(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:r}=this.lineAt(e,t),i=this.options.overrideIndentation;if(i){let e=i(r);if(e>-1)return e}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}let gO=new mh;function gS(e,t,n){for(let r=e;r;r=r.next){let e=function(e){let t=e.type.prop(gO);if(t)return t;let n=e.firstChild,r;if(n&&(r=n.type.prop(mh.closedBy))){let t=e.lastChild,n=t&&r.indexOf(t.name)>-1;return e=>gE(e,!0,1,void 0,n&&!(e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak)?t.from:void 0)}return null==e.parent?gC:null}(r.node);if(e)return e(gT.create(t,n,r))}return 0}function gC(){return 0}class gT extends gk{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.context=n}get node(){return this.context.node}static create(e,t,n){return new gT(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(function(e,t){for(let n=t;n;n=n.parent)if(e==n)return!0;return!1}(n,e))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){return gS(this.context.next,this.base,this.pos)}}function gA({closing:e,align:t=!0,units:n=1}){return r=>gE(r,t,n,e)}function gE(e,t,n,r,i){let o=e.textAfter,s=o.match(/^\s*/)[0].length,a=r&&o.slice(s,s+r.length)==r||i==e.pos+s,l=t?function(e){let t=e.node,n=t.childAfter(t.from),r=t.lastChild;if(!n)return null;let i=e.options.simulateBreak,o=e.state.doc.lineAt(n.from),s=null==i||i<=o.from?o.to:Math.min(o.to,i);for(let e=n.to;;){let i=t.childAfter(e);if(!i||i==r)return null;if(!i.type.isSkipped){if(i.from>=s)return null;let e=/^ */.exec(o.text.slice(n.to-o.from))[0].length;return{from:n.from,to:n.to+e}}e=i.to}}(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*n)}let gM=eZ.define(),gN=new mh;function g_(e,t,n){for(let r of e.facet(gM)){let i=r(e,t,n);if(i)return i}return function(e,t,n){let r=gs(e);if(r.length<n)return null;let i=r.resolveStack(n,1),o=null;for(let s=i;s;s=s.next){let i=s.node;if(i.to<=n||i.from>n)continue;if(o&&i.from<t)break;let a=i.type.prop(gN);if(a&&(i.to<r.length-50||r.length==e.doc.length||!function(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}(i))){let r=a(i,e);r&&r.from<=n&&r.from>=t&&r.to>n&&(o=r)}}return o}(e,t,n)}function gj(e,t){let n=t.mapPos(e.from,1),r=t.mapPos(e.to,-1);return n>=r?void 0:{from:n,to:r}}let gD=tf.define({map:gj}),gP=tf.define({map:gj});function gR(e){let t=[];for(let{head:n}of e.state.selection.ranges)t.some(e=>e.from<=n&&e.to>=n)||t.push(e.lineBlockAt(n));return t}let gI=e4.define({create:()=>hj.none,update(e,t){for(let n of(e=e.map(t.changes),t.effects))if(n.is(gD)&&!function(e,t,n){let r=!1;return e.between(t,t,(e,i)=>{e==t&&i==n&&(r=!0)}),r}(e,n.value.from,n.value.to)){let{preparePlaceholder:r}=t.state.facet(gF),i=r?hj.replace({widget:new gH(r(t.state,n.value))}):gV;e=e.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(gP)&&(e=e.update({filter:(e,t)=>n.value.from!=e||n.value.to!=t,filterFrom:n.value.from,filterTo:n.value.to}));if(t.selection){let n=!1,{head:r}=t.selection.main;e.between(r,r,(e,t)=>{e<r&&t>r&&(n=!0)}),n&&(e=e.update({filterFrom:r,filterTo:r,filter:(e,t)=>t<=r||e>=r}))}return e},provide:e=>fW.decorations.from(e),toJSON(e,t){let n=[];return e.between(0,t.doc.length,(e,t)=>{n.push(e,t)}),n},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw RangeError("Invalid JSON for fold state");let t=[];for(let n=0;n<e.length;){let r=e[n++],i=e[n++];if("number"!=typeof r||"number"!=typeof i)throw RangeError("Invalid JSON for fold state");t.push(gV.range(r,i))}return hj.set(t,!0)}});function gz(e,t,n){var r;let i=null;return null===(r=e.field(gI,!1))||void 0===r||r.between(t,n,(e,t)=>{(!i||i.from>e)&&(i={from:e,to:t})}),i}function gL(e,t){var n;return e.field(gI,!1)?t:t.concat(tf.appendConfig.of([gI,gG]))}function gq(e,t,n=!0){let r=e.state.doc.lineAt(t.from).number,i=e.state.doc.lineAt(t.to).number;return fW.announce.of(`${e.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${e.state.phrase("to")} ${i}.`)}let g$=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:e=>{for(let t of gR(e)){let n=g_(e.state,t.from,t.to);if(n)return e.dispatch({effects:gL(e.state,[gD.of(n),gq(e,n)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:e=>{if(!e.state.field(gI,!1))return!1;let t=[];for(let n of gR(e)){let r=gz(e.state,n.from,n.to);r&&t.push(gP.of(r),gq(e,r,!1))}return t.length&&e.dispatch({effects:t}),t.length>0}},{key:"Ctrl-Alt-[",run:e=>{let{state:t}=e,n=[];for(let r=0;r<t.doc.length;){let i=e.lineBlockAt(r),o=g_(t,i.from,i.to);o&&n.push(gD.of(o)),r=(o?e.lineBlockAt(o.to):i).to+1}return n.length&&e.dispatch({effects:gL(e.state,n)}),!!n.length}},{key:"Ctrl-Alt-]",run:e=>{let t=e.state.field(gI,!1);if(!t||!t.size)return!1;let n=[];return t.between(0,e.state.doc.length,(e,t)=>{n.push(gP.of({from:e,to:t}))}),e.dispatch({effects:n}),!0}}],gB={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},gF=eZ.define({combine:e=>tk(e,gB)});function gQ(e,t){let{state:n}=e,r=n.facet(gF),i=t=>{let n=e.lineBlockAt(e.posAtDOM(t.target)),r=gz(e.state,n.from,n.to);r&&e.dispatch({effects:gP.of(r)}),t.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(e,i,t);let o=document.createElement("span");return o.textContent=r.placeholderText,o.setAttribute("aria-label",n.phrase("folded code")),o.title=n.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=i,o}let gV=hj.replace({widget:new class extends hN{toDOM(e){return gQ(e,null)}}});class gH extends hN{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return gQ(e,this.value)}}let gU={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class gW extends pK{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}let gG=fW.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class gX{constructor(e,t){let n;function r(e){let t=uR.newName();return(n||(n=Object.create(null)))["."+t]=e,t}this.specs=e;let i="string"==typeof t.all?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof gr?e=>e.prop(gt)==o.data:o?e=>e==o:void 0,this.style=mW(e.map(e=>({tag:e.tag,class:e.class||r(Object.assign({},e,{tag:null}))})),{all:i}).style,this.module=n?new uR(n):null,this.themeType=t.themeType}static define(e,t){return new gX(e,t||{})}}let gY=eZ.define(),gZ=eZ.define({combine:e=>e.length?[e[0]]:null});function gK(e){let t=e.facet(gY);return t.length?t:e.facet(gZ)}function gJ(e,t){let n=[g1],r;return e instanceof gX&&(e.module&&n.push(fW.styleModule.of(e.module)),r=e.themeType),null!=t&&t.fallback?n.push(gZ.of(e)):r?n.push(gY.computeN([fW.darkTheme],t=>t.facet(fW.darkTheme)==("dark"==r)?[e]:[])):n.push(gY.of(e)),n}class g0{constructor(e){this.markCache=Object.create(null),this.tree=gs(e.state),this.decorations=this.buildDeco(e,gK(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=gs(e.state),n=gK(e.state),r=n!=gK(e.startState),{viewport:i}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<i.to&&!r&&t.type==this.tree.type&&o>=i.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=i.to)}buildDeco(e,t){if(!t||!this.tree.length)return hj.none;let n=new tE;for(let{from:r,to:i}of e.visibleRanges)!function(e,t,n,r=0,i=e.length){let o=new mG(r,Array.isArray(t)?t:[t],n);o.highlightRange(e.cursor(),r,i,"",o.highlighters),o.flush(i)}(this.tree,t,(e,t,r)=>{n.add(e,t,this.markCache[r]||(this.markCache[r]=hj.mark({class:r})))},r,i);return n.finish()}}let g1=e6.high(dp.fromClass(g0,{decorations:e=>e.decorations})),g2=gX.define([{tag:ge.meta,color:"#404740"},{tag:ge.link,textDecoration:"underline"},{tag:ge.heading,textDecoration:"underline",fontWeight:"bold"},{tag:ge.emphasis,fontStyle:"italic"},{tag:ge.strong,fontWeight:"bold"},{tag:ge.strikethrough,textDecoration:"line-through"},{tag:ge.keyword,color:"#708"},{tag:[ge.atom,ge.bool,ge.url,ge.contentSeparator,ge.labelName],color:"#219"},{tag:[ge.literal,ge.inserted],color:"#164"},{tag:[ge.string,ge.deleted],color:"#a11"},{tag:[ge.regexp,ge.escape,ge.special(ge.string)],color:"#e40"},{tag:ge.definition(ge.variableName),color:"#00f"},{tag:ge.local(ge.variableName),color:"#30a"},{tag:[ge.typeName,ge.namespace],color:"#085"},{tag:ge.className,color:"#167"},{tag:[ge.special(ge.variableName),ge.macroName],color:"#256"},{tag:ge.definition(ge.propertyName),color:"#00c"},{tag:ge.comment,color:"#940"},{tag:ge.invalid,color:"#f00"}]),g4=fW.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),g5="()[]{}",g3=eZ.define({combine:e=>tk(e,{afterCursor:!0,brackets:g5,maxScanDistance:1e4,renderMatch:g8})}),g6=hj.mark({class:"cm-matchingBracket"}),g7=hj.mark({class:"cm-nonmatchingBracket"});function g8(e){let t=[],n=e.matched?g6:g7;return t.push(n.range(e.start.from,e.start.to)),e.end&&t.push(n.range(e.end.from,e.end.to)),t}let g9=[e4.define({create:()=>hj.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let n=[],r=t.state.facet(g3);for(let e of t.state.selection.ranges){if(!e.empty)continue;let i=yr(t.state,e.head,-1,r)||e.head>0&&yr(t.state,e.head-1,1,r)||r.afterCursor&&(yr(t.state,e.head,1,r)||e.head<t.state.doc.length&&yr(t.state,e.head+1,-1,r));i&&(n=n.concat(r.renderMatch(i,t.state)))}return hj.set(n,!0)},provide:e=>fW.decorations.from(e)}),g4],ye=new mh;function yt(e,t,n){let r=e.prop(t<0?mh.openedBy:mh.closedBy);if(r)return r;if(1==e.name.length){let r=n.indexOf(e.name);if(r>-1&&r%2==+(t<0))return[n[r+t]]}return null}function yn(e){let t=e.type.prop(ye);return t?t(e.node):e}function yr(e,t,n,r={}){let i=r.maxScanDistance||1e4,o=r.brackets||g5,s=gs(e),a=s.resolveInner(t,n);for(let e=a;e;e=e.parent){let r=yt(e.type,n,o);if(r&&e.from<e.to){let i=yn(e);if(i&&(n>0?t>=i.from&&t<i.to:t>i.from&&t<=i.to))return function(e,t,n,r,i,o,s){let a=r.parent,l={from:i.from,to:i.to},c=0,u=null==a?void 0:a.cursor();if(u&&(n<0?u.childBefore(r.from):u.childAfter(r.to)))do if(n<0?u.to<=r.from:u.from>=r.to){if(0==c&&o.indexOf(u.type.name)>-1&&u.from<u.to){let e=yn(u);return{start:l,end:e?{from:e.from,to:e.to}:void 0,matched:!0}}if(yt(u.type,n,s))c++;else if(yt(u.type,-n,s)){if(0==c){let e=yn(u);return{start:l,end:e&&e.from<e.to?{from:e.from,to:e.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}(0,0,n,e,i,r,o)}}return function(e,t,n,r,i,o,s){let a=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=s.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?t-1:t,to:n>0?t+1:t},u=e.doc.iterRange(t,n>0?e.doc.length:0),h=0;for(let e=0;!u.next().done&&e<=o;){let o=u.value;n<0&&(e+=o.length);let a=t+e*n;for(let e=n>0?0:o.length-1,t=n>0?o.length:-1;e!=t;e+=n){let t=s.indexOf(o[e]);if(!(t<0||r.resolveInner(a+e,1).type!=i)){if(t%2==0==n>0)h++;else{if(1==h)return{start:c,end:{from:a+e,to:a+e+1},matched:t>>1==l>>1};h--}}}n>0&&(e+=o.length)}return u.done?{start:c,matched:!1}:null}(e,t,n,s,a.type,i,o)}let yi=Object.create(null),yo=[mp.none],ys=[],ya=Object.create(null),yl=Object.create(null);for(let[e,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])yl[e]=function(e,t){let n=[];for(let r of t.split(" ")){let t=[];for(let n of r.split(".")){let r=e[n]||ge[n];r?"function"==typeof r?t.length?t=t.map(r):yc(n,`Modifier ${n} used at start of tag`):t.length?yc(n,`Tag ${n} used as modifier`):t=Array.isArray(r)?r:[r]:yc(n,`Unknown highlighting tag ${n}`)}for(let e of t)n.push(e)}if(!n.length)return 0;let r=t.replace(/ /g,"_"),i=r+" "+n.map(e=>e.id),o=ya[i];if(o)return o.id;let s=ya[i]=mp.define({id:yo.length,name:r,props:[mV({[r]:n})]});return yo.push(s),s.id}(yi,t);function yc(e,t){ys.indexOf(e)>-1||(ys.push(e),console.warn(t))}function yu(e,t){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=e(t,n);return!!i&&(r(n.update(i)),!0)}}hV.RTL,hV.LTR;let yh=yu(function(e,t,n=t.selection.ranges){let r=[],i=-1;for(let{from:e,to:o}of n){let n=r.length,s=1e9,a=yp(t,e).line;if(a){for(let n=e;n<=o;){let l=t.doc.lineAt(n);if(l.from>i&&(e==o||o>l.from)){i=l.from;let e=/^\s*/.exec(l.text)[0].length,t=e==l.length,n=l.text.slice(e,e+a.length)==a?e:-1;e<l.text.length&&e<s&&(s=e),r.push({line:l,comment:n,token:a,indent:e,empty:t,single:!1})}n=l.to+1}if(s<1e9)for(let e=n;e<r.length;e++)r[e].indent<r[e].line.text.length&&(r[e].indent=s);r.length==n+1&&(r[n].single=!0)}}if(2!=e&&r.some(e=>e.comment<0&&(!e.empty||e.single))){let e=[];for(let{line:t,token:n,indent:i,empty:o,single:s}of r)(s||!o)&&e.push({from:t.from+i,insert:n+" "});let n=t.changes(e);return{changes:n,selection:t.selection.map(n,1)}}if(1!=e&&r.some(e=>e.comment>=0)){let e=[];for(let{line:t,comment:n,token:i}of r)if(n>=0){let r=t.from+n,o=r+i.length;" "==t.text[o-t.from]&&o++,e.push({from:r,to:o})}return{changes:e}}return null},0),yd=yu(ym,0),yf=yu((e,t)=>ym(e,t,function(e){let t=[];for(let n of e.selection.ranges){let r=e.doc.lineAt(n.from),i=n.to<=r.to?r:e.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:e.doc.lineAt(n.to-1));let o=t.length-1;o>=0&&t[o].to>r.from?t[o].to=i.to:t.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return t}(t)),0);function yp(e,t){let n=e.languageDataAt("commentTokens",t);return n.length?n[0]:{}}function ym(e,t,n=t.selection.ranges){let r=n.map(e=>yp(t,e.from).block);if(!r.every(e=>e))return null;let i=n.map((e,n)=>(function(e,{open:t,close:n},r,i){let o,s,a=e.sliceDoc(r-50,r),l=e.sliceDoc(i,i+50),c=/\s*$/.exec(a)[0].length,u=/^\s*/.exec(l)[0].length,h=a.length-c;if(a.slice(h-t.length,h)==t&&l.slice(u,u+n.length)==n)return{open:{pos:r-c,margin:c&&1},close:{pos:i+u,margin:u&&1}};i-r<=100?o=s=e.sliceDoc(r,i):(o=e.sliceDoc(r,r+50),s=e.sliceDoc(i-50,i));let d=/^\s*/.exec(o)[0].length,f=/\s*$/.exec(s)[0].length,p=s.length-f-n.length;return o.slice(d,d+t.length)==t&&s.slice(p,p+n.length)==n?{open:{pos:r+d+t.length,margin:+!!/\s/.test(o.charAt(d+t.length))},close:{pos:i-f-n.length,margin:+!!/\s/.test(s.charAt(p-1))}}:null})(t,r[n],e.from,e.to));if(2!=e&&!i.every(e=>e))return{changes:t.changes(n.map((e,t)=>i[t]?[]:[{from:e.from,insert:r[t].open+" "},{from:e.to,insert:" "+r[t].close}]))};if(1!=e&&i.some(e=>e)){let e=[];for(let t=0,n;t<i.length;t++)if(n=i[t]){let i=r[t],{open:o,close:s}=n;e.push({from:o.pos-i.open.length,to:o.pos+o.margin},{from:s.pos-s.margin,to:s.pos+i.close.length})}return{changes:e}}return null}let yg=tu.define(),yy=tu.define(),yb=eZ.define(),yv=eZ.define({combine:e=>tk(e,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(n,r)=>e(n,r)||t(n,r)})}),yx=e4.define({create:()=>yD.empty,update(e,t){let n=t.state.facet(yv),r=t.annotation(yg);if(r){let i=yT.fromTransaction(t,r.selection),o=r.side,s=0==o?e.undone:e.done;return s=i?yA(s,s.length,n.minDepth,i):yN(s,t.startState.selection),new yD(0==o?r.rest:s,0==o?s:r.rest)}let i=t.annotation(yy);if(("full"==i||"before"==i)&&(e=e.isolate()),!1===t.annotation(tp.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let o=yT.fromTransaction(t),s=t.annotation(tp.time),a=t.annotation(tp.userEvent);return o?e=e.addChanges(o,s,a,n,t):t.selection&&(e=e.addSelection(t.startState.selection,s,a,n.newGroupDelay)),("full"==i||"after"==i)&&(e=e.isolate()),e},toJSON:e=>({done:e.done.map(e=>e.toJSON()),undone:e.undone.map(e=>e.toJSON())}),fromJSON:e=>new yD(e.done.map(yT.fromJSON),e.undone.map(yT.fromJSON))});function yw(e,t){return function({state:n,dispatch:r}){if(!t&&n.readOnly)return!1;let i=n.field(yx,!1);if(!i)return!1;let o=i.pop(e,n,t);return!!o&&(r(o),!0)}}let yk=yw(0,!1),yO=yw(1,!1),yS=yw(0,!0),yC=yw(1,!0);class yT{constructor(e,t,n,r,i){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=r,this.selectionsAfter=i}setSelAfter(e){return new yT(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(e=>e.toJSON())}}static fromJSON(e){return new yT(e.changes&&e$.fromJSON(e.changes),[],e.mapped&&eq.fromJSON(e.mapped),e.startSelection&&eG.fromJSON(e.startSelection),e.selectionsAfter.map(eG.fromJSON))}static fromTransaction(e,t){let n=yM;for(let t of e.startState.facet(yb)){let r=t(e);r.length&&(n=n.concat(r))}return!n.length&&e.changes.empty?null:new yT(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,yM)}static selection(e){return new yT(void 0,yM,void 0,void 0,e)}}function yA(e,t,n,r){let i=e.slice(t+1>n+20?t-n-1:0,t);return i.push(r),i}function yE(e,t){return e.length?t.length?e.concat(t):e:t}let yM=[];function yN(e,t){if(!e.length)return[yT.selection([t])];{let n=e[e.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-200));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),yA(e,e.length-1,1e9,n.setSelAfter(r)))}}function y_(e,t){if(!e.length)return e;let n=e.length,r=yM;for(;n;){let i=function(e,t,n){let r=yE(e.selectionsAfter.length?e.selectionsAfter.map(e=>e.map(t)):yM,n);if(!e.changes)return yT.selection(r);let i=e.changes.map(t),o=t.mapDesc(e.changes,!0),s=e.mapped?e.mapped.composeDesc(o):o;return new yT(i,tf.mapEffects(e.effects,t),s,e.startSelection.map(o),r)}(e[n-1],t,r);if(i.changes&&!i.changes.empty||i.effects.length){let t=e.slice(0,n);return t[n-1]=i,t}t=i.mapped,n--,r=i.selectionsAfter}return r.length?[yT.selection(r)]:yM}let yj=/^(input\.type|delete)($|\.)/,yD=class e{constructor(e,t,n=0,r){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new e(this.done,this.undone):this}addChanges(t,n,r,i,o){var s,a;let l,c,u=this.done,h=u[u.length-1];return new e(u=h&&h.changes&&!h.changes.empty&&t.changes&&(!r||yj.test(r))&&(!h.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(o,(s=h.changes,a=t.changes,l=[],c=!1,s.iterChangedRanges((e,t)=>l.push(e,t)),a.iterChangedRanges((e,t,n,r)=>{for(let e=0;e<l.length;){let t=l[e++],i=l[e++];r>=t&&n<=i&&(c=!0)}}),c))||"input.type.compose"==r)?yA(u,u.length-1,i.minDepth,new yT(t.changes.compose(h.changes),yE(tf.mapEffects(t.effects,h.changes),h.effects),h.mapped,h.startSelection,yM)):yA(u,u.length,i.minDepth,t),yM,n,r)}addSelection(t,n,r,i){var o;let s=this.done.length?this.done[this.done.length-1].selectionsAfter:yM;return s.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&(o=s[s.length-1]).ranges.length==t.ranges.length&&0===o.ranges.filter((e,n)=>e.empty!=t.ranges[n].empty).length?this:new e(yN(this.done,t),this.undone,n,r)}addMapping(t){return new e(y_(this.done,t),y_(this.undone,t),this.prevTime,this.prevUserEvent)}pop(e,t,n){let r=0==e?this.done:this.undone;if(0==r.length)return null;let i=r[r.length-1],o=i.selectionsAfter[0]||t.selection;if(n&&i.selectionsAfter.length){let n,s;return t.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:yg.of({side:e,rest:(n=r[r.length-1],(s=r.slice())[r.length-1]=n.setSelAfter(n.selectionsAfter.slice(0,n.selectionsAfter.length-1)),s),selection:o}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0})}if(!i.changes)return null;{let n=1==r.length?yM:r.slice(0,r.length-1);return i.mapped&&(n=y_(n,i.mapped)),t.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:yg.of({side:e,rest:n,selection:o}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}}};yD.empty=new yD(yM,yM);let yP=[{key:"Mod-z",run:yk,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:yO,preventDefault:!0},{linux:"Ctrl-Shift-z",run:yO,preventDefault:!0},{key:"Mod-u",run:yS,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:yC,preventDefault:!0}];function yR(e,t){return eG.create(e.ranges.map(t),e.mainIndex)}function yI(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function yz({state:e,dispatch:t},n){let r=yR(e.selection,n);return!r.eq(e.selection,!0)&&(t(yI(e,r)),!0)}function yL(e,t){return eG.cursor(t?e.to:e.from)}function yq(e,t){return yz(e,n=>n.empty?e.moveByChar(n,t):yL(n,t))}function y$(e){return e.textDirectionAt(e.state.selection.main.head)==hV.LTR}let yB=e=>yq(e,!y$(e)),yF=e=>yq(e,y$(e));function yQ(e,t){return yz(e,n=>n.empty?e.moveByGroup(n,t):yL(n,t))}function yV(e,t,n){let r,i,o=gs(e).resolveInner(t.head),s=n?mh.closedBy:mh.openedBy;for(let r=t.head;;){let t=n?o.childAfter(r):o.childBefore(r);if(!t)break;!function(e,t,n){if(t.type.prop(n))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}(e,t,s)?r=n?t.to:t.from:o=t}return i=o.type.prop(s)&&(r=n?yr(e,o.from,1):yr(e,o.to,-1))&&r.matched?n?r.end.to:r.end.from:n?o.to:o.from,eG.cursor(i,n?-1:1)}function yH(e,t){return yz(e,n=>{if(!n.empty)return yL(n,t);let r=e.moveVertically(n,t);return r.head!=n.head?r:e.moveToLineBoundary(n,t)})}let yU=e=>yH(e,!1),yW=e=>yH(e,!0);function yG(e){let t=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,n=0,r=0,i;if(t){for(let t of e.state.facet(fW.scrollMargins)){let i=t(e);null!=i&&i.top&&(n=Math.max(null==i?void 0:i.top,n)),null!=i&&i.bottom&&(r=Math.max(null==i?void 0:i.bottom,r))}i=e.scrollDOM.clientHeight-n-r}else i=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:t,height:Math.max(e.defaultLineHeight,i-5)}}function yX(e,t){let n,r=yG(e),{state:i}=e,o=yR(i.selection,n=>n.empty?e.moveVertically(n,t,r.height):yL(n,t));if(o.eq(i.selection))return!1;if(r.selfScroll){let t=e.coordsAtPos(i.selection.main.head),s=e.scrollDOM.getBoundingClientRect(),a=s.top+r.marginTop,l=s.bottom-r.marginBottom;t&&t.top>a&&t.bottom<l&&(n=fW.scrollIntoView(o.main.head,{y:"start",yMargin:t.top-a}))}return e.dispatch(yI(i,o),{effects:n}),!0}let yY=e=>yX(e,!1),yZ=e=>yX(e,!0);function yK(e,t,n){let r=e.lineBlockAt(t.head),i=e.moveToLineBoundary(t,n);if(i.head==t.head&&i.head!=(n?r.to:r.from)&&(i=e.moveToLineBoundary(t,n,!1)),!n&&i.head==r.from&&r.length){let n=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;n&&t.head!=r.from+n&&(i=eG.cursor(r.from+n))}return i}function yJ(e,t){let n=yR(e.state.selection,e=>{let n=t(e);return eG.range(e.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)});return!n.eq(e.state.selection)&&(e.dispatch(yI(e.state,n)),!0)}function y0(e,t){return yJ(e,n=>e.moveByChar(n,t))}let y1=e=>y0(e,!y$(e)),y2=e=>y0(e,y$(e));function y4(e,t){return yJ(e,n=>e.moveByGroup(n,t))}function y5(e,t){return yJ(e,n=>e.moveVertically(n,t))}let y3=e=>y5(e,!1),y6=e=>y5(e,!0);function y7(e,t){return yJ(e,n=>e.moveVertically(n,t,yG(e).height))}let y8=e=>y7(e,!1),y9=e=>y7(e,!0),be=({state:e,dispatch:t})=>(t(yI(e,{anchor:0})),!0),bt=({state:e,dispatch:t})=>(t(yI(e,{anchor:e.doc.length})),!0),bn=({state:e,dispatch:t})=>(t(yI(e,{anchor:e.selection.main.anchor,head:0})),!0),br=({state:e,dispatch:t})=>(t(yI(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0);function bi(e,t){if(e.state.readOnly)return!1;let n="delete.selection",{state:r}=e,i=r.changeByRange(r=>{let{from:i,to:o}=r;if(i==o){let s=t(r);s<i?(n="delete.backward",s=bo(e,s,!1)):s>i&&(n="delete.forward",s=bo(e,s,!0)),i=Math.min(i,s),o=Math.max(o,s)}else i=bo(e,i,!1),o=bo(e,o,!0);return i==o?{range:r}:{changes:{from:i,to:o},range:eG.cursor(i,i<r.head?-1:1)}});return!i.changes.empty&&(e.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:"delete.selection"==n?fW.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function bo(e,t,n){if(e instanceof fW)for(let r of e.state.facet(fW.atomicRanges).map(t=>t(e)))r.between(t,t,(e,r)=>{e<t&&r>t&&(t=n?r:e)});return t}let bs=(e,t,n)=>bi(e,r=>{let i=r.from,{state:o}=e,s=o.doc.lineAt(i),a,l;if(n&&!t&&i>s.from&&i<s.from+200&&!/[^ \t]/.test(a=s.text.slice(0,i-s.from))){if("	"==a[a.length-1])return i-1;let e=tq(a,o.tabSize)%gv(o)||gv(o);for(let t=0;t<e&&" "==a[a.length-1-t];t++)i--;l=i}else(l=eD(s.text,i-s.from,t,t)+s.from)==i&&s.number!=(t?o.doc.lines:1)?l+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(s.text.slice(l-s.from,i-s.from))&&(l=eD(s.text,l-s.from,!1,!1)+s.from);return l}),ba=e=>bs(e,!1,!0),bl=e=>bs(e,!0,!1),bc=(e,t)=>bi(e,n=>{let r=n.head,{state:i}=e,o=i.doc.lineAt(r),s=i.charCategorizer(r);for(let e=null;;){if(r==(t?o.to:o.from)){r==n.head&&o.number!=(t?i.doc.lines:1)&&(r+=t?1:-1);break}let a=eD(o.text,r-o.from,t)+o.from,l=o.text.slice(Math.min(r,a)-o.from,Math.max(r,a)-o.from),c=s(l);if(null!=e&&c!=e)break;(" "!=l||r!=n.head)&&(e=c),r=a}return r}),bu=e=>bc(e,!1);function bh(e){let t=[],n=-1;for(let r of e.selection.ranges){let i=e.doc.lineAt(r.from),o=e.doc.lineAt(r.to);if(r.empty||r.to!=o.from||(o=e.doc.lineAt(r.to-1)),n>=i.number){let e=t[t.length-1];e.to=o.to,e.ranges.push(r)}else t.push({from:i.from,to:o.to,ranges:[r]});n=o.number+1}return t}function bd(e,t,n){if(e.readOnly)return!1;let r=[],i=[];for(let t of bh(e)){if(n?t.to==e.doc.length:0==t.from)continue;let o=e.doc.lineAt(n?t.to+1:t.from-1),s=o.length+1;if(n)for(let n of(r.push({from:t.to,to:o.to},{from:t.from,insert:o.text+e.lineBreak}),t.ranges))i.push(eG.range(Math.min(e.doc.length,n.anchor+s),Math.min(e.doc.length,n.head+s)));else for(let n of(r.push({from:o.from,to:t.from},{from:t.to,insert:e.lineBreak+o.text}),t.ranges))i.push(eG.range(n.anchor-s,n.head-s))}return!!r.length&&(t(e.update({changes:r,scrollIntoView:!0,selection:eG.create(i,e.selection.mainIndex),userEvent:"move.line"})),!0)}function bf(e,t,n){if(e.readOnly)return!1;let r=[];for(let t of bh(e))n?r.push({from:t.from,insert:e.doc.slice(t.from,t.to)+e.lineBreak}):r.push({from:t.to,insert:e.lineBreak+e.doc.slice(t.from,t.to)});return t(e.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}let bp=bg(!1),bm=bg(!0);function bg(e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=t.changeByRange(n=>{let{from:r,to:i}=n,o=t.doc.lineAt(r),s=!e&&r==i&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n=gs(e).resolveInner(t),r=n.childBefore(t),i=n.childAfter(t),o;return r&&i&&r.to<=t&&i.from>=t&&(o=r.type.prop(mh.closedBy))&&o.indexOf(i.name)>-1&&e.doc.lineAt(r.to).from==e.doc.lineAt(i.from).from&&!/\S/.test(e.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}(t,r);e&&(r=i=(i<=o.to?o:t.doc.lineAt(i)).to);let a=new gk(t,{simulateBreak:r,simulateDoubleBreak:!!s}),l=gw(a,r);for(null==l&&(l=tq(/^\s*/.exec(t.doc.lineAt(r).text)[0],t.tabSize));i<o.to&&/\s/.test(o.text[i-o.from]);)i++;s?{from:r,to:i}=s:r>o.from&&r<o.from+100&&!/\S/.test(o.text.slice(0,r))&&(r=o.from);let c=["",gx(t,l)];return s&&c.push(gx(t,a.lineIndent(o.from,-1))),{changes:{from:r,to:i,insert:eS.of(c)},range:eG.cursor(r+1+c[1].length)}});return n(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function by(e,t){let n=-1;return e.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let s=e.doc.lineAt(o);s.number>n&&(r.empty||r.to>s.from)&&(t(s,i,r),n=s.number),o=s.to+1}let o=e.changes(i);return{changes:i,range:eG.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}})}let bb=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(by(e,(t,n)=>{n.push({from:t.from,insert:e.facet(gb)})}),{userEvent:"input.indent"})),!0),bv=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(by(e,(t,n)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let i=tq(r,e.tabSize),o=0,s=gx(e,Math.max(0,i-gv(e)));for(;o<r.length&&o<s.length&&r.charCodeAt(o)==s.charCodeAt(o);)o++;n.push({from:t.from+o,to:t.from+r.length,insert:s.slice(o)})}),{userEvent:"delete.dedent"})),!0),bx=[{key:"Ctrl-b",run:yB,shift:y1,preventDefault:!0},{key:"Ctrl-f",run:yF,shift:y2},{key:"Ctrl-p",run:yU,shift:y3},{key:"Ctrl-n",run:yW,shift:y6},{key:"Ctrl-a",run:e=>yz(e,t=>eG.cursor(e.lineBlockAt(t.head).from,1)),shift:e=>yJ(e,t=>eG.cursor(e.lineBlockAt(t.head).from))},{key:"Ctrl-e",run:e=>yz(e,t=>eG.cursor(e.lineBlockAt(t.head).to,-1)),shift:e=>yJ(e,t=>eG.cursor(e.lineBlockAt(t.head).to))},{key:"Ctrl-d",run:bl},{key:"Ctrl-h",run:ba},{key:"Ctrl-k",run:e=>bi(e,t=>{let n=e.lineBlockAt(t.head).to;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)})},{key:"Ctrl-Alt-h",run:bu},{key:"Ctrl-o",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:eS.of(["",""])},range:eG.cursor(e.from)}));return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let n=t.from,r=e.doc.lineAt(n),i=n==r.from?n-1:eD(r.text,n-r.from,!1)+r.from,o=n==r.to?n+1:eD(r.text,n-r.from,!0)+r.from;return{changes:{from:i,to:o,insert:e.doc.slice(n,o).append(e.doc.slice(i,n))},range:eG.cursor(o)}});return!n.changes.empty&&(t(e.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:yZ}],bw=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>yz(e,t=>yV(e.state,t,!y$(e))),shift:e=>yJ(e,t=>yV(e.state,t,!y$(e)))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>yz(e,t=>yV(e.state,t,y$(e))),shift:e=>yJ(e,t=>yV(e.state,t,y$(e)))},{key:"Alt-ArrowUp",run:({state:e,dispatch:t})=>bd(e,t,!1)},{key:"Shift-Alt-ArrowUp",run:({state:e,dispatch:t})=>bf(e,t,!1)},{key:"Alt-ArrowDown",run:({state:e,dispatch:t})=>bd(e,t,!0)},{key:"Shift-Alt-ArrowDown",run:({state:e,dispatch:t})=>bf(e,t,!0)},{key:"Escape",run:({state:e,dispatch:t})=>{let n=e.selection,r=null;return n.ranges.length>1?r=eG.create([n.main]):n.main.empty||(r=eG.create([eG.cursor(n.main.head)])),!!r&&(t(yI(e,r)),!0)}},{key:"Mod-Enter",run:bm},{key:"Alt-l",mac:"Ctrl-l",run:({state:e,dispatch:t})=>{let n=bh(e).map(({from:t,to:n})=>eG.range(t,Math.min(n+1,e.doc.length)));return t(e.update({selection:eG.create(n),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:e,dispatch:t})=>{let n=yR(e.selection,t=>{let n=gs(e),r=n.resolveStack(t.from,1);if(t.empty){let e=n.resolveStack(t.from,-1);e.node.from>=r.node.from&&e.node.to<=r.node.to&&(r=e)}for(let e=r;e;e=e.next){let{node:n}=e;if((n.from<t.from&&n.to>=t.to||n.to>t.to&&n.from<=t.from)&&e.next)return eG.range(n.to,n.from)}return t});return!n.eq(e.selection)&&(t(yI(e,n)),!0)},preventDefault:!0},{key:"Mod-[",run:bv},{key:"Mod-]",run:bb},{key:"Mod-Alt-\\",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Object.create(null),r=new gk(e,{overrideIndentation:e=>n[e]??-1}),i=by(e,(t,i,o)=>{let s=gw(r,t.from);if(null==s)return;/\S/.test(t.text)||(s=0);let a=/^\s*/.exec(t.text)[0],l=gx(e,s);(a!=l||o.from<t.from+a.length)&&(n[t.from]=s,i.push({from:t.from,to:t.from+a.length,insert:l}))});return i.changes.empty||t(e.update(i,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes(bh(t).map(({from:e,to:n})=>(e>0?e--:n<t.doc.length&&n++,{from:e,to:n}))),r=yR(t.selection,t=>{let n;if(e.lineWrapping){let r=e.lineBlockAt(t.head),i=e.coordsAtPos(t.head,t.assoc||1);i&&(n=r.bottom+e.documentTop-i.bottom+e.defaultLineHeight/2)}return e.moveVertically(t,!0,n)}).map(n);return e.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:e,dispatch:t})=>(function(e,t,n){let r=!1,i=yR(e.selection,t=>{let n=yr(e,t.head,-1)||yr(e,t.head,1)||t.head>0&&yr(e,t.head-1,1)||t.head<e.doc.length&&yr(e,t.head+1,-1);if(!n||!n.end)return t;r=!0;let i=n.start.from==t.head?n.end.to:n.end.from;return eG.cursor(i)});return!!r&&(t(yI(e,i)),!0)})(e,t)},{key:"Mod-/",run:e=>{let{state:t}=e,n=t.doc.lineAt(t.selection.main.from),r=yp(e.state,n.from);return r.line?yh(e):!!r.block&&yf(e)}},{key:"Alt-A",run:yd},{key:"Ctrl-m",mac:"Shift-Alt-m",run:e=>(e.setTabFocusMode(),!0)}].concat([{key:"ArrowLeft",run:yB,shift:y1,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>yQ(e,!y$(e)),shift:e=>y4(e,!y$(e)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:e=>yz(e,t=>yK(e,t,!y$(e))),shift:e=>yJ(e,t=>yK(e,t,!y$(e))),preventDefault:!0},{key:"ArrowRight",run:yF,shift:y2,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>yQ(e,y$(e)),shift:e=>y4(e,y$(e)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:e=>yz(e,t=>yK(e,t,y$(e))),shift:e=>yJ(e,t=>yK(e,t,y$(e))),preventDefault:!0},{key:"ArrowUp",run:yU,shift:y3,preventDefault:!0},{mac:"Cmd-ArrowUp",run:be,shift:bn},{mac:"Ctrl-ArrowUp",run:yY,shift:y8},{key:"ArrowDown",run:yW,shift:y6,preventDefault:!0},{mac:"Cmd-ArrowDown",run:bt,shift:br},{mac:"Ctrl-ArrowDown",run:yZ,shift:y9},{key:"PageUp",run:yY,shift:y8},{key:"PageDown",run:yZ,shift:y9},{key:"Home",run:e=>yz(e,t=>yK(e,t,!1)),shift:e=>yJ(e,t=>yK(e,t,!1)),preventDefault:!0},{key:"Mod-Home",run:be,shift:bn},{key:"End",run:e=>yz(e,t=>yK(e,t,!0)),shift:e=>yJ(e,t=>yK(e,t,!0)),preventDefault:!0},{key:"Mod-End",run:bt,shift:br},{key:"Enter",run:bp,shift:bp},{key:"Mod-a",run:({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:ba,shift:ba},{key:"Delete",run:bl},{key:"Mod-Backspace",mac:"Alt-Backspace",run:bu},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>bc(e,!0)},{mac:"Mod-Backspace",run:e=>bi(e,t=>{let n=e.moveToLineBoundary(t,!1).head;return t.head>n?n:Math.max(0,t.head-1)})},{mac:"Mod-Delete",run:e=>bi(e,t=>{let n=e.moveToLineBoundary(t,!0).head;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)})}].concat(bx.map(e=>({mac:e.key,run:e.run,shift:e.shift})))),bk={key:"Tab",run:bb,shift:bv};function bO(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];"string"==typeof i?e.setAttribute(r,i):null!=i&&(e[r]=i)}t++}for(;t<arguments.length;t++)!function e(t,n){if("string"==typeof n)t.appendChild(document.createTextNode(n));else if(null!=n){if(null!=n.nodeType)t.appendChild(n);else if(Array.isArray(n))for(var r=0;r<n.length;r++)e(t,n[r]);else throw RangeError("Unsupported child node: "+n)}}(e,arguments[t]);return e}let bS="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class bC{constructor(e,t,n=0,r=e.length,i,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,r),this.bufferStart=n,this.normalize=i?e=>i(bS(e)):bS,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return -1;this.bufferPos=0,this.buffer=this.iter.value}return eP(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=eR(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=eI(e);let r=this.normalize(t);if(r.length)for(let e=0,i=n;;e++){let o=r.charCodeAt(e),s=this.match(o,i,this.bufferPos+this.bufferStart);if(e==r.length-1){if(s)return this.value=s,this;break}i==n&&e<t.length&&t.charCodeAt(e)==o&&i++}}}match(e,t,n){let r=null;for(let t=0;t<this.matches.length;t+=2){let i=this.matches[t],o=!1;this.query.charCodeAt(i)==e&&(i==this.query.length-1?r={from:this.matches[t+1],to:n}:(this.matches[t]++,o=!0)),o||(this.matches.splice(t,2),t-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?r={from:t,to:n}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}"u">typeof Symbol&&(bC.prototype[Symbol.iterator]=function(){return this});let bT={from:-1,to:-1,match:/.*/.exec("")},bA="gm"+(null==/x/.unicode?"":"u");class bE{constructor(e,t,n,r=0,i=e.length){if(this.text=e,this.to=i,this.curLine="",this.done=!1,this.value=bT,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new b_(e,t,n,r,i);this.re=new RegExp(t,bA+(null!=n&&n.ignoreCase?"i":"")),this.test=null==n?void 0:n.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=bj(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,r=n+t[0].length;if(this.matchPos=bj(this.text,r+ +(n==r)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<r||n>this.value.to)&&(!this.test||this.test(n,r,t)))return this.value={from:n,to:r,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}let bM=new WeakMap;class bN{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let r=bM.get(e);if(!r||r.from>=n||r.to<=t){let r=new bN(t,e.sliceString(t,n));return bM.set(e,r),r}if(r.from==t&&r.to==n)return r;let{text:i,from:o}=r;return o>t&&(i=e.sliceString(t,o)+i,o=t),r.to<n&&(i+=e.sliceString(r.to,n)),bM.set(e,new bN(o,i)),new bN(t,i.slice(t-o,n-o))}}class b_{constructor(e,t,n,r,i){this.text=e,this.to=i,this.done=!1,this.value=bT,this.matchPos=bj(e,r),this.re=new RegExp(t,bA+(null!=n&&n.ignoreCase?"i":"")),this.test=null==n?void 0:n.test,this.flat=bN.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let e=this.flat.from+t.index,n=e+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(e,n,t)))return this.value={from:e,to:n,match:t},this.matchPos=bj(this.text,n+ +(e==n)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=bN.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function bj(e,t){if(t>=e.length)return t;let n=e.lineAt(t),r;for(;t<n.to&&(r=n.text.charCodeAt(t-n.from))>=56320&&r<57344;)t++;return t}function bD(e){let t=bO("input",{class:"cm-textfield",name:"line",value:String(e.state.doc.lineAt(e.state.selection.main.head).number)});function n(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!n)return;let{state:r}=e,i=r.doc.lineAt(r.selection.main.head),[,o,s,a,l]=n,c=a?+a.slice(1):0,u=s?+s:i.number;if(s&&l){let e=u/100;o&&(e=e*("-"==o?-1:1)+i.number/r.doc.lines),u=Math.round(r.doc.lines*e)}else s&&o&&(u=u*("-"==o?-1:1)+i.number);let h=r.doc.line(Math.max(1,Math.min(r.doc.lines,u))),d=eG.cursor(h.from+Math.max(0,Math.min(c,h.length)));e.dispatch({effects:[bP.of(!1),fW.scrollIntoView(d.from,{y:"center"})],selection:d}),e.focus()}return{dom:bO("form",{class:"cm-gotoLine",onkeydown:t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({effects:bP.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),n())},onsubmit:e=>{e.preventDefault(),n()}},bO("label",e.state.phrase("Go to line"),": ",t)," ",bO("button",{class:"cm-button",type:"submit"},e.state.phrase("go")),bO("button",{name:"close",onclick:()=>{e.dispatch({effects:bP.of(!1)}),e.focus()},"aria-label":e.state.phrase("close"),type:"button"},["\xd7"]))}}"u">typeof Symbol&&(bE.prototype[Symbol.iterator]=b_.prototype[Symbol.iterator]=function(){return this});let bP=tf.define(),bR=e4.define({create:()=>!0,update(e,t){for(let n of t.effects)n.is(bP)&&(e=n.value);return e},provide:e=>pZ.from(e,e=>e?bD:null)}),bI=fW.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),bz={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},bL=eZ.define({combine:e=>tk(e,bz,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}),bq=hj.mark({class:"cm-selectionMatch"}),b$=hj.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function bB(e,t,n,r){return(0==n||e(t.sliceDoc(n-1,n))!=tv.Word)&&(r==t.doc.length||e(t.sliceDoc(r,r+1))!=tv.Word)}let bF=dp.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(bL),{state:n}=e,r=n.selection;if(r.ranges.length>1)return hj.none;let i=r.main,o,s=null;if(i.empty){if(!t.highlightWordAroundCursor)return hj.none;let e=n.wordAt(i.head);if(!e)return hj.none;s=n.charCategorizer(i.head),o=n.sliceDoc(e.from,e.to)}else{let e=i.to-i.from;if(e<t.minSelectionLength||e>200)return hj.none;if(t.wholeWords){var a,l,c;if(o=n.sliceDoc(i.from,i.to),!(bB(s=n.charCategorizer(i.head),n,i.from,i.to)&&(a=s,l=i.from,c=i.to,a(n.sliceDoc(l,l+1))==tv.Word&&a(n.sliceDoc(c-1,c))==tv.Word)))return hj.none}else if(!(o=n.sliceDoc(i.from,i.to)))return hj.none}let u=[];for(let r of e.visibleRanges){let e=new bC(n.doc,o,r.from,r.to);for(;!e.next().done;){let{from:r,to:o}=e.value;if((!s||bB(s,n,r,o))&&(i.empty&&r<=i.from&&o>=i.to?u.push(b$.range(r,o)):(r>=i.to||o<=i.from)&&u.push(bq.range(r,o)),u.length>t.maxMatches))return hj.none}}return hj.set(u)}},{decorations:e=>e.decorations}),bQ=fW.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),bV=({state:e,dispatch:t})=>{let{selection:n}=e,r=eG.create(n.ranges.map(t=>e.wordAt(t.head)||eG.cursor(t.head)),n.mainIndex);return!r.eq(n)&&(t(e.update({selection:r})),!0)},bH=eZ.define({combine:e=>tk(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new vu(e),scrollToMatch:e=>fW.scrollIntoView(e)})});class bU{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,bA),!0}catch{return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(e,t)=>"n"==t?`
`:"r"==t?"\r":"t"==t?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new bJ(this):new bX(this)}getCursor(e,t=0,n){let r=e.doc?e:tw.create({doc:e});return null==n&&(n=r.doc.length),this.regexp?bY(this,r,t,n):bG(this,r,t,n)}}class bW{constructor(e){this.spec=e}}function bG(e,t,n,r){var i,o;return new bC(t.doc,e.unquoted,n,r,e.caseSensitive?void 0:e=>e.toLowerCase(),e.wholeWord?(i=t.doc,o=t.charCategorizer(t.selection.main.head),(e,t,n,r)=>((r>e||r+n.length<t)&&(r=Math.max(0,e-2),n=i.sliceString(r,Math.min(i.length,t+2))),(o(bZ(n,e-r))!=tv.Word||o(bK(n,e-r))!=tv.Word)&&(o(bK(n,t-r))!=tv.Word||o(bZ(n,t-r))!=tv.Word))):void 0)}class bX extends bW{constructor(e){super(e)}nextMatch(e,t,n){let r=bG(this.spec,e,n,e.doc.length).nextOverlapping();if(r.done){let n=Math.min(e.doc.length,t+this.spec.unquoted.length);r=bG(this.spec,e,0,n).nextOverlapping()}return r.done||r.value.from==t&&r.value.to==n?null:r.value}prevMatchInRange(e,t,n){for(let r=n;;){let n=Math.max(t,r-1e4-this.spec.unquoted.length),i=bG(this.spec,e,n,r),o=null;for(;!i.nextOverlapping().done;)o=i.value;if(o)return o;if(n==t)return null;r-=1e4}}prevMatch(e,t,n){let r=this.prevMatchInRange(e,0,t);return r||(r=this.prevMatchInRange(e,Math.max(0,n-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=t||r.to!=n)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let n=bG(this.spec,e,0,e.doc.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let i=bG(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!i.next().done;)r(i.value.from,i.value.to)}}function bY(e,t,n,r){var i;return new bE(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?(i=t.charCategorizer(t.selection.main.head),(e,t,n)=>!n[0].length||(i(bZ(n.input,n.index))!=tv.Word||i(bK(n.input,n.index))!=tv.Word)&&(i(bK(n.input,n.index+n[0].length))!=tv.Word||i(bZ(n.input,n.index+n[0].length))!=tv.Word)):void 0},n,r)}function bZ(e,t){return e.slice(eD(e,t,!1),t)}function bK(e,t){return e.slice(t,eD(e,t))}class bJ extends bW{nextMatch(e,t,n){let r=bY(this.spec,e,n,e.doc.length).next();return r.done&&(r=bY(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=1;;r++){let i=Math.max(t,n-1e4*r),o=bY(this.spec,e,i,n),s=null;for(;!o.next().done;)s=o.value;if(s&&(i==t||s.from>i+10))return s;if(i==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,n)=>{if("&"==n)return e.match[0];if("$"==n)return"$";for(let t=n.length;t>0;t--){let r=+n.slice(0,t);if(r>0&&r<e.match.length)return e.match[r]+n.slice(t)}return t})}matchAll(e,t){let n=bY(this.spec,e,0,e.doc.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let i=bY(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));for(;!i.next().done;)r(i.value.from,i.value.to)}}let b0=tf.define(),b1=tf.define(),b2=e4.define({create:e=>new b4(vi(e).create(),null),update(e,t){for(let n of t.effects)n.is(b0)?e=new b4(n.value.create(),e.panel):n.is(b1)&&(e=new b4(e.query,n.value?vr:null));return e},provide:e=>pZ.from(e,e=>e.panel)});class b4{constructor(e,t){this.query=e,this.panel=t}}let b5=hj.mark({class:"cm-searchMatch"}),b3=hj.mark({class:"cm-searchMatch cm-searchMatch-selected"}),b6=dp.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(b2))}update(e){let t=e.state.field(b2);(t!=e.startState.field(b2)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return hj.none;let{view:n}=this,r=new tE;for(let t=0,i=n.visibleRanges,o=i.length;t<o;t++){let{from:s,to:a}=i[t];for(;t<o-1&&a>i[t+1].from-500;)a=i[++t].to;e.highlight(n.state,s,a,(e,t)=>{let i=n.state.selection.ranges.some(n=>n.from==e&&n.to==t);r.add(e,t,i?b3:b5)})}return r.finish()}},{decorations:e=>e.decorations});function b7(e){return t=>{let n=t.state.field(b2,!1);return n&&n.query.spec.valid?e(t,n):va(t)}}let b8=b7((e,{query:t})=>{let{to:n}=e.state.selection.main,r=t.nextMatch(e.state,n,n);if(!r)return!1;let i=eG.single(r.from,r.to),o=e.state.facet(bH);return e.dispatch({selection:i,effects:[vf(e,r),o.scrollToMatch(i.main,e)],userEvent:"select.search"}),vs(e),!0}),b9=b7((e,{query:t})=>{let{state:n}=e,{from:r}=n.selection.main,i=t.prevMatch(n,r,r);if(!i)return!1;let o=eG.single(i.from,i.to),s=e.state.facet(bH);return e.dispatch({selection:o,effects:[vf(e,i),s.scrollToMatch(o.main,e)],userEvent:"select.search"}),vs(e),!0}),ve=b7((e,{query:t})=>{let n=t.matchAll(e.state,1e3);return!!n&&!!n.length&&(e.dispatch({selection:eG.create(n.map(e=>eG.range(e.from,e.to))),userEvent:"select.search.matches"}),!0)}),vt=b7((e,{query:t})=>{let{state:n}=e,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let o=t.nextMatch(n,r,r);if(!o)return!1;let s=o,a=[],l,c,u=[];if(s.from==r&&s.to==i&&(c=n.toText(t.getReplacement(s)),a.push({from:s.from,to:s.to,insert:c}),s=t.nextMatch(n,s.from,s.to),u.push(fW.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),s){let t=0==a.length||a[0].from>=o.to?0:o.to-o.from-c.length;l=eG.single(s.from-t,s.to-t),u.push(vf(e,s)),u.push(n.facet(bH).scrollToMatch(l.main,e))}return e.dispatch({changes:a,selection:l,effects:u,userEvent:"input.replace"}),!0}),vn=b7((e,{query:t})=>{if(e.state.readOnly)return!1;let n=t.matchAll(e.state,1e9).map(e=>{let{from:n,to:r}=e;return{from:n,to:r,insert:t.getReplacement(e)}});if(!n.length)return!1;let r=e.state.phrase("replaced $ matches",n.length)+".";return e.dispatch({changes:n,effects:fW.announce.of(r),userEvent:"input.replace.all"}),!0});function vr(e){return e.state.facet(bH).createPanel(e)}function vi(e,t){var n,r,i,o,s;let a=e.selection.main,l=a.empty||a.to>a.from+100?"":e.sliceDoc(a.from,a.to);if(t&&!l)return t;let c=e.facet(bH);return new bU({search:(null!==(n=null==t?void 0:t.literal)&&void 0!==n?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:null!==(r=null==t?void 0:t.caseSensitive)&&void 0!==r?r:c.caseSensitive,literal:null!==(i=null==t?void 0:t.literal)&&void 0!==i?i:c.literal,regexp:null!==(o=null==t?void 0:t.regexp)&&void 0!==o?o:c.regexp,wholeWord:null!==(s=null==t?void 0:t.wholeWord)&&void 0!==s?s:c.wholeWord})}function vo(e){let t=pW(e,vr);return t&&t.dom.querySelector("[main-field]")}function vs(e){let t=vo(e);t&&t==e.root.activeElement&&t.select()}let va=e=>{let t=e.state.field(b2,!1);if(t&&t.panel){let n=vo(e);if(n&&n!=e.root.activeElement){let r=vi(e.state,t.query.spec);r.valid&&e.dispatch({effects:b0.of(r)}),n.focus(),n.select()}}else e.dispatch({effects:[b1.of(!0),t?b0.of(vi(e.state,t.query.spec)):tf.appendConfig.of(vm)]});return!0},vl=e=>{let t=e.state.field(b2,!1);if(!t||!t.panel)return!1;let n=pW(e,vr);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:b1.of(!1)}),!0},vc=[{key:"Mod-f",run:va,scope:"editor search-panel"},{key:"F3",run:b8,shift:b9,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:b8,shift:b9,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:vl,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:e,dispatch:t})=>{let n=e.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,o=[],s=0;for(let t=new bC(e.doc,e.sliceDoc(r,i));!t.next().done;){if(o.length>1e3)return!1;t.value.from==r&&(s=o.length),o.push(eG.range(t.value.from,t.value.to))}return t(e.update({selection:eG.create(o,s),userEvent:"select.search.matches"})),!0}},{key:"Mod-Alt-g",run:e=>{let t=pW(e,bD);if(!t){let n=[bP.of(!0)];null==e.state.field(bR,!1)&&n.push(tf.appendConfig.of([bR,bI])),e.dispatch({effects:n}),t=pW(e,bD)}return t&&t.dom.querySelector("input").select(),!0}},{key:"Mod-d",run:({state:e,dispatch:t})=>{let{ranges:n}=e.selection;if(n.some(e=>e.from===e.to))return bV({state:e,dispatch:t});let r=e.sliceDoc(n[0].from,n[0].to);if(e.selection.ranges.some(t=>e.sliceDoc(t.from,t.to)!=r))return!1;let i=function(e,t){let{main:n,ranges:r}=e.selection,i=e.wordAt(n.head),o=i&&i.from==n.from&&i.to==n.to;for(let n=!1,i=new bC(e.doc,t,r[r.length-1].to);;)if(i.next(),i.done){if(n)return null;i=new bC(e.doc,t,0,Math.max(0,r[r.length-1].from-1)),n=!0}else{if(n&&r.some(e=>e.from==i.value.from))continue;if(o){let t=e.wordAt(i.value.from);if(!t||t.from!=i.value.from||t.to!=i.value.to)continue}return i.value}}(e,r);return!!i&&(t(e.update({selection:e.selection.addRange(eG.range(i.from,i.to),!1),effects:fW.scrollIntoView(i.to)})),!0)},preventDefault:!0}];class vu{constructor(e){this.view=e;let t=this.query=e.state.field(b2).query.spec;function n(e,t,n){return bO("button",{class:"cm-button",name:e,onclick:t,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=bO("input",{value:t.search,placeholder:vh(e,"Find"),"aria-label":vh(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=bO("input",{value:t.replace,placeholder:vh(e,"Replace"),"aria-label":vh(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=bO("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=bO("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=bO("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit}),this.dom=bO("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,n("next",()=>b8(e),[vh(e,"next")]),n("prev",()=>b9(e),[vh(e,"previous")]),n("select",()=>ve(e),[vh(e,"all")]),bO("label",null,[this.caseField,vh(e,"match case")]),bO("label",null,[this.reField,vh(e,"regexp")]),bO("label",null,[this.wordField,vh(e,"by word")]),...e.state.readOnly?[]:[bO("br"),this.replaceField,n("replace",()=>vt(e),[vh(e,"replace")]),n("replaceAll",()=>vn(e),[vh(e,"replace all")])],bO("button",{name:"close",onclick:()=>vl(e),"aria-label":vh(e,"close"),type:"button"},["\xd7"])])}commit(){let e=new bU({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:b0.of(e)}))}keydown(e){var t;f6(f4((t=this.view).state),e,t,"search-panel")?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?b9:b8)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),vt(this.view))}update(e){for(let t of e.transactions)for(let e of t.effects)e.is(b0)&&!e.value.eq(this.query)&&this.setQuery(e.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(bH).top}}function vh(e,t){return e.state.phrase(t)}let vd=/[\s\.,:;?!]/;function vf(e,{from:t,to:n}){let r=e.state.doc.lineAt(t),i=e.state.doc.lineAt(n).to,o=Math.max(r.from,t-30),s=Math.min(i,n+30),a=e.state.sliceDoc(o,s);if(o!=r.from){for(let e=0;e<30;e++)if(!vd.test(a[e+1])&&vd.test(a[e])){a=a.slice(e);break}}if(s!=i){for(let e=a.length-1;e>a.length-30;e--)if(!vd.test(a[e-1])&&vd.test(a[e])){a=a.slice(0,e);break}}return fW.announce.of(`${e.state.phrase("current match")}. ${a} ${e.state.phrase("on line")} ${r.number}.`)}let vp=fW.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),vm=[b2,e6.low(b6),vp];class vg{constructor(e,t,n,r){this.state=e,this.pos=t,this.explicit=n,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=gs(this.state).resolveInner(this.pos,-1);for(;t&&0>e.indexOf(t.name);)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),r=t.text.slice(n-t.from,this.pos-t.from),i=r.search(vk(e,!1));return i<0?null:{from:n+i,to:this.pos,text:r.slice(i)}}get aborted(){return null==this.abortListeners}addEventListener(e,t,n){"abort"==e&&this.abortListeners&&(this.abortListeners.push(t),n&&n.onDocChange&&(this.abortOnDocChange=!0))}}function vy(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),`[${n?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function vb(e){let t=e.map(e=>"string"==typeof e?{label:e}:e),[n,r]=t.every(e=>/^\w+$/.test(e.label))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),n=Object.create(null);for(let{label:r}of e){t[r[0]]=!0;for(let e=1;e<r.length;e++)n[r[e]]=!0}let r=vy(t)+vy(n)+"*$";return[RegExp("^"+r),new RegExp(r)]}(t);return e=>{let i=e.matchBefore(r);return i||e.explicit?{from:i?i.from:e.pos,options:t,validFor:n}:null}}function vv(e,t){return n=>{for(let t=gs(n.state).resolveInner(n.pos,-1);t;t=t.parent){if(e.indexOf(t.name)>-1)return null;if(t.type.isTop)break}return t(n)}}class vx{constructor(e,t,n,r){this.completion=e,this.source=t,this.match=n,this.score=r}}function vw(e){return e.selection.main.from}function vk(e,t){var n;let{source:r}=e,i=t&&"^"!=r[0],o="$"!=r[r.length-1];return i||o?RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,null!==(n=e.flags)&&void 0!==n?n:e.ignoreCase?"i":""):e}let vO=tu.define(),vS=new WeakMap;function vC(e){if(!Array.isArray(e))return e;let t=vS.get(e);return t||vS.set(e,t=vb(e)),t}let vT=tf.define(),vA=tf.define();class vE{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let n=eP(e,t),r=eI(n);this.chars.push(n);let i=e.slice(t,t+r),o=i.toUpperCase();this.folded.push(eP(o==i?i.toLowerCase():o,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(0==this.pattern.length)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:r,precise:i,byWord:o}=this;if(1==t.length){let r=eP(e,0),i=eI(r),o=i==e.length?0:-100;if(r!=t[0]){if(r!=n[0])return null;o+=-200}return this.ret(o,[0,i])}let s=e.indexOf(this.pattern);if(0==s)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,l=0;if(s<0){for(let i=0,o=Math.min(e.length,200);i<o&&l<a;){let o=eP(e,i);(o==t[l]||o==n[l])&&(r[l++]=i),i+=eI(o)}if(l<a)return null}let c=0,u=0,h=!1,d=0,f=-1,p=-1,m=/[a-z]/.test(e),g=!0;for(let r=0,l=Math.min(e.length,200),y=0;r<l&&u<a;){let l=eP(e,r);s<0&&(c<a&&l==t[c]&&(i[c++]=r),d<a&&(l==t[d]||l==n[d]?(0==d&&(f=r),p=r+1,d++):d=0));let b,v=l<255?l>=48&&l<=57||l>=97&&l<=122?2:+(l>=65&&l<=90):(b=eR(l))!=b.toLowerCase()?1:2*(b!=b.toUpperCase());(!r||1==v&&m||0==y&&0!=v)&&(t[u]==l||n[u]==l&&(h=!0)?o[u++]=r:o.length&&(g=!1)),y=v,r+=eI(l)}return u==a&&0==o[0]&&g?this.result(-100+(h?-200:0),o,e):d==a&&0==f?this.ret(-200-e.length+(p==e.length?0:-100),[0,p]):s>-1?this.ret(-700-e.length,[s,s+this.pattern.length]):d==a?this.ret(-900-e.length,[f,p]):u==a?this.result(-100+(h?-200:0)+-700+(g?0:-1100),o,e):2==t.length?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,n){let r=[],i=0;for(let e of t){let t=e+(this.astral?eI(eP(n,e)):1);i&&r[i-1]==e?r[i-1]=t:(r[i++]=e,r[i++]=t)}return this.ret(e-n.length,r)}}class vM{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),n=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return null==n?null:(this.matched=[0,t.length],this.score=n+(e.length==this.pattern.length?0:-100),this)}}let vN=eZ.define({combine:e=>tk(e,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:vj,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>n=>v_(e(n),t(n)),optionClass:(e,t)=>n=>v_(e(n),t(n)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})});function v_(e,t){return e?t?e+" "+t:e:t}function vj(e,t,n,r,i,o){let s=e.textDirection==hV.RTL,a=s,l=!1,c="top",u,h,d=t.left-i.left,f=i.right-t.right,p=r.right-r.left,m=r.bottom-r.top;if(a&&d<Math.min(p,f)?a=!1:!a&&f<Math.min(p,d)&&(a=!0),p<=(a?d:f))u=Math.max(i.top,Math.min(n.top,i.bottom-m))-t.top,h=Math.min(400,a?d:f);else{l=!0,h=Math.min(400,(s?t.right:i.right-t.left)-30);let e=i.bottom-t.bottom;e>=m||e>t.top?u=n.bottom-t.top:(c="bottom",u=t.bottom-n.top)}let g=(t.bottom-t.top)/o.offsetHeight,y=(t.right-t.left)/o.offsetWidth;return{style:`${c}: ${u/g}px; max-width: ${h/y}px`,class:"cm-completionInfo-"+(l?s?"left-narrow":"right-narrow":a?"left":"right")}}function vD(e,t,n){if(e<=n)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let e=Math.floor(t/n);return{from:e*n,to:(e+1)*n}}let r=Math.floor((e-t)/n);return{from:e-(r+1)*n,to:e-r*n}}class vP{constructor(e,t,n){this.view=e,this.stateField=t,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:e=>this.placeInfo(e),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:i,selected:o}=r.open,s=e.state.facet(vN);this.optionContent=function(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map(e=>"cm-completionIcon-"+e)),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,n,r){let i=document.createElement("span");i.className="cm-completionLabel";let o=e.displayLabel||e.label,s=0;for(let e=0;e<r.length;){let t=r[e++],n=r[e++];t>s&&i.appendChild(document.createTextNode(o.slice(s,t)));let a=i.appendChild(document.createElement("span"));a.appendChild(document.createTextNode(o.slice(t,n))),a.className="cm-completionMatchedText",s=n}return s<o.length&&i.appendChild(document.createTextNode(o.slice(s))),i},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort((e,t)=>e.position-t.position).map(e=>e.render)}(s),this.optionClass=s.optionClass,this.tooltipClass=s.tooltipClass,this.range=vD(i.length,o,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",n=>{let{options:r}=e.state.field(t).open;for(let t=n.target,i;t&&t!=this.dom;t=t.parentNode)if("LI"==t.nodeName&&(i=/-(\d+)$/.exec(t.id))&&+i[1]<r.length){this.applyCompletion(e,r[+i[1]]),n.preventDefault();return}}),this.dom.addEventListener("focusout",t=>{let n=e.state.field(this.stateField,!1);n&&n.tooltip&&e.state.facet(vN).closeOnBlur&&t.relatedTarget!=e.contentDOM&&e.dispatch({effects:vA.of(null)})}),this.showOptions(i,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let n=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=r){let{options:i,selected:o,disabled:s}=n.open;r.open&&r.open.options==i||(this.range=vD(i.length,o,e.state.facet(vN).maxRenderedOptions),this.showOptions(i,n.id)),this.updateSel(),s!=(null===(t=r.open)||void 0===t?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!s)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let e of this.currentClass.split(" "))e&&this.dom.classList.remove(e);for(let e of t.split(" "))e&&this.dom.classList.add(e);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=vD(t.options.length,t.selected,this.view.state.facet(vN).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:n}=t.options[t.selected],{info:r}=n;if(!r)return;let i="string"==typeof r?document.createTextNode(r):r(n);if(!i)return;"then"in i?i.then(t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t,n)}).catch(e=>du(this.view.state,e,"completion info")):this.addInfoPane(i,n)}}addInfoPane(e,t){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",null!=e.nodeType)n.appendChild(e),this.infoDestroy=null;else{let{dom:t,destroy:r}=e;n.appendChild(t),this.infoDestroy=r||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){var t,n;let r,i,o,s=null;for(let t=this.list.firstChild,n=this.range.from;t;t=t.nextSibling,n++)"LI"==t.nodeName&&t.id?n==e?t.hasAttribute("aria-selected")||(t.setAttribute("aria-selected","true"),s=t):t.hasAttribute("aria-selected")&&t.removeAttribute("aria-selected"):n--;return s&&(t=this.list,n=s,r=t.getBoundingClientRect(),i=n.getBoundingClientRect(),o=r.height/t.offsetHeight,i.top<r.top?t.scrollTop-=(r.top-i.top)/o:i.bottom>r.bottom&&(t.scrollTop+=(i.bottom-r.bottom)/o)),s}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),i=this.space;if(!i){let e=this.dom.ownerDocument.documentElement;i={left:0,top:0,right:e.clientWidth,bottom:e.clientHeight}}return r.top>Math.min(i.bottom,t.bottom)-10||r.bottom<Math.max(i.top,t.top)+10?null:this.view.state.facet(vN).positionInfo(this.view,t,r,n,i,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,n){let r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",e=>{e.target==r&&e.preventDefault()});let i=null;for(let o=n.from;o<n.to;o++){let{completion:s,match:a}=e[o],{section:l}=s;if(l){let e="string"==typeof l?l:l.name;e!=i&&(o>n.from||0==n.from)&&((i=e,"string"!=typeof l&&l.header)?r.appendChild(l.header(l)):r.appendChild(document.createElement("completion-section")).textContent=e)}let c=r.appendChild(document.createElement("li"));c.id=t+"-"+o,c.setAttribute("role","option");let u=this.optionClass(s);for(let e of(u&&(c.className=u),this.optionContent)){let t=e(s,this.view.state,this.view,a);t&&c.appendChild(t)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function vR(e){return 100*(e.boost||0)+10*!!e.apply+5*!!e.info+ +!!e.type}class vI{constructor(e,t,n,r,i,o){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=r,this.selected=i,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new vI(this.options,v$(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,n,r,i,o){if(r&&!o&&e.some(e=>e.isPending))return r.setDisabled();let s=function(e,t){let n=[],r=null,i=e=>{n.push(e);let{section:t}=e.completion;if(t){r||(r=[]);let e="string"==typeof t?t:t.name;r.some(t=>t.name==e)||r.push("string"==typeof t?{name:e}:t)}},o=t.facet(vN);for(let r of e)if(r.hasResult()){let e=r.result.getMatch;if(!1===r.result.filter)for(let t of r.result.options)i(new vx(t,r.source,e?e(t):[],1e9-n.length));else{let n=t.sliceDoc(r.from,r.to),s,a=o.filterStrict?new vM(n):new vE(n);for(let t of r.result.options)if(s=a.match(t.label)){let n=t.displayLabel?e?e(t,s.matched):[]:s.matched;i(new vx(t,r.source,n,s.score+(t.boost||0)))}}}if(r){let e=Object.create(null),t=0;for(let n of r.sort((e,t)=>{var n,r;return(null!==(n=e.rank)&&void 0!==n?n:1e9)-(null!==(r=t.rank)&&void 0!==r?r:1e9)||(e.name<t.name?-1:1)}))t-=1e5,e[n.name]=t;for(let t of n){let{section:n}=t.completion;n&&(t.score+=e["string"==typeof n?n:n.name])}}let s=[],a=null,l=o.compareCompletions;for(let e of n.sort((e,t)=>t.score-e.score||l(e.completion,t.completion))){let t=e.completion;a&&a.label==t.label&&a.detail==t.detail&&(null==a.type||null==t.type||a.type==t.type)&&a.apply==t.apply&&a.boost==t.boost?vR(e.completion)>vR(a)&&(s[s.length-1]=e):s.push(e),a=e.completion}return s}(e,t);if(!s.length)return r&&e.some(e=>e.isPending)?r.setDisabled():null;let a=t.facet(vN).selectOnOpen?0:-1;if(r&&r.selected!=a&&-1!=r.selected){let e=r.options[r.selected].completion;for(let t=0;t<s.length;t++)if(s[t].completion==e){a=t;break}}return new vI(s,v$(n,a),{pos:e.reduce((e,t)=>t.hasResult()?Math.min(e,t.from):e,1e8),create:vX,above:i.aboveCursor},r?r.timestamp:Date.now(),a,!1)}map(e){return new vI(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new vI(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class vz{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new vz(vB,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,n=t.facet(vN),r=(n.override||t.languageDataAt("autocomplete",vw(t)).map(vC)).map(t=>(this.active.find(e=>e.source==t)||new vQ(t,+!!this.active.some(e=>0!=e.state))).update(e,n));r.length==this.active.length&&r.every((e,t)=>e==this.active[t])&&(r=this.active);let i=this.open,o=e.effects.some(e=>e.is(vH));for(let s of(i&&e.docChanged&&(i=i.map(e.changes)),e.selection||r.some(t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to))||!function(e,t){if(e==t)return!0;for(let n=0,r=0;;){for(;n<e.length&&!e[n].hasResult();)n++;for(;r<t.length&&!t[r].hasResult();)r++;let i=n==e.length,o=r==t.length;if(i||o)return i==o;if(e[n++].result!=t[r++].result)return!1}}(r,this.active)||o?i=vI.build(r,t,this.id,i,n,o):i&&i.disabled&&!r.some(e=>e.isPending)&&(i=null),!i&&r.every(e=>!e.isPending)&&r.some(e=>e.hasResult())&&(r=r.map(e=>e.hasResult()?new vQ(e.source,0):e)),e.effects))s.is(vU)&&(i=i&&i.setSelected(s.value,this.id));return r==this.active&&i==this.open?this:new vz(r,this.id,i)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?vL:vq}}let vL={"aria-autocomplete":"list"},vq={};function v$(e,t){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(n["aria-activedescendant"]=e+"-"+t),n}let vB=[];function vF(e,t){if(e.isUserEvent("input.complete")){let n=e.annotation(vO);if(n&&t.activateOnCompletion(n))return 12}let n=e.isUserEvent("input.type");return n&&t.activateOnTyping?5:n?1:e.isUserEvent("delete.backward")?2:e.selection?8:16*!!e.docChanged}class vQ{constructor(e,t,n=!1){this.source=e,this.state=t,this.explicit=n}hasResult(){return!1}get isPending(){return 1==this.state}update(e,t){let n=vF(e,t),r=this;for(let t of((8&n||16&n&&this.touches(e))&&(r=new vQ(r.source,0)),4&n&&0==r.state&&(r=new vQ(this.source,1)),r=r.updateFor(e,n),e.effects))if(t.is(vT))r=new vQ(r.source,1,t.value);else if(t.is(vA))r=new vQ(r.source,0);else if(t.is(vH))for(let e of t.value)e.source==r.source&&(r=e);return r}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(vw(e.state))}}class vV extends vQ{constructor(e,t,n,r,i,o){super(e,3,t),this.limit=n,this.result=r,this.from=i,this.to=o}hasResult(){return!0}updateFor(e,t){var n;if(!(3&t))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let i=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),s=vw(e.state);if(s>o||!r||2&t&&(vw(e.startState)==this.from||s<this.limit))return new vQ(this.source,4&t?1:0);let a=e.changes.mapPos(this.limit);return!function(e,t,n,r){if(!e)return!1;let i=t.sliceDoc(n,r);return"function"==typeof e?e(i,n,r,t):vk(e,!0).test(i)}(r.validFor,e.state,i,o)?r.update&&(r=r.update(r,i,o,new vg(e.state,s,!1)))?new vV(this.source,this.explicit,a,r,r.from,null!==(n=r.to)&&void 0!==n?n:vw(e.state)):new vQ(this.source,1,this.explicit):new vV(this.source,this.explicit,a,r,i,o)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new vV(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new vQ(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}let vH=tf.define({map:(e,t)=>e.map(e=>e.map(t))}),vU=tf.define(),vW=e4.define({create:()=>vz.start(),update:(e,t)=>e.update(t),provide:e=>[pq.from(e,e=>e.tooltip),fW.contentAttributes.from(e,e=>e.attrs)]});function vG(e,t){let n=t.completion.apply||t.completion.label,r=e.state.field(vW).active.find(e=>e.source==t.source);return r instanceof vV&&("string"==typeof n?e.dispatch(Object.assign(Object.assign({},function(e,t,n,r){let{main:i}=e.selection,o=n-i.from,s=r-i.from;return Object.assign(Object.assign({},e.changeByRange(a=>{if(a!=i&&n!=r&&e.sliceDoc(a.from+o,a.from+s)!=e.sliceDoc(n,r))return{range:a};let l=e.toText(t);return{changes:{from:a.from+o,to:r==i.from?a.to:a.from+s,insert:l},range:eG.cursor(a.from+o+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}(e.state,n,r.from,r.to)),{annotations:vO.of(t.completion)})):n(e,t.completion,r.from,r.to),!0)}let vX=e=>new vP(e,vW,vG);function vY(e,t="option"){return n=>{let r=n.state.field(vW,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(vN).interactionDelay)return!1;let i=1,o;"page"==t&&(o=pV(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(e?1:-1):e?0:s-1;return a<0?a="page"==t?0:s-1:a>=s&&(a="page"==t?s-1:0),n.dispatch({effects:vU.of(a)}),!0}}let vZ=e=>!!e.state.field(vW,!1)&&(e.dispatch({effects:vT.of(!0)}),!0);class vK{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}let vJ=dp.fromClass(class{constructor(e){for(let t of(this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0,e.state.field(vW).active))t.isPending&&this.startQuery(t)}update(e){let t=e.state.field(vW),n=e.state.facet(vN);if(!e.selectionSet&&!e.docChanged&&e.startState.field(vW)==t)return;let r=e.transactions.some(e=>{let t=vF(e,n);return 8&t||(e.selection||e.docChanged)&&!(3&t)});for(let t=0;t<this.running.length;t++){let n=this.running[t];if(r||n.context.abortOnDocChange&&e.docChanged||n.updates.length+e.transactions.length>50&&Date.now()-n.time>1e3){for(let e of n.context.abortListeners)try{e()}catch(e){du(this.view.state,e)}n.context.abortListeners=null,this.running.splice(t--,1)}else n.updates.push(...e.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),e.transactions.some(e=>e.effects.some(e=>e.is(vT)))&&(this.pendingStart=!0);let i=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=t.active.some(e=>e.isPending&&!this.running.some(t=>t.active.source==e.source))?setTimeout(()=>this.startUpdate(),i):-1,0!=this.composing)for(let t of e.transactions)t.isUserEvent("input.type")?this.composing=2:2==this.composing&&t.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:e}=this.view,t=e.field(vW);for(let e of t.active)e.isPending&&!this.running.some(t=>t.active.source==e.source)&&this.startQuery(e);this.running.length&&t.open&&t.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(vN).updateSyncTime))}startQuery(e){let{state:t}=this.view,n=vw(t),r=new vg(t,n,e.explicit,this.view),i=new vK(e,r);this.running.push(i),Promise.resolve(e.source(r)).then(e=>{i.context.aborted||(i.done=e||null,this.scheduleAccept())},e=>{this.view.dispatch({effects:vA.of(null)}),du(this.view.state,e)})}scheduleAccept(){this.running.every(e=>void 0!==e.done)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(vN).updateSyncTime))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],n=this.view.state.facet(vN),r=this.view.state.field(vW);for(let i=0;i<this.running.length;i++){let o=this.running[i];if(void 0===o.done)continue;if(this.running.splice(i--,1),o.done){let r=vw(o.updates.length?o.updates[0].startState:this.view.state),i=Math.min(r,o.done.from+ +!o.active.explicit),s=new vV(o.active.source,o.active.explicit,i,o.done,o.done.from,null!==(e=o.done.to)&&void 0!==e?e:r);for(let e of o.updates)s=s.update(e,n);if(s.hasResult()){t.push(s);continue}}let s=r.active.find(e=>e.source==o.active.source);if(s&&s.isPending){if(null==o.done){let e=new vQ(o.active.source,0);for(let t of o.updates)e=e.update(t,n);e.isPending||t.push(e)}else this.startQuery(s)}}(t.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:vH.of(t)})}},{eventHandlers:{blur(e){let t=this.view.state.field(vW,!1);if(t&&t.tooltip&&this.view.state.facet(vN).closeOnBlur){let n=t.open&&pV(this.view,t.open.tooltip);n&&n.dom.contains(e.relatedTarget)||setTimeout(()=>this.view.dispatch({effects:vA.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout(()=>this.view.dispatch({effects:vT.of(!1)}),20),this.composing=0}}}),v0="object"==typeof navigator&&/Win/.test(navigator.platform),v1=e6.highest(fW.domEventHandlers({keydown(e,t){let n=t.state.field(vW,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||e.key.length>1||e.ctrlKey&&!(v0&&e.altKey)||e.metaKey)return!1;let r=n.open.options[n.open.selected],i=n.active.find(e=>e.source==r.source),o=r.completion.commitCharacters||i.result.commitCharacters;return o&&o.indexOf(e.key)>-1&&vG(t,r),!1}})),v2=fW.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xb7\xb7\xb7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"'\uD835\uDC65'"}},".cm-completionIcon-constant":{"&:after":{content:"'\uD835\uDC36'"}},".cm-completionIcon-type":{"&:after":{content:"'\uD835\uDC61'"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"'\uD83D\uDD11'"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class v4{constructor(e,t,n,r){this.field=e,this.line=t,this.from=n,this.to=r}}class v5{constructor(e,t,n){this.field=e,this.from=t,this.to=n}map(e){let t=e.mapPos(this.from,-1,eL.TrackDel),n=e.mapPos(this.to,1,eL.TrackDel);return null==t||null==n?null:new v5(this.field,t,n)}}class v3{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let n=[],r=[t],i=e.doc.lineAt(t),o=/^\s*/.exec(i.text)[0];for(let i of this.lines){if(n.length){let n=o,s=/^\t*/.exec(i)[0].length;for(let t=0;t<s;t++)n+=e.facet(gb);r.push(t+n.length-s),i=n+i.slice(s)}n.push(i),t+=i.length+1}return{text:n,ranges:this.fieldPositions.map(e=>new v5(e.field,r[e.line]+e.from,r[e.line]+e.to))}}static parse(e){let t=[],n=[],r=[],i;for(let o of e.split(/\r\n?|\n/)){for(;i=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(o);){let e=i[1]?+i[1]:null,s=i[2]||i[3]||"",a=-1,l=s.replace(/\\[{}]/g,e=>e[1]);for(let n=0;n<t.length;n++)(null!=e?t[n].seq==e:l&&t[n].name==l)&&(a=n);if(a<0){let n=0;for(;n<t.length&&(null==e||null!=t[n].seq&&t[n].seq<e);)n++;for(let i of(t.splice(n,0,{seq:e,name:l}),a=n,r))i.field>=a&&i.field++}r.push(new v4(a,n.length,i.index,i.index+l.length)),o=o.slice(0,i.index)+s+o.slice(i.index+i[0].length)}o=o.replace(/\\([{}])/g,(e,t,i)=>{for(let e of r)e.line==n.length&&e.from>i&&(e.from--,e.to--);return t}),n.push(o)}return new v3(n,r)}}let v6=hj.widget({widget:new class extends hN{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),v7=hj.mark({class:"cm-snippetField"});class v8{constructor(e,t){this.ranges=e,this.active=t,this.deco=hj.set(e.map(e=>(e.from==e.to?v6:v7).range(e.from,e.to)))}map(e){let t=[];for(let n of this.ranges){let r=n.map(e);if(!r)return null;t.push(r)}return new v8(t,this.active)}selectionInsideField(e){return e.ranges.every(e=>this.ranges.some(t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))}}let v9=tf.define({map:(e,t)=>e&&e.map(t)}),xe=tf.define(),xt=e4.define({create:()=>null,update(e,t){for(let n of t.effects){if(n.is(v9))return n.value;if(n.is(xe)&&e)return new v8(e.ranges,n.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>fW.decorations.from(e,e=>e?e.deco:hj.none)});function xn(e,t){return eG.create(e.filter(e=>e.field==t).map(e=>eG.range(e.from,e.to)))}function xr(e){return({state:t,dispatch:n})=>{let r=t.field(xt,!1);if(!r||e<0&&0==r.active)return!1;let i=r.active+e,o=e>0&&!r.ranges.some(t=>t.field==i+e);return n(t.update({selection:xn(r.ranges,i),effects:v9.of(o?null:new v8(r.ranges,i)),scrollIntoView:!0})),!0}}let xi=[{key:"Tab",run:xr(1),shift:xr(-1)},{key:"Escape",run:({state:e,dispatch:t})=>!!e.field(xt,!1)&&(t(e.update({effects:v9.of(null)})),!0)}],xo=eZ.define({combine:e=>e.length?e[0]:xi}),xs=e6.highest(f1.compute([xo],e=>e.facet(xo)));function xa(e,t){let n;return Object.assign(Object.assign({},t),{apply:(n=v3.parse(e),(e,t,r,i)=>{let{text:o,ranges:s}=n.instantiate(e.state,r),{main:a}=e.state.selection,l={changes:{from:r,to:i==a.from?a.to:i,insert:eS.of(o)},scrollIntoView:!0,annotations:t?[vO.of(t),tp.userEvent.of("input.complete")]:void 0};if(s.length&&(l.selection=xn(s,0)),s.some(e=>e.field>0)){let t=new v8(s,0),n=l.effects=[v9.of(t)];void 0===e.state.field(xt,!1)&&n.push(tf.appendConfig.of([xt,xs,xl,v2]))}e.dispatch(e.state.update(l))})})}let xl=fW.domEventHandlers({mousedown(e,t){let n=t.state.field(xt,!1),r;if(!n||null==(r=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;let i=n.ranges.find(e=>e.from<=r&&e.to>=r);return!!i&&i.field!=n.active&&(t.dispatch({selection:xn(n.ranges,i.field),effects:v9.of(n.ranges.some(e=>e.field>i.field)?new v8(n.ranges,i.field):null),scrollIntoView:!0}),!0)}}),xc={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},xu=tf.define({map:(e,t)=>t.mapPos(e,-1,eL.TrackAfter)??void 0}),xh=new class extends tO{};xh.startSide=1,xh.endSide=-1;let xd=e4.define({create:()=>tA.empty,update(e,t){if(e=e.map(t.changes),t.selection){let n=t.state.doc.lineAt(t.selection.main.head);e=e.update({filter:e=>e>=n.from&&e<=n.to})}for(let n of t.effects)n.is(xu)&&(e=e.update({add:[xh.range(n.value,n.value+1)]}));return e}}),xf="()[]{}<>\xab\xbb\xbb\xab";function xp(e){for(let t=0;t<xf.length;t+=2)if(xf.charCodeAt(t)==e)return xf.charAt(t+1);return eR(e<128?e:e+1)}function xm(e,t){return e.languageDataAt("closeBrackets",t)[0]||xc}let xg="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),xy=fW.inputHandler.of((e,t,n,r)=>{if((xg?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let i=e.state.selection.main;if(r.length>2||2==r.length&&1==eI(eP(r,0))||t!=i.from||n!=i.to)return!1;let o=function(e,t){let n=xm(e,e.selection.main.head),r=n.brackets||xc.brackets;for(let i of r){let o=xp(eP(i,0));if(t==i)return o==i?function(e,t,n,r){let i=r.stringPrefixes||xc.stringPrefixes,o=null,s=e.changeByRange(r=>{if(!r.empty)return{changes:[{insert:t,from:r.from},{insert:t,from:r.to}],effects:xu.of(r.to+t.length),range:eG.range(r.anchor+t.length,r.head+t.length)};let s=r.head,a=xx(e.doc,s),l;if(a==t){if(xw(e,s))return{changes:{insert:t+t,from:s},effects:xu.of(s+t.length),range:eG.cursor(s+t.length)};if(xv(e,s)){let r=n&&e.sliceDoc(s,s+3*t.length)==t+t+t?t+t+t:t;return{changes:{from:s,to:s+r.length,insert:r},range:eG.cursor(s+r.length)}}}else{if(n&&e.sliceDoc(s-2*t.length,s)==t+t&&(l=xk(e,s-2*t.length,i))>-1&&xw(e,l))return{changes:{insert:t+t+t+t,from:s},effects:xu.of(s+t.length),range:eG.cursor(s+t.length)};if(e.charCategorizer(s)(a)!=tv.Word&&xk(e,s,i)>-1&&!function(e,t,n,r){let i=gs(e).resolveInner(t,-1),o=r.reduce((e,t)=>Math.max(e,t.length),0);for(let s=0;s<5;s++){let s=e.sliceDoc(i.from,Math.min(i.to,i.from+n.length+o)),a=s.indexOf(n);if(!a||a>-1&&r.indexOf(s.slice(0,a))>-1){let t=i.firstChild;for(;t&&t.from==i.from&&t.to-t.from>n.length+a;){if(e.sliceDoc(t.to-n.length,t.to)==n)return!1;t=t.firstChild}return!0}let l=i.to==t&&i.parent;if(!l)break;i=l}return!1}(e,s,t,i))return{changes:{insert:t+t,from:s},effects:xu.of(s+t.length),range:eG.cursor(s+t.length)}}return{range:o=r}});return o?null:e.update(s,{scrollIntoView:!0,userEvent:"input.type"})}(e,i,r.indexOf(i+i+i)>-1,n):function(e,t,n,r){let i=null,o=e.changeByRange(o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:n,from:o.to}],effects:xu.of(o.to+t.length),range:eG.range(o.anchor+t.length,o.head+t.length)};let s=xx(e.doc,o.head);return!s||/\s/.test(s)||r.indexOf(s)>-1?{changes:{insert:t+n,from:o.head},effects:xu.of(o.head+t.length),range:eG.cursor(o.head+t.length)}:{range:i=o}});return i?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}(e,i,o,n.before||xc.before);if(t==o&&xv(e,e.selection.main.from))return function(e,t,n){let r=null,i=e.changeByRange(t=>t.empty&&xx(e.doc,t.head)==n?{changes:{from:t.head,to:t.head+n.length,insert:n},range:eG.cursor(t.head+n.length)}:r={range:t});return r?null:e.update(i,{scrollIntoView:!0,userEvent:"input.type"})}(e,0,o)}return null}(e.state,r);return!!o&&(e.dispatch(o),!0)}),xb=[{key:"Backspace",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=xm(e,e.selection.main.head).brackets||xc.brackets,r=null,i=e.changeByRange(t=>{if(t.empty){let r=function(e,t){let n=e.sliceString(t-2,t);return eI(eP(n,0))==n.length?n:n.slice(1)}(e.doc,t.head);for(let i of n)if(i==r&&xx(e.doc,t.head)==xp(eP(i,0)))return{changes:{from:t.head-i.length,to:t.head+i.length},range:eG.cursor(t.head-i.length)}}return{range:r=t}});return r||t(e.update(i,{scrollIntoView:!0,userEvent:"delete.backward"})),!r}}];function xv(e,t){let n=!1;return e.field(xd).between(0,e.doc.length,e=>{e==t&&(n=!0)}),n}function xx(e,t){let n=e.sliceString(t,t+2);return n.slice(0,eI(eP(n,0)))}function xw(e,t){let n=gs(e).resolveInner(t+1);return n.parent&&n.from==t}function xk(e,t,n){let r=e.charCategorizer(t);if(r(e.sliceDoc(t-1,t))!=tv.Word)return t;for(let i of n){let n=t-i.length;if(e.sliceDoc(n,t)==i&&r(e.sliceDoc(n-1,n))!=tv.Word)return n}return -1}let xO=[{key:"Ctrl-Space",run:vZ},{mac:"Alt-`",run:vZ},{key:"Escape",run:e=>{let t=e.state.field(vW,!1);return!!(t&&t.active.some(e=>0!=e.state))&&(e.dispatch({effects:vA.of(null)}),!0)}},{key:"ArrowDown",run:vY(!0)},{key:"ArrowUp",run:vY(!1)},{key:"PageDown",run:vY(!0,"page")},{key:"PageUp",run:vY(!1,"page")},{key:"Enter",run:e=>{let t=e.state.field(vW,!1);return!(e.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<e.state.facet(vN).interactionDelay)&&vG(e,t.open.options[t.open.selected])}}],xS=e6.highest(f1.computeN([vN],e=>e.facet(vN).defaultKeymap?[xO]:[]));class xC{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class xT{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let r=e,i=n.facet(xR).markerFilter;i&&(r=i(r,n));let o=e.slice().sort((e,t)=>e.from-t.from||e.to-t.to),s=new tE,a=[],l=0;for(let e=0;;){let t,r,i=e==o.length?null:o[e];if(!i&&!a.length)break;for(a.length?(t=l,r=a.reduce((e,t)=>Math.min(e,t.to),i&&i.from>t?i.from:1e8)):(t=i.from,r=i.to,a.push(i),e++);e<o.length;){let n=o[e];if(n.from==t&&(n.to>n.from||n.to==t))a.push(n),e++,r=Math.min(n.to,r);else{r=Math.min(n.from,r);break}}let c=function(e){let t="hint",n=1;for(let i of e){var r;let e="error"==(r=i.severity)?4:"warning"==r?3:"info"==r?2:1;e>n&&(n=e,t=i.severity)}return t}(a);if(a.some(e=>e.from==e.to||e.from==e.to-1&&n.doc.lineAt(e.from).to==e.from))s.add(t,t,hj.widget({widget:new xL(c),diagnostics:a.slice()}));else{let e=a.reduce((e,t)=>t.markClass?e+" "+t.markClass:e,"");s.add(t,r,hj.mark({class:"cm-lintRange cm-lintRange-"+c+e,diagnostics:a.slice(),inclusiveEnd:a.some(e=>e.to>r)}))}l=r;for(let e=0;e<a.length;e++)a[e].to<=l&&a.splice(e--,1)}let c=s.finish();return new xT(c,t,xA(c))}}function xA(e,t=null,n=0){let r=null;return e.between(n,1e9,(e,n,{spec:i})=>{if(!(t&&0>i.diagnostics.indexOf(t))){if(r){if(0>i.diagnostics.indexOf(r.diagnostic))return!1;r=new xC(r.from,n,r.diagnostic)}else r=new xC(e,n,t||i.diagnostics[0])}}),r}let xE=tf.define(),xM=tf.define(),xN=tf.define(),x_=e4.define({create:()=>new xT(hj.none,null,null),update(e,t){if(t.docChanged&&e.diagnostics.size){let n=e.diagnostics.map(t.changes),r=null,i=e.panel;if(e.selected){let i=t.changes.mapPos(e.selected.from,1);r=xA(n,e.selected.diagnostic,i)||xA(n,null,i)}!n.size&&i&&t.state.facet(xR).autoPanel&&(i=null),e=new xT(n,i,r)}for(let n of t.effects)if(n.is(xE)){let r=t.state.facet(xR).autoPanel?n.value.length?x$.open:null:e.panel;e=xT.init(n.value,r,t.state)}else n.is(xM)?e=new xT(e.diagnostics,n.value?x$.open:null,e.selected):n.is(xN)&&(e=new xT(e.diagnostics,e.panel,n.value));return e},provide:e=>[pZ.from(e,e=>e.panel),fW.decorations.from(e,e=>e.diagnostics)]}),xj=hj.mark({class:"cm-lintRange cm-lintRange-active"}),xD=e=>{let t=e.state.field(x_,!1);return!!t&&!!t.panel&&(e.dispatch({effects:xM.of(!1)}),!0)},xP=[{key:"Mod-Shift-m",run:e=>{let t=e.state.field(x_,!1);t&&t.panel||e.dispatch({effects:function(e,t){return e.field(x_,!1)?t:t.concat(tf.appendConfig.of(xQ))}(e.state,[xM.of(!0)])});let n=pW(e,x$.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:e=>{let t=e.state.field(x_,!1);if(!t)return!1;let n=e.state.selection.main,r=t.diagnostics.iter(n.to+1);return(!!r.value||!!(r=t.diagnostics.iter(0)).value&&(r.from!=n.from||r.to!=n.to))&&(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)}}],xR=eZ.define({combine:e=>Object.assign({sources:e.map(e=>e.source).filter(e=>null!=e)},tk(e.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?n=>e(n)||t(n):e:t}))});function xI(e){let t=[];if(e)e:for(let{name:n}of e){for(let e=0;e<n.length;e++){let r=n[e];if(/[a-zA-Z]/.test(r)&&!t.some(e=>e.toLowerCase()==r.toLowerCase())){t.push(r);continue e}}t.push("")}return t}function xz(e,t,n){var r;let i=n?xI(t.actions):[];return bO("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},bO("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage(e):t.message),null===(r=t.actions)||void 0===r?void 0:r.map((n,r)=>{let o=!1,s=r=>{if(r.preventDefault(),o)return;o=!0;let i=xA(e.state.field(x_).diagnostics,t);i&&n.apply(e,i.from,i.to)},{name:a}=n,l=i[r]?a.indexOf(i[r]):-1,c=l<0?a:[a.slice(0,l),bO("u",a.slice(l,l+1)),a.slice(l+1)];return bO("button",{type:"button",class:"cm-diagnosticAction",onclick:s,onmousedown:s,"aria-label":` Action: ${a}${l<0?"":` (access key "${i[r]})"`}.`},c)}),t.source&&bO("div",{class:"cm-diagnosticSource"},t.source))}class xL extends hN{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return bO("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class xq{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(0xffffffff*Math.random()).toString(16),this.dom=xz(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class x${constructor(e){this.view=e,this.items=[],this.list=bO("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t=>{if(27==t.keyCode)xD(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65)||!(t.keyCode<=90)||!(this.selectedIndex>=0))return;let{diagnostic:n}=this.items[this.selectedIndex],r=xI(n.actions);for(let i=0;i<r.length;i++)if(r[i].toUpperCase().charCodeAt(0)==t.keyCode){let t=xA(this.view.state.field(x_).diagnostics,n);t&&n.actions[i].apply(e,t.from,t.to)}}t.preventDefault()},onclick:e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)}}),this.dom=bO("div",{class:"cm-panel-lint"},this.list,bO("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>xD(this.view)},"\xd7")),this.update()}get selectedIndex(){let e=this.view.state.field(x_).selected;if(!e)return -1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return -1}update(){let{diagnostics:e,selected:t}=this.view.state.field(x_),n=0,r=!1,i=null,o=new Set;for(e.between(0,this.view.state.doc.length,(e,s,{spec:a})=>{for(let e of a.diagnostics){if(o.has(e))continue;o.add(e);let s=-1,a;for(let t=n;t<this.items.length;t++)if(this.items[t].diagnostic==e){s=t;break}s<0?(a=new xq(this.view,e),this.items.splice(n,0,a),r=!0):(a=this.items[s],s>n&&(this.items.splice(n,s-n),r=!0)),t&&a.diagnostic==t.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),i=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),n++}});n<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();0==this.items.length&&(this.items.push(new xq(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),i?(this.list.setAttribute("aria-activedescendant",i.id),this.view.requestMeasure({key:this,read:()=>({sel:i.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:e,panel:t})=>{let n=t.height/this.list.offsetHeight;e.top<t.top?this.list.scrollTop-=(t.top-e.top)/n:e.bottom>t.bottom&&(this.list.scrollTop+=(e.bottom-t.bottom)/n)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=xA(this.view.state.field(x_).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:xN.of(t)})}static open(e){return new x$(e)}}function xB(e){return function(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}let xF=fW.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:xB("#d11")},".cm-lintRange-warning":{backgroundImage:xB("orange")},".cm-lintRange-info":{backgroundImage:xB("#999")},".cm-lintRange-hint":{backgroundImage:xB("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),xQ=[x_,fW.decorations.compute([x_],e=>{let{selected:t,panel:n}=e.field(x_);return t&&n&&t.from!=t.to?hj.set([xj.range(t.from,t.to)]):hj.none}),function(e,t={}){let n=tf.define(),r=e4.define({create:()=>[],update(e,r){if(e.length&&(t.hideOnChange&&(r.docChanged||r.selection)?e=[]:t.hideOn&&(e=e.filter(e=>!t.hideOn(r,e))),r.docChanged)){let t=[];for(let n of e){let e=r.changes.mapPos(n.pos,-1,eL.TrackDel);if(null!=e){let i=Object.assign(Object.create(null),n);i.pos=e,null!=i.end&&(i.end=r.changes.mapPos(i.end)),t.push(i)}}e=t}for(let t of r.effects)t.is(n)&&(e=t.value),t.is(pH)&&(e=[]);return e},provide:e=>p$.from(e)});return{active:r,extension:[r,dp.define(i=>new pQ(i,e,r,n,t.hoverTime||300)),pF]}}(function(e,t,n){let{diagnostics:r}=e.state.field(x_),i,o=-1,s=-1;r.between(t-+(n<0),t+ +(n>0),(e,r,{spec:a})=>{if(t>=e&&t<=r&&(e==r||(t>e||n>0)&&(t<r||n<0)))return i=a.diagnostics,o=e,s=r,!1});let a=e.state.facet(xR).tooltipFilter;return i&&a&&(i=a(i,e.state)),i?{pos:o,end:s,above:e.state.doc.lineAt(o).to<s,create:()=>{var t;return{dom:(t=e,bO("ul",{class:"cm-tooltip-lint"},i.map(e=>xz(t,e,!1))))}}}:null},{hideOn:function(e,t){let n=t.pos,r=t.end||n,i=e.state.facet(xR).hideOn(e,n,r);if(null!=i)return i;let o=e.startState.doc.lineAt(t.pos);return!!(e.effects.some(e=>e.is(xE))||e.changes.touchesRange(o.from,Math.max(o.to,r)))}}),xF];var xV=function(e){let t;void 0===e&&(e={});var{crosshairCursor:n=!1}=e,r=[];!1!==e.closeBracketsKeymap&&(r=r.concat(xb)),!1!==e.defaultKeymap&&(r=r.concat(bw)),!1!==e.searchKeymap&&(r=r.concat(vc)),!1!==e.historyKeymap&&(r=r.concat(yP)),!1!==e.foldKeymap&&(r=r.concat(g$)),!1!==e.completionKeymap&&(r=r.concat(xO)),!1!==e.lintKeymap&&(r=r.concat(xP));var i=[];return!1!==e.lineNumbers&&i.push(function(e={}){return[mn.of(e),[p5],mo]}()),!1!==e.highlightActiveLineGutter&&i.push(ml),!1!==e.highlightSpecialChars&&i.push(function(e={}){return[px.of(e),pw||(pw=dp.fromClass(class{constructor(e){this.view=e,this.decorations=hj.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(px)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new pm({regexp:e.specialChars,decoration:(t,n,r)=>{let{doc:i}=n.state,o=eP(t[0],0);if(9==o){let e=i.lineAt(r),t=n.state.tabSize,o=tq(e.text,t,r-e.from);return hj.replace({widget:new pO((t-o%t)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=hj.replace({widget:new pk(e,o)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(px);e.startState.facet(px)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}()),!1!==e.history&&i.push(function(e={}){return[yx,yv.of(e),fW.domEventHandlers({beforeinput(e,t){let n="historyUndo"==e.inputType?yk:"historyRedo"==e.inputType?yO:null;return!!n&&(e.preventDefault(),n(t))}})]}()),!1!==e.foldGutter&&i.push(function(e={}){var t,n;let r=Object.assign(Object.assign({},gU),e),i=new gW(r,!0),o=new gW(r,!1),s=dp.fromClass(class{constructor(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}update(e){(e.docChanged||e.viewportChanged||e.startState.facet(gm)!=e.state.facet(gm)||e.startState.field(gI,!1)!=e.state.field(gI,!1)||gs(e.startState)!=gs(e.state)||r.foldingChanged(e))&&(this.markers=this.buildMarkers(e.view))}buildMarkers(e){let t=new tE;for(let n of e.viewportLineBlocks){let r=gz(e.state,n.from,n.to)?o:g_(e.state,n.from,n.to)?i:null;r&&t.add(n.from,n.from,r)}return t.finish()}}),{domEventHandlers:a}=r;return[s,(t={class:"cm-foldGutter",markers(e){var t;return(null===(t=e.plugin(s))||void 0===t?void 0:t.markers)||tA.empty},initialSpacer:()=>new gW(r,!1),domEventHandlers:Object.assign(Object.assign({},a),{click:(e,t,n)=>{if(a.click&&a.click(e,t,n))return!0;let r=gz(e.state,t.from,t.to);if(r)return e.dispatch({effects:gP.of(r)}),!0;let i=g_(e.state,t.from,t.to);return!!i&&(e.dispatch({effects:gD.of(i)}),!0)}})},[[p5],p2.of(Object.assign(Object.assign({},p1),t))]),[gI,gG]]}()),!1!==e.drawSelection&&i.push(function(e={}){return[pi.of(e),ps,pl,pu,di.of(!0)]}()),!1!==e.dropCursor&&i.push([pd,pf]),!1!==e.allowMultipleSelections&&i.push(tw.allowMultipleSelections.of(!0)),!1!==e.indentOnInput&&i.push(tw.transactionFilter.of(e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let n=e.newDoc,{head:r}=e.newSelection.main,i=n.lineAt(r);if(r>i.from+200)return e;let o=n.sliceString(i.from,r);if(!t.some(e=>e.test(o)))return e;let{state:s}=e,a=-1,l=[];for(let{head:e}of s.selection.ranges){let t=s.doc.lineAt(e);if(t.from==a)continue;a=t.from;let n=gw(s,t.from);if(null==n)continue;let r=/^\s*/.exec(t.text)[0],i=gx(s,n);r!=i&&l.push({from:t.from,to:t.from+r.length,insert:i})}return l.length?[e,{changes:l,sequential:!0}]:e})),!1!==e.syntaxHighlighting&&i.push(gJ(g2,{fallback:!0})),!1!==e.bracketMatching&&i.push(function(e={}){return[g3.of(e),g9]}()),!1!==e.closeBrackets&&i.push([xy,xd]),!1!==e.autocompletion&&i.push(function(e={}){return[v1,vW,vN.of(e),vJ,xS,v2]}()),!1!==e.rectangularSelection&&i.push((t=e=>e.altKey&&0==e.button,fW.mouseSelectionStyle.of((e,n)=>{let r,i;return t(n)?(r=pA(e,n),i=e.state.selection,r?{update(e){if(e.docChanged){let t=e.changes.mapPos(e.startState.doc.line(r.line).from),n=e.state.doc.lineAt(t);r={line:n.number,col:r.col,off:Math.min(r.off,n.length)},i=i.map(e.changes)}},get(t,n,o){let s=pA(e,t);if(!s)return i;let a=function(e,t,n){let r=Math.min(t.line,n.line),i=Math.max(t.line,n.line),o=[];if(t.off>2e3||n.off>2e3||t.col<0||n.col<0){let s=Math.min(t.off,n.off),a=Math.max(t.off,n.off);for(let t=r;t<=i;t++){let n=e.doc.line(t);n.length<=a&&o.push(eG.range(n.from+s,n.to+a))}}else{let s=Math.min(t.col,n.col),a=Math.max(t.col,n.col);for(let t=r;t<=i;t++){let n=e.doc.line(t),r=t$(n.text,s,e.tabSize,!0);if(r<0)o.push(eG.cursor(n.to));else{let t=t$(n.text,a,e.tabSize);o.push(eG.range(n.from+r,n.from+t))}}}return o}(e.state,r,s);return a.length?o?eG.create(a.concat(i.ranges)):eG.create(a):i}}:null):null}))),!1!==n&&i.push(function(e={}){let[t,n]=pE[e.key||"Alt"],r=dp.fromClass(class{constructor(e){this.view=e,this.isDown=!1}set(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))}},{eventObservers:{keydown(e){this.set(e.keyCode==t||n(e))},keyup(e){e.keyCode!=t&&n(e)||this.set(!1)},mousemove(e){this.set(n(e))}}});return[r,fW.contentAttributes.of(e=>{var t;return null!==(t=e.plugin(r))&&void 0!==t&&t.isDown?pM:null})]}()),!1!==e.highlightActiveLine&&i.push(pC),!1!==e.highlightSelectionMatches&&i.push([bQ,bF]),e.tabSize&&"number"==typeof e.tabSize&&i.push(gb.of(" ".repeat(e.tabSize))),i.concat([f1.of(r.flat())]).filter(Boolean)};let xH="#e06c75",xU="#abb2bf",xW="#7d8799",xG="#d19a66",xX="#2c313a",xY="#282c34",xZ="#353a42",xK="#528bff",xJ=[fW.theme({"&":{color:xU,backgroundColor:xY},".cm-content":{caretColor:xK},".cm-cursor, .cm-dropCursor":{borderLeftColor:xK},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#3E4451"},".cm-panels":{backgroundColor:"#21252b",color:xU},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:xY,color:xW,border:"none"},".cm-activeLineGutter":{backgroundColor:xX},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:xZ},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:xZ,borderBottomColor:xZ},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:xX,color:xU}}},{dark:!0}),gJ(gX.define([{tag:ge.keyword,color:"#c678dd"},{tag:[ge.name,ge.deleted,ge.character,ge.propertyName,ge.macroName],color:xH},{tag:[ge.function(ge.variableName),ge.labelName],color:"#61afef"},{tag:[ge.color,ge.constant(ge.name),ge.standard(ge.name)],color:xG},{tag:[ge.definition(ge.name),ge.separator],color:xU},{tag:[ge.typeName,ge.className,ge.number,ge.changed,ge.annotation,ge.modifier,ge.self,ge.namespace],color:"#e5c07b"},{tag:[ge.operator,ge.operatorKeyword,ge.url,ge.escape,ge.regexp,ge.link,ge.special(ge.string)],color:"#56b6c2"},{tag:[ge.meta,ge.comment],color:xW},{tag:ge.strong,fontWeight:"bold"},{tag:ge.emphasis,fontStyle:"italic"},{tag:ge.strikethrough,textDecoration:"line-through"},{tag:ge.link,color:xW,textDecoration:"underline"},{tag:ge.heading,fontWeight:"bold",color:xH},{tag:[ge.atom,ge.bool,ge.special(ge.variableName)],color:xG},{tag:[ge.processingInstruction,ge.string,ge.inserted],color:"#98c379"},{tag:ge.invalid,color:"#ffffff"}]))];var x0=fW.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),x1=function(e){void 0===e&&(e={});var{indentWithTab:t=!0,editable:n=!0,readOnly:r=!1,theme:i="light",placeholder:o="",basicSetup:s=!0}=e,a=[];switch(t&&a.unshift(f1.of([bk])),s&&("boolean"==typeof s?a.unshift(xV()):a.unshift(xV(s))),o&&a.unshift(dp.fromClass(class{constructor(e){this.view=e,this.placeholder=o?hj.set([hj.widget({widget:new pT(o),side:1}).range(0)]):hj.none}get decorations(){return this.view.state.doc.length?hj.none:this.placeholder}},{decorations:e=>e.decorations})),i){case"light":a.push(x0);break;case"dark":a.push(xJ);break;case"none":break;default:a.push(i)}return!1===n&&a.push(fW.editable.of(!1)),r&&a.push(tw.readOnly.of(!0)),[...a]},x2=e=>({line:e.state.doc.lineAt(e.state.selection.main.from),lineCount:e.state.doc.lines,lineBreak:e.state.lineBreak,length:e.state.doc.length,readOnly:e.state.readOnly,tabSize:e.state.tabSize,selection:e.state.selection,selectionAsSingle:e.state.selection.asSingle().main,ranges:e.state.selection.ranges,selectionCode:e.state.sliceDoc(e.state.selection.main.from,e.state.selection.main.to),selections:e.state.selection.ranges.map(t=>e.state.sliceDoc(t.from,t.to)),selectedText:e.state.selection.ranges.some(e=>!e.empty)}),x4=tu.define(),x5=[],x3=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],x6=(0,N.forwardRef)((e,t)=>{var{className:n,value:r="",selection:i,extensions:o=[],onChange:s,onStatistics:a,onCreateEditor:l,onUpdate:c,autoFocus:u,theme:h="light",height:d,minHeight:f,maxHeight:p,width:m,minWidth:g,maxWidth:y,basicSetup:b,placeholder:v,indentWithTab:x,editable:w,readOnly:k,root:O,initialState:S}=e,C=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,x3),T=(0,N.useRef)(null),{state:A,view:E,container:_}=function(e){var{value:t,selection:n,onChange:r,onStatistics:i,onCreateEditor:o,onUpdate:s,extensions:a=x5,autoFocus:l,theme:c="light",height:u=null,minHeight:h=null,maxHeight:d=null,width:f=null,minWidth:p=null,maxWidth:m=null,placeholder:g="",editable:y=!0,readOnly:b=!1,indentWithTab:v=!0,basicSetup:x=!0,root:w,initialState:k}=e,[O,S]=(0,N.useState)(),[C,T]=(0,N.useState)(),[A,E]=(0,N.useState)(),M=fW.theme({"&":{height:u,minHeight:h,maxHeight:d,width:f,minWidth:p,maxWidth:m},"& .cm-scroller":{height:"100% !important"}}),_=[fW.updateListener.of(e=>{e.docChanged&&"function"==typeof r&&!e.transactions.some(e=>e.annotation(x4))&&r(e.state.doc.toString(),e),i&&i(x2(e))}),M,...x1({theme:c,editable:y,readOnly:b,placeholder:g,indentWithTab:v,basicSetup:x})];return s&&"function"==typeof s&&_.push(fW.updateListener.of(s)),_=_.concat(a),(0,N.useEffect)(()=>{if(O&&!A){var e={doc:t,selection:n,extensions:_},r=k?tw.fromJSON(k.json,e,k.fields):tw.create(e);if(E(r),!C){var i=new fW({state:r,parent:O,root:w});T(i),o&&o(i,r)}}return()=>{C&&(E(void 0),T(void 0))}},[O,A]),(0,N.useEffect)(()=>S(e.container),[e.container]),(0,N.useEffect)(()=>()=>{C&&(C.destroy(),T(void 0))},[C]),(0,N.useEffect)(()=>{l&&C&&C.focus()},[l,C]),(0,N.useEffect)(()=>{C&&C.dispatch({effects:tf.reconfigure.of(_)})},[c,a,u,h,d,f,p,m,g,y,b,v,x,r,s]),(0,N.useEffect)(()=>{if(void 0!==t){var e=C?C.state.doc.toString():"";C&&t!==e&&C.dispatch({changes:{from:0,to:e.length,insert:t||""},annotations:[x4.of(!0)]})}},[t,C]),{state:A,setState:E,view:C,setView:T,container:O,setContainer:S}}({container:T.current,root:O,value:r,autoFocus:u,theme:h,height:d,minHeight:f,maxHeight:p,width:m,minWidth:g,maxWidth:y,basicSetup:b,placeholder:v,indentWithTab:x,editable:w,readOnly:k,selection:i,onChange:s,onStatistics:a,onCreateEditor:l,onUpdate:c,extensions:o,initialState:S});if((0,N.useImperativeHandle)(t,()=>({editor:T.current,state:A,view:E}),[T,_,A,E]),"string"!=typeof r)throw Error("value must be typeof string but got "+typeof r);var j="string"==typeof h?"cm-theme-"+h:"cm-theme";return M.j.jsx("div",u_({ref:T,className:""+j+(n?" "+n:"")},C))});x6.displayName="CodeMirror";class x7{constructor(e,t,n,r,i,o,s,a,l,c=0,u){this.p=e,this.stack=t,this.state=n,this.reducePos=r,this.pos=i,this.score=o,this.buffer=s,this.bufferBase=a,this.curContext=l,this.lookAhead=c,this.parent=u}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,n=0){let r=e.parser.context;return new x7(e,[],t,n,n,0,[],0,r?new x8(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let n=e>>19,r=65535&e,{parser:i}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let s=i.dynamicPrecedence(r);if(s&&(this.score+=s),0==n){this.pushState(i.getGoto(this.state,r,!0),this.reducePos),r<i.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(r,this.reducePos);return}let a=this.stack.length-(n-1)*3-(262144&e?6:0),l=a?this.stack[a-2]:this.p.ranges[0].from,c=this.reducePos-l;c>=2e3&&!(null!==(t=this.p.parser.nodeSet.types[r])&&void 0!==t&&t.isAnonymous)&&(l==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=l,this.p.lastBigReductionSize=c));let u=a?this.stack[a-1]:0,h=this.bufferBase+this.buffer.length-u;if(r<i.minRepeatTerm||131072&e){let e=i.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,l,e,h+4,!0)}if(262144&e)this.state=this.stack[a];else{let e=this.stack[a-3];this.state=i.getGoto(e,r,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(r,l)}storeNode(e,t,n,r=4,i=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,r=this.buffer.length;if(0==r&&e.parent&&(r=e.bufferBase-e.parent.bufferBase,e=e.parent),r>0&&0==e.buffer[r-4]&&e.buffer[r-1]>-1){if(t==n)return;if(e.buffer[r-2]>=t){e.buffer[r-2]=n;return}}}if(i&&this.pos!=n){let i=this.buffer.length;if(i>0&&0!=this.buffer[i-4]){let e=!1;for(let t=i;t>0&&this.buffer[t-2]>n;t-=4)if(this.buffer[t-1]>=0){e=!0;break}if(e)for(;i>0&&this.buffer[i-2]>n;)this.buffer[i]=this.buffer[i-4],this.buffer[i+1]=this.buffer[i-3],this.buffer[i+2]=this.buffer[i-2],this.buffer[i+3]=this.buffer[i-1],i-=4,r>4&&(r-=4)}this.buffer[i]=e,this.buffer[i+1]=t,this.buffer[i+2]=n,this.buffer[i+3]=r}else this.buffer.push(e,t,n,r)}shift(e,t,n,r){if(131072&e)this.pushState(65535&e,this.pos);else if(262144&e)this.pos=r,this.shiftContext(t,n),t<=this.p.parser.maxNode&&this.buffer.push(t,n,r,4);else{let{parser:i}=this.p;(r>this.pos||t<=i.maxNode)&&(this.pos=r,i.stateFlag(e,1)||(this.reducePos=r)),this.pushState(e,n),this.shiftContext(t,n),t<=i.maxNode&&this.buffer.push(t,n,r,4)}}apply(e,t,n,r){65536&e?this.reduce(e):this.shift(e,t,n,r)}useNode(e,t){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(n,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let n=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new x7(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new x9(this);;){let n=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==n)return!1;if(!(65536&n))return!0;t.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let n=[];for(let r=0,i;r<t.length;r+=2)(i=t[r+1])!=this.state&&this.p.parser.hasAction(i,e)&&n.push(t[r],i);if(this.stack.length<120)for(let e=0;n.length<8&&e<t.length;e+=2){let r=t[e+1];n.some((e,t)=>1&t&&e==r)||n.push(t[e],r)}t=n}let n=[];for(let e=0;e<t.length&&n.length<4;e+=2){let r=t[e+1];if(r==this.state)continue;let i=this.split();i.pushState(r,this.pos),i.storeNode(0,i.pos,i.pos,4,!0),i.shiftContext(t[e],this.pos),i.reducePos=this.pos,i.score-=200,n.push(i)}return n}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(65536&t))return!1;if(!e.validAction(this.state,t)){let n=t>>19,r=65535&t,i=this.stack.length-3*n;if(i<0||0>e.getGoto(this.stack[i],r,!1)){let e=this.findForcedReduction();if(null==e)return!1;t=e}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],n=(r,i)=>{if(!t.includes(r))return t.push(r),e.allActions(r,t=>{if(!(393216&t)){if(65536&t){let n=(t>>19)-i;if(n>1){let r=65535&t,i=this.stack.length-3*n;if(i>=0&&e.getGoto(this.stack[i],r,!1)>=0)return n<<19|65536|r}}else{let e=n(t,i+1);if(null!=e)return e}}})};return n(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new x8(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class x8{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class x9{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e>>19;0==t?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(t-1)*3;let n=this.start.p.parser.getGoto(this.stack[this.base-3],65535&e,!0);this.state=n}}class we{constructor(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new we(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new we(this.stack,this.pos,this.index)}}function wt(e,t=Uint16Array){if("string"!=typeof e)return e;let n=null;for(let r=0,i=0;r<e.length;){let o=0;for(;;){let t=e.charCodeAt(r++),n=!1;if(126==t){o=65535;break}t>=92&&t--,t>=34&&t--;let i=t-32;if(i>=46&&(i-=46,n=!0),o+=i,n)break;o*=46}n?n[i++]=o:n=new t(o)}return n}class wn{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}let wr=new wn;class wi{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=wr,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let n=this.range,r=this.rangeIndex,i=this.pos+e;for(;i<n.from;){if(!r)return null;let e=this.ranges[--r];i-=n.from-e.to,n=e}for(;t<0?i>n.to:i>=n.to;){if(r==this.ranges.length-1)return null;let e=this.ranges[++r];i+=e.from-n.to,n=e}return i}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,n,r;if(t>=0&&t<this.chunk.length)n=this.pos+e,r=this.chunk.charCodeAt(t);else{let t=this.resolveOffset(e,1);if(null==t)return -1;if((n=t)>=this.chunk2Pos&&n<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(n-this.chunk2Pos);else{let e=this.rangeIndex,t=this.range;for(;t.to<=n;)t=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=n),n+this.chunk2.length>t.to&&(this.chunk2=this.chunk2.slice(0,t.to-n)),r=this.chunk2.charCodeAt(0)}}return n>=this.token.lookAhead&&(this.token.lookAhead=n+1),r}acceptToken(e,t=0){let n=t?this.resolveOffset(t,-1):this.pos;if(null==n||n<this.token.start)throw RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=wr,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let n="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(n+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return n}}class wo{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:n}=t.p;!function(e,t,n,r,i,o){let s=0,a=1<<r,{dialect:l}=n.p.parser;e:for(;a&e[s];){let n=e[s+1];for(let r=s+3;r<n;r+=2)if((e[r+1]&a)>0){let n=e[r];if(l.allows(n)&&(-1==t.token.value||t.token.value==n||function(e,t,n,r){let i=wa(n,r,t);return i<0||wa(n,r,e)<i}(n,t.token.value,i,o))){t.acceptToken(n);break}}let r=t.next,c=0,u=e[s+2];if(t.next<0&&u>c&&65535==e[n+3*u-3]){s=e[n+3*u-1];continue}for(;c<u;){let i=c+u>>1,o=n+i+(i<<1),a=e[o],l=e[o+1]||65536;if(r<a)u=i;else if(r>=l)c=i+1;else{s=e[o+2],t.advance();continue e}}break}}(this.data,e,t,this.id,n.data,n.tokenPrecTable)}}wo.prototype.contextual=wo.prototype.fallback=wo.prototype.extend=!1,wo.prototype.fallback=wo.prototype.extend=!1;class ws{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function wa(e,t,n){for(let r=t,i;65535!=(i=e[r]);r++)if(i==n)return r-t;return -1}let wl="u">typeof D&&D.env&&/\bparse\b/.test(D.env.LOG),wc=null;function wu(e,t,n){let r=e.cursor(p.IncludeAnonymous);for(r.moveTo(t);;)if(!(n<0?r.childBefore(t):r.childAfter(t)))for(;;){if((n<0?r.to<t:r.from>t)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,t-25)):Math.min(e.length,Math.max(r.from+1,t+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:e.length}}class wh{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?wu(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?wu(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let n=this.trees[t],r=this.index[t];if(r==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let i=n.children[r],o=this.start[t]+n.positions[r];if(o>e)return this.nextStart=o,null;if(i instanceof mb){if(o==e){if(o<this.safeFrom)return null;let e=o+i.length;if(e<=this.safeTo){let t=i.prop(mh.lookAhead);if(!t||e+t<this.fragment.to)return i}}this.index[t]++,o+i.length>=Math.max(this.safeFrom,e)&&(this.trees.push(i),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+i.length}}}class wd{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(e=>new wn)}getActions(e){let t=0,n=null,{parser:r}=e.p,{tokenizers:i}=r,o=r.stateSlot(e.state,3),s=e.curContext?e.curContext.hash:0,a=0;for(let r=0;r<i.length;r++){if(!(1<<r&o))continue;let l=i[r],c=this.tokens[r];if(!(n&&!l.fallback)&&((l.contextual||c.start!=e.pos||c.mask!=o||c.context!=s)&&(this.updateCachedToken(c,l,e),c.mask=o,c.context=s),c.lookAhead>c.end+25&&(a=Math.max(c.lookAhead,a)),0!=c.value)){let r=t;if(c.extended>-1&&(t=this.addActions(e,c.extended,c.end,t)),t=this.addActions(e,c.value,c.end,t),!l.extend&&(n=c,t>r))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),n||e.pos!=this.stream.end||((n=new wn).value=e.p.parser.eofTerm,n.start=n.end=e.pos,t=this.addActions(e,n.value,n.end,t)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new wn,{pos:n,p:r}=e;return t.start=n,t.end=Math.min(n+1,r.stream.end),t.value=n==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,n){let r=this.stream.clipPos(n.pos);if(t.token(this.stream.reset(r,e),n),e.value>-1){let{parser:t}=n.p;for(let r=0;r<t.specialized.length;r++)if(t.specialized[r]==e.value){let i=t.specializers[r](this.stream.read(e.start,e.end),n);if(i>=0&&n.p.parser.dialect.allows(i>>1)){1&i?e.extended=i>>1:e.value=i>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,n,r){for(let t=0;t<r;t+=3)if(this.actions[t]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=n,r}addActions(e,t,n,r){let{state:i}=e,{parser:o}=e.p,{data:s}=o;for(let e=0;e<2;e++)for(let a=o.stateSlot(i,e?2:1);;a+=3){if(65535==s[a]){if(1==s[a+1])a=wv(s,a+2);else{0==r&&2==s[a+1]&&(r=this.putAction(wv(s,a+2),t,n,r));break}}s[a]==t&&(r=this.putAction(wv(s,a+1),t,n,r))}return r}}class wf{constructor(e,t,n,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new wi(t,r),this.tokens=new wd(e,this.stream),this.topTerm=e.top[1];let{from:i}=r[0];this.stacks=[x7.start(this,e.top[0],i)],this.fragments=n.length&&this.stream.end-i>4*e.bufferLength?new wh(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,n=this.stacks=[],r,i;if(this.bigReductionCount>300&&1==e.length){let[t]=e;for(;t.forceReduce()&&t.stack.length&&t.stack[t.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let s=e[o];for(;;){if(this.tokens.mainToken=null,s.pos>t)n.push(s);else{if(this.advanceStack(s,n,e))continue;{r||(r=[],i=[]),r.push(s);let e=this.tokens.getMainToken(s);i.push(e.value,e.end)}}break}}if(!n.length){let e=r&&function(e){let t=null;for(let n of e){let e=n.p.stoppedAt;(n.pos==n.p.stream.end||null!=e&&n.pos>e)&&n.p.parser.stateFlag(n.state,2)&&(!t||t.score<n.score)&&(t=n)}return t}(r);if(e)return wl&&console.log("Finish with "+this.stackID(e)),this.stackToTree(e);if(this.parser.strict)throw wl&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&r){let e=null!=this.stoppedAt&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,i,n);if(e)return wl&&console.log("Force-finish "+this.stackID(e)),this.stackToTree(e.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(n.length>e)for(n.sort((e,t)=>t.score-e.score);n.length>e;)n.pop();n.some(e=>e.reducePos>t)&&this.recovering--}else if(n.length>1){e:for(let e=0;e<n.length-1;e++){let t=n[e];for(let r=e+1;r<n.length;r++){let i=n[r];if(t.sameState(i)||t.buffer.length>500&&i.buffer.length>500){if((t.score-i.score||t.buffer.length-i.buffer.length)>0)n.splice(r--,1);else{n.splice(e--,1);continue e}}}}n.length>12&&n.splice(12,n.length-12)}this.minStackPos=n[0].pos;for(let e=1;e<n.length;e++)n[e].pos<this.minStackPos&&(this.minStackPos=n[e].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,n){let r=e.pos,{parser:i}=this,o=wl?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,n=t?e.curContext.hash:0;for(let s=this.fragments.nodeAt(r);s;){let r=this.parser.nodeSet.types[s.type.id]==s.type?i.getGoto(e.state,s.type.id):-1;if(r>-1&&s.length&&(!t||(s.prop(mh.contextHash)||0)==n))return e.useNode(s,r),wl&&console.log(o+this.stackID(e)+` (via reuse of ${i.getName(s.type.id)})`),!0;if(!(s instanceof mb)||0==s.children.length||s.positions[0]>0)break;let a=s.children[0];if(a instanceof mb&&0==s.positions[0])s=a;else break}}let s=i.stateSlot(e.state,4);if(s>0)return e.reduce(s),wl&&console.log(o+this.stackID(e)+` (via always-reduce ${i.getName(65535&s)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let s=0;s<a.length;){let l=a[s++],c=a[s++],u=a[s++],h=s==a.length||!n,d=h?e:e.split(),f=this.tokens.mainToken;if(d.apply(l,c,f?f.start:d.pos,u),wl&&console.log(o+this.stackID(d)+` (via ${65536&l?`reduce of ${i.getName(65535&l)}`:"shift"} for ${i.getName(c)} @ ${r}${d==e?"":", split"})`),h)return!0;d.pos>r?t.push(d):n.push(d)}return!1}advanceFully(e,t){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return wp(e,t),!0}}runRecovery(e,t,n){let r=null,i=!1;for(let o=0;o<e.length;o++){let s=e[o],a=t[o<<1],l=t[(o<<1)+1],c=wl?this.stackID(s)+" -> ":"";if(s.deadEnd&&(i||(i=!0,s.restart(),wl&&console.log(c+this.stackID(s)+" (restarted)"),this.advanceFully(s,n))))continue;let u=s.split(),h=c;for(let e=0;u.forceReduce()&&e<10&&(wl&&console.log(h+this.stackID(u)+" (via force-reduce)"),!this.advanceFully(u,n));e++)wl&&(h=this.stackID(u)+" -> ");for(let e of s.recoverByInsert(a))wl&&console.log(c+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,n);this.stream.end>s.pos?(l==s.pos&&(l++,a=0),s.recoverByDelete(a,l),wl&&console.log(c+this.stackID(s)+` (via recover-delete ${this.parser.getName(a)})`),wp(s,n)):(!r||r.score<s.score)&&(r=s)}return r}stackToTree(e){return e.close(),mb.build({buffer:we.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(wc||(wc=new WeakMap)).get(e);return t||wc.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function wp(e,t){for(let n=0;n<t.length;n++){let r=t[n];if(r.pos==e.pos&&r.sameState(e)){t[n].score<e.score&&(t[n]=e);return}}t.push(e)}class wm{constructor(e,t,n){this.source=e,this.flags=t,this.disabled=n}allows(e){return!this.disabled||0==this.disabled[e]}}let wg=e=>e;class wy{constructor(e){this.start=e.start,this.shift=e.shift||wg,this.reduce=e.reduce||wg,this.reuse=e.reuse||wg,this.hash=e.hash||(()=>0),this.strict=!1!==e.strict}}class wb extends mL{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let n=0;n<e.repeatNodeCount;n++)t.push("");let n=Object.keys(e.topRules).map(t=>e.topRules[t][1]),r=[];for(let e=0;e<t.length;e++)r.push([]);function i(e,t,n){r[e].push([t,t.deserialize(String(n))])}if(e.nodeProps)for(let t of e.nodeProps){let e=t[0];"string"==typeof e&&(e=mh[e]);for(let n=1;n<t.length;){let r=t[n++];if(r>=0)i(r,e,t[n++]);else{let o=t[n+-r];for(let s=-r;s>0;s--)i(t[n++],e,o);n++}}}this.nodeSet=new mm(t.map((t,i)=>mp.define({name:i>=this.minRepeatTerm?void 0:t,id:i,props:r[i],top:n.indexOf(i)>-1,error:0==i,skipped:e.skippedNodes&&e.skippedNodes.indexOf(i)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=1024;let o=wt(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let e=0;e<this.specializerSpecs.length;e++)this.specialized[e]=this.specializerSpecs[e].term;this.specializers=this.specializerSpecs.map(wx),this.states=wt(e.states,Uint32Array),this.data=wt(e.stateData),this.goto=wt(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(e=>"number"==typeof e?new wo(o,e):e),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,n){let r=new wf(this,e,t,n);for(let i of this.wrappers)r=i(r,e,t,n);return r}getGoto(e,t,n=!1){let r=this.goto;if(t>=r[0])return -1;for(let i=r[t+1];;){let t=r[i++],o=1&t,s=r[i++];if(o&&n)return s;for(let n=i+(t>>1);i<n;i++)if(r[i]==e)return s;if(o)return -1}}hasAction(e,t){let n=this.data;for(let r=0;r<2;r++)for(let i=this.stateSlot(e,r?2:1),o;;i+=3){if(65535==(o=n[i])){if(1==n[i+1])o=n[i=wv(n,i+2)];else{if(2==n[i+1])return wv(n,i+2);break}}if(o==t||0==o)return wv(n,i+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,e=>e==t||null)}allActions(e,t){let n=this.stateSlot(e,4),r=n?t(n):void 0;for(let n=this.stateSlot(e,1);null==r;n+=3){if(65535==this.data[n]){if(1==this.data[n+1])n=wv(this.data,n+2);else break}r=t(wv(this.data,n+1))}return r}nextStates(e){let t=[];for(let n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n]){if(1==this.data[n+1])n=wv(this.data,n+2);else break}if(!(1&this.data[n+2])){let e=this.data[n+1];t.some((t,n)=>1&n&&t==e)||t.push(this.data[n],e)}}return t}configure(e){let t=Object.assign(Object.create(wb.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw RangeError(`Invalid top rule name ${e.top}`);t.top=n}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(t=>{let n=e.tokenizers.find(e=>e.from==t);return n?n.to:t})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((n,r)=>{let i=e.specializers.find(e=>e.from==n.external);if(!i)return n;let o=Object.assign(Object.assign({},n),{external:i.to});return t.specializers[r]=wx(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),n=t.map(()=>!1);if(e)for(let r of e.split(" ")){let e=t.indexOf(r);e>=0&&(n[e]=!0)}let r=null;for(let e=0;e<t.length;e++)if(!n[e])for(let n=this.dialects[t[e]],i;65535!=(i=this.data[n++]);)(r||(r=new Uint8Array(this.maxTerm+1)))[i]=1;return new wm(e,n,r)}static deserialize(e){return new wb(e)}}function wv(e,t){return e[t]|e[t+1]<<16}function wx(e){if(e.external){let t=+!!e.extend;return(n,r)=>e.external(n,r)<<1|t}return e.get}let ww=new Set([25,49,50,263,65,130,56,57,238,62,63,72,73,77,60,61,151,152,155,112]);function wk(e){return 10==e||13==e}function wO(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}let wS=new ws((e,t)=>{let n;if(e.next<0)e.acceptToken(199);else if(t.context.flags&wT)wk(e.next)&&e.acceptToken(198,1);else if(((n=e.peek(-1))<0||wk(n))&&t.canShift(197)){let t=0;for(;32==e.next||9==e.next;)e.advance(),t++;(10==e.next||13==e.next||35==e.next)&&e.acceptToken(197,-t)}else wk(e.next)&&e.acceptToken(196,1)},{contextual:!0}),wC=new ws((e,t)=>{let n=t.context;if(n.flags)return;let r=e.peek(-1);if(10==r||13==r){let t=0,r=0;for(;;){if(32==e.next)t++;else if(9==e.next)t+=8-t%8;else break;e.advance(),r++}t!=n.indent&&10!=e.next&&13!=e.next&&35!=e.next&&(t<n.indent?e.acceptToken(195,-r):e.acceptToken(194))}}),wT=1;function wA(e,t,n){this.parent=e,this.indent=t,this.flags=n,this.hash=(e?e.hash+e.hash<<8:0)+t+(t<<4)+n+(n<<6)}let wE=new wA(null,0,0),wM=new Map([[241,0],[242,4],[243,8],[244,12],[245,16],[246,20],[247,24],[248,28],[249,32],[250,36],[251,40],[252,44],[253,48],[254,52],[255,56],[256,60]].map(([e,t])=>[e,2|t])),wN=new wy({start:wE,reduce:(e,t,n,r)=>e.flags&wT&&ww.has(t)||(71==t||72==t)&&2&e.flags?e.parent:e,shift:(e,t,n,r)=>194==t?new wA(e,function(e){let t=0;for(let n=0;n<e.length;n++)t+=9==e.charCodeAt(n)?8-t%8:1;return t}(r.read(r.pos,n.pos)),0):195==t?e.parent:24==t||55==t||59==t||3==t?new wA(e,0,wT):wM.has(t)?new wA(e,0,wM.get(t)|e.flags&wT):e,hash:e=>e.hash}),w_=new ws(e=>{for(let t=0;t<5;t++){if(e.next!="print".charCodeAt(t))return;e.advance()}if(!/\w/.test(String.fromCharCode(e.next)))for(let t=0;;t++){let n=e.peek(t);if(32!=n&&9!=n){40!=n&&46!=n&&10!=n&&13!=n&&35!=n&&e.acceptToken(1);return}}}),wj=new ws((e,t)=>{let{flags:n}=t.context,r=4&n?34:39,i=(8&n)>0,o=!(16&n),s=(32&n)>0,a=e.pos;for(;!(e.next<0);)if(s&&123==e.next){if(123==e.peek(1))e.advance(2);else{if(e.pos==a){e.acceptToken(3,1);return}break}}else if(o&&92==e.next){if(e.pos==a){e.advance();let t=e.next;t>=0&&(e.advance(),function(e,t){if(111==t)for(let t=0;t<2&&e.next>=48&&e.next<=55;t++)e.advance();else if(120==t)for(let t=0;t<2&&wO(e.next);t++)e.advance();else if(117==t)for(let t=0;t<4&&wO(e.next);t++)e.advance();else if(85==t)for(let t=0;t<8&&wO(e.next);t++)e.advance();else if(78==t&&123==e.next){for(e.advance();e.next>=0&&125!=e.next&&39!=e.next&&34!=e.next&&10!=e.next;)e.advance();125==e.next&&e.advance()}}(e,t)),e.acceptToken(2);return}break}else if(e.next!=r||i&&(e.peek(1)!=r||e.peek(2)!=r)){if(10==e.next){if(i)e.advance();else if(e.pos==a){e.acceptToken(201);return}break}e.advance()}else{if(e.pos==a){e.acceptToken(201,i?3:1);return}break}e.pos>a&&e.acceptToken(200)}),wD=mV({'async "*" "**" FormatConversion FormatSpec':ge.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield match case":ge.controlKeyword,"in not and or is del":ge.operatorKeyword,"from def class global nonlocal lambda":ge.definitionKeyword,import:ge.moduleKeyword,"with as print":ge.keyword,Boolean:ge.bool,None:ge.null,VariableName:ge.variableName,"CallExpression/VariableName":ge.function(ge.variableName),"FunctionDefinition/VariableName":ge.function(ge.definition(ge.variableName)),"ClassDefinition/VariableName":ge.definition(ge.className),PropertyName:ge.propertyName,"CallExpression/MemberExpression/PropertyName":ge.function(ge.propertyName),Comment:ge.lineComment,Number:ge.number,String:ge.string,FormatString:ge.special(ge.string),Escape:ge.escape,UpdateOp:ge.updateOperator,"ArithOp!":ge.arithmeticOperator,BitOp:ge.bitwiseOperator,CompareOp:ge.compareOperator,AssignOp:ge.definitionOperator,Ellipsis:ge.punctuation,At:ge.meta,"( )":ge.paren,"[ ]":ge.squareBracket,"{ }":ge.brace,".":ge.derefOperator,", ;":ge.separator}),wP={__proto__:null,await:44,or:54,and:56,in:60,not:62,is:64,if:70,else:72,lambda:76,yield:94,from:96,async:102,for:104,None:162,True:164,False:164,del:178,pass:182,break:186,continue:190,return:194,raise:202,import:206,as:208,global:212,nonlocal:214,assert:218,type:223,elif:236,while:240,try:246,except:248,finally:250,with:254,def:258,class:268,match:279,case:285},wR=wb.deserialize({version:14,states:"##jO`QeOOP$}OSOOO&WQtO'#HUOOQS'#Co'#CoOOQS'#Cp'#CpO'vQdO'#CnO*UQtO'#HTOOQS'#HU'#HUOOQS'#DU'#DUOOQS'#HT'#HTO*rQdO'#D_O+VQdO'#DfO+gQdO'#DjO+zOWO'#DuO,VOWO'#DvO.[QtO'#GuOOQS'#Gu'#GuO'vQdO'#GtO0ZQtO'#GtOOQS'#Eb'#EbO0rQdO'#EcOOQS'#Gs'#GsO0|QdO'#GrOOQV'#Gr'#GrO1XQdO'#FYOOQS'#G^'#G^O1^QdO'#FXOOQV'#IS'#ISOOQV'#Gq'#GqOOQV'#Fq'#FqQ`QeOOO'vQdO'#CqO1lQdO'#C}O1sQdO'#DRO2RQdO'#HYO2cQtO'#EVO'vQdO'#EWOOQS'#EY'#EYOOQS'#E['#E[OOQS'#E^'#E^O2wQdO'#E`O3_QdO'#EdO3rQdO'#EfO3zQtO'#EfO1XQdO'#EiO0rQdO'#ElO1XQdO'#EnO0rQdO'#EtO0rQdO'#EwO4VQdO'#EyO4^QdO'#FOO4iQdO'#EzO0rQdO'#FOO1XQdO'#FQO1XQdO'#FVO4nQdO'#F[P4uOdO'#GpPOOO)CBd)CBdOOQS'#Ce'#CeOOQS'#Cf'#CfOOQS'#Cg'#CgOOQS'#Ch'#ChOOQS'#Ci'#CiOOQS'#Cj'#CjOOQS'#Cl'#ClO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO5TQdO'#DoOOQS,5:Y,5:YO5hQdO'#HdOOQS,5:],5:]O5uQ!fO,5:]O5zQtO,59YO1lQdO,59bO1lQdO,59bO1lQdO,59bO8jQdO,59bO8oQdO,59bO8vQdO,59jO8}QdO'#HTO:TQdO'#HSOOQS'#HS'#HSOOQS'#D['#D[O:lQdO,59aO'vQdO,59aO:zQdO,59aOOQS,59y,59yO;PQdO,5:RO'vQdO,5:ROOQS,5:Q,5:QO;_QdO,5:QO;dQdO,5:XO'vQdO,5:XO'vQdO,5:VOOQS,5:U,5:UO;uQdO,5:UO;zQdO,5:WOOOW'#Fy'#FyO<POWO,5:aOOQS,5:a,5:aO<[QdO'#HwOOOW'#Dw'#DwOOOW'#Fz'#FzO<lOWO,5:bOOQS,5:b,5:bOOQS'#F}'#F}O<zQtO,5:iO?lQtO,5=`O@VQ#xO,5=`O@vQtO,5=`OOQS,5:},5:}OA_QeO'#GWOBqQdO,5;^OOQV,5=^,5=^OB|QtO'#IPOCkQdO,5;tOOQS-E:[-E:[OOQV,5;s,5;sO4dQdO'#FQOOQV-E9o-E9oOCsQtO,59]OEzQtO,59iOFeQdO'#HVOFpQdO'#HVO1XQdO'#HVOF{QdO'#DTOGTQdO,59mOGYQdO'#HZO'vQdO'#HZO0rQdO,5=tOOQS,5=t,5=tO0rQdO'#EROOQS'#ES'#ESOGwQdO'#GPOHXQdO,58|OHXQdO,58|O*xQdO,5:oOHgQtO'#H]OOQS,5:r,5:rOOQS,5:z,5:zOHzQdO,5;OOI]QdO'#IOO1XQdO'#H}OOQS,5;Q,5;QOOQS'#GT'#GTOIqQtO,5;QOJPQdO,5;QOJUQdO'#IQOOQS,5;T,5;TOJdQdO'#H|OOQS,5;W,5;WOJuQdO,5;YO4iQdO,5;`O4iQdO,5;cOJ}QtO'#ITO'vQdO'#ITOKXQdO,5;eO4VQdO,5;eO0rQdO,5;jO1XQdO,5;lOK^QeO'#EuOLjQgO,5;fO!!kQdO'#IUO4iQdO,5;jO!!vQdO,5;lO!#OQdO,5;qO!#ZQtO,5;vO'vQdO,5;vPOOO,5=[,5=[P!#bOSO,5=[P!#jOdO,5=[O!&bQtO1G.jO!&iQtO1G.jO!)YQtO1G.jO!)dQtO1G.jO!+}QtO1G.jO!,bQtO1G.jO!,uQdO'#HcO!-TQtO'#GuO0rQdO'#HcO!-_QdO'#HbOOQS,5:Z,5:ZO!-gQdO,5:ZO!-lQdO'#HeO!-wQdO'#HeO!.[QdO,5>OOOQS'#Ds'#DsOOQS1G/w1G/wOOQS1G.|1G.|O!/[QtO1G.|O!/cQtO1G.|O1lQdO1G.|O!0OQdO1G/UOOQS'#DZ'#DZO0rQdO,59tOOQS1G.{1G.{O!0VQdO1G/eO!0gQdO1G/eO!0oQdO1G/fO'vQdO'#H[O!0tQdO'#H[O!0yQtO1G.{O!1ZQdO,59iO!2aQdO,5=zO!2qQdO,5=zO!2yQdO1G/mO!3OQtO1G/mOOQS1G/l1G/lO!3`QdO,5=uO!4VQdO,5=uO0rQdO1G/qO!4tQdO1G/sO!4yQtO1G/sO!5ZQtO1G/qOOQS1G/p1G/pOOQS1G/r1G/rOOOW-E9w-E9wOOQS1G/{1G/{O!5kQdO'#HxO0rQdO'#HxO!5|QdO,5>cOOOW-E9x-E9xOOQS1G/|1G/|OOQS-E9{-E9{O!6[Q#xO1G2zO!6{QtO1G2zO'vQdO,5<jOOQS,5<j,5<jOOQS-E9|-E9|OOQS,5<r,5<rOOQS-E:U-E:UOOQV1G0x1G0xO1XQdO'#GRO!7dQtO,5>kOOQS1G1`1G1`O!8RQdO1G1`OOQS'#DV'#DVO0rQdO,5=qOOQS,5=q,5=qO!8WQdO'#FrO!8cQdO,59oO!8kQdO1G/XO!8uQtO,5=uOOQS1G3`1G3`OOQS,5:m,5:mO!9fQdO'#GtOOQS,5<k,5<kOOQS-E9}-E9}O!9wQdO1G.hOOQS1G0Z1G0ZO!:VQdO,5=wO!:gQdO,5=wO0rQdO1G0jO0rQdO1G0jO!:xQdO,5>jO!;ZQdO,5>jO1XQdO,5>jO!;lQdO,5>iOOQS-E:R-E:RO!;qQdO1G0lO!;|QdO1G0lO!<RQdO,5>lO!<aQdO,5>lO!<oQdO,5>hO!=VQdO,5>hO!=hQdO'#EpO0rQdO1G0tO!=sQdO1G0tO!=xQgO1G0zO!AvQgO1G0}O!EqQdO,5>oO!E{QdO,5>oO!FTQtO,5>oO0rQdO1G1PO!F_QdO1G1PO4iQdO1G1UO!!vQdO1G1WOOQV,5;a,5;aO!FdQfO,5;aO!FiQgO1G1QO!JjQdO'#GZO4iQdO1G1QO4iQdO1G1QO!JzQdO,5>pO!KXQdO,5>pO1XQdO,5>pOOQV1G1U1G1UO!KaQdO'#FSO!KrQ!fO1G1WO!KzQdO1G1WOOQV1G1]1G1]O4iQdO1G1]O!LPQdO1G1]O!LXQdO'#F^OOQV1G1b1G1bO!#ZQtO1G1bPOOO1G2v1G2vP!L^OSO1G2vOOQS,5=},5=}OOQS'#Dp'#DpO0rQdO,5=}O!LfQdO,5=|O!LyQdO,5=|OOQS1G/u1G/uO!MRQdO,5>PO!McQdO,5>PO!MkQdO,5>PO!NOQdO,5>PO!N`QdO,5>POOQS1G3j1G3jOOQS7+$h7+$hO!8kQdO7+$pO#!RQdO1G.|O#!YQdO1G.|OOQS1G/`1G/`OOQS,5<`,5<`O'vQdO,5<`OOQS7+%P7+%PO#!aQdO7+%POOQS-E9r-E9rOOQS7+%Q7+%QO#!qQdO,5=vO'vQdO,5=vOOQS7+$g7+$gO#!vQdO7+%PO##OQdO7+%QO##TQdO1G3fOOQS7+%X7+%XO##eQdO1G3fO##mQdO7+%XOOQS,5<_,5<_O'vQdO,5<_O##rQdO1G3aOOQS-E9q-E9qO#$iQdO7+%]OOQS7+%_7+%_O#$wQdO1G3aO#%fQdO7+%_O#%kQdO1G3gO#%{QdO1G3gO#&TQdO7+%]O#&YQdO,5>dO#&sQdO,5>dO#&sQdO,5>dOOQS'#Dx'#DxO#'UO&jO'#DzO#'aO`O'#HyOOOW1G3}1G3}O#'fQdO1G3}O#'nQdO1G3}O#'yQ#xO7+(fO#(jQtO1G2UP#)TQdO'#GOOOQS,5<m,5<mOOQS-E:P-E:POOQS7+&z7+&zOOQS1G3]1G3]OOQS,5<^,5<^OOQS-E9p-E9pOOQS7+$s7+$sO#)bQdO,5=`O#){QdO,5=`O#*^QtO,5<aO#*qQdO1G3cOOQS-E9s-E9sOOQS7+&U7+&UO#+RQdO7+&UO#+aQdO,5<nO#+uQdO1G4UOOQS-E:Q-E:QO#,WQdO1G4UOOQS1G4T1G4TOOQS7+&W7+&WO#,iQdO7+&WOOQS,5<p,5<pO#,tQdO1G4WOOQS-E:S-E:SOOQS,5<l,5<lO#-SQdO1G4SOOQS-E:O-E:OO1XQdO'#EqO#-jQdO'#EqO#-uQdO'#IRO#-}QdO,5;[OOQS7+&`7+&`O0rQdO7+&`O#.SQgO7+&fO!JmQdO'#GXO4iQdO7+&fO4iQdO7+&iO#2QQtO,5<tO'vQdO,5<tO#2[QdO1G4ZOOQS-E:W-E:WO#2fQdO1G4ZO4iQdO7+&kO0rQdO7+&kOOQV7+&p7+&pO!KrQ!fO7+&rO!KzQdO7+&rO`QeO1G0{OOQV-E:X-E:XO4iQdO7+&lO4iQdO7+&lOOQV,5<u,5<uO#2nQdO,5<uO!JmQdO,5<uOOQV7+&l7+&lO#2yQgO7+&lO#6tQdO,5<vO#7PQdO1G4[OOQS-E:Y-E:YO#7^QdO1G4[O#7fQdO'#IWO#7tQdO'#IWO1XQdO'#IWOOQS'#IW'#IWO#8PQdO'#IVOOQS,5;n,5;nO#8XQdO,5;nO0rQdO'#FUOOQV7+&r7+&rO4iQdO7+&rOOQV7+&w7+&wO4iQdO7+&wO#8^QfO,5;xOOQV7+&|7+&|POOO7+(b7+(bO#8cQdO1G3iOOQS,5<c,5<cO#8qQdO1G3hOOQS-E9u-E9uO#9UQdO,5<dO#9aQdO,5<dO#9tQdO1G3kOOQS-E9v-E9vO#:UQdO1G3kO#:^QdO1G3kO#:nQdO1G3kO#:UQdO1G3kOOQS<<H[<<H[O#:yQtO1G1zOOQS<<Hk<<HkP#;WQdO'#FtO8vQdO1G3bO#;eQdO1G3bO#;jQdO<<HkOOQS<<Hl<<HlO#;zQdO7+)QOOQS<<Hs<<HsO#<[QtO1G1yP#<{QdO'#FsO#=YQdO7+)RO#=jQdO7+)RO#=rQdO<<HwO#=wQdO7+({OOQS<<Hy<<HyO#>nQdO,5<bO'vQdO,5<bOOQS-E9t-E9tOOQS<<Hw<<HwOOQS,5<g,5<gO0rQdO,5<gO#>sQdO1G4OOOQS-E9y-E9yO#?^QdO1G4OO<[QdO'#H{OOOO'#D{'#D{OOOO'#F|'#F|O#?oO&jO,5:fOOOW,5>e,5>eOOOW7+)i7+)iO#?zQdO7+)iO#@SQdO1G2zO#@mQdO1G2zP'vQdO'#FuO0rQdO<<IpO1XQdO1G2YP1XQdO'#GSO#AOQdO7+)pO#AaQdO7+)pOOQS<<Ir<<IrP1XQdO'#GUP0rQdO'#GQOOQS,5;],5;]O#ArQdO,5>mO#BQQdO,5>mOOQS1G0v1G0vOOQS<<Iz<<IzOOQV-E:V-E:VO4iQdO<<JQOOQV,5<s,5<sO4iQdO,5<sOOQV<<JQ<<JQOOQV<<JT<<JTO#BYQtO1G2`P#BdQdO'#GYO#BkQdO7+)uO#BuQgO<<JVO4iQdO<<JVOOQV<<J^<<J^O4iQdO<<J^O!KrQ!fO<<J^O#FpQgO7+&gOOQV<<JW<<JWO#FzQgO<<JWOOQV1G2a1G2aO1XQdO1G2aO#JuQdO1G2aO4iQdO<<JWO1XQdO1G2bP0rQdO'#G[O#KQQdO7+)vO#K_QdO7+)vOOQS'#FT'#FTO0rQdO,5>rO#KgQdO,5>rOOQS,5>r,5>rO#KrQdO,5>qO#LTQdO,5>qOOQS1G1Y1G1YOOQS,5;p,5;pOOQV<<Jc<<JcO#L]QdO1G1dOOQS7+)T7+)TP#LbQdO'#FwO#LrQdO1G2OO#MVQdO1G2OO#MgQdO1G2OP#MrQdO'#FxO#NPQdO7+)VO#NaQdO7+)VO#NaQdO7+)VO#NiQdO7+)VO#NyQdO7+(|O8vQdO7+(|OOQSAN>VAN>VO$ dQdO<<LmOOQSAN>cAN>cO0rQdO1G1|O$ tQtO1G1|P$!OQdO'#FvOOQS1G2R1G2RP$!]QdO'#F{O$!jQdO7+)jO$#TQdO,5>gOOOO-E9z-E9zOOOW<<MT<<MTO$#cQdO7+(fOOQSAN?[AN?[OOQS7+'t7+'tO$#|QdO<<M[OOQS,5<q,5<qO$$_QdO1G4XOOQS-E:T-E:TOOQVAN?lAN?lOOQV1G2_1G2_O4iQdOAN?qO$$mQgOAN?qOOQVAN?xAN?xO4iQdOAN?xOOQV<<JR<<JRO4iQdOAN?rO4iQdO7+'{OOQV7+'{7+'{O1XQdO7+'{OOQVAN?rAN?rOOQS7+'|7+'|O$(hQdO<<MbOOQS1G4^1G4^O0rQdO1G4^OOQS,5<w,5<wO$(uQdO1G4]OOQS-E:Z-E:ZOOQU'#G_'#G_O$)WQfO7+'OO$)cQdO'#F_O$*jQdO7+'jO$*zQdO7+'jOOQS7+'j7+'jO$+VQdO<<LqO$+gQdO<<LqO$+gQdO<<LqO$+oQdO'#H^OOQS<<Lh<<LhO$+yQdO<<LhOOQS7+'h7+'hOOQS'#D|'#D|OOOO1G4R1G4RO$,dQdO1G4RO$,lQdO1G4RP!=hQdO'#GVOOQVG25]G25]O4iQdOG25]OOQVG25dG25dOOQVG25^G25^OOQV<<Kg<<KgO4iQdO<<KgOOQS7+)x7+)xP$,wQdO'#G]OOQU-E:]-E:]OOQV<<Jj<<JjO$-kQtO'#FaOOQS'#Fc'#FcO$-{QdO'#FbO$.mQdO'#FbOOQS'#Fb'#FbO$.rQdO'#IYO$)cQdO'#FiO$)cQdO'#FiO$/ZQdO'#FjO$)cQdO'#FkO$/bQdO'#IZOOQS'#IZ'#IZO$0PQdO,5;yOOQS<<KU<<KUO$0XQdO<<KUO$0iQdOANB]O$0yQdOANB]O$1RQdO'#H_OOQS'#H_'#H_O1sQdO'#DcO$1lQdO,5=xOOQSANBSANBSOOOO7+)m7+)mO$2TQdO7+)mOOQVLD*wLD*wOOQVANARANARO5uQ!fO'#GaO$2]QtO,5<SO$)cQdO'#FmOOQS,5<W,5<WOOQS'#Fd'#FdO$2}QdO,5;|O$3SQdO,5;|OOQS'#Fg'#FgO$)cQdO'#G`O$3tQdO,5<QO$4`QdO,5>tO$4pQdO,5>tO1XQdO,5<PO$5RQdO,5<TO$5WQdO,5<TO$)cQdO'#I[O$5]QdO'#I[O$5bQdO,5<UOOQS,5<V,5<VO'vQdO'#FpOOQU1G1e1G1eO4iQdO1G1eOOQSAN@pAN@pO$5gQdOG27wO$5wQdO,59}OOQS1G3d1G3dOOOO<<MX<<MXOOQS,5<{,5<{OOQS-E:_-E:_O$5|QtO'#FaO$6TQdO'#I]O$6cQdO'#I]O$6kQdO,5<XOOQS1G1h1G1hO$6pQdO1G1hO$6uQdO,5<zOOQS-E:^-E:^O$7aQdO,5=OO$7xQdO1G4`OOQS-E:b-E:bOOQS1G1k1G1kOOQS1G1o1G1oO$8YQdO,5>vO$)cQdO,5>vOOQS1G1p1G1pO$8hQtO,5<[OOQU7+'P7+'PO$+oQdO1G/iO$)cQdO,5<YO$8oQdO,5>wO$8vQdO,5>wOOQS1G1s1G1sOOQS7+'S7+'SP$)cQdO'#GdO$9OQdO1G4bO$9YQdO1G4bO$9bQdO1G4bOOQS7+%T7+%TO$9pQdO1G1tO$:OQtO'#FaO$:VQdO,5<}OOQS,5<},5<}O$:eQdO1G4cOOQS-E:a-E:aO$)cQdO,5<|O$:lQdO,5<|O$:qQdO7+)|OOQS-E:`-E:`O$:{QdO7+)|O$)cQdO,5<ZP$)cQdO'#GcO$;TQdO1G2hO$)cQdO1G2hP$;cQdO'#GbO$;jQdO<<MhO$;tQdO1G1uO$<SQdO7+(SO8vQdO'#C}O8vQdO,59bO8vQdO,59bO8vQdO,59bO$<bQtO,5=`O8vQdO1G.|O0rQdO1G/XO0rQdO7+$pP$<uQdO'#GOO'vQdO'#GtO$=SQdO,59bO$=XQdO,59bO$=`QdO,59mO$=eQdO1G/UO1sQdO'#DRO8vQdO,59j",stateData:"$>O~O%cOS%^OSSOS%]PQ~OPdOVaOfoOhYOopOs!POvqO!PrO!Q{O!T!SO!U!RO!XZO!][O!h`O!r`O!s`O!t`O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#l!QO#o!TO#s!UO#u!VO#z!WO#}hO$P!XO%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~O%]!YO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%j![O%k!]O%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aO~Ok%xXl%xXm%xXn%xXo%xXp%xXs%xXz%xX{%xX!x%xX#g%xX%[%xX%_%xX%z%xXg%xX!T%xX!U%xX%{%xX!W%xX![%xX!Q%xX#[%xXt%xX!m%xX~P%SOfoOhYO!XZO!][O!h`O!r`O!s`O!t`O%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~Oz%wX{%wX#g%wX%[%wX%_%wX%z%wX~Ok!pOl!qOm!oOn!oOo!rOp!sOs!tO!x%wX~P)pOV!zOg!|Oo0cOv0qO!PrO~P'vOV#OOo0cOv0qO!W#PO~P'vOV#SOa#TOo0cOv0qO![#UO~P'vOQ#XO%`#XO%a#ZO~OQ#^OR#[O%`#^O%a#`O~OV%iX_%iXa%iXh%iXk%iXl%iXm%iXn%iXo%iXp%iXs%iXz%iX!X%iX!f%iX%j%iX%k%iX%l%iX%m%iX%n%iX%o%iX%p%iX%q%iX%r%iX%s%iXg%iX!T%iX!U%iX~O&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O{%iX!x%iX#g%iX%[%iX%_%iX%z%iX%{%iX!W%iX![%iX!Q%iX#[%iXt%iX!m%iX~P,eOz#dO{%hX!x%hX#g%hX%[%hX%_%hX%z%hX~Oo0cOv0qO~P'vO#g#gO%[#iO%_#iO~O%uWO~O!T#nO#u!VO#z!WO#}hO~OopO~P'vOV#sOa#tO%uWO{wP~OV#xOo0cOv0qO!Q#yO~P'vO{#{O!x$QO%z#|O#g!yX%[!yX%_!yX~OV#xOo0cOv0qO#g#SX%[#SX%_#SX~P'vOo0cOv0qO#g#WX%[#WX%_#WX~P'vOh$WO%uWO~O!f$YO!r$YO%uWO~OV$eO~P'vO!U$gO#s$hO#u$iO~O{$jO~OV$qO~P'vOS$sO%[$rO%_$rO%c$tO~OV$}Oa$}Og%POo0cOv0qO~P'vOo0cOv0qO{%SO~P'vO&Y%UO~Oa!bOh!iO!X!kO!f!mOVba_bakbalbambanbaobapbasbazba{ba!xba#gba%[ba%_ba%jba%kba%lba%mba%nba%oba%pba%qba%rba%sba%zbagba!Tba!Uba%{ba!Wba![ba!Qba#[batba!mba~On%ZO~Oo%ZO~P'vOo0cO~P'vOk0eOl0fOm0dOn0dOo0mOp0nOs0rOg%wX!T%wX!U%wX%{%wX!W%wX![%wX!Q%wX#[%wX!m%wX~P)pO%{%]Og%vXz%vX!T%vX!U%vX!W%vX{%vX~Og%_Oz%`O!T%dO!U%cO~Og%_O~Oz%gO!T%dO!U%cO!W&SX~O!W%kO~Oz%lO{%nO!T%dO!U%cO![%}X~O![%rO~O![%sO~OQ#XO%`#XO%a%uO~OV%wOo0cOv0qO!PrO~P'vOQ#^OR#[O%`#^O%a%zO~OV!qa_!qaa!qah!qak!qal!qam!qan!qao!qap!qas!qaz!qa{!qa!X!qa!f!qa!x!qa#g!qa%[!qa%_!qa%j!qa%k!qa%l!qa%m!qa%n!qa%o!qa%p!qa%q!qa%r!qa%s!qa%z!qag!qa!T!qa!U!qa%{!qa!W!qa![!qa!Q!qa#[!qat!qa!m!qa~P#yOz%|O{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P%SOV&OOopOvqO{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P'vOz%|O{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#g$zX%[$zX%_$zX~P'vO#g#gO%[&TO%_&TO~O!f&UOh&sX%[&sXz&sX#[&sX#g&sX%_&sX#Z&sXg&sX~Oh!iO%[&WO~Okealeameaneaoeapeaseazea{ea!xea#gea%[ea%_ea%zeagea!Tea!Uea%{ea!Wea![ea!Qea#[eatea!mea~P%SOsqazqa{qa#gqa%[qa%_qa%zqa~Ok!pOl!qOm!oOn!oOo!rOp!sO!xqa~PEcO%z&YOz%yX{%yX~O%uWOz%yX{%yX~Oz&]O{wX~O{&_O~Oz%lO#g%}X%[%}X%_%}Xg%}X{%}X![%}X!m%}X%z%}X~OV0lOo0cOv0qO!PrO~P'vO%z#|O#gUa%[Ua%_Ua~Oz&hO#g&PX%[&PX%_&PXn&PX~P%SOz&kO!Q&jO#g#Wa%[#Wa%_#Wa~Oz&lO#[&nO#g&rX%[&rX%_&rXg&rX~O!f$YO!r$YO#Z&qO%uWO~O#Z&qO~Oz&sO#g&tX%[&tX%_&tX~Oz&uO#g&pX%[&pX%_&pX{&pX~O!X&wO%z&xO~Oz&|On&wX~P%SOn'PO~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO%['UO~P'vOt'YO#p'WO#q'XOP#naV#naf#nah#nao#nas#nav#na!P#na!Q#na!T#na!U#na!X#na!]#na!h#na!r#na!s#na!t#na!{#na!}#na#P#na#R#na#T#na#X#na#Z#na#^#na#_#na#a#na#c#na#l#na#o#na#s#na#u#na#z#na#}#na$P#na%X#na%o#na%p#na%t#na%u#na&Z#na&[#na&]#na&^#na&_#na&`#na&a#na&b#na&c#na&d#na&e#na&f#na&g#na&h#na&i#na&j#na%Z#na%_#na~Oz'ZO#[']O{&xX~Oh'_O!X&wO~Oh!iO{$jO!X&wO~O{'eO~P%SO%['hO%_'hO~OS'iO%['hO%_'hO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%k!]O~P!#uO%kWi~P!#uOV!aO_!aOa!bOh!iO!X!kO!f!mO%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%m!_O%n!_O~P!&pO%mWi%nWi~P!&pOa!bOh!iO!X!kO!f!mOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%mWi%nWi%oWi%pWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~OV!aO_!aO%q!aO%r!aO%s!aO~P!)nOVWi_Wi%qWi%rWi%sWi~P!)nO!T%dO!U%cOg&VXz&VX~O%z'kO%{'kO~P,eOz'mOg&UX~Og'oO~Oz'pO{'rO!W&XX~Oo0cOv0qOz'pO{'sO!W&XX~P'vO!W'uO~Om!oOn!oOo!rOp!sOkjisjizji{ji!xji#gji%[ji%_ji%zji~Ol!qO~P!.aOlji~P!.aOk0eOl0fOm0dOn0dOo0mOp0nO~Ot'wO~P!/jOV'|Og'}Oo0cOv0qO~P'vOg'}Oz(OO~Og(QO~O!U(SO~Og(TOz(OO!T%dO!U%cO~P%SOk0eOl0fOm0dOn0dOo0mOp0nOgqa!Tqa!Uqa%{qa!Wqa![qa!Qqa#[qatqa!mqa~PEcOV'|Oo0cOv0qO!W&Sa~P'vOz(WO!W&Sa~O!W(XO~Oz(WO!T%dO!U%cO!W&Sa~P%SOV(]Oo0cOv0qO![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~P'vOz(^O![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~O![(aO~Oz(^O!T%dO!U%cO![%}a~P%SOz(dO!T%dO!U%cO![&Ta~P%SOz(gO{&lX![&lX!m&lX%z&lX~O{(kO![(mO!m(nO%z(jO~OV&OOopOvqO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~P'vOz(pO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~O!f&UOh&sa%[&saz&sa#[&sa#g&sa%_&sa#Z&sag&sa~O%[(uO~OV#sOa#tO%uWO~Oz&]O{wa~OopOvqO~P'vOz(^O#g%}a%[%}a%_%}ag%}a{%}a![%}a!m%}a%z%}a~P%SOz(zO#g%hX%[%hX%_%hX%z%hX~O%z#|O#gUi%[Ui%_Ui~O#g&Pa%[&Pa%_&Pan&Pa~P'vOz(}O#g&Pa%[&Pa%_&Pan&Pa~O%uWO#g&ra%[&ra%_&rag&ra~Oz)SO#g&ra%[&ra%_&rag&ra~Og)VO~OV)WOh$WO%uWO~O#Z)XO~O%uWO#g&ta%[&ta%_&ta~Oz)ZO#g&ta%[&ta%_&ta~Oo0cOv0qO#g&pa%[&pa%_&pa{&pa~P'vOz)^O#g&pa%[&pa%_&pa{&pa~OV)`Oa)`O%uWO~O%z)eO~Ot)hO#j)gOP#hiV#hif#hih#hio#his#hiv#hi!P#hi!Q#hi!T#hi!U#hi!X#hi!]#hi!h#hi!r#hi!s#hi!t#hi!{#hi!}#hi#P#hi#R#hi#T#hi#X#hi#Z#hi#^#hi#_#hi#a#hi#c#hi#l#hi#o#hi#s#hi#u#hi#z#hi#}#hi$P#hi%X#hi%o#hi%p#hi%t#hi%u#hi&Z#hi&[#hi&]#hi&^#hi&_#hi&`#hi&a#hi&b#hi&c#hi&d#hi&e#hi&f#hi&g#hi&h#hi&i#hi&j#hi%Z#hi%_#hi~Ot)iOP#kiV#kif#kih#kio#kis#kiv#ki!P#ki!Q#ki!T#ki!U#ki!X#ki!]#ki!h#ki!r#ki!s#ki!t#ki!{#ki!}#ki#P#ki#R#ki#T#ki#X#ki#Z#ki#^#ki#_#ki#a#ki#c#ki#l#ki#o#ki#s#ki#u#ki#z#ki#}#ki$P#ki%X#ki%o#ki%p#ki%t#ki%u#ki&Z#ki&[#ki&]#ki&^#ki&_#ki&`#ki&a#ki&b#ki&c#ki&d#ki&e#ki&f#ki&g#ki&h#ki&i#ki&j#ki%Z#ki%_#ki~OV)kOn&wa~P'vOz)lOn&wa~Oz)lOn&wa~P%SOn)pO~O%Y)tO~Ot)wO#p'WO#q)vOP#niV#nif#nih#nio#nis#niv#ni!P#ni!Q#ni!T#ni!U#ni!X#ni!]#ni!h#ni!r#ni!s#ni!t#ni!{#ni!}#ni#P#ni#R#ni#T#ni#X#ni#Z#ni#^#ni#_#ni#a#ni#c#ni#l#ni#o#ni#s#ni#u#ni#z#ni#}#ni$P#ni%X#ni%o#ni%p#ni%t#ni%u#ni&Z#ni&[#ni&]#ni&^#ni&_#ni&`#ni&a#ni&b#ni&c#ni&d#ni&e#ni&f#ni&g#ni&h#ni&i#ni&j#ni%Z#ni%_#ni~OV)zOo0cOv0qO{$jO~P'vOo0cOv0qO{&xa~P'vOz*OO{&xa~OV*SOa*TOg*WO%q*UO%uWO~O{$jO&{*YO~Oh'_O~Oh!iO{$jO~O%[*_O~O%[*aO%_*aO~OV$}Oa$}Oo0cOv0qOg&Ua~P'vOz*dOg&Ua~Oo0cOv0qO{*gO!W&Xa~P'vOz*hO!W&Xa~Oo0cOv0qOz*hO{*kO!W&Xa~P'vOo0cOv0qOz*hO!W&Xa~P'vOz*hO{*kO!W&Xa~Om0dOn0dOo0mOp0nOgjikjisjizji!Tji!Uji%{ji!Wji{ji![ji#gji%[ji%_ji!Qji#[jitji!mji%zji~Ol0fO~P!NkOlji~P!NkOV'|Og*pOo0cOv0qO~P'vOn*rO~Og*pOz*tO~Og*uO~OV'|Oo0cOv0qO!W&Si~P'vOz*vO!W&Si~O!W*wO~OV(]Oo0cOv0qO![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~P'vOz*zO!T%dO!U%cO![&Ti~Oz*}O![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~O![+OO~Oa+QOo0cOv0qO![&Ti~P'vOz*zO![&Ti~O![+SO~OV+UOo0cOv0qO{&la![&la!m&la%z&la~P'vOz+VO{&la![&la!m&la%z&la~O!]+YO&n+[O![!nX~O![+^O~O{(kO![+_O~O{(kO![+_O!m+`O~OV&OOopOvqO{%hq!x%hq#g%hq%[%hq%_%hq%z%hq~P'vOz$ri{$ri!x$ri#g$ri%[$ri%_$ri%z$ri~P%SOV&OOopOvqO~P'vOV&OOo0cOv0qO#g%ha%[%ha%_%ha%z%ha~P'vOz+aO#g%ha%[%ha%_%ha%z%ha~Oz$ia#g$ia%[$ia%_$ian$ia~P%SO#g&Pi%[&Pi%_&Pin&Pi~P'vOz+dO#g#Wq%[#Wq%_#Wq~O#[+eOz$va#g$va%[$va%_$vag$va~O%uWO#g&ri%[&ri%_&rig&ri~Oz+gO#g&ri%[&ri%_&rig&ri~OV+iOh$WO%uWO~O%uWO#g&ti%[&ti%_&ti~Oo0cOv0qO#g&pi%[&pi%_&pi{&pi~P'vO{#{Oz#eX!W#eX~Oz+mO!W&uX~O!W+oO~Ot+rO#j)gOP#hqV#hqf#hqh#hqo#hqs#hqv#hq!P#hq!Q#hq!T#hq!U#hq!X#hq!]#hq!h#hq!r#hq!s#hq!t#hq!{#hq!}#hq#P#hq#R#hq#T#hq#X#hq#Z#hq#^#hq#_#hq#a#hq#c#hq#l#hq#o#hq#s#hq#u#hq#z#hq#}#hq$P#hq%X#hq%o#hq%p#hq%t#hq%u#hq&Z#hq&[#hq&]#hq&^#hq&_#hq&`#hq&a#hq&b#hq&c#hq&d#hq&e#hq&f#hq&g#hq&h#hq&i#hq&j#hq%Z#hq%_#hq~On$|az$|a~P%SOV)kOn&wi~P'vOz+yOn&wi~Oz,TO{$jO#[,TO~O#q,VOP#nqV#nqf#nqh#nqo#nqs#nqv#nq!P#nq!Q#nq!T#nq!U#nq!X#nq!]#nq!h#nq!r#nq!s#nq!t#nq!{#nq!}#nq#P#nq#R#nq#T#nq#X#nq#Z#nq#^#nq#_#nq#a#nq#c#nq#l#nq#o#nq#s#nq#u#nq#z#nq#}#nq$P#nq%X#nq%o#nq%p#nq%t#nq%u#nq&Z#nq&[#nq&]#nq&^#nq&_#nq&`#nq&a#nq&b#nq&c#nq&d#nq&e#nq&f#nq&g#nq&h#nq&i#nq&j#nq%Z#nq%_#nq~O#[,WOz%Oa{%Oa~Oo0cOv0qO{&xi~P'vOz,YO{&xi~O{#{O%z,[Og&zXz&zX~O%uWOg&zXz&zX~Oz,`Og&yX~Og,bO~O%Y,eO~O!T%dO!U%cOg&Viz&Vi~OV$}Oa$}Oo0cOv0qOg&Ui~P'vO{,hOz$la!W$la~Oo0cOv0qO{,iOz$la!W$la~P'vOo0cOv0qO{*gO!W&Xi~P'vOz,lO!W&Xi~Oo0cOv0qOz,lO!W&Xi~P'vOz,lO{,oO!W&Xi~Og$hiz$hi!W$hi~P%SOV'|Oo0cOv0qO~P'vOn,qO~OV'|Og,rOo0cOv0qO~P'vOV'|Oo0cOv0qO!W&Sq~P'vOz$gi![$gi#g$gi%[$gi%_$gig$gi{$gi!m$gi%z$gi~P%SOV(]Oo0cOv0qO~P'vOa+QOo0cOv0qO![&Tq~P'vOz,sO![&Tq~O![,tO~OV(]Oo0cOv0qO![%}q#g%}q%[%}q%_%}qg%}q{%}q!m%}q%z%}q~P'vO{,uO~OV+UOo0cOv0qO{&li![&li!m&li%z&li~P'vOz,zO{&li![&li!m&li%z&li~O!]+YO&n+[O![!na~O{(kO![,}O~OV&OOo0cOv0qO#g%hi%[%hi%_%hi%z%hi~P'vOz-OO#g%hi%[%hi%_%hi%z%hi~O%uWO#g&rq%[&rq%_&rqg&rq~Oz-RO#g&rq%[&rq%_&rqg&rq~OV)`Oa)`O%uWO!W&ua~Oz-TO!W&ua~On$|iz$|i~P%SOV)kO~P'vOV)kOn&wq~P'vOt-XOP#myV#myf#myh#myo#mys#myv#my!P#my!Q#my!T#my!U#my!X#my!]#my!h#my!r#my!s#my!t#my!{#my!}#my#P#my#R#my#T#my#X#my#Z#my#^#my#_#my#a#my#c#my#l#my#o#my#s#my#u#my#z#my#}#my$P#my%X#my%o#my%p#my%t#my%u#my&Z#my&[#my&]#my&^#my&_#my&`#my&a#my&b#my&c#my&d#my&e#my&f#my&g#my&h#my&i#my&j#my%Z#my%_#my~O%Z-]O%_-]O~P`O#q-^OP#nyV#nyf#nyh#nyo#nys#nyv#ny!P#ny!Q#ny!T#ny!U#ny!X#ny!]#ny!h#ny!r#ny!s#ny!t#ny!{#ny!}#ny#P#ny#R#ny#T#ny#X#ny#Z#ny#^#ny#_#ny#a#ny#c#ny#l#ny#o#ny#s#ny#u#ny#z#ny#}#ny$P#ny%X#ny%o#ny%p#ny%t#ny%u#ny&Z#ny&[#ny&]#ny&^#ny&_#ny&`#ny&a#ny&b#ny&c#ny&d#ny&e#ny&f#ny&g#ny&h#ny&i#ny&j#ny%Z#ny%_#ny~Oz-aO{$jO#[-aO~Oo0cOv0qO{&xq~P'vOz-dO{&xq~O%z,[Og&zaz&za~OV*SOa*TO%q*UO%uWOg&ya~Oz-hOg&ya~O$S-lO~OV$}Oa$}Oo0cOv0qO~P'vOo0cOv0qO{-mOz$li!W$li~P'vOo0cOv0qOz$li!W$li~P'vO{-mOz$li!W$li~Oo0cOv0qO{*gO~P'vOo0cOv0qO{*gO!W&Xq~P'vOz-pO!W&Xq~Oo0cOv0qOz-pO!W&Xq~P'vOs-sO!T%dO!U%cOg&Oq!W&Oq![&Oqz&Oq~P!/jOa+QOo0cOv0qO![&Ty~P'vOz$ji![$ji~P%SOa+QOo0cOv0qO~P'vOV+UOo0cOv0qO~P'vOV+UOo0cOv0qO{&lq![&lq!m&lq%z&lq~P'vO{(kO![-xO!m-yO%z-wO~OV&OOo0cOv0qO#g%hq%[%hq%_%hq%z%hq~P'vO%uWO#g&ry%[&ry%_&ryg&ry~OV)`Oa)`O%uWO!W&ui~Ot-}OP#m!RV#m!Rf#m!Rh#m!Ro#m!Rs#m!Rv#m!R!P#m!R!Q#m!R!T#m!R!U#m!R!X#m!R!]#m!R!h#m!R!r#m!R!s#m!R!t#m!R!{#m!R!}#m!R#P#m!R#R#m!R#T#m!R#X#m!R#Z#m!R#^#m!R#_#m!R#a#m!R#c#m!R#l#m!R#o#m!R#s#m!R#u#m!R#z#m!R#}#m!R$P#m!R%X#m!R%o#m!R%p#m!R%t#m!R%u#m!R&Z#m!R&[#m!R&]#m!R&^#m!R&_#m!R&`#m!R&a#m!R&b#m!R&c#m!R&d#m!R&e#m!R&f#m!R&g#m!R&h#m!R&i#m!R&j#m!R%Z#m!R%_#m!R~Oo0cOv0qO{&xy~P'vOV*SOa*TO%q*UO%uWOg&yi~O$S-lO%Z.VO%_.VO~OV.aOh._O!X.^O!].`O!h.YO!s.[O!t.[O%p.XO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O~Oo0cOv0qOz$lq!W$lq~P'vO{.fOz$lq!W$lq~Oo0cOv0qO{*gO!W&Xy~P'vOz.gO!W&Xy~Oo0cOv.kO~P'vOs-sO!T%dO!U%cOg&Oy!W&Oy![&Oyz&Oy~P!/jO{(kO![.nO~O{(kO![.nO!m.oO~OV*SOa*TO%q*UO%uWO~Oh.tO!f.rOz$TX#[$TX%j$TXg$TX~Os$TX{$TX!W$TX![$TX~P$-VO%o.vO%p.vOs$UXz$UX{$UX#[$UX%j$UX!W$UXg$UX![$UX~O!h.xO~Oz.|O#[/OO%j.yOs&|X{&|X!W&|Xg&|X~Oa/RO~P$)oOh.tOs&}Xz&}X{&}X#[&}X%j&}X!W&}Xg&}X![&}X~Os/VO{$jO~Oo0cOv0qOz$ly!W$ly~P'vOo0cOv0qO{*gO!W&X!R~P'vOz/ZO!W&X!R~Og&RXs&RX!T&RX!U&RX!W&RX![&RXz&RX~P!/jOs-sO!T%dO!U%cOg&Qa!W&Qa![&Qaz&Qa~O{(kO![/^O~O!f.rOh$[as$[az$[a{$[a#[$[a%j$[a!W$[ag$[a![$[a~O!h/eO~O%o.vO%p.vOs$Uaz$Ua{$Ua#[$Ua%j$Ua!W$Uag$Ua![$Ua~O%j.yOs$Yaz$Ya{$Ya#[$Ya!W$Yag$Ya![$Ya~Os&|a{&|a!W&|ag&|a~P$)cOz/jOs&|a{&|a!W&|ag&|a~O!W/mO~Og/mO~O{/oO~O![/pO~Oo0cOv0qO{*gO!W&X!Z~P'vO{/sO~O%z/tO~P$-VOz/uO#[/OO%j.yOg'PX~Oz/uOg'PX~Og/wO~O!h/xO~O#[/OOs%Saz%Sa{%Sa%j%Sa!W%Sag%Sa![%Sa~O#[/OO%j.yOs%Waz%Wa{%Wa!W%Wag%Wa~Os&|i{&|i!W&|ig&|i~P$)cOz/zO#[/OO%j.yO!['Oa~O{$da~P%SOg'Pa~P$)cOz0SOg'Pa~Oa0UO!['Oi~P$)oOz0WO!['Oi~Oz0WO#[/OO%j.yO!['Oi~O#[/OO%j.yOg$biz$bi~O%z0ZO~P$-VO#[/OO%j.yOg%Vaz%Va~Og'Pi~P$)cO{0^O~Oa0UO!['Oq~P$)oOz0`O!['Oq~O#[/OO%j.yOz%Ui![%Ui~Oa0UO~P$)oOa0UO!['Oy~P$)oO#[/OO%j.yOg$ciz$ci~O#[/OO%j.yOz%Uq![%Uq~Oz+aO#g%ha%[%ha%_%ha%z%ha~P%SOV&OOo0cOv0qO~P'vOn0hO~Oo0hO~P'vO{0iO~Ot0jO~P!/jO&]&Z&j&h&i&g&f&d&e&c&b&`&a&_&^&[%u~",goto:"!=l'QPPPPPP'RP'Z*s+]+v,b,}-kP.YP'Z.y.y'ZPPP'Z2cPPPPPP2c5VPP5VP7g7p=xPP={>m>pPP'Z'ZPP?PPP'Z'ZPP'Z'Z'Z'Z'Z?T?}'ZP@QP@WD_G{HPPHSH^Hb'ZPPPHeHn'RP'R'RP'RP'RP'RP'RP'R'R'RP'RPP'RPP'RP'RPHtIQIYPIaIgPIaPIaIaPPPIaPKuPLOLYL`KuPIaLiPIaPLpLvPLzM`M}NhLzLzNnN{LzLzLzLz! a! g! j! o! r! |!!S!!`!!r!!x!#S!#Y!#v!#|!$S!$^!$d!$j!$|!%W!%^!%d!%n!%t!%z!&Q!&W!&^!&h!&n!&x!'O!'X!'_!'n!'v!(Q!(XPPPPPPPPPPP!(_!(b!(h!(q!({!)WPPPPPPPPPPPP!-z!/`!3`!6pPP!6x!7X!7b!8Z!8Q!8d!8j!8m!8p!8s!8{!9lPPPPPPPPPPPPPPPPP!9o!9s!9yP!:_!:c!:o!:x!;U!;l!;o!;r!;x!<O!<U!<XP!<a!<j!=f!=i]eOn#g$j)t,P'}`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0r}!cQ#c#p$R$d$p%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g!P!dQ#c#p$R$d$p$u%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g!R!eQ#c#p$R$d$p$u$v%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g!T!fQ#c#p$R$d$p$u$v$w%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g!V!gQ#c#p$R$d$p$u$v$w$x%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g!X!hQ#c#p$R$d$p$u$v$w$x$y%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g!]!hQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g'}TOTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0r&cVOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$h$j$}%S%Z%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/Z/s0c0d0e0f0h0i0j0k0n0r%mXOYZ[dnrxy}!P!Q!U!i!k#[#d#g#y#{#}$Q$h$j$}%S%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,s,u,w,y,z-O-d-f-m-p.f.g/Z0i0j0kQ#vqQ/[.kR0o0q't`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rh#jhz{$W$Z&l&q)S)X+f+g-RW#rq&].k0qQ$]|Q$a!OQ$n!VQ$o!WW$|!i'm*d,gS&[#s#tQ'S$iQ(s&UQ)U&nU)Y&s)Z+jW)a&w+m-T-{Q*Q']W*R'_,`-h.TQ+l)`S,_*S*TQ-Q+eQ-_,TQ-c,WQ.R-al.W-l.^._.a.z.|/R/j/o/t/y0U0Z0^Q/S.`Q/a.tQ/l/OU0P/u0S0[X0V/z0W0_0`R&Z#r!_!wYZ!P!Q!k%S%`%g'p'r's(O(W)g*g*h*k*q*t*v,h,i,k,l,o-m-p.f.g/ZR%^!vQ!{YQ%x#[Q&d#}Q&g$QR,{+YT.j-s/s![!jQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0gQ&X#kQ'c$oR*^'dR'l$|Q%V!mR/_.r'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rS#a_#b!P.[-l.^._.`.a.t.z.|/R/j/o/t/u/y/z0S0U0W0Z0[0^0_0`'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rT#a_#bT#^^#_R(o%xa(l%x(n(o+`,{-y-z.oT+[(k+]R-z,{Q$PsQ+l)aR,^*RX#}s$O$P&fQ&y$aQ'a$nQ'd$oR)s'SQ)b&wV-S+m-T-{ZgOn$j)t,PXkOn)t,PQ$k!TQ&z$bQ&{$cQ'^$mQ'b$oQ)q'RQ)x'WQ){'XQ)|'YQ*Z'`S*]'c'dQ+s)gQ+u)hQ+v)iQ+z)oS+|)r*[Q,Q)vQ,R)wS,S)y)zQ,d*^Q-V+rQ-W+tQ-Y+{S-Z+},OQ-`,UQ-b,VQ-|-XQ.O-[Q.P-^Q.Q-_Q.p-}Q.q.RQ/W.dR/r/XWkOn)t,PR#mjQ'`$nS)r'S'aR,O)sQ,]*RR-f,^Q*['`Q+})rR-[,OZiOjn)t,PQ'f$pR*`'gT-j,e-ku.c-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^t.c-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^Q/S.`X0V/z0W0_0`!P.Z-l.^._.`.a.t.z.|/R/j/o/t/u/y/z0S0U0W0Z0[0^0_0`Q.w.YR/f.xg.z.].{/b/i/n/|0O0Q0]0a0bu.b-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^X.u.W.b/a0PR/c.tV0R/u0S0[R/X.dQnOS#on,PR,P)tQ&^#uR(x&^S%m#R#wS(_%m(bT(b%p&`Q%a!yQ%h!}W(P%a%h(U(YQ(U%eR(Y%jQ&i$RR)O&iQ(e%qQ*{(`T+R(e*{Q'n%OR*e'nS'q%R%SY*i'q*j,m-q.hU*j'r's'tU,m*k*l*mS-q,n,oR.h-rQ#Y]R%t#YQ#_^R%y#_Q(h%vS+W(h+XR+X(iQ+](kR,|+]Q#b_R%{#bQ#ebQ%}#cW&Q#e%}({+bQ({&cR+b0gQ$OsS&e$O&fR&f$PQ&v$_R)_&vQ&V#jR(t&VQ&m$VS)T&m+hR+h)UQ$Z{R&p$ZQ&t$]R)[&tQ+n)bR-U+nQ#hfR&S#hQ)f&zR+q)fQ&}$dS)m&})nR)n'OQ'V$kR)u'VQ'[$lS*P'[,ZR,Z*QQ,a*VR-i,aWjOn)t,PR#ljQ-k,eR.U-kd.{.]/b/i/n/|0O0Q0]0a0bR/h.{U.s.W/a0PR/`.sQ/{/nS0X/{0YR0Y/|S/v/b/cR0T/vQ.}.]R/k.}R!ZPXmOn)t,PWlOn)t,PR'T$jYfOn$j)t,PR&R#g[sOn#g$j)t,PR&d#}&bQOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$h$j$}%S%Z%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/Z/s0c0d0e0f0h0i0j0k0n0rQ!nTQ#caQ#poU$Rt%c(SS$d!R$gQ$p!XQ$u!cQ$v!dQ$w!eQ$x!fQ$y!gQ$z!hQ%e!zQ%j#OQ%p#SQ%q#TQ&`#xQ'O$eQ'g$qQ(q&OU(|&h(}+cW)j&|)l+x+yQ*o'|Q*x(]Q+w)kQ,v+QQ/q/VR0g0lQ!yYQ!}ZQ$b!PQ$c!QQ%R!kQ't%S^'{%`%g(O(W*q*t*v^*f'p*h,k,l-p.g/ZQ*l'rQ*m'sQ+t)gQ,j*gQ,n*kQ-n,hQ-o,iQ-r,oQ.e-mR/Y.f[bOn#g$j)t,P!^!vYZ!P!Q!k%S%`%g'p'r's(O(W)g*g*h*k*q*t*v,h,i,k,l,o-m-p.f.g/ZQ#R[Q#fdS#wrxQ$UyW$_}$Q'P)pS$l!U$hW${!i'm*d,gS%v#[+Y`&P#d%|(p(r(z+a-O0kQ&a#yQ&b#{Q&c#}Q'j$}Q'z%^W([%l(^*y*}Q(`%nQ(i%wQ(v&ZS(y&_0iQ)P&jQ)Q&kU)]&u)^+kQ)d&xQ)y'WY)}'Z*O,X,Y-dQ*b'lS*n'w0jW+P(d*z,s,wW+T(g+V,y,zQ+p)eQ,U)zQ,c*YQ,x+UQ-P+dQ-e,]Q-v,uR.S-fhUOn#d#g$j%|&_'w(p(r)t,P%S!uYZ[drxy}!P!Q!U!i!k#[#y#{#}$Q$h$}%S%^%`%g%l%n%w&Z&j&k&u&x'P'W'Z'l'm'p'r's(O(W(^(d(g(z)^)e)g)p)z*O*Y*d*g*h*k*q*t*v*y*z*}+U+V+Y+a+d+k,X,Y,],g,h,i,k,l,o,s,u,w,y,z-O-d-f-m-p.f.g/Z0i0j0kQ#qpW%W!o!s0d0nQ%X!pQ%Y!qQ%[!tQ%f0cS'v%Z0hQ'x0eQ'y0fQ,p*rQ-u,qS.i-s/sR0p0rU#uq.k0qR(w&][cOn#g$j)t,PZ!xY#[#}$Q+YQ#W[Q#zrR$TxQ%b!yQ%i!}Q%o#RQ'j${Q(V%eQ(Z%jQ(c%pQ(f%qQ*|(`Q,f*bQ-t,pQ.m-uR/].lQ$StQ(R%cR*s(SQ.l-sR/}/sR#QZR#V[R%Q!iQ%O!iV*c'm*d,g!]!lQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0gR%T!kT#]^#_Q%x#[R,{+YQ(m%xS+_(n(oQ,}+`Q-x,{S.n-y-zR/^.oT+Z(k+]Q$`}Q&g$QQ)o'PR+{)pQ$XzQ)W&qR+i)XQ$XzQ&o$WQ)W&qR+i)XQ#khW$Vz$W&q)XQ$[{Q&r$ZZ)R&l)S+f+g-RR$^|R)c&wXlOn)t,PQ$f!RR'Q$gQ$m!UR'R$hR*X'_Q*V'_V-g,`-h.TQ.d-lQ/P.^R/Q._U.]-l.^._Q/U.aQ/b.tQ/g.zU/i.|/j/yQ/n/RQ/|/oQ0O/tU0Q/u0S0[Q0]0UQ0a0ZR0b0^R/T.`R/d.t",nodeNames:" print Escape { Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ) ( ParenthesizedExpression BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from TupleExpression ComprehensionExpression async for LambdaExpression ] [ ArrayExpression ArrayComprehensionExpression } { DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatSelfDoc FormatConversion FormatSpec FormatReplacement FormatSelfDoc ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert TypeDefinition type TypeParamList TypeParam StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At MatchStatement match MatchBody MatchClause case CapturePattern LiteralPattern ArithOp ArithOp AsPattern OrPattern LogicOp AttributePattern SequencePattern MappingPattern StarPattern ClassPattern PatternArgList KeywordPattern KeywordPattern Guard",maxTerm:277,context:wN,nodeProps:[["isolate",-5,4,71,72,73,77,""],["group",-15,6,85,87,88,90,92,94,96,98,99,100,102,105,108,110,"Statement Statement",-22,8,18,21,25,40,49,50,56,57,60,61,62,63,64,67,70,71,72,79,80,81,82,"Expression",-10,114,116,119,121,122,126,128,133,135,138,"Statement",-9,143,144,147,148,150,151,152,153,154,"Pattern"],["openedBy",23,"(",54,"[",58,"{"],["closedBy",24,")",55,"]",59,"}"]],propSources:[wD],skippedNodes:[0,4],repeatNodeCount:34,tokenData:"!2|~R!`OX%TXY%oY[%T[]%o]p%Tpq%oqr'ars)Yst*xtu%Tuv,dvw-hwx.Uxy/tyz0[z{0r{|2S|}2p}!O3W!O!P4_!P!Q:Z!Q!R;k!R![>_![!]Do!]!^Es!^!_FZ!_!`Gk!`!aHX!a!b%T!b!cIf!c!dJU!d!eK^!e!hJU!h!i!#f!i!tJU!t!u!,|!u!wJU!w!x!.t!x!}JU!}#O!0S#O#P&o#P#Q!0j#Q#R!1Q#R#SJU#S#T%T#T#UJU#U#VK^#V#YJU#Y#Z!#f#Z#fJU#f#g!,|#g#iJU#i#j!.t#j#oJU#o#p!1n#p#q!1s#q#r!2a#r#s!2f#s$g%T$g;'SJU;'S;=`KW<%lOJU`%YT&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T`%lP;=`<%l%To%v]&n`%c_OX%TXY%oY[%T[]%o]p%Tpq%oq#O%T#O#P&o#P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To&tX&n`OY%TYZ%oZ]%T]^%o^#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc'f[&n`O!_%T!_!`([!`#T%T#T#U(r#U#f%T#f#g(r#g#h(r#h#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(cTmR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(yT!mR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk)aV&n`&[ZOr%Trs)vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk){V&n`Or%Trs*bs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk*iT&n`&^ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To+PZS_&n`OY*xYZ%TZ]*x]^%T^#o*x#o#p+r#p#q*x#q#r+r#r;'S*x;'S;=`,^<%lO*x_+wTS_OY+rZ]+r^;'S+r;'S;=`,W<%lO+r_,ZP;=`<%l+ro,aP;=`<%l*xj,kV%rQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-XT!xY&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-oV%lQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.]V&n`&ZZOw%Twx.rx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.wV&n`Ow%Twx/^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/eT&n`&]ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/{ThZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc0cTgR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk0yXVZ&n`Oz%Tz{1f{!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk1mVaR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk2ZV%oZ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc2wTzR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To3_W%pZ&n`O!_%T!_!`-Q!`!a3w!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Td4OT&{S&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk4fX!fQ&n`O!O%T!O!P5R!P!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5WV&n`O!O%T!O!P5m!P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5tT!rZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti6[a!hX&n`O!Q%T!Q![6T![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S6T#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti7fZ&n`O{%T{|8X|}%T}!O8X!O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8^V&n`O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8z]!hX&n`O!Q%T!Q![8s![!l%T!l!m9s!m#R%T#R#S8s#S#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti9zT!hX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk:bX%qR&n`O!P%T!P!Q:}!Q!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj;UV%sQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti;ro!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!d%T!d!e?q!e!g%T!g!h7a!h!l%T!l!m9s!m!q%T!q!rA]!r!z%T!z!{Bq!{#R%T#R#S>_#S#U%T#U#V?q#V#X%T#X#Y7a#Y#^%T#^#_9s#_#c%T#c#dA]#d#l%T#l#mBq#m#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti=xV&n`O!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti>fc!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S>_#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti?vY&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti@mY!hX&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiAbX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBUX!hX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBv]&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiCv]!hX&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToDvV{_&n`O!_%T!_!`E]!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TcEdT%{R&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkEzT#gZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkFbXmR&n`O!^%T!^!_F}!_!`([!`!a([!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjGUV%mQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkGrV%zZ&n`O!_%T!_!`([!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkH`WmR&n`O!_%T!_!`([!`!aHx!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjIPV%nQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkIoV_Q#}P&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToJ_]&n`&YS%uZO!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoKZP;=`<%lJUoKge&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!tJU!t!uLx!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#gLx#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoMRa&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUkN_V&n`&`ZOr%TrsNts#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkNyV&n`Or%Trs! `s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! gT&n`&bZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! }V&n`&_ZOw%Twx!!dx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!!iV&n`Ow%Twx!#Ox#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!#VT&n`&aZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!#oe&n`&YS%uZOr%Trs!%Qsw%Twx!&px!Q%T!Q![JU![!c%T!c!tJU!t!u!(`!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#g!(`#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!%XV&n`&dZOr%Trs!%ns#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!%sV&n`Or%Trs!&Ys#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&aT&n`&fZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&wV&n`&cZOw%Twx!'^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!'cV&n`Ow%Twx!'xx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!(PT&n`&eZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!(ia&n`&YS%uZOr%Trs!)nsw%Twx!+^x!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!)uV&n`&hZOr%Trs!*[s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*aV&n`Or%Trs!*vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*}T&n`&jZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!+eV&n`&gZOw%Twx!+zx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,PV&n`Ow%Twx!,fx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,mT&n`&iZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!-Vi&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!dJU!d!eLx!e!hJU!h!i!(`!i!}JU!}#R%T#R#SJU#S#T%T#T#UJU#U#VLx#V#YJU#Y#Z!(`#Z#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUo!.}a&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!0ZT!XZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc!0qT!WR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj!1XV%kQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!1sO!]~k!1zV%jR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!2fO![~i!2mT%tX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T",tokenizers:[w_,wC,wS,wj,0,1,2,3,4],topRules:{Script:[0,5]},specialized:[{term:221,get:e=>wP[e]||-1}],tokenPrec:7664}),wI=new mI,wz=new Set(["Script","Body","FunctionDefinition","ClassDefinition","LambdaExpression","ForStatement","MatchClause"]);function wL(e){return(t,n,r)=>{if(r)return!1;let i=t.node.getChild("VariableName");return i&&n(i,e),!0}}let wq={FunctionDefinition:wL("function"),ClassDefinition:wL("class"),ForStatement(e,t,n){if(n){for(let n=e.node.firstChild;n;n=n.nextSibling)if("VariableName"==n.name)t(n,"variable");else if("in"==n.name)break}},ImportStatement(e,t){var n,r;let{node:i}=e,o=(null===(n=i.firstChild)||void 0===n?void 0:n.name)=="from";for(let e=i.getChild("import");e;e=e.nextSibling)"VariableName"==e.name&&(null===(r=e.nextSibling)||void 0===r?void 0:r.name)!="as"&&t(e,o?"variable":"namespace")},AssignStatement(e,t){for(let n=e.node.firstChild;n;n=n.nextSibling)if("VariableName"==n.name)t(n,"variable");else if(":"==n.name||"AssignOp"==n.name)break},ParamList(e,t){for(let n=null,r=e.node.firstChild;r;r=r.nextSibling)"VariableName"!=r.name||n&&/\*|AssignOp/.test(n.name)||t(r,"variable"),n=r},CapturePattern:wL("variable"),AsPattern:wL("variable"),__proto__:null},w$=/^[\w\xa1-\uffff][\w\d\xa1-\uffff]*$/,wB=["String","FormatString","Comment","PropertyName"];function wF(e){let t=gs(e.state).resolveInner(e.pos,-1);if(wB.indexOf(t.name)>-1)return null;let n="VariableName"==t.name||t.to-t.from<20&&w$.test(e.state.sliceDoc(t.from,t.to));if(!n&&!e.explicit)return null;let r=[];for(let n=t;n;n=n.parent)wz.has(n.name)&&(r=r.concat(function e(t,n){let r=wI.get(n);if(r)return r;let i=[],o=!0;function s(e,n){let r=t.sliceString(e.from,e.to);i.push({label:r,type:n})}return n.cursor(p.IncludeAnonymous).iterate(n=>{if(n.name){let e=wq[n.name];if(e&&e(n,s,o)||!o&&wz.has(n.name))return!1;o=!1}else if(n.to-n.from>8192){for(let r of e(t,n.node))i.push(r);return!1}}),wI.set(n,i),i}(e.state.doc,n)));return{options:r,from:n?t.from:e.pos,validFor:w$}}let wQ=["__annotations__","__builtins__","__debug__","__doc__","__import__","__name__","__loader__","__package__","__spec__","False","None","True"].map(e=>({label:e,type:"constant"})).concat(["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EncodingWarning","EnvironmentError","Exception","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","ModuleNotFoundError","NameError","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError"].map(e=>({label:e,type:"type"}))).concat(["bool","bytearray","bytes","classmethod","complex","float","frozenset","int","list","map","memoryview","object","range","set","staticmethod","str","super","tuple","type"].map(e=>({label:e,type:"class"}))).concat(["abs","aiter","all","anext","any","ascii","bin","breakpoint","callable","chr","compile","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","format","getattr","globals","hasattr","hash","help","hex","id","input","isinstance","issubclass","iter","len","license","locals","max","min","next","oct","open","ord","pow","print","property","quit","repr","reversed","round","setattr","slice","sorted","sum","vars","zip"].map(e=>({label:e,type:"function"}))),wV=[xa("def ${name}(${params}):\n	${}",{label:"def",detail:"function",type:"keyword"}),xa("for ${name} in ${collection}:\n	${}",{label:"for",detail:"loop",type:"keyword"}),xa("while ${}:\n	${}",{label:"while",detail:"loop",type:"keyword"}),xa("try:\n	${}\nexcept ${error}:\n	${}",{label:"try",detail:"/ except block",type:"keyword"}),xa(`if \${}:
	
`,{label:"if",detail:"block",type:"keyword"}),xa("if ${}:\n	${}\nelse:\n	${}",{label:"if",detail:"/ else block",type:"keyword"}),xa("class ${name}:\n	def __init__(self, ${params}):\n			${}",{label:"class",detail:"definition",type:"keyword"}),xa("import ${module}",{label:"import",detail:"statement",type:"keyword"}),xa("from ${module} import ${names}",{label:"from",detail:"import",type:"keyword"})],wH=vv(wB,vb(wQ.concat(wV)));function wU(e){let{node:t,pos:n}=e,r=e.lineIndent(n,-1),i=null;for(;;){let o=t.childBefore(n);if(o){if("Comment"==o.name)n=o.from;else if("Body"==o.name||"MatchBody"==o.name)e.baseIndentFor(o)+e.unit<=r&&(i=o),t=o;else if("MatchClause"==o.name)t=o;else if(o.type.is("Statement"))t=o;else break}else break}return i}function wW(e,t){let n=e.baseIndentFor(t),r=e.lineAt(e.pos,-1),i=r.from+r.text.length;return/^\s*($|#)/.test(r.text)&&e.node.to<i+100&&!/\S/.test(e.state.sliceDoc(i,e.node.to))&&e.lineIndent(e.pos,-1)<=n||/^\s*(else:|elif |except |finally:|case\s+[^=:]+:)/.test(e.textAfter)&&e.lineIndent(e.pos,-1)>n?null:n+e.unit}let wG=go.define({name:"python",parser:wR.configure({props:[gO.add({Body:e=>{var t;let n=wU(e);return null!==(t=wW(e,n||e.node))&&void 0!==t?t:e.continue()},MatchBody:e=>{var t;let n=wU(e);return null!==(t=wW(e,n||e.node))&&void 0!==t?t:e.continue()},IfStatement:e=>/^\s*(else:|elif )/.test(e.textAfter)?e.baseIndent:e.continue(),"ForStatement WhileStatement":e=>/^\s*else:/.test(e.textAfter)?e.baseIndent:e.continue(),TryStatement:e=>/^\s*(except |finally:|else:)/.test(e.textAfter)?e.baseIndent:e.continue(),MatchStatement:e=>/^\s*case /.test(e.textAfter)?e.baseIndent+e.unit:e.continue(),"TupleExpression ComprehensionExpression ParamList ArgList ParenthesizedExpression":gA({closing:")"}),"DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression":gA({closing:"}"}),"ArrayExpression ArrayComprehensionExpression":gA({closing:"]"}),"String FormatString":()=>null,Script:e=>{var t;let n=wU(e);return null!==(t=n&&wW(e,n))&&void 0!==t?t:e.continue()}}),gN.add({"ArrayExpression DictionaryExpression SetExpression TupleExpression":function(e){let t=e.firstChild,n=e.lastChild;return t&&t.to<n.from?{from:t.to,to:n.type.isError?e.to:n.from}:null},Body:(e,t)=>({from:e.from+1,to:e.to-+(e.to!=t.doc.length)})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""'],stringPrefixes:["f","fr","rf","r","u","b","br","rb","F","FR","RF","R","U","B","BR","RB"]},commentTokens:{line:"#"},indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:|case\s+[^:]*:?)$/}});function wX(e){return e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57}function wY(e,t,n){for(let r=!1;;){if(e.next<0)return;if(e.next==t&&!r){e.advance();return}r=n&&!r&&92==e.next,e.advance()}}function wZ(e,t){for(;!(95!=e.next&&!wX(e.next));)null!=t&&(t+=String.fromCharCode(e.next)),e.advance();return t}function wK(e,t){for(;48==e.next||49==e.next;)e.advance();t&&e.next==t&&e.advance()}function wJ(e,t){for(;;){if(46==e.next){if(t)break;t=!0}else if(e.next<48||e.next>57)break;e.advance()}if(69==e.next||101==e.next)for(e.advance(),(43==e.next||45==e.next)&&e.advance();e.next>=48&&e.next<=57;)e.advance()}function w0(e){for(;!(e.next<0||10==e.next);)e.advance()}function w1(e,t){for(let n=0;n<t.length;n++)if(t.charCodeAt(n)==e)return!0;return!1}let w2=` 	\r
`;function w4(e,t,n){let r=Object.create(null);for(let t of(r.true=r.false=5,r.null=r.unknown=6,e.split(" ")))t&&(r[t]=20);for(let e of t.split(" "))e&&(r[e]=21);for(let e of(n||"").split(" "))e&&(r[e]=24);return r}let w5={backslashEscapes:!1,hashComments:!1,spaceAfterDashes:!1,slashComments:!1,doubleQuotedStrings:!1,doubleDollarQuotedStrings:!1,unquotedBitLiterals:!1,treatBitsAsBytes:!1,charSetCasts:!1,plsqlQuotingMechanism:!1,operatorChars:"*+-%<>!=&|~^/",specialVar:"?",identifierQuotes:'"',caseInsensitiveIdentifiers:!1,words:w4("absolute action add after all allocate alter and any are as asc assertion at authorization before begin between both breadth by call cascade cascaded case cast catalog check close collate collation column commit condition connect connection constraint constraints constructor continue corresponding count create cross cube current current_date current_default_transform_group current_transform_group_for_type current_path current_role current_time current_timestamp current_user cursor cycle data day deallocate declare default deferrable deferred delete depth deref desc describe descriptor deterministic diagnostics disconnect distinct do domain drop dynamic each else elseif end end-exec equals escape except exception exec execute exists exit external fetch first for foreign found from free full function general get global go goto grant group grouping handle having hold hour identity if immediate in indicator initially inner inout input insert intersect into is isolation join key language last lateral leading leave left level like limit local localtime localtimestamp locator loop map match method minute modifies module month names natural nesting new next no none not of old on only open option or order ordinality out outer output overlaps pad parameter partial path prepare preserve primary prior privileges procedure public read reads recursive redo ref references referencing relative release repeat resignal restrict result return returns revoke right role rollback rollup routine row rows savepoint schema scroll search second section select session session_user set sets signal similar size some space specific specifictype sql sqlexception sqlstate sqlwarning start state static system_user table temporary then timezone_hour timezone_minute to trailing transaction translation treat trigger under undo union unique unnest until update usage user using value values view when whenever where while with without work write year zone ","array binary bit boolean char character clob date decimal double float int integer interval large national nchar nclob numeric object precision real smallint time timestamp varchar varying ")};function w3(e){return new ws(t=>{var n,r;let{next:i}=t;if(t.advance(),w1(i,w2)){for(;w1(t.next,w2);)t.advance();t.acceptToken(36)}else if(36==i&&e.doubleDollarQuotedStrings){let e=wZ(t,"");36==t.next&&(t.advance(),function(e,t){e:for(;;){if(e.next<0)return;if(36==e.next){e.advance();for(let n=0;n<t.length;n++){if(e.next!=t.charCodeAt(n))continue e;e.advance()}if(36==e.next){e.advance();return}}else e.advance()}}(t,e),t.acceptToken(3))}else if(39==i||34==i&&e.doubleQuotedStrings)wY(t,i,e.backslashEscapes),t.acceptToken(3);else if(35==i&&e.hashComments||47==i&&47==t.next&&e.slashComments)w0(t),t.acceptToken(1);else if(45!=i||45!=t.next||e.spaceAfterDashes&&32!=t.peek(1)){if(47==i&&42==t.next){t.advance();for(let e=1;;){let n=t.next;if(t.next<0)break;if(t.advance(),42==n&&47==t.next){if(e--,t.advance(),!e)break}else 47==n&&42==t.next&&(e++,t.advance())}t.acceptToken(2)}else if((101==i||69==i)&&39==t.next)t.advance(),wY(t,39,!0),t.acceptToken(3);else if((110==i||78==i)&&39==t.next&&e.charSetCasts)t.advance(),wY(t,39,e.backslashEscapes),t.acceptToken(3);else if(95==i&&e.charSetCasts)for(let n=0;;n++){if(39==t.next&&n>1){t.advance(),wY(t,39,e.backslashEscapes),t.acceptToken(3);break}if(!wX(t.next))break;t.advance()}else if(e.plsqlQuotingMechanism&&(113==i||81==i)&&39==t.next&&t.peek(1)>0&&!w1(t.peek(1),w2)){let e=t.peek(1);t.advance(2),function(e,t){let n="[{<(".indexOf(String.fromCharCode(t)),r=n<0?t:"]}>)".charCodeAt(n);for(;;){if(e.next<0)return;if(e.next==r&&39==e.peek(1)){e.advance(2);return}e.advance()}}(t,e),t.acceptToken(3)}else if(40==i)t.acceptToken(7);else if(41==i)t.acceptToken(8);else if(123==i)t.acceptToken(9);else if(125==i)t.acceptToken(10);else if(91==i)t.acceptToken(11);else if(93==i)t.acceptToken(12);else if(59==i)t.acceptToken(13);else if(e.unquotedBitLiterals&&48==i&&98==t.next)t.advance(),wK(t),t.acceptToken(22);else if((98==i||66==i)&&(39==t.next||34==t.next)){let n=t.next;t.advance(),e.treatBitsAsBytes?(wY(t,n,e.backslashEscapes),t.acceptToken(23)):(wK(t,n),t.acceptToken(22))}else if(48==i&&(120==t.next||88==t.next)||(120==i||88==i)&&39==t.next){let e=39==t.next;for(t.advance();(r=t.next)>=48&&r<=57||r>=97&&r<=102||r>=65&&r<=70;)t.advance();e&&39==t.next&&t.advance(),t.acceptToken(4)}else if(46==i&&t.next>=48&&t.next<=57)wJ(t,!0),t.acceptToken(4);else if(46==i)t.acceptToken(14);else if(i>=48&&i<=57)wJ(t,!1),t.acceptToken(4);else if(w1(i,e.operatorChars)){for(;w1(t.next,e.operatorChars);)t.advance();t.acceptToken(15)}else if(w1(i,e.specialVar))t.next==i&&t.advance(),function(e){if(39==e.next||34==e.next||96==e.next){let t=e.next;e.advance(),wY(e,t,!1)}else wZ(e)}(t),t.acceptToken(17);else if(w1(i,e.identifierQuotes))wY(t,i,!1),t.acceptToken(19);else if(58==i||44==i)t.acceptToken(16);else if(wX(i)){let r=wZ(t,String.fromCharCode(i));t.acceptToken(46==t.next||46==t.peek(-r.length-1)?18:null!==(n=e.words[r.toLowerCase()])&&void 0!==n?n:18)}}else w0(t),t.acceptToken(1)})}let w6=w3(w5),w7=wb.deserialize({version:14,states:"%vQ]QQOOO#wQRO'#DSO$OQQO'#CwO%eQQO'#CxO%lQQO'#CyO%sQQO'#CzOOQQ'#DS'#DSOOQQ'#C}'#C}O'UQRO'#C{OOQQ'#Cv'#CvOOQQ'#C|'#C|Q]QQOOQOQQOOO'`QQO'#DOO(xQRO,59cO)PQQO,59cO)UQQO'#DSOOQQ,59d,59dO)cQQO,59dOOQQ,59e,59eO)jQQO,59eOOQQ,59f,59fO)qQQO,59fOOQQ-E6{-E6{OOQQ,59b,59bOOQQ-E6z-E6zOOQQ,59j,59jOOQQ-E6|-E6|O+VQRO1G.}O+^QQO,59cOOQQ1G/O1G/OOOQQ1G/P1G/POOQQ1G/Q1G/QP+kQQO'#C}O+rQQO1G.}O)PQQO,59cO,PQQO'#Cw",stateData:",[~OtOSPOSQOS~ORUOSUOTUOUUOVROXSOZTO]XO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O^]ORvXSvXTvXUvXVvXXvXZvX]vX_vX`vXavXbvXcvXdvXevXfvXgvXhvX~OsvX~P!jOa_Ob_Oc_O~ORUOSUOTUOUUOVROXSOZTO^tO_UO`UOa`Ob`Oc`OdUOeUOfUOgUOhUO~OWaO~P$ZOYcO~P$ZO[eO~P$ZORUOSUOTUOUUOVROXSOZTO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O]hOsoX~P%zOajObjOcjO~O^]ORkaSkaTkaUkaVkaXkaZka]ka_ka`kaakabkackadkaekafkagkahka~Oska~P'kO^]O~OWvXYvX[vX~P!jOWnO~P$ZOYoO~P$ZO[pO~P$ZO^]ORkiSkiTkiUkiVkiXkiZki]ki_ki`kiakibkickidkiekifkigkihki~Oski~P)xOWkaYka[ka~P'kO]hO~P$ZOWkiYki[ki~P)xOasObsOcsO~O",goto:"#hwPPPPPPPPPPPPPPPPPPPPPPPPPPx||||!Y!^!d!xPPP#[TYOZeUORSTWZbdfqT[OZQZORiZSWOZQbRQdSQfTZgWbdfqQ^PWk^lmrQl_Qm`RrseVORSTWZbdfq",nodeNames:" LineComment BlockComment String Number Bool Null ( ) { } [ ] ; . Operator Punctuation SpecialVar Identifier QuotedIdentifier Keyword Type Bits Bytes Builtin Script Statement CompositeIdentifier Parens Braces Brackets Statement",maxTerm:38,nodeProps:[["isolate",-4,1,2,3,19,""]],skippedNodes:[0,1,2],repeatNodeCount:3,tokenData:"RORO",tokenizers:[0,w6],topRules:{Script:[0,25]},tokenPrec:0});function w8(e){let t=e.cursor().moveTo(e.from,-1);for(;/Comment/.test(t.name);)t.moveTo(t.from,-1);return t.node}function w9(e,t){let n=e.sliceString(t.from,t.to),r=/^([`'"])(.*)\1$/.exec(n);return r?r[2]:n}function ke(e){return e&&("Identifier"==e.name||"QuotedIdentifier"==e.name)}function kt(e,t){for(let n=[];;){if(!t||"."!=t.name)return n;let r=w8(t);if(!ke(r))return n;n.unshift(w9(e,r)),t=w8(r)}}let kn=new Set("where group having order union intersect except all distinct limit offset fetch for".split(" ")),kr=/^\w*$/,ki=/^[`'"]?\w*[`'"]?$/;function ko(e){return e.self&&"string"==typeof e.self.label}class ks{constructor(e,t){this.idQuote=e,this.idCaseInsensitive=t,this.list=[],this.children=void 0}child(e){let t=this.children||(this.children=Object.create(null));return t[e]||(e&&!this.list.some(t=>t.label==e)&&this.list.push(ka(e,"type",this.idQuote,this.idCaseInsensitive)),t[e]=new ks(this.idQuote,this.idCaseInsensitive))}maybeChild(e){return this.children?this.children[e]:null}addCompletion(e){let t=this.list.findIndex(t=>t.label==e.label);t>-1?this.list[t]=e:this.list.push(e)}addCompletions(e){for(let t of e)this.addCompletion("string"==typeof t?ka(t,"property",this.idQuote,this.idCaseInsensitive):t)}addNamespace(e){Array.isArray(e)?this.addCompletions(e):ko(e)?this.addNamespace(e.children):this.addNamespaceObject(e)}addNamespaceObject(e){for(let t of Object.keys(e)){let n=e[t],r=null,i=t.replace(/\\?\./g,e=>"."==e?"\0":e).split("\0"),o=this;ko(n)&&(r=n.self,n=n.children);for(let e=0;e<i.length;e++)r&&e==i.length-1&&o.addCompletion(r),o=o.child(i[e].replace(/\\\./g,"."));o.addNamespace(n)}}}function ka(e,t,n,r){return RegExp("^[a-z_][a-z_\\d]*$",r?"i":"").test(e)?{label:e,type:t}:{label:e,type:t,apply:n+e+n}}let kl=w7.configure({props:[gO.add({Statement:function({except:e,units:t=1}={}){return n=>{let r=e&&e.test(n.textAfter);return n.baseIndent+(r?0:t*n.unit)}}()}),gN.add({Statement:(e,t)=>({from:Math.min(e.from+100,t.doc.lineAt(e.from).to),to:e.to}),BlockComment:e=>({from:e.from+2,to:e.to-2})}),mV({Keyword:ge.keyword,Type:ge.typeName,Builtin:ge.standard(ge.name),Bits:ge.number,Bytes:ge.string,Bool:ge.bool,Null:ge.null,Number:ge.number,String:ge.string,Identifier:ge.name,QuotedIdentifier:ge.special(ge.string),SpecialVar:ge.special(ge.name),LineComment:ge.lineComment,BlockComment:ge.blockComment,Operator:ge.operator,"Semi Punctuation":ge.punctuation,"( )":ge.paren,"{ }":ge.brace,"[ ]":ge.squareBracket})]});class kc{constructor(e,t,n){this.dialect=e,this.language=t,this.spec=n}get extension(){return this.language.extension}static define(e){let t=function(e,t,n,r){let i={};for(let t in w5)i[t]=(e.hasOwnProperty(t)?e:w5)[t];return t&&(i.words=w4(t,n||"",r)),i}(e,e.keywords,e.types,e.builtin),n=go.define({name:"sql",parser:kl.configure({tokenizers:[{from:w6,to:w3(t)}]}),languageData:{commentTokens:{line:"--",block:{open:"/*",close:"*/"}},closeBrackets:{brackets:["(","[","{","'",'"',"`"]}}});return new kc(t,n,e)}}function ku(e,t){return{label:e,type:t,boost:-1}}function kh(e={}){var t,n,r,i,o,s,a;let l,c,u=e.dialect||kd;return new gg(u.language,[e.schema?(e.dialect||kd).language.data.of({autocomplete:e.schema?(t=e.schema,n=e.tables,r=e.schemas,i=e.defaultTable,o=e.defaultSchema,l=new ks((null===(a=null==(s=e.dialect||kd)?void 0:s.spec.identifierQuotes)||void 0===a?void 0:a[0])||'"',!!(null!=s&&s.spec.caseInsensitiveIdentifiers)),c=o?l.child(o):null,l.addNamespace(t),n&&(c||l).addCompletions(n),r&&l.addCompletions(r),c&&l.addCompletions(c.list),i&&l.addCompletions((c||l).child(i).list),e=>{var t,n,r;let o,s;let{parents:a,from:u,quoted:h,empty:d,aliases:f}=(t=e.state,n=e.pos,o=gs(t).resolveInner(n,-1),s=function(e,t){let n;for(let e=t;!n;e=e.parent){if(!e)return null;"Statement"==e.name&&(n=e)}let r=null;for(let t=n.firstChild,i=!1,o=null;t;t=t.nextSibling){let n="Keyword"==t.name?e.sliceString(t.from,t.to).toLowerCase():null,s=null;if(i){if("as"==n&&o&&ke(t.nextSibling))s=w9(e,t.nextSibling);else{if(n&&kn.has(n))break;o&&ke(t)&&(s=w9(e,t))}}else i="from"==n;s&&(r||(r=Object.create(null)),r[s]=function(e,t){if("CompositeIdentifier"==t.name){let n=[];for(let r=t.firstChild;r;r=r.nextSibling)ke(r)&&n.push(w9(e,r));return n}return[w9(e,t)]}(e,o)),o=/Identifier$/.test(t.name)?t:null}return r}(t.doc,o),"Identifier"==o.name||"QuotedIdentifier"==o.name||"Keyword"==o.name?{from:o.from,quoted:"QuotedIdentifier"==o.name?t.doc.sliceString(o.from,o.from+1):null,parents:kt(t.doc,w8(o)),aliases:s}:"."==o.name?{from:n,quoted:null,parents:kt(t.doc,o),aliases:s}:{from:n,quoted:null,parents:[],empty:!0,aliases:s});if(d&&!e.explicit)return null;f&&1==a.length&&(a=f[a[0]]||a);let p=l;for(let e of a){for(;!p.children||!p.children[e];)if(p==l&&c)p=c;else{if(p!=c||!i)return null;p=p.child(i)}let t=p.maybeChild(e);if(!t)return null;p=t}let m=h&&e.state.sliceDoc(e.pos,e.pos+1)==h,g=p.list;return p==l&&f&&(g=g.concat(Object.keys(f).map(e=>({label:e,type:"constant"})))),{from:u,to:m?e.pos+1:void 0,options:(r=g,h?r.map(e=>Object.assign(Object.assign({},e),{label:e.label[0]==h?e.label:h+e.label+h,apply:void 0})):r),validFor:h?ki:kr}}):()=>null}):[],u.language.data.of({autocomplete:function(e,t=!1,n){var r,i;return r=e.dialect.words,i=n||ku,vv(["QuotedIdentifier","SpecialVar","String","LineComment","BlockComment","."],vb(Object.keys(r).map(e=>{var n;return i(t?e.toUpperCase():e,21==(n=r[e])?"type":20==n?"keyword":"variable")})))}(u,e.upperCaseKeywords,e.keywordCompletion)})])}let kd=kc.define({});class kf extends N.Component{constructor(e){super(e),this.state={hasError:!1,errorInfo:null,error:null,maybeOldAnalysis:e.maybeOldAnalysis}}static getDerivedStateFromError(e){return console.log(e),{hasError:!0}}componentDidCatch(e,t){console.log(e,t),this.setState({hasError:!0,errorInfo:t,error:e})}render(){return this.state.hasError?M.j.jsx("div",{className:"error-boundary-ctr dark:bg-gray-800 dark:text-gray-300",children:this.props.maybeOldAnalysis?M.j.jsx("p",{className:"text-rose-500 dark:text-rose-400",children:"You might need to re run this analysis for the latest version of the UI."}):M.j.jsx("p",{className:"dark:text-gray-300",children:this.props.customErrorMessage||"Something went wrong."})}):this.props.children}}function kp({code:e=null,language:t="sql",updateProp:n=null,className:r="",handleEdit:i,editable:o=!0}){let[s,a]=(0,N.useState)(e||""),l=(0,N.useRef)(null),[c,u]=(0,N.useState)(!1);(0,N.useEffect)(()=>{let e=()=>{u(!!document.querySelector(".dark"))};e();let t=new MutationObserver(e);t.observe(document.documentElement,{attributes:!0,attributeFilter:["class"],subtree:!0,childList:!0}),window.addEventListener("storage",e);let n=window.matchMedia("(prefers-color-scheme: dark)");return n.addEventListener("change",e),()=>{t.disconnect(),window.removeEventListener("storage",e),n.removeEventListener("change",e)}},[]),(0,N.useEffect)(()=>{a(e||"")},[e]);let h=e=>{e&&(a(e),i(n,e))},d=e=>{h(e)};return M.j.jsx(kf,{children:M.j.jsx(M.j.Fragment,{children:M.j.jsx(x6,{extensions:["python"===t?new gg(wG,[wG.data.of({autocomplete:wF}),wG.data.of({autocomplete:wH})]):kh(),fW.lineWrapping],basicSetup:{lineNumbers:!1},theme:c?"dark":"light",className:(0,M.t)("language-"+t,"dark:prose-invert [&_.cm-editor]:dark:!bg-gray-800 [&_.cm-scroller]:dark:!bg-gray-800 [&_.cm-gutters]:dark:!bg-gray-800 [&_.cm-tooltip]:dark:!bg-gray-700 [&_.cm-tooltip]:dark:!border-gray-600 [&_.cm-activeLine]:dark:!bg-gray-700/50 [&_.cm-activeLineGutter]:dark:!bg-gray-700/50",r),value:s,onChange:e=>{d(e)},editable:o,ref:l})})})}function km({step:e}){var t;let{function_name:n,result:r}=e;r||(r={});let{question:i,sql:o,columns:s=[],rows:a="[]",error:l="",df_truncated:c=!1}=r,u=l||(s&&s.length?"":"No results"),h=[];if(a&&!l)try{h=JSON.parse(a)}catch(e){console.error("Failed to parse rows JSON:",e),u="Failed to parse rows JSON"}let d=h.length;return M.j.jsxs("div",{className:"border p-4 rounded-md shadow-sm bg-white dark:bg-dark-bg-secondary dark:border-dark-border max-h-full overflow-y-auto",children:[M.j.jsxs("h2",{className:"text-lg font-semibold mb-2 text-gray-800 dark:text-dark-text-primary flex items-center",children:[M.j.jsx("span",{className:"mr-2",children:"SQL Query"}),!u&&M.j.jsxs("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded dark:bg-blue-900/30 dark:text-blue-300",children:["Resulting data has ",d," ",1===d?"row":"rows"]})]}),i&&M.j.jsxs("div",{className:"mb-3 text-gray-700 dark:text-dark-text-secondary",children:[M.j.jsx("p",{className:"mb-1 font-medium text-gray-800 dark:text-dark-text-primary",children:"Question"}),M.j.jsx("p",{className:"bg-gray-50 dark:bg-gray-800 p-2 rounded-md border-l-2 border-blue-500 dark:border-blue-600 italic text-gray-700 dark:text-dark-text-secondary",children:i})]}),(null==(t=e.inputs)?void 0:t.db_name)&&M.j.jsx("div",{className:"mb-3",children:M.j.jsxs("span",{className:"inline-flex items-center gap-1 bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300 text-xs font-medium px-2.5 py-1 rounded",children:[M.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:[M.j.jsx("path",{d:"M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"}),M.j.jsx("path",{d:"M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"}),M.j.jsx("path",{d:"M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"})]}),e.inputs.db_name]})}),u?M.j.jsxs("div",{className:"text-red-600 bg-red-100 p-3 rounded-md dark:bg-red-900/20 dark:text-red-400 dark:border dark:border-red-800",children:[M.j.jsxs("div",{className:"flex items-center mb-1",children:[M.j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1.5",viewBox:"0 0 20 20",fill:"currentColor",children:M.j.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),M.j.jsx("strong",{children:"Query Error"})]}),M.j.jsx("p",{children:u})]}):M.j.jsx("div",{className:"mt-3 border border-gray-200 dark:border-gray-700 rounded-md overflow-hidden",children:M.j.jsx(M.c,{tabs:[{name:"Results",content:M.j.jsxs("div",{className:"relative p-3",children:[c&&M.j.jsxs("div",{className:"text-sm bg-yellow-50 p-2 rounded mb-3 border border-yellow-200 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400 dark:border-yellow-800 flex items-center",children:[M.j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1.5",viewBox:"0 0 20 20",fill:"currentColor",children:M.j.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Results have been truncated"]}),M.j.jsx(M.T,{columns:s.map(e=>({dataIndex:e,title:e})),rows:h,rootClassNames:"shadow-sm"})]})},{name:"SQL",content:M.j.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 p-3",children:M.j.jsx(kp,{code:o||"",language:"sql",editable:!1})})}],defaultSelected:"Results"})})]})}function kg(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let ky=kg(),kb=/[&<>"']/,kv=RegExp(kb.source,"g"),kx=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,kw=RegExp(kx.source,"g"),kk={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},kO=e=>kk[e];function kS(e,t){if(t){if(kb.test(e))return e.replace(kv,kO)}else if(kx.test(e))return e.replace(kw,kO);return e}let kC=/(^|[^\[])\^/g;function kT(e,t){let n="string"==typeof e?e:e.source;t=t||"";let r={replace:(e,t)=>{let i="string"==typeof t?t:t.source;return i=i.replace(kC,"$1"),n=n.replace(e,i),r},getRegex:()=>new RegExp(n,t)};return r}function kA(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}let kE={exec:()=>null};function kM(e,t){let n=e.replace(/\|/g,(e,t,n)=>{let r=!1,i=t;for(;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"}).split(/ \|/),r=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),t){if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("")}for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function kN(e,t,n){let r=e.length;if(0===r)return"";let i=0;for(;i<r&&e.charAt(r-i-1)===t;)i++;return e.slice(0,r-i)}function k_(e,t,n,r){let i=t.href,o=t.title?kS(t.title):null,s=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){r.state.inLink=!0;let e={type:"link",raw:n,href:i,title:o,text:s,tokens:r.inlineTokens(s)};return r.state.inLink=!1,e}return{type:"image",raw:n,href:i,title:o,text:kS(s)}}class kj{constructor(e){z(this,"options"),z(this,"rules"),z(this,"lexer"),this.options=e||ky}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let e=t[0].replace(/^(?: {1,4}| {0,3}\t)/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:kN(e,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let e=t[0],n=function(e,t){let n=e.match(/^(\s+)(?:```)/);if(null===n)return t;let r=n[1];return t.split(`
`).map(e=>{let t=e.match(/^\s+/);if(null===t)return e;let[n]=t;return n.length>=r.length?e.slice(r.length):e}).join(`
`)}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){let t=kN(e,"#");(this.options.pedantic||!t||/ $/.test(t))&&(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:kN(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let e=kN(t[0],`
`).split(`
`),n="",r="",i=[];for(;e.length>0;){let t,o=!1,s=[];for(t=0;t<e.length;t++)if(/^ {0,3}>/.test(e[t]))s.push(e[t]),o=!0;else if(o)break;else s.push(e[t]);e=e.slice(t);let a=s.join(`
`),l=a.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");n=n?`${n}
${a}`:a,r=r?`${r}
${l}`:l;let c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,i,!0),this.lexer.state.top=c,0===e.length)break;let u=i[i.length-1];if((null==u?void 0:u.type)==="code")break;if((null==u?void 0:u.type)==="blockquote"){let t=u.raw+`
`+e.join(`
`),o=this.blockquote(t);i[i.length-1]=o,n=n.substring(0,n.length-u.raw.length)+o.raw,r=r.substring(0,r.length-u.text.length)+o.text;break}if((null==u?void 0:u.type)==="list"){let t=u.raw+`
`+e.join(`
`),o=this.list(t);i[i.length-1]=o,n=n.substring(0,n.length-u.raw.length)+o.raw,r=r.substring(0,r.length-u.raw.length)+o.raw,e=t.substring(i[i.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:i,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim(),r=n.length>1,i={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");let o=RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),s=!1;for(;e;){let n=!1,r="",a="";if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;r=t[0],e=e.substring(r.length);let l=t[2].split(`
`,1)[0].replace(/^\t+/,e=>" ".repeat(3*e.length)),c=e.split(`
`,1)[0],u=!l.trim(),h=0;if(this.options.pedantic?(h=2,a=l.trimStart()):u?h=t[1].length+1:(h=(h=t[2].search(/[^ ]/))>4?1:h,a=l.slice(h),h+=t[1].length),u&&/^[ \t]*$/.test(c)&&(r+=c+`
`,e=e.substring(c.length+1),n=!0),!n){let t=RegExp(`^ {0,${Math.min(3,h-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),n=RegExp(`^ {0,${Math.min(3,h-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),i=RegExp(`^ {0,${Math.min(3,h-1)}}(?:\`\`\`|~~~)`),o=RegExp(`^ {0,${Math.min(3,h-1)}}#`),s=RegExp(`^ {0,${Math.min(3,h-1)}}<(?:[a-z].*>|!--)`,"i");for(;e;){let d;let f=e.split(`
`,1)[0];if(c=f,d=this.options.pedantic?c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  "):c.replace(/\t/g,"    "),i.test(c)||o.test(c)||s.test(c)||t.test(c)||n.test(c))break;if(d.search(/[^ ]/)>=h||!c.trim())a+=`
`+d.slice(h);else{if(u||l.replace(/\t/g,"    ").search(/[^ ]/)>=4||i.test(l)||o.test(l)||n.test(l))break;a+=`
`+c}u||c.trim()||(u=!0),r+=f+`
`,e=e.substring(f.length+1),l=d.slice(h)}}i.loose||(s?i.loose=!0:/\n[ \t]*\n[ \t]*$/.test(r)&&(s=!0));let d=null,f;this.options.gfm&&(d=/^\[[ xX]\] /.exec(a))&&(f="[ ] "!==d[0],a=a.replace(/^\[[ xX]\] +/,"")),i.items.push({type:"list_item",raw:r,task:!!d,checked:f,loose:!1,text:a,tokens:[]}),i.raw+=r}i.items[i.items.length-1].raw=i.items[i.items.length-1].raw.trimEnd(),i.items[i.items.length-1].text=i.items[i.items.length-1].text.trimEnd(),i.raw=i.raw.trimEnd();for(let e=0;e<i.items.length;e++)if(this.lexer.state.top=!1,i.items[e].tokens=this.lexer.blockTokens(i.items[e].text,[]),!i.loose){let t=i.items[e].tokens.filter(e=>"space"===e.type);i.loose=t.length>0&&t.some(e=>/\n.*\n/.test(e.raw))}if(i.loose)for(let e=0;e<i.items.length;e++)i.items[e].loose=!0;return i}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let e=t[1].toLowerCase().replace(/\s+/g," "),n=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:n,title:r}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;let n=kM(t[1]),r=t[2].replace(/^\||\| *$/g,"").split("|"),i=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===r.length){for(let e of r)/^ *-+: *$/.test(e)?o.align.push("right"):/^ *:-+: *$/.test(e)?o.align.push("center"):/^ *:-+ *$/.test(e)?o.align.push("left"):o.align.push(null);for(let e=0;e<n.length;e++)o.header.push({text:n[e],tokens:this.lexer.inline(n[e]),header:!0,align:o.align[e]});for(let e of i)o.rows.push(kM(e,o.header.length).map((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:o.align[t]})));return o}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let e=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:kS(t[1])}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;let t=kN(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{let e=function(e,t){if(-1===e.indexOf(")"))return -1;let n=0;for(let r=0;r<e.length;r++)if("\\"===e[r])r++;else if("("===e[r])n++;else if(e[r]===t[1]&&--n<0)return r;return -1}(t[2],"()");if(e>-1){let n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],r="";if(this.options.pedantic){let e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);e&&(n=e[1],r=e[3])}else r=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(e)?n.slice(1):n.slice(1,-1)),k_(t,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let e=t[(n[2]||n[1]).replace(/\s+/g," ").toLowerCase()];if(!e){let e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return k_(n,e,n[0],this.lexer)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!(!r||r[3]&&n.match(/[\p{L}\p{N}]/u))&&(!(r[1]||r[2])||!n||this.rules.inline.punctuation.exec(n))){let n=[...r[0]].length-1,i,o,s=n,a=0,l="*"===r[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+n);null!=(r=l.exec(t));){if(!(i=r[1]||r[2]||r[3]||r[4]||r[5]||r[6]))continue;if(o=[...i].length,r[3]||r[4]){s+=o;continue}if((r[5]||r[6])&&n%3&&!((n+o)%3)){a+=o;continue}if((s-=o)>0)continue;o=Math.min(o,o+s+a);let t=[...r[0]][0].length,l=e.slice(0,n+r.index+t+o);if(Math.min(n,o)%2){let e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}let c=l.slice(2,-2);return{type:"strong",raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," "),n=/[^ ]/.test(e),r=/^ /.test(e)&&/ $/.test(e);return n&&r&&(e=e.substring(1,e.length-1)),e=kS(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let e,n;return n="@"===t[2]?"mailto:"+(e=kS(t[1])):e=kS(t[1]),{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(e){var t;let n;if(n=this.rules.inline.url.exec(e)){let e,r;if("@"===n[2])r="mailto:"+(e=kS(n[0]));else{let i;do i=n[0],n[0]=(null==(t=this.rules.inline._backpedal.exec(n[0]))?void 0:t[0])??"";while(i!==n[0]);e=kS(n[0]),r="www."===n[1]?"http://"+n[0]:n[0]}return{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let e;return e=this.lexer.state.inRawBlock?t[0]:kS(t[0]),{type:"text",raw:t[0],text:e}}}}let kD=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,kP=/(?:[*+-]|\d{1,9}[.)])/,kR=kT(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,kP).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),kI=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,kz=/(?!\s*\])(?:\\.|[^\[\]\\])+/,kL=kT(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",kz).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),kq=kT(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,kP).getRegex(),k$="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",kB=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,kF=kT("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",kB).replace("tag",k$).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),kQ=kT(kI).replace("hr",kD).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",k$).getRegex(),kV={blockquote:kT(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",kQ).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:kL,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:kD,html:kF,lheading:kR,list:kq,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:kQ,table:kE,text:/^[^\n]+/},kH=kT("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",kD).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",k$).getRegex(),kU={...kV,table:kH,paragraph:kT(kI).replace("hr",kD).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",kH).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",k$).getRegex()},kW={...kV,html:kT(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",kB).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:kE,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:kT(kI).replace("hr",kD).replace("heading",` *#{1,6} *[^
]`).replace("lheading",kR).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},kG=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,kX=/^( {2,}|\\)\n(?!\s*$)/,kY="\\p{P}\\p{S}",kZ=kT(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,kY).getRegex(),kK=kT(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,kY).getRegex(),kJ=kT("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,kY).getRegex(),k0=kT("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,kY).getRegex(),k1=kT(/\\([punct])/,"gu").replace(/punct/g,kY).getRegex(),k2=kT(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),k4=kT(kB).replace("(?:--\x3e|$)","--\x3e").getRegex(),k5=kT("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",k4).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),k3=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,k6=kT(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",k3).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),k7=kT(/^!?\[(label)\]\[(ref)\]/).replace("label",k3).replace("ref",kz).getRegex(),k8=kT(/^!?\[(ref)\](?:\[\])?/).replace("ref",kz).getRegex(),k9=kT("reflink|nolink(?!\\()","g").replace("reflink",k7).replace("nolink",k8).getRegex(),Oe={_backpedal:kE,anyPunctuation:k1,autolink:k2,blockSkip:/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,br:kX,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:kE,emStrongLDelim:kK,emStrongRDelimAst:kJ,emStrongRDelimUnd:k0,escape:kG,link:k6,nolink:k8,punctuation:kZ,reflink:k7,reflinkSearch:k9,tag:k5,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:kE},Ot={...Oe,link:kT(/^!?\[(label)\]\((.*?)\)/).replace("label",k3).getRegex(),reflink:kT(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",k3).getRegex()},On={...Oe,escape:kT(kG).replace("])","~|])").getRegex(),url:kT(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Or={...On,br:kT(kX).replace("{2,}","*").getRegex(),text:kT(On.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Oi={normal:kV,gfm:kU,pedantic:kW},Oo={normal:Oe,gfm:On,breaks:Or,pedantic:Ot};class Os{constructor(e){z(this,"tokens"),z(this,"options"),z(this,"state"),z(this,"tokenizer"),z(this,"inlineQueue"),this.tokens=[],this.tokens.links=Object.create(null),this.options=e||ky,this.options.tokenizer=this.options.tokenizer||new kj,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={block:Oi.normal,inline:Oo.normal};this.options.pedantic?(t.block=Oi.pedantic,t.inline=Oo.pedantic):this.options.gfm&&(t.block=Oi.gfm,this.options.breaks?t.inline=Oo.breaks:t.inline=Oo.gfm),this.tokenizer.rules=t}static get rules(){return{block:Oi,inline:Oo}}static lex(e,t){return new Os(t).lex(e)}static lexInline(e,t){return new Os(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){let r,i,o;for(this.options.pedantic&&(e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(n=>!!(r=n.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),1===r.raw.length&&t.length>0?t[t.length-1].raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),(i=t[t.length-1])&&("paragraph"===i.type||"text"===i.type)?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if((r=this.tokenizer.fences(e))||(r=this.tokenizer.heading(e))||(r=this.tokenizer.hr(e))||(r=this.tokenizer.blockquote(e))||(r=this.tokenizer.list(e))||(r=this.tokenizer.html(e))){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),(i=t[t.length-1])&&("paragraph"===i.type||"text"===i.type)?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if((r=this.tokenizer.table(e))||(r=this.tokenizer.lheading(e))){e=e.substring(r.raw.length),t.push(r);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock){let t,n=1/0,r=e.slice(1);this.options.extensions.startBlock.forEach(e=>{"number"==typeof(t=e.call({lexer:this},r))&&t>=0&&(n=Math.min(n,t))}),n<1/0&&n>=0&&(o=e.substring(0,n+1))}if(this.state.top&&(r=this.tokenizer.paragraph(o))){i=t[t.length-1],n&&(null==i?void 0:i.type)==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r),n=o.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),(i=t[t.length-1])&&"text"===i.type?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,r,i,o=e,s,a,l;if(this.tokens.links){let e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(s=this.tokenizer.rules.inline.reflinkSearch.exec(o));)e.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(s=this.tokenizer.rules.inline.blockSkip.exec(o));)o=o.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(s=this.tokenizer.rules.inline.anyPunctuation.exec(o));)o=o.slice(0,s.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(a||(l=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))){if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),(r=t[t.length-1])&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length),(r=t[t.length-1])&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);continue}if((n=this.tokenizer.emStrong(e,o,l))||(n=this.tokenizer.codespan(e))||(n=this.tokenizer.br(e))||(n=this.tokenizer.del(e))||(n=this.tokenizer.autolink(e))||!this.state.inLink&&(n=this.tokenizer.url(e))){e=e.substring(n.raw.length),t.push(n);continue}if(i=e,this.options.extensions&&this.options.extensions.startInline){let t,n=1/0,r=e.slice(1);this.options.extensions.startInline.forEach(e=>{"number"==typeof(t=e.call({lexer:this},r))&&t>=0&&(n=Math.min(n,t))}),n<1/0&&n>=0&&(i=e.substring(0,n+1))}if(n=this.tokenizer.inlineText(i)){e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(l=n.raw.slice(-1)),a=!0,(r=t[t.length-1])&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);continue}if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw Error(t)}}return t}}class Oa{constructor(e){z(this,"options"),z(this,"parser"),this.options=e||ky}space(e){return""}code({text:e,lang:t,escaped:n}){var r;let i=null==(r=(t||"").match(/^\S*/))?void 0:r[0],o=e.replace(/\n$/,"")+`
`;return i?'<pre><code class="language-'+kS(i)+'">'+(n?o:kS(o,!0))+`</code></pre>
`:"<pre><code>"+(n?o:kS(o,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,n=e.start,r="";for(let t=0;t<e.items.length;t++){let n=e.items[t];r+=this.listitem(n)}let i=t?"ol":"ul";return"<"+i+(t&&1!==n?' start="'+n+'"':"")+`>
`+r+"</"+i+`>
`}listitem(e){let t="";if(e.task){let n=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&"paragraph"===e.tokens[0].type?(e.tokens[0].text=n+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=n+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:n+" ",text:n+" "}):t+=n+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let t=0;t<e.header.length;t++)n+=this.tablecell(e.header[t]);t+=this.tablerow({text:n});let r="";for(let t=0;t<e.rows.length;t++){let i=e.rows[t];n="";for(let e=0;e<i.length;e++)n+=this.tablecell(i[e]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let r=this.parser.parseInline(n),i=kA(e);if(null===i)return r;let o='<a href="'+(e=i)+'"';return t&&(o+=' title="'+t+'"'),o+=">"+r+"</a>"}image({href:e,title:t,text:n}){let r=kA(e);if(null===r)return n;e=r;let i=`<img src="${e}" alt="${n}"`;return t&&(i+=` title="${t}"`),i+=">"}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}}class Ol{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class Oc{constructor(e){z(this,"options"),z(this,"renderer"),z(this,"textRenderer"),this.options=e||ky,this.options.renderer=this.options.renderer||new Oa,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Ol}static parse(e,t){return new Oc(t).parse(e)}static parseInline(e,t){return new Oc(t).parseInline(e)}parse(e,t=!0){let n="";for(let r=0;r<e.length;r++){let i=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){let e=this.options.extensions.renderers[i.type].call({parser:this},i);if(!1!==e||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(i.type)){n+=e||"";continue}}switch(i.type){case"space":n+=this.renderer.space(i);continue;case"hr":n+=this.renderer.hr(i);continue;case"heading":n+=this.renderer.heading(i);continue;case"code":n+=this.renderer.code(i);continue;case"table":n+=this.renderer.table(i);continue;case"blockquote":n+=this.renderer.blockquote(i);continue;case"list":n+=this.renderer.list(i);continue;case"html":n+=this.renderer.html(i);continue;case"paragraph":n+=this.renderer.paragraph(i);continue;case"text":{let o=i,s=this.renderer.text(o);for(;r+1<e.length&&"text"===e[r+1].type;)o=e[++r],s+=`
`+this.renderer.text(o);t?n+=this.renderer.paragraph({type:"paragraph",raw:s,text:s,tokens:[{type:"text",raw:s,text:s}]}):n+=s;continue}default:{let e='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw Error(e)}}}return n}parseInline(e,t){t=t||this.renderer;let n="";for(let r=0;r<e.length;r++){let i=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){let e=this.options.extensions.renderers[i.type].call({parser:this},i);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){n+=e||"";continue}}switch(i.type){case"escape":case"text":n+=t.text(i);break;case"html":n+=t.html(i);break;case"link":n+=t.link(i);break;case"image":n+=t.image(i);break;case"strong":n+=t.strong(i);break;case"em":n+=t.em(i);break;case"codespan":n+=t.codespan(i);break;case"br":n+=t.br(i);break;case"del":n+=t.del(i);break;default:{let e='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw Error(e)}}}return n}}class Ou{constructor(e){z(this,"options"),z(this,"block"),this.options=e||ky}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?Os.lex:Os.lexInline}provideParser(){return this.block?Oc.parse:Oc.parseInline}}z(Ou,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class Oh{constructor(...e){z(this,"defaults",kg()),z(this,"options",this.setOptions),z(this,"parse",this.parseMarkdown(!0)),z(this,"parseInline",this.parseMarkdown(!1)),z(this,"Parser",Oc),z(this,"Renderer",Oa),z(this,"TextRenderer",Ol),z(this,"Lexer",Os),z(this,"Tokenizer",kj),z(this,"Hooks",Ou),this.use(...e)}walkTokens(e,t){var n,r;let i=[];for(let o of e)switch(i=i.concat(t.call(this,o)),o.type){case"table":for(let e of o.header)i=i.concat(this.walkTokens(e.tokens,t));for(let e of o.rows)for(let n of e)i=i.concat(this.walkTokens(n.tokens,t));break;case"list":i=i.concat(this.walkTokens(o.items,t));break;default:{let e=o;null!=(r=null==(n=this.defaults.extensions)?void 0:n.childTokens)&&r[e.type]?this.defaults.extensions.childTokens[e.type].forEach(n=>{let r=e[n].flat(1/0);i=i.concat(this.walkTokens(r,t))}):e.tokens&&(i=i.concat(this.walkTokens(e.tokens,t)))}}return i}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(e=>{let n={...e};if(n.async=this.defaults.async||n.async||!1,e.extensions&&(e.extensions.forEach(e=>{if(!e.name)throw Error("extension name required");if("renderer"in e){let n=t.renderers[e.name];n?t.renderers[e.name]=function(...t){let r=e.renderer.apply(this,t);return!1===r&&(r=n.apply(this,t)),r}:t.renderers[e.name]=e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw Error("extension level must be 'block' or 'inline'");let n=t[e.level];n?n.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)}),n.extensions=t),e.renderer){let t=this.defaults.renderer||new Oa(this.defaults);for(let n in e.renderer){if(!(n in t))throw Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;let r=e.renderer[n],i=t[n];t[n]=(...e)=>{let n=r.apply(t,e);return!1===n&&(n=i.apply(t,e)),n||""}}n.renderer=t}if(e.tokenizer){let t=this.defaults.tokenizer||new kj(this.defaults);for(let n in e.tokenizer){if(!(n in t))throw Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;let r=e.tokenizer[n],i=t[n];t[n]=(...e)=>{let n=r.apply(t,e);return!1===n&&(n=i.apply(t,e)),n}}n.tokenizer=t}if(e.hooks){let t=this.defaults.hooks||new Ou;for(let n in e.hooks){if(!(n in t))throw Error(`hook '${n}' does not exist`);if(["options","block"].includes(n))continue;let r=e.hooks[n],i=t[n];Ou.passThroughHooks.has(n)?t[n]=e=>{if(this.defaults.async)return Promise.resolve(r.call(t,e)).then(e=>i.call(t,e));let n=r.call(t,e);return i.call(t,n)}:t[n]=(...e)=>{let n=r.apply(t,e);return!1===n&&(n=i.apply(t,e)),n}}n.hooks=t}if(e.walkTokens){let t=this.defaults.walkTokens,r=e.walkTokens;n.walkTokens=function(e){let n=[];return n.push(r.call(this,e)),t&&(n=n.concat(t.call(this,e))),n}}this.defaults={...this.defaults,...n}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Os.lex(e,t??this.defaults)}parser(e,t){return Oc.parse(e,t??this.defaults)}parseMarkdown(e){return(t,n)=>{let r={...n},i={...this.defaults,...r},o=this.onError(!!i.silent,!!i.async);if(!0===this.defaults.async&&!1===r.async)return o(Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||null===t)return o(Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return o(Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=e);let s=i.hooks?i.hooks.provideLexer():e?Os.lex:Os.lexInline,a=i.hooks?i.hooks.provideParser():e?Oc.parse:Oc.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(t):t).then(e=>s(e,i)).then(e=>i.hooks?i.hooks.processAllTokens(e):e).then(e=>i.walkTokens?Promise.all(this.walkTokens(e,i.walkTokens)).then(()=>e):e).then(e=>a(e,i)).then(e=>i.hooks?i.hooks.postprocess(e):e).catch(o);try{i.hooks&&(t=i.hooks.preprocess(t));let e=s(t,i);i.hooks&&(e=i.hooks.processAllTokens(e)),i.walkTokens&&this.walkTokens(e,i.walkTokens);let n=a(e,i);return i.hooks&&(n=i.hooks.postprocess(n)),n}catch(e){return o(e)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let e="<p>An error occurred:</p><pre>"+kS(n.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(n);throw n}}}let Od=new Oh;function Of(e,t){return Od.parse(e,t)}Of.options=Of.setOptions=function(e){return Od.setOptions(e),Of.defaults=Od.defaults,ky=Of.defaults,Of},Of.getDefaults=kg,Of.defaults=ky,Of.use=function(...e){return Od.use(...e),Of.defaults=Od.defaults,ky=Of.defaults,Of},Of.walkTokens=function(e,t){return Od.walkTokens(e,t)},Of.parseInline=Od.parseInline,Of.Parser=Oc,Of.parser=Oc.parse,Of.Renderer=Oa,Of.TextRenderer=Ol,Of.Lexer=Os,Of.lexer=Os.lex,Of.Tokenizer=kj,Of.Hooks=Ou,Of.parse=Of,Of.options,Of.setOptions,Of.use,Of.walkTokens,Of.parseInline,Oc.parse,Os.lex;var Op={},Om={},Og={},Oy={},Ob={};Object.defineProperty(Ob,"__esModule",{value:!0}),Ob.default=new Uint16Array('<\xd5\0\0\0\0\0\0EMabcfglmnoprstu\\bfms\x7f\x84\x8b\x90\x95\x98\xa6\xb3\xb9\xc8\xcflig\xc6P&cute\xc1reve;iyx}rc\xc2;r;\uD835\uDD04rave\xc0pha;acr;d;gp\x9d\xa1on;f;\uD835\uDD38plyFunction;ing\xc5cs\xbe\xc3r;\uD835\uDC9Cign;ilde\xc3ml\xc4aceforsu\xe5\xfb\xfecr\xea\xf2kslash;\xf6\xf8;ed;y;crtause;noullis;a;r;\uD835\uDD05pf;\uD835\uDD39eve;c\xf2mpeq;HOacdefhilorsucy;PY\xa9cpyute;;italDifferentialD;leys;aeioron;dil\xc7rc;nint;ot;dnilla;terDot;\xf2i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;\uD835\uDC9Ep;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;\uD835\uDD07afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;\uD835\uDD3B;DEot;qual;bleCDLRUVontourIntegra\xeco\0\0\xbbnArrow;eoftARTrrow;ightArrow;e\xe5ngLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;\uD835\uDC9Frok;NTacdfglmopqstuxG;H\xd0cute\xc9aiyron;rc\xca;ot;r;\uD835\uDD08rave\xc8ement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;\uD835\uDD3Csilon;uail;Tilde;librium;cir;m;a;ml\xcbipsts;onentialE;cfiosy;r;\uD835\uDD09lled\0\0mallSquare;erySmallSquare;\0\0\0f;\uD835\uDD3DAll;riertrf;c\xf2JTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;\uD835\uDD0A;pf;\uD835\uDD3EeaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;\uD835\uDCA2;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ct\xf2rok;mpownHum\xf0qual;EJOacdfgmnostucy;lig;cy;cute\xcdiyrc\xce;ot;r;rave\xcc;apcgr;inaryI;lie\xf3\0;egrral;section;isibleCTomma;imes;gpton;f;\uD835\uDD40a;cr;ilde;\0cy;l\xcfcfosuiyrc;;r;\uD835\uDD0Dpf;\uD835\uDD41\0r;\uD835\uDCA5rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;\uD835\uDD0Epf;\uD835\uDD42cr;\uD835\uDCA6JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ight\xe1sEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;\uD835\uDD0F;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftaright\xe1ight\xe1f;\uD835\uDD43erLReftArrow;ightArrow;cht\xf2;rok;;acefiosup;y;dliumSpace;lintrf;r;\uD835\uDD10nusPlus;pf;\uD835\uDD44c\xf2;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicn\xeberyThi\xeetedGLreaterGreate\xf2essLes\xf3Line;r;\uD835\uDD11Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;\uD835\uDCA9ilde\xd1;Eacdfgmoprstuvlig;cute\xd3iyrc\xd4;blac;r;\uD835\uDD12rave\xd2aeicr;ga;cron;pf;\uD835\uDD46enCurlyDQoubleQuote;uote;;clr;\uD835\uDCAAash\xd8ide\xd5es;ml\xd6erBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;\uD835\uDD13i;;usMinus;ipncareplan\xe5f;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;\uD835\uDCAB;UfosOT"r;\uD835\uDD14pf;cr;\uD835\uDCACBEacefhiorsuarr;G\xaecnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;r\xbbo;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;\uD835\uDD16ortDLRUownArrow\xbbeftArrow\xbbightArrow\xbbpArrow;gma;allCircle;pf;\uD835\uDD4A\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;\uD835\uDCAEar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th\xe1;;esrset;Equal;et\xbbHRSacfhiorsORN\xdeADE;Hccy;y;bu;;aeyron;dil;;r;\uD835\uDD17ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;\uD835\uDD4BipleDot;ctr;\uD835\uDCAFrok;\0\0\0\0\0\0\0crute\xdar;ocir;r\0y;ve;iyrc\xdb;blac;r;\uD835\uDD18rave\xd9acr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;\uD835\uDD4CADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;own\xe1erLReftArrow;ightArrow;i;lon;ing;cr;\uD835\uDCB0ilde;ml\xdcDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;\uD835\uDD19pf;\uD835\uDD4Dcr;\uD835\uDCB1dash;cefosirc;dge;r;\uD835\uDD1Apf;\uD835\uDD4Ecr;\uD835\uDCB2fiosr;\uD835\uDD1B;pf;\uD835\uDD4Fcr;\uD835\uDCB3AIUacfosucy;cy;cy;cute\xddiyrc;;r;\uD835\uDD1Cpf;\uD835\uDD50cr;\uD835\uDCB4ml;Hacdefoscy;cute;ayron;;ot;\0oWidt\xe8a;r;pf;cr;\uD835\uDCB5\0\0\0\0\0\0\0cute\xe1reve;;Ediuy;;rc\xe2te\xb4;lig\xe6;r\xb2;\uD835\uDD1Erave\xe0epfpsym;\xe8ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;e\xbbsd;a;;;;;;;;t;vb;d;pth;\xbb\xb9arr;gpon;f;\uD835\uDD52;Eaeiop;cir;;d;s;rox;e\xf1ing\xe5ctyr;\uD835\uDCB6;mp;e\xf1ilde\xe3ml\xe4cionin\xf4nt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;ge\xbbrk;tbrk;oy;quo;cmprtaus;eptyv;s\xe9no\xf5ahw;;een;r;\uD835\uDD1Fgcostuvwaiu\xf0rc;p\xbbdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;e\xe5\xe5arow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;\uD835\uDD53;tom\xbbtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbar\xa6ceior;\uD835\uDCB7mi;m;el;bh;sub;l;et\xbbp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;\xeeaeiu\0s;on;dil\xe7rc;ps;sm;ot;dmnil\xb8ptyv;t\xa2;er\xe4r;\uD835\uDD20ceiy;ck;mark\xbb;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd\xbb;st;irc;ash;nint;id;cir;ubs;uit\xbb\0on;e;q\xc7\xc6\0\0a;t;;fl\xeeemxent\xbbe\xf3\0;dot;n\xf4fry;\uD835\uDD54o\xe4\xa9;sr;aorr;ss;cur;\uD835\uDCB8bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0re\xe3u\xe3ee;edge;en\xa4earrowlreft\xbbight\xbbe\xe4cionin\xf4nt;lcty;AHabcdefhijlorstuwzr\xf2ar;glrsger;eth;\xf2h;v\xbbarow;a\xe3ayron;;;aogrr;tseq;glm\xb0ta;ptyv;irsht;;\uD835\uDD21arlr\xbb\xbbaegsvm;osnd;suit;amma;in;;iode\xf7;ontimes;n\xf8cy;c\0\0rn;op;lptuwlar;f;\uD835\uDD55;empsq;dot;inus;lus;quare;blebarwedg\xe5\xfanadhownarrow\xf3arpoonlref\xf4igh\xf4karo\xf7\0\0rn;op;cotry;\uD835\uDCB9;l;rok;drot;i;fahr\xf2a\xf2angle;ciy;grarr;DacdefglmnopqrstuxDoo\xf4csute\xe9ter;aioyron;r;c\xealon;;ot;Drot;;\uD835\uDD22;rsave\xe8;dot;;ilsnters;;;dot;apscr;ty;svet\xbbp1;;;gs;p;gpon;f;\uD835\uDD56alsr;sl;us;i;lvon\xbb;csuviorc\xbb\0\0\xedantgltr\xbbess\xbbaeils;st;v;DD;parsl;Daot;rr;cdir;o\xf4ah;\xf0mrl\xebo;cipl;s\xf4eoctatio\xeenential\xe5\0\0\0\0\0\0\0llingdotse\xf1y;male;ilrlig;\0\0g;ig;;\uD835\uDD23lig;lig;fjaltt;ig;ns;of;\0f;\uD835\uDD57ak;v;artint;aocs\0\0\xbd;\xbc;;;\0;;\0\0\xbe;;5;\0;;8;l;wn;cr;\uD835\uDCBBEabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan\xf4;cdlc;ot;o;l;;es;r;\uD835\uDD24;gmel;cy;;Eaj;;;Eaes;p;prox\xbb;q;qim;pf;\uD835\uDD58cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pro\xf8r;qlqles\xf3i\xedenrtneqq;\xc5Aabcefkosyr\xf2ilmrrs\xf0f\xbbil\xf4drcy;;cwir;;ar;irc;alrrts;uit\xbblip;con;r;\uD835\uDD25sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;\uD835\uDD59bar;cltr;\uD835\uDCBDas\xe8rok;bpull;hen\xbb\0\0\0\0\0\0cute\xed;iyrc\xee;cxy;cl\xa1fr;\uD835\uDD26rave\xec;inoinnt;t;fin;ta;lig;aopcgtr;elpin\xe5ar\xf4h;f;ed;;cfotare;in;tie;do\xf4;celpal;grer\xf3\xe3arhk;rod;cgpty;on;f;\uD835\uDD5Aa;uest\xbfcir;\uD835\uDCBEn;Edsv;ot;;v;;ilde;\0cy;l\xefcfmosuiyrc;;r;\uD835\uDD27ath;pf;\uD835\uDD5B\0r;\uD835\uDCBFrcy;kcy;acfghjosppa;v;eydil;;r;\uD835\uDD28reen;cy;cy;pf;\uD835\uDD5Ccr;\uD835\uDCC0ABEHabcdefghjlmnoprstuvartr\xf2\xf2ail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;ra\xeebda;g;dl;\xe5;uo\xabr;bfhlpst;fs;s;\xebp;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;\xec\xe2;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;ta\xe9arpoonduown\xbbp\xbbeftarrows;ightahsrrow;sarpoon\xf3quigarro\xf7hreetimes;;qslan\xf4;cdgsc;ot;o;r;;es;adegsppro\xf8ot;qgq\xf4gt\xf2\xf4i\xedilrsht;;\uD835\uDD29;E;rdu;l;lk;cy;;achtr\xf2orne\xf2ard;ri;iodot;ust;ache\xbbEaes;p;prox\xbb;q;qim;abnoptwznrg;r;r\xebglmreftaright\xe1apsto;ight\xe1parrowlref\xf4ight;aflr;;\uD835\uDD5Dus;imes;st;\xe1;efnge\xbbar;lt;achmtr\xf2orne\xf2ar;d;;ri;achiqtquo;r;\uD835\uDCC1m;eg;;buo;r;rok;<;cdhilqrci;r;re\xe5mes;arr;uest;Piar;;efrdushar;har;enrtneqq;\xc5DacdefhilnopsuDot;clprr\xafet;;ese\xbb;sto;dluow\xeeef\xf4\xf0ker;oymma;;ash;asuredangle\xbbr;\uD835\uDD2Ao;cdnro\xb5;acds\xf4ir;ot\xb7us;bd;u;p;\xf2\xf0dpels;f;\uD835\uDD5Ectr;\uD835\uDCC2pos\xbb;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptla\xbbute;g;;Eiop;d;s;ro\xf8ur;al;s\0p\xa0mp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;ui\xf6eiar;\xedist;sr;\uD835\uDD2BEest;qs;qslan\xf4i\xed;r\xbbAapr\xf2rr;ar;;sv;d;cy;AEadestr\xf2;rr;r;;fqstarrro\xf7ightarro\xf7;qslan\xf4;s\xbbi\xed;ri;ei\xe4ptf;\uD835\uDD5F\xac;inn;Edv;ot;;;i;v;;aorr;astlle\xecl;;lint;;ceu\xe5;c;e\xf1Aaitr\xf2rr;cw;;ghtarrow\xbbri;echimpqu;ceru\xe5;\uD835\uDCC3ort\0\0ar\xe1m;e;qsubp\xe5\xe5bcp;Ees;et;eq;qc;e\xf1;Ees;et;eq;qgilr\xeclde\xf1\xe7ianglelreft;e\xf1ight;e\xf1;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csute\xf3iyr;c\xf4;abioslac;v;old;lig;crir;;\uD835\uDD2C\0\0\0n;ave\xf2;bmar;acitr\xf2irr;oss;n\xe5;aeicr;ga;cdnron;;pf;\uD835\uDD60aelr;rp;;adiosvr\xf2;efmr;of\xbb\xaa\xbagof;r;lope;;clo\xf2ash\xf8l;ide\xf5es;as;ml\xf6bar;\0\0\0\0\0\0\0\0\0r;ast\xb6;lle\xec\0\0m;;y;rcimptnt;od;il;enk;r;\uD835\uDD2Dimo;v;ma\xf4ne;;tvchfork\xbb;aunckk;h;\xf6s;abcdemstcir;ir;ou;;n\xb1im;wo;ipuntint;f;\uD835\uDD61nd\xa3;Eaceinosu;p;u\xe5;c;acensppro\xf8urlye\xf1\xf1aespprox;qq;im;i\xedme;sEas\xf0dfpalslar;ine;urf;;t\xefrel;cir;\uD835\uDCC5;ncsp;fiopsur;\uD835\uDD2Epf;\uD835\uDD62rime;cr;\uD835\uDCC6aeoteirnion\xf3nt;st;e\xf1\xf4ABHabcdefhilmnoprstuxartr\xf2\xf2ail;ar\xf2ar;cdenqrteu;te;i\xe3mptyv;g;del;;\xe5uo\xbbr;abcfhlpstwp;;fs;;s;\xeb\xf0l;im;l;;aiil;o;nal\xf3abrr\xf2rk;akcek;;es;ldu;;aeuyron;diil;\xec\xe2;clqsa;dhar;uo;rh;acgl;ipsn\xe5ar\xf4t;ilrsht;;\uD835\uDD2Faordu\xbb;l;;v;gnshtahlrstrrow;ta\xe9arpoonduow\xeep\xbbeftahrrow\xf3arpoon\xf3ightarrows;quigarro\xf7hreetimes;g;ingdotse\xf1ahmr\xf2a\xf2;oust;ache\xbbmid;abptnrg;r;r\xebaflr;;\uD835\uDD63us;imes;apr;gt;olint;ar\xf2achqquo;r;\uD835\uDCC7buo;rhirre\xe5mes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu\xef;Eaceinpsy;\0;on;u\xe5;dil;rc;Eas;p;im;olint;i\xed;ot;be;Aacmstxrr;rhr\xeb;ot\xa7i;war;min\xf0nu\xf3\xf1t;r;o\uD835\uDD30acoyrp;hycy;;rt\0\0i\xe4ara\xec\xadgmma;fv;;deglnprot;;q;E;;E;e;lus;arr;ar\xf2aeitlslsetm\xe9hp;parsl;dle;;e;s;flptcy;;b;ar;f;\uD835\uDD64adres;uit\xbbcsuaup;s;p;s;ubp;eset;e\xf1;eset;e\xf1;afr\xbbar\xf2cemtr;\uD835\uDCC8tm\xee\xf1i\xecar\xe6arr;fanighteppsilo\xeeh\xe9s\xbbbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acensppro\xf8urlye\xf1\xf1aesppro\xf8q\xf1g;123;Edehlmnps\xb9\xb2\xb3;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr\xeb;owar;lig\xdf\0\0\0\0\0\0\0\0\0\0\0\0get;;r\xebaeyron;dil;;lrec;r;\uD835\uDD31eiko\0e4fa;svym;cnkasppro\xf8im\xbbs\xf0as\xf0rn\xfees\xd7;bd;ar;;eps\xe1;bcfot;ir;;o\uD835\uDD65rk;\xe1rime;aipd\xe5adempstngle;dlqrown\xbbeft;e\xf1;ight;e\xf1ot;inus;lus;b;ime;ezium;chtry;\uD835\uDCC9;cy;rok;iox\xf4headlreftarro\xf7ightarrow\xbbAHabcdfghlmoprstuwr\xf2ar;crute\xfa\xf2r\0y;ve;iyrc\xfb;abhr\xf2lac;a\xf2irsht;;\uD835\uDD32rave\xf9rlr\xbb\xbblk;ct\0\0rn;er\xbbop;ri;alcr;\xa8gpon;f;\uD835\uDD66adhlsuown\xe1arpoonlref\xf4igh\xf4i;hl\xbbon\xbbparrows;cit\0\0rn;er\xbbop;ng;ri;cr;\uD835\uDCCAdirot;lde;i;f\xbbamr\xf2l\xfcangle;ABDacdeflnoprszr\xf2ar;v;as\xe8nrgrt;eknprstapp\xe1othin\xe7hirop\xf4;h\xefiugm\xe1bpsetneq;q;setneq;q;hret\xe1ianglelreft\xbbight\xbby;ash\xbbelr;bear;q;lip;bta\xf2r;\uD835\uDD33tr\xe9subp\xbb\xbbpf;\uD835\uDD67ro\xf0tr\xe9cur;\uD835\uDCCBbpnEe\xbbnEe\xbbigzag;cefoprsirc;dibgar;e;q;erp;r;\uD835\uDD34pf;\uD835\uDD68;eat\xe8cr;\uD835\uDCCC\0\0\0\0\0\0\0tr\xe9r;\uD835\uDD35Aar\xf2r\xf2;Aar\xf2r\xf2a\xf0is;dptfl;\uD835\uDD69im\xe5Aar\xf2r\xf2cqr;\uD835\uDCCDptr\xe9acefiosucuyte\xfd;iyrc;;n\xa5r;\uD835\uDD36cy;pf;\uD835\uDD6Acr;\uD835\uDCCEcmy;l\xffacdefhioswcute;ayron;;ot;ettr\xe6a;r;\uD835\uDD37cy;grarr;pf;\uD835\uDD6Bcr;\uD835\uDCCFjn;j;'.split("").map(function(e){return e.charCodeAt(0)}));var Ov={};Object.defineProperty(Ov,"__esModule",{value:!0}),Ov.default=new Uint16Array("aglq	\x15\x18\x1b\x0f\0\0\x12p;os;t;t;uot;".split("").map(function(e){return e.charCodeAt(0)}));var Ox={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.replaceCodePoint=e.fromCodePoint=void 0;var t,n=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function r(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=n.get(e))&&void 0!==t?t:e}e.fromCodePoint=null!==(t=String.fromCodePoint)&&void 0!==t?t:function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)},e.replaceCodePoint=r,e.default=function(t){return(0,e.fromCodePoint)(r(t))}}(Ox),function(e){var t,n,r,i,o,s,a,l,c=_.w&&_.w.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),u=_.w&&_.w.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),h=_.w&&_.w.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&c(t,e,n);return u(t,e),t},d=_.w&&_.w.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXML=e.decodeHTMLStrict=e.decodeHTMLAttribute=e.decodeHTML=e.determineBranch=e.EntityDecoder=e.DecodingMode=e.BinTrieFlags=e.fromCodePoint=e.replaceCodePoint=e.decodeCodePoint=e.xmlDecodeTree=e.htmlDecodeTree=void 0;var f=d(Ob);e.htmlDecodeTree=f.default;var p=d(Ov);e.xmlDecodeTree=p.default;var m=h(Ox);function g(e){return e>=n.ZERO&&e<=n.NINE}e.decodeCodePoint=m.default,Object.defineProperty(e,"replaceCodePoint",{enumerable:!0,get:function(){return Ox.replaceCodePoint}}),Object.defineProperty(e,"fromCodePoint",{enumerable:!0,get:function(){return Ox.fromCodePoint}}),(t=n||(n={}))[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z",(i=r=e.BinTrieFlags||(e.BinTrieFlags={}))[i.VALUE_LENGTH=49152]="VALUE_LENGTH",i[i.BRANCH_LENGTH=16256]="BRANCH_LENGTH",i[i.JUMP_TABLE=127]="JUMP_TABLE",(o=a||(a={}))[o.EntityStart=0]="EntityStart",o[o.NumericStart=1]="NumericStart",o[o.NumericDecimal=2]="NumericDecimal",o[o.NumericHex=3]="NumericHex",o[o.NamedEntity=4]="NamedEntity",(s=l=e.DecodingMode||(e.DecodingMode={}))[s.Legacy=0]="Legacy",s[s.Strict=1]="Strict",s[s.Attribute=2]="Attribute";var y=function(){function e(e,t,n){this.decodeTree=e,this.emitCodePoint=t,this.errors=n,this.state=a.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=l.Strict}return e.prototype.startEntity=function(e){this.decodeMode=e,this.state=a.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},e.prototype.write=function(e,t){switch(this.state){case a.EntityStart:return e.charCodeAt(t)===n.NUM?(this.state=a.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=a.NamedEntity,this.stateNamedEntity(e,t));case a.NumericStart:return this.stateNumericStart(e,t);case a.NumericDecimal:return this.stateNumericDecimal(e,t);case a.NumericHex:return this.stateNumericHex(e,t);case a.NamedEntity:return this.stateNamedEntity(e,t)}},e.prototype.stateNumericStart=function(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===n.LOWER_X?(this.state=a.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=a.NumericDecimal,this.stateNumericDecimal(e,t))},e.prototype.addToNumericResult=function(e,t,n,r){if(t!==n){var i=n-t;this.result=this.result*Math.pow(r,i)+parseInt(e.substr(t,i),r),this.consumed+=i}},e.prototype.stateNumericHex=function(e,t){for(var r=t;t<e.length;){var i,o=e.charCodeAt(t);if(!g(o)&&(!((i=o)>=n.UPPER_A)||!(i<=n.UPPER_F))&&(!(i>=n.LOWER_A)||!(i<=n.LOWER_F)))return this.addToNumericResult(e,r,t,16),this.emitNumericEntity(o,3);t+=1}return this.addToNumericResult(e,r,t,16),-1},e.prototype.stateNumericDecimal=function(e,t){for(var n=t;t<e.length;){var r=e.charCodeAt(t);if(!g(r))return this.addToNumericResult(e,n,t,10),this.emitNumericEntity(r,2);t+=1}return this.addToNumericResult(e,n,t,10),-1},e.prototype.emitNumericEntity=function(e,t){var r;if(this.consumed<=t)return null===(r=this.errors)||void 0===r||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===n.SEMI)this.consumed+=1;else if(this.decodeMode===l.Strict)return 0;return this.emitCodePoint((0,m.replaceCodePoint)(this.result),this.consumed),this.errors&&(e!==n.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},e.prototype.stateNamedEntity=function(e,t){for(var i=this.decodeTree,o=i[this.treeIndex],s=(o&r.VALUE_LENGTH)>>14;t<e.length;t++,this.excess++){var a=e.charCodeAt(t);if(this.treeIndex=v(i,o,this.treeIndex+Math.max(1,s),a),this.treeIndex<0)return 0===this.result||this.decodeMode===l.Attribute&&(0===s||function(e){var t;return e===n.EQUALS||(t=e)>=n.UPPER_A&&t<=n.UPPER_Z||t>=n.LOWER_A&&t<=n.LOWER_Z||g(t)}(a))?0:this.emitNotTerminatedNamedEntity();if(0!=(s=((o=i[this.treeIndex])&r.VALUE_LENGTH)>>14)){if(a===n.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==l.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return -1},e.prototype.emitNotTerminatedNamedEntity=function(){var e,t=this.result,n=(this.decodeTree[t]&r.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,n,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed},e.prototype.emitNamedEntityData=function(e,t,n){var i=this.decodeTree;return this.emitCodePoint(1===t?i[e]&~r.VALUE_LENGTH:i[e+1],n),3===t&&this.emitCodePoint(i[e+2],n),n},e.prototype.end=function(){var e;switch(this.state){case a.NamedEntity:return 0!==this.result&&(this.decodeMode!==l.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case a.NumericDecimal:return this.emitNumericEntity(0,2);case a.NumericHex:return this.emitNumericEntity(0,3);case a.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case a.EntityStart:return 0}},e}();function b(e){var t="",n=new y(e,function(e){return t+=(0,m.fromCodePoint)(e)});return function(e,r){for(var i=0,o=0;(o=e.indexOf("&",o))>=0;){t+=e.slice(i,o),n.startEntity(r);var s=n.write(e,o+1);if(s<0){i=o+n.end();break}i=o+s,o=0===s?i+1:i}var a=t+e.slice(i);return t="",a}}function v(e,t,n,i){var o=(t&r.BRANCH_LENGTH)>>7,s=t&r.JUMP_TABLE;if(0===o)return 0!==s&&i===s?n:-1;if(s){var a=i-s;return a<0||a>=o?-1:e[n+a]-1}for(var l=n,c=l+o-1;l<=c;){var u=l+c>>>1,h=e[u];if(h<i)l=u+1;else{if(!(h>i))return e[u+o];c=u-1}}return -1}e.EntityDecoder=y,e.determineBranch=v;var x=b(f.default),w=b(p.default);e.decodeHTML=function(e,t){return void 0===t&&(t=l.Legacy),x(e,t)},e.decodeHTMLAttribute=function(e){return x(e,l.Attribute)},e.decodeHTMLStrict=function(e){return x(e,l.Strict)},e.decodeXML=function(e){return w(e,l.Strict)}}(Oy),function(e){function t(e){return e===s.Space||e===s.NewLine||e===s.Tab||e===s.FormFeed||e===s.CarriageReturn}function n(e){return e===s.Slash||e===s.Gt||t(e)}function r(e){return e>=s.Zero&&e<=s.Nine}Object.defineProperty(e,"__esModule",{value:!0}),e.QuoteType=void 0,(a=s||(s={}))[a.Tab=9]="Tab",a[a.NewLine=10]="NewLine",a[a.FormFeed=12]="FormFeed",a[a.CarriageReturn=13]="CarriageReturn",a[a.Space=32]="Space",a[a.ExclamationMark=33]="ExclamationMark",a[a.Number=35]="Number",a[a.Amp=38]="Amp",a[a.SingleQuote=39]="SingleQuote",a[a.DoubleQuote=34]="DoubleQuote",a[a.Dash=45]="Dash",a[a.Slash=47]="Slash",a[a.Zero=48]="Zero",a[a.Nine=57]="Nine",a[a.Semi=59]="Semi",a[a.Lt=60]="Lt",a[a.Eq=61]="Eq",a[a.Gt=62]="Gt",a[a.Questionmark=63]="Questionmark",a[a.UpperA=65]="UpperA",a[a.LowerA=97]="LowerA",a[a.UpperF=70]="UpperF",a[a.LowerF=102]="LowerF",a[a.UpperZ=90]="UpperZ",a[a.LowerZ=122]="LowerZ",a[a.LowerX=120]="LowerX",a[a.OpeningSquareBracket=91]="OpeningSquareBracket",(l=i||(i={}))[l.Text=1]="Text",l[l.BeforeTagName=2]="BeforeTagName",l[l.InTagName=3]="InTagName",l[l.InSelfClosingTag=4]="InSelfClosingTag",l[l.BeforeClosingTagName=5]="BeforeClosingTagName",l[l.InClosingTagName=6]="InClosingTagName",l[l.AfterClosingTagName=7]="AfterClosingTagName",l[l.BeforeAttributeName=8]="BeforeAttributeName",l[l.InAttributeName=9]="InAttributeName",l[l.AfterAttributeName=10]="AfterAttributeName",l[l.BeforeAttributeValue=11]="BeforeAttributeValue",l[l.InAttributeValueDq=12]="InAttributeValueDq",l[l.InAttributeValueSq=13]="InAttributeValueSq",l[l.InAttributeValueNq=14]="InAttributeValueNq",l[l.BeforeDeclaration=15]="BeforeDeclaration",l[l.InDeclaration=16]="InDeclaration",l[l.InProcessingInstruction=17]="InProcessingInstruction",l[l.BeforeComment=18]="BeforeComment",l[l.CDATASequence=19]="CDATASequence",l[l.InSpecialComment=20]="InSpecialComment",l[l.InCommentLike=21]="InCommentLike",l[l.BeforeSpecialS=22]="BeforeSpecialS",l[l.SpecialStartSequence=23]="SpecialStartSequence",l[l.InSpecialTag=24]="InSpecialTag",l[l.BeforeEntity=25]="BeforeEntity",l[l.BeforeNumericEntity=26]="BeforeNumericEntity",l[l.InNamedEntity=27]="InNamedEntity",l[l.InNumericEntity=28]="InNumericEntity",l[l.InHexEntity=29]="InHexEntity",(c=o=e.QuoteType||(e.QuoteType={}))[c.NoValue=0]="NoValue",c[c.Unquoted=1]="Unquoted",c[c.Single=2]="Single",c[c.Double=3]="Double";var i,o,s,a,l,c,u={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])};e.default=function(){function e(e,t){var n=e.xmlMode,r=void 0!==n&&n,o=e.decodeEntities;this.cbs=t,this.state=i.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=i.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=r,this.decodeEntities=void 0===o||o,this.entityTrie=r?Oy.xmlDecodeTree:Oy.htmlDecodeTree}return e.prototype.reset=function(){this.state=i.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=i.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},e.prototype.write=function(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()},e.prototype.end=function(){this.running&&this.finish()},e.prototype.pause=function(){this.running=!1},e.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},e.prototype.getIndex=function(){return this.index},e.prototype.getSectionStart=function(){return this.sectionStart},e.prototype.stateText=function(e){e===s.Lt||!this.decodeEntities&&this.fastForwardTo(s.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=i.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===s.Amp&&(this.state=i.BeforeEntity)},e.prototype.stateSpecialStartSequence=function(e){var t=this.sequenceIndex===this.currentSequence.length;if(t?n(e):(32|e)===this.currentSequence[this.sequenceIndex]){if(!t){this.sequenceIndex++;return}}else this.isSpecial=!1;this.sequenceIndex=0,this.state=i.InTagName,this.stateInTagName(e)},e.prototype.stateInSpecialTag=function(e){if(this.sequenceIndex===this.currentSequence.length){if(e===s.Gt||t(e)){var n=this.index-this.currentSequence.length;if(this.sectionStart<n){var r=this.index;this.index=n,this.cbs.ontext(this.sectionStart,n),this.index=r}this.isSpecial=!1,this.sectionStart=n+2,this.stateInClosingTagName(e);return}this.sequenceIndex=0}(32|e)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:0===this.sequenceIndex?this.currentSequence===u.TitleEnd?this.decodeEntities&&e===s.Amp&&(this.state=i.BeforeEntity):this.fastForwardTo(s.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(e===s.Lt)},e.prototype.stateCDATASequence=function(e){e===u.Cdata[this.sequenceIndex]?++this.sequenceIndex===u.Cdata.length&&(this.state=i.InCommentLike,this.currentSequence=u.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=i.InDeclaration,this.stateInDeclaration(e))},e.prototype.fastForwardTo=function(e){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1},e.prototype.stateInCommentLike=function(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===u.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=i.Text):0===this.sequenceIndex?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},e.prototype.isTagStartChar=function(e){return this.xmlMode?!n(e):e>=s.LowerA&&e<=s.LowerZ||e>=s.UpperA&&e<=s.UpperZ},e.prototype.startSpecial=function(e,t){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=t,this.state=i.SpecialStartSequence},e.prototype.stateBeforeTagName=function(e){if(e===s.ExclamationMark)this.state=i.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===s.Questionmark)this.state=i.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){var t=32|e;this.sectionStart=this.index,this.xmlMode||t!==u.TitleEnd[2]?this.state=this.xmlMode||t!==u.ScriptEnd[2]?i.InTagName:i.BeforeSpecialS:this.startSpecial(u.TitleEnd,3)}else e===s.Slash?this.state=i.BeforeClosingTagName:(this.state=i.Text,this.stateText(e))},e.prototype.stateInTagName=function(e){n(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(e))},e.prototype.stateBeforeClosingTagName=function(e){t(e)||(e===s.Gt?this.state=i.Text:(this.state=this.isTagStartChar(e)?i.InClosingTagName:i.InSpecialComment,this.sectionStart=this.index))},e.prototype.stateInClosingTagName=function(e){(e===s.Gt||t(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.AfterClosingTagName,this.stateAfterClosingTagName(e))},e.prototype.stateAfterClosingTagName=function(e){(e===s.Gt||this.fastForwardTo(s.Gt))&&(this.state=i.Text,this.baseState=i.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeAttributeName=function(e){e===s.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=i.InSpecialTag,this.sequenceIndex=0):this.state=i.Text,this.baseState=this.state,this.sectionStart=this.index+1):e===s.Slash?this.state=i.InSelfClosingTag:t(e)||(this.state=i.InAttributeName,this.sectionStart=this.index)},e.prototype.stateInSelfClosingTag=function(e){e===s.Gt?(this.cbs.onselfclosingtag(this.index),this.state=i.Text,this.baseState=i.Text,this.sectionStart=this.index+1,this.isSpecial=!1):t(e)||(this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(e))},e.prototype.stateInAttributeName=function(e){(e===s.Eq||n(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.AfterAttributeName,this.stateAfterAttributeName(e))},e.prototype.stateAfterAttributeName=function(e){e===s.Eq?this.state=i.BeforeAttributeValue:e===s.Slash||e===s.Gt?(this.cbs.onattribend(o.NoValue,this.index),this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(e)):t(e)||(this.cbs.onattribend(o.NoValue,this.index),this.state=i.InAttributeName,this.sectionStart=this.index)},e.prototype.stateBeforeAttributeValue=function(e){e===s.DoubleQuote?(this.state=i.InAttributeValueDq,this.sectionStart=this.index+1):e===s.SingleQuote?(this.state=i.InAttributeValueSq,this.sectionStart=this.index+1):t(e)||(this.sectionStart=this.index,this.state=i.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))},e.prototype.handleInAttributeValue=function(e,t){e===t||!this.decodeEntities&&this.fastForwardTo(t)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(t===s.DoubleQuote?o.Double:o.Single,this.index),this.state=i.BeforeAttributeName):this.decodeEntities&&e===s.Amp&&(this.baseState=this.state,this.state=i.BeforeEntity)},e.prototype.stateInAttributeValueDoubleQuotes=function(e){this.handleInAttributeValue(e,s.DoubleQuote)},e.prototype.stateInAttributeValueSingleQuotes=function(e){this.handleInAttributeValue(e,s.SingleQuote)},e.prototype.stateInAttributeValueNoQuotes=function(e){t(e)||e===s.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(o.Unquoted,this.index),this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===s.Amp&&(this.baseState=this.state,this.state=i.BeforeEntity)},e.prototype.stateBeforeDeclaration=function(e){e===s.OpeningSquareBracket?(this.state=i.CDATASequence,this.sequenceIndex=0):this.state=e===s.Dash?i.BeforeComment:i.InDeclaration},e.prototype.stateInDeclaration=function(e){(e===s.Gt||this.fastForwardTo(s.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=i.Text,this.sectionStart=this.index+1)},e.prototype.stateInProcessingInstruction=function(e){(e===s.Gt||this.fastForwardTo(s.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=i.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeComment=function(e){e===s.Dash?(this.state=i.InCommentLike,this.currentSequence=u.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=i.InDeclaration},e.prototype.stateInSpecialComment=function(e){(e===s.Gt||this.fastForwardTo(s.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=i.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeSpecialS=function(e){var t=32|e;t===u.ScriptEnd[3]?this.startSpecial(u.ScriptEnd,4):t===u.StyleEnd[3]?this.startSpecial(u.StyleEnd,4):(this.state=i.InTagName,this.stateInTagName(e))},e.prototype.stateBeforeEntity=function(e){this.entityExcess=1,this.entityResult=0,e===s.Number?this.state=i.BeforeNumericEntity:e===s.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=i.InNamedEntity,this.stateInNamedEntity(e))},e.prototype.stateInNamedEntity=function(e){if(this.entityExcess+=1,this.trieIndex=(0,Oy.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,e),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var t=this.trieCurrent&Oy.BinTrieFlags.VALUE_LENGTH;if(t){var n=(t>>14)-1;if(this.allowLegacyEntity()||e===s.Semi){var r=this.index-this.entityExcess+1;r>this.sectionStart&&this.emitPartial(this.sectionStart,r),this.entityResult=this.trieIndex,this.trieIndex+=n,this.entityExcess=0,this.sectionStart=this.index+1,0===n&&this.emitNamedEntity()}else this.trieIndex+=n}},e.prototype.emitNamedEntity=function(){if(this.state=this.baseState,0!==this.entityResult)switch((this.entityTrie[this.entityResult]&Oy.BinTrieFlags.VALUE_LENGTH)>>14){case 1:this.emitCodePoint(this.entityTrie[this.entityResult]&~Oy.BinTrieFlags.VALUE_LENGTH);break;case 2:this.emitCodePoint(this.entityTrie[this.entityResult+1]);break;case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}},e.prototype.stateBeforeNumericEntity=function(e){(32|e)===s.LowerX?(this.entityExcess++,this.state=i.InHexEntity):(this.state=i.InNumericEntity,this.stateInNumericEntity(e))},e.prototype.emitNumericEntity=function(e){var t=this.index-this.entityExcess-1;t+2+ +(this.state===i.InHexEntity)!==this.index&&(t>this.sectionStart&&this.emitPartial(this.sectionStart,t),this.sectionStart=this.index+Number(e),this.emitCodePoint((0,Oy.replaceCodePoint)(this.entityResult))),this.state=this.baseState},e.prototype.stateInNumericEntity=function(e){e===s.Semi?this.emitNumericEntity(!0):r(e)?(this.entityResult=10*this.entityResult+(e-s.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},e.prototype.stateInHexEntity=function(e){e===s.Semi?this.emitNumericEntity(!0):r(e)?(this.entityResult=16*this.entityResult+(e-s.Zero),this.entityExcess++):e>=s.UpperA&&e<=s.UpperF||e>=s.LowerA&&e<=s.LowerF?(this.entityResult=16*this.entityResult+((32|e)-s.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},e.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===i.Text||this.baseState===i.InSpecialTag)},e.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===i.Text||this.state===i.InSpecialTag&&0===this.sequenceIndex?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===i.InAttributeValueDq||this.state===i.InAttributeValueSq||this.state===i.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},e.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},e.prototype.parse=function(){for(;this.shouldContinue();){var e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case i.Text:this.stateText(e);break;case i.SpecialStartSequence:this.stateSpecialStartSequence(e);break;case i.InSpecialTag:this.stateInSpecialTag(e);break;case i.CDATASequence:this.stateCDATASequence(e);break;case i.InAttributeValueDq:this.stateInAttributeValueDoubleQuotes(e);break;case i.InAttributeName:this.stateInAttributeName(e);break;case i.InCommentLike:this.stateInCommentLike(e);break;case i.InSpecialComment:this.stateInSpecialComment(e);break;case i.BeforeAttributeName:this.stateBeforeAttributeName(e);break;case i.InTagName:this.stateInTagName(e);break;case i.InClosingTagName:this.stateInClosingTagName(e);break;case i.BeforeTagName:this.stateBeforeTagName(e);break;case i.AfterAttributeName:this.stateAfterAttributeName(e);break;case i.InAttributeValueSq:this.stateInAttributeValueSingleQuotes(e);break;case i.BeforeAttributeValue:this.stateBeforeAttributeValue(e);break;case i.BeforeClosingTagName:this.stateBeforeClosingTagName(e);break;case i.AfterClosingTagName:this.stateAfterClosingTagName(e);break;case i.BeforeSpecialS:this.stateBeforeSpecialS(e);break;case i.InAttributeValueNq:this.stateInAttributeValueNoQuotes(e);break;case i.InSelfClosingTag:this.stateInSelfClosingTag(e);break;case i.InDeclaration:this.stateInDeclaration(e);break;case i.BeforeDeclaration:this.stateBeforeDeclaration(e);break;case i.BeforeComment:this.stateBeforeComment(e);break;case i.InProcessingInstruction:this.stateInProcessingInstruction(e);break;case i.InNamedEntity:this.stateInNamedEntity(e);break;case i.BeforeEntity:this.stateBeforeEntity(e);break;case i.InHexEntity:this.stateInHexEntity(e);break;case i.InNumericEntity:this.stateInNumericEntity(e);break;default:this.stateBeforeNumericEntity(e)}this.index++}this.cleanup()},e.prototype.finish=function(){this.state===i.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},e.prototype.handleTrailingData=function(){var e=this.buffer.length+this.offset;this.state===i.InCommentLike?this.currentSequence===u.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===i.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===i.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===i.InTagName||this.state===i.BeforeAttributeName||this.state===i.BeforeAttributeValue||this.state===i.AfterAttributeName||this.state===i.InAttributeName||this.state===i.InAttributeValueSq||this.state===i.InAttributeValueDq||this.state===i.InAttributeValueNq||this.state===i.InClosingTagName||this.cbs.ontext(this.sectionStart,e)},e.prototype.emitPartial=function(e,t){this.baseState!==i.Text&&this.baseState!==i.InSpecialTag?this.cbs.onattribdata(e,t):this.cbs.ontext(e,t)},e.prototype.emitCodePoint=function(e){this.baseState!==i.Text&&this.baseState!==i.InSpecialTag?this.cbs.onattribentity(e):this.cbs.ontextentity(e)},e}()}(Og);var Ow=_.w&&_.w.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),Ok=_.w&&_.w.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),OO=_.w&&_.w.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&Ow(t,e,n);return Ok(t,e),t};Object.defineProperty(Om,"__esModule",{value:!0}),Om.Parser=void 0;var OS=OO(Og),OC=new Set(["input","option","optgroup","select","button","datalist","textarea"]),OT=new Set(["p"]),OA=new Set(["thead","tbody"]),OE=new Set(["dd","dt"]),OM=new Set(["rt","rp"]),ON=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",OT],["h1",OT],["h2",OT],["h3",OT],["h4",OT],["h5",OT],["h6",OT],["select",OC],["input",OC],["output",OC],["button",OC],["datalist",OC],["textarea",OC],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",OE],["dt",OE],["address",OT],["article",OT],["aside",OT],["blockquote",OT],["details",OT],["div",OT],["dl",OT],["fieldset",OT],["figcaption",OT],["figure",OT],["footer",OT],["form",OT],["header",OT],["hr",OT],["main",OT],["nav",OT],["ol",OT],["pre",OT],["section",OT],["table",OT],["ul",OT],["rt",OM],["rp",OM],["tbody",OA],["tfoot",OA]]),O_=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),Oj=new Set(["math","svg"]),OD=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),OP=/\s|\//;Om.Parser=function(){function e(e,t){var n,r,i,o,s;void 0===t&&(t={}),this.options=t,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=e??{},this.lowerCaseTagNames=null!==(n=t.lowerCaseTags)&&void 0!==n?n:!t.xmlMode,this.lowerCaseAttributeNames=null!==(r=t.lowerCaseAttributeNames)&&void 0!==r?r:!t.xmlMode,this.tokenizer=new(null!==(i=t.Tokenizer)&&void 0!==i?i:OS.default)(this.options,this),null===(s=(o=this.cbs).onparserinit)||void 0===s||s.call(o,this)}return e.prototype.ontext=function(e,t){var n,r,i=this.getSlice(e,t);this.endIndex=t-1,null===(r=(n=this.cbs).ontext)||void 0===r||r.call(n,i),this.startIndex=t},e.prototype.ontextentity=function(e){var t,n,r=this.tokenizer.getSectionStart();this.endIndex=r-1,null===(n=(t=this.cbs).ontext)||void 0===n||n.call(t,(0,Oy.fromCodePoint)(e)),this.startIndex=r},e.prototype.isVoidElement=function(e){return!this.options.xmlMode&&O_.has(e)},e.prototype.onopentagname=function(e,t){this.endIndex=t;var n=this.getSlice(e,t);this.lowerCaseTagNames&&(n=n.toLowerCase()),this.emitOpenTag(n)},e.prototype.emitOpenTag=function(e){this.openTagStart=this.startIndex,this.tagname=e;var t,n,r,i,o=!this.options.xmlMode&&ON.get(e);if(o)for(;this.stack.length>0&&o.has(this.stack[this.stack.length-1]);){var s=this.stack.pop();null===(n=(t=this.cbs).onclosetag)||void 0===n||n.call(t,s,!0)}this.isVoidElement(e)||(this.stack.push(e),Oj.has(e)?this.foreignContext.push(!0):OD.has(e)&&this.foreignContext.push(!1)),null===(i=(r=this.cbs).onopentagname)||void 0===i||i.call(r,e),this.cbs.onopentag&&(this.attribs={})},e.prototype.endOpenTag=function(e){var t,n;this.startIndex=this.openTagStart,this.attribs&&(null===(n=(t=this.cbs).onopentag)||void 0===n||n.call(t,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},e.prototype.onopentagend=function(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1},e.prototype.onclosetag=function(e,t){this.endIndex=t;var n,r,i,o,s,a,l=this.getSlice(e,t);if(this.lowerCaseTagNames&&(l=l.toLowerCase()),(Oj.has(l)||OD.has(l))&&this.foreignContext.pop(),this.isVoidElement(l))this.options.xmlMode||"br"!==l||(null===(r=(n=this.cbs).onopentagname)||void 0===r||r.call(n,"br"),null===(o=(i=this.cbs).onopentag)||void 0===o||o.call(i,"br",{},!0),null===(a=(s=this.cbs).onclosetag)||void 0===a||a.call(s,"br",!1));else{var c=this.stack.lastIndexOf(l);if(-1!==c){if(this.cbs.onclosetag)for(var u=this.stack.length-c;u--;)this.cbs.onclosetag(this.stack.pop(),0!==u);else this.stack.length=c}else this.options.xmlMode||"p"!==l||(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=t+1},e.prototype.onselfclosingtag=function(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)},e.prototype.closeCurrentTag=function(e){var t,n,r=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===r&&(null===(n=(t=this.cbs).onclosetag)||void 0===n||n.call(t,r,!e),this.stack.pop())},e.prototype.onattribname=function(e,t){this.startIndex=e;var n=this.getSlice(e,t);this.attribname=this.lowerCaseAttributeNames?n.toLowerCase():n},e.prototype.onattribdata=function(e,t){this.attribvalue+=this.getSlice(e,t)},e.prototype.onattribentity=function(e){this.attribvalue+=(0,Oy.fromCodePoint)(e)},e.prototype.onattribend=function(e,t){var n,r;this.endIndex=t,null===(r=(n=this.cbs).onattribute)||void 0===r||r.call(n,this.attribname,this.attribvalue,e===OS.QuoteType.Double?'"':e===OS.QuoteType.Single?"'":e===OS.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},e.prototype.getInstructionName=function(e){var t=e.search(OP),n=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n},e.prototype.ondeclaration=function(e,t){this.endIndex=t;var n=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){var r=this.getInstructionName(n);this.cbs.onprocessinginstruction("!".concat(r),"!".concat(n))}this.startIndex=t+1},e.prototype.onprocessinginstruction=function(e,t){this.endIndex=t;var n=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){var r=this.getInstructionName(n);this.cbs.onprocessinginstruction("?".concat(r),"?".concat(n))}this.startIndex=t+1},e.prototype.oncomment=function(e,t,n){var r,i,o,s;this.endIndex=t,null===(i=(r=this.cbs).oncomment)||void 0===i||i.call(r,this.getSlice(e,t-n)),null===(s=(o=this.cbs).oncommentend)||void 0===s||s.call(o),this.startIndex=t+1},e.prototype.oncdata=function(e,t,n){this.endIndex=t;var r,i,o,s,a,l,c,u,h,d,f=this.getSlice(e,t-n);this.options.xmlMode||this.options.recognizeCDATA?(null===(i=(r=this.cbs).oncdatastart)||void 0===i||i.call(r),null===(s=(o=this.cbs).ontext)||void 0===s||s.call(o,f),null===(l=(a=this.cbs).oncdataend)||void 0===l||l.call(a)):(null===(u=(c=this.cbs).oncomment)||void 0===u||u.call(c,"[CDATA[".concat(f,"]]")),null===(d=(h=this.cbs).oncommentend)||void 0===d||d.call(h)),this.startIndex=t+1},e.prototype.onend=function(){var e,t;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var n=this.stack.length;n>0;this.cbs.onclosetag(this.stack[--n],!0));}null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)},e.prototype.reset=function(){var e,t,n,r;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,null===(r=(n=this.cbs).onparserinit)||void 0===r||r.call(n,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},e.prototype.parseComplete=function(e){this.reset(),this.end(e)},e.prototype.getSlice=function(e,t){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var n=this.buffers[0].slice(e-this.bufferOffset,t-this.bufferOffset);t-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),n+=this.buffers[0].slice(0,t-this.bufferOffset);return n},e.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},e.prototype.write=function(e){var t,n;if(this.ended){null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,Error(".write() after done!"));return}this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++)},e.prototype.end=function(e){var t,n;if(this.ended){null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,Error(".end() after done!"));return}e&&this.write(e),this.ended=!0,this.tokenizer.end()},e.prototype.pause=function(){this.tokenizer.pause()},e.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},e.prototype.parseChunk=function(e){this.write(e)},e.prototype.done=function(e){this.end(e)},e}();var OR={},OI={};!function(e){var t,n;Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0,(n=t=e.ElementType||(e.ElementType={})).Root="root",n.Text="text",n.Directive="directive",n.Comment="comment",n.Script="script",n.Style="style",n.Tag="tag",n.CDATA="cdata",n.Doctype="doctype",e.isTag=function(e){return e.type===t.Tag||e.type===t.Script||e.type===t.Style},e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype}(OI);var Oz={},OL=_.w&&_.w.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Oq=_.w&&_.w.__assign||function(){return(Oq=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(Oz,"__esModule",{value:!0}),Oz.cloneNode=Oz.hasChildren=Oz.isDocument=Oz.isDirective=Oz.isComment=Oz.isText=Oz.isCDATA=Oz.isTag=Oz.Element=Oz.Document=Oz.CDATA=Oz.NodeWithChildren=Oz.ProcessingInstruction=Oz.Comment=Oz.Text=Oz.DataNode=Oz.Node=void 0;var O$=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),O1(this,e)},e}();Oz.Node=O$;var OB=function(e){function t(t){var n=e.call(this)||this;return n.data=t,n}return OL(t,e),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),t}(O$);Oz.DataNode=OB;var OF=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=OI.ElementType.Text,t}return OL(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(OB);Oz.Text=OF;var OQ=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=OI.ElementType.Comment,t}return OL(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(OB);Oz.Comment=OQ;var OV=function(e){function t(t,n){var r=e.call(this,n)||this;return r.name=t,r.type=OI.ElementType.Directive,r}return OL(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(OB);Oz.ProcessingInstruction=OV;var OH=function(e){function t(t){var n=e.call(this)||this;return n.children=t,n}return OL(t,e),Object.defineProperty(t.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),t}(O$);Oz.NodeWithChildren=OH;var OU=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=OI.ElementType.CDATA,t}return OL(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(OH);Oz.CDATA=OU;var OW=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=OI.ElementType.Root,t}return OL(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(OH);Oz.Document=OW;var OG=function(e){function t(t,n,r,i){void 0===r&&(r=[]),void 0===i&&(i="script"===t?OI.ElementType.Script:"style"===t?OI.ElementType.Style:OI.ElementType.Tag);var o=e.call(this,r)||this;return o.name=t,o.attribs=n,o.type=i,o}return OL(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map(function(t){var n,r;return{name:t,value:e.attribs[t],namespace:null===(n=e["x-attribsNamespace"])||void 0===n?void 0:n[t],prefix:null===(r=e["x-attribsPrefix"])||void 0===r?void 0:r[t]}})},enumerable:!1,configurable:!0}),t}(OH);function OX(e){return(0,OI.isTag)(e)}function OY(e){return e.type===OI.ElementType.CDATA}function OZ(e){return e.type===OI.ElementType.Text}function OK(e){return e.type===OI.ElementType.Comment}function OJ(e){return e.type===OI.ElementType.Directive}function O0(e){return e.type===OI.ElementType.Root}function O1(e,t){if(void 0===t&&(t=!1),OZ(e))n=new OF(e.data);else if(OK(e))n=new OQ(e.data);else if(OX(e)){var n,r=t?O2(e.children):[],i=new OG(e.name,Oq({},e.attribs),r);r.forEach(function(e){return e.parent=i}),null!=e.namespace&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=Oq({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=Oq({},e["x-attribsPrefix"])),n=i}else if(OY(e)){var r=t?O2(e.children):[],o=new OU(r);r.forEach(function(e){return e.parent=o}),n=o}else if(O0(e)){var r=t?O2(e.children):[],s=new OW(r);r.forEach(function(e){return e.parent=s}),e["x-mode"]&&(s["x-mode"]=e["x-mode"]),n=s}else if(OJ(e)){var a=new OV(e.name,e.data);null!=e["x-name"]&&(a["x-name"]=e["x-name"],a["x-publicId"]=e["x-publicId"],a["x-systemId"]=e["x-systemId"]),n=a}else throw Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function O2(e){for(var t=e.map(function(e){return O1(e,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}Oz.Element=OG,Oz.isTag=OX,Oz.isCDATA=OY,Oz.isText=OZ,Oz.isComment=OK,Oz.isDirective=OJ,Oz.isDocument=O0,Oz.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")},Oz.cloneNode=O1,function(e){var t=_.w&&_.w.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=_.w&&_.w.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0,n(Oz,e);var r={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},i=function(){function e(e,t,n){this.dom=[],this.root=new Oz.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof t&&(n=t,t=r),"object"==typeof e&&(t=e,e=void 0),this.callback=e??null,this.options=t??r,this.elementCB=n??null}return e.prototype.onparserinit=function(e){this.parser=e},e.prototype.onreset=function(){this.dom=[],this.root=new Oz.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},e.prototype.onopentag=function(e,t){var n=this.options.xmlMode?OI.ElementType.Tag:void 0,r=new Oz.Element(e,t,void 0,n);this.addNode(r),this.tagStack.push(r)},e.prototype.ontext=function(e){var t=this.lastNode;if(t&&t.type===OI.ElementType.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{var n=new Oz.Text(e);this.addNode(n),this.lastNode=n}},e.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===OI.ElementType.Comment){this.lastNode.data+=e;return}var t=new Oz.Comment(e);this.addNode(t),this.lastNode=t},e.prototype.oncommentend=function(){this.lastNode=null},e.prototype.oncdatastart=function(){var e=new Oz.Text(""),t=new Oz.CDATA([e]);this.addNode(t),e.parent=t,this.lastNode=e},e.prototype.oncdataend=function(){this.lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var n=new Oz.ProcessingInstruction(e,t);this.addNode(n)},e.prototype.handleCallback=function(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this.tagStack[this.tagStack.length-1],n=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),n&&(e.prev=n,n.next=e),e.parent=t,this.lastNode=null},e}();e.DomHandler=i,e.default=i}(OR);var O4={},O5={},O3={},O6={},O7={},O8={};function O9(e){for(var t=1;t<e.length;t++)e[t][0]+=e[t-1][0]+1;return e}Object.defineProperty(O8,"__esModule",{value:!0}),O8.default=new Map(O9([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(O9([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(O9([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(O9([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]));var Se={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.escapeText=e.escapeAttribute=e.escapeUTF8=e.escape=e.encodeXML=e.getCodePoint=e.xmlReplacer=void 0,e.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var t=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);function n(n){for(var r,i="",o=0;null!==(r=e.xmlReplacer.exec(n));){var s=r.index,a=n.charCodeAt(s),l=t.get(a);void 0!==l?(i+=n.substring(o,s)+l,o=s+1):(i+="".concat(n.substring(o,s),"&#x").concat((0,e.getCodePoint)(n,s).toString(16),";"),o=e.xmlReplacer.lastIndex+=+((64512&a)==55296))}return i+n.substr(o)}function r(e,t){return function(n){for(var r,i=0,o="";r=e.exec(n);)i!==r.index&&(o+=n.substring(i,r.index)),o+=t.get(r[0].charCodeAt(0)),i=r.index+1;return o+n.substring(i)}}e.getCodePoint=null!=String.prototype.codePointAt?function(e,t){return e.codePointAt(t)}:function(e,t){return(64512&e.charCodeAt(t))==55296?(e.charCodeAt(t)-55296)*1024+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t)},e.encodeXML=n,e.escape=n,e.escapeUTF8=r(/[&<>'"]/g,t),e.escapeAttribute=r(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),e.escapeText=r(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))}(Se);var St=_.w&&_.w.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(O7,"__esModule",{value:!0}),O7.encodeNonAsciiHTML=O7.encodeHTML=void 0;var Sn=St(O8),Sr=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function Si(e,t){for(var n,r="",i=0;null!==(n=e.exec(t));){var o=n.index;r+=t.substring(i,o);var s=t.charCodeAt(o),a=Sn.default.get(s);if("object"==typeof a){if(o+1<t.length){var l=t.charCodeAt(o+1),c="number"==typeof a.n?a.n===l?a.o:void 0:a.n.get(l);if(void 0!==c){r+=c,i=e.lastIndex+=1;continue}}a=a.v}if(void 0!==a)r+=a,i=o+1;else{var u=(0,Se.getCodePoint)(t,o);r+="&#x".concat(u.toString(16),";"),i=e.lastIndex+=+(u!==s)}}return r+t.substr(i)}O7.encodeHTML=function(e){return Si(Sr,e)},O7.encodeNonAsciiHTML=function(e){return Si(Se.xmlReplacer,e)},function(e){var t,n,r,i;function o(e,t){if(void 0===t&&(t=n.XML),("number"==typeof t?t:t.level)===n.HTML){var r="object"==typeof t?t.mode:void 0;return(0,Oy.decodeHTML)(e,r)}return(0,Oy.decodeXML)(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXMLStrict=e.decodeHTML5Strict=e.decodeHTML4Strict=e.decodeHTML5=e.decodeHTML4=e.decodeHTMLAttribute=e.decodeHTMLStrict=e.decodeHTML=e.decodeXML=e.DecodingMode=e.EntityDecoder=e.encodeHTML5=e.encodeHTML4=e.encodeNonAsciiHTML=e.encodeHTML=e.escapeText=e.escapeAttribute=e.escapeUTF8=e.escape=e.encodeXML=e.encode=e.decodeStrict=e.decode=e.EncodingMode=e.EntityLevel=void 0,(r=n=e.EntityLevel||(e.EntityLevel={}))[r.XML=0]="XML",r[r.HTML=1]="HTML",(i=t=e.EncodingMode||(e.EncodingMode={}))[i.UTF8=0]="UTF8",i[i.ASCII=1]="ASCII",i[i.Extensive=2]="Extensive",i[i.Attribute=3]="Attribute",i[i.Text=4]="Text",e.decode=o,e.decodeStrict=function(e,t){void 0===t&&(t=n.XML);var r,i="number"==typeof t?{level:t}:t;return null!==(r=i.mode)&&void 0!==r||(i.mode=Oy.DecodingMode.Strict),o(e,i)},e.encode=function(e,r){void 0===r&&(r=n.XML);var i="number"==typeof r?{level:r}:r;return i.mode===t.UTF8?(0,Se.escapeUTF8)(e):i.mode===t.Attribute?(0,Se.escapeAttribute)(e):i.mode===t.Text?(0,Se.escapeText)(e):i.level===n.HTML?i.mode===t.ASCII?(0,O7.encodeNonAsciiHTML)(e):(0,O7.encodeHTML)(e):(0,Se.encodeXML)(e)},Object.defineProperty(e,"encodeXML",{enumerable:!0,get:function(){return Se.encodeXML}}),Object.defineProperty(e,"escape",{enumerable:!0,get:function(){return Se.escape}}),Object.defineProperty(e,"escapeUTF8",{enumerable:!0,get:function(){return Se.escapeUTF8}}),Object.defineProperty(e,"escapeAttribute",{enumerable:!0,get:function(){return Se.escapeAttribute}}),Object.defineProperty(e,"escapeText",{enumerable:!0,get:function(){return Se.escapeText}}),Object.defineProperty(e,"encodeHTML",{enumerable:!0,get:function(){return O7.encodeHTML}}),Object.defineProperty(e,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return O7.encodeNonAsciiHTML}}),Object.defineProperty(e,"encodeHTML4",{enumerable:!0,get:function(){return O7.encodeHTML}}),Object.defineProperty(e,"encodeHTML5",{enumerable:!0,get:function(){return O7.encodeHTML}}),Object.defineProperty(e,"EntityDecoder",{enumerable:!0,get:function(){return Oy.EntityDecoder}}),Object.defineProperty(e,"DecodingMode",{enumerable:!0,get:function(){return Oy.DecodingMode}}),Object.defineProperty(e,"decodeXML",{enumerable:!0,get:function(){return Oy.decodeXML}}),Object.defineProperty(e,"decodeHTML",{enumerable:!0,get:function(){return Oy.decodeHTML}}),Object.defineProperty(e,"decodeHTMLStrict",{enumerable:!0,get:function(){return Oy.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTMLAttribute",{enumerable:!0,get:function(){return Oy.decodeHTMLAttribute}}),Object.defineProperty(e,"decodeHTML4",{enumerable:!0,get:function(){return Oy.decodeHTML}}),Object.defineProperty(e,"decodeHTML5",{enumerable:!0,get:function(){return Oy.decodeHTML}}),Object.defineProperty(e,"decodeHTML4Strict",{enumerable:!0,get:function(){return Oy.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTML5Strict",{enumerable:!0,get:function(){return Oy.decodeHTMLStrict}}),Object.defineProperty(e,"decodeXMLStrict",{enumerable:!0,get:function(){return Oy.decodeXML}})}(O6);var So={};Object.defineProperty(So,"__esModule",{value:!0}),So.attributeNames=So.elementNames=void 0,So.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(e){return[e.toLowerCase(),e]})),So.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(e){return[e.toLowerCase(),e]}));var Ss=_.w&&_.w.__assign||function(){return(Ss=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Sa=_.w&&_.w.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),Sl=_.w&&_.w.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Sc=_.w&&_.w.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&Sa(t,e,n);return Sl(t,e),t};Object.defineProperty(O3,"__esModule",{value:!0}),O3.render=void 0;var Su=Sc(OI),Sh=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function Sd(e){return e.replace(/"/g,"&quot;")}var Sf=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function Sp(e,t){void 0===t&&(t={});for(var n=("length"in e)?e:[e],r="",i=0;i<n.length;i++)r+=function(e,t){var n,r,i;switch(e.type){case Su.Root:return Sp(e.children,t);case Su.Doctype:case Su.Directive:return n=e,"<".concat(n.data,">");case Su.Comment:return r=e,"\x3c!--".concat(r.data,"--\x3e");case Su.CDATA:return i=e,"<![CDATA[".concat(i.children[0].data,"]]>");case Su.Script:case Su.Style:case Su.Tag:return function(e,t){"foreign"===t.xmlMode&&(e.name=null!==(n=So.elementNames.get(e.name))&&void 0!==n?n:e.name,e.parent&&Sm.has(e.parent.name)&&(t=Ss(Ss({},t),{xmlMode:!1}))),!t.xmlMode&&Sg.has(e.name)&&(t=Ss(Ss({},t),{xmlMode:"foreign"}));var n,r="<".concat(e.name),i=function(e,t){var n;if(e){var r=(null!==(n=t.encodeEntities)&&void 0!==n?n:t.decodeEntities)===!1?Sd:t.xmlMode||"utf8"!==t.encodeEntities?O6.encodeXML:O6.escapeAttribute;return Object.keys(e).map(function(n){var i,o,s=null!==(i=e[n])&&void 0!==i?i:"";return"foreign"===t.xmlMode&&(n=null!==(o=So.attributeNames.get(n))&&void 0!==o?o:n),t.emptyAttrs||t.xmlMode||""!==s?"".concat(n,'="').concat(r(s),'"'):n}).join(" ")}}(e.attribs,t);return i&&(r+=" ".concat(i)),0===e.children.length&&(t.xmlMode?!1!==t.selfClosingTags:t.selfClosingTags&&Sf.has(e.name))?(t.xmlMode||(r+=" "),r+="/>"):(r+=">",e.children.length>0&&(r+=Sp(e.children,t)),(t.xmlMode||!Sf.has(e.name))&&(r+="</".concat(e.name,">"))),r}(e,t);case Su.Text:return function(e,t){var n,r=e.data||"";return(null!==(n=t.encodeEntities)&&void 0!==n?n:t.decodeEntities)===!1||!t.xmlMode&&e.parent&&Sh.has(e.parent.name)||(r=t.xmlMode||"utf8"!==t.encodeEntities?(0,O6.encodeXML)(r):(0,O6.escapeText)(r)),r}(e,t)}}(n[i],t);return r}O3.render=Sp,O3.default=Sp;var Sm=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),Sg=new Set(["svg","math"]),Sy=_.w&&_.w.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(O5,"__esModule",{value:!0}),O5.getOuterHTML=Sv,O5.getInnerHTML=function(e,t){return(0,OR.hasChildren)(e)?e.children.map(function(e){return Sv(e,t)}).join(""):""},O5.getText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,OR.isTag)(t)?"br"===t.name?`
`:e(t.children):(0,OR.isCDATA)(t)?e(t.children):(0,OR.isText)(t)?t.data:""},O5.textContent=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,OR.hasChildren)(t)&&!(0,OR.isComment)(t)?e(t.children):(0,OR.isText)(t)?t.data:""},O5.innerText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,OR.hasChildren)(t)&&(t.type===OI.ElementType.Tag||(0,OR.isCDATA)(t))?e(t.children):(0,OR.isText)(t)?t.data:""};var Sb=Sy(O3);function Sv(e,t){return(0,Sb.default)(e,t)}var Sx={};function Sw(e){return(0,OR.hasChildren)(e)?e.children:[]}function Sk(e){return e.parent||null}Object.defineProperty(Sx,"__esModule",{value:!0}),Sx.getChildren=Sw,Sx.getParent=Sk,Sx.getSiblings=function(e){var t=Sk(e);if(null!=t)return Sw(t);for(var n=[e],r=e.prev,i=e.next;null!=r;)n.unshift(r),r=r.prev;for(;null!=i;)n.push(i),i=i.next;return n},Sx.getAttributeValue=function(e,t){var n;return null===(n=e.attribs)||void 0===n?void 0:n[t]},Sx.hasAttrib=function(e,t){return null!=e.attribs&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&null!=e.attribs[t]},Sx.getName=function(e){return e.name},Sx.nextElementSibling=function(e){for(var t=e.next;null!==t&&!(0,OR.isTag)(t);)t=t.next;return t},Sx.prevElementSibling=function(e){for(var t=e.prev;null!==t&&!(0,OR.isTag)(t);)t=t.prev;return t};var SO={};function SS(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children,n=t.lastIndexOf(e);n>=0&&t.splice(n,1)}e.next=null,e.prev=null,e.parent=null}Object.defineProperty(SO,"__esModule",{value:!0}),SO.removeElement=SS,SO.replaceElement=function(e,t){var n=t.prev=e.prev;n&&(n.next=t);var r=t.next=e.next;r&&(r.prev=t);var i=t.parent=e.parent;if(i){var o=i.children;o[o.lastIndexOf(e)]=t,e.parent=null}},SO.appendChild=function(e,t){if(SS(t),t.next=null,t.parent=e,e.children.push(t)>1){var n=e.children[e.children.length-2];n.next=t,t.prev=n}else t.prev=null},SO.append=function(e,t){SS(t);var n=e.parent,r=e.next;if(t.next=r,t.prev=e,e.next=t,t.parent=n,r){if(r.prev=t,n){var i=n.children;i.splice(i.lastIndexOf(r),0,t)}}else n&&n.children.push(t)},SO.prependChild=function(e,t){if(SS(t),t.parent=e,t.prev=null,1!==e.children.unshift(t)){var n=e.children[1];n.prev=t,t.next=n}else t.next=null},SO.prepend=function(e,t){SS(t);var n=e.parent;if(n){var r=n.children;r.splice(r.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=n,t.prev=e.prev,t.next=e,e.prev=t};var SC={};function ST(e,t,n,r){for(var i=[],o=[Array.isArray(t)?t:[t]],s=[0];;){if(s[0]>=o[0].length){if(1===s.length)return i;o.shift(),s.shift();continue}var a=o[0][s[0]++];if(e(a)&&(i.push(a),--r<=0))return i;n&&(0,OR.hasChildren)(a)&&a.children.length>0&&(s.unshift(0),o.unshift(a.children))}}Object.defineProperty(SC,"__esModule",{value:!0}),SC.filter=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=1/0),ST(e,Array.isArray(t)?t:[t],n,r)},SC.find=ST,SC.findOneChild=function(e,t){return t.find(e)},SC.findOne=function e(t,n,r){void 0===r&&(r=!0);for(var i=Array.isArray(n)?n:[n],o=0;o<i.length;o++){var s=i[o];if((0,OR.isTag)(s)&&t(s))return s;if(r&&(0,OR.hasChildren)(s)&&s.children.length>0){var a=e(t,s.children,!0);if(a)return a}}return null},SC.existsOne=function e(t,n){return(Array.isArray(n)?n:[n]).some(function(n){return(0,OR.isTag)(n)&&t(n)||(0,OR.hasChildren)(n)&&e(t,n.children)})},SC.findAll=function(e,t){for(var n=[],r=[Array.isArray(t)?t:[t]],i=[0];;){if(i[0]>=r[0].length){if(1===r.length)return n;r.shift(),i.shift();continue}var o=r[0][i[0]++];(0,OR.isTag)(o)&&e(o)&&n.push(o),(0,OR.hasChildren)(o)&&o.children.length>0&&(i.unshift(0),r.unshift(o.children))}};var SA={};Object.defineProperty(SA,"__esModule",{value:!0}),SA.testElement=function(e,t){var n=S_(e);return!n||n(t)},SA.getElements=function(e,t,n,r){void 0===r&&(r=1/0);var i=S_(e);return i?(0,SC.filter)(i,t,n,r):[]},SA.getElementById=function(e,t,n){return void 0===n&&(n=!0),Array.isArray(t)||(t=[t]),(0,SC.findOne)(SM("id",e),t,n)},SA.getElementsByTagName=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=1/0),(0,SC.filter)(SE.tag_name(e),t,n,r)},SA.getElementsByClassName=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=1/0),(0,SC.filter)(SM("class",e),t,n,r)},SA.getElementsByTagType=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=1/0),(0,SC.filter)(SE.tag_type(e),t,n,r)};var SE={tag_name:function(e){return"function"==typeof e?function(t){return(0,OR.isTag)(t)&&e(t.name)}:"*"===e?OR.isTag:function(t){return(0,OR.isTag)(t)&&t.name===e}},tag_type:function(e){return"function"==typeof e?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return"function"==typeof e?function(t){return(0,OR.isText)(t)&&e(t.data)}:function(t){return(0,OR.isText)(t)&&t.data===e}}};function SM(e,t){return"function"==typeof t?function(n){return(0,OR.isTag)(n)&&t(n.attribs[e])}:function(n){return(0,OR.isTag)(n)&&n.attribs[e]===t}}function SN(e,t){return function(n){return e(n)||t(n)}}function S_(e){var t=Object.keys(e).map(function(t){var n=e[t];return Object.prototype.hasOwnProperty.call(SE,t)?SE[t](n):SM(t,n)});return 0===t.length?null:t.reduce(SN)}var Sj={};function SD(e,t){var n=[],r=[];if(e===t)return 0;for(var i=(0,OR.hasChildren)(e)?e:e.parent;i;)n.unshift(i),i=i.parent;for(i=(0,OR.hasChildren)(t)?t:t.parent;i;)r.unshift(i),i=i.parent;for(var o=Math.min(n.length,r.length),s=0;s<o&&n[s]===r[s];)s++;if(0===s)return g.DISCONNECTED;var a=n[s-1],l=a.children,c=n[s],u=r[s];return l.indexOf(c)>l.indexOf(u)?a===t?g.FOLLOWING|g.CONTAINED_BY:g.FOLLOWING:a===e?g.PRECEDING|g.CONTAINS:g.PRECEDING}Object.defineProperty(Sj,"__esModule",{value:!0}),Sj.DocumentPosition=void 0,Sj.removeSubsets=function(e){for(var t=e.length;--t>=0;){var n=e[t];if(t>0&&e.lastIndexOf(n,t-1)>=0){e.splice(t,1);continue}for(var r=n.parent;r;r=r.parent)if(e.includes(r)){e.splice(t,1);break}}return e},Sj.compareDocumentPosition=SD,Sj.uniqueSort=function(e){return(e=e.filter(function(e,t,n){return!n.includes(e,t+1)})).sort(function(e,t){var n=SD(e,t);return n&g.PRECEDING?-1:n&g.FOLLOWING?1:0}),e},!function(e){e[e.DISCONNECTED=1]="DISCONNECTED",e[e.PRECEDING=2]="PRECEDING",e[e.FOLLOWING=4]="FOLLOWING",e[e.CONTAINS=8]="CONTAINS",e[e.CONTAINED_BY=16]="CONTAINED_BY"}(g||(Sj.DocumentPosition=g={}));var SP={};Object.defineProperty(SP,"__esModule",{value:!0}),SP.getFeed=function(e){var t,n,r,i,o,s,a,l,c,u,h,d=SL(SB,e);return d?"feed"===d.name?(n=d.children,r={type:"atom",items:(0,SA.getElementsByTagName)("entry",n).map(function(e){var t,n=e.children,r={media:Sz(n)};S$(r,"id","id",n),S$(r,"title","title",n);var i=null===(t=SL("link",n))||void 0===t?void 0:t.attribs.href;i&&(r.link=i);var o=Sq("summary",n)||Sq("content",n);o&&(r.description=o);var s=Sq("updated",n);return s&&(r.pubDate=new Date(s)),r})},S$(r,"id","id",n),S$(r,"title","title",n),(i=null===(t=SL("link",n))||void 0===t?void 0:t.attribs.href)&&(r.link=i),S$(r,"description","subtitle",n),(o=Sq("updated",n))&&(r.updated=new Date(o)),S$(r,"author","email",n,!0),r):(c=null!==(l=null===(a=SL("channel",(s=d).children))||void 0===a?void 0:a.children)&&void 0!==l?l:[],u={type:s.name.substr(0,3),id:"",items:(0,SA.getElementsByTagName)("item",s.children).map(function(e){var t=e.children,n={media:Sz(t)};S$(n,"id","guid",t),S$(n,"title","title",t),S$(n,"link","link",t),S$(n,"description","description",t);var r=Sq("pubDate",t)||Sq("dc:date",t);return r&&(n.pubDate=new Date(r)),n})},S$(u,"title","title",c),S$(u,"link","link",c),S$(u,"description","description",c),(h=Sq("lastBuildDate",c))&&(u.updated=new Date(h)),S$(u,"author","managingEditor",c,!0),u):null};var SR=["url","type","lang"],SI=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function Sz(e){return(0,SA.getElementsByTagName)("media:content",e).map(function(e){for(var t=e.attribs,n={medium:t.medium,isDefault:!!t.isDefault},r=0;r<SR.length;r++){var i=SR[r];t[i]&&(n[i]=t[i])}for(var o=0;o<SI.length;o++){var i=SI[o];t[i]&&(n[i]=parseInt(t[i],10))}return t.expression&&(n.expression=t.expression),n})}function SL(e,t){return(0,SA.getElementsByTagName)(e,t,!0,1)[0]}function Sq(e,t,n){return void 0===n&&(n=!1),(0,O5.textContent)((0,SA.getElementsByTagName)(e,t,n,1)).trim()}function S$(e,t,n,r,i){void 0===i&&(i=!1);var o=Sq(n,r,i);o&&(e[t]=o)}function SB(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}!function(e){var t=_.w&&_.w.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=_.w&&_.w.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.hasChildren=e.isDocument=e.isComment=e.isText=e.isCDATA=e.isTag=void 0,n(O5,e),n(Sx,e),n(SO,e),n(SC,e),n(SA,e),n(Sj,e),n(SP,e),Object.defineProperty(e,"isTag",{enumerable:!0,get:function(){return OR.isTag}}),Object.defineProperty(e,"isCDATA",{enumerable:!0,get:function(){return OR.isCDATA}}),Object.defineProperty(e,"isText",{enumerable:!0,get:function(){return OR.isText}}),Object.defineProperty(e,"isComment",{enumerable:!0,get:function(){return OR.isComment}}),Object.defineProperty(e,"isDocument",{enumerable:!0,get:function(){return OR.isDocument}}),Object.defineProperty(e,"hasChildren",{enumerable:!0,get:function(){return OR.hasChildren}})}(O4),function(e){var t=_.w&&_.w.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=_.w&&_.w.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=_.w&&_.w.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(r,e,i);return n(r,e),r},i=_.w&&_.w.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};function o(e,t){var n=new OR.DomHandler(void 0,t);return new Om.Parser(n,t).end(e),n.root}function s(e,t){return o(e,t).children}Object.defineProperty(e,"__esModule",{value:!0}),e.DomUtils=e.parseFeed=e.getFeed=e.ElementType=e.Tokenizer=e.createDomStream=e.parseDOM=e.parseDocument=e.DefaultHandler=e.DomHandler=e.Parser=void 0,Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return Om.Parser}}),Object.defineProperty(e,"DomHandler",{enumerable:!0,get:function(){return OR.DomHandler}}),Object.defineProperty(e,"DefaultHandler",{enumerable:!0,get:function(){return OR.DomHandler}}),e.parseDocument=o,e.parseDOM=s,e.createDomStream=function(e,t,n){var r=new OR.DomHandler(e,t,n);return new Om.Parser(r,t)},Object.defineProperty(e,"Tokenizer",{enumerable:!0,get:function(){return i(Og).default}}),e.ElementType=r(OI),Object.defineProperty(e,"getFeed",{enumerable:!0,get:function(){return O4.getFeed}});var a={xmlMode:!0};e.parseFeed=function(e,t){return void 0===t&&(t=a),(0,O4.getFeed)(s(e,t))},e.DomUtils=r(O4)}(Op);var SF={};function SQ(e){return"[object Object]"===Object.prototype.toString.call(e)}Object.defineProperty(SF,"__esModule",{value:!0}),SF.isPlainObject=function(e){var t,n;return!1!==SQ(e)&&(void 0===(t=e.constructor)||!1!==SQ(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf"))};var SV=function(e){var t,n,r;return!!(t=e)&&"object"==typeof t&&(n=e,"[object RegExp]"!==(r=Object.prototype.toString.call(n))&&"[object Date]"!==r&&n.$$typeof!==SH)},SH="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function SU(e,t){return!1!==t.clone&&t.isMergeableObject(e)?SY(Array.isArray(e)?[]:{},e,t):e}function SW(e,t,n){return e.concat(t).map(function(e){return SU(e,n)})}function SG(e){return Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[])}function SX(e,t){try{return t in e}catch{return!1}}function SY(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||SW,n.isMergeableObject=n.isMergeableObject||SV,n.cloneUnlessOtherwiseSpecified=SU;var r,i,o=Array.isArray(t);return o===Array.isArray(e)?o?n.arrayMerge(e,t,n):(i={},(r=n).isMergeableObject(e)&&SG(e).forEach(function(t){i[t]=SU(e[t],r)}),SG(t).forEach(function(n){SX(e,n)&&!(Object.hasOwnProperty.call(e,n)&&Object.propertyIsEnumerable.call(e,n))||(SX(e,n)&&r.isMergeableObject(t[n])?i[n]=(function(e,t){if(!t.customMerge)return SY;var n=t.customMerge(e);return"function"==typeof n?n:SY})(n,r)(e[n],t[n],r):i[n]=SU(t[n],r))}),i):SU(t,n)}SY.all=function(e,t){if(!Array.isArray(e))throw Error("first argument should be an array");return e.reduce(function(e,n){return SY(e,n,t)},{})};var SZ={exports:{}};!function(e){var t,n;t=_.w,n=function(){return function(e){function t(e){return" "===e||"	"===e||e===`
`||"\f"===e||"\r"===e}function n(t){var n,r=t.exec(e.substring(m));if(r)return n=r[0],m+=n.length,n}for(var r,i,o,s,a,l=e.length,c=/^[ \t\n\r\u000c]+/,u=/^[, \t\n\r\u000c]+/,h=/^[^ \t\n\r\u000c]+/,d=/[,]+$/,f=/^\d+$/,p=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,m=0,g=[];;){if(n(u),m>=l)return g;r=n(h),i=[],","===r.slice(-1)?(r=r.replace(d,""),y()):function(){for(n(c),o="",s="in descriptor";;){if(a=e.charAt(m),"in descriptor"===s){if(t(a))o&&(i.push(o),o="",s="after descriptor");else if(","===a){m+=1,o&&i.push(o),y();return}else if("("===a)o+=a,s="in parens";else if(""===a){o&&i.push(o),y();return}else o+=a}else if("in parens"===s){if(")"===a)o+=a,s="in descriptor";else if(""===a){i.push(o),y();return}else o+=a}else if("after descriptor"===s&&!t(a)){if(""===a){y();return}s="in descriptor",m-=1}m+=1}}()}function y(){var t,n,o,s,a,l,c,u,h,d=!1,m={};for(s=0;s<i.length;s++)l=(a=i[s])[a.length-1],u=parseInt(c=a.substring(0,a.length-1),10),h=parseFloat(c),f.test(c)&&"w"===l?((t||n)&&(d=!0),0===u?d=!0:t=u):p.test(c)&&"x"===l?((t||n||o)&&(d=!0),h<0?d=!0:n=h):f.test(c)&&"h"===l?((o||n)&&(d=!0),0===u?d=!0:o=u):d=!0;d?console&&console.log&&console.log("Invalid srcset descriptor found in '"+e+"' at '"+a+"'."):(m.url=r,t&&(m.w=t),n&&(m.d=n),o&&(m.h=o),g.push(m))}}},e.exports?e.exports=n():t.parseSrcset=n()}(SZ);var SK=SZ.exports,SJ={exports:{}},S0=String,S1=function(){return{isColorSupported:!1,reset:S0,bold:S0,dim:S0,italic:S0,underline:S0,inverse:S0,hidden:S0,strikethrough:S0,black:S0,red:S0,green:S0,yellow:S0,blue:S0,magenta:S0,cyan:S0,white:S0,gray:S0,bgBlack:S0,bgRed:S0,bgGreen:S0,bgYellow:S0,bgBlue:S0,bgMagenta:S0,bgCyan:S0,bgWhite:S0,blackBright:S0,redBright:S0,greenBright:S0,yellowBright:S0,blueBright:S0,magentaBright:S0,cyanBright:S0,whiteBright:S0,bgBlackBright:S0,bgRedBright:S0,bgGreenBright:S0,bgYellowBright:S0,bgBlueBright:S0,bgMagentaBright:S0,bgCyanBright:S0,bgWhiteBright:S0}};SJ.exports=S1(),SJ.exports.createColors=S1;var S2=SJ.exports;let S4=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})),S5=(0,_.x)(S4),S3=class e extends Error{constructor(t,n,r,i,o,s){super(t),this.name="CssSyntaxError",this.reason=t,o&&(this.file=o),i&&(this.source=i),s&&(this.plugin=s),"u">typeof n&&"u">typeof r&&("number"==typeof n?(this.line=n,this.column=r):(this.line=n.line,this.column=n.column,this.endLine=r.line,this.endColumn=r.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,e)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>","u">typeof this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;null==e&&(e=S2.isColorSupported);let n=e=>e,r=e=>e,i=e=>e;if(e){let{bold:e,gray:t,red:o}=S2.createColors(!0);r=t=>e(o(t)),n=e=>t(e),S5&&(i=e=>S5(e))}let o=t.split(/\r?\n/),s=Math.max(this.line-3,0),a=Math.min(this.line+2,o.length),l=String(a).length;return o.slice(s,a).map((e,t)=>{let o=s+1+t,a=" "+(" "+o).slice(-l)+" | ";if(o===this.line){if(e.length>160){let t=Math.max(0,this.column-20),o=Math.max(this.column+20,this.endColumn+20),s=e.slice(t,o),l=n(a.replace(/\d/g," "))+e.slice(0,Math.min(this.column-1,19)).replace(/[^\t]/g," ");return r(">")+n(a)+i(s)+`
 `+l+r("^")}let t=n(a.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return r(">")+n(a)+i(e)+`
 `+t+r("^")}return" "+n(a)+i(e)}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}};S3.default=S3;let S6={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1},S7=class{constructor(e){this.builder=e}atrule(e,t){let n="@"+e.name,r=e.params?this.rawValue(e,"params"):"";if("u">typeof e.raws.afterName?n+=e.raws.afterName:r&&(n+=" "),e.nodes)this.block(e,n+r);else{let i=(e.raws.between||"")+(t?";":"");this.builder(n+r+i,e)}}beforeAfter(e,t){let n;n="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let r=e.parent,i=0;for(;r&&"root"!==r.type;)i+=1,r=r.parent;if(n.includes(`
`)){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<i;e++)n+=t}return n}block(e,t){let n,r=this.raw(e,"between","beforeOpen");this.builder(t+r+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),n=this.raw(e,"after")):n=this.raw(e,"after","emptyBody"),n&&this.builder(n),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&"comment"===e.nodes[t].type;)t-=1;let n=this.raw(e,"semicolon");for(let r=0;r<e.nodes.length;r++){let i=e.nodes[r],o=this.raw(i,"before");o&&this.builder(o),this.stringify(i,t!==r||n)}}comment(e){let t=this.raw(e,"left","commentLeft"),n=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+n+"*/",e)}decl(e,t){let n=this.raw(e,"between","colon"),r=e.prop+n+this.rawValue(e,"value");e.important&&(r+=e.raws.important||" !important"),t&&(r+=";"),this.builder(r,e)}document(e){this.body(e)}raw(e,t,n){let r;if(n||(n=t),t&&"u">typeof(r=e.raws[t]))return r;let i=e.parent;if("before"===n&&(!i||"root"===i.type&&i.first===e||i&&"document"===i.type))return"";if(!i)return S6[n];let o=e.root();if(o.rawCache||(o.rawCache={}),"u">typeof o.rawCache[n])return o.rawCache[n];if("before"===n||"after"===n)return this.beforeAfter(e,n);{var s;let i="raw"+((s=n)[0].toUpperCase()+s.slice(1));this[i]?r=this[i](o,e):o.walk(e=>{if("u">typeof(r=e.raws[t]))return!1})}return typeof r>"u"&&(r=S6[n]),o.rawCache[n]=r,r}rawBeforeClose(e){let t;return e.walk(e=>{if(e.nodes&&e.nodes.length>0&&"u">typeof e.raws.after)return(t=e.raws.after).includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let n;return e.walkComments(e=>{if("u">typeof e.raws.before)return(n=e.raws.before).includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),typeof n>"u"?n=this.raw(t,null,"beforeDecl"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeDecl(e,t){let n;return e.walkDecls(e=>{if("u">typeof e.raws.before)return(n=e.raws.before).includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),typeof n>"u"?n=this.raw(t,null,"beforeRule"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeOpen(e){let t;return e.walk(e=>{if("decl"!==e.type&&"u">typeof(t=e.raws.between))return!1}),t}rawBeforeRule(e){let t;return e.walk(n=>{if(n.nodes&&(n.parent!==e||e.first!==n)&&"u">typeof n.raws.before)return(t=n.raws.before).includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(e=>{if("u">typeof e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(e=>{if(e.nodes&&0===e.nodes.length&&"u">typeof(t=e.raws.after))return!1}),t}rawIndent(e){let t;return e.raws.indent?e.raws.indent:(e.walk(n=>{let r=n.parent;if(r&&r!==e&&r.parent&&r.parent===e&&"u">typeof n.raws.before){let e=n.raws.before.split(`
`);return t=(t=e[e.length-1]).replace(/\S/g,""),!1}}),t)}rawSemicolon(e){let t;return e.walk(e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&"u">typeof(t=e.raws.semicolon))return!1}),t}rawValue(e,t){let n=e[t],r=e.raws[t];return r&&r.value===n?r.raw:n}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};function S8(e,t){new S7(t).stringify(e)}S7.default=S7,S8.default=S8;var S9={};S9.isClean=Symbol("isClean"),S9.my=Symbol("my");let{isClean:Ce,my:Ct}=S9;function Cn(e,t){if(t&&"u">typeof t.offset)return t.offset;let n=1,r=1,i=0;for(let o=0;o<e.length;o++){if(r===t.line&&n===t.column){i=o;break}e[o]===`
`?(n=1,r+=1):n+=1}return i}let Cr=class{get proxyOf(){return this}constructor(e={}){for(let t in this.raws={},this[Ce]=!1,this[Ct]=!0,e)if("nodes"===t)for(let n of(this.nodes=[],e[t]))"function"==typeof n.clone?this.append(n.clone()):this.append(n);else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=function e(t,n){let r=new t.constructor;for(let i in t){if(!Object.prototype.hasOwnProperty.call(t,i)||"proxyCache"===i)continue;let o=t[i],s=typeof o;"parent"===i&&"object"===s?n&&(r[i]=n):"source"===i?r[i]=o:Array.isArray(o)?r[i]=o.map(t=>e(t,r)):("object"===s&&null!==o&&(o=e(o)),r[i]=o)}return r}(this);for(let n in e)t[n]=e[n];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:n,start:r}=this.rangeBy(t);return this.source.input.error(e,{column:r.column,line:r.line},{column:n.column,line:n.line},t)}return new S3(e)}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t],set:(e,t,n)=>(e[t]===n||(e[t]=n,("prop"===t||"value"===t||"name"===t||"params"===t||"important"===t||"text"===t)&&e.markDirty()),!0)}}markClean(){this[Ce]=!0}markDirty(){if(this[Ce]){this[Ce]=!1;let e=this;for(;e=e.parent;)e[Ce]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e){let t=this.source.start;if(e.index)t=this.positionInside(e.index);else if(e.word){let n="document"in this.source.input?this.source.input.document:this.source.input.css,r=n.slice(Cn(n,this.source.start),Cn(n,this.source.end)).indexOf(e.word);-1!==r&&(t=this.positionInside(r))}return t}positionInside(e){let t=this.source.start.column,n=this.source.start.line,r="document"in this.source.input?this.source.input.document:this.source.input.css,i=Cn(r,this.source.start),o=i+e;for(let e=i;e<o;e++)r[e]===`
`?(t=1,n+=1):t+=1;return{column:t,line:n}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},n=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let r="document"in this.source.input?this.source.input.document:this.source.input.css,i=r.slice(Cn(r,this.source.start),Cn(r,this.source.end)).indexOf(e.word);-1!==i&&(t=this.positionInside(i),n=this.positionInside(i+e.word.length))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?n={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?n=this.positionInside(e.endIndex):e.index&&(n=this.positionInside(e.index+1));return(n.line<t.line||n.line===t.line&&n.column<=t.column)&&(n={column:t.column+1,line:t.line}),{end:n,start:t}}raw(e,t){return new S7().raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,n=!1;for(let r of e)r===this?n=!0:n?(this.parent.insertAfter(t,r),t=r):this.parent.insertBefore(t,r);n||this.remove()}return this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}toJSON(e,t){let n={},r=null==t;t=t||new Map;let i=0;for(let e in this){if(!Object.prototype.hasOwnProperty.call(this,e)||"parent"===e||"proxyCache"===e)continue;let r=this[e];if(Array.isArray(r))n[e]=r.map(e=>"object"==typeof e&&e.toJSON?e.toJSON(null,t):e);else if("object"==typeof r&&r.toJSON)n[e]=r.toJSON(null,t);else if("source"===e){let o=t.get(r.input);null==o&&(o=i,t.set(r.input,i),i++),n[e]={end:r.end,inputId:o,start:r.start}}else n[e]=r}return r&&(n.inputs=[...t.keys()].map(e=>e.toJSON())),n}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=S8){e.stringify&&(e=e.stringify);let t="";return e(this,e=>{t+=e}),t}warn(e,t,n){let r={node:this};for(let e in n)r[e]=n[e];return e.warn(t,r)}};Cr.default=Cr;let Ci=Cr,Co=class extends Ci{constructor(e){super(e),this.type="comment"}};Co.default=Co;let Cs=Cr,Ca=class extends Cs{get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}constructor(e){e&&"u">typeof e.value&&"string"!=typeof e.value&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}};Ca.default=Ca;let Cl=Cr,{isClean:Cc,my:Cu}=S9,Ch,Cd,Cf,Cp,Cm=class e extends Cl{get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}append(...e){for(let t of e)for(let e of this.normalize(t,this.last))this.proxyOf.nodes.push(e);return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),n,r;for(;this.indexes[t]<this.proxyOf.nodes.length&&(n=this.indexes[t],!1!==(r=e(this.proxyOf.nodes[n],n)));)this.indexes[t]+=1;return delete this.indexes[t],r}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?(...n)=>e[t](...n.map(e=>"function"==typeof e?(t,n)=>e(t.toProxy(),n):e)):"every"===t||"some"===t?n=>e[t]((e,...t)=>n(e.toProxy(),...t)):"root"===t?()=>e.root().toProxy():"nodes"===t?e.nodes.map(e=>e.toProxy()):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t],set:(e,t,n)=>(e[t]===n||(e[t]=n,("name"===t||"params"===t||"selector"===t)&&e.markDirty()),!0)}}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let n,r=this.index(e),i=this.normalize(t,this.proxyOf.nodes[r]).reverse();for(let t of(r=this.index(e),i))this.proxyOf.nodes.splice(r+1,0,t);for(let e in this.indexes)r<(n=this.indexes[e])&&(this.indexes[e]=n+i.length);return this.markDirty(),this}insertBefore(e,t){let n,r=this.index(e),i=0===r&&"prepend",o=this.normalize(t,this.proxyOf.nodes[r],i).reverse();for(let t of(r=this.index(e),o))this.proxyOf.nodes.splice(r,0,t);for(let e in this.indexes)r<=(n=this.indexes[e])&&(this.indexes[e]=n+o.length);return this.markDirty(),this}normalize(t,n){if("string"==typeof t)t=function e(t){return t.map(t=>(t.nodes&&(t.nodes=e(t.nodes)),delete t.source,t))}(Cd(t).nodes);else if(typeof t>"u")t=[];else if(Array.isArray(t))for(let e of t=t.slice(0))e.parent&&e.parent.removeChild(e,"ignore");else if("root"===t.type&&"document"!==this.type)for(let e of t=t.nodes.slice(0))e.parent&&e.parent.removeChild(e,"ignore");else if(t.type)t=[t];else if(t.prop){if(typeof t.value>"u")throw Error("Value field is missed in node creation");"string"!=typeof t.value&&(t.value=String(t.value)),t=[new Ca(t)]}else if(t.selector||t.selectors)t=[new Cp(t)];else if(t.name)t=[new Ch(t)];else if(t.text)t=[new Co(t)];else throw Error("Unknown node type in node creation");return t.map(t=>(t[Cu]||e.rebuild(t),(t=t.proxyOf).parent&&t.parent.removeChild(t),t[Cc]&&function e(t){if(t[Cc]=!1,t.proxyOf.nodes)for(let n of t.proxyOf.nodes)e(n)}(t),t.raws||(t.raws={}),typeof t.raws.before>"u"&&n&&"u">typeof n.raws.before&&(t.raws.before=n.raws.before.replace(/\S/g,"")),t.parent=this.proxyOf,t))}prepend(...e){for(let t of e=e.reverse()){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){let t;for(let n in e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1),this.indexes)(t=this.indexes[n])>=e&&(this.indexes[n]=t-1);return this.markDirty(),this}replaceValues(e,t,n){return n||(n=t,t={}),this.walkDecls(r=>{t.props&&!t.props.includes(r.prop)||t.fast&&!r.value.includes(t.fast)||(r.value=r.value.replace(e,n))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,n)=>{let r;try{r=e(t,n)}catch(e){throw t.addToError(e)}return!1!==r&&t.walk&&(r=t.walk(e)),r})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((n,r)=>{if("atrule"===n.type&&e.test(n.name))return t(n,r)}):this.walk((n,r)=>{if("atrule"===n.type&&n.name===e)return t(n,r)}):(t=e,this.walk((e,n)=>{if("atrule"===e.type)return t(e,n)}))}walkComments(e){return this.walk((t,n)=>{if("comment"===t.type)return e(t,n)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((n,r)=>{if("decl"===n.type&&e.test(n.prop))return t(n,r)}):this.walk((n,r)=>{if("decl"===n.type&&n.prop===e)return t(n,r)}):(t=e,this.walk((e,n)=>{if("decl"===e.type)return t(e,n)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((n,r)=>{if("rule"===n.type&&e.test(n.selector))return t(n,r)}):this.walk((n,r)=>{if("rule"===n.type&&n.selector===e)return t(n,r)}):(t=e,this.walk((e,n)=>{if("rule"===e.type)return t(e,n)}))}};Cm.registerParse=e=>{Cd=e},Cm.registerRule=e=>{Cp=e},Cm.registerAtRule=e=>{Ch=e},Cm.registerRoot=e=>{Cf=e},Cm.default=Cm,Cm.rebuild=e=>{"atrule"===e.type?Object.setPrototypeOf(e,Ch.prototype):"rule"===e.type?Object.setPrototypeOf(e,Cp.prototype):"decl"===e.type?Object.setPrototypeOf(e,Ca.prototype):"comment"===e.type?Object.setPrototypeOf(e,Co.prototype):"root"===e.type&&Object.setPrototypeOf(e,Cf.prototype),e[Cu]=!0,e.nodes&&e.nodes.forEach(e=>{Cm.rebuild(e)})};let Cg=Cm,Cy=class extends Cg{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};Cy.default=Cy,Cg.registerAtRule(Cy);let Cb=Cm,Cv,Cx,Cw=class extends Cb{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new Cv(new Cx,this,e).stringify()}};Cw.registerLazyResult=e=>{Cv=e},Cw.registerProcessor=e=>{Cx=e},Cw.default=Cw;let{existsSync:Ck,readFileSync:CO}=S5,{dirname:CS,join:CC}=S5,{SourceMapConsumer:CT,SourceMapGenerator:CA}=S5,CE=class{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let n=t.map?t.map.prev:void 0,r=this.loadMap(t.from,n);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=CS(this.mapFile)),r&&(this.text=r)}consumer(){return this.consumerCache||(this.consumerCache=new CT(this.text)),this.consumerCache}decodeInline(e){let t=e.match(/^data:application\/json;charset=utf-?8,/)||e.match(/^data:application\/json,/);if(t)return decodeURIComponent(e.substr(t[0].length));let n=e.match(/^data:application\/json;charset=utf-?8;base64,/)||e.match(/^data:application\/json;base64,/);if(n){var r;return r=e.substr(n[0].length),P?P.from(r,"base64").toString():window.atob(r)}throw Error("Unsupported source map encoding "+e.match(/data:application\/json;([^,]+),/)[1])}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return"object"==typeof e&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/g);if(!t)return;let n=e.lastIndexOf(t.pop()),r=e.indexOf("*/",n);n>-1&&r>-1&&(this.annotation=this.getAnnotationURL(e.substring(n,r)))}loadFile(e){if(this.root=CS(e),Ck(e))return this.mapFile=e,CO(e,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"==typeof t){let n=t(e);if(n){let e=this.loadFile(n);if(!e)throw Error("Unable to load previous source map: "+n.toString());return e}}else{if(t instanceof CT)return CA.fromSourceMap(t).toString();if(t instanceof CA)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw Error("Unsupported previous source map format: "+t.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return e&&(t=CC(CS(e),t)),this.loadFile(t)}}}startWith(e,t){return!!e&&e.substr(0,t.length)===t}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};CE.default=CE;let{nanoid:CM}={nanoid:(e=21)=>{let t="",n=0|e;for(;n--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t}},{isAbsolute:CN,resolve:C_}=S5,{SourceMapConsumer:Cj,SourceMapGenerator:CD}=S5,{fileURLToPath:CP,pathToFileURL:CR}=S5,CI=Symbol("fromOffsetCache"),Cz=!!(Cj&&CD),CL=!!(C_&&CN),Cq=class{get from(){return this.file||this.id}constructor(e,t={}){if(null===e||typeof e>"u"||"object"==typeof e&&!e.toString)throw Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),"\uFEFF"===this.css[0]||""===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,this.document=this.css,t.document&&(this.document=t.document.toString()),t.from&&(!CL||/^\w+:\/\//.test(t.from)||CN(t.from)?this.file=t.from:this.file=C_(t.from)),CL&&Cz){let e=new CE(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+CM(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,n,r={}){let i,o,s;if(t&&"object"==typeof t){let e=t,r=n;if("number"==typeof e.offset){let r=this.fromOffset(e.offset);t=r.line,n=r.col}else t=e.line,n=e.column;if("number"==typeof r.offset){let e=this.fromOffset(r.offset);o=e.line,i=e.col}else o=r.line,i=r.column}else if(!n){let e=this.fromOffset(t);t=e.line,n=e.col}let a=this.origin(t,n,o,i);return(s=a?new S3(e,void 0===a.endLine?a.line:{column:a.column,line:a.line},void 0===a.endLine?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,r.plugin):new S3(e,void 0===o?t:{column:n,line:t},void 0===o?n:{column:i,line:o},this.css,this.file,r.plugin)).input={column:n,endColumn:i,endLine:o,line:t,source:this.css},this.file&&(CR&&(s.input.url=CR(this.file).toString()),s.input.file=this.file),s}fromOffset(e){let t,n;if(this[CI])n=this[CI];else{let e=this.css.split(`
`);n=Array(e.length);let t=0;for(let r=0,i=e.length;r<i;r++)n[r]=t,t+=e[r].length+1;this[CI]=n}t=n[n.length-1];let r=0;if(e>=t)r=n.length-1;else{let t=n.length-2,i;for(;r<t;)if(e<n[i=r+(t-r>>1)])t=i-1;else if(e>=n[i+1])r=i+1;else{r=i;break}}return{col:e-n[r]+1,line:r+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:C_(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,n,r){let i,o;if(!this.map)return!1;let s=this.map.consumer(),a=s.originalPositionFor({column:t,line:e});if(!a.source)return!1;"number"==typeof n&&(i=s.originalPositionFor({column:r,line:n})),o=CN(a.source)?CR(a.source):new URL(a.source,this.map.consumer().sourceRoot||CR(this.map.mapFile));let l={column:a.column,endColumn:i&&i.column,endLine:i&&i.line,line:a.line,url:o.toString()};if("file:"===o.protocol){if(CP)l.file=CP(o);else throw Error("file: protocol is not available in this PostCSS build")}let c=s.sourceContentFor(a.source);return c&&(l.source=c),l}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}};Cq.default=Cq,S5&&S5.registerInput&&S5.registerInput(Cq);let C$=Cm,CB,CF,CQ=class extends C${constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,n){let r=super.normalize(e);if(t){if("prepend"===n)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let e of r)e.raws.before=t.raws.before}return r}removeChild(e,t){let n=this.index(e);return!t&&0===n&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[n].raws.before),super.removeChild(e)}toResult(e={}){return new CB(new CF,this,e).stringify()}};CQ.registerLazyResult=e=>{CB=e},CQ.registerProcessor=e=>{CF=e},CQ.default=CQ,C$.registerRoot(CQ);let CV={comma:e=>CV.split(e,[","],!0),space(e){let t=[" ",`
`,"	"];return CV.split(e,t)},split(e,t,n){let r=[],i="",o=!1,s=0,a=!1,l="",c=!1;for(let n of e)c?c=!1:"\\"===n?c=!0:a?n===l&&(a=!1):'"'===n||"'"===n?(a=!0,l=n):"("===n?s+=1:")"===n?s>0&&(s-=1):0===s&&t.includes(n)&&(o=!0),o?(""!==i&&r.push(i.trim()),i="",o=!1):i+=n;return(n||""!==i)&&r.push(i.trim()),r}};CV.default=CV;let CH=Cm,CU=class extends CH{get selectors(){return CV.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,n=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(n)}constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}};function CW(e,t){if(Array.isArray(e))return e.map(e=>CW(e));let{inputs:n,...r}=e;if(n)for(let e of(t=[],n)){let n={...e,__proto__:Cq.prototype};n.map&&(n.map={...n.map,__proto__:CE.prototype}),t.push(n)}if(r.nodes&&(r.nodes=e.nodes.map(e=>CW(e,t))),r.source){let{inputId:e,...n}=r.source;r.source=n,null!=e&&(r.source.input=t[e])}if("root"===r.type)return new CQ(r);if("decl"===r.type)return new Ca(r);if("rule"===r.type)return new CU(r);if("comment"===r.type)return new Co(r);if("atrule"===r.type)return new Cy(r);throw Error("Unknown node type: "+e.type)}CU.default=CU,CH.registerRule(CU),CW.default=CW;let{dirname:CG,relative:CX,resolve:CY,sep:CZ}=S5,{SourceMapConsumer:CK,SourceMapGenerator:CJ}=S5,{pathToFileURL:C0}=S5,C1=!!(CK&&CJ),C2=!!(CG&&CY&&CX&&CZ),C4=class{constructor(e,t,n,r){this.stringify=e,this.mapOpts=n.map||{},this.root=t,this.opts=n,this.css=r,this.originalCSS=r,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),n=e.root||CG(e.file),r;!1===this.mapOpts.sourcesContent?(r=new CK(e.text)).sourcesContent&&(r.sourcesContent=null):r=e.consumer(),this.map.applySourceMap(r,t,this.toUrl(this.path(n)))}}clearAnnotation(){if(!1!==this.mapOpts.annotation){if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)"comment"===(e=this.root.nodes[t]).type&&e.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}}generate(){if(this.clearAnnotation(),C2&&C1&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=CJ.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new CJ({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new CJ({file:this.outputFile(),ignoreInvalidMapping:!0});let e=1,t=1,n="<no source>",r={generated:{column:0,line:0},original:{column:0,line:0},source:""},i,o;this.stringify(this.root,(s,a,l)=>{if(this.css+=s,a&&"end"!==l&&(r.generated.line=e,r.generated.column=t-1,a.source&&a.source.start?(r.source=this.sourcePath(a),r.original.line=a.source.start.line,r.original.column=a.source.start.column-1):(r.source=n,r.original.line=1,r.original.column=0),this.map.addMapping(r)),(o=s.match(/\n/g))?(e+=o.length,i=s.lastIndexOf(`
`),t=s.length-i):t+=s.length,a&&"start"!==l){let i=a.parent||{raws:{}};(!("decl"===a.type||"atrule"===a.type&&!a.nodes)||a!==i.last||i.raws.semicolon)&&(a.source&&a.source.end?(r.source=this.sourcePath(a),r.original.line=a.source.end.line,r.original.column=a.source.end.column-1,r.generated.line=e,r.generated.column=t-2):(r.source=n,r.original.line=1,r.original.column=0,r.generated.line=e,r.generated.column=t-1),this.map.addMapping(r))}})}isAnnotation(){return!!this.isInline()||("u">typeof this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(e=>e.annotation))}isInline(){if("u">typeof this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return(!("u">typeof e)||!0===e)&&(!this.previous().length||this.previous().some(e=>e.inline))}isMap(){return"u">typeof this.opts.map?!!this.opts.map:this.previous().length>0}isSourcesContent(){return"u">typeof this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(e=>e.withContent())}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute||60===e.charCodeAt(0)||/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let n=this.opts.to?CG(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(n=CG(CY(n,this.mapOpts.annotation)));let r=CX(n,e);return this.memoizedPaths.set(e,r),r}previous(){if(!this.previousMaps){if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new Cq(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let n=t.source.input.from;if(n&&!e[n]){e[n]=!0;let r=this.usesFileUrls?this.toFileUrl(n):this.toUrl(this.path(n));this.map.setSourceContent(r,t.source.input.css)}}});else if(this.css){let e=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(e,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return P?P.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(C0){let t=C0(e).toString();return this.memoizedFileURLs.set(e,t),t}throw Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;"\\"===CZ&&(e=e.replace(/\\/g,"/"));let n=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,n),n}},C5=/[\t\n\f\r "#'()/;[\\\]{}]/g,C3=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,C6=/.[\r\n"'(/\\]/,C7=/[\da-f]/i,C8=function(e,t={}){let n=e.css.valueOf(),r=t.ignoreErrors,i,o,s,a,l,c,u,h,d,f,p=n.length,m=0,g=[],y=[];function b(t){throw e.error("Unclosed "+t,m)}return{back:function(e){y.push(e)},endOfFile:function(){return 0===y.length&&m>=p},nextToken:function(e){if(y.length)return y.pop();if(m>=p)return;let t=!!e&&e.ignoreUnclosed;switch(i=n.charCodeAt(m)){case 10:case 32:case 9:case 13:case 12:a=m;do a+=1,i=n.charCodeAt(a);while(32===i||10===i||9===i||13===i||12===i);c=["space",n.slice(m,a)],m=a-1;break;case 91:case 93:case 123:case 125:case 58:case 59:case 41:{let e=String.fromCharCode(i);c=[e,e,m];break}case 40:if(f=g.length?g.pop()[1]:"",d=n.charCodeAt(m+1),"url"===f&&39!==d&&34!==d&&32!==d&&10!==d&&9!==d&&12!==d&&13!==d){a=m;do{if(u=!1,-1===(a=n.indexOf(")",a+1))){if(r||t){a=m;break}b("bracket")}for(h=a;92===n.charCodeAt(h-1);)h-=1,u=!u}while(u);c=["brackets",n.slice(m,a+1),m,a],m=a}else a=n.indexOf(")",m+1),o=n.slice(m,a+1),-1===a||C6.test(o)?c=["(","(",m]:(c=["brackets",o,m,a],m=a);break;case 39:case 34:l=39===i?"'":'"',a=m;do{if(u=!1,-1===(a=n.indexOf(l,a+1))){if(r||t){a=m+1;break}b("string")}for(h=a;92===n.charCodeAt(h-1);)h-=1,u=!u}while(u);c=["string",n.slice(m,a+1),m,a],m=a;break;case 64:C5.lastIndex=m+1,C5.test(n),a=0===C5.lastIndex?n.length-1:C5.lastIndex-2,c=["at-word",n.slice(m,a+1),m,a],m=a;break;case 92:for(a=m,s=!0;92===n.charCodeAt(a+1);)a+=1,s=!s;if(i=n.charCodeAt(a+1),s&&47!==i&&32!==i&&10!==i&&9!==i&&13!==i&&12!==i&&(a+=1,C7.test(n.charAt(a)))){for(;C7.test(n.charAt(a+1));)a+=1;32===n.charCodeAt(a+1)&&(a+=1)}c=["word",n.slice(m,a+1),m,a],m=a;break;default:47===i&&42===n.charCodeAt(m+1)?(0===(a=n.indexOf("*/",m+2)+1)&&(r||t?a=n.length:b("comment")),c=["comment",n.slice(m,a+1),m,a]):(C3.lastIndex=m+1,C3.test(n),a=0===C3.lastIndex?n.length-1:C3.lastIndex-2,c=["word",n.slice(m,a+1),m,a],g.push(c)),m=a}return m++,c},position:function(){return m}}},C9={empty:!0,space:!0},Te=class{constructor(e){this.input=e,this.root=new CQ,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t=new Cy;t.name=e[1].slice(1),""===t.name&&this.unnamedAtrule(t,e),this.init(t,e[2]);let n,r,i,o=!1,s=!1,a=[],l=[];for(;!this.tokenizer.endOfFile();){if("("===(n=(e=this.tokenizer.nextToken())[0])||"["===n?l.push("("===n?")":"]"):"{"===n&&l.length>0?l.push("}"):n===l[l.length-1]&&l.pop(),0===l.length){if(";"===n){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}if("{"===n){s=!0;break}else if("}"===n){if(a.length>0){for(i=a.length-1,r=a[i];r&&"space"===r[0];)r=a[--i];r&&(t.source.end=this.getPosition(r[3]||r[2]),t.source.end.offset++)}this.end(e);break}else a.push(e)}else a.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(t.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(t,"params",a),o&&(e=a[a.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),s&&(t.nodes=[],this.current=t)}checkMissedSemicolon(e){let t=this.colon(e);if(!1===t)return;let n=0,r;for(let i=t-1;i>=0&&("space"===(r=e[i])[0]||2!==(n+=1));i--);throw this.input.error("Missed semicolon","word"===r[0]?r[3]+1:r[2])}colon(e){let t=0,n,r;for(let[i,o]of e.entries()){if("("===(r=o[0])&&(t+=1),")"===r&&(t-=1),0===t&&":"===r){if(n){if("word"===n[0]&&"progid"===n[1])continue;return i}this.doubleColon(o)}n=o}return!1}comment(e){let t=new Co;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let n=e[1].slice(2,-2);if(/^\s*$/.test(n))t.text="",t.raws.left=n,t.raws.right="";else{let e=n.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}createTokenizer(){this.tokenizer=C8(this.input)}decl(e,t){let n,r=new Ca;this.init(r,e[0][2]);let i=e[e.length-1];for(";"===i[0]&&(this.semicolon=!0,e.pop()),r.source.end=this.getPosition(i[3]||i[2]||function(e){for(let t=e.length-1;t>=0;t--){let n=e[t],r=n[3]||n[2];if(r)return r}}(e)),r.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),r.raws.before+=e.shift()[1];for(r.source.start=this.getPosition(e[0][2]),r.prop="";e.length;){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;r.prop+=e.shift()[1]}for(r.raws.between="";e.length;)if(":"===(n=e.shift())[0]){r.raws.between+=n[1];break}else"word"===n[0]&&/\w/.test(n[1])&&this.unknownWord([n]),r.raws.between+=n[1];("_"===r.prop[0]||"*"===r.prop[0])&&(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));let o=[],s;for(;e.length&&("space"===(s=e[0][0])||"comment"===s);)o.push(e.shift());this.precheckMissedSemicolon(e);for(let t=e.length-1;t>=0;t--){if("!important"===(n=e[t])[1].toLowerCase()){r.important=!0;let n=this.stringFrom(e,t);" !important"!==(n=this.spacesFromEnd(e)+n)&&(r.raws.important=n);break}if("important"===n[1].toLowerCase()){let n=e.slice(0),i="";for(let e=t;e>0;e--){let t=n[e][0];if(i.trim().startsWith("!")&&"space"!==t)break;i=n.pop()[1]+i}i.trim().startsWith("!")&&(r.important=!0,r.raws.important=i,e=n)}if("space"!==n[0]&&"comment"!==n[0])break}e.some(e=>"space"!==e[0]&&"comment"!==e[0])&&(r.raws.between+=o.map(e=>e[1]).join(""),o=[]),this.raw(r,"value",o.concat(e),t),r.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new CU;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&"rule"===t.type&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="",t.source.end=this.getPosition(e[2]),t.source.end.offset+=t.raws.ownSemicolon.length)}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}other(e){let t=!1,n=null,r=!1,i=null,o=[],s=e[1].startsWith("--"),a=[],l=e;for(;l;){if(n=l[0],a.push(l),"("===n||"["===n)i||(i=l),o.push("("===n?")":"]");else if(s&&r&&"{"===n)i||(i=l),o.push("}");else if(0===o.length){if(";"===n){if(r){this.decl(a,s);return}break}if("{"===n){this.rule(a);return}else if("}"===n){this.tokenizer.back(a.pop()),t=!0;break}else":"===n&&(r=!0)}else n===o[o.length-1]&&(o.pop(),0===o.length&&(i=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(i),t&&r){if(!s)for(;a.length&&("space"===(l=a[a.length-1][0])||"comment"===l);)this.tokenizer.back(a.pop());this.decl(a,s)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch((e=this.tokenizer.nextToken())[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,t,n,r){let i,o,s=n.length,a="",l=!0,c,u;for(let e=0;e<s;e+=1)"space"!==(o=(i=n[e])[0])||e!==s-1||r?"comment"===o?(u=n[e-1]?n[e-1][0]:"empty",c=n[e+1]?n[e+1][0]:"empty",C9[u]||C9[c]?l=!1:","===a.slice(-1)?l=!1:a+=i[1]):a+=i[1]:l=!1;if(!l){let r=n.reduce((e,t)=>e+t[1],"");e.raws[t]={raw:r,value:a}}e[t]=a}rule(e){e.pop();let t=new CU;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,n="";for(;e.length&&("space"===(t=e[e.length-1][0])||"comment"===t);)n=e.pop()[1]+n;return n}spacesAndCommentsFromStart(e){let t,n="";for(;e.length&&("space"===(t=e[0][0])||"comment"===t);)n+=e.shift()[1];return n}spacesFromEnd(e){let t="";for(;e.length&&"space"===e[e.length-1][0];)t=e.pop()[1]+t;return t}stringFrom(e,t){let n="";for(let r=t;r<e.length;r++)n+=e[r][1];return e.splice(t,e.length-t),n}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word "+e[0][1],{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}};function Tt(e,t){let n=new Te(new Cq(e,t));try{n.parse()}catch(e){throw e}return n.root}Tt.default=Tt,Cm.registerParse(Tt);let Tn=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.rangeBy(t);this.line=e.start.line,this.column=e.start.column,this.endLine=e.end.line,this.endColumn=e.end.column}for(let e in t)this[e]=t[e]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};Tn.default=Tn;let Tr=class{get content(){return this.css}constructor(e,t,n){this.processor=e,this.messages=[],this.root=t,this.opts=n,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let n=new Tn(e,t);return this.messages.push(n),n}warnings(){return this.messages.filter(e=>"warning"===e.type)}};Tr.default=Tr;let{isClean:Ti,my:To}=S9,Ts={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},Ta={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},Tl={Once:!0,postcssPlugin:!0,prepare:!0};function Tc(e){return"object"==typeof e&&"function"==typeof e.then}function Tu(e){let t=!1,n=Ts[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[n,n+"-"+t,0,n+"Exit",n+"Exit-"+t]:t?[n,n+"-"+t,n+"Exit",n+"Exit-"+t]:e.append?[n,0,n+"Exit"]:[n,n+"Exit"]}function Th(e){let t;return{eventIndex:0,events:"document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:Tu(e),iterator:0,node:e,visitorIndex:0,visitors:[]}}function Td(e){return e[Ti]=!1,e.nodes&&e.nodes.forEach(e=>Td(e)),e}let Tf={},Tp=class e{get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}constructor(t,n,r){let i;if(this.stringified=!1,this.processed=!1,"object"==typeof n&&null!==n&&("root"===n.type||"document"===n.type))i=Td(n);else if(n instanceof e||n instanceof Tr)i=Td(n.root),n.map&&(typeof r.map>"u"&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=n.map);else{let e=Tt;r.syntax&&(e=r.syntax.parse),r.parser&&(e=r.parser),e.parse&&(e=e.parse);try{i=e(n,r)}catch(e){this.processed=!0,this.error=e}i&&!i[To]&&Cm.rebuild(i)}this.result=new Tr(t,i,r),this.helpers={...Tf,postcss:Tf,result:this.result},this.plugins=this.processor.plugins.map(e=>"object"==typeof e&&e.prepare?{...e,...e.prepare(this.result)}:e)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let n=this.result.lastPlugin;try{(t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin)?n.postcssVersion:(e.plugin=n.postcssPlugin,e.setMessage())}catch(e){console&&console.error&&console.error(e)}return e}prepareVisitors(){this.listeners={};let e=(e,t,n)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,n])};for(let t of this.plugins)if("object"==typeof t)for(let n in t){if(!Ta[n]&&/^[A-Z]/.test(n))throw Error(`Unknown event ${n} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!Tl[n]){if("object"==typeof t[n])for(let r in t[n])e(t,"*"===r?n:n+"-"+r.toLowerCase(),t[n][r]);else"function"==typeof t[n]&&e(t,n,t[n])}}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],n=this.runOnRoot(t);if(Tc(n))try{await n}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Ti];){e[Ti]=!0;let t=[Th(e)];for(;t.length>0;){let e=this.visitTick(t);if(Tc(e))try{await e}catch(n){let e=t[t.length-1].node;throw this.handleError(n,e)}}}if(this.listeners.OnceExit)for(let[t,n]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if("document"===e.type){let t=e.nodes.map(e=>n(e,this.helpers));await Promise.all(t)}else await n(e,this.helpers)}catch(e){throw this.handleError(e)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map(t=>e.Once(t,this.helpers));return Tc(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=S8;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let n=new C4(t,this.result.root,this.result.opts).generate();return this.result.css=n[0],this.result.map=n[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins)if(Tc(this.runOnRoot(e)))throw this.getAsyncError();if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Ti];)e[Ti]=!0,this.walkSync(e);if(this.listeners.OnceExit){if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[n,r]of e){let e;this.result.lastPlugin=n;try{e=r(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(Tc(e))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:n,visitors:r}=t;if("root"!==n.type&&"document"!==n.type&&!n.parent){e.pop();return}if(r.length>0&&t.visitorIndex<r.length){let[e,i]=r[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===r.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return i(n.toProxy(),this.helpers)}catch(e){throw this.handleError(e,n)}}if(0!==t.iterator){let r=t.iterator,i;for(;i=n.nodes[n.indexes[r]];)if(n.indexes[r]+=1,!i[Ti]){i[Ti]=!0,e.push(Th(i));return}t.iterator=0,delete n.indexes[r]}let i=t.events;for(;t.eventIndex<i.length;){let e=i[t.eventIndex];if(t.eventIndex+=1,0===e){n.nodes&&n.nodes.length&&(n[Ti]=!0,t.iterator=n.getIterator());return}if(this.listeners[e]){t.visitors=this.listeners[e];return}}e.pop()}walkSync(e){for(let t of(e[Ti]=!0,Tu(e)))if(0===t)e.nodes&&e.each(e=>{e[Ti]||this.walkSync(e)});else{let n=this.listeners[t];if(n&&this.visitSync(n,e.toProxy()))return}}warnings(){return this.sync().warnings()}};Tp.registerPostcss=e=>{Tf=e},Tp.default=Tp,CQ.registerLazyResult(Tp),Cw.registerLazyResult(Tp);let Tm=class{get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){let e;if(this._root)return this._root;try{e=Tt(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}constructor(e,t,n){let r;t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=n,this._map=void 0,this.result=new Tr(this._processor,r,this._opts),this.result.css=t;let i=this;Object.defineProperty(this.result,"root",{get:()=>i.root});let o=new C4(S8,r,this._opts,t);if(o.isMap()){let[e,t]=o.generate();e&&(this.result.css=e),t&&(this.result.map=t)}else o.clearAnnotation(),this.result.css=o.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}};Tm.default=Tm;let Tg=class{constructor(e=[]){this.version="8.5.3",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let n of e)if(!0===n.postcss?n=n():n.postcss&&(n=n.postcss),"object"==typeof n&&Array.isArray(n.plugins))t=t.concat(n.plugins);else if("object"==typeof n&&n.postcssPlugin)t.push(n);else if("function"==typeof n)t.push(n);else if("object"==typeof n&&(n.parse||n.stringify));else throw Error(n+" is not a PostCSS plugin");return t}process(e,t={}){return this.plugins.length||t.parser||t.stringifier||t.syntax?new Tp(this,e,t):new Tm(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};function Ty(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new Tg(e)}Tg.default=Tg,CQ.registerProcessor(Tg),Cw.registerProcessor(Tg),Ty.plugin=function(e,t){let n,r=!1;function i(...n){console&&console.warn&&!r&&(r=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),D.env.LANG&&D.env.LANG.startsWith("cn")&&console.warn(e+`:  postcss.plugin . :
https://www.w3ctech.com/topic/2226`));let o=t(...n);return o.postcssPlugin=e,o.postcssVersion=new Tg().version,o}return Object.defineProperty(i,"postcss",{get:()=>(n||(n=i()),n)}),i.process=function(e,t,n){return Ty([i(n)]).process(e,t)},i},Ty.stringify=S8,Ty.parse=Tt,Ty.fromJSON=CW,Ty.list=CV,Ty.comment=e=>new Co(e),Ty.atRule=e=>new Cy(e),Ty.decl=e=>new Ca(e),Ty.rule=e=>new CU(e),Ty.root=e=>new CQ(e),Ty.document=e=>new Cw(e),Ty.CssSyntaxError=S3,Ty.Declaration=Ca,Ty.Container=Cm,Ty.Processor=Tg,Ty.Document=Cw,Ty.Comment=Co,Ty.Warning=Tn,Ty.AtRule=Cy,Ty.Result=Tr,Ty.Input=Cq,Ty.Rule=CU,Ty.Root=CQ,Ty.Node=Cr,Tp.registerPostcss(Ty),Ty.default=Ty;let Tb=e=>{if("string"!=typeof e)throw TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")},{isPlainObject:Tv}=SF,Tx=SY,{parse:Tw}=Ty,Tk=["img","audio","video","picture","svg","object","map","iframe","embed"],TO=["script","style"];function TS(e,t){e&&Object.keys(e).forEach(function(n){t(e[n],n)})}function TC(e,t){return({}).hasOwnProperty.call(e,t)}function TT(e,t){let n=[];return TS(e,function(e){t(e)&&n.push(e)}),n}let TA=/^[^\0\t\n\f\r /<=>]+$/;function TE(e,t,n){let r,i,o;if(null==e)return"";"number"==typeof e&&(e=e.toString());let s="",a="";function l(e,t){let n=this;this.tag=e,this.attribs=t||{},this.tagPosition=s.length,this.text="",this.mediaChildren=[],this.updateParentNodeText=function(){if(g.length){let e=g[g.length-1];e.text+=n.text}},this.updateParentNodeMediaChildren=function(){g.length&&Tk.includes(this.tag)&&g[g.length-1].mediaChildren.push(this.tag)}}(t=Object.assign({},TE.defaults,t)).parser=Object.assign({},TM,t.parser);let c=function(e){return!1===t.allowedTags||(t.allowedTags||[]).indexOf(e)>-1};TO.forEach(function(e){c(e)&&!t.allowVulnerableTags&&console.warn(`

 Your \`allowedTags\` option includes, \`${e}\`, which is inherently
vulnerable to XSS attacks. Please remove it from \`allowedTags\`.
Or, to disable this warning, add the \`allowVulnerableTags\` option
and ensure you are accounting for this risk.

`)});let u=t.nonTextTags||["script","style","textarea","option"];t.allowedAttributes&&(r={},i={},TS(t.allowedAttributes,function(e,t){r[t]=[];let n=[];e.forEach(function(e){"string"==typeof e&&e.indexOf("*")>=0?n.push(Tb(e).replace(/\\\*/g,".*")):r[t].push(e)}),n.length&&(i[t]=RegExp("^("+n.join("|")+")$"))}));let h={},d={},f={};TS(t.allowedClasses,function(e,t){if(r&&(TC(r,t)||(r[t]=[]),r[t].push("class")),h[t]=e,Array.isArray(e)){let n=[];h[t]=[],f[t]=[],e.forEach(function(e){"string"==typeof e&&e.indexOf("*")>=0?n.push(Tb(e).replace(/\\\*/g,".*")):e instanceof RegExp?f[t].push(e):h[t].push(e)}),n.length&&(d[t]=RegExp("^("+n.join("|")+")$"))}});let p={};TS(t.transformTags,function(e,t){let n;"function"==typeof e?n=e:"string"==typeof e&&(n=TE.simpleTransform(e)),"*"===t?o=n:p[t]=n});let m,g,y,b,v,x,w=!1;O();let k=new Op.Parser({onopentag:function(e,n){let k;if(t.enforceHtmlBoundary&&"html"===e&&O(),v){x++;return}let E=new l(e,n);g.push(E);let M=!1,N=!!E.text;if(TC(p,e)&&(E.attribs=n=(k=p[e](e,n)).attribs,void 0!==k.text&&(E.innerText=k.text),e!==k.tagName&&(E.name=e=k.tagName,b[m]=k.tagName)),o&&(E.attribs=n=(k=o(e,n)).attribs,e!==k.tagName&&(E.name=e=k.tagName,b[m]=k.tagName)),(!c(e)||"recursiveEscape"===t.disallowedTagsMode&&!function(e){for(let t in e)if(TC(e,t))return!1;return!0}(y)||null!=t.nestingLimit&&m>=t.nestingLimit)&&(M=!0,y[m]=!0,("discard"===t.disallowedTagsMode||"completelyDiscard"===t.disallowedTagsMode)&&-1!==u.indexOf(e)&&(v=!0,x=1),y[m]=!0),m++,M){if("discard"===t.disallowedTagsMode||"completelyDiscard"===t.disallowedTagsMode){if(E.innerText&&!N){let n=S(E.innerText);t.textFilter?s+=t.textFilter(n,e):s+=S(E.innerText),w=!0}return}a=s,s=""}s+="<"+e,"script"===e&&(t.allowedScriptHostnames||t.allowedScriptDomains)&&(E.innerText=""),(!r||TC(r,e)||r["*"])&&TS(n,function(n,o){if(!TA.test(o)||""===n&&!t.allowedEmptyAttributes.includes(o)&&(t.nonBooleanAttributes.includes(o)||t.nonBooleanAttributes.includes("*"))){delete E.attribs[o];return}let a=!1;if(!r||TC(r,e)&&-1!==r[e].indexOf(o)||r["*"]&&-1!==r["*"].indexOf(o)||TC(i,e)&&i[e].test(o)||i["*"]&&i["*"].test(o))a=!0;else if(r&&r[e]){for(let t of r[e])if(Tv(t)&&t.name&&t.name===o){a=!0;let e="";if(!0===t.multiple)for(let r of n.split(" "))-1!==t.values.indexOf(r)&&(""===e?e=r:e+=" "+r);else t.values.indexOf(n)>=0&&(e=n);n=e}}if(a){if(-1!==t.allowedSchemesAppliedToAttributes.indexOf(o)&&C(e,n)){delete E.attribs[o];return}if("script"===e&&"src"===o){let e=!0;try{let r=T(n);if(t.allowedScriptHostnames||t.allowedScriptDomains){let n=(t.allowedScriptHostnames||[]).find(function(e){return e===r.url.hostname}),i=(t.allowedScriptDomains||[]).find(function(e){return r.url.hostname===e||r.url.hostname.endsWith(`.${e}`)});e=n||i}}catch{e=!1}if(!e){delete E.attribs[o];return}}if("iframe"===e&&"src"===o){let e=!0;try{let r=T(n);if(r.isRelativeUrl)e=TC(t,"allowIframeRelativeUrls")?t.allowIframeRelativeUrls:!t.allowedIframeHostnames&&!t.allowedIframeDomains;else if(t.allowedIframeHostnames||t.allowedIframeDomains){let n=(t.allowedIframeHostnames||[]).find(function(e){return e===r.url.hostname}),i=(t.allowedIframeDomains||[]).find(function(e){return r.url.hostname===e||r.url.hostname.endsWith(`.${e}`)});e=n||i}}catch{e=!1}if(!e){delete E.attribs[o];return}}if("srcset"===o)try{let e=SK(n);if(e.forEach(function(e){C("srcset",e.url)&&(e.evil=!0)}),(e=TT(e,function(e){return!e.evil})).length)n=TT(e,function(e){return!e.evil}).map(function(e){if(!e.url)throw Error("URL missing");return e.url+(e.w?` ${e.w}w`:"")+(e.h?` ${e.h}h`:"")+(e.d?` ${e.d}x`:"")}).join(", "),E.attribs[o]=n;else{delete E.attribs[o];return}}catch{delete E.attribs[o];return}if("class"===o){let t=h[e],r=h["*"],i=d[e],s=f[e],a=f["*"],l=[i,d["*"]].concat(s,a).filter(function(e){return e});if(!(n=t&&r?A(n,Tx(t,r),l):A(n,t||r,l)).length){delete E.attribs[o];return}}if("style"===o){if(t.parseStyleAttributes)try{let r=Tw(e+" {"+n+"}",{map:!1});if(n=(function(e,t){var n;let r;if(!t)return e;let i=e.nodes[0];return(r=t[i.selector]&&t["*"]?Tx(t[i.selector],t["*"]):t[i.selector]||t["*"])&&(e.nodes[0].nodes=i.nodes.reduce((n=r,function(e,t){return TC(n,t.prop)&&n[t.prop].some(function(e){return e.test(t.value)})&&e.push(t),e}),[])),e})(r,t.allowedStyles).nodes[0].nodes.reduce(function(e,t){return e.push(`${t.prop}:${t.value}${t.important?" !important":""}`),e},[]).join(";"),0===n.length){delete E.attribs[o];return}}catch{"u">typeof window&&console.warn('Failed to parse "'+e+" {"+n+"}\", If you're running this in a browser, we recommend to disable style parsing: options.parseStyleAttributes: false, since this only works in a node environment due to a postcss dependency, More info: https://github.com/apostrophecms/sanitize-html/issues/547"),delete E.attribs[o];return}else if(t.allowedStyles)throw Error("allowedStyles option cannot be used together with parseStyleAttributes: false.")}s+=" "+o,n&&n.length?s+='="'+S(n,!0)+'"':t.allowedEmptyAttributes.includes(o)&&(s+='=""')}else delete E.attribs[o]}),-1!==t.selfClosing.indexOf(e)?s+=" />":(s+=">",!E.innerText||N||t.textFilter||(s+=S(E.innerText),w=!0)),M&&(s=a+S(s),a="")},ontext:function(e){let n;if(v)return;let r=g[g.length-1];if(r&&(n=r.tag,e=void 0!==r.innerText?r.innerText:e),"completelyDiscard"!==t.disallowedTagsMode||c(n)){if(("discard"===t.disallowedTagsMode||"completelyDiscard"===t.disallowedTagsMode)&&("script"===n||"style"===n))s+=e;else{let r=S(e,!1);t.textFilter&&!w?s+=t.textFilter(r,n):w||(s+=r)}}else e="";if(g.length){let t=g[g.length-1];t.text+=e}},onclosetag:function(e,n){if(v){if(--x)return;v=!1}let r=g.pop();if(!r)return;if(r.tag!==e){g.push(r);return}v=!!t.enforceHtmlBoundary&&"html"===e;let i=y[--m];if(i){if(delete y[m],"discard"===t.disallowedTagsMode||"completelyDiscard"===t.disallowedTagsMode){r.updateParentNodeText();return}a=s,s=""}if(b[m]&&(e=b[m],delete b[m]),t.exclusiveFilter&&t.exclusiveFilter(r)){s=s.substr(0,r.tagPosition);return}if(r.updateParentNodeMediaChildren(),r.updateParentNodeText(),-1!==t.selfClosing.indexOf(e)||n&&!c(e)&&["escape","recursiveEscape"].indexOf(t.disallowedTagsMode)>=0){i&&(s=a,a="");return}s+="</"+e+">",i&&(s=a+S(s),a=""),w=!1}},t.parser);return k.write(e),k.end(),s;function O(){s="",m=0,g=[],y={},b={},v=!1,x=0}function S(e,n){return"string"!=typeof e&&(e+=""),t.parser.decodeEntities&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),n&&(e=e.replace(/"/g,"&quot;"))),e=e.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),n&&(e=e.replace(/"/g,"&quot;")),e}function C(e,n){for(n=n.replace(/[\x00-\x20]+/g,"");;){let e=n.indexOf("\x3c!--");if(-1===e)break;let t=n.indexOf("--\x3e",e+4);if(-1===t)break;n=n.substring(0,e)+n.substring(t+3)}let r=n.match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!r)return!!n.match(/^[/\\]{2}/)&&!t.allowProtocolRelative;let i=r[1].toLowerCase();return TC(t.allowedSchemesByTag,e)?-1===t.allowedSchemesByTag[e].indexOf(i):!t.allowedSchemes||-1===t.allowedSchemes.indexOf(i)}function T(e){if((e=e.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//")).startsWith("relative:"))throw Error("relative: exploit attempt");let t="relative://relative-site";for(let e=0;e<100;e++)t+=`/${e}`;let n=new URL(e,t);return{isRelativeUrl:n&&"relative-site"===n.hostname&&"relative:"===n.protocol,url:n}}function A(e,t,n){return t?(e=e.split(/\s+/)).filter(function(e){return -1!==t.indexOf(e)||n.some(function(t){return t.test(e)})}).join(" "):e}}let TM={decodeEntities:!0};TE.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],nonBooleanAttributes:["abbr","accept","accept-charset","accesskey","action","allow","alt","as","autocapitalize","autocomplete","blocking","charset","cite","class","color","cols","colspan","content","contenteditable","coords","crossorigin","data","datetime","decoding","dir","dirname","download","draggable","enctype","enterkeyhint","fetchpriority","for","form","formaction","formenctype","formmethod","formtarget","headers","height","hidden","high","href","hreflang","http-equiv","id","imagesizes","imagesrcset","inputmode","integrity","is","itemid","itemprop","itemref","itemtype","kind","label","lang","list","loading","low","max","maxlength","media","method","min","minlength","name","nonce","optimum","pattern","ping","placeholder","popover","popovertarget","popovertargetaction","poster","preload","referrerpolicy","rel","rows","rowspan","sandbox","scope","shape","size","sizes","slot","span","spellcheck","src","srcdoc","srclang","srcset","start","step","style","tabindex","target","title","translate","type","usemap","value","width","wrap","onauxclick","onafterprint","onbeforematch","onbeforeprint","onbeforeunload","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","onhashchange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onlanguagechange","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmessageerror","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onoffline","ononline","onpagehide","onpageshow","onpaste","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreset","onresize","onrejectionhandled","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onslotchange","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","ontoggle","onunhandledrejection","onunload","onvolumechange","onwaiting","onwheel"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src","srcset","alt","title","width","height","loading"]},allowedEmptyAttributes:["alt"],selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1,parseStyleAttributes:!0},TE.simpleTransform=function(e,t,n){return n=void 0===n||n,t=t||{},function(r,i){let o;if(n)for(o in t)i[o]=t[o];else i=t;return{tagName:e,attribs:i}}};let TN=(0,_.y)(TE);function T_({step:e}){let{function_name:t,result:n,inputs:r}=e,i=TN(Of.parse(n.answer),{allowedTags:TN.defaults.allowedTags.concat(["img"]),allowedAttributes:{...TN.defaults.allowedAttributes,img:["src","alt","title"]}});return M.j.jsxs("div",{className:"border p-4 rounded-md shadow-sm bg-white dark:bg-dark-bg-secondary dark:border-dark-border max-h-[600px] overflow-y-auto",children:[M.j.jsxs("h2",{className:"text-lg font-semibold mb-2 text-gray-800 dark:text-dark-text-primary",children:["Function: ",M.j.jsx("span",{className:"font-normal",children:t})]}),(null==r?void 0:r.question)&&M.j.jsxs("div",{className:"mb-3 text-gray-700 dark:text-dark-text-secondary",children:[M.j.jsx("p",{className:"mb-1 font-medium text-gray-800 dark:text-dark-text-primary",children:"Question"}),M.j.jsx("p",{className:"bg-gray-50 dark:bg-gray-800 p-2 rounded-md border-l-2 border-blue-500 dark:border-blue-600 italic text-gray-700 dark:text-dark-text-secondary",children:r.question})]}),M.j.jsx("div",{className:"text-gray-700 dark:text-dark-text-secondary prose dark:prose-invert prose-sm max-w-none",dangerouslySetInnerHTML:{__html:i}}),n.reference_sources&&M.j.jsxs("div",{children:[M.j.jsx("h3",{children:"Reference Sources"}),M.j.jsx("ul",{children:n.reference_sources.map((e,t)=>M.j.jsx("li",{children:M.j.jsx("a",{href:e.url,target:"_blank",children:e.source})},t))})]})]})}function Tj({step:e}){let{function_name:t,result:n,inputs:r}=e,i=n.citations.map(e=>e.text).join(""),o=TN(Of.parse(i),{allowedTags:TN.defaults.allowedTags.concat(["img"]),allowedAttributes:{...TN.defaults.allowedAttributes,img:["src","alt","title"]}});return M.j.jsxs("div",{className:"border p-4 rounded-md shadow-sm bg-white dark:bg-dark-bg-secondary dark:border-dark-border max-h-[600px] overflow-y-auto",children:[M.j.jsxs("h2",{className:"text-lg font-semibold mb-2 text-gray-800 dark:text-dark-text-primary",children:["Function: ",M.j.jsx("span",{className:"font-normal",children:t})]}),(null==r?void 0:r.question)&&M.j.jsxs("div",{className:"mb-3 text-gray-700 dark:text-dark-text-secondary",children:[M.j.jsx("p",{className:"mb-1 font-medium text-gray-800 dark:text-dark-text-primary",children:"Question"}),M.j.jsx("p",{className:"bg-gray-50 dark:bg-gray-800 p-2 rounded-md border-l-2 border-blue-500 dark:border-blue-600 italic text-gray-700 dark:text-dark-text-secondary",children:r.question})]}),M.j.jsx("div",{className:"text-gray-700 dark:text-dark-text-secondary prose dark:prose-invert prose-sm max-w-none",dangerouslySetInnerHTML:{__html:o}})]})}function TD({step:e}){let{function_name:t,inputs:n}=e,{result:r,sql:i,code:o,error:s}=e.result,[a,l]=(0,N.useState)(!1),[c,u]=(0,N.useState)(!1);return M.j.jsxs("div",{className:"border p-4 rounded-md shadow-sm bg-white dark:bg-dark-bg-secondary dark:border-dark-border max-h-[600px] overflow-y-auto",children:[M.j.jsxs("h2",{className:"text-lg font-semibold mb-2 text-gray-800 dark:text-dark-text-primary",children:["Function: ",M.j.jsx("span",{className:"font-normal",children:t})]}),(null==n?void 0:n.question)&&M.j.jsxs("div",{className:"mb-3 text-gray-700 dark:text-dark-text-secondary",children:[M.j.jsx("p",{className:"mb-1 font-medium text-gray-800 dark:text-dark-text-primary",children:"Question"}),M.j.jsx("p",{className:"bg-gray-50 dark:bg-gray-800 p-2 rounded-md border-l-2 border-blue-500 dark:border-blue-600 italic text-gray-700 dark:text-dark-text-secondary",children:n.question})]}),M.j.jsx("div",{className:"prose dark:prose-invert prose-sm max-w-none py-1",dangerouslySetInnerHTML:{__html:TN(Of.parse(r||s))}}),M.j.jsxs("div",{className:"flex flex-col gap-4",children:[M.j.jsx("div",{children:o&&M.j.jsxs(M.j.Fragment,{children:[M.j.jsxs("button",{onClick:()=>l(!a),className:"w-fit text-xs bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded px-2 py-1 transition-colors flex items-center gap-1",children:[M.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:[M.j.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),M.j.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),a?"Hide Code":"Show Code"]}),M.j.jsx("div",{className:(0,M.t)("transition-all",a?"h-96 overflow-scroll":"h-0 overflow-hidden"),children:M.j.jsx(kp,{code:o,editable:!1,language:"python"})})]})}),M.j.jsx("div",{children:i&&M.j.jsxs(M.j.Fragment,{children:[M.j.jsxs("button",{onClick:()=>u(!c),className:"w-fit text-xs bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-t px-2 py-1 transition-colors flex items-center gap-1",children:[M.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:[M.j.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),M.j.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),c?"Hide SQL":"Show SQL"]}),M.j.jsx("div",{className:(0,M.t)("transition-all",c?"h-auto overflow-scroll":"h-0 overflow-hidden"),children:M.j.jsx(kp,{code:i,editable:!1,language:"sql"})})]})})]})]})}function TP({step:e}){let{function_name:t,inputs:n}=e;return M.j.jsxs("div",{className:"border p-4 rounded-md shadow-sm bg-white dark:bg-dark-bg-secondary dark:border-dark-border max-h-[600px] overflow-y-auto",children:[M.j.jsxs("h2",{className:"text-lg font-semibold mb-2 text-gray-800 dark:text-dark-text-primary",children:["Function: ",M.j.jsx("span",{className:"font-normal",children:t})]}),M.j.jsx("div",{className:"prose dark:prose-invert prose-sm max-w-none py-1",dangerouslySetInnerHTML:{__html:TN(Of.parse(n.thought))}})]})}let TR=`

------

`;function TI({apiEndpoint:e,token:t,reportId:n,onStreamClosed:r=()=>{},onDelete:i=()=>{}}){let[o,s]=(0,N.useState)([]),[a,l]=(0,N.useState)(!1),c=(0,N.useRef)(o);c.current=o;let u=(0,N.useContext)(M.a);return(0,N.useEffect)(()=>{let i=!1,o=new AbortController,a=(e,t=!1)=>{o.abort(),null==e||e.releaseLock(),l(!0),r(c.current,t)};return async function(){var r;try{let i=await fetch(`${e}/oracle/get_report_thinking_status?report_id=${n}`,{headers:{"X-Auth-Token":t},signal:o.signal});if(!i.ok){console.error("Stream request failed:",i.status),l(!0);return}let c=null==(r=i.body)?void 0:r.getReader();if(!c){console.error("No reader found on response body."),l(!0);return}let h=new TextDecoder("utf-8"),d="";for(;;){let{done:e,value:t}=await c.read();if(e){console.log("Stream ended from server.");break}let n=[];for(let e of(d+=h.decode(t,{stream:!0})).split(TR)){let t=e.replace("data:","").trim();if(t){if("Stream closed without errors"===t){console.log("[Stream Event] 'Stream closed' received."),a(c);return}if("Stream closed with errors"===t){a(c,!0);return}try{let e=JSON.parse(t);if(e.error){u.error("Could not generate report. Error: "+e.error),a(c,!0);return}Array.isArray(e)?n.push(...e):n.push(e)}catch(e){console.warn("Failed to parse SSE data:",e)}}}s(n)}l(!0)}catch(e){i||console.error("[Stream Error]",e),l(!0)}}(),()=>{i=!0,o.abort()}},[e,t,n]),M.j.jsxs("div",{className:"relative p-2 overflow-auto",children:[M.j.jsxs("div",{className:"flex flex-row w-full items-center mb-4 mt-4",children:[M.j.jsx("h1",{className:"text-xl font-bold grow dark:text-dark-text-primary",children:"Details"}),M.j.jsx(M.D,{variant:"danger",className:"self-end",onClick:i,children:"Delete"})]}),!a&&M.j.jsxs("div",{className:"w-full h-40 bg-white dark:bg-gray-800 rounded-md border flex items-center justify-center gap-2",children:[M.j.jsx(M.d,{classNames:"w-5 h-5 text-blue-500 animate-spin"}),M.j.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Creating SQL queries and searching the web to answer your question. I will show my thinking below. The report will automatically load when I am done thinking."})]}),M.j.jsx("div",{className:"w-full",children:o.filter(e=>{var t;return!("object"==typeof e.result&&null!=(t=e.result)&&t.error)}).reverse().map(e=>M.j.jsx("div",{className:"w-full md:w-1/2 p-2 inline-block align-top transition-all duration-500 ease-in-out",children:"text_to_sql_tool"===e.function_name?M.j.jsx(km,{step:e}):"web_search_tool"===e.function_name?M.j.jsx(T_,{step:e}):"pdf_citations_tool"===e.function_name?M.j.jsx(Tj,{step:e}):"code_interpreter_tool"===e.function_name?M.j.jsx(TD,{step:e}):"think_tool"===e.function_name?M.j.jsx(TP,{step:e}):null},e.id))})]})}var Tz=NaN,TL=/^\s+|\s+$/g,Tq=/^[-+]0x[0-9a-f]+$/i,T$=/^0b[01]+$/i,TB=/^0o[0-7]+$/i,TF=parseInt,TQ="object"==typeof _.w&&_.w&&_.w.Object===Object&&_.w,TV="object"==typeof self&&self&&self.Object===Object&&self,TH=TQ||TV||Function("return this")(),TU=Object.prototype.toString,TW=Math.max,TG=Math.min,TX=function(){return TH.Date.now()};function TY(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function TZ(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&"[object Symbol]"==TU.call(t))return Tz;if(TY(e)){var t,n="function"==typeof e.valueOf?e.valueOf():e;e=TY(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(TL,"");var r=T$.test(e);return r||TB.test(e)?TF(e.slice(2),r?2:8):Tq.test(e)?Tz:+e}let TK=(0,_.y)(function(e,t,n){var r,i,o,s,a,l,c=0,u=!1,h=!1,d=!0;if("function"!=typeof e)throw TypeError("Expected a function");function f(t){var n=r,o=i;return r=i=void 0,c=t,s=e.apply(o,n)}function p(e){var n=e-l,r=e-c;return void 0===l||n>=t||n<0||h&&r>=o}function m(){var e,n,r,i=TX();if(p(i))return g(i);a=setTimeout(m,(e=i-l,n=i-c,r=t-e,h?TG(r,o-n):r))}function g(e){return a=void 0,d&&r?f(e):(r=i=void 0,s)}function y(){var e,n=TX(),o=p(n);if(r=arguments,i=this,l=n,o){if(void 0===a)return c=e=l,a=setTimeout(m,t),u?f(e):s;if(h)return a=setTimeout(m,t),f(l)}return void 0===a&&(a=setTimeout(m,t)),s}return t=TZ(t)||0,TY(n)&&(u=!!n.leading,o=(h="maxWait"in n)?TW(TZ(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d),y.cancel=function(){void 0!==a&&clearTimeout(a),c=0,r=l=i=a=void 0},y.flush=function(){return void 0===a?s:g(TX())},y}),TJ={apiEndpoint:"https://demo.defog.ai",hiddenCharts:[],hideSqlTab:!1,hidePreviewTabs:!1,token:null,hideRawAnalysis:!0,analysisDataCache:{},updateConfig:()=>{}};function T0(e={}){let t=Object.assign({},TJ);return Object.keys(e).forEach(n=>{void 0!==e[n]&&(t[n]=e[n])}),t}let T1=(0,N.createContext)(Object.assign({},TJ)),T2=({type:e=null,message:t=null,svg:n=null,children:r=null,classNames:i})=>M.j.jsxs("div",{className:(0,M.t)("agent-loader",i),children:[n&&n,M.j.jsxs("div",{className:"w-full h-40 flex text-sm flex-col items-center justify-center dark:text-gray-300",children:[t,M.j.jsx(M.d,{classNames:"text-gray-400 dark:text-gray-500 mt-3 mx-0"})]}),"error"===e&&M.j.jsx("h2",{children:"ERROR"}),r&&M.j.jsx("div",{className:"searchState-child",children:r})]});function T4({questions:e,handleSubmit:t,globalLoading:n}){let r=(0,N.useRef)(e);return e?M.j.jsx("div",{className:"p-6 bg-transparent",children:M.j.jsxs("div",{className:"mb-4 text-sm text-gray-500 dark:text-gray-400",onKeyDown:e=>{"Enter"===e.key&&t({clarification_questions:r.current},"clarify")},children:[e.length?e.map((e,t)=>M.j.jsx("div",{className:"w-full",children:M.j.jsxs("div",{children:[M.j.jsx("p",{className:"q-desc m-0 mb-2 text-primary-text dark:text-gray-200",children:e.question}),M.j.jsx("div",{className:"w-full mb-4 min-w-64",children:M.j.jsx(M.N,{onChange:e=>{r.current[t].response=e.target.value},defaultValue:e.response,placeholder:"Your response. Leave blank if the question above is not relevant",inputClassNames:"ring-0 bg-transparent rounded-none border-b border-dotted border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:border-solid focus:ring-0 focus:border-b-primary-highlight shadow-none pl-0 w-full dark:text-gray-200"})})]})},e.question)):null,M.j.jsx("button",{className:"underline text-gray-400 dark:text-gray-500 text-sm mt-4 cursor-pointer hover:text-gray-600 dark:hover:text-gray-300",onClick:()=>t({clarification_questions:r.current},"clarify"),disabled:n,children:"Click here or press enter to submit"})]})}):M.j.jsx("div",{className:"agent-error",children:"Something went wrong, please retry or contact us if it fails again."})}let T5={config:{selectedChart:"bar",separator:"%%%%^^^%%%%",selectedColumns:{x:null,y:null,facet:null,fill:null,stroke:null,filter:null},chartStyle:{title:"",fontSize:12,backgroundColor:"transparent",xLabel:null,yLabel:null,xGrid:!1,yGrid:!0,xTicks:10,dateFormat:"%b %-d, %Y",yTicks:10,selectedScheme:"Tableau10",yAxisUnitLabel:""},chartSpecificOptions:{line:{lineWidth:3,curve:"linear",marker:!1,filter:null,groupBy:"",stroke:"",lineOptions:{},showLabels:!1,aggregateFunction:"sum",colorBy:null,colorByIsDate:!1},bar:{barWidth:.8,aggregateFunction:"sum",fill:null,barOptions:{},colorBy:null,colorByIsDate:!1},scatter:{pointColor:"#f54242",pointSize:3}},loading:!1,data:[],availableColumns:[]},mergeConfigUpdates:function(e){let t;return(e.selectedChart?"line"===e.selectedChart||"bar"===e.selectedChart:"line"===this.config.selectedChart||"bar"===this.config.selectedChart)?e.selectedColumns&&e.selectedColumns.y&&(Array.isArray(e.selectedColumns.y)||(e.selectedColumns.y=[e.selectedColumns.y])):e.selectedColumns&&e.selectedColumns.y&&Array.isArray(e.selectedColumns.y)&&e.selectedColumns.y.length>0&&(e.selectedColumns.y=e.selectedColumns.y[0]),e.selectedColumns&&this.setSelectedColumns(e.selectedColumns),this.config=function e(t,n){let r={...t};for(let i in n)"object"!=typeof n[i]||null===n[i]||Array.isArray(n[i])||void 0===t[i]?Array.isArray(n[i])?r[i]=n[i].slice():r[i]=n[i]:r[i]=e(t[i],n[i]);return r}(JSON.parse(JSON.stringify(this.config)),e),this},setConfigCallback:()=>{},clone:function(e=[]){let t={};for(let n in this.config)"function"!=typeof this.config[n]&&-1===e.indexOf(n)&&(t[n]=this.config[n]);return t},render:function(){this.setConfigCallback(this.config)},setSelectedChart:function(e){let t=this.config.selectedColumns;return this.config={...this.config,selectedChart:e,selectedColumns:{x:t.x,y:"line"===e||"bar"===e?Array.isArray(t.y)?t.y:t.y?[t.y]:[]:Array.isArray(t.y)&&t.y.length>0?t.y[0]:t.y,facet:t.facet,fill:t.fill,stroke:t.stroke,filter:t.filter},chartStyle:{...T5.config.chartStyle,xLabel:this.config.chartStyle.xLabel,yLabel:this.config.chartStyle.yLabel}},this},setSelectedColumns:function(e){let t,n;return e.x&&Array.isArray(e.x)&&(t=e.x,n=e.x.join(this.config.separator),e.x.length>1&&this.config.data.forEach(e=>(e[n]=t.map(t=>e[t]??"").join("-"),e)),e.x=n),this.config={...this.config,selectedColumns:{...this.config.selectedColumns,...e}},this},updateChartStyle:function(e){return this.config={...this.config,chartStyle:{...this.config.chartStyle,...e}},this},updateChartSpecificOptions:function(e){return this.config={...this.config,chartSpecificOptions:{...this.config.chartSpecificOptions,[this.config.selectedChart]:{...this.config.chartSpecificOptions[this.config.selectedChart],...e}}},this},setData:function(e){return this.config.data=e,this},setAvailableColumns:function(e){return this.config.availableColumns=e,this},autoSelectVariables:function(){var e,t,n,r,i,o;let{selectedChart:s,availableColumns:a}=this.config,l=a.find(e=>{let t=!0===e.isDate||"date"===e.colType,n=e.title&&/date|year|month|week|time/gi.test(e.title);return t||n}),c=a.filter(e=>"quantitative"===e.variableType),u=a.filter(e=>"quantitative"!==e.variableType&&!e.isDate),h=(null==(e=c[0])?void 0:e.key)||(null==(t=u[0])?void 0:t.key)||(null==(n=a[0])?void 0:n.key)||null,d=a.filter(e=>e.key!==h),f=d.filter(e=>"quantitative"!==e.variableType),p=d.filter(e=>"quantitative"===e.variableType),m=(null==l?void 0:l.key)||(null==(r=p[0])?void 0:r.key)||(null==(i=f[0])?void 0:i.key)||(null==(o=a[0])?void 0:o.key)||null;return this.config={...this.config,loading:!1,selectedColumns:{x:m,y:null===h?null:"line"===s||"bar"==s?[h]:h}},this},editChart:async function(e,t,n,r){var i,o,s;try{e&&t&&n&&null!=(i=this.config.availableColumns)&&i.length||(console.warn("Chart edit skipped - missing required fields:",{hasToken:!!e,hasQuestion:!!t,hasUrl:!!n,columnsLength:(null==(o=this.config.availableColumns)?void 0:o.length)||0}),this.autoSelectVariables()),this.mergeConfigUpdates({loading:!0}).render(),this.config.selectedColumns.x&&this.config.selectedColumns.y||this.autoSelectVariables();let r=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,user_request:t,current_chart_state:this.clone(["data","availableColumns"]),columns:this.config.availableColumns.map(e=>({title:e.title,col_type:e.colType||"string"}))})});if(!r.ok){console.warn("Chart edit request failed - continuing with auto-selection"),this.mergeConfigUpdates({loading:!1}).render();return}let s=await r.json();if(s.error||!s.success){console.warn("Chart edit response error:",s.error),this.mergeConfigUpdates({loading:!1}).render();return}let a=s.chart_state_edits;this.mergeConfigUpdates({...a,loading:!1}).render()}catch(e){console.error("Chart edit error:",e),this.mergeConfigUpdates({loading:!1}).render(),null==(s=null==r?void 0:r.onError)||s.call(r,e)}}};function T3(e={},t=()=>{}){let n=Object.assign({},T5);for(let t in e)void 0!==e[t]&&(n.config[t]=e[t]);return{...n,config:n.config,setConfigCallback:t}}let T6=(0,N.createContext)(T3()),T7={line:["date","quantitative","categorical"],bar:["categorical","quantitative","date"],scatter:["quantitative","date","categorical"]},T8=e=>e.isDate?"date":e.variableType,T9=(e,t)=>{let n=T7[t],r=T8(e),i=n.indexOf(r);return -1===i?n.length:i},Ae=(e,t)=>[...e].sort((e,n)=>T9(e,t)-T9(n,t)),At=[{value:"line",label:"Line",Icon:Q},{value:"bar",label:"Bar",Icon:F},{value:"scatter",label:"Scatter",Icon:H}];function An({selectedChart:e,onChartChange:t,hiddenCharts:n=[]}){let r=At.filter(e=>!n.includes(e.value));return M.j.jsxs("div",{children:[M.j.jsx("h3",{className:"mb-2 font-bold input-label",children:"Chart Type"}),M.j.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(({value:n,label:r,Icon:i})=>M.j.jsxs("button",{onClick:()=>t(n),className:`
                dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 
                hover:text-gray-800 dark:hover:text-gray-100 active:text-gray-800 dark:active:text-gray-100 
                agui-item agui-btn flex-row gap-1 active:brightness-[90%] p-2 rounded-sm min-w-20 border-[1px] 
                flex items-center justify-center font-semibold transition-colors duration-200 text-[11px] 
                font-sans ease-in-out
                ${e===n?"bg-blue-500/95 text-white border-0 shadow-sm hover:bg-blue-600":" bg-blue-100 text-blue-600/50 border-blue-200 hover:bg-blue-300"}
              `,children:[M.j.jsx(i,{size:16}),M.j.jsx("span",{children:r})]},n))})]})}function Ar({axis:e,columns:t,selectedValue:n,onAxisChange:r}){let i=t=>{if(document.activeElement===document.body&&!t.metaKey&&!t.ctrlKey&&!t.altKey&&!t.shiftKey){if("x"===e&&(0,M.ab)(t.key,M.a8.SET_X_AXIS)){t.preventDefault();let e=document.querySelector('div[data-axis="x"] input');null==e||e.focus()}if("y"===e&&(0,M.ab)(t.key,M.a8.SET_Y_AXIS)){t.preventDefault();let e=document.querySelector('div[data-axis="y"] input');null==e||e.focus()}}};return(0,N.useEffect)(()=>(window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)),[e]),M.j.jsx("div",{"data-axis":e,className:"dark:text-gray-200",children:M.j.jsx(M.P,{style:{width:"100%",minWidth:"100px"},value:Array.isArray(n)?n:(null==n?void 0:n.split("%%%%^^^%%%%"))??[],onChange:r,placeholder:`Select ${e.toUpperCase()} axis`,options:Array.isArray(t)?t.map(e=>({label:e.title,value:e.key})):null})})}let Ai=[{value:"count",label:"Count"},{value:"sum",label:"Sum"},{value:"mean",label:"Mean"}];function Ao({selectedChart:e,aggregateFunction:t,onAggregateChange:n,rootClassNames:r=""}){let i=Ai.filter(t=>"none"!==t.value||"line"!==e);return M.j.jsx(M.j.Fragment,{children:M.j.jsx("div",{className:"dark:text-gray-200",children:M.j.jsx(M.S,{allowClear:!1,rootClassNames:(0,M.t)("w-24",r),value:t||"sum",onChange:n,options:i.map(e=>({value:e.value,label:e.label}))})})})}let As=({columns:e})=>{let[t,n]=(0,N.useState)([]),r=(0,N.useContext)(T6),i=(0,N.useRef)(null),o=(0,N.useCallback)(t=>{let n=t.length?n=>t.every(({column:t,operator:r,value:i,isValid:o})=>{if(!o||!t||!r||""===i)return!0;let s=e.find(e=>e.dataIndex===t),a=n[t];return({"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,">":(e,t)=>e>t,"<":(e,t)=>e<t,">=":(e,t)=>e>=t,"<=":(e,t)=>e<=t,in:(e,t)=>t.split(",").map(e=>e.trim().toLowerCase()).includes(e),"not in":(e,t)=>!t.split(",").map(e=>e.trim().toLowerCase()).includes(e),contains:(e,t)=>e.includes(t),"starts with":(e,t)=>e.startsWith(t),"ends with":(e,t)=>e.endsWith(t),between:(e,t)=>{let[n,r]=t.split(",").map(Number);return e>=n&&e<=r}})[r]("categorical"===s.variableType&&"string"==typeof a?a.toLowerCase():a,"categorical"===s.variableType&&"string"==typeof i?i.toLowerCase():i)}):null;r.updateChartSpecificOptions({filter:n}).render()},[r.config,e]),s=(0,N.useCallback)((...e)=>{i.current&&clearTimeout(i.current),i.current=setTimeout(()=>o(...e),200)},[o]);(0,N.useEffect)(()=>{let e=Object.values(r.config.selectedColumns||{}).flat(),i=t.map(t=>({...t,isValid:t.column&&(e.includes(t.column)||""===t.column)}));JSON.stringify(i)!==JSON.stringify(t)&&(n(i),s(i))},[r.config.selectedColumns,t,s]);let a=e=>{let r=t.filter((t,n)=>n!==e);n(r),o(r)},l=(r,i,a)=>{let l=[...t];if("column"===i){let t=e.find(e=>e.dataIndex===a);l[r][i]=t?a:""}else l[r][i]=a;n(l),"column"===i||"operator"===i?o(l):s(l)},c=e=>{let t=["==","!="];return"categorical"===e.variableType?[...t,"in","not in","contains","starts with","ends with"]:"quantitative"===e.variableType||"integer"===e.variableType?[...t,">","<",">=","<=","between"]:t},u={quantitative:ee,categorical:$},h=e=>{let t=u[e.variableType];return{label:M.j.jsxs("div",{className:"flex items-center gap-2",children:[t&&M.j.jsx(t,{className:"opacity-50",size:14}),M.j.jsx("span",{children:e.title})]}),value:e.dataIndex}},d=(e,t,n)=>{let r={className:"w-full",placeholder:"Value",value:e.value,onChange:e=>l(t,"value",e.target.value)};if("between"===e.operator){let[n,i]=e.value.split(",");return M.j.jsxs("div",{className:"flex gap-2",children:[M.j.jsx(M.V,{...r,type:"number",className:"w-1/2",placeholder:"From",value:n||"",onChange:e=>l(t,"value",`${e.target.value},${i||""}`)}),M.j.jsx(M.V,{...r,type:"number",className:"w-1/2",placeholder:"To",value:i||"",onChange:e=>l(t,"value",`${n||""},${e.target.value}`)})]})}return M.j.jsx(M.V,{...r,size:"small",autoResize:"quantitative"!==n.variableType,type:"quantitative"===n.variableType?"number":"text",placeholder:["in","not in"].includes(e.operator)?"Comma-separated values":"Value"})};return M.j.jsxs("div",{className:"space-y-4",children:[M.j.jsxs("div",{className:"space-y-1.5",children:[M.j.jsx("label",{className:"flex items-center gap-2 text-xs font-medium text-gray-700",children:M.j.jsx("span",{className:"flex items-center gap-2",children:"Filters"})}),M.j.jsx("p",{className:"text-xs text-gray-500",children:"Filter data based on selected columns"})]}),M.j.jsx("div",{className:"space-y-2",children:t.map((t,n)=>{let r=e.find(e=>e.dataIndex===t.column),i=r?u[r.variableType]:null;return M.j.jsxs("div",{className:"p-2 space-y-2 border border-gray-200 rounded-md bg-gray-50",children:[M.j.jsxs("div",{className:"flex items-center justify-between",children:[M.j.jsxs("div",{className:"flex items-center gap-2",children:[i&&M.j.jsx(i,{className:"text-gray-400",size:13}),M.j.jsxs("span",{className:"text-xs font-medium text-gray-700",children:["Filter ",n+1]})]}),M.j.jsx(M.D,{variant:"ghost",size:"xs",icon:M.j.jsx(ep,{className:"w-3 h-3"}),onClick:()=>a(n)})]}),M.j.jsxs("div",{className:"space-y-2",children:[M.j.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[M.j.jsx(M.S,{value:t.column,onChange:e=>l(n,"column",e),placeholder:"Select column",options:e.filter(e=>e.dataIndex===t.column||"date"!==e.colType).map(h),allowClear:!0}),M.j.jsx(M.S,{value:t.operator,disabled:!t.isValid||!t.column,onChange:e=>l(n,"operator",e),placeholder:"Select operator",options:r?c(r).map(e=>({label:e,value:e})):[]})]}),r&&d(t,n,r)]}),!t.isValid&&M.j.jsx("div",{className:"text-xs text-red-500",children:"Filter may be outdated and not apply to the chart."})]},n)})}),M.j.jsx(M.D,{onClick:()=>{n([...t,{column:"",operator:"==",value:"",isValid:!0}])},type:"default",className:"flex items-center justify-center w-full gap-2 mt-4 text-sm font-medium text-gray-700 border-gray-200 h-9 bg-gray-50 hover:bg-gray-100",icon:M.j.jsx(W,{className:"w-4 h-4"}),children:"Add Filter"})]})},Aa={date:q,quantitative:ee,categorical:$};function Al({columns:e,showChartTypeOnly:t=!1}){let n=(0,N.useContext)(T6),{selectedChart:r,selectedColumns:i,chartSpecificOptions:o}=n.config,[s,a]=(0,N.useState)(e),{hiddenCharts:l=[]}=(0,N.useContext)(T1),[c,u]=(0,N.useState)(!1);(0,N.useEffect)(()=>{n.setAvailableColumns(e).render(),a(Ae(e,r))},[e,r]);let h=(0,N.useCallback)(t=>o=>{if(n.setSelectedColumns({...i,[t]:o}),("bar"===r||"line"==r)&&"y"===t){let t=e.find(e=>e.key===o);t&&"categorical"===t.variableType?n.updateChartSpecificOptions({useCount:!0}):n.updateChartSpecificOptions({useCount:!1})}"y"===t&&n.updateChartSpecificOptions({colorBy:null,colorByIsDate:!1}),n.render()},[n,i,r,e]),d=({key:e,isDate:t,variableType:n})=>{let r=Aa[t?"date":n];return{label:M.j.jsxs("span",{children:[r&&M.j.jsx(M.j.Fragment,{children:M.j.jsx(r,{className:"inline-block mr-1 text-gray-400",size:13})}),e]}),value:e}};return t?M.j.jsx("div",{className:"flex mr-4 gap-1.5",children:M.j.jsx(An,{selectedChart:r,onChartChange:e=>{n.setSelectedChart(e).updateChartStyle({xLabel:null,yLabel:null}).autoSelectVariables().render()},hiddenCharts:l})}):M.j.jsxs("div",{className:"grid grid-rows-[auto_1fr_auto] max-h-[550px] overflow-y-auto h-full",children:[M.j.jsxs("div",{className:"space-y-6",children:[M.j.jsxs("div",{className:"space-y-4",children:[M.j.jsxs("div",{className:"space-y-1.5",children:[M.j.jsxs("div",{className:"flex items-center justify-between",children:[M.j.jsxs("label",{className:"flex items-center gap-2 text-xs font-medium text-gray-700 dark:text-gray-300",children:[M.j.jsx(M.a2,{keyValue:M.a8.SET_X_AXIS,className:"px-1 py-0.5 text-xs font-bold text-gray-500"}),M.j.jsx("span",{className:"flex items-center gap-2",children:"Horizontal Axis"})]}),M.j.jsx(Ao,{selectedChart:r,aggregateFunction:o[r].aggregateFunction||"sum",onAggregateChange:t=>{let s=null,a=!1;"bar"===r&&"none"===t&&e.length>0&&i.y.length<=1?(s=o[r].colorBy||e[0].dataIndex,a=e.find(e=>e.key===s).isDate):(s=null,a=!1),n.updateChartSpecificOptions({aggregateFunction:t||"sum",colorBy:s,colorByIsDate:a}).render()},className:"w-12"})]}),M.j.jsx(Ar,{axis:"x",columns:s,selectedValue:i.x,onAxisChange:h("x")})]}),M.j.jsxs("div",{className:"space-y-1.5",children:[M.j.jsxs("label",{className:"flex items-center gap-2 text-xs font-medium text-gray-700 dark:text-gray-300",children:[M.j.jsx(M.a2,{keyValue:M.a8.SET_Y_AXIS,className:"px-1 py-0.5 text-xs font-bold text-gray-500"}),M.j.jsx("span",{className:"flex items-center gap-2",children:"Vertical Axis"})]}),M.j.jsx(Ar,{axis:"y",columns:s,selectedValue:i.y,onAxisChange:h("y")})]})]}),"bar"!==r&&M.j.jsx("div",{className:"pt-4 space-y-2 border-t border-gray-100 dark:border-gray-700",children:M.j.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[M.j.jsxs("div",{className:"space-y-1.5",children:[M.j.jsx("h3",{className:"mb-2 font-medium input-label dark:text-gray-300",children:"Facet by"}),M.j.jsx(M.S,{style:{width:"100%"},placeholder:"Select Facet Column",onChange:e=>h("facet")(e),value:i.facet,allowClear:!0,options:s.map(d)})]}),M.j.jsxs("div",{className:"space-y-1.5",children:[M.j.jsx("h3",{className:"mb-2 font-medium input-label dark:text-gray-300",children:"Color By"}),M.j.jsx(M.S,{placeholder:"Color Column",value:i.fill,style:{width:"100%"},onChange:t=>{let r=(e.find(e=>e.key===t)||{}).isDate||!1;n.updateChartSpecificOptions({colorBy:t,colorByIsDate:r}).render()},disabled:i.y.length>1&&"line"===r,allowClear:!0,options:s.map(d)})]})]})})]}),M.j.jsxs(M.D,{block:!0,type:"default",onClick:()=>u(!c),className:"flex items-center justify-center gap-2 mt-4 text-sm font-medium text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-700 h-9 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700",children:[M.j.jsx(ea,{className:"w-4 h-4"}),"Advanced Options"]}),c&&M.j.jsx("div",{className:"pt-4 mt-4 border-t border-gray-100 dark:border-gray-700",children:M.j.jsx(As,{columns:e})})]})}let Ac=()=>{let e=(0,N.useContext)(T6),{selectedColumns:t,chartSpecificOptions:n}=e.config,r=(t,n)=>{e.updateChartSpecificOptions({[t]:n}).render()},i=(t,r,i)=>{let o={...n.line.lineOptions||{}};o[t]={...o[t],[r]:i},e.updateChartSpecificOptions({lineOptions:o}).render()};return M.j.jsxs("div",{className:"space-y-6",children:[M.j.jsx("div",{className:"space-y-4",children:M.j.jsx("div",{children:M.j.jsx("div",{className:"mt-2 space-y-4",children:M.j.jsxs("div",{children:[M.j.jsx("h3",{className:"mb-2 input-label dark:text-gray-300",children:"Line Width"}),M.j.jsx(M.U,{min:1,max:10,value:n.line.lineWidth||2,onChange:e=>r("lineWidth",e),rootClassNames:"w-full h-2"})]})})})}),Array.isArray(t.y)&&t.y.length>0&&M.j.jsx("div",{className:"space-y-4",children:M.j.jsx("div",{className:"grid gap-3",children:t.y.map(e=>{var t,r,o,s;return M.j.jsxs("div",{className:"flex items-center justify-between w-full gap-3 border-gray-100 dark:border-gray-700 rounded-sm bg-gray-50/20 dark:bg-gray-700/20",children:[M.j.jsx("h4",{className:"mb-2 font-mono text-xs font-bold text-gray-600 dark:text-gray-300",children:e}),M.j.jsx("div",{className:"w-full space-y-3",children:M.j.jsx(M.a0,{allowClear:!0,value:(null==(o=null==(r=null==(t=n.line)?void 0:t.lineOptions)?void 0:r[e])?void 0:o.stroke)||(null==(s=n.line)?void 0:s.pointColor)||"#4e79a7",onChange:t=>i(e,"stroke",t.cleared?null:t.toHexString())})})]},e)})})})]})},Au=()=>{var e;let t=(0,N.useContext)(T6),{chartSpecificOptions:n}=t.config,r=(e,n)=>{t.updateChartSpecificOptions({[e]:n}).render()};return M.j.jsxs("div",{className:"flex flex-col gap-4 text-xs",children:[!t.config.selectedColumns.fill&&M.j.jsxs("div",{children:[M.j.jsx("h3",{className:"mb-2 dark:text-gray-300",children:"Override dot color"}),M.j.jsx(M.a0,{value:(null==(e=n.scatter)?void 0:e.pointColor)||"#4e79a7",onChange:e=>r("pointColor",e.cleared?null:e.toHexString())})]}),M.j.jsxs("div",{children:[M.j.jsx("h3",{className:"mb-2 dark:text-gray-300",children:"Point Size"}),M.j.jsx(M.U,{min:1,max:20,value:n.scatter.pointSize,onChange:e=>r("pointSize",e)})]})]})},Ah=()=>{let e=(0,N.useContext)(T6),{chartSpecificOptions:t,selectedColumns:n}=e.config,r=(n,r,i)=>{let o={...t.bar.barOptions||{}};o[n]={...o[n],[r]:i},e.updateChartSpecificOptions({barOptions:o}).render()};return M.j.jsx("div",{className:"flex flex-col gap-4 text-xs",children:M.j.jsxs("div",{className:"flex flex-col gap-2",children:[M.j.jsx("span",{className:"block mb-1 dark:text-gray-300",children:"Bar color"}),M.j.jsx("div",{className:"flex flex-row flex-wrap gap-4",children:Array.isArray(n.y)&&n.y.map(e=>{var n,i,o;return M.j.jsxs("div",{className:"",children:[M.j.jsx("h4",{className:"mb-2 font-bold dark:text-gray-300",children:`${e}`}),M.j.jsx("div",{className:"mb-2",children:M.j.jsx(M.a0,{allowClear:!0,value:(null==(o=null==(i=null==(n=t.bar)?void 0:n.barOptions)?void 0:i[e])?void 0:o.fill)||"#4e79a7",onChange:t=>r(e,"fill",t.cleared?null:t.toHexString())})})]},e)})})]})})};function Ad(){let e=(0,N.useContext)(T6),{selectedChart:t,chartStyle:n}=e.config,r=(t,n)=>{e.updateChartStyle({[t]:n}).render()};return M.j.jsx("div",{className:"grid grid-rows-[auto_1fr] max-h-[550px] overflow-x-clip overflow-y-auto h-full",children:M.j.jsxs("div",{className:"space-y-6",children:[M.j.jsxs("div",{className:"space-y-1.5",children:[M.j.jsx("h3",{className:"input-label dark:text-gray-300",children:"Background Color"}),M.j.jsx(M.a0,{allowClear:!0,value:n.backgroundColor||"#ffffff",onChange:e=>r("backgroundColor",e.cleared?null:e.toHexString())})]}),M.j.jsx("div",{className:"space-y-4",children:M.j.jsx("div",{className:"space-y-4",children:(()=>{switch(t){case"line":return M.j.jsx(Ac,{});case"bar":return M.j.jsx(Ah,{});case"scatter":return M.j.jsx(Au,{});default:return null}})()})}),M.j.jsx("div",{className:"space-y-4"})]})})}var Af={exports:{}};!function(e,t){var n;_.w,e.exports=function(e,t,n){var r=function(e,t){if(!t||!t.length||1===t.length&&!t[0]||1===t.length&&Array.isArray(t[0])&&!t[0].length)return null;1===t.length&&t[0].length>0&&(t=t[0]),n=(t=t.filter(function(e){return e}))[0];for(var n,r=1;r<t.length;r+=1)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n};n.max=function(){var e=[].slice.call(arguments,0);return r("isAfter",e)},n.min=function(){var e=[].slice.call(arguments,0);return r("isBefore",e)}}}(Af);var Ap=Af.exports;let Am=(0,_.y)(Ap),Ag=(()=>{let e=0,t=()=>`0000${(1679616*Math.random()<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function Ay(e){let t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}let Ab=null;function Av(e={}){return Ab||(Ab=e.includeStyleProperties?e.includeStyleProperties:Ay(window.getComputedStyle(document.documentElement)))}function Ax(e,t){let n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function Aw(e,t={}){return{width:t.width||function(e){let t=Ax(e,"border-left-width"),n=Ax(e,"border-right-width");return e.clientWidth+t+n}(e),height:t.height||function(e){let t=Ax(e,"border-top-width"),n=Ax(e,"border-bottom-width");return e.clientHeight+t+n}(e)}}function Ak(e){return new Promise((t,n)=>{let r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>t(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=e})}async function AO(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function AS(e,t,n){let r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),o=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${t}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${t} ${n}`),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("externalResourcesRequired","true"),i.appendChild(o),o.appendChild(e),AO(i)}let AC=(e,t)=>{if(e instanceof t)return!0;let n=Object.getPrototypeOf(e);return null!==n&&(n.constructor.name===t.name||AC(n,t))};function AT(e,t,n,r){let i=window.getComputedStyle(e,n),o=i.getPropertyValue("content");if(""===o||"none"===o)return;let s=Ag();try{t.className=`${t.className} ${s}`}catch{return}let a=document.createElement("style");a.appendChild(function(e,t,n,r){let i=`.${e}:${t}`,o=n.cssText?function(e){let t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}(n):Av(r).map(e=>{let t=n.getPropertyValue(e),r=n.getPropertyPriority(e);return`${e}: ${t}${r?" !important":""};`}).join(" ");return document.createTextNode(`${i}{${o}}`)}(s,n,i,r)),t.appendChild(a)}let AA="application/font-woff",AE="image/jpeg",AM={woff:AA,woff2:AA,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:AE,jpeg:AE,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function AN(e){return AM[(function(e){let t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""})(e).toLowerCase()]||""}function A_(e){return -1!==e.search(/^(data:)/)}async function Aj(e,t,n){let r=await fetch(e,t);if(404===r.status)throw Error(`Resource "${r.url}" not found`);let i=await r.blob();return new Promise((e,t)=>{let o=new FileReader;o.onerror=t,o.onloadend=()=>{try{e(n({res:r,result:o.result}))}catch(e){t(e)}},o.readAsDataURL(i)})}let AD={};async function AP(e,t,n){var r,i,o,s,a;let l,c;let u=(r=e,i=t,o=n.includeQueryParams,c=r.replace(/\?.*/,""),o&&(c=r),/ttf|otf|eot|woff2?/i.test(c)&&(c=c.replace(/.*\//,"")),i?`[${i}]${c}`:c);if(null!=AD[u])return AD[u];n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());try{s=await Aj(e,n.fetchRequestInit,({res:e,result:n})=>(t||(t=e.headers.get("Content-Type")||""),n.split(/,/)[1])),a=t,l=`data:${a};base64,${s}`}catch(r){l=n.imagePlaceholder||"";let t=`Failed to fetch resource: ${e}`;r&&(t="string"==typeof r?r:r.message),t&&console.warn(t)}return AD[u]=l,l}async function AR(e){let t=e.toDataURL();return"data:,"===t?e.cloneNode(!1):Ak(t)}async function AI(e,t){if(e.currentSrc){let t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.clientWidth,t.height=e.clientHeight,null==n||n.drawImage(e,0,0,t.width,t.height),Ak(t.toDataURL())}let n=e.poster,r=AN(n);return Ak(await AP(n,r,t))}async function Az(e,t){var n;try{if(null!==(n=null==e?void 0:e.contentDocument)&&void 0!==n&&n.body)return await AQ(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function AL(e,t){return AC(e,HTMLCanvasElement)?AR(e):AC(e,HTMLVideoElement)?AI(e,t):AC(e,HTMLIFrameElement)?Az(e,t):e.cloneNode(A$(e))}let Aq=e=>null!=e.tagName&&"SLOT"===e.tagName.toUpperCase(),A$=e=>null!=e.tagName&&"SVG"===e.tagName.toUpperCase();async function AB(e,t,n){var r,i;if(A$(t))return t;let o=[];return 0===(o=Aq(e)&&e.assignedNodes?Ay(e.assignedNodes()):AC(e,HTMLIFrameElement)&&null!==(r=e.contentDocument)&&void 0!==r&&r.body?Ay(e.contentDocument.body.childNodes):Ay((null!==(i=e.shadowRoot)&&void 0!==i?i:e).childNodes)).length||AC(e,HTMLVideoElement)||await o.reduce((e,r)=>e.then(()=>AQ(r,n)).then(e=>{e&&t.appendChild(e)}),Promise.resolve()),t}async function AF(e,t){let n=e.querySelectorAll?e.querySelectorAll("use"):[];if(0===n.length)return e;let r={};for(let i=0;i<n.length;i++){let o=n[i].getAttribute("xlink:href");if(o){let n=e.querySelector(o),i=document.querySelector(o);n||!i||r[o]||(r[o]=await AQ(i,t,!0))}}let i=Object.values(r);if(i.length){let t="http://www.w3.org/1999/xhtml",n=document.createElementNS(t,"svg");n.setAttribute("xmlns",t),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";let r=document.createElementNS(t,"defs");n.appendChild(r);for(let e=0;e<i.length;e++)r.appendChild(i[e]);e.appendChild(n)}return e}async function AQ(e,t,n){return n||!t.filter||t.filter(e)?Promise.resolve(e).then(e=>AL(e,t)).then(n=>AB(e,n,t)).then(n=>(AC(n,Element)&&(function(e,t,n){let r=t.style;if(!r)return;let i=window.getComputedStyle(e);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):Av(n).forEach(n=>{let o=i.getPropertyValue(n);"font-size"===n&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),AC(e,HTMLIFrameElement)&&"display"===n&&"inline"===o&&(o="block"),"d"===n&&t.getAttribute("d")&&(o=`path(${t.getAttribute("d")})`),r.setProperty(n,o,i.getPropertyPriority(n))})}(e,n,t),AT(e,n,":before",t),AT(e,n,":after",t),AC(e,HTMLTextAreaElement)&&(n.innerHTML=e.value),AC(e,HTMLInputElement)&&n.setAttribute("value",e.value),function(e,t){if(AC(e,HTMLSelectElement)){let n=Array.from(t.children).find(t=>e.value===t.getAttribute("value"));n&&n.setAttribute("selected","")}}(e,n)),n)).then(e=>AF(e,t)):null}let AV=/url\((['"]?)([^'"]+?)\1\)/g,AH=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,AU=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;async function AW(e,t,n,r,i){try{let o;let s=n?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;let n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),t&&(r.href=t),i.href=e,i.href}(t,n):t,a=AN(t);return i||(o=await AP(s,a,r)),e.replace(function(e){let t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}(t),`$1${o}$3`)}catch{}return e}function AG(e){return -1!==e.search(AV)}async function AX(e,t,n){if(!AG(e))return e;let r=function(e,{preferredFontFormat:t}){return t?e.replace(AU,e=>{for(;;){let[n,,r]=AH.exec(e)||[];if(!r)return"";if(r===t)return`src: ${n};`}}):e}(e,n);return(function(e){let t=[];return e.replace(AV,(e,n,r)=>(t.push(r),e)),t.filter(e=>!A_(e))})(r).reduce((e,r)=>e.then(e=>AW(e,r,t,n)),Promise.resolve(r))}async function AY(e,t,n){var r;let i=null===(r=t.style)||void 0===r?void 0:r.getPropertyValue(e);if(i){let r=await AX(i,null,n);return t.style.setProperty(e,r,t.style.getPropertyPriority(e)),!0}return!1}async function AZ(e,t){await AY("background",e,t)||await AY("background-image",e,t),await AY("mask",e,t)||await AY("-webkit-mask",e,t)||await AY("mask-image",e,t)||await AY("-webkit-mask-image",e,t)}async function AK(e,t){let n=AC(e,HTMLImageElement);if(!(n&&!A_(e.src))&&!(AC(e,SVGImageElement)&&!A_(e.href.baseVal)))return;let r=n?e.src:e.href.baseVal,i=await AP(r,AN(r),t);await new Promise((r,o)=>{e.onload=r,e.onerror=t.onImageErrorHandler?(...e)=>{try{r(t.onImageErrorHandler(...e))}catch(e){o(e)}}:o,e.decode&&(e.decode=r),"lazy"===e.loading&&(e.loading="eager"),n?(e.srcset="",e.src=i):e.href.baseVal=i})}async function AJ(e,t){let n=Ay(e.childNodes).map(e=>A0(e,t));await Promise.all(n).then(()=>e)}async function A0(e,t){AC(e,Element)&&(await AZ(e,t),await AK(e,t),await AJ(e,t))}let A1={};async function A2(e){let t=A1[e];if(null!=t)return t;let n=await (await fetch(e)).text();return t={url:e,cssText:n},A1[e]=t,t}async function A4(e,t){let n=e.cssText,r=/url\(["']?([^"')]+)["']?\)/g;return Promise.all((n.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(r,"$1");return o.startsWith("https://")||(o=new URL(o,e.url).href),Aj(o,t.fetchRequestInit,({result:e})=>(n=n.replace(i,`url(${e})`),[i,e]))})).then(()=>n)}function A5(e){if(null==e)return[];let t=[],n=e.replace(/(\/\*[\s\S]*?\*\/)/gi,""),r=RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){let e=r.exec(n);if(null===e)break;t.push(e[0])}n=n.replace(r,"");let i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o=RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let e=i.exec(n);if(null===e){if(null===(e=o.exec(n)))break;i.lastIndex=o.lastIndex}else o.lastIndex=i.lastIndex;t.push(e[0])}return t}async function A3(e,t){let n=[],r=[];return e.forEach(n=>{if("cssRules"in n)try{Ay(n.cssRules||[]).forEach((e,i)=>{if(e.type===CSSRule.IMPORT_RULE){let o=i+1,s=e.href,a=A2(s).then(e=>A4(e,t)).then(e=>A5(e).forEach(e=>{try{n.insertRule(e,e.startsWith("@import")?o+=1:n.cssRules.length)}catch(t){console.error("Error inserting rule from remote css",{rule:e,error:t})}})).catch(e=>{console.error("Error loading remote css",e.toString())});r.push(a)}})}catch(o){let i=e.find(e=>null==e.href)||document.styleSheets[0];null!=n.href&&r.push(A2(n.href).then(e=>A4(e,t)).then(e=>A5(e).forEach(e=>{i.insertRule(e,i.cssRules.length)})).catch(e=>{console.error("Error loading remote stylesheet",e)})),console.error("Error inlining remote css file",o)}}),Promise.all(r).then(()=>(e.forEach(e=>{if("cssRules"in e)try{Ay(e.cssRules||[]).forEach(e=>{n.push(e)})}catch(t){console.error(`Error while reading CSS rules from ${e.href}`,t)}}),n))}async function A6(e,t){if(null==e.ownerDocument)throw Error("Provided element is not within a Document");let n=Ay(e.ownerDocument.styleSheets);return(await A3(n,t)).filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>AG(e.style.getPropertyValue("src")))}function A7(e){return e.trim().replace(/["']/g,"")}async function A8(e,t){let n=await A6(e,t),r=function(e){let t=new Set;return function e(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(e=>{t.add(A7(e))}),Array.from(n.children).forEach(t=>{t instanceof HTMLElement&&e(t)})}(e),t}(e);return(await Promise.all(n.filter(e=>r.has(A7(e.style.fontFamily))).map(e=>{let n=e.parentStyleSheet?e.parentStyleSheet.href:null;return AX(e.cssText,n,t)}))).join(`
`)}async function A9(e,t){let n=null!=t.fontEmbedCSS?t.fontEmbedCSS:t.skipFonts?null:await A8(e,t);if(n){let t=document.createElement("style"),r=document.createTextNode(n);t.appendChild(r),e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}}async function Ee(e,t={}){let{width:n,height:r}=Aw(e,t),i=await AQ(e,t,!0);return await A9(i,t),await A0(i,t),function(e,t){let{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);let r=t.style;null!=r&&Object.keys(r).forEach(e=>{n[e]=r[e]})}(i,t),await AS(i,n,r)}async function Et(e,t={}){let{width:n,height:r}=Aw(e,t),i=await Ee(e,t),o=await Ak(i),s=document.createElement("canvas"),a=s.getContext("2d"),l=t.pixelRatio||function(){let e,t;try{t=D}catch{}let n=t&&t.env?t.env.devicePixelRatio:null;return n&&Number.isNaN(e=parseInt(n,10))&&(e=1),e||window.devicePixelRatio||1}(),c=t.canvasWidth||n,u=t.canvasHeight||r;return s.width=c*l,s.height=u*l,t.skipAutoScale||(s.width>16384||s.height>16384)&&(s.width>16384&&s.height>16384?s.width>s.height?(s.height*=16384/s.width,s.width=16384):(s.width*=16384/s.height,s.height=16384):s.width>16384?(s.height*=16384/s.width,s.width=16384):(s.width*=16384/s.height,s.height=16384)),s.style.width=`${c}`,s.style.height=`${u}`,t.backgroundColor&&(a.fillStyle=t.backgroundColor,a.fillRect(0,0,s.width,s.height)),a.drawImage(o,0,0,s.width,s.height),s}async function En(e,t={}){return(await Et(e,t)).toDataURL()}function Er(e){return null!=e&&!Number.isNaN(e)}function Ei(e,t){return+Er(t)-+Er(e)||(0,M.a3)(e,t)}function Eo(e,t){return+Er(t)-+Er(e)||(0,M.ac)(e,t)}function Es(e){return null!=e&&""!=`${e}`}function Ea(e){return isFinite(e)?e:NaN}function El(e){return e>0&&isFinite(e)?e:NaN}function Ec(e){return e<0&&isFinite(e)?e:NaN}function Eu(e,t){return`${e}`.padStart(t,"0")}let Eh=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function Ed(e,t){return Eh.test(e+="")?new Date(e):t}function Ef(e){if(null==e)return;let t=e[0],n=e[e.length-1];return(0,M.ac)(t,n)}let Ep=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",1e3],["5 seconds",5e3],["15 seconds",15e3],["30 seconds",3e4],["minute",6e4],["5 minutes",3e5],["15 minutes",9e5],["30 minutes",18e5],["hour",36e5],["3 hours",108e5],["6 hours",216e5],["12 hours",432e5],["day",864e5],["2 days",1728e5],["week",6048e5],["2 weeks",12096e5],["month",2592e6],["3 months",7776e6],["6 months",15552e6],["year",31536e6],["2 years",63072e6],["5 years",15768e7],["10 years",31536e7],["20 years",63072e7],["50 years",15768e8],["100 years",31536e8]],Em=new Map([["second",1e3],["minute",6e4],["hour",36e5],["day",864e5],["monday",6048e5],["tuesday",6048e5],["wednesday",6048e5],["thursday",6048e5],["friday",6048e5],["saturday",6048e5],["sunday",6048e5],["week",6048e5],["month",2592e6],["year",31536e6]]),Eg=new Map([["second",ss],["minute",sa],["hour",sc],["day",sh],["monday",sg],["tuesday",sy],["wednesday",sb],["thursday",sv],["friday",sx],["saturday",sw],["sunday",sm],["week",sm],["month",sN],["year",sj]]),Ey=new Map([["second",ss],["minute",sl],["hour",su],["day",sf],["monday",sS],["tuesday",sC],["wednesday",sT],["thursday",sA],["friday",sE],["saturday",sM],["sunday",sO],["week",sO],["month",s_],["year",sD]]),Eb=Symbol("intervalDuration"),Ev=Symbol("intervalType");for(let[e,t]of Eg)t[Eb]=Em.get(e),t[Ev]="time";for(let[e,t]of Ey)t[Eb]=Em.get(e),t[Ev]="utc";let Ex=[["year",sD,"utc"],["month",s_,"utc"],["day",sf,"utc",15552e6],["hour",su,"utc",2592e5],["minute",sl,"utc",216e5],["second",ss,"utc",18e5]],Ew=[["year",sj,"time"],["month",sN,"time"],["day",sh,"time",15552e6],["hour",sc,"time",2592e5],["minute",sa,"time",216e5],["second",ss,"time",18e5]],Ek=[Ex[0],Ew[0],Ex[1],Ew[1],Ex[2],Ew[2],...Ex.slice(3)];function EO(e){let t=`${e}`.toLowerCase();t.endsWith("s")&&(t=t.slice(0,-1));let n=1,r=/^(?:(\d+)\s+)/.exec(t);switch(r&&(t=t.slice(r[0].length),n=+r[1]),t){case"quarter":t="month",n*=3;break;case"half":t="month",n*=6}let i=Ey.get(t);if(!i)throw Error(`unknown interval: ${e}`);if(n>1&&!i.every)throw Error(`non-periodic interval: ${t}`);return[t,n]}function ES(e){return ET(EO(e),"time")}function EC(e){return ET(EO(e),"utc")}function ET([e,t],n){let r=("time"===n?Eg:Ey).get(e);return t>1&&((r=r.every(t))[Eb]=Em.get(e)*t,r[Ev]=n),r}function EA(e,t){if(!(t>1))return;let n=e[Eb];if(!Ep.some(([,e])=>e===n)||n%864e5==0&&864e5<n&&n<2592e6)return;let[r]=Ep[(0,M.a7)(([,e])=>Math.log(e)).center(Ep,Math.log(n*t))];return("time"===e[Ev]?ES:EC)(r)}function EE(e,t,n){var r;let i="time"===t?d:f;if(null==n)return i("year"===e?"%Y":"month"===e?"%Y-%m":"day"===e?"%Y-%m-%d":"hour"===e||"minute"===e?"%Y-%m-%dT%H:%M":"second"===e?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");let o="left"===(r=n)||"right"===r?(e,t)=>`
${e}
${t}`:"top"===r?(e,t)=>`${t}
${e}`:(e,t)=>`${e}
${t}`;switch(e){case"millisecond":return EM(i(".%L"),i(":%M:%S"),o);case"second":return EM(i(":%S"),i("%-I:%M"),o);case"minute":return EM(i("%-I:%M"),i("%p"),o);case"hour":return EM(i("%-I %p"),i("%b %-d"),o);case"day":return EM(i("%-d"),i("%b"),o);case"month":return EM(i("%b"),i("%Y"),o);case"year":return i("%Y")}throw Error("unable to format time ticks")}function EM(e,t,n){return(r,i,o)=>{let s=e(r,i),a=t(r,i),l=i-Ef(o);return i!==l&&void 0!==o[l]&&a===t(o[l],l)?s:n(s,a)}}let EN=Object.getPrototypeOf(Uint8Array),E_=Object.prototype.toString;function Ej(e){return e instanceof Array||e instanceof EN}function ED(e){var t;return e instanceof EN&&!((t=e)instanceof BigInt64Array||t instanceof BigUint64Array)}function EP(e){var t;return(null==e?void 0:e.prototype)instanceof EN&&(t=e)!==BigInt64Array&&t!==BigUint64Array}let ER=Symbol("reindex");function EI(e,t,n){var r,i;let o=typeof t;return"string"===o?ML(e)?Eq(e.getChild(t),n):Ez(e,EF(t),n):"function"===o?Ez(e,t,n):"number"===o||t instanceof Date||"boolean"===o?E9(e,EZ(t),n):"function"==typeof(null==t?void 0:t.transform)?EL(t.transform(e),n):(r=EL(t,n),i=null==e?void 0:e[ER],null!=r&&i?Mu(r,i):r)}function Ez(e,t,n){return E9(e,EP(n)?(e,n)=>EJ(t(e,n)):t,n)}function EL(e,t){return void 0===t?E7(e):Mq(e)?Eq(e,t):e instanceof t?e:t.from(e,EP(t)&&!ED(e)?EJ:void 0)}function Eq(e,t){var n;return null==e?e:(void 0===t||t===Array)&&(n=e.type)&&(8===n.typeId||10===n.typeId)&&1===n.unit?E0(E$(e)):EL(E$(e),t)}function E$(e){return e.nullCount?e.toJSON():e.toArray()}let EB=[null],EF=e=>t=>{var n;let r=t[e];return void 0===r&&"Feature"===t.type?null==(n=t.properties)?void 0:n[e]:r},EQ={transform:Mc},EV={transform:e=>e},EH=()=>1,EU=()=>!0,EW=e=>null==e?e:`${e}`,EG=e=>null==e?e:+e,EX=e=>e?e[0]:void 0,EY=e=>e?e[1]:void 0,EZ=e=>()=>e;function EK(e){return ED(e)?e:E9(e,EJ,Float64Array)}function EJ(e){return null==e?NaN:Number(e)}function E0(e){return E9(e,E1)}function E1(e){return e instanceof Date&&!isNaN(e)?e:"string"==typeof e?Ed(e):null==e||isNaN(e=Number(e))?void 0:new Date(e)}function E2(e,t){return void 0===e&&(e=t),null===e?[void 0,"none"]:MN(e)?[void 0,e]:[e,void 0]}function E4(e,t){return void 0===e&&(e=t),null===e||"number"==typeof e?[void 0,e]:[e,void 0]}function E5(e,t,n){if(null!=e)return E3(e,t,n)}function E3(e,t,n){let r=`${e}`.toLowerCase();if(!n.includes(r))throw Error(`invalid ${t}: ${e}`);return r}function E6(e){return ML(e)?e:E7(e)}function E7(e){if(null==e||Ej(e))return e;if(Mq(e))return Eq(e);if(E8(e))switch(e.type){case"FeatureCollection":return e.features;case"GeometryCollection":return e.geometries;default:return[e]}return Array.from(e)}function E8(e){switch(null==e?void 0:e.type){case"FeatureCollection":case"GeometryCollection":case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":return!0;default:return!1}}function E9(e,t,n=Array){return null==e?e:e instanceof n?e.map(t):n.from(e,t)}function Me(e,t=Array){return e instanceof t?e.slice():t.from(e)}function Mt({y:e,y1:t,y2:n}){return void 0!==e||void 0!==t||void 0!==n}function Mn(e){return(null==e?void 0:e.toString)===E_}function Mr(e){return Mn(e)&&(void 0!==e.type||void 0!==e.domain)}function Mi(e){return Mn(e)&&"function"!=typeof e.transform}function Mo(e){return Mi(e)&&void 0===e.value&&void 0===e.channel}function Ms(e,t){return void 0===e&&void 0===t?[EX,EY]:[e,t]}function Ma({z:e,fill:t,stroke:n}={}){return void 0===e&&([e]=E2(t)),void 0===e&&([e]=E2(n)),e}function Ml(e){return Ej(e)?e.length:null==e?void 0:e.numRows}function Mc(e){let t=Ml(e),n=new Uint32Array(t);for(let e=0;e<t;++e)n[e]=e;return n}function Mu(e,t){return Ej(e)?E9(t,t=>e[t],e.constructor):E9(t,t=>e.at(t))}function Mh(e){return null!==e&&"object"==typeof e?e.valueOf():e}function Md(e){let t;return[{transform:()=>t,label:Mp(e)},e=>t=e]}function Mf(e){return null==e?[e]:Md(e)}function Mp(e,t){return"string"==typeof e?e:e&&void 0!==e.label?e.label:t}function Mm(e,t){return{transform(n){let r=e.transform(n),i=t.transform(n);return MC(r)||MC(i)?E9(r,(e,t)=>new Date((+r[t]+ +i[t])/2)):E9(r,(e,t)=>(+r[t]+ +i[t])/2,Float64Array)},label:e.label}}function Mg(e,t){let n=My(null==t?void 0:t.interval,null==t?void 0:t.type);return n?E9(e,n):e}function My(e,t){let n=Mb(e,t);return n&&(e=>Er(e)?n.floor(e):e)}function Mb(e,t){if(null!=e){if("number"==typeof e)return function(e){0<(e*=1)&&e<1&&Number.isInteger(1/e)&&(e=-1/e);let t=Math.abs(e);return e<0?{floor:e=>Math.floor(e*t)/t,offset:(e,n=1)=>(e*t+Math.floor(n))/t,range:(e,n)=>(0,M.A)(Math.ceil(e*t),n*t).map(e=>e/t)}:{floor:e=>Math.floor(e/t)*t,offset:(e,n=1)=>e+t*Math.floor(n),range:(e,n)=>(0,M.A)(Math.ceil(e/t),n/t).map(e=>e*t)}}(e);if("string"==typeof e)return("time"===t?ES:EC)(e);if("function"!=typeof e.floor)throw Error("invalid interval; missing floor method");if("function"!=typeof e.offset)throw Error("invalid interval; missing offset method");return e}}function Mv(e,t){if((e=Mb(e,t))&&"function"!=typeof e.range)throw Error("invalid interval: missing range method");return e}function Mx(e){return"function"==typeof(null==e?void 0:e.range)}function Mw(e){return void 0===e||Mi(e)?e:{value:e}}function Mk(e){return e&&"function"==typeof e[Symbol.iterator]}function MO(e){for(let t of e)if(null!=t)return"object"!=typeof t||t instanceof Date}function MS(e){for(let t of e){if(null==t)continue;let e=typeof t;return"string"===e||"boolean"===e}}function MC(e){for(let t of e)if(null!=t)return t instanceof Date}function MT(e){for(let t of e)if(null!=t)return"string"==typeof t&&isNaN(t)&&Ed(t)}function MA(e){for(let t of e)if(null!=t){if("string"!=typeof t)return!1;if(t.trim())return!isNaN(t)}}function ME(e,t){let n;for(let r of e)if(null!=r){if(!t(r))return!1;n=!0}return n}let MM=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function MN(e){return"string"==typeof e&&(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||MM.has(e))}function M_(e){return"number"==typeof e&&(0<=e&&e<=1||isNaN(e))}function Mj(e){return null==e||MD(e)}function MD(e){return/^\s*none\s*$/i.test(e)}function MP(e,t){return E5(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function MR(e="middle"){return MP(e,"frameAnchor")}function MI(e){return Mk(e)?function(e){console.warn("named iterables are deprecated; please use an object instead");let t=new Set;return Object.fromEntries(Array.from(e,e=>{let{name:n}=e;if(null==n)throw Error("missing name");let r=`${n}`;if("__proto__"===r)throw Error(`illegal name: ${r}`);if(t.has(r))throw Error(`duplicate name: ${r}`);return t.add(r),[n,e]}))}(e):e}function Mz(e){return!0===e?e="frame":!1===e?e=null:E8(e)||null==e||"sphere"!==(e=E3(e,"clip",["frame","sphere"]))||(e={type:"Sphere"}),e}function ML(e){return e&&"function"==typeof e.getChild&&"function"==typeof e.toArray&&e.schema&&Array.isArray(e.schema.fields)}function Mq(e){return e&&"function"==typeof e.toArray&&e.type}let M$=Symbol("position"),MB=Symbol("color"),MF=Symbol("radius"),MQ=Symbol("length"),MV=Symbol("opacity"),MH=Symbol("symbol"),MU=Symbol("projection"),MW=new Map([["x",M$],["y",M$],["fx",M$],["fy",M$],["r",MF],["color",MB],["opacity",MV],["symbol",MH],["length",MQ],["projection",MU]]),MG=2/Math.sqrt(3),MX=new Map([["asterisk",cO],["circle",cS],["cross",cC],["diamond",cE],["diamond2",cM],["hexagon",{draw(e,t){let n=Math.sqrt(t/Math.PI),r=n*MG,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}}],["plus",cN],["square",c_],["square2",cj],["star",cI],["times",cH],["triangle",cL],["triangle2",c$],["wye",cV]]);function MY(e){return e&&"function"==typeof e.draw}function MZ(e){return!!MY(e)||"string"==typeof e&&MX.has(e.toLowerCase())}function MK(e){if(null==e||MY(e))return e;let t=MX.get(`${e}`.toLowerCase());if(t)return t;throw Error(`invalid symbol: ${e}`)}function MJ({filter:e,sort:t,reverse:n,transform:r,initializer:i,...o}={},s){if(void 0===r&&(null!=e&&(r=M4(e)),null==t||Mo(t)||(r=M1(r,M3(t))),n&&(r=M1(r,M5))),null!=s&&null!=i)throw Error("transforms cannot be applied after initializers");return{...o,...(null===t||Mo(t))&&{sort:t},transform:M1(r,s)}}function M0({filter:e,sort:t,reverse:n,initializer:r,...i}={},o){return void 0===r&&(null!=e&&(r=M4(e)),null==t||Mo(t)||(r=M2(r,M3(t))),n&&(r=M2(r,M5))),{...i,...(null===t||Mo(t))&&{sort:t},initializer:M2(r,o)}}function M1(e,t){return null==e?null===t?void 0:t:null==t?null===e?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,E6(n),r,i)}}function M2(e,t){return null==e?null===t?void 0:t:null==t?null===e?void 0:e:function(n,r,i,...o){let s,a,l,c,u,h;return{data:a=n,facets:l=r,channels:s}=e.call(this,n,r,i,...o),{data:u=a,facets:h=l,channels:c}=t.call(this,a,l,{...i,...s},...o),{data:u,facets:h,channels:{...s,...c}}}}function M4(e){return(t,n)=>{let r=EI(t,e);return{data:t,facets:n.map(e=>e.filter(e=>r[e]))}}}function M5(e,t){return{data:e,facets:t.map(e=>e.slice().reverse())}}function M3(e){return("function"==typeof e&&1!==e.length?function(e){return(t,n)=>{let r=Ej(t)?(n,r)=>e(t[n],t[r]):(n,r)=>e(t.get(n),t.get(r));return{data:t,facets:n.map(e=>e.slice().sort(r))}}}:function(e){let t,n;({channel:t,value:e,order:n}={...Mw(e)});let r=null==t?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),void 0===n&&(n=r?Eo:Ei),"function"!=typeof n)switch(`${n}`.toLowerCase()){case"ascending":n=Ei;break;case"descending":n=Eo;break;default:throw Error(`invalid order: ${n}`)}return(r,i,o)=>{let s;if(void 0===t)s=EI(r,e);else{if(void 0===o)throw Error("channel sort requires an initializer");if(!(s=o[t]))return{};s=s.value}let a=(e,t)=>n(s[e],s[t]);return{data:r,facets:i.map(e=>e.slice().sort(a))}}})(e)}function M6(e,...t){for(let{name:n}of e)if(t.includes(n))return!0;return!1}function M7(e,t,n=M8){let r=Object.entries(e);return null!=t.title&&void 0===e.title&&r.push(["title",Nf]),null!=t.href&&void 0===e.href&&r.push(["href",Nd]),r.filter(([,e])=>void 0!==e).map(([e,r])=>null===r?{name:e,initialize(){},scope(){},reduce(){}}:n(e,r,t))}function M8(e,t,n,r=M9){let i,o;Mn(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);let s=r(e,t,n),[a,l]=Md(s.label);return{name:e,output:void 0===i?a:{value:a,scale:i},initialize(e){s.initialize(e),o=l([])},scope(e,t){s.scope(e,t)},reduce(e,t){o.push(s.reduce(e,t))}}}function M9(e,t,n,r=Nt){let i,o;let s=function(e,t){if(void 0!==t[e])return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y"}return t[e]}(e,n),a=r(t,s);return{label:Mp(a===Nm?null:s,a.label),initialize(e){i=void 0===s?e:EI(e,s),"data"===a.scope&&(o=a.reduceIndex(Mc(e),i))},scope(e,t){a.scope===e&&(o=a.reduceIndex(t,i))},reduce:(e,t)=>null==a.scope?a.reduceIndex(e,i,t):a.reduceIndex(e,i,o,t)}}function Ne(e,t){return t?t2(e,e=>t[e]):[[,e]]}function Nt(e,t,n=Nn){var r,i;if(null==e)return n(e);if("function"==typeof e.reduceIndex)return e;if("function"==typeof e.reduce&&Mn(e)){return r=e,console.warn("deprecated reduce interface; implement reduceIndex instead."),{...r,reduceIndex:r.reduce.bind(r)}}if("function"==typeof e){return i=e,{reduceIndex:(e,t,n)=>i(Mu(t,e),n)}}if(/^p\d{2}$/i.test(e))return Nc(function(e){let t=+`${e}`.slice(1)/100;return(e,n)=>nf(e,t,n)}(e));switch(`${e}`.toLowerCase()){case"first":return Nd;case"last":return Np;case"identity":return Nh;case"count":return Nm;case"distinct":return Ng;case"sum":return null==t?Nm:Ny;case"proportion":return Nb(t,"data");case"proportion-facet":return Nb(t,"facet");case"deviation":return Nc(tU);case"min":return Nc(nc);case"min-index":return Nc(nu);case"max":return Nc(na);case"max-index":return Nc(nl);case"mean":return Nu(_.z);case"median":return Nu(ng);case"variance":return Nc(tH);case"mode":return Nc(nb)}return n(e)}function Nn(e){throw Error(`invalid reduce: ${e}`)}function Nr(e,t,n){return M8(e,t,n,Ni)}function Ni(e,t,n){return M9(e,t,n,No)}function No(e,t){return Nt(e,t,Ns)}function Ns(e){switch(`${e}`.toLowerCase()){case"x":return Nv;case"y":return Nx;case"z":return Nw}throw Error(`invalid group reduce: ${e}`)}function Na(e,t){for(let n in t){let r=t[n];if(void 0!==r&&!e.some(e=>e.name===n))return r}}function Nl(e,t,n){if(t){let n=t.output.transform(),r=(e,t)=>Ei(n[e],n[t]);e.forEach(e=>e.sort(r))}n&&e.forEach(e=>e.reverse())}function Nc(e){return{reduceIndex:(t,n)=>e(t,e=>n[e])}}function Nu(e){return{reduceIndex(t,n){let r=e(t,e=>n[e]);return MC(n)?new Date(r):r}}}let Nh={reduceIndex:(e,t)=>Mu(t,e)},Nd={reduceIndex:(e,t)=>t[e[0]]},Nf={reduceIndex(e,t){let n=t3(t4(e,e=>e.length,e=>t[e]),EY),r=n.slice(-5).reverse();if(r.length<n.length){let e=n.slice(0,-4);r[4]=[` ${e.length.toLocaleString("en-US")} more`,nv(e,EY)]}return r.map(([e,t])=>`${e} (${t.toLocaleString("en-US")})`).join(`
`)}},Np={reduceIndex:(e,t)=>t[e[e.length-1]]},Nm={label:"Frequency",reduceIndex:e=>e.length},Ng={label:"Distinct",reduceIndex(e,t){let n=new tY;for(let r of e)n.add(t[r]);return n.size}},Ny=Nc(nv);function Nb(e,t){return null==e?{scope:t,label:"Frequency",reduceIndex:(e,t,n=1)=>e.length/n}:{scope:t,reduceIndex:(e,t,n=1)=>nv(e,e=>t[e])/n}}let Nv={reduceIndex:(e,t,{x:n})=>n},Nx={reduceIndex:(e,t,{y:n})=>n},Nw={reduceIndex:(e,t,{z:n})=>n};function Nk(e,{scale:t,type:n,value:r,filter:i,hint:o,label:s=Mp(r)},a){return void 0===o&&"function"==typeof(null==r?void 0:r.transform)&&(o=r.hint),NO(a,{scale:t,type:n,value:EI(e,r),label:s,filter:i,hint:o})}function NO(e,t){let{scale:n,value:r}=t;if(!0===n||"auto"===n)switch(e){case"fill":case"stroke":case"color":t.scale=!0!==n&&ME(r,MN)?null:"color",t.defaultScale="color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=!0!==n&&ME(r,M_)?null:"opacity",t.defaultScale="opacity";break;case"symbol":!0!==n&&ME(r,MZ)?(t.scale=null,t.value=E9(r,MK)):t.scale="symbol",t.defaultScale="symbol";break;default:t.scale=MW.has(e)?e:null}else if(!1===n)t.scale=null;else if(null!=n&&!MW.has(n))throw Error(`unknown scale: ${n}`);return t}function NS(e,t,n){let r=NC(e,t);return E9(NC(e,n),(e,t)=>Math.abs(e-r[t]),Float64Array)}function NC(e,t,n){let r=e[t];if(r||void 0===n||(r=e[n]),r)return r.value;throw Error(`missing channel: ${t}`)}function NT([e,t],[n,r]){return Ei(t,r)||Ei(e,n)}function NA([e,t],[n,r]){return Eo(t,r)||Ei(e,n)}function NE(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return null===n.source?null:n}}let NM=new Map([["accent",a2],["category10",a1],["dark2",a4],["observable10",a5],["paired",a3],["pastel1",a6],["pastel2",a7],["set1",a8],["set2",a9],["set3",le],["tableau10",lt]]),NN=new Map([...NM,["brbg",Nj(lr,li)],["prgn",Nj(lo,ls)],["piyg",Nj(la,ll)],["puor",Nj(lc,lu)],["rdbu",Nj(lh,ld)],["rdgy",Nj(lf,lp)],["rdylbu",Nj(lm,lg)],["rdylgn",Nj(ly,lb)],["spectral",Nj(lv,lx)],["burd",ND(lh,ld)],["buylrd",ND(lm,lg)],["blues",N_(lH,lU)],["greens",N_(lW,lG)],["greys",N_(lX,lY)],["oranges",N_(l1,l2)],["purples",N_(lZ,lK)],["reds",N_(lJ,l0)],["turbo",NP(cr)],["viridis",NP(co)],["magma",NP(cs)],["inferno",NP(ca)],["plasma",NP(cl)],["cividis",NP(l4)],["cubehelix",NP(l5)],["warm",NP(l3)],["cool",NP(l6)],["bugn",N_(lw,lk)],["bupu",N_(lO,lS)],["gnbu",N_(lC,lT)],["orrd",N_(lA,lE)],["pubu",N_(l_,lj)],["pubugn",N_(lM,lN)],["purd",N_(lD,lP)],["rdpu",N_(lR,lI)],["ylgn",N_(lq,l$)],["ylgnbu",N_(lz,lL)],["ylorbr",N_(lB,lF)],["ylorrd",N_(lQ,lV)],["rainbow",NR(l8)],["sinebow",NR(cn)]]);function N_(e,t){return({length:n})=>1===n?[e[3][1]]:2===n?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)))>9?nZ(t,n):e[n]}function Nj(e,t){return({length:n})=>2===n?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)))>11?nZ(t,n):e[n]}function ND(e,t){return({length:n})=>2===n?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)))>11?nZ(e=>t(1-e),n):e[n].slice().reverse()}function NP(e){return({length:t})=>nZ(e,Math.max(2,Math.floor(t)))}function NR(e){return({length:t})=>nZ(e,Math.floor(t)+1).slice(0,-1)}function NI(e){let t=`${e}`.toLowerCase();if(!NN.has(t))throw Error(`unknown ordinal scheme: ${t}`);return NN.get(t)}function Nz(e,t){let n=NI(e),r="function"==typeof n?n({length:t}):n;return r.length!==t?r.slice(0,t):r}let NL=new Map([["brbg",li],["prgn",ls],["piyg",ll],["puor",lu],["rdbu",ld],["rdgy",lp],["rdylbu",lg],["rdylgn",lb],["spectral",lx],["burd",e=>ld(1-e)],["buylrd",e=>lg(1-e)],["blues",lU],["greens",lG],["greys",lY],["purples",lK],["reds",l0],["oranges",l2],["turbo",cr],["viridis",co],["magma",cs],["inferno",ca],["plasma",cl],["cividis",l4],["cubehelix",l5],["warm",l3],["cool",l6],["bugn",lk],["bupu",lS],["gnbu",lT],["orrd",lE],["pubugn",lN],["pubu",lj],["purd",lP],["rdpu",lI],["ylgnbu",lL],["ylgn",l$],["ylorbr",lF],["ylorrd",lV],["rainbow",l8],["sinebow",cn]]);function Nq(e){let t=`${e}`.toLowerCase();if(!NL.has(t))throw Error(`unknown quantitative scheme: ${t}`);return NL.get(t)}let N$=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]),NB=e=>t=>e(1-t),NF=[0,1],NQ=new Map([["number",_.k],["rgb",_.l],["hsl",nU],["hcl",nW],["lab",function(e,t){var n=(0,_.q)((e=nj(e)).l,(t=nj(t)).l),r=(0,_.q)(e.a,t.a),i=(0,_.q)(e.b,t.b),o=(0,_.q)(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=i(t),e.opacity=o(t),e+""}}]]);function NV(e){let t=`${e}`.toLowerCase();if(!NQ.has(t))throw Error(`unknown interpolator: ${t}`);return NQ.get(t)}function NH(e,t,n,{type:r,nice:i,clamp:o,zero:s,domain:a=NY(e,n),unknown:l,round:c,scheme:u,interval:h,range:d=MW.get(e)===MF?function(e,t){let n=e.find(({radius:e})=>void 0!==e);if(void 0!==n)return[0,n.radius];let r=nf(e,.5,({value:e})=>void 0===e?NaN:nf(e,.25,El)),i=t.map(e=>3*Math.sqrt(e/r)),o=30/na(i);return o<1?i.map(e=>e*o):i}(n,a):MW.get(e)===MQ?function(e,t){let n=ng(e,({value:e})=>void 0===e?NaN:ng(e,Math.abs)),r=t.map(e=>12*e/n),i=60/na(r);return i<1?r.map(e=>e*i):r}(n,a):MW.get(e)===MV?NF:void 0,interpolate:f=MW.get(e)===MB?null==u&&void 0!==d?_.l:Nq(void 0!==u?u:"cyclical"===r?"rainbow":"turbo"):c?nH:_.k,reverse:p}){var m,g;if(a=NU(a),h=Mv(h,r),("cyclical"===r||"sequential"===r)&&(r="linear"),"function"!=typeof f&&(f=NV(f)),p=!!p,void 0!==d&&a.length!==(d=NU(d)).length){if(1===f.length)throw Error("invalid piecewise interpolator");f=nY(f,d),d=void 0}if(1===f.length?(p&&(f=NB(f),p=!1),void 0===d&&2===(d=Float64Array.from(a,(e,t)=>t/(a.length-1))).length&&(d=NF),t.interpolate((d===NF?EZ:NZ)(f))):t.interpolate(f),s){let[e,t]=tW(a);(e>0||t<0)&&((Ef(a=Me(a))||1)===Math.sign(e)?a[0]=0:a[a.length-1]=0)}return p&&(a=nx(a)),t.domain(a).unknown(l),i&&(t.nice((m=i,g=r,!0===m?void 0:"number"==typeof m?m:function(e,t){if((e=Mv(e,t))&&"function"!=typeof e.ceil)throw Error("invalid interval: missing ceil method");return e}(m,g))),a=t.domain()),void 0!==d&&t.range(d),o&&t.clamp(o),{type:r,domain:a,range:d,scale:t,interpolate:f,interval:h}}function NU(e){return(e=E7(e)).length>=2?e:[e[0],e[0]]}function NW(e,t,{exponent:n=1,...r}){return NH(e,(function e(){var t=st(oG());return t.copy=function(){return oW(t,e()).exponent(t.exponent())},oI.apply(t,arguments),t})().exponent(n),t,{...r,type:"pow"})}function NG(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:o,range:s=void 0!==o?nZ(o,n.length+1):MW.get(e)===MB?Nz(i,n.length+1):void 0,reverse:a}){let l=Ef(n=E7(n));if(!isNaN(l)&&!function(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){let r=(0,M.ac)(i,i=e[n]);if(0!==r&&r!==t)return!1}return!0}(n,l))throw Error(`the ${e} scale has a non-monotonic domain`);return a&&(s=nx(s)),{type:"threshold",scale:(function e(){var t,n=[.5],r=[0,1],i=1;function o(e){return null!=e&&e<=e?r[(0,M.a6)(n,e,0,i)]:t}return o.domain=function(e){return arguments.length?(i=Math.min((n=Array.from(e)).length,r.length-1),o):n.slice()},o.range=function(e){return arguments.length?(r=Array.from(e),i=Math.min(n.length,r.length-1),o):r.slice()},o.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},o.unknown=function(e){return arguments.length?(t=e,o):t},o.copy=function(){return e().domain(n).range(r).unknown(t)},oI.apply(o,arguments)})(l<0?nx(n):n,void 0===s?[]:s).unknown(r),domain:n,range:s}}function NX(e,t=Ea){return e.length?[nc(e,({value:e})=>void 0===e?e:nc(e,t)),na(e,({value:e})=>void 0===e?e:na(e,t))]:[0,1]}function NY(e,t){let n=MW.get(e);return(n===MF||n===MV||n===MQ?function(e){return[0,e.length?na(e,({value:e})=>void 0===e?e:na(e,Ea)):1]}:NX)(t)}function NZ(e){return(t,n)=>r=>e(t+r*(n-t))}let NK=0,NJ;function N0(e){e!==NJ&&(NJ=e,console.warn(e),++NK)}function N1(e,t,n,r,{type:i,nice:o,clamp:s,domain:a=NX(r),unknown:l,pivot:c=0,scheme:u,range:h,symmetric:d=!0,interpolate:f=MW.get(e)===MB?null==u&&void 0!==h?_.l:Nq(void 0!==u?u:"rdbu"):_.k,reverse:p}){c*=1;let[m,g]=a=E7(a);if(a.length>2&&N0(`Warning: the diverging ${e} scale domain contains extra elements.`),0>(0,M.ac)(m,g)&&([m,g]=[g,m],p=!p),m=Math.min(m,c),g=Math.max(g,c),"function"!=typeof f&&(f=NV(f)),void 0!==h&&(f=1===f.length?NZ(f)(...h):nY(f,h)),p&&(f=NB(f)),d){let e=n.apply(c),t=e-n.apply(m),r=n.apply(g)-e;t<r?m=n.invert(e-r):t>r&&(g=n.invert(e+t))}return t.domain([m,c,g]).unknown(l).interpolator(f),s&&t.clamp(s),o&&t.nice(o),{type:i,domain:[m,g],pivot:c,interpolate:f,scale:t}}function N2(e,t,{exponent:n=1,...r}){var i;return N1(e,(function e(){var t=st(aJ());return t.copy=function(){return aK(t,e()).exponent(t.exponent())},oz.apply(t,arguments)})().exponent(n*=1),.5===(i=n)?N3:{apply:e=>Math.sign(e)*Math.pow(Math.abs(e),i),invert:e=>Math.sign(e)*Math.pow(Math.abs(e),1/i)},t,{...r,type:"diverging-pow"})}let N4={apply:e=>e,invert:e=>e},N5={apply:Math.log,invert:Math.exp},N3={apply:e=>Math.sign(e)*Math.sqrt(Math.abs(e)),invert:e=>e*e*Math.sign(e)},N6=Symbol("ordinal");function N7(e,t,n,{type:r,interval:i,domain:o,range:s,reverse:a,hint:l}){return i=Mv(i,r),void 0===o&&(o=N9(n,i,e)),("categorical"===r||r===N6)&&(r="ordinal"),a&&(o=nx(o)),o=t.domain(o).domain(),void 0!==s&&("function"==typeof s&&(s=s(o)),t.range(s)),{type:r,domain:o,range:s,scale:t,hint:l,interval:i}}function N8(e,t,n,r){let{round:i}=n;return void 0!==i&&e.round(i=!!i),(e=N7(r,e,t,n)).round=i,e}function N9(e,t,n){let r=new tY;for(let{value:t,domain:n}of e){if(void 0!==n)return n();if(void 0!==t)for(let e of t)r.add(e)}if(void 0!==t){let[e,n]=tW(r).map(t.floor,t);return t.range(e,t.offset(n))}if(r.size>1e4&&MW.get(n)===M$)throw Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return t3(r,Ei)}function _e(e,t){let n;for(let{hint:r}of e){let e=null==r?void 0:r[t];if(void 0!==e){if(void 0===n)n=e;else if(n!==e)return}}return n}function _t(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:o=n,insetLeft:s=n,round:a,nice:l,clamp:c,zero:u,align:h,padding:p,projection:m,facet:{label:g=t}={},...y}={}){let b={};for(let[n,v]of e){let e=y[n],x=function(e,t=[],n={}){var r,i,o,s,a;let l=function(e,t,{type:n,domain:r,range:i,scheme:o,pivot:s,projection:a}){var l;if(n=_u(n),"fx"===e||"fy"===e)return"band";for(let r of(("x"===e||"y"===e)&&null!=a&&(n=_h),t)){let e=_u(r.type);if(void 0!==e){if(void 0===n)n=e;else if(n!==e)throw Error(`scale incompatible with channel: ${n} !== ${e}`)}}if(n===_h)return;if(void 0!==n)return n;if(void 0===r&&!t.some(({value:e})=>void 0!==e))return;let c=MW.get(e);if(c===MF)return"sqrt";if(c===MV||c===MQ)return"linear";if(c===MH)return"ordinal";let u=null==(l=r??i)?void 0:l.length;if(u<2||u>2)return _d(c);if(void 0!==r){if(MS(r))return _d(c);if(MC(r))return"utc"}else{let e=t.map(({value:e})=>e).filter(e=>void 0!==e);if(e.some(MS))return _d(c);if(e.some(MC))return"utc"}if(c===MB){if(null!=s||null!=o&&N$.has(`${o}`.toLowerCase()))return"diverging";if(null!=o&&NM.has(`${o}`.toLowerCase()))return"categorical"}return"linear"}(e,t,n);if(void 0===n.type&&void 0===n.domain&&void 0===n.range&&null==n.interval&&"fx"!==e&&"fy"!==e&&_f({type:l})){let n=t.map(({value:e})=>e).filter(e=>void 0!==e);n.some(MC)?N0(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${_c(l)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${_c(l)}".`):n.some(MT)?N0(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${_c(l)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${_c(l)}".`):n.some(MA)&&N0(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${_c(l)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${_c(l)}".`)}switch(n.type=l,l){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=_g(t,n,EK);break;case"identity":switch(MW.get(e)){case M$:n=_g(t,n,EK);break;case MH:n=_g(t,n,_y)}break;case"utc":case"time":n=_g(t,n,E0)}switch(l){case"diverging":return r=n,N1(e,function e(){var t=oX(aJ()(oQ));return t.copy=function(){return aK(t,e())},oz.apply(t,arguments)}(),N4,t,r);case"diverging-sqrt":return N2(e,t,{...n,exponent:.5});case"diverging-pow":return N2(e,t,n);case"diverging-log":return function(e,t,{base:n=10,pivot:r=1,domain:i=NX(t,r<0?Ec:El),...o}){return N1(e,(function e(){var t=o5(aJ()).domain([.1,1,10]);return t.copy=function(){return aK(t,e()).base(t.base())},oz.apply(t,arguments)})().base(n*=1),N5,t,{domain:i,pivot:r,...o})}(e,t,n);case"diverging-symlog":return function(e,t,{constant:n=1,...r}){return N1(e,(function e(){var t=o7(aJ());return t.copy=function(){return aK(t,e()).constant(t.constant())},oz.apply(t,arguments)})().constant(n*=1),function(e){return{apply:t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),invert:t=>Math.sign(t)*Math.expm1(Math.abs(t))*e}}(n),t,r)}(e,t,n);case"categorical":case"ordinal":case N6:return function(e,t,{type:n,interval:r,domain:i,range:o,scheme:s,unknown:a,...l}){let c;if(r=Mv(r,n),void 0===i&&(i=N9(t,r,e)),MW.get(e)===MH){var u;c={fill:_e(u=t,"fill"),stroke:_e(u,"stroke")},o=void 0===o?Mj(c.fill)?cW:cU:E9(o,MK)}else if(MW.get(e)===MB&&(void 0===o&&("ordinal"===n||n===N6)&&void 0!==(o=function(e,t="greys"){let n=new Set,[r,i]=Nz(t,2);for(let t of e)if(null!=t){if(!0===t)n.add(i);else{if(!1!==t)return;n.add(r)}}return[...n]}(i,s))&&(s=void 0),void 0===s&&void 0===o&&(s="ordinal"===n?"turbo":"observable10"),void 0!==s)){if(void 0!==o){let e=Nq(s),t=o[0],n=o[1]-o[0];o=({length:r})=>nZ(r=>e(t+n*r),r)}else o=NI(s)}if(a===oL)throw Error(`implicit unknown on ${e} scale is not supported`);return N7(e,oq().unknown(a),t,{...l,type:n,domain:i,range:o,hint:c})}(e,t,n);case"cyclical":case"sequential":case"linear":return i=n,NH(e,oY(),t,i);case"sqrt":return NW(e,t,{...n,exponent:.5});case"threshold":return NG(e,t,n);case"quantile":return function(e,t,{range:n,quantiles:r=void 0===n?5:(n=[...n]).length,n:i=r,scheme:o="rdylbu",domain:s=function(e){let t=[];for(let{value:n}of e)if(void 0!==n)for(let e of n)t.push(e);return t}(t),unknown:a,interpolate:l,reverse:c}){return void 0===n&&(n=void 0!==l?nZ(l,i):MW.get(e)===MB?Nz(o,i):void 0),s.length>0&&(s=(function e(){var t,n=[],r=[],i=[];function o(){var e=0,t=Math.max(1,r.length);for(i=Array(t-1);++e<t;)i[e-1]=function(e,t,n=M.a4){if(!(!(r=e.length)||isNaN(t*=1))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e);return s+(+n(e[o+1],o+1,e)-s)*(i-o)}}(n,e/t);return s}function s(e){return null==e||isNaN(e*=1)?t:r[(0,M.a6)(i,e)]}return s.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?i[t-1]:n[0],t<i.length?i[t]:n[n.length-1]]},s.domain=function(e){if(!arguments.length)return n.slice();for(let t of(n=[],e))null==t||isNaN(t*=1)||n.push(t);return n.sort(M.a3),o()},s.range=function(e){return arguments.length?(r=Array.from(e),o()):r.slice()},s.unknown=function(e){return arguments.length?(t=e,s):t},s.quantiles=function(){return i.slice()},s.copy=function(){return e().domain(n).range(r).unknown(t)},oI.apply(s,arguments)})(s,void 0===n?{length:i}:n).quantiles()),NG(e,t,{domain:s,range:n,reverse:c,unknown:a})}(e,t,n);case"quantize":return function(e,t,{range:n,n:r=void 0===n?5:(n=[...n]).length,scheme:i="rdylbu",domain:o=NY(e,t),unknown:s,interpolate:a,reverse:l}){let c;let[u,h]=tW(o);return void 0===n?((c=nr(u,h,r))[0]<=u&&c.splice(0,1),c[c.length-1]>=h&&c.pop(),r=c.length+1,n=void 0!==a?nZ(a,r):MW.get(e)===MB?Nz(i,r):void 0):(c=nZ((0,_.k)(u,h),r+1).slice(1,-1),u instanceof Date&&(c=c.map(e=>new Date(e)))),0>Ef(E7(o))&&c.reverse(),NG(e,t,{domain:c,range:n,reverse:l,unknown:s})}(e,t,n);case"pow":return NW(e,t,n);case"log":return function(e,t,{base:n=10,domain:r=function(e){for(let{value:t}of e)if(void 0!==t)for(let n of t){if(n>0)return NX(e,El);if(n<0)return NX(e,Ec)}return[1,10]}(t),...i}){return NH(e,(function e(){let t=o5(oG()).domain([1,10]);return t.copy=()=>oW(t,e()).base(t.base()),oI.apply(t,arguments),t})().base(n),t,{...i,domain:r})}(e,t,n);case"symlog":return function(e,t,{constant:n=1,...r}){return NH(e,(function e(){var t=o7(oG());return t.copy=function(){return oW(t,e()).constant(t.constant())},oI.apply(t,arguments)})().constant(n),t,r)}(e,t,n);case"utc":return o=n,NH(e,function(){return oI.apply(aZ(sR,sI,sD,s_,sO,sd,su,sl,ss,f).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}(),t,o);case"time":return s=n,NH(e,function(){return oI.apply(aZ(sz,sL,sj,sN,sm,sh,sc,sa,ss,d).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}(),t,s);case"point":return function(e,t,{align:n=.5,padding:r=.5,...i}){return N8((function(){return function e(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return e(n())},t}(o$.apply(null,arguments).paddingInner(1))})().align(n).padding(r),t,i,e)}(e,t,n);case"band":return function(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:o="fx"===e||"fy"===e?0:r,...s}){return N8(o$().align(n).paddingInner(i).paddingOuter(o),t,s,e)}(e,t,n);case"identity":return{type:"identity",scale:(a=MW.get(e))===M$||a===MF||a===MQ||a===MV?function e(t){var n;function r(e){return null==e||isNaN(e*=1)?n:e}return r.invert=r,r.domain=r.range=function(e){return arguments.length?(t=Array.from(e,oB),r):t.slice()},r.unknown=function(e){return arguments.length?(n=e,r):n},r.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,oB):[0,1],oX(r)}():e=>e};case void 0:return;default:throw Error(`unknown scale type: ${l}`)}}(n,v,{round:MW.get(n)===M$?a:void 0,nice:l,clamp:c,zero:u,align:h,padding:p,projection:m,...e});if(x){let{label:a="fx"===n||"fy"===n?g:t,percent:l,transform:c,inset:u,insetTop:h=void 0!==u?u:"y"===n?r:0,insetRight:d=void 0!==u?u:"x"===n?i:0,insetBottom:f=void 0!==u?u:"y"===n?o:0,insetLeft:p=void 0!==u?u:"x"===n?s:0}=e||{};if(null==c)c=void 0;else if("function"!=typeof c)throw Error("invalid scale transform; not a function");x.percent=!!l,x.label=void 0===a?function(e=[],t){let n;for(let{label:t}of e)if(void 0!==t){if(void 0===n)n=t;else if(n!==t)return}if(void 0!==n)return!_f(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}(v,x):a,x.transform=c,"x"===n||"fx"===n?(x.insetLeft=+p,x.insetRight=+d):("y"===n||"fy"===n)&&(x.insetTop=+h,x.insetBottom=+f),b[n]=x}}return b}function _n(e){let t={},n={scales:t};for(let[r,i]of Object.entries(e)){let{scale:e,type:o,interval:s,label:a}=i;t[r]=function({scale:e,type:t,domain:n,range:r,interpolate:i,interval:o,transform:s,percent:a,pivot:l}){if("identity"===t)return{type:"identity",apply:e=>e,invert:e=>e};let c=e.unknown?e.unknown():void 0;return{type:t,domain:Me(n),...void 0!==r&&{range:Me(r)},...void 0!==s&&{transform:s},...a&&{percent:a},...void 0!==c&&{unknown:c},...void 0!==o&&{interval:o},...void 0!==i&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...void 0!==l&&{pivot:l,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:t=>e(t),...e.invert&&{invert:t=>e.invert(t)}}}(i),n[r]=e,e.type=o,null!=s&&(e.interval=s),null!=a&&(e.label=a)}return n}function _r(e){let{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:o,height:s,facet:{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u}}=e;return{marginTop:Math.max(t,a),marginRight:Math.max(n,l),marginBottom:Math.max(r,c),marginLeft:Math.max(i,u),width:o,height:s}}function _i({fx:e,fy:t},n){let{marginTop:r,marginRight:i,marginBottom:o,marginLeft:s,width:a,height:l}=_r(n);return{marginTop:r,marginRight:i,marginBottom:o,marginLeft:s,width:e?e.scale.bandwidth()+s+i:a,height:t?t.scale.bandwidth()+r+o:l,facet:{width:a,height:l}}}function _o(e,t){if(void 0===e.range){let{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:o=0,marginRight:s=0}=t,a=o+n;e.range=[a,Math.max(a,i-s-r)],_f(e)||(e.range=_l(e)),e.scale.range(e.range)}_a(e)}function _s(e,t){if(void 0===e.range){let{insetTop:n,insetBottom:r}=e,{height:i,marginTop:o=0,marginBottom:s=0}=t,a=o+n;e.range=[Math.max(a,i-s-r),a],_f(e)?e.range.reverse():e.range=_l(e),e.scale.range(e.range)}_a(e)}function _a(e){void 0===e.round&&function({type:e}){return"point"===e||"band"===e}(e)&&30>=function({scale:e}){let t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,o=e.paddingOuter?e.paddingOuter():e.padding(),s=t-i,a=Math.abs(r-n)/Math.max(1,s+2*o);return(a-Math.floor(a))*s}(e)&&e.scale.round(!0)}function _l(e){let t=e.scale.domain().length+_p(e);if(!(t>2))return e.range;let[n,r]=e.range;return Array.from({length:t},(e,i)=>n+i/(t-1)*(r-n))}function _c(e){return"symbol"==typeof e?e.description:e}function _u(e){return"string"==typeof e?`${e}`.toLowerCase():e}let _h={toString:()=>"projection"};function _d(e){switch(e){case M$:return"point";case MB:return N6;default:return"ordinal"}}function _f({type:e}){return"ordinal"===e||"point"===e||"band"===e||e===N6}function _p({type:e}){return"threshold"===e}function _m(e){if(void 0===e)return!0;let t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function _g(e,{domain:t,...n},r){var i;for(let n of e)void 0!==n.value&&(void 0===t&&(t=null==(i=n.value)?void 0:i.domain),n.value=r(n.value));return{domain:void 0===t?t:r(t),...n}}function _y(e){return E9(e,MK)}function _b(e,{fx:t,fy:n}){let r=Mc(e),i=null==t?void 0:t.value,o=null==n?void 0:n.value;return t&&n?t4(r,e=>(e.fx=i[e[0]],e.fy=o[e[0]],e),e=>i[e],e=>o[e]):t?t4(r,e=>(e.fx=i[e[0]],e),e=>i[e]):t4(r,e=>(e.fy=o[e[0]],e),e=>o[e])}let _v=new Map([["top",_S],["right",_A],["bottom",_C],["left",_T],["top-left",_E(_S,_T)],["top-right",_E(_S,_A)],["bottom-left",_E(_C,_T)],["bottom-right",_E(_C,_A)],["top-empty",function(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;let o=_k(t,r);if(o>0)return _O(e,n,t[o-1])}],["right-empty",function(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;let o=_k(t,n);if(o<t.length-1)return _O(e,t[o+1],r)}],["bottom-empty",function(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;let o=_k(t,r);if(o<t.length-1)return _O(e,n,t[o+1])}],["left-empty",function(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;let o=_k(t,n);if(o>0)return _O(e,t[o-1],r)}],["empty",function(e,t,{empty:n}){return n}]]),_x=new WeakMap;function _w(e){let t=_x.get(e);return t||_x.set(e,t=new tX(E9(e,(e,t)=>[e,t]))),t}function _k(e,t){return _w(e).get(t)}function _O(e,t,n){var r,i,o;return null==(i=t,o=n,i=Mh(i),o=Mh(o),r=e.find(e=>Object.is(Mh(e.x),i)&&Object.is(Mh(e.y),o)))?void 0:r.empty}function _S(e,{y:t},{y:n}){return!t||0===_k(t,n)}function _C(e,{y:t},{y:n}){return!t||_k(t,n)===t.length-1}function _T(e,{x:t},{x:n}){return!t||0===_k(t,n)}function _A(e,{x:t},{x:n}){return!t||_k(t,n)===t.length-1}function _E(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function _M(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:e,y:t})=>{var n;return(null==(n=r.get(e))?void 0:n.get(t))??[]}):t?e.map(({x:e})=>r.get(e)??[]):e.map(({y:e})=>r.get(e)??[])}let _N=Math.PI,__=2*_N;function _j(e){switch(`${e}`.toLowerCase()){case"albers-usa":return _D(ol,.7463,.4673);case"albers":return _P(oa,.7463,.4673);case"azimuthal-equal-area":return _D(od,4,4);case"azimuthal-equidistant":return _D(op,__,__);case"conic-conformal":return _P(ox,__,__);case"conic-equal-area":return _P(oo,6.1702,2.9781);case"conic-equidistant":return _P(oS,7.312,3.6282);case"equal-earth":return _D(oA,5.4133,2.6347);case"equirectangular":return _D(ok,__,_N);case"gnomonic":return _D(oM,3.4641,3.4641);case"identity":return{type:_R};case"reflect-y":return{type:_I};case"mercator":return _D(og,__,__);case"orthographic":return _D(o_,2,2);case"stereographic":return _D(oD,2,2);case"transverse-mercator":return _D(oR,__,__);default:throw Error(`unknown projection type: ${e}`)}}function _D(e,t,n){return{type:({width:r,height:i,rotate:o,precision:s=.15,clip:a})=>{var l,c,u;let h=e();return null!=s&&(null==(l=h.precision)||l.call(h,s)),null!=o&&(null==(c=h.rotate)||c.call(h,o)),"number"==typeof a&&(null==(u=h.clipAngle)||u.call(h,a)),null!=r&&(h.scale(Math.min(r/t,i/n)),h.translate([r/2,i/2])),h},aspectRatio:n/t}}function _P(e,t,n){let{type:r,aspectRatio:i}=_D(e,t,n);return{type:e=>{let{parallels:t,domain:n,width:i,height:o}=e,s=r(e);return null!=t&&(s.parallels(t),void 0===n&&null!=i&&s.fitSize([i,o],{type:"Sphere"})),s},aspectRatio:i}}let _R=EZ({stream:e=>e}),_I=EZ(iJ({point(e,t){this.stream.point(e,-t)}}));function _z(e={}){let{document:t="u">typeof window?window.document:void 0,clip:n}=e;return{document:t,clip:Mz(n)}}function _L(e,{document:t}){return nS((0,_.A)(e).call(t.documentElement))}let _q=Symbol("unset");function _$(e){return(1===e.length?function(e){let t,n=_q;return r=>(Object.is(n,r)||(n=r,t=e(r)),t)}:function(e){let t,n;return(...r)=>(((null==n?void 0:n.length)!==r.length||n.some((e,t)=>!Object.is(e,r[t])))&&(n=r,t=e(...r)),t)})(e)}let _B=_$(e=>new Intl.NumberFormat(e));_$((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{month:t}})),_$((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{weekday:t}}));let _F=function(e="en-US"){let t=function(e="en-US"){let t=_B(e);return e=>null==e||isNaN(e)?void 0:t.format(e)}(e);return e=>(e instanceof Date?function(e){return function(e,t){var n;if(e instanceof Date||(e=new Date(+e)),isNaN(e))return t;let r=e.getUTCHours(),i=e.getUTCMinutes(),o=e.getUTCSeconds(),s=e.getUTCMilliseconds();return`${(n=e.getUTCFullYear())<0?`-${Eu(-n,6)}`:n>9999?`+${Eu(n,6)}`:Eu(n,4)}-${Eu(e.getUTCMonth()+1,2)}-${Eu(e.getUTCDate(),2)}${r||i||o||s?`T${Eu(r,2)}:${Eu(i,2)}${o||s?`:${Eu(o,2)}${s?`.${Eu(s,3)}`:""}`:""}Z`:""}`}(e,"Invalid Date")}:"number"==typeof e?t:EW)(e)}(),_Q=.5*("u">typeof window?!(window.devicePixelRatio>1):!(typeof it>"u")),_V=0;function _H(){return`plot-clip-${++_V}`}function _U(e,t){t&&e.text(e=>_F(t[e]))}function _W(e,t){t&&e.text(([e])=>_F(t[e]))}function _G(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:s,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:h}){r&&_2(e,"aria-label",e=>r[e]),o&&_2(e,"fill",e=>o[e]),s&&_2(e,"fill-opacity",e=>s[e]),a&&_2(e,"stroke",e=>a[e]),l&&_2(e,"stroke-opacity",e=>l[e]),c&&_2(e,"stroke-width",e=>c[e]),u&&_2(e,"opacity",e=>u[e]),h&&_1(e,e=>h[e],t),n||i&&e.filter(e=>Es(i[e])).append("title").call(_U,i)}function _X(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:s,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:h}){r&&_2(e,"aria-label",([e])=>r[e]),o&&_2(e,"fill",([e])=>o[e]),s&&_2(e,"fill-opacity",([e])=>s[e]),a&&_2(e,"stroke",([e])=>a[e]),l&&_2(e,"stroke-opacity",([e])=>l[e]),c&&_2(e,"stroke-width",([e])=>c[e]),u&&_2(e,"opacity",([e])=>u[e]),h&&_1(e,([e])=>h[e],t),n||i&&e.filter(([e])=>Es(i[e])).append("title").call(_W,i)}let _Y=function(e){let t=new WeakMap;return(n,r)=>{let i=t.get(n);if(!i){let o=_H();nS(n.ownerSVGElement).append("clipPath").attr("id",o).call(e,n,r),t.set(n,i=`url(#${o})`)}return i}}((e,t,n)=>{let{width:r,height:i,marginLeft:o,marginRight:s,marginTop:a,marginBottom:l}=n;e.append("rect").attr("x",o).attr("y",a).attr("width",r-s-o).attr("height",i-a-l)}),_Z=new WeakMap,_K={type:"Sphere"};function _J(e,t,n,r){(function(e,t,n,r){let i;let{clip:o=r.clip}=t;"frame"===o?(e=_L("svg:g",r).each(function(){this.appendChild(e.node()),e.node=()=>this}),i=_Y(r,n)):o&&(i=function(e,t){let n,r;if((n=_Z.get(t))||_Z.set(t,n=new WeakMap),"Sphere"===e.type&&(e=_K),!(r=n.get(e))){let i=_H();nS(t.ownerSVGElement).append("clipPath").attr("id",i).append("path").attr("d",t.path()(e)),n.set(e,r=`url(#${i})`)}return r}(o,r)),_2(e,"aria-label",t.ariaLabel),_2(e,"aria-description",t.ariaDescription),_2(e,"aria-hidden",t.ariaHidden),_2(e,"clip-path",i)})(e,t,n,r),_2(e,"class",t.className),_2(e,"fill",t.fill),_2(e,"fill-opacity",t.fillOpacity),_2(e,"stroke",t.stroke),_2(e,"stroke-width",t.strokeWidth),_2(e,"stroke-opacity",t.strokeOpacity),_2(e,"stroke-linejoin",t.strokeLinejoin),_2(e,"stroke-linecap",t.strokeLinecap),_2(e,"stroke-miterlimit",t.strokeMiterlimit),_2(e,"stroke-dasharray",t.strokeDasharray),_2(e,"stroke-dashoffset",t.strokeDashoffset),_2(e,"shape-rendering",t.shapeRendering),_2(e,"filter",t.imageFilter),_2(e,"paint-order",t.paintOrder);let{pointerEvents:i=!1===r.pointerSticky?"none":void 0}=t;_2(e,"pointer-events",i)}function _0(e,t){var n,r,i;n=e,r="mix-blend-mode",null!=(i=t.mixBlendMode)&&n.style(r,i),_2(e,"opacity",t.opacity)}function _1(e,t,n){e.each(function(e){let r=t(e);if(null!=r){let e=this.ownerDocument.createElementNS(_.B.svg,"a");e.setAttribute("fill","inherit"),e.setAttributeNS(_.B.xlink,"href",r),null!=n&&e.setAttribute("target",n),this.parentNode.insertBefore(e,this).appendChild(this)}})}function _2(e,t,n){null!=n&&e.attr(t,n)}function _4(e,t,{x:n,y:r},i=_Q,o=_Q){i+=t.dx,o+=t.dy,null!=n&&n.bandwidth&&(i+=n.bandwidth()/2),null!=r&&r.bandwidth&&(o+=r.bandwidth()/2),(i||o)&&e.attr("transform",`translate(${i},${o})`)}function _5(e,t){if((e=EW(e))!==t)return e}function _3(e,t){if((e=EG(e))!==t)return e}let _6=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function _7(e){if(void 0===e)return"plot-d6a7b5";if(e=`${e}`,!_6.test(e))throw Error(`invalid class name: ${e}`);return e}function _8(e,t){if("string"==typeof t)e.property("style",t);else if(null!=t)for(let n of e)Object.assign(n.style,t)}function _9({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:o,marginLeft:s}){return[/left$/.test(e)?s:/right$/.test(e)?t-i:(s+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-o:(r+n-o)/2]}let je=class{constructor(e,t={},n={},r){let{facet:i="auto",facetAnchor:o,fx:s,fy:a,sort:l,dx:c=0,dy:u=0,margin:h=0,marginTop:d=h,marginRight:f=h,marginBottom:p=h,marginLeft:m=h,className:g,clip:y=null==r?void 0:r.clip,channels:b,tip:v,render:x}=n;if(this.data=e,this.sort=Mo(l)?l:null,this.initializer=M0(n).initializer,this.transform=this.initializer?n.transform:MJ(n).transform,null===i||!1===i?this.facet=null:(this.facet=E3(!0===i?"include":i,"facet",["auto","include","exclude","super"]),this.fx=e===EB&&"string"==typeof s?[s]:s,this.fy=e===EB&&"string"==typeof a?[a]:a),this.facetAnchor=function(e){if(null==e)return null;let t=_v.get(`${e}`.toLowerCase());if(t)return t;throw Error(`invalid facet anchor: ${e}`)}(o),t=MI(t),void 0!==b&&(t={...Object.fromEntries(Object.entries(MI(b)).map(([e,t])=>(void 0===(t="string"==typeof t?{value:t,label:e}:Mw(t)).filter&&null==t.scale&&(t={...t,filter:null}),[e,t]))),...t}),void 0!==r&&(t={...function(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:o,target:s,fill:a,fillOpacity:l,stroke:c,strokeWidth:u,strokeOpacity:h,strokeLinejoin:d,strokeLinecap:f,strokeMiterlimit:p,strokeDasharray:m,strokeDashoffset:g,opacity:y,mixBlendMode:b,imageFilter:v,paintOrder:x,pointerEvents:w,shapeRendering:k,channels:O},{ariaLabel:S,fill:C="currentColor",fillOpacity:T,stroke:A="none",strokeOpacity:E,strokeWidth:M,strokeLinecap:N,strokeLinejoin:_,strokeMiterlimit:j,paintOrder:D}){var P;null===C&&(a=null,l=null),null===A&&(c=null,h=null),Mj(C)?Mj(A)||Mj(a)&&(null==O||!O.fill)||(A="none"):Mj(A)&&(!Mj(c)||null!=O&&O.stroke)&&(C="none");let[R,I]=E2(a,C),[z,L]=E4(l,T),[q,$]=E2(c,A),[B,F]=E4(h,E),[Q,V]=E4(y);MD($)||(void 0===u&&(u=M),void 0===f&&(f=N),void 0===d&&(d=_),void 0!==p||(P=d,/^\s*round\s*$/i.test(P))||(p=j),MD(I)||void 0!==x||(x=D));let[H,U]=E4(u);return null!==C&&(e.fill=_5(I,"currentColor"),e.fillOpacity=_3(L,1)),null!==A&&(e.stroke=_5($,"none"),e.strokeWidth=_3(U,1),e.strokeOpacity=_3(F,1),e.strokeLinejoin=_5(d,"miter"),e.strokeLinecap=_5(f,"butt"),e.strokeMiterlimit=_3(p,4),e.strokeDasharray=_5(m,"none"),e.strokeDashoffset=_5(g,"0")),e.target=EW(s),e.ariaLabel=EW(S),e.ariaDescription=EW(i),e.ariaHidden=EW(o),e.opacity=_3(V,1),e.mixBlendMode=_5(b,"normal"),e.imageFilter=_5(v,"none"),e.paintOrder=_5(x,"normal"),e.pointerEvents=_5(w,"auto"),e.shapeRendering=_5(k,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:R,scale:"auto",optional:!0},fillOpacity:{value:z,scale:"auto",optional:!0},stroke:{value:q,scale:"auto",optional:!0},strokeOpacity:{value:B,scale:"auto",optional:!0},strokeWidth:{value:H,optional:!0},opacity:{value:Q,scale:"auto",optional:!0}}}(this,n,r),...t}),this.channels=Object.fromEntries(Object.entries(t).map(([t,n])=>{if(Mi(n.value)){let{value:e,label:t=n.label,scale:r=n.scale}=n.value;n={...n,label:t,scale:r,value:e}}if(e===EB&&"string"==typeof n.value){let{value:e}=n;n={...n,value:[e]}}return[t,n]}).filter(([e,{value:t,optional:n}])=>{if(null!=t)return!0;if(n)return!1;throw Error(`missing channel value: ${e}`)})),this.dx=+c,this.dy=+u,this.marginTop=+d,this.marginRight=+f,this.marginBottom=+p,this.marginLeft=+m,this.clip=Mz(y),this.tip=function(e){return!0===e?"xy":!1===e||null==e?null:"string"==typeof e?E3(e,"tip",["x","y","xy"]):e}(v),this.className=EW(g),"super"===this.facet){if(s||a)throw Error("super-faceting cannot use fx or fy");for(let e in this.channels){let{scale:n}=t[e];if("x"===n||"y"===n)throw Error("super-faceting cannot use x or y")}}null!=x&&(this.render=jn(x,this.render))}initialize(e,t,n){var r,i;let o=E6(this.data);void 0===e&&null!=o&&(e=[Mc(o)]);let s=e;null!=this.transform&&({facets:e,data:o}=this.transform(o,e,n),o=E6(o)),void 0!==e&&(e.original=s);let a=(r=this.channels,i=o,Object.fromEntries(Object.entries(r).map(([e,t])=>[e,Nk(i,t,e)])));return null!=this.sort&&function(e,t,n,r,i){let{order:o,reverse:s,reduce:a=!0,limit:l}=i;for(let c in i){if(!MW.has(c))continue;let{value:u,order:h=o,reverse:d=s,reduce:f=a,limit:p=l}=Mw(i[c]),m=null==u?void 0:u.startsWith("-");if(m&&(u=u.slice(1)),h=void 0===h?m!==("width"===u||"height"===u)?NA:NT:function(e){if(null==e||"function"==typeof e)return e;switch(`${e}`.toLowerCase()){case"ascending":return NT;case"descending":return NA}throw Error(`invalid order: ${e}`)}(h),null==f||!1===f)continue;let g="fx"===c||"fy"===c?function(e,t){let n=e.original;if(n===e)return t;let r=t.value,i=t.value=[];for(let t=0;t<n.length;++t){let o=r[n[t][0]];for(let n of e[t])i[n]=o}return t}(t,r[c]):function(e,t){for(let n in e){let r=e[n];if(r.scale===t)return r}}(n,c);if(!g)throw Error(`missing channel for scale: ${c}`);let y=g.value,[b=0,v=1/0]=Mk(p)?p:p<0?[p]:[0,p];if(null==u)g.domain=()=>{let e=Array.from(new tY(y));return d&&(e=e.reverse()),(0!==b||v!==1/0)&&(e=e.slice(b,v)),e};else{let t="data"===u?e:"height"===u?NS(n,"y1","y2"):"width"===u?NS(n,"x1","x2"):NC(n,u,"y"===u?"y2":"x"===u?"x2":void 0),r=Nt(!0===f?"max":f,t);g.domain=()=>{let e=function(e,t,...n){return t5(e,Array.from,t,n)}(Mc(y),e=>r.reduceIndex(e,t),e=>y[e]);return h&&e.sort(h),d&&e.reverse(),(0!==b||v!==1/0)&&(e=e.slice(b,v)),e.map(EX)}}}}(o,e,a,t,this.sort),{data:o,facets:e,channels:a}}filter(e,t,n){for(let r in t){let{filter:i=Er}=t[r];if(null!==i){let t=n[r];e=e.filter(e=>i(t[e]))}}return e}project(e,t,n){for(let r in e)if("x"===e[r].scale&&/^x|x$/.test(r)){let i=r.replace(/^x|x$/,"y");i in e&&"y"===e[i].scale&&function(e,t,n,r){let i;let o=n[e],s=n[t],a=o.length,l=n[e]=new Float64Array(a).fill(NaN),c=n[t]=new Float64Array(a).fill(NaN),u=r.stream({point(e,t){l[i]=e,c[i]=t}});for(i=0;i<a;++i)u.point(o[i],s[i])}(r,i,t,n.projection)}}scale(e,t,n){let r=function(e,t){let n=Object.fromEntries(Object.entries(e).map(([e,{scale:n,value:r}])=>{let i=null==n?null:t[n];return[e,null==i?r:E9(r,i)]}));return n.channels=e,n}(e,t);return n.projection&&this.project(e,r,n),r}};function jt(...e){return e.plot=je.prototype.plot,e}function jn(e,t){if(null==e)return null===t?void 0:t;if(null==t)return null===e?void 0:e;if("function"!=typeof e)throw TypeError(`invalid render transform: ${e}`);if("function"!=typeof t)throw TypeError(`invalid render transform: ${t}`);return function(n,r,i,o,s,a){return e.call(this,n,r,i,o,s,(e,n,r,i,o)=>t.call(this,e,n,r,i,o,a))}}function jr(e,t){return(null==e?void 0:e.tip)===!0?{...e,tip:t}:Mn(null==e?void 0:e.tip)&&void 0===e.tip.pointer?{...e,tip:{...e.tip,pointer:t}}:e}function ji(e,t){let n;if(!t)throw Error(`aspectRatio requires ${e} scale`);let{type:r,domain:i}=t;switch(r){case"linear":case"utc":case"time":n=Number;break;case"pow":{let e=t.scale.exponent();n=t=>Math.pow(t,e);break}case"log":n=Math.log;break;case"point":case"band":return i.length;default:throw Error(`unsupported ${e} scale for aspectRatio: ${r}`)}let[o,s]=tW(i);return Math.abs(n(s)-n(o))}let jo=new WeakMap;function js(e,t,{x:n,y:r,px:i,py:o,maxRadius:s=40,channels:a,render:l,...c}={}){return s*=1,null!=i&&(n??(n=null),a={...a,px:{value:i,scale:"x"}}),null!=o&&(r??(r=null),a={...a,py:{value:o,scale:"y"}}),{x:n,y:r,channels:a,...c,render:jn(function(n,r,i,o,a,l){let c,u,h,d,f;let p=(a={...a,pointerSticky:!1}).ownerSVGElement,{data:m}=a.getMarkState(this),g=jo.get(p);g||jo.set(p,g={sticky:!1,roots:[],renders:[]});let y=g.renders.push(j)-1,{x:b,y:v,fx:x,fy:w}=r,k=x?x(n.fx)-o.marginLeft:0,O=w?w(n.fy)-o.marginTop:0;null!=b&&b.bandwidth&&(k+=b.bandwidth()/2),null!=v&&v.bandwidth&&(O+=v.bandwidth()/2);let S=null!=n.fi;if(S){let e=g.facetStates;e||(g.facetStates=e=new Map),(c=e.get(this))||e.set(this,c=new Map)}let[C,T]=_9(this,o),{px:A,py:E}=i,M=A?e=>A[e]:ju(i,C),N=E?e=>E[e]:jh(i,T);function _(e,t){if(S){if(f&&(f=cancelAnimationFrame(f)),null==e)c.delete(n.fi);else{c.set(n.fi,t),f=requestAnimationFrame(()=>{for(let[r,i]of(f=null,c))if(i<t||i===t&&r<n.fi){e=null;break}j(e)});return}}j(e)}function j(e){if(u===e&&d===g.sticky)return;u=e,d=a.pointerSticky=g.sticky;let t=null==u?[]:[u];S&&(t.fx=n.fx,t.fy=n.fy,t.fi=n.fi);let s=l(t,r,i,o,a);if(h){if(S){let e=h.parentNode,t=h.getAttribute("transform"),n=s.getAttribute("transform");t?s.setAttribute("transform",t):s.removeAttribute("transform"),n?e.setAttribute("transform",n):e.removeAttribute("transform"),s.removeAttribute("aria-label"),s.removeAttribute("aria-description"),s.removeAttribute("aria-hidden")}h.replaceWith(s)}if(g.roots[y]=h=s,!(null==u&&(null==c?void 0:c.size)>1)){let e=null==u?null:Ej(m)?m[u]:m.get(u);a.dispatchValue(e)}return s}function D(r){if(g.sticky||"mouse"===r.pointerType&&1===r.buttons)return;let[i,a]=function(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}(r);i-=k,a-=O;let l=i<o.marginLeft||i>o.width-o.marginRight?1:e,c=a<o.marginTop||a>o.height-o.marginBottom?1:t,u=null,h=s*s;for(let e of n){let t=l*(M(e)-i),n=c*(N(e)-a),r=t*t+n*n;r<=h&&(u=e,h=r)}if(null!=u&&(1!==e||1!==t)){let e=M(u)-i,t=N(u)-a;h=e*e+t*t}_(u,h)}return p.addEventListener("pointerenter",D),p.addEventListener("pointermove",D),p.addEventListener("pointerdown",function(e){"mouse"===e.pointerType&&null!=u&&(g.sticky&&g.roots.some(t=>null==t?void 0:t.contains(e.target))||(g.sticky?(g.sticky=!1,g.renders.forEach(e=>e(null))):(g.sticky=!0,j(u)),e.stopImmediatePropagation()))}),p.addEventListener("pointerleave",function(e){"mouse"===e.pointerType&&(g.sticky||_(null))}),j(null)},l)}}function ja(e){return js(1,1,e)}function jl(e){return js(1,.01,e)}function jc(e){return js(.01,1,e)}function ju({x1:e,x2:t,x:n=e},r){return e&&t?n=>(e[n]+t[n])/2:n?e=>n[e]:()=>r}function jh({y1:e,y2:t,y:n=e},r){return e&&t?n=>(e[n]+t[n])/2:n?e=>n[e]:()=>r}function jd(e){return _f(e)&&void 0===e.interval?void 0:"tabular-nums"}let jf=Math.PI/180;function jp(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=jm(n),e.markerMid=jm(r),e.markerEnd=jm(i)}function jm(e){if(null==e||!1===e)return null;if(!0===e)return jb;if("function"==typeof e)return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return jg("auto");case"arrow-reverse":return jg("auto-start-reverse");case"dot":return jy;case"circle":case"circle-fill":return jb;case"circle-stroke":return jv;case"tick":return jx("auto");case"tick-x":return jx(90);case"tick-y":return jx(0)}throw Error(`invalid marker: ${e}`)}function jg(e){return(t,n)=>_L("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(e=>e.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function jy(e,t){return _L("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(e=>e.append("circle").attr("r",2.5)).node()}function jb(e,t){return _L("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(e=>e.append("circle").attr("r",3)).node()}function jv(e,t){return _L("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",e).attr("stroke-width",1.5).call(e=>e.append("circle").attr("r",3)).node()}function jx(e){return(t,n)=>_L("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",e).attr("stroke",t).call(e=>e.append("path").attr("d","M0,-3v6")).node()}let jw=0;function jk(e,t,{stroke:n},r){return jS(e,t,n&&(e=>n[e]),null,r)}function jO(e,t,{stroke:n,z:r},i){return jS(e,t,n&&(([e])=>n[e]),r,i)}function jS(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},o=()=>i,s,a){if(!t&&!n&&!r)return;let l=new Map,c=s&&function(e,t){let n=new Uint8Array(t.length),r=e.data().filter(e=>e.length>1),i=r.length;for(let e=0,o=_q;e<i;++e){let i=r[e];if(i.length>1){let e=i[0];o!==(o=Mh(t[e]))&&(n[e]|=1)}}for(let e=i-1,o=_q;e>=0;--e){let i=r[e];if(i.length>1){let e=i[0];o!==(o=Mh(t[e]))&&(n[e]|=2)}}return([e])=>n[e]}(e,s);function u(e,t,n){return function(r){if(n&&!n(r))return;let i=o(r),s=l.get(t);s||l.set(t,s=new Map);let c=s.get(i);if(!c){let e=this.parentNode.insertBefore(t(i,a),this),n=`plot-marker-${++jw}`;e.setAttribute("id",n),s.set(i,c=`url(#${n})`)}this.setAttribute(e,c)}}t&&e.each(u("marker-start",t,c&&(e=>1&c(e)))),n&&c&&e.each(u("marker-start",n,e=>!(1&c(e)))),n&&e.each(u("marker-mid",n)),r&&e.each(u("marker-end",r,c&&(e=>2&c(e))))}function jC({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=jA(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function jT({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=jA(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function jA(e,t,n){return void 0===e&&void 0===t&&void 0===n?_Q?[1,0]:[.5,.5]:[t,n]}function jE(e,{interval:t}){return(e={...Mw(e)}).interval=Mb(void 0===e.interval?t:e.interval),e}function jM(e,t,n,r){let i,o;let{[e]:s,[`${e}1`]:a,[`${e}2`]:l}=n,{value:c,interval:u}=jE(s,n);if(null==c||null==u&&!r)return n;let h=Mp(s);if(null==u){let t;let i={transform:e=>t||(t=EI(e,c)),label:h};return{...n,[e]:void 0,[`${e}1`]:void 0===a?i:a,[`${e}2`]:void 0!==l||a===l&&r?l:i}}function d(e){return void 0!==o&&e===i?o:o=E9(EI(i=e,c),e=>u.floor(e))}return t({...n,[e]:void 0,[`${e}1`]:void 0===a?{transform:d,label:h}:a,[`${e}2`]:void 0===l?{transform:e=>d(e).map(e=>u.offset(e)),label:h}:l})}function jN(e,t,n){let{[e]:r}=n,{value:i,interval:o}=jE(r,n);return null==i||null==o?n:t({...n,[e]:{label:Mp(r),transform:e=>{let t=E9(EI(e,i),e=>o.floor(e)),n=t.map(e=>o.offset(e));return t.map(MC(t)?(e,t)=>null==e||isNaN(e*=1)||null==(t=n[t])||isNaN(t*=1)?void 0:new Date((e+t)/2):(e,t)=>null==e||null==(t=n[t])?NaN:(+e+ +t)/2)}}})}let j_={ariaLabel:"rule",fill:null,stroke:"currentColor"};class jj extends je{constructor(e,t={}){let{x:n,y1:r,y2:i,inset:o=0,insetTop:s=o,insetBottom:a=o}=t;super(e,{x:{value:n,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},y2:{value:i,scale:"y",optional:!0}},jr(t,"x"),j_),this.insetTop=EG(s),this.insetBottom=EG(a),jp(this,t)}render(e,t,n,r,i){let{x:o,y:s}=t,{x:a,y1:l,y2:c}=n,{width:u,height:h,marginTop:d,marginRight:f,marginLeft:p,marginBottom:m}=r,{insetTop:g,insetBottom:y}=this;return _L("svg:g",i).call(_J,this,r,i).call(_4,this,{x:a&&o},_Q,0).call(t=>t.selectAll().data(e).enter().append("line").call(_0,this).attr("x1",a?e=>a[e]:(p+u-f)/2).attr("x2",a?e=>a[e]:(p+u-f)/2).attr("y1",l&&!_m(s)?e=>l[e]+g:d+g).attr("y2",c&&!_m(s)?s.bandwidth?e=>c[e]+s.bandwidth()-y:e=>c[e]-y:h-m-y).call(_G,this,n).call(jk,this,n,i)).node()}}class jD extends je{constructor(e,t={}){let{x1:n,x2:r,y:i,inset:o=0,insetRight:s=o,insetLeft:a=o}=t;super(e,{y:{value:i,scale:"y",optional:!0},x1:{value:n,scale:"x",optional:!0},x2:{value:r,scale:"x",optional:!0}},jr(t,"y"),j_),this.insetRight=EG(s),this.insetLeft=EG(a),jp(this,t)}render(e,t,n,r,i){let{x:o,y:s}=t,{y:a,x1:l,x2:c}=n,{width:u,height:h,marginTop:d,marginRight:f,marginLeft:p,marginBottom:m}=r,{insetLeft:g,insetRight:y}=this;return _L("svg:g",i).call(_J,this,r,i).call(_4,this,{y:a&&s},0,_Q).call(t=>t.selectAll().data(e).enter().append("line").call(_0,this).attr("x1",l&&!_m(o)?e=>l[e]+g:p+g).attr("x2",c&&!_m(o)?o.bandwidth?e=>c[e]+o.bandwidth()-y:e=>c[e]-y:u-f-y).attr("y1",a?e=>a[e]:(d+h-m)/2).attr("y2",a?e=>a[e]:(d+h-m)/2).call(_G,this,n).call(jk,this,n,i)).node()}}function jP(e,t){let{x:n=EV,y:r,y1:i,y2:o,...s}=function(e={}){return jM("y",jT,e)}(t);return[i,o]=jI(r,i,o),new jj(e,{...s,x:n,y1:i,y2:o})}function jR(e,t){let{y:n=EV,x:r,x1:i,x2:o,...s}=function(e={}){return jM("x",jC,e)}(t);return[i,o]=jI(r,i,o),new jD(e,{...s,y:n,x1:i,x2:o})}function jI(e,t,n){if(null==e){if(void 0===t){if(void 0!==n)return[0,n]}else if(void 0===n)return[0,t]}else{if(void 0===t)return void 0===n?[0,e]:[e,n];if(void 0===n)return[e,t]}return[t,n]}function jz(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)"function"!=typeof t[r]&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let o=0;o<n;++o)i+=t[o](r)+e[o+1];return i}}let jL={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},jq=class extends je{constructor(e,t={}){let{x:n,y:r,text:i=Mk(e)&&MO(e)?EV:EQ,frameAnchor:o,textAnchor:s=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:a=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:l=1,lineWidth:c=1/0,textOverflow:u,monospace:h,fontFamily:d=h?"ui-monospace, monospace":void 0,fontSize:f,fontStyle:p,fontVariant:m,fontWeight:g,rotate:y}=t,[b,v]=E4(y,0),[x,w]=function(e){return null==e||"number"==typeof e?[void 0,e]:"string"!=typeof e?[e,void 0]:(e=e.trim().toLowerCase(),jU.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}(f);if(super(e,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},fontSize:{value:x,optional:!0},rotate:{value:function(e){return null==e?null:{transform:t=>EI(t,e,Float64Array),label:Mp(e)}}(b),optional:!0},text:{value:i,filter:Es,optional:!0}},t,jL),this.rotate=v,this.textAnchor=_5(s,"middle"),this.lineAnchor=E3(a,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+l,this.lineWidth=+c,this.textOverflow=j$(u),this.monospace=!!h,this.fontFamily=EW(d),this.fontSize=w,this.fontStyle=EW(p),this.fontVariant=EW(m),this.fontWeight=EW(g),this.frameAnchor=MR(o),!(this.lineWidth>=0))throw Error(`invalid lineWidth: ${c}`);this.splitLines=jY(this),this.clipLine=jZ(this)}render(e,t,n,r,i){let{x:o,y:s}=t,{x:a,y:l,rotate:c,text:u,title:h,fontSize:d}=n,{rotate:f}=this,[p,m]=_9(this,r);return _L("svg:g",i).call(_J,this,r,i).call(jH,this,u,r).call(_4,this,{x:a&&o,y:l&&s}).call(t=>t.selectAll().data(e).enter().append("text").call(_0,this).call(jB,this,u,h).attr("transform",jz`translate(${a?e=>a[e]:p},${l?e=>l[e]:m})${c?e=>` rotate(${c[e]})`:f?` rotate(${f})`:""}`).call(_2,"font-size",d&&(e=>d[e])).call(_G,this,n)).node()}};function j$(e){return null==e?null:E3(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function jB(e,t,n,r){if(!n)return;let{lineAnchor:i,lineHeight:o,textOverflow:s,splitLines:a,clipLine:l}=t;e.each(function(e){let t=a(_F(n[e])??"").map(l),c=t.length,u="top"===i?.71:"bottom"===i?1-c:(164-100*c)/200;if(c>1){let e=0;for(let n=0;n<c;++n){if(++e,!t[n])continue;let r=this.ownerDocument.createElementNS(_.B.svg,"tspan");r.setAttribute("x",0),n===e-1?r.setAttribute("y",`${(u+n)*o}em`):r.setAttribute("dy",`${e*o}em`),r.textContent=t[n],this.appendChild(r),e=0}}else u&&this.setAttribute("y",`${u*o}em`),this.textContent=t[0];if(s&&!r&&t[0]!==n[e]){let t=this.ownerDocument.createElementNS(_.B.svg,"title");t.textContent=n[e],this.appendChild(t)}})}function jF(e,{x:t,y:n,...r}={}){return void 0===r.frameAnchor&&([t,n]=Ms(t,n)),new jq(e,{...r,x:t,y:n})}function jQ(e,{x:t=EV,...n}={}){return new jq(e,function(e={}){return jN("y",jT,e)}({...n,x:t}))}function jV(e,{y:t=EV,...n}={}){return new jq(e,function(e={}){return jN("x",jC,e)}({...n,y:t}))}function jH(e,t,n){var r;_2(e,"text-anchor",t.textAnchor),_2(e,"font-family",t.fontFamily),_2(e,"font-size",t.fontSize),_2(e,"font-style",t.fontStyle),_2(e,"font-variant",void 0===t.fontVariant?(r=n)&&(function(e){for(let t of e)if(null!=t)return"number"==typeof t}(r)||MC(r))?"tabular-nums":void 0:t.fontVariant),_2(e,"font-weight",t.fontWeight)}let jU=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]),jW={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function jG(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=j5(e,i))r+=jW[e[i]]??(j6(e,i)?120:jW.e);return r}function jX(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=j5(e,i))r+=j6(e,i)?126:63;return r}function jY({monospace:e,lineWidth:t,textOverflow:n}){if(null!=n||t==1/0)return e=>e.split(/\r\n?|\n/g);let r=e?jX:jG,i=100*t;return e=>(function(e,t,n){let r=[],i,o=0;for(let[s,a,l]of function*(e){let t=0,n=0,r=e.length;for(;n<r;){let r=1;switch(e[n]){case"\xad":case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];" "===e[++n];);t=n;break;case"\r":e[n+1]===`
`&&++r;case`
`:yield[t,n,!0],n+=r,t=n;break;default:++n}}yield[t,n,!0]}(e)){if(void 0===i&&(i=s),o>i&&n(e,i,a)>t&&(r.push(e.slice(i,o)+("\xad"===e[o-1]?"-":"")),i=s),l){r.push(e.slice(i,a)),i=void 0;continue}o=a}return r})(e,i,r)}function jZ({monospace:e,lineWidth:t,textOverflow:n}){if(null==n||t==1/0)return e=>e;let r=e?jX:jG,i=100*t;switch(n){case"clip-start":return e=>j1(e,i,r,"");case"clip-end":return e=>j0(e,i,r,"");case"ellipsis-start":return e=>j1(e,i,r,jK);case"ellipsis-middle":return e=>(function(e,t,n,r){let i=n(e=e.trim());if(i<=t)return e;let o=n(r)/2,[s,a]=jJ(e,t/2,n,o),[l]=jJ(e,i-t/2-a+o,n,-o);return l<0?r:e.slice(0,s).trimEnd()+r+e.slice(j5(e,l)).trimStart()})(e,i,r,jK);case"ellipsis-end":return e=>j0(e,i,r,jK)}}let jK="";function jJ(e,t,n,r){let i=[],o=0;for(let s=0,a=0,l=e.length;s<l;s=a){a=j5(e,s);let l=n(e,s,a);if(o+l>t){for(o+=r;o>t&&s>0;)a=s,o-=n(e,s=i.pop(),a);return[s,t-o]}o+=l,i.push(s)}return[-1,0]}function j0(e,t,n,r){e=e.trim();let i=n(r),[o]=jJ(e,t,n,i);return o<0?e:e.slice(0,o).trimEnd()+r}function j1(e,t,n,r){let i=n(e=e.trim());if(i<=t)return e;let o=n(r),[s]=jJ(e,i-t+o,n,-o);return s<0?r:r+e.slice(j5(e,s)).trimStart()}let j2=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,j4=RegExp("\\p{Extended_Pictographic}","uy");function j5(e,t){var n,r,i,o;return t+=!function(e,t){let n=e.charCodeAt(t);if(n>=55296&&n<56320){let n=e.charCodeAt(t+1);return n>=56320&&n<57344}return!1}(e,t)?1:2,!j3(n=e,r=t)&&(j2.lastIndex=r,j2.test(n))&&(t=j2.lastIndex),(i=e,o=t,8205===i.charCodeAt(o))?j5(e,t+1):t}function j3(e,t){return 128>e.charCodeAt(t)}function j6(e,t){return!j3(e,t)&&(j4.lastIndex=t,j4.test(e))}let j7={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},j8={draw(e,t,n){let r=t*n/17.5;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},j9=new Map([["arrow",j8],["spike",{draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}}]]);class De extends je{constructor(e,t={}){let{x:n,y:r,r:i=3.5,length:o,rotate:s,shape:a=j8,anchor:l="middle",frameAnchor:c}=t,[u,h]=E4(o,12),[d,f]=E4(s,0);super(e,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},length:{value:u,scale:"length",optional:!0},rotate:{value:d,optional:!0}},t,j7),this.r=+i,this.length=h,this.rotate=f,this.shape=function(e){if(e&&"function"==typeof e.draw)return e;let t=j9.get(`${e}`.toLowerCase());if(t)return t;throw Error(`invalid shape: ${e}`)}(a),this.anchor=E3(l,"anchor",["start","middle","end"]),this.frameAnchor=MR(c)}render(e,t,n,r,i){let{x:o,y:s}=t,{x:a,y:l,length:c,rotate:u}=n,{length:h,rotate:d,anchor:f,shape:p,r:m}=this,[g,y]=_9(this,r);return _L("svg:g",i).call(_J,this,r,i).call(_4,this,{x:a&&o,y:l&&s}).call(t=>t.selectAll().data(e).enter().append("path").call(_0,this).attr("transform",jz`translate(${a?e=>a[e]:g},${l?e=>l[e]:y})${u?e=>` rotate(${u[e]})`:d?` rotate(${d})`:""}${"start"===f?"":"end"===f?c?e=>` translate(0,${c[e]})`:` translate(0,${h})`:c?e=>` translate(0,${c[e]/2})`:` translate(0,${h/2})`}`).attr("d",c?e=>{let t=n4();return p.draw(t,c[e],m),t}:(()=>{let e=n4();return p.draw(e,h,m),e})()).call(_G,this,n)).node()}}function Dt(e,t={}){let{x:n=EV,...r}=t;return new De(e,{...r,x:n})}function Dn(e,t={}){let{y:n=EV,...r}=t;return new De(e,{...r,y:n})}function Dr(e,t){return arguments.length<2&&!Mk(e)&&(t=e,e=null),void 0===t&&(t={}),[e,t]}function Di({anchor:e}={},t){return void 0===e?t[0]:E3(e,"anchor",t)}function Do(e){return Di(e,["left","right"])}function Ds(e){return Di(e,["right","left"])}function Da(e){return Di(e,["bottom","top"])}function Dl(e){return Di(e,["top","bottom"])}function Dc(){let[e,t]=Dr(...arguments);return Df("y",Do(t),e,t)}function Du(){let[e,t]=Dr(...arguments);return Df("fy",Ds(t),e,t)}function Dh(){let[e,t]=Dr(...arguments);return Dp("x",Da(t),e,t)}function Dd(){let[e,t]=Dr(...arguments);return Dp("fx",Dl(t),e,t)}function Df(e,t,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:s=i,strokeWidth:a=1,fill:l=r,fillOpacity:c=i,textAnchor:u,textStroke:h,textStrokeOpacity:d,textStrokeWidth:f,tickSize:p=6*("y"===e),tickPadding:m,tickRotate:g,x:y,margin:b,marginTop:v=void 0===b?20:b,marginRight:x=void 0===b?40*("right"===t):b,marginBottom:w=void 0===b?20:b,marginLeft:k=void 0===b?40*("left"===t):b,label:O,labelAnchor:S,labelArrow:C,labelOffset:T,ariaLabel:A=`${e}-axis`,...E}){return p=EG(p),m=EG(m),g=EG(g),void 0!==S&&(S=E3(S,"labelAnchor",["center","top","bottom"])),C=DD(C),jt(p&&!Mj(o)?function(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:s=t+("y"===e?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetLeft:u=c,insetRight:h=c,dx:d=0,y:f="y"===e?void 0:null,ariaLabel:p,...m}){return DO(Dn,e,n,{ariaLabel:`${p} tick`,ariaHidden:!0},{strokeWidth:r,strokeLinecap:i,strokeLinejoin:o,facetAnchor:s,frameAnchor:a,y:f,...m,dx:"left"===t?+d-_Q+ +u:+d+_Q-h,anchor:"start",length:l,shape:"left"===t?DM:DN})}(e,t,n,{stroke:o,strokeOpacity:s,strokeWidth:a,tickSize:p,tickPadding:m,tickRotate:g,x:y,ariaLabel:A,...E}):null,Mj(l)?null:function(e,t,n,{facetAnchor:r=t+("y"===e?"-empty":""),frameAnchor:i=t,tickSize:o,tickRotate:s=0,tickPadding:a=Math.max(3,9-o)+(Math.abs(s)>60?4*Math.cos(s*jf):0),text:l,textAnchor:c=Math.abs(s)>60?"middle":"left"===t?"end":"start",lineAnchor:u=s>60?"top":s<-60?"bottom":"middle",fontVariant:h,inset:d=0,insetLeft:f=d,insetRight:p=d,dx:m=0,ariaLabel:g,y:y="y"===e?void 0:null,...b}){return DO(jV,e,n,{ariaLabel:`${g} tick label`},{facetAnchor:r,frameAnchor:i,text:l,textAnchor:c,lineAnchor:u,fontVariant:h,rotate:s,y:y,...b,dx:"left"===t?+m-o-a+ +f:+m+ +o+ +a-p},function(e,n,r,i,o){void 0===h&&(this.fontVariant=D_(e)),void 0===l&&(o.text=DS(e,n,r,i,t))})}(e,t,n,{fill:l,fillOpacity:c,stroke:h,strokeOpacity:d,strokeWidth:f,textAnchor:u,tickSize:p,tickPadding:m,tickRotate:g,x:y,marginTop:v,marginRight:x,marginBottom:w,marginLeft:k,ariaLabel:A,...E}),Mj(l)||null===O?null:jF([],Dk({fill:l,fillOpacity:c,...E},function(n,r,i,o,s){let a=o[e],{marginTop:l,marginRight:c,marginBottom:u,marginLeft:h}="y"===e&&s.inset||s,d=S??(a.bandwidth?"center":"top"),f=T??("right"===t?c:h)-3;return"center"===d?(this.textAnchor=void 0,this.lineAnchor="right"===t?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor="right"===t?"end":"start",this.lineAnchor=d,this.frameAnchor=`${d}-${t}`,this.rotate=0),this.dy="top"===d?3-l:"bottom"===d?u-3:0,this.dx="right"===t?f:-f,this.ariaLabel=`${A} label`,{facets:[[0]],channels:{text:{value:[Dj(e,a,{anchor:t,label:O,labelAnchor:d,labelArrow:C})]}}}})))}function Dp(e,t,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:s=i,strokeWidth:a=1,fill:l=r,fillOpacity:c=i,textAnchor:u,textStroke:h,textStrokeOpacity:d,textStrokeWidth:f,tickSize:p=6*("x"===e),tickPadding:m,tickRotate:g,y:y,margin:b,marginTop:v=void 0===b?30*("top"===t):b,marginRight:x=void 0===b?20:b,marginBottom:w=void 0===b?30*("bottom"===t):b,marginLeft:k=void 0===b?20:b,label:O,labelAnchor:S,labelArrow:C,labelOffset:T,ariaLabel:A=`${e}-axis`,...E}){return p=EG(p),m=EG(m),g=EG(g),void 0!==S&&(S=E3(S,"labelAnchor",["center","left","right"])),C=DD(C),jt(p&&!Mj(o)?function(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:s=t+("x"===e?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetTop:u=c,insetBottom:h=c,dy:d=0,x:f="x"===e?void 0:null,ariaLabel:p,...m}){return DO(Dt,e,n,{ariaLabel:`${p} tick`,ariaHidden:!0},{strokeWidth:r,strokeLinejoin:o,strokeLinecap:i,facetAnchor:s,frameAnchor:a,x:f,...m,dy:"bottom"===t?+d-_Q-h:+d+_Q+ +u,anchor:"start",length:l,shape:"bottom"===t?DA:DE})}(e,t,n,{stroke:o,strokeOpacity:s,strokeWidth:a,tickSize:p,tickPadding:m,tickRotate:g,y:y,ariaLabel:A,...E}):null,Mj(l)?null:function(e,t,n,{facetAnchor:r=t+("x"===e?"-empty":""),frameAnchor:i=t,tickSize:o,tickRotate:s=0,tickPadding:a=Math.max(3,9-o)+(Math.abs(s)>=10?4*Math.cos(s*jf):0),text:l,textAnchor:c=Math.abs(s)>=10?s<0^"bottom"===t?"start":"end":"middle",lineAnchor:u=Math.abs(s)>=10?"middle":"bottom"===t?"top":"bottom",fontVariant:h,inset:d=0,insetTop:f=d,insetBottom:p=d,dy:m=0,x:g="x"===e?void 0:null,ariaLabel:y,...b}){return DO(jQ,e,n,{ariaLabel:`${y} tick label`},{facetAnchor:r,frameAnchor:i,text:void 0===l?null:l,textAnchor:c,lineAnchor:u,fontVariant:h,rotate:s,x:g,...b,dy:"bottom"===t?+m+ +o+ +a-p:+m-o-a+ +f},function(e,n,r,i,o){void 0===h&&(this.fontVariant=D_(e)),void 0===l&&(o.text=DS(e,n,r,i,t))})}(e,t,n,{fill:l,fillOpacity:c,stroke:h,strokeOpacity:d,strokeWidth:f,textAnchor:u,tickSize:p,tickPadding:m,tickRotate:g,y:y,marginTop:v,marginRight:x,marginBottom:w,marginLeft:k,ariaLabel:A,...E}),Mj(l)||null===O?null:jF([],Dk({fill:l,fillOpacity:c,...E},function(n,r,i,o,s){let a=o[e],{marginTop:l,marginRight:c,marginBottom:u,marginLeft:h}="x"===e&&s.inset||s,d=S??(a.bandwidth?"center":"right"),f=T??("top"===t?l:u)-3;return"center"===d?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${d}`,this.textAnchor="right"===d?"end":"start"),this.lineAnchor=t,this.dy="top"===t?-f:f,this.dx="right"===d?c-3:"left"===d?3-h:0,this.ariaLabel=`${A} label`,{facets:[[0]],channels:{text:{value:[Dj(e,a,{anchor:t,label:O,labelAnchor:d,labelArrow:C})]}}}})))}function Dm(){let[e,t]=Dr(...arguments);return Dv("y",Do(t),e,t)}function Dg(){let[e,t]=Dr(...arguments);return Dv("fy",Ds(t),e,t)}function Dy(){let[e,t]=Dr(...arguments);return Dx("x",Da(t),e,t)}function Db(){let[e,t]=Dr(...arguments);return Dx("fx",Dl(t),e,t)}function Dv(e,t,n,{y:r="y"===e?void 0:null,x:i=null,x1:o="left"===t?i:null,x2:s="right"===t?i:null,ariaLabel:a=`${e}-grid`,ariaHidden:l=!0,...c}){return DO(jR,e,n,{ariaLabel:a,ariaHidden:l},{y:r,x1:o,x2:s,...Dw(c)})}function Dx(e,t,n,{x:r="x"===e?void 0:null,y:i=null,y1:o="top"===t?i:null,y2:s="bottom"===t?i:null,ariaLabel:a=`${e}-grid`,ariaHidden:l=!0,...c}){return DO(jP,e,n,{ariaLabel:a,ariaHidden:l},{x:r,y1:o,y2:s,...Dw(c)})}function Dw({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...o}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...o}}function Dk({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:s,monospace:a,pointerEvents:l,shapeRendering:c,clip:u=!1},h){return[,e]=E2(e),[,t]=E4(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:s,monospace:a,pointerEvents:l,shapeRendering:c,clip:u,initializer:h}}function DO(e,t,n,r,i,o){let s;let a=M0(i).initializer,l=e(n,M0({...i,initializer:function(e,n,r,a,l,c){let u=null==e&&("fx"===t||"fy"===t),{[t]:h}=a;if(!h)throw Error(`missing scale: ${t}`);let d=h.domain(),{interval:f,ticks:p,tickFormat:m,tickSpacing:g="x"===t?80:35}=i;if("string"==typeof p&&DP(h)&&(f=p,p=void 0),void 0===p&&(p=Mv(f,h.type)??function(e,t){let[n,r]=tW(e.range());return(r-n)/t}(h,g)),null==e){if(Mk(p))e=E7(p);else if(Mx(p))e=DT(p,...tW(d));else if(h.interval){let t=h.interval;if(h.ticks){let[n,r]=tW(d),i=(r-n)/t[Eb];e=DT(t=EA(t,i/p)??t,n,r)}else(t=EA(t,(e=d).length/p)??t)!==h.interval&&(e=DT(t,...tW(e)));if(t===h.interval){let t=Math.round(e.length/p);t>1&&(e=e.filter((e,n)=>n%t==0))}}else e=h.ticks?h.ticks(p):d;if(!h.ticks&&e.length&&e!==d){let n=new tY(d);(e=e.filter(e=>n.has(e))).length||N0(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}"y"===t||"x"===t?n=[Mc(e)]:s[t]={scale:t,value:EV}}null==o||o.call(this,h,e,p,m,s);let y=Object.fromEntries(Object.entries(s).map(([t,n])=>[t,{...n,value:EI(e,n.value)}]));return u&&(n=c.filterFacets(e,y)),{data:e,facets:n,channels:y}}},a));return null==n?(s=l.channels,l.channels={}):s={},void 0!==r&&Object.assign(l,r),void 0===l.clip&&(l.clip=!1),l}function DS(e,t,n,r,i){return{value:DC(e,t,n,r,i)}}function DC(e,t,n,r,i){return"function"!=typeof r||"log"===e.type&&e.tickFormat?void 0===r&&t&&MC(t)?function(e,t,n){let r=na(function(e,t=function(e,t){return[e,t]}){let n=[],r,i=!1;for(let o of e)i&&n.push(t(r,o)),r=o,i=!0;return n}(t,(e,t)=>Math.abs(t-e)));if(r<1e3)return EE("millisecond","utc",n);for(let[i,o,s,a]of"time"===e?Ew:"utc"===e?Ex:Ek){if(r>a||"hour"===i&&!r)break;if(t.every(e=>o.floor(e)>=e))return EE(i,s,n)}}(e.type,t,i)??_F:e.tickFormat?e.tickFormat("number"==typeof n?n:null,r):"string"==typeof r&&e.domain().length>0?(MC(e.domain())?f:r6)(r):void 0===r?_F:EZ(r):r}function DT(e,t,n){return e.range(t,e.offset(e.floor(n)))}let DA={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},DE={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},DM={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},DN={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function D_(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function Dj(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:o}={}){if(!(null==r||r.inferred&&DP(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),"auto"===o&&(o=(!t.bandwidth||t.interval)&&!/[]/.test(r)),!o)return r;if(!0===o){let n=Math.sign(Ef(t.domain()))*Math.sign(Ef(t.range()));n&&(o=/x$/.test(e)||"center"===i?/x$/.test(e)===n<0?"left":"right":n<0?"up":"down")}switch(o){case"left":return` ${r}`;case"right":return`${r} `;case"up":return"right"===n?`${r} `:` ${r}`;case"down":return"right"===n?`${r} `:` ${r}`}return r}}function DD(e="auto"){return!Mj(e)&&("boolean"==typeof e?e:E3(e,"labelArrow",["auto","up","right","down","left"]))}function DP(e){return MC(e.domain())}function DR(e,t){if(null==t)return t;let n=e(t);if(!n)throw Error(`scale not found: ${t}`);return n}function DI(e,t={},n){let r,{columns:i,tickFormat:o,fontVariant:s=jd(e),swatchSize:a=15,swatchWidth:l=a,swatchHeight:c=a,marginLeft:u=0,className:h,style:d,width:f}=t,p=_z(t);h=_7(h),o=DC(e.scale,e.domain,void 0,o);let m=_L("div",p).attr("class",`${h}-swatches ${h}-swatches-${null!=i?"columns":"wrap"}`);return null!=i?(r=`:where(.${h}-swatches-columns .${h}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${h}-swatches-columns .${h}-swatch::before) {
  flex-shrink: 0;
}
:where(.${h}-swatches-columns .${h}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,m.style("columns",i).selectAll().data(e.domain).enter().append("div").attr("class",`${h}-swatch`).call(n,e,l,c).call(e=>e.append("div").attr("class",`${h}-swatch-label`).attr("title",o).text(o))):(r=`:where(.${h}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${h}-swatches-wrap .${h}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,m.selectAll().data(e.domain).enter().append("span").attr("class",`${h}-swatch`).call(n,e,l,c).append(function(){return this.ownerDocument.createTextNode(o.apply(this,arguments))})),m.call(e=>e.insert("style","*").text(`:where(.${h}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${h}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${r}`)).style("margin-left",u?`${+u}px`:null).style("width",void 0===f?null:`${+f}px`).style("font-variant",_5(s,"normal")).call(_8,d).node()}let Dz=new Map([["symbol",function(e,{fill:t=void 0!==(t=>null==(t=e.hint)?void 0:t.fill)()?e.hint.fill:"none",fillOpacity:n=1,stroke:r=void 0!==(t=>null==(t=e.hint)?void 0:t.stroke)()?e.hint.stroke:Mj(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:o=1.5,r:s=4.5,...a}={},l){let[c,u]=E2(t),[h,d]=E2(r),f=DR(l,c),p=DR(l,h),m=s*s*Math.PI;return n=E4(n)[1],i=E4(i)[1],o=E4(o)[1],DI(e,a,(t,r,s,a)=>t.append("svg").attr("viewBox","-8 -8 16 16").attr("width",s).attr("height",a).attr("fill","color"===c?e=>f.scale(e):u).attr("fill-opacity",n).attr("stroke","color"===h?e=>p.scale(e):d).attr("stroke-opacity",i).attr("stroke-width",o).append("path").attr("d",t=>{let n=n4();return e.scale(t).draw(n,m),n}))}],["color",Dq],["opacity",function({type:e,interpolate:t,...n},{legend:r=!0,color:i=(0,_.u)(0,0,0),...o}){if(!t)throw Error(`${e} opacity scales are not supported`);if(!0===r&&(r="ramp"),"ramp"!==`${r}`.toLowerCase())throw Error(`${r} opacity legends are not supported`);return Dq({type:e,...n,interpolate:function(e){let{r:t,g:n,b:r}=(0,_.u)(e)||(0,_.u)(0,0,0);return e=>`rgba(${t},${n},${r},${e})`}(i)},{legend:r,...o})}]]);function DL({className:e,...t},{label:n,ticks:r,tickFormat:i}={},o){return function(e={},...t){let n=e;for(let r of t)for(let t in r)if(void 0===n[t]){let i=r[t];n===e?n={...n,[t]:i}:n[t]=i}return n}(o,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function Dq(e,{legend:t=!0,...n}){if(!0===t&&(t="ordinal"===e.type?"swatches":"ramp"),void 0!==e.domain)switch(`${t}`.toLowerCase()){case"swatches":return function(e,{opacity:t,...n}={}){if(!_f(e)&&!_p(e))throw Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return DI(e,n,(e,n,r,i)=>e.append("svg").attr("width",r).attr("height",i).attr("fill",n.scale).attr("fill-opacity",E4(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}(e,n);case"ramp":return function(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:o=44+r,marginTop:s=18,marginRight:a=0,marginBottom:l=16+r,marginLeft:c=0,style:u,ticks:h=(i-c-a)/64,tickFormat:d,fontVariant:f=jd(e),round:p=!0,opacity:m,className:g}=t,y=_z(t);g=_7(g),m=E4(m)[1],null===d&&(d=()=>null);let b=_L("svg",y).attr("class",`${g}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",o).attr("viewBox",`0 0 ${i} ${o}`).call(e=>e.append("style").text(`:where(.${g}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${g}-ramp text) {
  white-space: pre;
}`)).call(_8,u),v=e=>e.selectAll(".tick line").attr("y1",s+l-o),x,w=p?(e,t)=>e.rangeRound(t):(e,t)=>e.range(t),{type:k,domain:O,range:S,interpolate:C,scale:T,pivot:A}=e;if(C){let e=void 0===S?C:nY(1===C.length?NZ(C):C,S);x=w(T.copy(),nZ((0,_.k)(c,i-a),Math.min(O.length+(void 0!==A),void 0===S?1/0:S.length)));let t=y.document.createElement("canvas");t.width=256,t.height=1;let n=t.getContext("2d");for(let t=0;t<256;++t)n.fillStyle=e(t/255),n.fillRect(t,0,1,1);b.append("image").attr("opacity",m).attr("x",c).attr("y",s).attr("width",i-c-a).attr("height",o-s-l).attr("preserveAspectRatio","none").attr("xlink:href",t.toDataURL())}else if("threshold"===k){let e=void 0===d?e=>e:"string"==typeof d?r6(d):d;x=w(oY().domain([-1,S.length-1]),[c,i-a]),b.append("g").attr("fill-opacity",m).selectAll().data(S).enter().append("rect").attr("x",(e,t)=>x(t-1)).attr("y",s).attr("width",(e,t)=>x(t)-x(t-1)).attr("height",o-s-l).attr("fill",e=>e),h=E9(O,(e,t)=>t),d=t=>e(O[t],t)}else x=w(o$().domain(O),[c,i-a]),b.append("g").attr("fill-opacity",m).selectAll().data(O).enter().append("rect").attr("x",x).attr("y",s).attr("width",Math.max(0,x.bandwidth()-1)).attr("height",o-s-l).attr("fill",T),v=()=>{};return b.append("g").attr("transform",`translate(0,${o-l})`).call((function(e,t){var n=[],r=null,i=null,o=6,s=6,a=3,l="u">typeof window&&window.devicePixelRatio>1?0:.5;function c(e){var c=r??(t.ticks?t.ticks.apply(t,n):t.domain()),u=i??(t.tickFormat?t.tickFormat.apply(t,n):nw),h=Math.max(o,0)+a,d=t.range(),f=+d[0]+l,p=+d[d.length-1]+l,m=(t.bandwidth?function(e,t){return t=Math.max(0,e.bandwidth()-2*t)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}:function(e){return t=>+e(t)})(t.copy(),l),g=e.selection?e.selection():e,y=g.selectAll(".domain").data([null]),b=g.selectAll(".tick").data(c,t).order(),v=b.exit(),x=b.enter().append("g").attr("class","tick"),w=b.select("line"),k=b.select("text");y=y.merge(y.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),b=b.merge(x),w=w.merge(x.append("line").attr("stroke","currentColor").attr("y2",+o)),k=k.merge(x.append("text").attr("fill","currentColor").attr("y",+h).attr("dy","0.71em")),e!==g&&(y=y.transition(e),b=b.transition(e),w=w.transition(e),k=k.transition(e),v=v.transition(e).attr("opacity",1e-6).attr("transform",function(e){return isFinite(e=m(e))?nk(e+l):this.getAttribute("transform")}),x.attr("opacity",1e-6).attr("transform",function(e){var t=this.parentNode.__axis;return nk((t&&isFinite(t=t(e))?t:m(e))+l)})),v.remove(),y.attr("d",s?"M"+f+","+ +s+"V"+l+"H"+p+"V"+ +s:"M"+f+","+l+"H"+p),b.attr("opacity",1).attr("transform",function(e){return nk(m(e)+l)}),w.attr("y2",+o),k.attr("y",+h).text(u),g.filter(nO).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),g.each(function(){this.__axis=m})}return c.scale=function(e){return arguments.length?(t=e,c):t},c.ticks=function(){return n=Array.from(arguments),c},c.tickArguments=function(e){return arguments.length?(n=null==e?[]:Array.from(e),c):n.slice()},c.tickValues=function(e){return arguments.length?(r=null==e?null:Array.from(e),c):r&&r.slice()},c.tickFormat=function(e){return arguments.length?(i=e,c):i},c.tickSize=function(e){return arguments.length?(o=s=+e,c):o},c.tickSizeInner=function(e){return arguments.length?(o=+e,c):o},c.tickSizeOuter=function(e){return arguments.length?(s=+e,c):s},c.tickPadding=function(e){return arguments.length?(a=+e,c):a},c.offset=function(e){return arguments.length?(l=+e,c):l},c})(0,x).ticks(Array.isArray(h)?null:h,"string"==typeof d?d:void 0).tickFormat("function"==typeof d?d:void 0).tickSize(r).tickValues(Array.isArray(h)?h:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",_5(f,"normal")).call(v).call(e=>e.select(".domain").remove()),void 0!==n&&b.append("text").attr("x",c).attr("y",s-6).attr("fill","currentColor").attr("font-weight","bold").text(n),b.node()}(e,n);default:throw Error(`unknown legend type: ${t}`)}}let D$={length:!0};function DB(e,t){let n=0,r=0;for(let i of e){let e=t[i];e<n&&(n=e),e>r&&(r=e)}return[n,r]}function DF(e,t,n){for(let r of e)for(let e of r){let[r,i]=DB(e,n);for(let o of e){let e=1/(i-r||1);t[o]=e*(t[o]-r),n[o]=e*(n[o]-r)}}}function DQ(e,t,n){for(let r of e){for(let e of r){let[r,i]=DB(e,n);for(let o of e){let e=(i+r)/2;t[o]-=e,n[o]-=e}}DH(r,t,n)}DU(e,t,n)}function DV(e,t,n,r){for(let i of e){let e=new tX,o=0;for(let s of i){let i=-1,a=s.map(e=>Math.abs(n[e]-t[e])),l=s.map(o=>{i=r?r[o]:++i;let s=n[o]-t[o],a=e.has(i)?s-e.get(i):0;return e.set(i,s),a}),c=[0,...function(e,t){var n=0;return Float64Array.from(e,e=>n+=+e||0)}(l)];for(let e of s)t[e]+=o,n[e]+=o;let u=nv(a);u&&(o-=nv(a,(e,t)=>(l[t]/2+c[t])*e)/u)}DH(i,t,n)}DU(e,t,n)}function DH(e,t,n){let r=nc(e,e=>nc(e,e=>t[e]));for(let i of e)for(let e of i)t[e]-=r,n[e]-=r}function DU(e,t,n){let r=e.length;if(1===r)return;let i=e.map(e=>e.flat()),o=i.map(e=>(nc(e,e=>t[e])+na(e,e=>n[e]))/2),s=nc(o);for(let e=0;e<r;e++){let r=s-o[e];for(let o of i[e])t[o]+=r,n[o]+=r}}function DW(e){return DX(e,(e,t,n,r)=>{let i=Mc(e),o=t8(i,e=>t[nd(e,e=>n[e])],e=>r[e]),s=t4(i,e=>nv(e,e=>n[e]),e=>r[e]),a=[],l=[],c=0;for(let e of o)c<0?(c+=s.get(e),a.push(e)):(c-=s.get(e),l.push(e));return l.reverse().concat(a)})}function DG(e){return t=>{let n=EI(t,e);return(e,t)=>Ei(n[e],n[t])}}function DX(e,t){return(n,r,i,o)=>{if(!o)throw Error("missing channel: z");let s=new tX(t(n,r,i,o).map((e,t)=>[e,t]));return(t,n)=>e(s.get(o[t]),s.get(o[n]))}}let DY={ariaLabel:"rect"};class DZ extends je{constructor(e,t={}){let{x1:n,y1:r,x2:i,y2:o}=t;super(e,{x1:{value:n,scale:"x",type:null!=n&&null==i?"band":void 0,optional:!0},y1:{value:r,scale:"y",type:null!=r&&null==o?"band":void 0,optional:!0},x2:{value:i,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},t,DY),DK(this,t),DJ(this,t)}render(e,t,n,r,i){let{x:o,y:s}=t,{x1:a,y1:l,x2:c,y2:u}=n,{marginTop:h,marginRight:d,marginBottom:f,marginLeft:p,width:m,height:g}=r,{projection:y}=i,{insetTop:b,insetRight:v,insetBottom:x,insetLeft:w}=this,{rx:k,ry:O,rx1y1:S,rx1y2:C,rx2y1:T,rx2y2:A}=this;(a||c)&&!y&&_m(o)&&(a=c=null),(l||u)&&!y&&_m(s)&&(l=u=null);let E=null!=o&&o.bandwidth?o.bandwidth():0,M=null!=s&&s.bandwidth?s.bandwidth():0;return _L("svg:g",i).call(_J,this,r,i).call(_4,this,{},0,0).call(t=>t.selectAll().data(e).enter().call(S||C||T||A?e=>e.append("path").call(_0,this).call(D0,a&&c?e=>a[e]+(c[e]<a[e]?-v:w):a?e=>a[e]+w:p+w,l&&u?e=>l[e]+(u[e]<l[e]?-x:b):l?e=>l[e]+b:h+b,a&&c?e=>c[e]-(c[e]<a[e]?-w:v):a?e=>a[e]+E-v:m-d-v,l&&u?e=>u[e]-(u[e]<l[e]?-b:x):l?e=>l[e]+M-x:g-f-x,this).call(_G,this,n):e=>e.append("rect").call(_0,this).attr("x",a?c?e=>Math.min(a[e],c[e])+w:e=>a[e]+w:p+w).attr("y",l?u?e=>Math.min(l[e],u[e])+b:e=>l[e]+b:h+b).attr("width",a?c?e=>Math.max(0,Math.abs(c[e]-a[e])+E-w-v):E-w-v:m-d-p-v-w).attr("height",l?u?e=>Math.max(0,Math.abs(l[e]-u[e])+M-b-x):M-b-x:g-h-f-b-x).call(_2,"rx",k).call(_2,"ry",O).call(_G,this,n))).node()}}function DK(e,{inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:o=t}={}){e.insetTop=EG(n),e.insetRight=EG(r),e.insetBottom=EG(i),e.insetLeft=EG(o)}function DJ(e,{r:t,rx:n,ry:r,rx1:i=t,ry1:o=t,rx2:s=t,ry2:a=t,rx1y1:l=void 0!==i?+i:void 0!==o?+o:0,rx1y2:c=void 0!==i?+i:void 0!==a?+a:0,rx2y1:u=void 0!==s?+s:void 0!==o?+o:0,rx2y2:h=void 0!==s?+s:void 0!==a?+a:0}={}){l||c||u||h?(e.rx1y1=l,e.rx1y2=c,e.rx2y1=u,e.rx2y2=h):(e.rx=_5(n,"auto"),e.ry=_5(r,"auto"))}function D0(e,t,n,r,i,o){let{rx1y1:s,rx1y2:a,rx2y1:l,rx2y2:c}=o;"function"!=typeof t&&(t=EZ(t)),"function"!=typeof n&&(n=EZ(n)),"function"!=typeof r&&(r=EZ(r)),"function"!=typeof i&&(i=EZ(i));let u=Math.max(Math.abs(s+l),Math.abs(a+c)),h=Math.max(Math.abs(s+a),Math.abs(l+c));e.attr("d",e=>{let o=t(e),d=n(e),f=r(e),p=i(e),m=o>f,g=d>p,y=m?f:o,b=m?o:f,v=g?p:d,x=g?d:p,w=Math.min(1,(b-y)/u,(x-v)/h),k=w*(m?g?c:l:g?a:s),O=w*(m?g?a:s:g?c:l),S=w*(m?g?s:a:g?l:c),C=w*(m?g?l:c:g?s:a);return`M${y},${v+D2(k,C)}A${k},${k} 0 0 ${k<0?0:1} ${y+D1(k,C)},${v}H${b-D1(O,S)}A${O},${O} 0 0 ${O<0?0:1} ${b},${v+D2(O,S)}V${x-D2(S,O)}A${S},${S} 0 0 ${S<0?0:1} ${b-D1(S,O)},${x}H${y+D1(C,k)}A${C},${C} 0 0 ${C<0?0:1} ${y},${x-D2(C,k)}Z`})}function D1(e,t){return t<0?e:Math.abs(e)}function D2(e,t){return t<0?Math.abs(e):e}let D4={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},D5={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class D3 extends je{constructor(e={}){let{anchor:t=null}=e;super(EB,void 0,e,null==t?D4:D5),this.anchor=E5(t,"anchor",["top","right","bottom","left"]),DK(this,e),t||DJ(this,e)}render(e,t,n,r,i){let{marginTop:o,marginRight:s,marginBottom:a,marginLeft:l,width:c,height:u}=r,{anchor:h,insetTop:d,insetRight:f,insetBottom:p,insetLeft:m}=this,{rx:g,ry:y,rx1y1:b,rx1y2:v,rx2y1:x,rx2y2:w}=this,k=l+m,O=c-s-f,S=o+d,C=u-a-p;return _L(h?"svg:line":b||v||x||w?"svg:path":"svg:rect",i).datum(0).call(_J,this,r,i).call(_0,this).call(_G,this,n).call(_4,this,{}).call("left"===h?e=>e.attr("x1",k).attr("x2",k).attr("y1",S).attr("y2",C):"right"===h?e=>e.attr("x1",O).attr("x2",O).attr("y1",S).attr("y2",C):"top"===h?e=>e.attr("x1",k).attr("x2",O).attr("y1",S).attr("y2",S):"bottom"===h?e=>e.attr("x1",k).attr("x2",O).attr("y1",C).attr("y2",C):b||v||x||w?e=>e.call(D0,k,S,O,C,this):e=>e.attr("x",k).attr("y",S).attr("width",O-k).attr("height",C-S).attr("rx",g).attr("ry",y)).node()}}let D6={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},D7=new Set(["geometry","href","src","ariaLabel","scales"]);class D8 extends je{constructor(e,t={}){t.tip&&(t={...t,tip:!1}),void 0===t.title&&Mk(e)&&MO(e)&&(t={...t,title:EV});let{x:n,y:r,x1:i,x2:o,y1:s,y2:a,anchor:l,preferredAnchor:c="bottom",monospace:u,fontFamily:h=u?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:f,fontVariant:p,fontWeight:m,lineHeight:g=1,lineWidth:y=20,frameAnchor:b,format:v,textAnchor:x="start",textOverflow:w,textPadding:k=8,title:O,pointerSize:S=12,pathFilter:C="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=t;for(let v in super(e,{x:{value:null!=i&&null!=o?null:n,scale:"x",optional:!0},y:{value:null!=s&&null!=a?null:r,scale:"y",optional:!0},x1:{value:i,scale:"x",optional:null==o},y1:{value:s,scale:"y",optional:null==a},x2:{value:o,scale:"x",optional:null==i},y2:{value:a,scale:"y",optional:null==s},title:{value:O,optional:!0}},t,D6),this.anchor=MP(l,"anchor"),this.preferredAnchor=MP(c,"preferredAnchor"),this.frameAnchor=MR(b),this.textAnchor=_5(x,"middle"),this.textPadding=+k,this.pointerSize=+S,this.pathFilter=EW(C),this.lineHeight=+g,this.lineWidth=+y,this.textOverflow=j$(w),this.monospace=!!u,this.fontFamily=EW(h),this.fontSize=EG(d),this.fontStyle=EW(f),this.fontVariant=EW(p),this.fontWeight=EW(m),D6)v in this.channels&&(this[v]=D6[v]);this.splitLines=jY(this),this.clipLine=jZ(this),this.format="string"==typeof v||"function"==typeof v?{title:v}:{...v}}render(e,t,n,r,i){let o,s;let a=this,{x:l,y:c,fx:u,fy:h}=t,{ownerSVGElement:d,document:f}=i,{anchor:p,monospace:m,lineHeight:g,lineWidth:y}=this,{textPadding:b,pointerSize:v,pathFilter:x}=this,{marginTop:w,marginLeft:k}=r,{x1:O,y1:S,x2:C,y2:T,x:A=O??C,y:E=S??T}=n,M=u?u(e.fx)-k:0,N=h?h(e.fy)-w:0,[_,j]=_9(this,r),D=ju(n,_),P=jh(n,j),R=m?jX:jG,I=R(jK);"title"in n?(o=D9.call(this,{title:n.channels.title},t),s=Pt):(o=D9.call(this,n.channels,t),s=Pn);let z=_L("svg:g",i).call(_J,this,r,i).call(jH,this).call(_4,this,{x:A&&l,y:E&&c}).call(r=>r.selectAll().data(e).enter().append("g").attr("transform",e=>`translate(${Math.round(D(e))},${Math.round(P(e))})`).call(_0,this).call(e=>e.append("path").attr("filter",x)).call(r=>r.append("text").each(function(r){let i=nS(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");let l=s.call(a,r,e,o,t,n);if("string"==typeof l)for(let e of a.splitLines(l))L(i,{value:a.clipLine(e)});else{let e=new Set;for(let t of l){let{label:n=""}=t;n&&e.has(n)||(e.add(n),L(i,t))}}})));function L(e,{label:t,value:n,color:r,opacity:i}){t??(t=""),n??(n="");let o=null!=r||null!=i,s,a=100*y,[l]=jJ(t,a,R,I);if(l>=0)t=t.slice(0,l).trimEnd()+jK,s=n.trim(),n="";else{!t&&(n||o)||(n=" "+n);let[e]=jJ(n,a-R(t),R,I);e>=0&&(s=n.trim(),n=n.slice(0,e).trimEnd()+jK)}let c=e.append("tspan").attr("x",0).attr("dy",`${g}em`).text("");t&&c.append("tspan").attr("font-weight","bold").text(t),n&&c.append(()=>f.createTextNode(n)),o&&c.append("tspan").text(" ").attr("fill",r).attr("fill-opacity",i).style("user-select","none"),s&&c.append("title").text(s)}function q(){let{width:e,height:t}=r.facet??r;z.selectChildren().each(function(n){var r,i,o;let{x:s,width:l,height:c}=this.getBBox();l=Math.round(l),c=Math.round(c);let u=p;if(void 0===u){let r=D(n)+M,i=P(n)+N,o=r+l+v+2*b<e,s=r-l-v-2*b>0,h=i+c+v+2*b<t,d=i-c-v-2*b>0;u=o&&s?h&&d?a.preferredAnchor:d?"bottom":"top":h&&d?o?"left":"right":(o||s)&&(h||d)?`${d?"bottom":"top"}-${o?"left":"right"}`:a.preferredAnchor}let h=this.firstChild,d=this.lastChild;if(h.setAttribute("d",function(e,t,n,r,i){let o=r+2*n,s=i+2*n;switch(e){case"middle":return`M${-o/2},${-s/2}h${o}v${s}h${-o}z`;case"top-left":return`M0,0l${t},${t}h${o-t}v${s}h${-o}z`;case"top":return`M0,0l${t/2},${t/2}h${(o-t)/2}v${s}h${-o}v${-s}h${(o-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-o}v${s}h${o}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-s/2}h${-o}v${s}h${o}v${t/2-s/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${o-t}v${-s}h${-o}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(o-t)/2}v${-s}h${-o}v${s}h${(o-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-o}v${-s}h${o}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-s/2}h${o}v${s}h${-o}v${t/2-s/2}z`}}(u,v,b,l,c)),s)for(let e of d.childNodes)e.setAttribute("x",-s);d.setAttribute("y",`${+(r=u,i=d.childNodes.length,o=g,/^top(?:-|$)/.test(r)?.94-o:-.29-i*o).toFixed(6)}em`),d.setAttribute("transform",`translate(${function(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}(u,v,b,l,c)})`)}),z.attr("visibility",null)}return e.length&&(z.attr("visibility","hidden"),d.isConnected?Promise.resolve().then(q):"u">typeof requestAnimationFrame&&requestAnimationFrame(q)),z.node()}}function D9(e,t){var n,r;let i={},o=this.format;for(let t in o=Pe(o,e,"x"),o=Pe(o,e,"y"),this.format=o,o){let n=o[t];if(null!==n&&!1!==n){if("fx"===t||"fy"===t)i[t]=!0;else{let n=NE(e,t);n&&(i[t]=n)}}}for(let t in e){if(t in i||t in o||D7.has(t)||("x"===t||"y"===t)&&e.geometry)continue;let n=NE(e,t);if(n){if(null==n.scale&&"color"===n.defaultScale)continue;i[t]=n}}for(let e in!this.facet||(!t.fx||"fx"in o||(i.fx=!0),!t.fy||"fy"in o||(i.fy=!0)),i){let o=this.format[e];if("string"==typeof o){let s=(null==(n=i[e])?void 0:n.value)??(null==(r=t[e])?void 0:r.domain())??[];this.format[e]=(MC(s)?f:r6)(o)}else if(void 0===o||!0===o){let n=t[e];this.format[e]=null!=n&&n.bandwidth?DC(n,n.domain()):_F}}return i}function Pe(e,t,n){if(!(n in e))return e;let r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;let o=Object.entries(e),s=e[n];return o.splice(o.findIndex(([e])=>e===n)+1,0,[r,s],[i,s]),Object.fromEntries(o)}function Pt(e,t,{title:n}){return this.format.title(n.value[e],e)}function*Pn(e,t,n,r,i){for(let o in n){if("fx"===o||"fy"===o){yield{label:Po(r,n,o),value:this.format[o](t[o],e)};continue}if("x1"===o&&"x2"in n||"y1"===o&&"y2"in n)continue;let s=n[o];if("x2"===o&&"x1"in n)yield{label:Pi(r,n,"x"),value:Pr(this.format.x2,n.x1,s,e)};else if("y2"===o&&"y1"in n)yield{label:Pi(r,n,"y"),value:Pr(this.format.y2,n.y1,s,e)};else{let t=s.value[e],a=s.scale;if(!Er(t)&&null==a)continue;yield{label:Po(r,n,o),value:this.format[o](t,e),color:"color"===a?i[o][e]:null,opacity:"opacity"===a?i[o][e]:null}}}}function Pr(e,t,n,r){var i;return null!=(i=n.hint)&&i.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}${e(n.value[r],r)}`}function Pi(e,t,n){let r=Po(e,t,`${n}1`,n),i=Po(e,t,`${n}2`,n);return r===i?r:`${r}${i}`}function Po(e,t,n,r=n){let i=t[n],o=e[(null==i?void 0:i.scale)??n];return String((null==o?void 0:o.label)??(null==i?void 0:i.label)??r)}function Ps(e={}){let t,n;let{facet:r,style:i,title:o,subtitle:s,caption:a,ariaLabel:l,ariaDescription:c}=e,u=_7(e.className),h=void 0===e.marks?[]:Pl(e.marks);h.push(...function(e){let t=[];for(let n of e){let e=n.tip;if(e){!0===e?e={}:"string"==typeof e&&(e={pointer:e});let{pointer:r,preferredAnchor:i}=e;(e=(r=/^x$/i.test(r)?jl:/^y$/i.test(r)?jc:ja)(function(e,t={}){return M0({...t,x:null,y:null},(t,n,r,i,o,s)=>s.getMarkState(e))}(n,e))).title=null,void 0===i&&(e.preferredAnchor=r===jc?"left":"bottom");let o=function(e,{x:t,y:n,...r}={}){return void 0===r.frameAnchor&&([t,n]=Ms(t,n)),new D8(e,{...r,x:t,y:n})}(n.data,e);o.facet=n.facet,o.facetAnchor=n.facetAnchor,t.push(o)}}return t}(h));let d=function(e,t){if(null==e)return;let{x:n,y:r}=e;if(null==n&&null==r)return;let i=E6(e.data);if(null==i)throw Error("missing facet data");let o={};null!=n&&(o.fx=Nk(i,{value:n,scale:"fx"})),null!=r&&(o.fy=Nk(i,{value:r,scale:"fy"})),Ph(o,t);let s=_b(i,o);return{channels:o,groups:s,data:e.data}}(r,e),f=new Map;for(let t of h){let n=Pm(t,d,e);n&&f.set(t,n)}let p=new Map;d&&Pf(p,[d],e),Pf(p,f,e);let m=Pl(function(e,t,n){let{projection:r,x:i={},y:o={},fx:s={},fy:a={},axis:l,grid:c,facet:u={},facet:{axis:h=l,grid:d}=u,x:{axis:f=l,grid:p=null===f?null:c}=i,y:{axis:m=l,grid:g=null===m?null:c}=o,fx:{axis:y=h,grid:b=null===y?null:d}=s,fy:{axis:v=h,grid:x=null===v?null:d}=a}=n;!r&&(Mr(i)||Pv("x",e))||(f=p=null),!r&&(Mr(o)||Pv("y",e))||(m=g=null),t.has("fx")||(y=b=null),t.has("fy")||(v=x=null),void 0===f&&(f=!Pb(e,"x")),void 0===m&&(m=!Pb(e,"y")),void 0===y&&(y=!Pb(e,"fx")),void 0===v&&(v=!Pb(e,"fy")),!0===f&&(f="bottom"),!0===m&&(m="left"),!0===y&&(y="top"===f||null===f?"bottom":"top"),!0===v&&(v="right"===m||null===m?"left":"right");let w=[];return Py(w,x,Dg,a),Pg(w,v,Du,"right","left",u,a),Py(w,b,Db,s),Pg(w,y,Dd,"top","bottom",u,s),Py(w,g,Dm,o),Pg(w,m,Dc,"left","right",n,o),Py(w,p,Dy,i),Pg(w,f,Dh,"bottom","top",n,i),w}(h,p,e));for(let t of m){let n=Pm(t,d,e);n&&f.set(t,n)}h.unshift(...m);let g=function(e,t){let{fx:n,fy:r}=_t(e,t),i=null==n?void 0:n.scale.domain(),o=null==r?void 0:r.scale.domain();return i&&o?(function(...e){var t;let n="function"==typeof e[e.length-1]&&(t=e.pop(),e=>t(...e)),r=(e=e.map(tV)).map(tF),i=e.length-1,o=Array(i+1).fill(0),s=[];if(i<0||r.some(tQ))return s;for(;;){s.push(o.map((t,n)=>e[n][t]));let t=i;for(;++o[t]===r[t];){if(0===t)return n?s.map(n):s;o[t--]=0}}})(i,o).map(([e,t],n)=>({x:e,y:t,i:n})):i?i.map((e,t)=>({x:e,i:t})):o?o.map((e,t)=>({y:e,i:t})):void 0}(p,e);if(void 0!==g){let e=d?_M(g,d):void 0;for(let t of h){if(null===t.facet||"super"===t.facet)continue;let n=f.get(t);void 0!==n&&(n.facetsIndex=null!=t.fx||null!=t.fy?_M(g,n):e)}let t=new Set;for(let{facetsIndex:e}of f.values())null==e||e.forEach((e,n)=>{(null==e?void 0:e.length)>0&&t.add(n)});for(let e of(g.forEach(0<t.size&&t.size<g.length?(e,n)=>e.empty=!t.has(n):e=>e.empty=!1),h))if("exclude"===e.facet){let t=f.get(e);void 0!==t&&(t.facetsIndex=function(e){let t=[],n=new Uint32Array(nv(e,e=>e.length));for(let r of e){let i=0;for(let t of e)r!==t&&(n.set(t,i),i+=t.length);t.push(n.slice(0,i))}return t}(t.facetsIndex))}}for(let t of MW.keys())Mr(e[t])&&"fx"!==t&&"fy"!==t&&p.set(t,[]);let y=new Map;for(let t of h){if(y.has(t))throw Error("duplicate mark; each mark must be unique");let{facetsIndex:n,channels:r}=f.get(t)??{},{data:i,facets:o,channels:s}=t.initialize(n,r,e);Ph(s,e),y.set(t,{data:i,facets:o,channels:s})}let b=_t(Pf(p,y,e),e),v=function(e,t,n={}){let r=.5-_Q,i=.5+_Q,o=.5+_Q,s=.5-_Q;for(let{marginTop:e,marginRight:n,marginBottom:a,marginLeft:l}of t)e>r&&(r=e),n>i&&(i=n),a>o&&(o=a),l>s&&(s=l);let{margin:a,marginTop:l=void 0!==a?a:r,marginRight:c=void 0!==a?a:i,marginBottom:u=void 0!==a?a:o,marginLeft:h=void 0!==a?a:s}=n;l*=1,c*=1;let{width:d=640,height:f=function({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:o},{width:s,marginTopDefault:a,marginRightDefault:l,marginBottomDefault:c,marginLeftDefault:u}){let h=n&&n.scale.domain().length||1,d=function(e){if("function"==typeof(null==e?void 0:e.stream))return .618;if(Mn(e)){let t,n;if({domain:t,type:e,...n}=e,null!=t&&null!=e){let[[r,i],[o,s]]=iK(("string"==typeof e?_j(e).type:e)({...n,width:100,height:100})).bounds(t),a=(s-i)/(o-r);return a&&isFinite(a)?a<.2?.2:a>5?5:a:.618}}if(null!=e){if("function"!=typeof e){let{aspectRatio:t}=_j(e);if(t)return t}return .618}}(i);if(d)return Math.round((s-u-l)*Math.max(.1,Math.min(10,(1.1*h-.1)/(1.1*(r?r.scale.domain().length:1)-.1)*d))+a+c);let f=t?_f(t)?t.scale.domain().length||1:Math.max(7,17/h):1;if(null!=o){if(!(isFinite(o*=1)&&o>0))throw Error(`invalid aspectRatio: ${o}`);let i=ji("y",t)/(ji("x",e)*o),h=r?r.scale.bandwidth():1,d=n?n.scale.bandwidth():1;return(i*(h*(s-u-l)-e.insetLeft-e.insetRight)+t.insetTop+t.insetBottom)/d+a+c}return!!(t||n)*Math.max(1,Math.min(60,f*h))*20+30*!!r+60}(e,n,{width:d,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:o,marginLeftDefault:s})+Math.max(0,l-r+u-o)}=n,p={width:d*=1,height:f*=1,marginTop:l,marginRight:c,marginBottom:u*=1,marginLeft:h*=1};if(e.fx||e.fy){let{margin:e,marginTop:t=void 0!==e?e:l,marginRight:r=void 0!==e?e:c,marginBottom:i=void 0!==e?e:u,marginLeft:o=void 0!==e?e:h}=n.facet??{};p.facet={marginTop:t*=1,marginRight:r*=1,marginBottom:i*=1,marginLeft:o*=1}}return p}(b,h,e);!function(e,t){let{x:n,y:r,fx:i,fy:o}=e,s=i||o?_r(t):t;i&&_o(i,s),o&&_s(o,s);let a=i||o?_i(e,t):t;n&&_o(n,a),r&&_s(r,a)}(b,v);let x=_n(b),{fx:w,fy:k}=x,O=w||k?_i(b,v):v,S=w||k?function({fx:e,fy:t},n){let{marginTop:r,marginRight:i,marginBottom:o,marginLeft:s,width:a,height:l}=_r(n),c=e&&Px(e),u=t&&Px(t);return{marginTop:t?u[0]:r,marginRight:e?a-c[1]:i,marginBottom:t?l-u[1]:o,marginLeft:e?c[0]:s,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:a,height:l}}(x,v):v,C=_z(e),T=C.document,A=(0,_.A)("svg").call(T.documentElement),E=A;C.ownerSVGElement=A,C.className=u,C.projection=function({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:o=t}={},s){if(null==e)return;if("function"==typeof e.stream)return e;let a,l,c="frame";if(Mn(e)){let t;if({type:e,domain:l,inset:t,insetTop:n=void 0!==t?t:n,insetRight:r=void 0!==t?t:r,insetBottom:i=void 0!==t?t:i,insetLeft:o=void 0!==t?t:o,clip:c=c,...a}=e,null==e)return}"function"!=typeof e&&({type:e}=_j(e));let{width:u,height:h,marginLeft:d,marginRight:f,marginTop:p,marginBottom:m}=s,g=u-d-f-o-r,y=h-p-m-n-i;if(null==(e=null==e?void 0:e({width:g,height:y,clip:c,...a})))return;c=function(e,t,n,r,i){if(!1===e||null==e||"number"==typeof e)return e=>e;if(!0===e&&(e="frame"),"frame"===`${e}`.toLowerCase())return r0(t,n,r,i);throw Error(`unknown projection clip type: ${e}`)}(c,d,p,u-f,h-m);let b=d+o,v=p+n,x;if(null!=l){let[[t,n],[r,i]]=iK(e).bounds(l),o=Math.min(g/(r-t),y/(i-n));o>0?(b-=(o*(t+r)-g)/2,v-=(o*(n+i)-y)/2,x=iJ({point(e,t){this.stream.point(e*o+b,t*o+v)}})):N0("Warning: the projection could not be fit to the specified domain; using the default scale.")}return x??(x=0===b&&0===v?_R():iJ({point(e,t){this.stream.point(e+b,t+v)}})),{stream:t=>e.stream(x.stream(c(t)))}}(e,O),C.path=function(){return iK(this.projection??function({x:e,y:t}){if(e||t)return e??(e=e=>e),t??(t=e=>e),iJ({point(n,r){this.stream.point(e(n),t(r))}})}(x))},C.filterFacets=(e,t)=>_M(g,{channels:t,groups:_b(e,t)}),C.getMarkState=e=>{let t=y.get(e),n=f.get(e);return{...t,channels:{...t.channels,...null==n?void 0:n.channels}}},C.dispatchValue=e=>{E.value!==e&&(E.value=e,E.dispatchEvent(new C.document.defaultView.Event("input",{bubbles:!0})))};let M=new Set;for(let[t,n]of y)if(null!=t.initializer){let r="super"===t.facet?S:O,i=t.initializer(n.data,n.facets,n.channels,x,r,C);if(void 0!==i.data&&(n.data=i.data),void 0!==i.facets&&(n.facets=i.facets),void 0!==i.channels){let{fx:r,fy:o,...s}=i.channels;for(let t of(function(e){for(let t in e)NO(t,e[t])}(s),Object.assign(n.channels,s),Object.values(s))){let{scale:n}=t;null==n||(R=MW.get(n))===M$||R===MU||(Pd(t,e),M.add(n))}(null!=r||null!=o)&&f.set(t,!0)}}if(M.size){let t=new Map;Pf(t,y,e,e=>M.has(e)),Pf(p,y,e,e=>M.has(e));let n=function(e,t){for(let n in e){let r=e[n],i=t[n];void 0===r.label&&i&&(r.label=i.label)}return e}(_t(t,e),b),{scales:r,...i}=_n(n);Object.assign(b,n),Object.assign(x,i),Object.assign(x.scales,r)}for(let[e,r]of(void 0!==g&&(t={x:null==w?void 0:w.domain(),y:null==k?void 0:k.domain()},g=function(e,{x:t,y:n}){return t&&(t=_w(t)),n&&(n=_w(n)),e.filter(t&&n?e=>t.has(e.x)&&n.has(e.y):t?e=>t.has(e.x):e=>n.has(e.y)).sort(t&&n?(e,r)=>t.get(e.x)-t.get(r.x)||n.get(e.y)-n.get(r.y):t?(e,n)=>t.get(e.x)-t.get(n.x):(e,t)=>n.get(e.y)-n.get(t.y))}(g,t),n=function(e,t,{marginTop:n,marginLeft:r}){let i=e?({x:t})=>e(t)-r:()=>0,o=t?({y:e})=>t(e)-n:()=>0;return function(e){"svg"===this.tagName?(this.setAttribute("x",i(e)),this.setAttribute("y",o(e))):this.setAttribute("transform",`translate(${i(e)},${o(e)})`)}}(w,k,v)),y))r.values=e.scale(r.channels,x,C);let{width:N,height:j}=v;for(let e of(nS(A).attr("class",u).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",N).attr("height",j).attr("viewBox",`0 0 ${N} ${j}`).attr("aria-label",l).attr("aria-description",c).call(e=>e.append("style").text(`:where(.${u}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${u} text),
:where(.${u} tspan) {
  white-space: pre;
}`)).call(_8,i),h)){let{channels:r,values:i,facets:o}=y.get(e);if(void 0===g||"super"===e.facet){let t=null;if(o&&(t=o[0],0===(t=e.filter(t,r,i)).length))continue;let n=e.render(t,x,i,S,C);if(null==n)continue;A.appendChild(n)}else{let s;for(let n of g){if(!((null==(P=e.facetAnchor)?void 0:P.call(e,g,t,n))??!n.empty))continue;let a=null;if(o){let t=f.has(e);if(a=o[t?n.i:0],0===(a=e.filter(a,r,i)).length)continue;var D,P,R,I,z=void 0,L=void 0;t||a!==o[0]||(a=(I=a).subarray?I.subarray(void 0,void 0):I.slice(z,L)),a.fx=n.x,a.fy=n.y,a.fi=n.i}let l=e.render(a,x,i,O,C);if(null!=l)for(let e of((s??(s=nS(A).append("g"))).append(()=>l).datum(n),["aria-label","aria-description","aria-hidden","transform"]))l.hasAttribute(e)&&(s.attr(e,l.getAttribute(e)),l.removeAttribute(e))}null==s||s.selectChildren().each(n)}}let q=function(e,t,n){let r=[];for(let[i,o]of Dz){let s=n[i];if(null!=s&&s.legend&&i in e){let n=o(e[i],DL(t,e[i],s),t=>e[t]);null!=n&&r.push(n)}}return r}(b,C,e),{figure:$=null!=o||null!=s||null!=a||q.length>0}=e;$&&((E=T.createElement("figure")).className=`${u}-figure`,E.style.maxWidth="initial",null!=o&&E.append(Pa(T,o,"h2")),null!=s&&E.append(Pa(T,s,"h3")),E.append(...q,A),null!=a&&E.append(function(e,t){let n=e.createElement("figcaption");return n.append(t),n}(T,a)),"value"in A&&(E.value=A.value,delete A.value)),E.scale=(D=x.scales,e=>{if(!MW.has(e=`${e}`))throw Error(`unknown scale: ${e}`);return D[e]}),E.legend=function(e,t,n={}){return(r,i)=>{if(!Dz.has(r))throw Error(`unknown legend type: ${r}`);if(r in e)return Dz.get(r)(e[r],DL(t,n[r],i),t=>e[t])}}(b,C,e);let B=function(){let e=NK;return NK=0,NJ=void 0,e}();return B>0&&nS(A).append("text").attr("x",N).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${B.toLocaleString("en-US")} warning${1===B?"":"s"}. Please check the console.`),E}function Pa(e,t,n){if(t.ownerDocument)return t;let r=e.createElement(n);return r.append(t),r}function Pl(e){return e.flat(1/0).filter(e=>null!=e).map(Pc)}function Pc(e){return"function"==typeof e.render?e:new Pu(e)}class Pu extends je{constructor(e){if("function"!=typeof e)throw TypeError("invalid mark; missing render function");super(),this.render=e}render(){}}function Ph(e,t){for(let n in e)Pd(e[n],t);return e}function Pd(e,t){let{scale:n,transform:r=!0}=e;if(null==n||!r)return;let{type:i,percent:o,interval:s,transform:a=o?e=>null==e?NaN:100*e:My(s,i)}=t[n]??{};null!=a&&(e.value=E9(e.value,a),e.transform=!1)}function Pf(e,t,n,r=EU){var i,o;for(let{channels:s}of t.values())for(let t in s){let a=s[t],{scale:l}=a;if(null!=l&&r(l)){if("projection"===l){if(!function({projection:e}={}){return null!=e&&("function"==typeof e.stream||(Mn(e)&&(e=e.type),null!=e))}(n)){let t=(null==(i=n.x)?void 0:i.domain)===void 0,r=(null==(o=n.y)?void 0:o.domain)===void 0;if(t||r){let[n,i]=function(e){let t=[],n=[],r={point(e,r){t.push(e),n.push(r)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(let t of e.value)rM(t,r);return[{scale:"x",value:t},{scale:"y",value:n}]}(a);t&&Pp(e,"x",n),r&&Pp(e,"y",i)}}}else Pp(e,l,a)}}return e}function Pp(e,t,n){let r=e.get(t);void 0!==r?r.push(n):e.set(t,[n])}function Pm(e,t,n){if(null===e.facet||"super"===e.facet)return;let{fx:r,fy:i}=e;if(null!=r||null!=i){let t=E6(e.data??r??i);if(void 0===t)throw Error(`missing facet data in ${e.ariaLabel}`);if(null===t)return;let o={};return null!=r&&(o.fx=Nk(t,{value:r,scale:"fx"})),null!=i&&(o.fy=Nk(t,{value:i,scale:"fy"})),Ph(o,n),{channels:o,groups:_b(t,o)}}if(void 0===t)return;let{channels:o,groups:s,data:a}=t;if("auto"!==e.facet||e.data===a)return{channels:o,groups:s};a.length>0&&(s.size>1||1===s.size&&o.fx&&o.fy&&[...s][0][1].size>1)&&Ml(E6(e.data))===Ml(a)&&N0(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function Pg(e,t,n,r,i,o,s){var a;if(!t)return;let l=(a=t,/^\s*both\s*$/i.test(a)),{line:c}=s=function(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:o,tickPadding:s,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:h,label:d=t.label,labelAnchor:f,labelArrow:p=t.labelArrow,labelOffset:m}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:o,tickPadding:s,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:h,label:d,labelAnchor:f,labelArrow:p,labelOffset:m}}(l?r:t,o,s);(n===Dc||n===Dh)&&c&&!MD(c)&&e.push(new D3(function(e){let{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:!0===n?void 0:n}}(s))),e.push(n(s)),l&&e.push(n({...s,anchor:i,label:null}))}function Py(e,t,n,r){!t||MD(t)||e.push(n(function(e,{stroke:t=MN(e)?e:void 0,ticks:n=!function(e){switch(typeof e){case"number":return!0;case"string":return!MN(e)}return Mk(e)||"function"==typeof(null==e?void 0:e.range)}(e)?void 0:e,tickSpacing:r,ariaLabel:i,ariaDescription:o}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:o}}(t,r)))}function Pb(e,t){let n=`${t}-axis `;return e.some(e=>{var t;return null==(t=e.ariaLabel)?void 0:t.startsWith(n)})}function Pv(e,t){for(let n of t)for(let t in n.channels){let{scale:r}=n.channels[t];if(r===e||"projection"===r)return!0}return!1}function Px(e){let t=e.domain();if(0===t.length)return[0,e.bandwidth()];let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}let Pw=new Map([["basis",function(e){return new cY(e)}],["basis-closed",function(e){return new cZ(e)}],["basis-open",function(e){return new cK(e)}],["bundle",c0],["bump-x",function(e){return new cw(e,!0)}],["bump-y",function(e){return new cw(e,!1)}],["cardinal",c4],["cardinal-closed",c3],["cardinal-open",c7],["catmull-rom",ue],["catmull-rom-closed",un],["catmull-rom-open",ui],["linear",cb],["linear-closed",function(e){return new uo(e)}],["monotone-x",function(e){return new uc(e)}],["monotone-y",function(e){return new uu(e)}],["natural",function(e){return new ud(e)}],["step",function(e){return new up(e,.5)}],["step-after",function(e){return new up(e,1)}],["step-before",function(e){return new up(e,0)}]]);function Pk(e){return cb(e)}function PO(e={y:"count"},t={}){[e,t]=function({cumulative:e,domain:t,thresholds:n,interval:r,...i},o){return[i,{cumulative:e,domain:t,thresholds:n,interval:r,...o}]}(e,t);let{x:n,y:r}=t;return function(e,t,n,r,{data:i=Nh,filter:o=Nm,sort:s,reverse:a,...l}={},c={}){e=PS(e),t=PS(t),l=M7(l,c,PC),i=PA(i,EV),s=null==s?void 0:PC("sort",s,c),o=null==o?void 0:PT("filter",o,c),null!=r&&M6(l,"y","y1","y2")&&(r=null);let[u,h]=Mf(e),[d,f]=Mf(e),[p,m]=Mf(t),[g,y]=Mf(t),[b,v]=null!=r?[r,"y"]:[],[x,w]=Mf(b),{x:k,y:O,z:S,fill:C,stroke:T,x1:A,x2:E,y1:M,y2:N,domain:_,cumulative:j,thresholds:D,interval:P,...R}=c,[I,z]=Mf(S),[L]=E2(C),[q]=E2(T),[$,B]=Mf(L),[F,Q]=Mf(q);return{..."z"in c&&{z:I||S},..."fill"in c&&{fill:$||C},..."stroke"in c&&{stroke:F||T},...MJ(R,(n,r,c)=>{let u=Mg(EI(n,b),null==c?void 0:c[v]),d=EI(n,S),p=EI(n,L),g=EI(n,q),x=Na(l,{z:d,fill:p,stroke:g}),k=[],O=[],C=u&&w([]),T=d&&z([]),A=p&&B([]),E=g&&Q([]),M=e&&h([]),N=e&&f([]),_=t&&m([]),j=t&&y([]),D=function(e,t,n){let r=null==e?void 0:e(n),i=null==t?void 0:t(n);return r&&i?function*(e){let t=r.bin(e);for(let[e,[o,s]]of r.entries()){let r=i.bin(t[e]);for(let[e,[t,a]]of i.entries())yield[r[e],{data:n,x1:o,y1:t,x2:s,y2:a}]}}:r?function*(e){let t=r.bin(e);for(let[e,[i,o]]of r.entries())yield[t[e],{data:n,x1:i,x2:o}]}:function*(e){let t=i.bin(e);for(let[e,[r,o]]of i.entries())yield[t[e],{data:n,y1:r,y2:o}]}}(e,t,n),P=0;for(let e of l)e.initialize(n);for(let e of(s&&s.initialize(n),o&&o.initialize(n),r)){let t=[];for(let t of l)t.scope("facet",e);for(let[r,a]of(s&&s.scope("facet",e),o&&o.scope("facet",e),Ne(e,x)))for(let[e,c]of Ne(a,u))for(let[a,h]of D(c))if(x&&(h.z=r),!(o&&!o.reduce(a,h))){for(let o of(t.push(P++),O.push(i.reduceIndex(a,n,h)),u&&C.push(e),d&&T.push(x===d?r:d[(a.length>0?a:c)[0]]),p&&A.push(x===p?r:p[(a.length>0?a:c)[0]]),g&&E.push(x===g?r:g[(a.length>0?a:c)[0]]),M&&(M.push(h.x1),N.push(h.x2)),_&&(_.push(h.y1),j.push(h.y2)),l))o.reduce(a,h);s&&s.reduce(a,h)}k.push(t)}return Nl(k,s,a),{data:O,facets:k}}),...!M6(l,"x")&&(u?{x1:u,x2:d,x:Mm(u,d)}:{x:k,x1:A,x2:E}),...!M6(l,"y")&&(p?{y1:p,y2:g,y:Mm(p,g)}:{y:O,y1:M,y2:N}),...x&&{[v]:x},...Object.fromEntries(l.map(({name:e,output:t})=>[e,t]))}}(function(e,{cumulative:t,domain:n,thresholds:r,interval:i},o){return void 0===(e={...Mw(e)}).domain&&(e.domain=n),void 0===e.cumulative&&(e.cumulative=t),void 0===e.thresholds&&(e.thresholds=r),void 0===e.interval&&(e.interval=i),void 0===e.value&&(e.value=o),e.thresholds=function(e,t,n=PM){if(void 0===e)return void 0===t?n:Mv(t);if("string"==typeof e){switch(e.toLowerCase()){case"freedman-diaconis":return np;case"scott":return nm;case"sturges":return ns;case"auto":return PM}return EC(e)}return e}(e.thresholds,e.interval),e}(n,t,EV),null,0,r,e,jC(t))}function PS(e){if(null==e)return;let{value:t,cumulative:n,domain:r=tW,thresholds:i}=e,o=e=>{let o=EI(e,t),s;if(MC(o)||function(e){return Mx(e)&&"function"==typeof(null==e?void 0:e.floor)&&e.floor()instanceof Date||Mk(e)&&MC(e)}(i)){o=E9(o,E1,Float64Array);let[e,t]="function"==typeof r?r(o):r,n="function"!=typeof i||Mx(i)?i:i(o,e,t);"number"==typeof n&&(n=sI(e,t,n)),Mx(n)&&(r===tW&&(e=n.floor(e),t=n.offset(n.floor(t))),n=n.range(e,n.offset(t))),s=n}else{o=EK(o);let[e,t]="function"==typeof r?r(o):r,n="function"!=typeof i||Mx(i)?i:i(o,e,t);if("number"==typeof n){if(r===tW){let r=ni(e,t,n);if(isFinite(r)){if(r>0){let i=Math.round(e/r),o=Math.round(t/r);i*r<=e||--i,o*r>t||++o;let s=o-i+1;n=new Float64Array(s);for(let e=0;e<s;++e)n[e]=(i+e)*r}else if(r<0){let i=Math.round(e*(r=-r)),o=Math.round(t*r);i/r<=e||--i,o/r>t||++o;let s=o-i+1;n=new Float64Array(s);for(let e=0;e<s;++e)n[e]=(i+e)/r}else n=[e]}else n=[e]}else n=nr(e,t,n)}else Mx(n)&&(r===tW&&(e=n.floor(e),t=n.offset(n.floor(t))),n=n.range(e,n.offset(t)));s=n}let a=[];if(1===s.length)a.push([s[0],s[0]]);else for(let e=1;e<s.length;++e)a.push([s[e-1],s[e]]);return a.bin=(n<0?function(e,t,n){let r=PN(e,t,n);return e=>{let t=r(e);for(let e=t.length-2;e>=0;--e){let n=t[e+1],r=t[e];for(let e of n)r.push(e)}return t}}:n>0?function(e,t,n){let r=PN(e,t,n);return e=>{let t=r(e);for(let e=1,n=t.length;e<n;++e){let n=t[e-1],r=t[e];for(let e of n)r.push(e)}return t}}:PN)(a,s,o),a};return o.label=Mp(t),o}function PC(e,t,n){return M8(e,t,n,PT)}function PT(e,t,n){return M9(e,t,n,PA)}function PA(e,t){return Nt(e,t,PE)}function PE(e){switch(`${e}`.toLowerCase()){case"x":return Pj;case"x1":return PP;case"x2":return PR;case"y":return PD;case"y1":return PI;case"y2":return Pz;case"z":return Nw}throw Error(`invalid bin reduce: ${e}`)}function PM(e,t,n){return Math.min(200,nm(e,t,n))}function PN(e,t,n){return t=EK(t),r=>{var i;let o=e.map(()=>[]);for(let e of r)null==(i=o[(0,M.a6)(t,n[e])-1])||i.push(e);return o}}function P_(e,t){let n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}let Pj={reduceIndex:(e,t,{x1:n,x2:r})=>P_(n,r)},PD={reduceIndex:(e,t,{y1:n,y2:r})=>P_(n,r)},PP={reduceIndex:(e,t,{x1:n})=>n},PR={reduceIndex:(e,t,{x2:n})=>n},PI={reduceIndex:(e,t,{y1:n})=>n},Pz={reduceIndex:(e,t,{y2:n})=>n},PL={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};class Pq extends je{constructor(e,t={}){let{x:n,y:r,r:i,rotate:o,symbol:s=cS,frameAnchor:a}=t,[l,c]=E4(o,0),[u,h]=function(e){if(null==e||MY(e))return[void 0,e];if("string"==typeof e){let t=MX.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}(s),[d,f]=E4(i,null==u?3:4.5);super(e,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:d,scale:"r",filter:El,optional:!0},rotate:{value:l,optional:!0},symbol:{value:u,scale:"auto",optional:!0}},function(e){return void 0===e.sort&&void 0===e.reverse?function(e,{sort:t,...n}={}){return{...(Mi(e)&&void 0!==e.channel?M0:function(e,t){return(null!=e.initializer?M0:MJ)(e,t)})(n,M3(e)),sort:Mo(t)?t:null}}({channel:"-r"},e):e}(t),PL),this.r=f,this.rotate=c,this.symbol=h,this.frameAnchor=MR(a);let{channels:p}=this,{symbol:m}=p;if(m){let{fill:e,stroke:t}=p;m.hint={fill:e?e.value===m.value?"color":"currentColor":this.fill??"currentColor",stroke:t?t.value===m.value?"color":"currentColor":this.stroke??"none"}}}render(e,t,n,r,i){let{x:o,y:s}=t,{x:a,y:l,r:c,rotate:u,symbol:h}=n,{r:d,rotate:f,symbol:p}=this,[m,g]=_9(this,r),y=p===cS,b=c?void 0:d*d*Math.PI;return Ec(d)&&(e=[]),_L("svg:g",i).call(_J,this,r,i).call(_4,this,{x:a&&o,y:l&&s}).call(t=>t.selectAll().data(e).enter().append(y?"circle":"path").call(_0,this).call(y?e=>{e.attr("cx",a?e=>a[e]:m).attr("cy",l?e=>l[e]:g).attr("r",c?e=>c[e]:d)}:e=>{e.attr("transform",jz`translate(${a?e=>a[e]:m},${l?e=>l[e]:g})${u?e=>` rotate(${u[e]})`:f?` rotate(${f})`:""}`).attr("d",c&&h?e=>{let t=n4();return h[e].draw(t,c[e]*c[e]*Math.PI),t}:c?e=>{let t=n4();return p.draw(t,c[e]*c[e]*Math.PI),t}:h?e=>{let t=n4();return h[e].draw(t,b),t}:(()=>{let e=n4();return p.draw(e,b),e})())}).call(_G,this,n)).node()}}let P$={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class PB extends je{constructor(e,t={}){let{x:n,y:r,z:i,curve:o,tension:s}=t;super(e,{x:{value:n,scale:"x"},y:{value:r,scale:"y"},z:{value:Ma(t),optional:!0}},t,P$),this.z=i,this.curve=function(e=Pk,t){return"function"!=typeof e&&"auto"===`${e}`.toLowerCase()?Pk:function(e=cb,t){if("function"==typeof e)return e;let n=Pw.get(`${e}`.toLowerCase());if(!n)throw Error(`unknown curve: ${e}`);if(void 0!==t){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}(e,t)}(o,s),jp(this,t)}filter(e){return e}project(e,t,n){this.curve!==Pk&&super.project(e,t,n)}render(e,t,n,r,i){let{x:o,y:s}=n,{curve:a}=this;return _L("svg:g",i).call(_J,this,r,i).call(_4,this,t).call(t=>{var r,l,c;return t.selectAll().data(function*(e,t,n,r){let{z:i}=n,{z:o}=r,s=function({ariaLabel:e,title:t,fill:n,fillOpacity:r,stroke:i,strokeOpacity:o,strokeWidth:s,opacity:a,href:l},{tip:c}){return[e,c?void 0:t,n,r,i,o,s,a,l].filter(e=>void 0!==e)}(r,n),a=[...t,...s];for(let t of o?function(e,t,n){let r=t2(e,e=>t[e]);return void 0===n&&r.size>1+e.length>>1&&N0("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}(e,o,i):[e]){let e,n;e:for(let r of t){for(let e of a)if(!Er(e[r])){n&&n.push(-1);continue e}if(void 0===e){n&&(yield n),e=s.map(e=>Mh(e[r])),n=[r];continue}n.push(r);for(let t=0;t<s.length;++t)if(Mh(s[t][r])!==e[t]){yield n,e=s.map(e=>Mh(e[r])),n=[r];continue e}}n&&(yield n)}}(e,[o,s],this,n)).enter().append("path").call(_0,this).call(_X,this,n).call(jO,this,n,i).attr("d",a===Pk&&i.projection?(r=i.path(),l=o,c=s,l=EK(l),c=EK(c),e=>{let t=[],n=[t];for(let r of e)-1===r?(t=[],n.push(t)):t.push([l[r],c[r]]);return r({type:"MultiLineString",coordinates:n})}):(function(e,t){let n;var r=cu(!0),i=null,o=cb,s=null,a=(n=3,l.digits=function(e){if(!arguments.length)return n;if(null==e)n=null;else{let t=Math.floor(e);if(!(t>=0))throw RangeError(`invalid digits: ${e}`);n=t}return l},()=>new n2(n));function l(n){var l,c,u,h,d=(n="object"==typeof(l=n)&&"length"in l?l:Array.from(l)).length,f=!1;for(null==i&&(s=o(h=a())),c=0;c<=d;++c)!(c<d&&r(u=n[c],c,n))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+e(u,c,n),+t(u,c,n));if(h)return s=null,h+""||null}return e="function"==typeof e?e:void 0===e?cv:cu(e),t="function"==typeof t?t:void 0===t?cx:cu(t),l.x=function(t){return arguments.length?(e="function"==typeof t?t:cu(+t),l):e},l.y=function(e){return arguments.length?(t="function"==typeof e?e:cu(+e),l):t},l.defined=function(e){return arguments.length?(r="function"==typeof e?e:cu(!!e),l):r},l.curve=function(e){return arguments.length?(o=e,null!=i&&(s=o(i)),l):o},l.context=function(e){return arguments.length?(null==e?i=s=null:s=o(i=e),l):i},l})().curve(a).defined(e=>e>=0).x(e=>o[e]).y(e=>s[e]))}).node()}}je.prototype.plot=function({marks:e=[],...t}={}){return Ps({...t,marks:[...e,this]})};var PF={exports:{}};!function(e,t){var n,r,i,o;_.w,r="minute",i=/[+-]\d\d(?::?\d\d)?/g,o=/([+-]|\d\d)/g,e.exports=function(e,t,n){var s=t.prototype;n.utc=function(e){var n={date:e,utc:!0,args:arguments};return new t(n)},s.utc=function(e){var t=n(this.toDate(),{locale:this.$L,utc:!0});return e?t.add(this.utcOffset(),r):t},s.local=function(){return n(this.toDate(),{locale:this.$L,utc:!1})};var a=s.parse;s.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),a.call(this,e)};var l=s.init;s.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else l.call(this)};var c=s.utcOffset;s.utcOffset=function(e,t){var n=this.$utils().u;if(n(e))return this.$u?0:n(this.$offset)?c.call(this):this.$offset;if("string"==typeof e&&null===(e=function(e){void 0===e&&(e="");var t=e.match(i);if(!t)return null;var n=(""+t[0]).match(o)||["-",0,0],r=n[0],s=60*+n[1]+ +n[2];return 0===s?0:"+"===r?s:-s}(e)))return this;var s=16>=Math.abs(e)?60*e:e,a=this;if(t)return a.$offset=s,a.$u=0===e,a;if(0!==e){var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(a=this.local().add(s+l,r)).$offset=s,a.$x.$localOffset=l}else a=this.utc();return a};var u=s.format;s.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return u.call(this,t)},s.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},s.isUTC=function(){return!!this.$u},s.toISOString=function(){return this.toDate().toISOString()},s.toString=function(){return this.toDate().toUTCString()};var h=s.toDate;s.toDate=function(e){return"s"===e&&this.$offset?n(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var d=s.diff;s.diff=function(e,t,r){if(e&&this.$u===e.$u)return d.call(this,e,t,r);var i=this.local(),o=n(e).local();return d.call(i,o,t,r)}}}(PF);var PQ=PF.exports;let PV=(0,_.y)(PQ);_.D.extend(PV);let PH={type:"line",x:null,y:null,xLabel:"X Axis",yLabel:"Y Axis",backgroundColor:"transparent",fontSize:12,title:"",lineWidth:3,pointColor:"steelblue",yAxisUnitLabel:"",yAxisUnitPosition:"suffix",showLabels:!1,margin:{top:20,right:30,bottom:150,left:60},dateFormat:"%Y-%m-%d",color:{legend:!0}},PU=(e,t,n,r,i)=>{var o,s,a,l,c,u,h,d;if(0===e.width||0===e.height||!t.x||!t.y||Array.isArray(t.y)&&0===t.y.length)return null;let f=t.filter&&"function"==typeof t.filter?n.filter(t.filter):n,p=function(e,t,n,r){var i;let o;let s={...PH,...t},a=function(e,t,n,r){var i;let o={line:PW,bar:PG,scatter:PX};return(null==(i=o[t.type])?void 0:i.call(o,e,t,n,r))||[]}(e,s,n,r);return"bar"!==t.type&&(i=s,o=Dh({lineHeight:1.2,tickSize:0,nice:!0,rotate:-45,textAnchor:"end",tickFormat:(e,t,n)=>{if("bar"===i.type)return null;if(i.xIsDate){let t;try{t=_.D.utc(e)}catch{t=e}let r=_.D.utc(n[0]),i=_.D.utc(n[n.length-1]).diff(r,"day");return i>365?1===t.date()&&t.month()%3==0?t.format("MMM YYYY"):null:i>90?1===t.date()?t.format("MMM YYYY"):null:i>14?1===t.day()?t.format("MMM DD"):null:t.format("MMM DD")}return i.xTicks&&t%Math.ceil(n.length/i.xTicks)==0?e:null}})),[...o?[o]:[],...a]}(f,{...t},r,i),m=t.xIsDate;if(void 0===m){let e=t.x;if(e&&n&&n.length>0){let t=n[0][e],r="string"==typeof t&&(/^\d{4}-\d{2}-\d{2}/.test(t)||!isNaN(new Date(t).getTime())),i="string"==typeof e&&/date|year|month|week|time/gi.test(e);m=r||i}}else m=!!m;if(t.facet&&"bar"!==t.type){let e=Array.from(new Set(f.map(e=>e[t.facet]))),n=e.map((e,t)=>t%2),r=e.map((e,t)=>parseInt(t/2));f.forEach((i,o)=>{let s=e.indexOf(i[t.facet]);i.facetIndex=s,i.facetXLocation=n[s],i.facetYLocation=r[s]}),Array.from(e).map((t,i)=>{let o=e.indexOf(t),s=n[o],a=r[o],l="string"==typeof t&&t.length>20?t.substring(0,27)+"...":t;p.push(jF([l],{fx:s,fy:a,frameAnchor:"top",monospace:!0,fontSize:12,textAnchor:"middle"}))})}let g={width:e.width,height:e.height,marginTop:(null==(o=null==t?void 0:t.margin)?void 0:o.top)??(null==(s=null==PH?void 0:PH.margin)?void 0:s.top),marginRight:(null==(a=null==t?void 0:t.margin)?void 0:a.right)??(null==(l=null==PH?void 0:PH.margin)?void 0:l.right),marginBottom:(null==(c=null==t?void 0:t.margin)?void 0:c.bottom)??(null==(u=null==PH?void 0:PH.margin)?void 0:u.bottom),marginLeft:(null==(h=null==t?void 0:t.margin)?void 0:h.left)??(null==(d=null==PH?void 0:PH.margin)?void 0:d.left),style:{backgroundColor:t.backgroundColor,overflow:"visible",fontSize:t.fontSize},color:{legend:!0,tickFormat:e=>"string"==typeof e&&e.length>25?e.substring(0,25)+(e.length>25?"...":""):e,swatchSize:10,style:{marginBottom:"1em"}},y:{grid:t.yGrid,nice:!0,label:t.yLabel||t.y,labelOffset:22},x:{grid:t.xGrid,label:t.xLabel||t.x},marks:p,facet:{label:t.xLabel}};return t.facet&&"bar"!==t.type&&(g.facet={data:f,x:"facetXLocation",y:"facetYLocation",axis:null}),g};function PW(e,t,n,r){var i;let o=[],s=t.aggregateFunction||"sum",{x:a,y:l,facet:c,colorBy:u}=t;return r.filter(e=>"categorical"===e.variableType&&e.title!==a&&e.title!==l&&e.title!==n.x&&e.title!==t.facet&&-1===n.y.indexOf(e.title)).slice(0,5),o.push(function(e,{x:t=EQ,y:n=EV,...r}={}){return new PB(e,function(e={}){return function(e,t,n={}){if((null==n?void 0:n.interval)==null)return n;let{reduce:r=Nd}=n,i={filter:null};return null!=n.y&&(i.y=r),null!=n[`${t}1`]&&(i[`${t}1`]=r),null!=n[`${t}2`]&&(i[`${t}2`]=r),e(i,n)}(PO,"y",jr(e,"x"))}({...r,x:t,y:n}))}(e,function(e={y:"count"},t={}){let{x:n=EV}=t;if(null==n)throw Error("missing channel: x");return function(e,t,{data:n=Nh,filter:r,sort:i,reverse:o,...s}={},a={}){s=M7(s,a,Nr),n=No(n,EV),i=null==i?void 0:Nr("sort",i,a),r=null==r?void 0:Ni("filter",r,a);let[l,c]=Mf(e),[u,h]=Mf(null),{z:d,fill:f,stroke:p,x1:m,x2:g,y1:y,y2:b,...v}=a,[x,w]=Mf(d),[k]=E2(f),[O]=E2(p),[S,C]=Mf(k),[T,A]=Mf(O);return{..."z"in a&&{z:x||d},..."fill"in a&&{fill:S||f},..."stroke"in a&&{stroke:T||p},...MJ(v,(a,l,u)=>{let f=Mg(EI(a,e),null==u?void 0:u.x),p=Mg(EI(a,t),null==u?void 0:u.y),m=EI(a,d),g=EI(a,k),y=EI(a,O),b=Na(s,{z:m,fill:g,stroke:y}),v=[],x=[],S=f&&c([]),T=p&&h([]),E=m&&w([]),M=g&&C([]),N=y&&A([]),_=0;for(let e of s)e.initialize(a);for(let e of(i&&i.initialize(a),r&&r.initialize(a),l)){let t=[];for(let t of s)t.scope("facet",e);for(let[o,l]of(i&&i.scope("facet",e),r&&r.scope("facet",e),Ne(e,b)))for(let[e,c]of Ne(l,p))for(let[l,u]of Ne(c,f)){let c={data:a};if(f&&(c.x=l),p&&(c.y=e),b&&(c.z=o),!(r&&!r.reduce(u,c))){for(let r of(t.push(_++),x.push(n.reduceIndex(u,a,c)),f&&S.push(l),p&&T.push(e),m&&E.push(b===m?o:m[u[0]]),g&&M.push(b===g?o:g[u[0]]),y&&N.push(b===y?o:y[u[0]]),s))r.reduce(u,c);i&&i.reduce(u,c)}}v.push(t)}return Nl(v,i,o),{data:x,facets:v}}),...!M6(s,"x")&&(l?{x:l}:{x1:m,x2:g}),...!M6(s,"y")&&(u?{y:u}:{y1:y,y2:b}),...Object.fromEntries(s.map(({name:e,output:t})=>[e,t]))}}(n,null,e,t)}({y:s},{x:t.x,y:t.y,filter:t.filter,stroke:u||"label",strokeWidth:e=>{var n,r;let i=null==(n=null==e?void 0:e[0])?void 0:n.label;return i&&null!=(r=t.lineOptions)&&r[i]&&t.lineOptions[i].strokeWidth?t.lineOptions[i].strokeWidth:t.lineWidth},curve:(null==(i=t.lineOptions)?void 0:i.curve)||t.curve,tip:{format:{x:e=>`${e}`,y:e=>`${e}`,strokeWidth:!1,stroke:!1}}}))),o}function PG(e,t){var n;let r;let i=t.aggregateFunction||"sum",o=(n=e.map(e=>({label:e[t.x||"label"],value:e[t.y||"value"],facet:e[t.facet||"facet"]})),r=[],"sum"==i?r=n.reduce((e,t)=>{let{label:n,value:r,facet:i}=t,o=e.find(e=>e.label===n&&e.facet===i);return o?o.value+=r:e.push({label:n,value:r,facet:i}),e},[]):"count"==i?r=n.reduce((e,t)=>{let{label:n,facet:r}=t,i=e.find(e=>e.label===n&&e.facet===r);return i?i.value+=1:e.push({label:n,value:1,facet:r}),e},[]):"mean"==i&&(r=(r=n.reduce((e,t)=>{let{label:n,value:r,facet:i}=t,o=e.find(e=>e.label===n&&e.facet===i);return o?o.value+=r:e.push({label:n,value:r,facet:i}),e},[])).map(e=>({...e,value:e.value/n.filter(t=>t.label===e.label&&t.facet===e.facet).length}))),r);return[function(e,t={}){var n;return function({x:e,x1:t,x2:n}){return void 0!==e||void 0!==t||void 0!==n}(n=t)||Mt(n)||void 0!==n.interval||(t={...t,x:EQ,y2:EV,interval:1}),new DZ(e,function({y:e,y1:t,y2:n,...r}={}){return r=jr(r,"x"),void 0===t&&void 0===n?function(e={},t={}){1==arguments.length&&([e,t]=function(e){let{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}(e));let{x1:n,x:r=n,y:i,...o}=t,[s,a,l,c]=function(e,t=EH,n,r,{offset:i,order:o,reverse:s},a){if(null===t)throw Error("stack requires y");let l=Ma(a),[c,u]=Mf(e),[h,d]=Md(t),[f,p]=Md(t);return h.hint=f.hint=D$,i=function(e){if(null!=e){if("function"==typeof e)return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return DF;case"center":case"silhouette":return DQ;case"wiggle":return DV}throw Error(`unknown offset: ${e}`)}}(i),o=function(e,t,n){if(void 0===e&&t===DV)return DW(Ei);if(null!=e){var r,i,o;if("string"==typeof e){let t=e.startsWith("-"),o=t?Eo:Ei;switch((t?e.slice(1):e).toLowerCase()){case"value":case n:return r=o,(e,t,n)=>(e,t)=>r(n[e],n[t]);case"z":return i=o,(e,t,n,r)=>(e,t)=>i(r[e],r[t]);case"sum":return DX(o,(e,t,n,r)=>t8(Mc(e),e=>nv(e,e=>n[e]),e=>r[e]));case"appearance":return DX(o,(e,t,n,r)=>t8(Mc(e),e=>t[nd(e,e=>n[e])],e=>r[e]));case"inside-out":return DW(o)}return DG(EF(e))}if("function"==typeof e)return(1===e.length?DG:function(e){return t=>Ej(t)?(n,r)=>e(t[n],t[r]):(n,r)=>e(t.get(n),t.get(r))})(e);if(Ej(e)){return o=e,DX(Ei,()=>o)}throw Error(`invalid order: ${e}`)}}(o,i,r),[MJ(a,(n,r,a)=>{({data:n,facets:r}=function(e,t){if(1===t.length)return{data:e,facets:t};let n=Ml(e),r=new Uint8Array(n),i=0;for(let e of t)for(let t of e)r[t]&&++i,r[t]=1;if(0===i)return{data:e,facets:t};let o=(e=Me(e))[ER]=new Uint32Array(n+i);t=t.map(e=>Me(e,Uint32Array));let s=n;for(let n of(r.fill(0),t))for(let t=0,i=n.length;t<i;++t){let i=n[t];r[i]?(n[t]=s,e[s]=e[i],o[s]=i,++s):o[i]=i,r[i]=1}return{data:e,facets:t}}(n,r));let c=null==e?void 0:u(Mg(EI(n,e),null==a?void 0:a.x)),h=EI(n,t,Float64Array),f=EI(n,l),m=o&&o(n,c,h,f),g=Ml(n),y=d(new Float64Array(g)),b=p(new Float64Array(g)),v=[];for(let e of r){let t=c?Array.from(t2(e,e=>c[e]).values()):[e];if(m)for(let e of t)e.sort(m);for(let e of t){let t=0,n=0;for(let r of(s&&e.reverse(),e)){let e=h[r];e<0?t=b[r]=(y[r]=t)+e:e>0?n=b[r]=(y[r]=n)+e:b[r]=y[r]=n}}v.push(t)}return i&&i(v,y,b,f),{data:n,facets:r}}),c,h,f]}(r,i,"x","y",e,o);return{...s,x1:n,x:a,y1:l,y2:c,y:Mm(l,c)}}({y:e,...r}):([t,n]=function(e,t,n,r=EV){return void 0===t&&void 0===n?(t=0,n=void 0===e?r:e):void 0===t?t=void 0===e?0:e:void 0===n&&(n=void 0===e?0:e),[t,n]}(e,t,n),{...r,y1:t,y2:n})}(function(e={}){return jM("x",jC,e,!0)}(function(e={},t="y"){return Mt(e)?e:{...e,[t]:EV}}(t))))}(o=t.xIsDate?o.map(e=>({...e,facet:_.D.utc(e.facet)})):function(e){let t=new Set(e.reduce((e,t)=>{let n=e.find(e=>e.facet===t.facet);return n?n.value+=t.value:e.push({...t}),e},[]).sort((e,t)=>t.value-e.value).slice(0,10).map(e=>e.facet)),n={};e.forEach(e=>{t.has(e.facet)||(n[e.label]=(n[e.label]||0)+e.value)});let r=Object.entries(n).map(([e,t])=>({label:e,value:t,facet:"Others"}));return[...e.filter(e=>t.has(e.facet)),...r]}(o),{x:"label",y:"value",fx:"facet",fill:"label",sort:t.xIsDate?void 0:{fx:{value:"-y"}},tip:{format:{x:e=>e,y:e=>e,fill:!1}}})]}function PX(e,t,n,r){let{x:i,y:o,colorBy:s}=t;return r.filter(e=>"categorical"===e.variableType&&e.title!==i&&e.title!==o&&e.title!==n.x&&e.title!==t.facet&&-1===n.y.indexOf(e.title)).slice(0,5),[function(e,{x:t,y:n,...r}={}){return void 0===r.frameAnchor&&([t,n]=Ms(t,n)),new Pq(e,{...r,x:t,y:n})}(e,{x:t.x,y:t.y,filter:t.filter,fill:t.colorBy||t.pointColor,r:t.pointSize,fillOpacity:.7,tip:{format:{x:e=>e,y:e=>e}}})]}function PY(e){let t=`scheme${e}`,n=`interpolate${e}`;return cc[t]?{colorScheme:Array.isArray(cc[t].slice(-1)[0])?cc[t][5]:cc[t],schemeName:t}:cc[n]?{colorScheme:cc[n],schemeName:n}:{colorScheme:null,schemeName:null}}function PZ(e,t,n){var r,i,o,s,a,l,c,u,h,d,f;let p=null,{selectedChart:m,selectedColumns:g,chartStyle:y,chartSpecificOptions:b,availableColumns:v,data:x}=n.config,w=v.find(e=>e.key===g.x);if(null!=w&&w.isDate){let e=_.D.min(x.map(e=>_.D.utc(e[w.key]))),t=(_.D.max(x.map(e=>_.D.utc(e[w.key])))-e)/1e3/60/60/24;t<14?w.rangeToShow="day":t<120?w.rangeToShow="week":t<1095?w.rangeToShow="month":w.rangeToShow="year"}if(!g.x||!g.y||Array.isArray(g.y)&&!(null!=(r=null==g?void 0:g.y)&&r.length))p=null;else{let e=x,n=v.find(e=>e.key===b[m].colorBy);if("bar"===m)try{null!=(i=b[m])&&i.filter&&"function"!=typeof b[m].filter&&(console.warn("Invalid filter option detected, removing:",b[m].filter),b[m].filter=null),e=(0,_.E)(e,g.x,g.y,b[m].colorBy,b[m].colorByIsDate,g.facet)}catch(e){console.error("Error converting wide to long format for bar chart",e)}if(null!=(o=b[m])&&o.filter&&"function"!=typeof b[m].filter&&(console.warn("Invalid filter option detected, removing:",b[m].filter),b[m].filter=null),"bar"!==m&&"line"!==m)p=PU(t,{...PH,type:m||"Bar",x:g.x||null,y:g.y||null,facet:g.facet,filter:null==(s=b[m])?void 0:s.filter,xIsDate:null==w?void 0:w.isDate,colorByIsDate:null==n?void 0:n.isDate,...y,...b[m]},e,g,v);else if("bar"===m)p=PU(t,{...PH,type:m,x:g.x&&(null==(a=null==g?void 0:g.y)?void 0:a.length)&&"label",y:g.x&&null!=(l=null==g?void 0:g.y)&&l.length?"value":null,facet:g.x||null,filter:null==(c=b[m])?void 0:c.filter,xIsDate:null==w?void 0:w.isDate,colorByIsDate:null==n?void 0:n.isDate,...y,...b[m]},e,g,v);else if("line"===m){let e=(0,_.E)(x,g.x,g.y,b[m].colorBy,null==n?void 0:n.isDate,g.facet);null!=(u=b[m])&&u.filter&&"function"!=typeof b[m].filter&&(console.warn("Invalid filter option detected for line chart, removing:",b[m].filter),b[m].filter=null),p=PU(t,{...PH,type:m,x:g.x||null,y:g.x&&g.y.length?"value":null,stroke:"label",facet:g.facet||null,filter:null==(h=b[m])?void 0:h.filter,xIsDate:null==w?void 0:w.isDate,colorByIsDate:null==n?void 0:n.isDate,...y,...b[m]},e,g,v)}}if(e.innerHTML="",e.style.padding="0 0 0 0",!x||0===x.length)return e.innerHTML=`<div class='flex items-center justify-center h-full w-full text-gray-500 dark:text-gray-400 flex-col'>
      <div class="flex items-center gap-2 mb-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <span class="text-sm font-medium">No data to display</span>
      </div>
      <p class="text-xs text-center max-w-sm">
        Please ensure data is available for visualization
      </p>
    </div>`,null;if(p){if("bar"===m){let{colorScheme:t}=PY(y.selectedScheme),n=g.y,r=(null==(d=null==b?void 0:b.bar)?void 0:d.barOptions)||{},i=-1,o=n.map(e=>r[e]&&r[e].fill?r[e].fill:Array.isArray(t)?t[++i%t.length]:t(i/n.length)),s={...p,color:b[m].colorBy?{legend:!0,tickFormat:e=>"string"==typeof e&&e.length>25?e.substring(0,25)+(e.length>25?"...":""):e,style:{marginBottom:"1em"}}:{...p.color,scheme:void 0,domain:n,range:o,legend:!0,tickFormat:e=>"string"==typeof e&&e.length>25?e.substring(0,25)+(e.length>25?"...":""):e,style:{marginBottom:"1em"}},fx:{grid:!1,tickRotate:-45,tickFormat:e=>{let t;if(null!=w&&w.isDate){let n=_.D.utc(e);t="year"===w.rangeToShow?n.format("YYYY"):"month"===w.rangeToShow?n.format("MMM YYYY"):n.format("MMM DD")}else t=String(e);return t&&t.length>18?t.substring(0,15)+"...":t},axis:"bottom",interval:null!=w&&w.isDate?w.rangeToShow:void 0},x:{axis:null,label:""}};e.appendChild(Ps(s))}else if("line"===m){let{colorScheme:t}=PY(y.selectedScheme),n=g.y,r=(null==(f=null==b?void 0:b.line)?void 0:f.lineOptions)||{},i=-1,o=n.map(e=>r[e]&&r[e].stroke?r[e].stroke:Array.isArray(t)?t[++i%t.length]:t(i/n.length));e.appendChild(Ps({...p,color:b[m].colorBy?{legend:!0,tickFormat:e=>"string"==typeof e&&e.length>25?e.substring(0,25)+(e.length>25?"...":""):e,style:{marginBottom:"1em"}}:{...p.color,scheme:void 0,domain:n,range:o,legend:!0,tickFormat:e=>"string"==typeof e&&e.length>25?e.substring(0,25)+(e.length>25?"...":""):e,style:{marginBottom:"1em"}}}))}else e.appendChild(Ps(p));let t=e.querySelector("[aria-label^='x-axis tick label'], [aria-label^='fx-axis tick label']"),n=e.querySelector("[aria-label^='y-axis tick label']"),r=e.querySelector("[aria-label^='x-axis label'], [aria-label^='fx-axis label']"),i=e.querySelector("[aria-label^='y-axis label']"),o=0,s=0;if(t)try{let n=e.getBoundingClientRect().bottom,i=t.getBoundingClientRect().bottom-n+20;if(o=i=i>0?i:0,r){let[e,t]=r.getAttribute("transform").split("(")[1].slice(0,-1).split(",").map(e=>parseFloat(e)),n=t+i;r.setAttribute("transform",`translate(${e}, ${n})`)}}catch{}if(n)try{let t=e.getBoundingClientRect().left,r=n.getBoundingClientRect().left,o=r-t-20;if(s=o<0?Math.abs(o):0,i){let[e,t]=i.getAttribute("transform").split("(")[1].slice(0,-1).split(",").map(e=>parseFloat(e)),n=i.getBoundingClientRect().left,o=e;n>r&&(o=e-(n-r)-20),i.setAttribute("transform",`translate(${o}, ${t})`)}}catch{}let a=e.children[0];a&&(a.style.padding=`0 0 ${o}px ${s}px`)}else e.innerHTML=`<div class='flex items-center justify-center h-full w-full text-gray-500 dark:text-gray-400 flex-col'>
      <div class="flex items-center gap-2 mb-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="8" y1="6" x2="21" y2="6"></line>
          <line x1="8" y1="12" x2="21" y2="12"></line>
          <line x1="8" y1="18" x2="21" y2="18"></line>
          <line x1="3" y1="6" x2="3.01" y2="6"></line>
          <line x1="3" y1="12" x2="3.01" y2="12"></line>
          <line x1="3" y1="18" x2="3.01" y2="18"></line>
        </svg>
        <span class="text-sm font-medium">Select axes to display chart</span>
      </div>
      <p class="text-xs text-center max-w-sm">
        Please select both X and Y axes from the options panel to generate a visualization.
      </p>
    </div>`;return p&&(p.wasSampled=!1),p}_.D.extend(PV),_.D.extend(Am);let PK=[{name:"square",label:M.j.jsxs("span",{children:[M.j.jsx("span",{className:"hidden md:inline",children:"Square("})," 800\xd7800",M.j.jsx("span",{className:"hidden md:inline",children:")"})]}),width:800,height:800},{name:"rectangle",label:M.j.jsxs("span",{children:[M.j.jsx("span",{className:"hidden md:inline",children:"Rectangle("})," 1280\xd7600",M.j.jsx("span",{className:"hidden md:inline",children:")"})]}),width:1280,height:600}],PJ={idle:M.j.jsxs("div",{className:"flex items-center animate-fade-up",children:[M.j.jsx(M.ad,{size:16,className:"md:mr-2"}),M.j.jsx("span",{className:"hidden md:block",children:"Download PNG"})]}),downloading:M.j.jsxs("div",{className:"flex items-center animate-fade-up",children:[M.j.jsx(M.ae,{size:16,className:"mr-2 animate-spin"}),"Downloading..."]}),saved:M.j.jsxs("div",{className:"flex items-center animate-fade-up",children:[M.j.jsx(M.ad,{size:16,className:"mr-2"}),"Saved"]})};function P0({isOpen:e,onClose:t,className:n=""}){let[r,i]=(0,N.useState)({width:800,height:800}),o=(0,N.useRef)(null),s=(0,N.useRef)(null),a=(0,N.useRef)(null),l=(0,N.useRef)(null),c=(0,N.useContext)(T6),[u,h]=(0,N.useState)("idle");(0,N.useEffect)(()=>{e&&s.current&&s.current.focus()},[e]),(0,N.useEffect)(()=>{e&&o.current&&PZ(o.current,r,c)},[e,r]);let d=(e,t)=>{let n=parseInt(t)||0;i(t=>({...t,[e]:n}))};(0,N.useEffect)(()=>{e&&(d("width",r.width),d("height",r.height))},[e]);let f=()=>{setTimeout(()=>{h("idle")},2e3)},p=async()=>{try{let e=a.current.value?l.current:o.current;await function(e,t={}){if(!e)return;let{bg:n="white",width:r=1e3,height:i=1e3,filename:o="chart.png"}=t,s={width:e.style.width,height:e.style.height,position:e.style.position,overflow:e.style.overflow,transform:e.style.transform,transformOrigin:e.style.transformOrigin,padding:e.style.padding,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,backgroundColor:e.style.backgroundColor},a=e.querySelectorAll("text, .tick text, .axis-label, .title"),l=new Map;a.forEach(e=>{l.set(e,{fill:e.style.fill||window.getComputedStyle(e).fill,stroke:e.style.stroke||window.getComputedStyle(e).stroke,color:e.style.color||window.getComputedStyle(e).color})});let c=()=>{Object.assign(e.style,{width:s.width,height:s.height,position:s.position,overflow:s.overflow,transform:s.transform,transformOrigin:s.transformOrigin,padding:s.padding,backgroundColor:s.backgroundColor}),e.scrollTop=s.scrollTop,e.scrollLeft=s.scrollLeft,a.forEach(e=>{let t=l.get(e);t&&(e.style.fill=t.fill,e.style.stroke=t.stroke,e.style.color=t.color)})};try{Object.assign(e.style,{width:`${e.scrollWidth}px`,height:`${e.scrollHeight}px`,position:"relative",overflow:"visible",transform:"none",transformOrigin:"top left",padding:"0px",backgroundColor:n}),e.scrollTop=0,e.scrollLeft=0,a.forEach(e=>{e.style.fill="#000000",e.style.stroke="none",e.style.color="#000000"});let t=e.offsetWidth,s=e.offsetHeight,l=e.cloneNode(!0);Object.assign(l.style,{transform:`scale(${r/t}, ${i/s})`,transformOrigin:"top left",width:`${t}px`,height:`${s}px`});let u=document.createElement("div");return Object.assign(u.style,{position:"absolute",top:"-10000px",left:"-10000px"}),u.appendChild(l),document.body.appendChild(u),En(l,{backgroundColor:n,pixelRatio:2,width:e.scrollWidth,height:e.scrollHeight,style:{transform:"none",transformOrigin:"top left"}}).then(e=>{let t=document.createElement("a");t.download=o,t.href=e,t.click()}).finally(()=>{c(),document.body.removeChild(u)})}catch(e){throw c(),console.error("Failed to export chart:",e),e}}(e,r),h("saved"),f()}catch(e){h("idle"),console.error("Failed to download:",e)}};return M.j.jsxs(M.e,{open:e,onCancel:t,className:n,contentClassNames:"max-w-fit",footer:!1,rootClassNames:"z-[10000] max-h-full",title:"Export Chart",children:[M.j.jsx("div",{className:"pb-4 z-10",children:M.j.jsxs("div",{className:"flex items-start md:items-center justify-between gap-2",children:[M.j.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[M.j.jsxs("div",{className:"flex items-center gap-2",children:[M.j.jsx(M.N,{ref:s,type:"number",placeholder:"Width",value:r.width,onChange:e=>d("width",e.target.value),inputClassNames:"w-24 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-blue-400"}),M.j.jsx("span",{className:"text-sm font-medium text-gray-400",children:"\xd7"}),M.j.jsx(M.N,{type:"number",placeholder:"Height",value:r.height,onChange:e=>d("height",e.target.value),inputClassNames:"w-24 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-blue-400"})]}),M.j.jsx("div",{className:"flex gap-2",children:PK.map(e=>M.j.jsx("button",{onClick:()=>i({width:e.width,height:e.height}),className:`px-3 py-1.5 rounded-md text-sm transition-all duration-200 
                    bg-white hover:bg-gray-50 border border-gray-200 hover:border-gray-300
                    shadow-sm hover:shadow backdrop-blur-sm
                    hover:-translate-y-0.5
                    dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-600`,children:e.label},e.name))})]}),M.j.jsx("button",{onClick:()=>{h("downloading"),p()},disabled:"idle"!==u,className:`flex text-center justify-center items-center px-4 py-1.5 text-sm font-medium text-white bg-blue-600 
                rounded-md hover:bg-blue-700 transition-all duration-200 
                shadow-sm hover:shadow-md hover:-translate-y-0.5
                disabled:bg-blue-400 disabled:cursor-not-allowed disabled:hover:translate-y-0
                overflow-hidden
                dark:bg-blue-700 dark:hover:bg-blue-800`,children:PJ[u]})]})}),M.j.jsxs("div",{className:"relative bg-white dark:bg-gray-900 overflow-auto max-w-full",ref:l,style:{width:r.width,height:r.height},children:[M.j.jsx(M.N,{ref:a,placeholder:"Add a title",rootClassNames:"*:!text-2xl border-0 *:!text-bold",inputClassNames:"ring-0 outline-0 border-0 !text-2xl shadow-none text-bold p-0"}),M.j.jsx("div",{ref:o,className:"[&_figure]:!p-0",style:{width:r.width,height:r.height}})]})]})}function P1(){let e=(0,N.useRef)(null),[t,n]=(0,N.useState)({width:0,height:0}),[r,i]=(0,N.useState)(!1),o=(0,N.useContext)(T6),s=(0,N.useCallback)(()=>{if(e.current){let{width:t,height:r}=e.current.getBoundingClientRect();n(e=>t!==e.width||r!==e.height?{width:t,height:r}:e)}},[]);(0,N.useEffect)(()=>{let t=new ResizeObserver(s);return e.current&&t.observe(e.current),s(),()=>t.disconnect()},[s]);let a=(0,N.useMemo)(()=>{if(e.current)return PZ(e.current,t,o)},[o.config,t]);return(0,N.useEffect)(()=>{let e=e=>{document.activeElement===document.body&&!e.metaKey&&!e.ctrlKey&&!e.altKey&&!e.shiftKey&&(0,M.ab)(e.key,M.a8.SAVE_CHART)&&(i(!0),e.preventDefault())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),M.j.jsxs("div",{className:"mr-4 grow",children:[M.j.jsxs("div",{className:"flex justify-end gap-2 mb-2",children:[a&&(null==a?void 0:a.wasSampled)&&M.j.jsx("div",{className:"text-sm text-gray-500",children:"* Data has been sampled for better visualization"}),M.j.jsxs(M.D,{onClick:()=>i(!0),variant:"ghost",className:`inline-flex items-center px-2.5 py-1.5 rounded-md border border-gray-200/50 
                bg-white/95 hover:bg-gray-50/95 dark:bg-gray-800/95 dark:hover:bg-gray-700/95 
                shadow-sm backdrop-blur-sm transition-all duration-200 
                dark:border-gray-700/50 dark:hover:border-gray-600/50
                hover:shadow-md hover:-translate-y-0.5
                group`,title:`Download chart as PNG (${M.a8.SAVE_CHART})`,children:[M.j.jsx(M.ad,{size:16,className:"mr-1"}),M.j.jsx("span",{className:"mr-1 whitespace-nowrap",children:"Save as PNG"}),M.j.jsx(M.a2,{keyValue:M.a8.SAVE_CHART,className:"opacity-50 group-hover:opacity-100 transition-opacity ml-1 !py-0.5 !px-1.5"})]})]}),M.j.jsx("div",{ref:e,className:"w-full mx-6 border-gray-200 observable-plot h-[500px] overflow-visible observable-plot"}),M.j.jsx(P0,{isOpen:r,onClose:()=>i(!1),sourceChartRef:e})]})}_.D.extend(Am);let P2=({isOpen:e,onClick:t})=>M.j.jsx("button",{onClick:t,className:`
      absolute -right-8 top-[50%] -translate-y-[50%]
      h-36 w-8 flex items-center justify-center group
      bg-[#F9FAFB] dark:bg-gray-800 
      border border-gray-200 dark:border-gray-700
      hover:bg-gray-50 dark:hover:bg-gray-700
      transition-colors rounded-r
       z-10
    `,title:`${e?"Collapse":"Expand"} chart options (${M.a8.TOGGLE_CHART_OPTIONS})`,children:M.j.jsxs("div",{className:"relative flex flex-col h-full",children:[M.j.jsx("div",{className:"flex items-center justify-center flex-1",children:M.j.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:M.j.jsx(ec,{className:"size-5"})})}),M.j.jsx("div",{className:"absolute -translate-x-1/2 bottom-2 left-1/2",children:M.j.jsx(M.a2,{keyValue:M.a8.TOGGLE_CHART_OPTIONS,className:"scale-75 opacity-75"})})]})}),P4=({block:e,value:t,onChange:n,options:r,className:i=""})=>M.j.jsx("div",{className:`flex ${e?"w-full":"inline-flex"} justify-center  rounded-md p-0.5 bg-gray-200 dark:bg-gray-800 ${i}`,children:r.map((e,r)=>M.j.jsx("button",{onClick:()=>n(e.value),className:`
            flex w-full items-center justify-center gap-1.5 px-3 py-1.5 rounded-[4px]
            text-xs font-medium transition-all duration-150 ease-in-out
            ${t===e.value?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50"}
            ${r>0?"ml-0.5":""}
          `,children:e.label},r))});function P5({rows:e,columns:t,stepData:n,chartManager:r,initialQuestion:i=null,initialOptionsExpanded:o=!1}){let[s,a]=(0,N.useState)(o),l=(0,N.useMemo)(()=>r||(null!=n&&n.chartManager?n.chartManager:T3({data:e,availableColumns:t})),[r,n,e,t]),[c,u]=(0,N.useState)(l.config);(0,N.useEffect)(()=>{l.setConfigCallback=u},[]);let h=(0,N.useContext)(T1),d=(0,N.useContext)(Um),{apiEndpoint:f,token:p}=h;p||(f=d.apiEndpoint,p=d.token);let m=(0,_.F)({protocol:"http",path:"edit_chart",apiEndpoint:f});(0,N.useContext)(M.a);let{selectedColumns:g}=c;(0,N.useEffect)(()=>{i&&!l.config.loading?l.editChart(p,i,m,{onError:e=>{console.warn("Chart edit warning:",null==e?void 0:e.message)}}):i||l.autoSelectVariables().render()},[]),(0,N.useEffect)(()=>{let e=e=>{document.activeElement===document.body&&e.key===M.a8.TOGGLE_CHART_OPTIONS&&(a(e=>!e),e.preventDefault())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]);let[y,b]=(0,N.useState)("primary");return M.j.jsx(T6.Provider,{value:Object.assign(l,{config:c}),children:M.j.jsx("div",{className:"relative",children:M.j.jsxs("div",{className:"relative flex flex-row gap-3",children:[M.j.jsxs("div",{className:"relative flex",children:[M.j.jsx("div",{className:`
                relative border-r border-gray-200 dark:border-gray-700
                transition-all duration-200 overflow-hidden
                ${s?"w-[350px]":"w-[0px]"}
              `,children:M.j.jsxs("div",{className:`
                  transition-all duration-200 relative
                  overflow-x-hidden h-full
                  ${s?"pr-4":"pr-0"}
                `,children:[M.j.jsx("div",{style:{width:"350px"},children:(()=>{let e=c.availableColumns;return M.j.jsxs("div",{className:"space-y-4",children:[M.j.jsx(Al,{columns:e,showChartTypeOnly:!0}),M.j.jsx("div",{className:"mr-4",children:M.j.jsx(P4,{block:!0,value:y,onChange:e=>b(e),className:"transition-none",options:[{label:M.j.jsxs("div",{className:"flex items-center mt-[0.5px] justify-center gap-1.5 px-3 py-1",children:[M.j.jsx(V,{className:"text-current",size:14}),M.j.jsx("p",{className:"font-sans text-xs font-semibold",children:"General"})]}),value:"primary"},{label:M.j.jsxs("div",{className:"flex items-center mt-[0.5px] justify-center gap-1.5 px-3 py-1",children:[M.j.jsx(el,{className:"text-current",size:14}),M.j.jsx("p",{className:"font-sans text-xs",children:"Style"})]}),value:"customization"}]})}),M.j.jsx("div",{className:"pl-1 pr-4",children:"primary"===y?M.j.jsx(Al,{columns:e,showChartTypeOnly:!1}):M.j.jsx(Ad,{})})]})})()}),M.j.jsx("div",{className:`
                    absolute inset-y-0 left-0 w-24
                    transition-opacity duration-200
                    ${s?"opacity-0 pointer-events-none":"opacity-100"}
                    bg-gradient-to-l from-transparent 
                    via-white/50 to-white
                    dark:via-gray-800/50 dark:to-gray-800
                  `})]})}),M.j.jsx(P2,{isOpen:s,onClick:()=>a(!s)})]}),M.j.jsx("div",{className:`
              transition-all duration-200 flex-1
              ${s?"w-[calc(100%-350px)]":"w-full"}
            `,children:c.loading?M.j.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-64",children:[M.j.jsx("div",{className:"flex items-center justify-center mb-3",children:M.j.jsxs("div",{className:"relative",children:[M.j.jsx(M.I,{chart:!0}),M.j.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-white dark:to-gray-900 opacity-30"})]})}),M.j.jsxs("div",{className:"flex items-center space-x-2 mt-4 text-primary-highlight dark:text-blue-400",children:[M.j.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[M.j.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),M.j.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),M.j.jsx("span",{className:"text-sm font-medium",children:"Updating chart..."})]}),M.j.jsx("p",{className:"text-xs text-center max-w-sm text-gray-500 dark:text-gray-400 mt-2",children:"Applying your changes and generating visualization"})]}):l.config&&l.config.data&&l.config.data.length>0?M.j.jsx(P1,{}):M.j.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-64 text-gray-500 dark:text-gray-400",children:[M.j.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[M.j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),M.j.jsx("span",{className:"text-sm font-medium",children:"No data to display"})]}),M.j.jsx("p",{className:"text-xs text-center max-w-sm",children:"Please ensure data is available and columns are selected for visualization"})]})})]})})})}function P3(e={},t=(0,_.g)()){let n=!function(e){if(!e||"object"!=typeof e)return!1;for(let t in e){if("string"!=typeof t)return!1;let n=e[t];if(!n||"object"!=typeof n||!n.root||!n.analysisList||"object"!=typeof n.root||!Array.isArray(n.analysisList)||!P6(n.root)||!n.analysisList.length||n.analysisList[0].analysisId!==n.root.analysisId||t!==n.root.analysisId)return!1;for(let e of n.analysisList)if(!P6(e)||e.rootAnalysisId!==n.root.analysisId)return!1}return!0}(e)?{}:e,r={},i=Object.values(n).reduce((e,t)=>({...e,[t.root.analysisId]:t.root,...t.analysisList.reduce((e,t)=>({...e,[t.analysisId]:t}),{})}),{}),o=[],s=[],a={},l=null,c=null;function u(e,t){n=e,i=t,o.forEach(e=>e())}function h(){s.forEach(e=>e())}function d(e,t){r[e]=t,a[e]||(a[e]=[]),a[e].forEach(e=>{try{e()}catch(e){console.error("Error in active tab listener",e)}})}async function f({question:e,projectName:t,analysisId:r,rootAnalysisId:o,isRoot:s=!1,directParentId:a=null,sqlOnly:l=!1,isTemp:c=!1,activeTab:h}){let f={analysisId:r,isRoot:s,rootAnalysisId:s?r:o,user_question:e,isTemp:c,projectName:t,sqlOnly:l,timestamp:Date.now(),activeTab:h};f.directParentId=a,f.createAnalysisRequestBody={initialisation_details:{user_question:e,is_root_analysis:s,root_analysis_id:o,direct_parent_id:a},sql_only:l};let p={...n};s?p[f.analysisId]={root:f,analysisList:[f]}:p[n[o].root.analysisId].analysisList.push(f);let m={...i,[f.analysisId]:f};return d(f.analysisId,h||"table"),u(p,m),{newAnalysis:f}}return{subscribeToDataChanges:function(e){return o=[...o,e],function(){o=o.filter(t=>t!==e)}},getTree:function(){return n},getNestedTree:function(){let e={};for(let t in Object.keys(i).forEach(t=>{e[t]={...i[t],children:[],parent:null,flatOrderedChildren:[],allParents:[]}}),Object.keys(e).forEach(t=>{if(e[t].directParentId){let n=e[e[t].directParentId];n&&(e[t].parent=n,e[t].allParents=function(e){let t=[],n=e;for(;n;)t.push(n),n=n.parent;return t}(n),n.children.push(e[t]),n.children.sort((e,t)=>t.timestamp-e.timestamp))}}),e)e[t].isRoot?e[t].flatOrderedChildren=function e(t){var n;let r=[];if(null!=(n=null==t?void 0:t.children)&&n.length)for(let n of t.children)r.push(n),r.push(...e(n));return r}(e[t]):delete e[t];return e},getAll:function(){return i},subscribeToActiveAnalysisIdChanges:function(e){return s.push(e),function(){s=s.filter(t=>t!==e)}},getActiveTab:function(e){return r[e]||"table"},setActiveTab:d,subscribeToActiveTabChanges:function(e,t){return e?(a[e]&&Array.isArray(a[e])||(a[e]=[]),a[e].push(t),function(){e&&a[e]&&(a[e]=a[e].filter(e=>e!==t))}):()=>{}},setActiveAnalysisId:function(e){l=e,h()},setActiveRootAnalysisId:function(e){c=e,h()},getActiveAnalysisId:function(){return l},getActiveRootAnalysisId:function(){return c},submit:f,removeAnalysis:function({analysisId:e,isRoot:t,rootAnalysisId:r}){let o={...n};t?delete o[e]:r&&n[r].root&&(o[r].analysisList=o[r].analysisList.filter(t=>t.analysisId!==e));let s={...i};delete s[e],u(o,s)},updateAnalysis:function({analysisId:e,isRoot:t,updateObj:r,emit:o=!0}){let s={...n};if(!i[e]){console.warn("Analysis not found",e);return}t&&(s[e].root={...s[e].root,...r});let a=i[e].rootAnalysisId;s[a].analysisList=s[a].analysisList.map(t=>t.analysisId===e?{...t,...r}:t);let l={...i};l[e]={...l[e],...r},u(s,l)},getMgrId:()=>t,reset:function(){u({},{})}}}function P6(e){return!(!e||"object"!=typeof e||!e.analysisId||"string"!=typeof e.analysisId||!e.createAnalysisRequestBody||"object"!=typeof e.createAnalysisRequestBody||"string"!=typeof e.directParentId&&null!==e.directParentId||"boolean"!=typeof e.isRoot||"boolean"!=typeof e.isTemp||"string"!=typeof e.projectName||"string"!=typeof e.rootAnalysisId||"boolean"!=typeof e.sqlOnly||"string"!=typeof e.user_question)}!function(e){var t,n,r=function(e){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,r={},i={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof o?new o(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function e(t,n){var r,o;switch(n=n||{},i.util.type(t)){case"Object":if(n[o=i.util.objId(t)])return n[o];for(var s in r={},n[o]=r,t)t.hasOwnProperty(s)&&(r[s]=e(t[s],n));return r;case"Array":return n[o=i.util.objId(t)]?n[o]:(r=[],n[o]=r,t.forEach(function(t,i){r[i]=e(t,n)}),r);default:return t}},getLanguage:function(e){for(;e;){var n=t.exec(e.className);if(n)return n[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,n){e.className=e.className.replace(RegExp(t,"gi"),""),e.classList.add("language-"+n)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw Error()}catch(r){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(r.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var n in t)if(t[n].src==e)return t[n]}return null}},isActive:function(e,t,n){for(var r="no-"+t;e;){var i=e.classList;if(i.contains(t))return!0;if(i.contains(r))return!1;e=e.parentElement}return!!n}},languages:{plain:r,plaintext:r,text:r,txt:r,extend:function(e,t){var n=i.util.clone(i.languages[e]);for(var r in t)n[r]=t[r];return n},insertBefore:function(e,t,n,r){var o=(r=r||i.languages)[e],s={};for(var a in o)if(o.hasOwnProperty(a)){if(a==t)for(var l in n)n.hasOwnProperty(l)&&(s[l]=n[l]);n.hasOwnProperty(a)||(s[a]=o[a])}var c=r[e];return r[e]=s,i.languages.DFS(i.languages,function(t,n){n===c&&t!=e&&(this[t]=s)}),s},DFS:function e(t,n,r,o){o=o||{};var s=i.util.objId;for(var a in t)if(t.hasOwnProperty(a)){n.call(t,a,t[a],r||a);var l=t[a],c=i.util.type(l);"Object"!==c||o[s(l)]?"Array"!==c||o[s(l)]||(o[s(l)]=!0,e(l,n,a,o)):(o[s(l)]=!0,e(l,n,null,o))}}},plugins:{},highlightAll:function(e,t){i.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var r={callback:n,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",r),r.elements=Array.prototype.slice.apply(r.container.querySelectorAll(r.selector)),i.hooks.run("before-all-elements-highlight",r);for(var o,s=0;o=r.elements[s++];)i.highlightElement(o,!0===t,r.callback)},highlightElement:function(t,n,r){var o=i.util.getLanguage(t),s=i.languages[o];i.util.setLanguage(t,o);var a=t.parentElement;a&&"pre"===a.nodeName.toLowerCase()&&i.util.setLanguage(a,o);var l=t.textContent,c={element:t,language:o,grammar:s,code:l};function u(e){c.highlightedCode=e,i.hooks.run("before-insert",c),c.element.innerHTML=c.highlightedCode,i.hooks.run("after-highlight",c),i.hooks.run("complete",c),r&&r.call(c.element)}if(i.hooks.run("before-sanity-check",c),(a=c.element.parentElement)&&"pre"===a.nodeName.toLowerCase()&&!a.hasAttribute("tabindex")&&a.setAttribute("tabindex","0"),!c.code){i.hooks.run("complete",c),r&&r.call(c.element);return}if(i.hooks.run("before-highlight",c),!c.grammar){u(i.util.encode(c.code));return}if(n&&e.Worker){var h=new Worker(i.filename);h.onmessage=function(e){u(e.data)},h.postMessage(JSON.stringify({language:c.language,code:c.code,immediateClose:!0}))}else u(i.highlight(c.code,c.grammar,c.language))},highlight:function(e,t,n){var r={code:e,grammar:t,language:n};if(i.hooks.run("before-tokenize",r),!r.grammar)throw Error('The language "'+r.language+'" has no grammar.');return r.tokens=i.tokenize(r.code,r.grammar),i.hooks.run("after-tokenize",r),o.stringify(i.util.encode(r.tokens),r.language)},tokenize:function(e,t){var n=t.rest;if(n){for(var r in n)t[r]=n[r];delete t.rest}var c=new a;return l(c,c.head,e),function e(t,n,r,a,c,u){for(var h in r)if(!(!r.hasOwnProperty(h)||!r[h])){var d=r[h];d=Array.isArray(d)?d:[d];for(var f=0;f<d.length;++f){if(u&&u.cause==h+","+f)return;var p=d[f],m=p.inside,g=!!p.lookbehind,y=!!p.greedy,b=p.alias;if(y&&!p.pattern.global){var v=p.pattern.toString().match(/[imsuy]*$/)[0];p.pattern=RegExp(p.pattern.source,v+"g")}for(var x=p.pattern||p,w=a.next,k=c;w!==n.tail&&!(u&&k>=u.reach);k+=w.value.length,w=w.next){var O=w.value;if(n.length>t.length)return;if(!(O instanceof o)){var S,C=1;if(y){if(!(S=s(x,k,t,g))||S.index>=t.length)break;var T=S.index,A=S.index+S[0].length,E=k;for(E+=w.value.length;T>=E;)E+=(w=w.next).value.length;if(E-=w.value.length,k=E,w.value instanceof o)continue;for(var M=w;M!==n.tail&&(E<A||"string"==typeof M.value);M=M.next)C++,E+=M.value.length;C--,O=t.slice(k,E),S.index-=k}else if(!(S=s(x,0,O,g)))continue;var T=S.index,N=S[0],_=O.slice(0,T),j=O.slice(T+N.length),D=k+O.length;u&&D>u.reach&&(u.reach=D);var P=w.prev;if(_&&(P=l(n,P,_),k+=_.length),function(e,t,n){for(var r=t.next,i=0;i<n&&r!==e.tail;i++)r=r.next;t.next=r,r.prev=t,e.length-=i}(n,P,C),w=l(n,P,new o(h,m?i.tokenize(N,m):N,b,N)),j&&l(n,w,j),C>1){var R={cause:h+","+f,reach:D};e(t,n,r,w.prev,k,R),u&&R.reach>u.reach&&(u.reach=R.reach)}}}}}}(e,c,t,c.head,0),function(e){for(var t=[],n=e.head.next;n!==e.tail;)t.push(n.value),n=n.next;return t}(c)},hooks:{all:{},add:function(e,t){var n=i.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=i.hooks.all[e];if(!(!n||!n.length))for(var r,o=0;r=n[o++];)r(t)}},Token:o};function o(e,t,n,r){this.type=e,this.content=t,this.alias=n,this.length=0|(r||"").length}function s(e,t,n,r){e.lastIndex=t;var i=e.exec(n);if(i&&r&&i[1]){var o=i[1].length;i.index+=o,i[0]=i[0].slice(o)}return i}function a(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function l(e,t,n){var r=t.next,i={value:n,prev:t,next:r};return t.next=i,r.prev=i,e.length++,i}if(e.Prism=i,o.stringify=function e(t,n){if("string"==typeof t)return t;if(Array.isArray(t)){var r="";return t.forEach(function(t){r+=e(t,n)}),r}var o={type:t.type,content:e(t.content,n),tag:"span",classes:["token",t.type],attributes:{},language:n},s=t.alias;s&&(Array.isArray(s)?Array.prototype.push.apply(o.classes,s):o.classes.push(s)),i.hooks.run("wrap",o);var a="";for(var l in o.attributes)a+=" "+l+'="'+(o.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+a+">"+o.content+"</"+o.tag+">"},!e.document)return e.addEventListener&&(i.disableWorkerMessageHandler||e.addEventListener("message",function(t){var n=JSON.parse(t.data),r=n.language,o=n.code,s=n.immediateClose;e.postMessage(i.highlight(o,i.languages[r],r)),s&&e.close()},!1)),i;var c=i.util.currentScript();function u(){i.manual||i.highlightAll()}if(c&&(i.filename=c.src,c.hasAttribute("data-manual")&&(i.manual=!0)),!i.manual){var h=document.readyState;"loading"===h||"interactive"===h&&c&&c.defer?document.addEventListener("DOMContentLoaded",u):window.requestAnimationFrame?window.requestAnimationFrame(u):window.setTimeout(u,16)}return i}("u">typeof window?window:"u">typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});e.exports&&(e.exports=r),"u">typeof _.w&&(_.w.Prism=r),r.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},r.languages.markup.tag.inside["attr-value"].inside.entity=r.languages.markup.entity,r.languages.markup.doctype.inside["internal-subset"].inside=r.languages.markup,r.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),Object.defineProperty(r.languages.markup.tag,"addInlined",{value:function(e,t){var n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:r.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var i={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};i["language-"+t]={pattern:/[\s\S]+/,inside:r.languages[t]};var o={};o[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return e}),"i"),lookbehind:!0,greedy:!0,inside:i},r.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(r.languages.markup.tag,"addAttribute",{value:function(e,t){r.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:r.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),r.languages.html=r.languages.markup,r.languages.mathml=r.languages.markup,r.languages.svg=r.languages.markup,r.languages.xml=r.languages.extend("markup",{}),r.languages.ssml=r.languages.xml,r.languages.atom=r.languages.xml,r.languages.rss=r.languages.xml,t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/,r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css,(n=r.languages.markup)&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css")),r.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},r.languages.javascript=r.languages.extend("clike",{"class-name":[r.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source)+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),r.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,r.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:r.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:r.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:r.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:r.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:r.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),r.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:r.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),r.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),r.languages.markup&&(r.languages.markup.tag.addInlined("script","javascript"),r.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),r.languages.js=r.languages.javascript,function(){if(!(typeof r>"u")&&!(typeof document>"u")){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var e={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},t="data-src-status",n="loading",i="loaded",o="pre[data-src]:not(["+t+'="'+i+'"]):not(['+t+'="'+n+'"])';r.hooks.add("before-highlightall",function(e){e.selector+=", "+o}),r.hooks.add("before-sanity-check",function(s){var a=s.element;if(a.matches(o)){s.code="",a.setAttribute(t,n);var l,c,u,h,d=a.appendChild(document.createElement("CODE"));d.textContent="Loading";var f=a.getAttribute("data-src"),p=s.language;if("none"===p){var m=(/\.(\w+)$/.exec(f)||[,"none"])[1];p=e[m]||m}r.util.setLanguage(d,p),r.util.setLanguage(a,p);var g=r.plugins.autoloader;g&&g.loadLanguages(p),l=f,c=function(e){a.setAttribute(t,i);var n=function(e){var t=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(e||"");if(t){var n=Number(t[1]),r=t[2],i=t[3];return r?i?[n,Number(i)]:[n,void 0]:[n,n]}}(a.getAttribute("data-range"));if(n){var o=e.split(/\r\n?|\n/g),s=n[0],l=null==n[1]?o.length:n[1];s<0&&(s+=o.length),s=Math.max(0,Math.min(s-1,o.length)),l<0&&(l+=o.length),l=Math.max(0,Math.min(l,o.length)),e=o.slice(s,l).join(`
`),a.hasAttribute("data-start")||a.setAttribute("data-start",String(s+1))}d.textContent=e,r.highlightElement(d)},u=function(e){a.setAttribute(t,"failed"),d.textContent=e},(h=new XMLHttpRequest).open("GET",l,!0),h.onreadystatechange=function(){var e;4==h.readyState&&(h.status<400&&h.responseText?c(h.responseText):h.status>=400?u((e=h.status," Error "+e+" while fetching file: "+h.statusText)):u(" Error: File does not exist or is empty"))},h.send(null)}}),r.plugins.fileHighlight={highlight:function(e){for(var t,n=(e||document).querySelectorAll(o),i=0;t=n[i++];)r.highlightElement(t)}};var s=!1;r.fileHighlight=function(){s||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),s=!0),r.plugins.fileHighlight.highlight.apply(this,arguments)}}}()}({exports:{}}),Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/},Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python;let P7={url:null,onMessage:()=>{},onOpen:()=>{},onClose:()=>{},onError:()=>{},onTimeout:()=>{},reconnectDelay:2e3,reconnectMaxAttempts:3,ping:!1,autoReconnect:!0,connectionTimeoutAfter:1e4,connectImmediately:!0};function P8({projectName:e,analysisId:t,question:n,data_csv:r,apiEndpoint:i,sql:o,token:s}){let[a,l]=(0,N.useState)(""),[c,u]=(0,N.useState)(!1),h=(0,_.F)({protocol:"ws",path:"analyse_data_streaming",apiEndpoint:i});return(0,N.useEffect)(()=>{let i=(0,_.J)(t);if(i){l(i);return}let a=function(e){let t={...P7,...e},{url:n,reconnectDelay:r,reconnectMaxAttempts:i,ping:o,autoReconnect:s,connectionTimeoutAfter:a}=t,l=null,c=!1,u=null,h=null,d=Date.now(),f=-1,p=0,m=!1,g=t.onMessage,y=t.onOpen,b=t.onClose,v=t.onError,x=t.onTimeout,w=(0,_.g)(8),k=[];function O(...e){c&&(console.groupCollapsed(w+": "+(e.length&&e[0])),console.log(...e),console.groupEnd())}function S(){f++,T(),l&&l.close&&l.readyState!==WebSocket.CLOSED&&l.close(),l=new WebSocket(n),O("connecting"),u=setTimeout(()=>{O("connection timed out"),l.readyState===WebSocket.CONNECTING&&(l.close(),f<i?(f++,setTimeout(S,r)):x&&"function"==typeof x&&x())},a),l.onopen=function(e){O("reconnected to",n),f=0,T(),y&&"function"==typeof y&&y(e)},l.onerror=function(e){O("error",n,e),v&&"function"==typeof v&&v(e)},l.onmessage=function(e){g&&"function"==typeof g&&g(e)},k.forEach(e=>{if(e.disabled)return;let t=e.event,n=e.cb;e.disabled=!1,l.addEventListener(t,n)}),l.onclose=function(e){O("closed",e),b&&"function"==typeof b&&b(e),T(),e.wasClean||m||(s&&O(`reconnecting to ${n}, in ${r} ms`),h=setTimeout(()=>{if(s){if(f>=i){O("Maximum number of reconnect attempts reached. Stopping reconnecting.");return}O("reconnecting to",n),S()}},r))}}function C(e,t=!1){l&&l.readyState===WebSocket.OPEN&&(f>=1&&!t&&p%10==0&&(O("Connection was previously lost and there might be connectivity issues while running this. Consider refreshing the page for best performance."),p++),l.send(JSON.stringify(e)))}function T(){clearTimeout(u),clearTimeout(h)}return o&&window.requestAnimationFrame(function e(){Date.now()-d>5e3&&(d=Date.now(),C({ping:"ping"},!0)),window.requestAnimationFrame(e)}),t.connectImmediately&&S(),{send:C,destroy:function(){T(),O("Closing socket and destroying manager",l),m=!0,l&&l.close(),O("destroyed")},connect:S,addEventListener:function(e,t){c&&O("adding event listeners"),l&&(l.addEventListener(e,t),k.push({event:e,cb:t,disabled:!1}))},removeEventListener:function(e,t,n){O("removing event listeners"),l&&(l.removeEventListener(e,t),-1!==n&&(k[n].disabled=!0))},isConnected:function(){return l&&l.readyState===WebSocket.OPEN},setLogging:function(e=!1){c=e},getSocket:function(){return l},getEventListeners:function(){return k}}}({url:h,onMessage:e=>{u(!1);let n=e.data;"Defog data analysis has ended"===n?(a.destroy(),l(e=>((0,_.K)(t,e),e))):l(e=>e+n)},reconnectDelay:2e3,reconnectMaxAttempts:3,connectionTimeoutAfter:1e4,onTimeout:()=>{u(!1),l("Connection timeout with the websocket server. Please try again.")},onOpen:()=>{u(!0),l(""),a.send({question:n,data_csv:r,sql:o,db_name:e,token:s})},onError:e=>{console.error(e),u(!1),l("An error occurred while analyzing data. Please try again.")}});return()=>{a.destroy()}},[]),M.j.jsxs("div",{className:"relative h-full",children:[M.j.jsx("div",{className:"pb-3 mb-4 border-b border-gray-200 dark:border-gray-700",children:M.j.jsxs("h3",{className:"font-medium text-gray-900 text-md dark:text-gray-100",children:["Insights"," ",M.j.jsx(eu,{className:"inline size-4 stroke-secondary-highlight-1"})]})}),M.j.jsx("div",{className:"space-y-4",children:c?M.j.jsxs("div",{className:"flex flex-col items-center justify-center p-8 h-[400px] rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[M.j.jsx(M.d,{classNames:"mb-4"}),M.j.jsxs("div",{className:"flex flex-col items-center",children:[M.j.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Analyzing your data"}),M.j.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"This may take a few moments"})]})]}):a?M.j.jsx(kf,{customErrorMessage:a,children:M.j.jsx("div",{className:`analysis-markdown max-w-full text-sm break-words
                [&>h1]:text-xl [&>h1]:font-semibold [&>h1]:mb-4 [&>h1]:text-gray-900 [&>h1]:dark:text-gray-100
                [&>h2]:text-lg [&>h2]:font-medium [&>h2]:mb-3 [&>h2]:text-gray-800 [&>h2]:dark:text-gray-200
                [&>p]:mb-4 [&>p]:text-gray-600 [&>p]:dark:text-gray-300 [&>p]:leading-relaxed [&>p]:whitespace-pre-wrap
                [&>ul]:mb-4 [&>ul]:list-disc [&>ul]:pl-5 [&>ul]:space-y-2 [&>ul]:text-gray-600 [&>ul]:dark:text-gray-300
                [&>ol]:mb-4 [&>ol]:list-decimal [&>ol]:pl-5 [&>ol]:space-y-2 [&>ol]:text-gray-600 [&>ol]:dark:text-gray-300
                [&>blockquote]:border-l-4 [&>blockquote]:border-gray-200 [&>blockquote]:dark:border-gray-700 
                [&>blockquote]:pl-4 [&>blockquote]:italic [&>blockquote]:my-4 [&>blockquote]:text-gray-600 [&>blockquote]:dark:text-gray-300`,dangerouslySetInnerHTML:{__html:TN(Of(a))}})}):null})]})}function P9({analysis:e,analysisManager:t}){var n;let[r,i]=(0,N.useState)(!0),[o,s]=(0,N.useState)(null==(n=null==e?void 0:e.data)?void 0:n.pdf_search_results),[a,l]=(0,N.useState)(null);return(0,N.useEffect)(()=>{var n,r,a;o||null!=(n=e.data)&&n.pdf_search_results?("string"==typeof e.data.pdf_search_results?(l(e.data.pdf_search_results),s(null)):(s(e.data.pdf_search_results),l(null)),i(!1)):null!=(r=e.data)&&r.sql&&!o?t.getPdfSearchResults():null!=(a=e.data)&&a.pdf_search_results||(i(!0),s(null),l(null))},[e]),r?M.j.jsxs("div",{className:"mt-4 text-xs h-40 flex items-center justify-center bg-gray-50 border-gray-500 text-gray-600 dark:bg-gray-800/30 dark:border-gray-500 dark:text-gray-200",children:[M.j.jsx(M.d,{classNames:"mr-2"})," Searching in your PDFs.."]}):a||!Array.isArray(o)?M.j.jsx("div",{className:"mt-4 text-xs h-40 flex items-center justify-center bg-red-100 border-red-500 text-red-800 dark:bg-red-800/30 dark:border-red-500 dark:text-red-200",children:M.j.jsx("div",{className:"text-sm",children:a})}):o&&0!==o.length?M.j.jsxs("div",{className:"mt-4 max-h-[600px] overflow-auto",children:[M.j.jsx("h3",{className:"text-sm uppercase font-semibold mb-2 text-gray-600 dark:text-gray-200",children:"Citations"}),M.j.jsx("div",{className:"space-y-4",children:o.map((e,t)=>"text"===e.type?"citations"in e&&e.citations&&e.citations.length>0?M.j.jsxs("div",{className:"p-3 bg-gray-50 rounded-md border border-gray-200 dark:bg-gray-700 dark:border-gray-600",children:[M.j.jsx("p",{className:"text-sm mb-2 dark:text-gray-200",children:e.text}),M.j.jsx("div",{className:"text-xs text-gray-500 mt-1 dark:text-gray-400",children:e.citations.map((e,t)=>M.j.jsxs("div",{className:"mt-1",children:[M.j.jsx("span",{className:"font-medium",children:e.document_title})," ","- Page",e.start_page_number===e.end_page_number?` ${e.start_page_number}`:`s ${e.start_page_number}-${e.end_page_number}`]},t))})]},t):M.j.jsx("div",{className:"text-sm",children:M.j.jsx("p",{className:"dark:text-gray-200",children:e.text})},t):null)})]}):M.j.jsx("div",{className:"mt-4 text-xs h-40 flex items-center justify-center bg-gray-100 border-gray-500 text-gray-600 dark:bg-gray-800/30 dark:border-gray-500 dark:text-gray-200",children:"No relevant citations found in PDF documents."})}let Re=({isOpen:e,onClick:t})=>M.j.jsx("button",{onClick:t,className:`
      absolute -left-8 top-1/2 -translate-y-1/2
      h-36 w-8 flex items-center justify-center group
      bg-[#F9FAFB] dark:bg-gray-800 
      border border-gray-200 dark:border-gray-700
      hover:bg-gray-50 dark:hover:bg-gray-700
      transition-colors rounded-l
      ${e?"":"z-10"}
    `,title:`${e?"Collapse":"Expand"} analysis panel (${M.a8.TOGGLE_ANALYSIS})`,children:M.j.jsxs("div",{className:"relative flex flex-col h-full",children:[M.j.jsx("div",{className:"flex items-center justify-center flex-1",children:M.j.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:M.j.jsx(eu,{className:"w-4 h-4"})})}),M.j.jsx("div",{className:"absolute -translate-x-1/2 bottom-2 left-1/2",children:M.j.jsx(M.a2,{keyValue:M.a8.TOGGLE_ANALYSIS,className:"scale-75"})})]})});function Rt({projectName:e,analysis:t=null,analysisManager:n,analysisTreeManager:r=null}){var i,o;let{apiEndpoint:s,token:a}=(0,N.useContext)(T1),l=(0,N.useRef)(null),[c,u]=(0,N.useState)(null==(i=null==t?void 0:t.data)?void 0:i.sql),[h,d]=(0,N.useState)(!1),[f,p]=(0,N.useState)(!0),[m,g]=(0,N.useState)(!1),y=(0,N.useContext)(M.a),b=t.analysis_id,v=null==(o=null==t?void 0:t.data)?void 0:o.parsedOutput;async function x(){if(h)return;let e="";try{let t=null==v?void 0:v.data;if(!t)return;let{columns:n,data:r}=t,i=n.filter(e=>"index"!==e.title);e=i.map(e=>e.title).join(",")+`
`;for(let t=0;t<r.length;t++){let n=r[t];for(let t=0;t<i.length;t++)e+=n[i[t].title],t<i.length-1&&(e+=",");e+=`
`}let o=new Blob([e],{type:"text/csv"}),s=URL.createObjectURL(o),a=document.createElement("a");a.href=s,a.download=`${b}-${new Date().toISOString().split(".")[0]}.csv`,a.click(),URL.revokeObjectURL(s),a.remove(),y.success("CSV saved.")}catch(e){console.error(e),y.error("Error saving CSV.")}finally{d(!1)}}let w=(0,N.useSyncExternalStore)(e=>r.subscribeToActiveTabChanges(t.analysis_id,e),()=>r.getActiveTab(t.analysis_id)),[k,O]=(0,N.useState)([]),S=(0,N.useMemo)(()=>{var n,r;return(null==v?void 0:v.csvString)&&M.j.jsx(P8,{analysisId:t.analysis_id,projectName:e,question:null==(n=null==t?void 0:t.data)?void 0:n.initial_question,data_csv:null==v?void 0:v.csvString,sql:null==(r=null==t?void 0:t.data)?void 0:r.sql,apiEndpoint:s,token:a})},[t,e,s]),C=(0,N.useMemo)(()=>{var e;return v&&M.j.jsx(P5,{stepData:v,initialQuestion:null==(e=null==t?void 0:t.data)?void 0:e.initial_question,initialOptionsExpanded:m})},[t,m]),T=e=>M.j.jsxs("div",{className:"flex",children:[M.j.jsx("div",{className:`
          transition-all duration-200 pr-6
          ${f?"w-[70%]":"w-[95%]"}
        `,children:e}),M.j.jsxs("div",{className:`
          relative
          transition-all duration-200 
          border-l border-gray-200 dark:border-gray-700
          ${f?"w-[30%]":"lg:w-[5%] w-0"}
        `,children:[M.j.jsxs("div",{className:"flex items-start",children:[M.j.jsx(Re,{isOpen:f,onClick:()=>p(!f)}),M.j.jsxs("div",{className:"relative ml-2",onClick:()=>!f&&p(!0),children:[!f&&M.j.jsx("div",{className:"absolute inset-0 cursor-pointer",title:"Expand analysis panel"}),f&&M.j.jsx("div",{className:"relative w-[100%] max-h-[600px] overflow-y-auto",children:S})]})]}),M.j.jsx("div",{className:`
            absolute inset-y-0 right-0 w-24
            transition-opacity duration-200
            ${f?"opacity-0 pointer-events-none":"opacity-100"}
            bg-gradient-to-r from-transparent 
            via-white/50 to-white
            dark:via-gray-800/50 dark:to-gray-800
          `})]})]});return(0,N.useEffect)(()=>{let e=[],r=null==v?void 0:v.data;if(r){let i=(0,_.L)(r.data,r.columns);e.push({component:T(M.j.jsx(M.T,{rootClassNames:"lg:pl-0",rows:i,columns:r.columns.filter(e=>"index"!==e.title).map(e=>(e.render=e=>M.j.jsx("div",{children:e}),e)),pagination:{defaultPageSize:10,showSizeChanger:!0}})),key:"table",tabLabel:"Table",icon:M.j.jsx(ed,{className:"w-4 h-4 mb-0.5 mr-1 inline"})}),null!=v&&v.data&&e.push({component:T(M.j.jsx(kf,{children:C})),key:"chart",tabLabel:"Chart",icon:M.j.jsx(B,{className:"w-4 h-4 mb-0.5 mr-1 inline"})},{component:T(M.j.jsx(kf,{children:M.j.jsx(P9,{analysis:t,analysisManager:n})})),key:"pdf",tabLabel:"From your PDFs",icon:M.j.jsx(M.a9,{className:"w-4 h-4 mb-0.5 mr-1 inline"})})}O(e)},[t,c,f]),(0,N.useEffect)(()=>{let e=e=>{document.activeElement!==document.body||e.metaKey||e.ctrlKey||e.altKey||e.shiftKey||((0,M.ab)(e.key,M.a8.TOGGLE_ANALYSIS)&&(p(e=>!e),e.preventDefault()),(0,M.ab)(e.key,M.a8.TOGGLE_CHART_OPTIONS)&&"chart"===w&&(g(e=>!e),e.preventDefault()),(0,M.ab)(e.key,M.a8.VIEW_TABLE)&&(null==r||r.setActiveTab(b,"table"),e.preventDefault()),(0,M.ab)(e.key,M.a8.VIEW_CHART)&&(null==r||r.setActiveTab(b,"chart"),e.preventDefault()))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[w,b,r]),M.j.jsx("div",{className:"table-chart-ctr",ref:l,children:M.j.jsxs("div",{className:"flex flex-col w-full",children:[M.j.jsx("div",{className:"border-b border-gray-200",children:M.j.jsxs("div",{className:"flex items-center justify-between",children:[M.j.jsx("nav",{className:"flex space-x-4","aria-label":"Tabs",children:k.map(e=>M.j.jsxs("button",{onClick:()=>r.setActiveTab(b,e.key),className:`
                    px-3 py-2 text-sm font-medium rounded-t-lg flex items-center gap-2
                    ${w===e.key?"border-b-2 border-blue-500 text-blue-600 dark:text-white":"text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}
                  `,children:[M.j.jsxs("span",{className:"flex items-center",children:[e.icon,e.tabLabel]}),"table"===e.key&&M.j.jsx(M.a2,{keyValue:M.a8.VIEW_TABLE,className:"opacity-50 px-1 py-0.5"}),"chart"===e.key&&M.j.jsx(M.a2,{keyValue:M.a8.VIEW_CHART,className:"opacity-50 px-1 py-0.5"})]},e.key))}),M.j.jsxs(M.D,{onClick:async()=>{await x()},disabled:h,variant:"secondary",className:`flex mb-2 items-center px-2.5 py-1.5 hover:text-white text-white rounded-md border border-blue-200/50 
                bg-blue-500 hover:bg-blue-600/95 dark:bg-blue-900/20 dark:hover:bg-blue-800/30 
                shadow-sm  transition-all duration-200 
                dark:border-blue-700/50 dark:hover:border-blue-600/50
                hover:shadow-md hover:-translate-y-0.5
                group`,children:[M.j.jsx(M.ad,{size:16,className:"mr-1"}),M.j.jsx("span",{children:"Download CSV"})]})]})}),M.j.jsx("div",{className:"relative mt-4",children:k.map(e=>M.j.jsx("div",{className:e.key===w?"z-2":"absolute overflow-hidden top-[-100%] z-[-1] pointer-events-none *:pointer-events-none opacity-0",children:e.component},e.key))})]})})}function Rn({error_message:e=null}){return M.j.jsxs("div",{className:"p-4 mb-4 border rounded-lg bg-rose-50 dark:bg-rose-900/20 border-rose-200 dark:border-rose-800",children:[M.j.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[M.j.jsx(M.af,{className:"w-4 h-4 text-rose-500 dark:text-rose-400"}),M.j.jsx("span",{className:"font-semibold text-rose-700 dark:text-rose-300",children:"An error occurred"})]}),M.j.jsx("div",{className:"pl-6 text-rose-600 dark:text-rose-400",children:e||"Something went wrong"})]})}function Rr({initialInputs:e,handleEdit:t}){let[n,r]=(0,N.useState)(e);function i(e,i){let o={...n};o[e]=i,r(o),t&&t(e,i)}return M.j.jsxs("div",{className:"text-sm text-gray-700 tool-input-list dark:text-gray-300",children:[n.question&&M.j.jsxs("div",{className:"mb-6",children:[M.j.jsxs("div",{className:"flex flex-row flex-wrap items-center gap-3 font-mono text-xs",children:[M.j.jsx("span",{className:"p-1 mr-2 text-gray-400 bg-gray-200 rounded-lg dark:bg-gray-700 dark:text-gray-400",children:"String"}),M.j.jsx("span",{className:"font-bold",children:"question"})]}),M.j.jsx("div",{className:"mt-2",children:M.j.jsx(M.V,{rootClassNames:"w-full",textAreaClassNames:"resize-none overflow-auto text-sm",value:n.question,defaultRows:1,onChange:e=>{i("question",e.target.value)}})})]}),n.hard_filters&&M.j.jsxs("div",{className:"space-y-4",children:[M.j.jsxs("div",{className:"flex flex-row flex-wrap items-center gap-3 font-mono text-xs",children:[M.j.jsx("span",{className:"p-1 mr-2 text-gray-400 bg-gray-200 rounded-lg dark:bg-gray-700 dark:text-gray-400",children:"List"}),M.j.jsx("span",{className:"font-bold",children:"hard_filters"})]}),M.j.jsxs("div",{className:"pb-4 space-y-2",children:[n.hard_filters.map((e,t)=>M.j.jsxs("div",{className:"flex items-center gap-2 group",children:[M.j.jsx(M.N,{rootClassNames:"flex-1",value:e,placeholder:"Filter condition",onChange:e=>{let r=[...n.hard_filters];r[t]=e.target.value,i("hard_filters",r)}}),M.j.jsxs("button",{className:"p-1.5 text-gray-400  group-hover:text-red-500 transition-opacity",onClick:()=>{i("hard_filters",n.hard_filters.filter((e,n)=>n!==t))},children:[M.j.jsx("span",{className:"sr-only",children:"Remove filter"}),M.j.jsx(ep,{size:16})]})]},t)),M.j.jsxs("button",{onClick:()=>i("hard_filters",[...n.hard_filters||[],""]),className:"flex mt-4 items-center gap-1.5 text-xs font-medium text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:[M.j.jsx(W,{size:14}),M.j.jsx("span",{children:"Add Filter"})]})]})]})]})}let Ri=({projectName:e,question:t,sql:n})=>{let[r,i]=(0,N.useState)(!1),[o,s]=(0,N.useState)(!1),[a,l]=(0,N.useState)(`






`),{apiEndpoint:c,token:u}=(0,N.useContext)(T1),h=(0,N.useContext)(M.a),d=(0,N.useCallback)(e=>{l(e)},[]),f=async()=>{s(!0),!0===(await (await fetch(c+"/integration/update_golden_queries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:u,db_name:e,golden_queries:[{question:t,sql:a}]})})).json()).success?h.success("Feedback submitted successfully"):h.error("Failed to submit feedback"),s(!1),i(!1)};return M.j.jsxs("div",{className:"h-10 mt-2",children:[M.j.jsx("div",{className:"flex items-left h-10 gap-1",children:M.j.jsx("div",{className:"flex items-center justify-center w-40 h-10 rounded-full cursor-pointer",onClick:()=>{i(!0)},children:M.j.jsx("span",{className:"text-xs",children:"Bad result? Teach model to do better."})})}),M.j.jsx(M.e,{title:"Align the model by providing feedback",open:r,footer:null,onCancel:()=>i(!1),contentClassNames:"overflow-auto",children:M.j.jsxs("div",{className:"mt-4 dark:text-gray-200",children:[M.j.jsxs("p",{className:"mb-2",children:["Please provide the correct SQL query for answering this question. The question was:"," ",M.j.jsx("span",{className:"font-mono dark:text-blue-300 text-blue-500",children:t}),M.j.jsx("br",{})]}),M.j.jsx("p",{className:"mb-2",children:"The query originally generated by Defog was:"}),M.j.jsx(x6,{theme:"dark",extensions:[kh(),fW.lineWrapping],value:n,basicSetup:{lineNumbers:!1},editable:!1,minHeight:"200px",className:"dark:bg-gray-800 rounded-md"}),M.j.jsx("p",{className:"mb-2",children:"Please enter the correct SQL query below:"}),M.j.jsx(x6,{theme:"dark",extensions:[kh(),fW.lineWrapping],value:a,onChange:d,basicSetup:{lineNumbers:!1},editable:!0,minHeight:"200px",className:"dark:bg-gray-800 rounded-md"}),M.j.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white dark:bg-blue-600 dark:hover:bg-blue-800 font-bold py-2 px-4 rounded text-xs",onClick:f,children:"Submit SQL"})]})})]})},Ro=({projectName:e,question:t,submitFollowOn:n=e=>{}})=>{let[r,i]=(0,N.useState)([]),{apiEndpoint:o,token:s}=(0,N.useContext)(T1);async function a(){try{let n=(0,_.F)({protocol:"http",path:"query-data/generate_follow_on_questions",apiEndpoint:o}),r=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_question:t,db_name:e,token:s})});if(r.ok){let e=await r.json();i(e.follow_on_questions||[])}else throw Error("Error generating follow on questions")}catch(e){console.error(e)}}return(0,N.useEffect)(()=>{a()},[]),M.j.jsx("div",{className:"p-4",children:M.j.jsx("div",{className:"max-w-[900px] w-full m-auto flex flex-row gap-4 justify-center",children:r&&r.length?r.map((e,t)=>M.j.jsx("button",{"data-testid":"follow-on-question",className:"p-2 m-1 text-sm text-gray-700 bg-white border border-gray-200 rounded-md shadow-sm cursor-pointer grow basis-1 dark:border-gray-600 dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 dark:text-gray-200",onClick:()=>{n(e)},children:e},t)):null})})};function Rs({projectName:e,analysis:t,analysisBusy:n=!1,analysisManager:r,handleReRun:i=e=>{},submitFollowOn:o=e=>{},analysisTreeManager:s=null}){var a,l,c,u,h,d,f;let{hideSqlTab:p}=(0,N.useContext)(T1),m=null==t?void 0:t.data;null==t||t.analysis_id;let g=(0,N.useRef)({question:(null==(l=null==(a=null==t?void 0:t.data)?void 0:a.inputs)?void 0:l.question)||"",sql:(null==(c=null==t?void 0:t.data)?void 0:c.sql)||"",hard_filters:(null==(h=null==(u=null==t?void 0:t.data)?void 0:u.inputs)?void 0:h.hard_filters)||[]}),y=(0,N.useCallback)((e,t)=>{e&&(g.current[e]=t)},[m]),b=(0,N.useMemo)(()=>{var a,l,c;return[{name:"SQL/Code",content:M.j.jsxs(kf,{maybeOldAnalysis:!0,children:[(null==m?void 0:m.error)&&M.j.jsx(Rn,{error_message:null==m?void 0:m.error}),M.j.jsx("div",{className:"flex ",children:M.j.jsx("div",{className:"w-full",children:M.j.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[M.j.jsx("div",{className:"space-y-6",children:M.j.jsxs("div",{className:"space-y-2",children:[M.j.jsx("h3",{className:"text-xs font-medium text-gray-400 uppercase",children:"Inputs"}),M.j.jsx("div",{className:"p-4 rounded-lg bg-gray-50 dark:bg-gray-800",children:M.j.jsx(Rr,{initialInputs:null==m?void 0:m.inputs,handleEdit:y})})]})}),M.j.jsxs("div",{className:"space-y-6",children:[M.j.jsxs("div",{className:"space-y-2",children:[M.j.jsx("h3",{className:"text-xs font-medium text-gray-400 uppercase",children:"Generated SQL"}),M.j.jsx("div",{className:"rounded-lg ",children:M.j.jsx(kp,{className:"tool-code-ctr",code:(null==m?void 0:m.sql)||"",language:"sql",editable:!0,handleEdit:y,updateProp:"sql"})})]}),(null==m?void 0:m.instructions_used)&&M.j.jsxs("div",{className:"space-y-2",children:[M.j.jsx("h3",{className:"text-xs font-medium text-gray-400 uppercase",children:"Instructions used for this query"}),M.j.jsx("div",{className:"p-4 rounded-lg bg-gray-50 dark:bg-gray-800",children:M.j.jsx("p",{className:"text-sm leading-relaxed text-gray-600 dark:text-gray-300 whitespace-break-spaces",children:m.instructions_used})})]}),M.j.jsxs("div",{className:"flex justify-between mt-auto",children:[M.j.jsx(Ri,{projectName:e,question:null==(a=null==m?void 0:m.inputs)?void 0:a.question,sql:null==m?void 0:m.sql}),M.j.jsx("div",{className:"flex justify-end ",children:M.j.jsx(M.D,{disabled:n,className:"h-10 px-4 py-2 font-mono text-white bg-gray-600 border border-gray-200 hover:bg-blue-500 hover:text-white active:hover:text-white hover:border-transparent",onClick:()=>i(g.current),children:"Re run"})})]})]})]})})})]})},{name:"Analysis",content:M.j.jsxs("div",{children:[M.j.jsx(Rt,{projectName:e,analysis:t,analysisManager:r,analysisTreeManager:s}),(null==m?void 0:m.sql)&&M.j.jsx(Ri,{projectName:e,question:null==(l=null==m?void 0:m.inputs)?void 0:l.question,sql:null==m?void 0:m.sql}),M.j.jsx(Ro,{projectName:e,question:null==(c=null==m?void 0:m.inputs)?void 0:c.question,submitFollowOn:o})]},(0,_.g)())}]},[m,n]);return null!=m&&m.parsedOutput?M.j.jsxs("div",{className:"w-full h-full tool-results-ctr",children:[n&&M.j.jsxs("div",{className:"absolute top-0 left-0 z-20 flex flex-col items-center justify-center w-full h-full bg-white dark:bg-gray-900 bg-opacity-90 dark:bg-opacity-90 text-md dark:text-gray-300",children:[M.j.jsxs("span",{className:"my-1",children:[M.j.jsx(M.d,{}),"Running"]}),M.j.jsx(M.I,{classNames:"text-gray-500 dark:text-gray-400 w-5 h-5"})]}),n?M.j.jsx("div",{className:"tool-run-loading",children:M.j.jsx(T2,{message:"Running analysis..."})}):M.j.jsx(M.j.Fragment,{children:p?M.j.jsx("div",{children:null==(f=null==(d=b.filter(e=>"Analysis"===e.name))?void 0:d[0])?void 0:f.content}):M.j.jsx(M.c,{disableSingleSelect:!0,defaultSelected:"Analysis",tabs:b})})]}):M.j.jsx(M.j.Fragment,{})}let Ra=({analysisId:e,rootAnalysisId:t,projectName:n,isTemp:r=!1,metadata:i=null,sqlOnly:o=!1,rootClassNames:s="",createAnalysisRequestBody:a={},initiateAutoSubmit:l=!1,hasExternalSearchBar:c=!1,searchBarPlaceholder:u=null,extraTools:h=[],plannerQuestionSuffix:d=null,previousContextCreator:f=()=>[],setGlobalLoading:p=(...e)=>{},onManagerCreated:m=(...e)=>{},onManagerDestroyed:g=(...e)=>{},disabled:y=!1,initialConfig:b={analysisManager:null,analysisTreeManager:null},submitFollowOn:v=(...e)=>{},onHeightChange:x=(...e)=>{}})=>{var w,k,O,S,C,T,A,E,j;let{apiEndpoint:D,token:P,updateConfig:R,analysisDataCache:I}=(0,N.useContext)(T1),z=(0,N.useRef)(null),L=(0,N.useRef)(null),q=(0,N.useRef)(null);(0,N.useEffect)(()=>{var e;if(!L.current||!x)return;null==(e=q.current)||e.disconnect();let t=new ResizeObserver(e=>{e.forEach(e=>{x(e.contentRect.height)})});return t.observe(L.current),q.current=t,()=>{var e;null==(e=q.current)||e.disconnect(),q.current=null}},[x]);let $=(0,N.useContext)(M.a),B=(0,N.useMemo)(()=>b.analysisManager||function({analysisId:e,rootAnalysisId:t,apiEndpoint:n,token:r,projectName:i,metadata:o,isTemp:s,sqlOnly:a=!1,extraTools:l=[],plannerQuestionSuffix:c="",previousContextCreator:u=()=>[],onNewData:h=(...e)=>{},onManagerDestroyed:d=(...e)=>{},onAbortError:f=(...e)=>{},createAnalysisRequestBody:p={}}){let m=null,g=!1,y=[],b=!1,v=!1,x=!1,w=[],k=!1,O=(0,_.F)({protocol:"http",path:"query-data/clarify",apiEndpoint:n}),S=(0,_.F)({protocol:"http",path:"query-data/generate_analysis",apiEndpoint:n}),C=(0,_.F)({protocol:"http",path:"query-data/rerun",apiEndpoint:n});function T(e){var t;e&&(null!=(t=null==e?void 0:e.data)&&t.output&&(e.data.parsedOutput=function(e){let t={};return t.csvString=e,t.data=(0,_.p)(e),t.chartManager=T3({data:t.data.data,availableColumns:t.data.columns}),t}(e.data.output)),m=e,y.forEach(e=>e()))}function A(e){x=e,w.forEach(e=>e(x))}async function E(n,o={}){var h,d,p,g;try{if(b)throw Error("Analysis Manager already destroyed.");A(!0);let f=null!=(g=null==m?void 0:m.data)&&g.clarification_questions?"generate_analysis":"clarify",y;"clarify"===f?y=O:"generate_analysis"===f&&(y=S);let v={...o,request_type:f,analysis_id:e,user_question:n,sql_only:a,token:r,temp:s,db_name:i,db_creds:null,previous_context:u(),root_analysis_id:t,extra_tools:l,planner_question_suffix:c};if(console.groupCollapsed("Analysis Manager submitting"),console.log("Request body",v),!y)throw Error("Endpoint not found");let x=await fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(6e4),body:JSON.stringify(v)});if(!x.ok)throw Error("Failed to submit.");let w=await x.json();console.log(w),console.groupEnd(),T(w),null!=(h=null==w?void 0:w.data)&&h.sql&&!(null!=(d=null==w?void 0:w.data)&&d.error)&&!(null!=(p=null==w?void 0:w.data)&&p.pdf_search_results)&&m&&N()}catch(e){console.log(e),f(e)}finally{A(!1)}}async function M(t){var n,o,s;if(!t)throw Error("No inputs provided");try{A(!0);let a=await fetch(C,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r,db_name:i,analysis_id:e,edited_inputs:t})});if(!a.ok)throw Error("Could not rerun step");let l=await a.json();T(l),null!=(n=null==l?void 0:l.data)&&n.sql&&!(null!=(o=null==l?void 0:l.data)&&o.error)&&!(null!=(s=null==l?void 0:l.data)&&s.pdf_search_results)&&l.analysis_id&&N()}catch(e){throw Error(e instanceof Error?e.message:"Unknown error")}finally{A(!1)}}function N(){k||(k=!0,(0,_.G)(m.analysis_id,n,r).then(e=>{m&&m.data&&T({...m,data:{...m.data,pdf_search_results:e}})}).catch(e=>{console.error("Error fetching PDF search results:",e),m&&m.data&&T({...m,data:{...m.data,pdf_search_results:`Error: ${e instanceof Error?e.message:"Unknown error"}`}})}).finally(()=>{k=!1}))}return{init:async function t({question:t,existingData:o=null}){v=!0;let s=null,a=!1;if(o)s=o,a=!1;else{let t=await (0,_.H)(e,r,n);t?s=t:(s=await (0,_.I)(r,i,n,e,p),a=!0),g=a}T(s)},get wasNewAnalysisCreated(){return g},set wasNewAnalysisCreated(fe){g=fe},get didInit(){return v},get analysis(){return m},getAnalysis:function(){return m||null},subscribeToDataChanges:function(e){return y=[...y,e],function(){y=y.filter(t=>t!==e)}},getAnalysisBusy:function(){return x},subscribeToAnalysisBusyChanges:function(e){return w=[...w,e],function(){w=w.filter(t=>t!==e)}},setAnalysisBusy:A,submit:E,reRun:M,destroy:function(){b&&console.warn("Already destroyed"),console.groupCollapsed("Destroying. Open for trace"),console.log("Destroying"),console.trace(),console.groupEnd(),b=!0,d()},setOnNewDataCallback:function(e){},getPdfSearchResults:N}}({analysisId:e,rootAnalysisId:t,apiEndpoint:D,token:P,projectName:n,metadata:i,isTemp:r,sqlOnly:o,extraTools:h,plannerQuestionSuffix:d,previousContextCreator:f,onAbortError:e=>{$.error(e),p(!1)},onManagerDestroyed:()=>g(e,L.current),createAnalysisRequestBody:a}),[e,$]),F=(0,N.useSyncExternalStore)(B.subscribeToAnalysisBusyChanges,B.getAnalysisBusy),Q=(0,N.useSyncExternalStore)(B.subscribeToDataChanges,B.getAnalysis);(0,N.useEffect)(()=>{var t,n,r,i,o,s,a,c;l&&null!=(t=null==Q?void 0:Q.data)&&t.initial_question&&!(null!=(n=null==Q?void 0:Q.data)&&n.clarification_questions)&&V(null==(r=null==Q?void 0:Q.data)?void 0:r.initial_question,{},null),null==(i=null==Q?void 0:Q.data)||!i.clarification_questions||(null==(o=null==Q?void 0:Q.data)?void 0:o.clarification_questions.length)!==0||null!=(s=null==Q?void 0:Q.data)&&s.parsedOutput||null!=(a=null==Q?void 0:Q.data)&&a.error||V(null==(c=null==Q?void 0:Q.data)?void 0:c.initial_question,{clarification_questions:[]}),R({analysisDataCache:{...I,[e]:Q}}),p(!1)},[Q]),(0,N.useEffect)(()=>{B.didInit||t();async function t(){var t;try{await B.init({question:null==(t=null==a?void 0:a.initialisation_details)?void 0:t.user_question,existingData:(null==I?void 0:I[e])||null}),B.wasNewAnalysisCreated&&R({analysisDataCache:{...I,[e]:Q}})}catch(e){$.error(e.message),console.log(e.stack),B.destroy()}}},[]),(0,N.useEffect)(()=>{B&&m(B,e,L.current)},[B]);let V=(0,N.useCallback)((e,t={},n=null)=>{try{if(!e)throw Error("Query is empty");p(!0),B.submit(e,{...t})}catch(e){$.error(e),console.log(e.stack),p(!1),null===n&&c&&B.destroy()}},[B,p,$,o,c]),H=M.j.jsx(M.j.Fragment,{children:M.j.jsxs("div",{className:"flex flex-row flex-wrap items-center gap-4 p-6 transition-all duration-200 lg:items-start",children:[M.j.jsx("h1",{className:"font-bold text-xl text-gray-700 dark:text-gray-200 basis-0 grow min-w-[50%]",children:(0,_.M)((null==Q?void 0:Q.user_question)||a.user_question||"")}),!F&&Q&&Q&&(null!=(w=null==Q?void 0:Q.data)&&w.clarification_questions||!c)?null:M.j.jsx("div",{className:"cursor-pointer basis-0 text-nowrap whitespace-nowrap group",onClick:()=>{console.log("clicked"),p(!1),B.destroy()},children:M.j.jsx(G,{className:"w-6 h-6 text-rose-300 group-hover:text-rose-500 dark:text-rose-400 dark:group-hover:text-rose-600"})})]})});return M.j.jsx(kf,{children:M.j.jsx("div",{ref:L,id:e,className:(0,M.t)("analysis-agent-container h-max min-h-20 relative grow outline-none focus:outline-none rounded-3xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 overflow-hidden",z?"bg-gray-50 dark:bg-gray-900":"max-w-full",s),children:F?M.j.jsxs("div",{className:"flex flex-col w-full h-full bg-gray-50 dark:bg-gray-900 rounded-3xl max-h-96 border dark:border-gray-200",children:[H,M.j.jsx(T2,{message:null!=(k=null==Q?void 0:Q.data)&&k.clarification_questions?"Fetching data...":"Thinking about whether I need to clarify the question...",classNames:"m-0 h-40 bg-transparent"})]}):M.j.jsxs(M.j.Fragment,{children:[c||null!=(O=null==Q?void 0:Q.data)&&O.clarification_questions?M.j.jsx(M.j.Fragment,{}):M.j.jsx("div",{className:"relative w-10/12 mx-auto top-6",children:M.j.jsx(M.N,{ref:z,onPressEnter:e=>{V(e.target.value),e.target.value=""},placeholder:u||"Ask a question",disabled:y||F,inputClassNames:"w-full mx-auto shadow-custom hover:border-blue-500 focus:border-blue-500"})}),null!=(S=null==Q?void 0:Q.data)&&S.clarification_questions&&!(null!=(C=null==Q?void 0:Q.data)&&C.output)?M.j.jsxs("div",{className:"w-full transition-all bg-gray-50 dark:bg-gray-900 rounded-3xl",children:[H,M.j.jsx(T4,{questions:(null==(T=null==Q?void 0:Q.data)?void 0:T.clarification_questions)||[],handleSubmit:(e,t)=>{V(null==Q?void 0:Q.user_question,e,t)},globalLoading:F})]}):M.j.jsx(M.j.Fragment,{}),(null==(A=null==Q?void 0:Q.data)?void 0:A.output)&&(null==(E=null==Q?void 0:Q.data)?void 0:E.parsedOutput)&&M.j.jsx("div",{className:"flex flex-col-reverse w-full h-full analysis-content lg:flex-row",children:M.j.jsxs("div",{className:"relative flex flex-col min-w-0 analysis-results grow dark:border-gray-600",children:[H,M.j.jsx(kf,{children:(null==(j=null==Q?void 0:Q.data)?void 0:j.parsedOutput)&&M.j.jsx(Rs,{analysisManager:B,projectName:n,analysis:Q,analysisBusy:F,handleReRun:async e=>{console.log(e);try{await B.reRun(e)}catch(e){console.log(e),$.error(e.message)}},analysisTreeManager:null==b?void 0:b.analysisTreeManager,submitFollowOn:e=>{console.log("clicked follow on",e),v(e)}})})]})})]})})})};function Rl({analysis:e=null,activeAnalysisId:t=null,extraClasses:n="",isDummy:r=!1,onClick:i=(...e)=>{}}){let o=e&&t===e.analysisId;return M.j.jsx("div",{className:(0,M.t)("flex flex-row items-center dark:text-gray-300",r?"dummy-analysis m-0 mb-3 bg-blue-50 dark:bg-gray-700 border border-blue-200 dark:border-blue-800 shadow-sm text-blue-700 dark:text-blue-300 rounded-md":e&&e.analysisId&&"mb-1",n),children:M.j.jsxs("div",{className:"grow",children:[M.j.jsx("div",{className:r?"p-3 hover:cursor-pointer flex items-center":(0,M.t)("title hover:cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 history-item p-3 text-sm rounded-md transition-colors duration-200 mb-2 border border-transparent",o?"font-medium bg-blue-50 dark:bg-gray-700 border-blue-200 dark:border-blue-800 shadow-sm text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:border-gray-200 dark:hover:border-gray-700"),onClick:()=>{i(r?null:e)},children:r?M.j.jsxs("div",{className:"flex items-center",children:[M.j.jsx(eh,{size:18})," ",M.j.jsx("span",{className:"font-medium ml-2",children:"New Report"})]}):M.j.jsxs(M.j.Fragment,{children:[M.j.jsx("div",{className:"line-clamp-2 font-medium",children:(0,_.M)(null==e?void 0:e.user_question)}),(null==e?void 0:e.timestamp)&&M.j.jsxs("div",{className:"flex items-center text-xs mt-1.5 text-gray-500 dark:text-gray-400",children:[M.j.jsx("span",{className:"inline-block w-3 h-3 mr-1.5 rounded-full bg-blue-200 dark:bg-blue-700"}),new Date(e.timestamp).toLocaleString(void 0,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})]})]})}),!r&&e&&e.children&&e.children.length>0&&M.j.jsx("div",{className:"ml-2",children:e.children.map(e=>M.j.jsx(Rl,{analysis:e,activeAnalysisId:t,isDummy:r,extraClasses:"ml-2",onClick:i},e.analysisId))})]})})}let Rc=(0,N.forwardRef)(function({searchBarClasses:e="",searchBarDraggable:t=!0,loading:n=!1,handleSubmit:r,activeRootAnalysisId:i,activeAnalysisId:o,forceSqlOnly:s=!1,setSqlOnly:a,sqlOnly:l,question:c,onNewConversationTextClick:u=()=>{}},h){let d=(0,N.useRef)(null),f=(0,N.useRef)(!1);return(0,N.useEffect)(()=>{c&&(h.current.value=c,h.current.focus())},[c,h]),(0,N.useEffect)(()=>{if(t)return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)};function e(){d.current&&(d.current.style.left="0",d.current.style.right="0",d.current.style.bottom=window.innerWidth>1600?"30%":"20px")}},[t]),(0,N.useEffect)(()=>{if(t)return document.addEventListener("mousemove",e),document.addEventListener("mouseup",n),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n)};function e(e){if(!f.current||!d.current)return;let t=window.innerHeight-e.clientY-d.current.clientHeight,n=e.clientX,r=window.innerHeight-20-d.current.clientHeight;t<20?d.current.style.bottom="20px":t>r?d.current.style.bottom=r+"px":d.current.style.bottom=t+"px";let i=window.innerWidth-d.current.clientWidth-20;d.current.style.right="auto",n<20?d.current.style.left="20px":n>i?d.current.style.left=i+"px":d.current.style.left=n+"px"}function n(){f.current=!1}},[t]),(0,N.useEffect)(()=>{function e(e){document.activeElement===document.body&&!e.metaKey&&!e.ctrlKey&&!e.altKey&&!e.shiftKey&&((0,M.ab)(e.key,M.a8.FOCUS_SEARCH)?(e.preventDefault(),h&&"current"in h&&h.current&&h.current.focus()):(0,M.ab)(e.key,M.a8.NEW_CONVERSATION)&&(e.preventDefault(),u(),h&&"current"in h&&h.current&&h.current.focus()))}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[h,u]),M.j.jsx("div",{className:(0,M.t)("w-full lg:w-8/12 m-auto [&_textarea]:pl-2 bg-white dark:bg-gray-800 rounded-lg shadow-custom border border-gray-400 dark:border-gray-600 hover:border-blue-500 dark:hover:border-blue-500 focus:border-blue-500 dark:focus:border-blue-500",t?"fixed z-40":"",e),style:{left:"0",right:"0",bottom:t?window.innerWidth>1600?"30%":"20px":null},ref:d,children:M.j.jsxs("div",{className:"flex flex-row",children:[t&&M.j.jsx("div",{className:"flex items-center w-3 min-h-full ml-1 cursor-move group",onMouseDown:e=>{t&&(f.current=!0,e.preventDefault())},children:M.j.jsx(eo,{className:"w-3 h-3 text-gray-400 dark:text-gray-500 group-hover:text-primary-text dark:group-hover:text-gray-300"})}),M.j.jsx("div",{className:"flex flex-row items-center rounded-md grow",children:M.j.jsxs("div",{className:"flex flex-row grow",children:[M.j.jsxs("div",{className:"relative flex flex-row-reverse items-center grow",children:[M.j.jsx(M.V,{rootClassNames:"grow border-none bg-transparent py-1.5 text-gray-900 dark:text-gray-100 px-2 placeholder:text-gray-400 dark:placeholder:text-gray-500 sm:leading-6 text-sm break-words focus:ring-0 focus:outline-none",textAreaClassNames:"resize-none pr-8",ref:h,id:"main-searchbar",disabled:n,defaultRows:1,onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),e.stopPropagation(),r(h.current.value,i,!i,o)):"Escape"===e.key&&(e.preventDefault(),h&&"current"in h&&h.current&&h.current.blur())},placeholder:i?"Type your next question here":"Type your question here"}),M.j.jsx(M.a2,{keyValue:M.a8.FOCUS_SEARCH,className:"absolute -translate-y-1/2 opacity-50 pointer-events-none right-3 top-1/2"}),M.j.jsxs("span",{className:"relative inline-block pl-2 group hover:cursor-pointer hover:bg-gray-100 hover:text-blue-600",onClick:()=>{u()},children:[M.j.jsxs("div",{className:"flex items-center gap-2",children:[M.j.jsx(eh,{}),M.j.jsx(M.a2,{keyValue:M.a8.NEW_CONVERSATION,className:"opacity-50"})]}),M.j.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-max px-3 py-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",children:"Start New Thread"})]})]}),M.j.jsxs("button",{type:"button",className:"relative -ml-px inline-flex items-center gap-x-1.5 rounded-r-md px-3 p-0 text-sm font-semibold text-gray-900 dark:text-gray-100 ring-1 ring-inset ring-blue-500 hover:bg-blue-500 hover:text-white dark:hover:text-white",onClick:()=>{r(h.current.value,i,!i,o)},children:[M.j.jsx(L,{className:"-ml-0.5 h-5 w-5 text-gray-400 dark:text-gray-500","aria-hidden":"true"}),"Ask"]})]})})]})})}),Ru=(e,t,n="smooth")=>{var r,i;let o=t&&(null==(i=null==(r=null==t?void 0:t.current)?void 0:r[e])?void 0:i.ctr);(o||(o=document.getElementById(e)))&&o.scrollIntoView({behavior:n,block:"start"})},Rh=(e,t)=>(0,N.useMemo)(()=>{try{let n=Object.keys(e).sort((t,n)=>{var r,i;return((null==(r=null==e?void 0:e[n])?void 0:r.timestamp)||0)-((null==(i=null==e?void 0:e[t])?void 0:i.timestamp)||0)}),r={Today:[],Yesterday:[],"Past week":[],"Past month":[],Earlier:[]},i=new Date,o=new Date(i);o.setDate(o.getDate()-1);let s=new Date(i);s.setDate(s.getDate()-7);let a=new Date(i);return a.setMonth(a.getMonth()-1),n.forEach(e=>{let n=t[e].root.timestamp,l=new Date(n);l.toDateString()===i.toDateString()?r.Today.push(e):l.toDateString()===o.toDateString()?r.Yesterday.push(e):l>=s?r["Past week"].push(e):l>=a?r["Past month"].push(e):r.Earlier.push(e)}),Object.keys(r).forEach(e=>{r[e].sort((e,n)=>{var r,i,o,s;return((null==(i=null==(r=null==t?void 0:t[n])?void 0:r.root)?void 0:i.timestamp)||0)-((null==(s=null==(o=null==t?void 0:t[e])?void 0:o.root)?void 0:s.timestamp)||0)})}),r}catch{return console.warn("Error in sorting keys. Returning as is."),{Earlier:Object.keys(e)}}},[e,t]),Rd=async(e,t,n,r,i,o,s,a,l,c)=>{let u="analysis-"+crypto.randomUUID(),{newAnalysis:h}=await e.submit({question:t,analysisId:u,rootAnalysisId:n?u:r,projectName:i,isRoot:n,directParentId:o,sqlOnly:a||s,isTemp:l,activeTab:c});return r||e.setActiveRootAnalysisId(h.analysisId),e.setActiveAnalysisId(h.analysisId),e.setActiveRootAnalysisId(h.rootAnalysisId),u},Rf=(e,t,n,r,i,o,s,a,l,c,u,h)=>(0,N.useCallback)(async(d,f=null,p=!1,m=null)=>{try{if(h(!0),!e)throw Error("Analysis tree manager not found");let c=e.getAll(),g="analysis",y="table";if(Object.keys(c).length>0){let e=await (0,_.O)(o,t,s,d);g=e.question_type,y=e.default_open_tab}if("edit-chart"===g){f?await Rp(c,d,l,a,e,o):await Rd(e,d,p,f,t,m,r,n,i,"chart");return}let b=await Rd(e,d,p,f,t,m,r,n,i,y);(0,_.P)(()=>{Ru(b,u)})}catch(e){a.error("Failed to create analysis"),console.error(e)}finally{c.current&&(c.current.value=""),h(!1)}},[e,n,r,i,t,u]),Rp=async(e,t,n,r,i,o)=>{var s,a,l,c;let u=(0,_.N)(Object.keys(e)),h=e[u.id],d=null==(l=null==(a=null==(s=null==h?void 0:h.analysisManager)?void 0:s.getAnalysis())?void 0:a.data)?void 0:l.parsedOutput;if(!d){r.error("No visible analysis found to edit chart");return}if(!(null!=(c=null==d?void 0:d.chartManager)&&c.config)){r.error("No chart found in the visible analysis");return}try{await d.chartManager.editChart(o,t,n,{onError:e=>{r.error(e.message),console.error(e)}}),i.setActiveTab(u.id,"chart")}catch(e){r.error(e.message),console.error(e)}},Rm=(e,t)=>{(0,N.useEffect)(()=>{Object.values(e).forEach(e=>{t.current[e.analysisId]={id:e.analysisId,ctr:document.getElementById(e.analysisId),analysisManager:e.analysisManager}})},[e])},Rg=(e,t,n,r,i)=>{(0,N.useEffect)(()=>{r.current&&(clearTimeout(r.current),r.current=null,i.current=!1),i.current=!0,r.current=setTimeout(()=>{e&&t&&n.current[e]&&Ru(e,n),i.current=!1},500)},[])},Ry=({projectName:e,activeRootAnalysisId:t,nestedTree:n,metadata:r,analysisDomRefs:i,analysisTreeManager:o,autoScroll:s,setLoading:a,submitFollowOn:l})=>{if(!t||!n[t])return null;let c=(0,N.useSyncExternalStore)(o.subscribeToActiveAnalysisIdChanges,o.getActiveAnalysisId),u=e=>(0,M.t)("w-full mb-4 [&_.analysis-content]:min-h-96 shadow-md transition-opacity duration-200",`analysis-${e}`,e===c?"border-2 border-blue-500 dark:border-blue-400 bg-white dark:bg-gray-800 z-2 relative":"opacity-50 hover:opacity-75 bg-gray-50/80 dark:bg-gray-900/80 relative -z-0");return M.j.jsxs(M.j.Fragment,{children:[M.j.jsx(Ra,{projectName:e,setGlobalLoading:a,metadata:r,rootClassNames:u(t),analysisId:t,rootAnalysisId:t,createAnalysisRequestBody:n[t].createAnalysisRequestBody,initiateAutoSubmit:!0,hasExternalSearchBar:!0,sqlOnly:n[t].sqlOnly,isTemp:n[t].isTemp,previousContextCreator:()=>[],onManagerCreated:(e,r,s)=>{i.current[r]={ctr:s,analysisManager:e,id:r},o.updateAnalysis({analysisId:t,isRoot:n[t].isRoot,updateObj:{analysisManager:e}})},onManagerDestroyed:e=>{o.removeAnalysis({analysisId:t,isRoot:n[t].isRoot,rootAnalysisId:t}),o.setActiveAnalysisId(null),t===e&&o.setActiveRootAnalysisId(null),a(!1)},initialConfig:{analysisTreeManager:o},submitFollowOn:l},t),n[t].flatOrderedChildren.map(n=>M.j.jsx(Ra,{projectName:e,metadata:r,rootClassNames:u(n.analysisId),analysisId:n.analysisId,rootAnalysisId:n.rootAnalysisId,createAnalysisRequestBody:n.createAnalysisRequestBody,setGlobalLoading:a,initiateAutoSubmit:!0,hasExternalSearchBar:!0,sqlOnly:n.sqlOnly,isTemp:n.isTemp,previousContextCreator:()=>n.allParents.reverse().map(e=>{var t,n,r,i;let o=null==(t=null==e?void 0:e.analysisManager)?void 0:t.analysis;return o&&null!=o&&o.data?{question:null==(r=null==(n=null==o?void 0:o.data)?void 0:n.inputs)?void 0:r.question,sql:null==(i=null==o?void 0:o.data)?void 0:i.sql}:null}).filter(e=>e&&e.sql&&e.question),onManagerCreated:(e,t,r)=>{i.current[t]={ctr:r,analysisManager:e,id:t},o.updateAnalysis({analysisId:n.analysisId,isRoot:n.isRoot,updateObj:{analysisManager:e}})},onManagerDestroyed:e=>{o.removeAnalysis({analysisId:n.analysisId,isRoot:n.isRoot,rootAnalysisId:n.rootAnalysisId}),o.setActiveAnalysisId(null),t===e&&o.setActiveRootAnalysisId(null),a(!1)},initialConfig:{analysisTreeManager:o},submitFollowOn:l},n.analysisId))]})},Rb=({predefinedQuestions:e,handleSubmit:t,activeRootAnalysisId:n,activeAnalysisId:r})=>M.j.jsx("div",{className:"grow flex flex-col place-content-center m-auto max-w-full relative z-[1]",children:M.j.jsxs("div",{className:"text-center text-gray-400 rounded-md dark:text-gray-500",children:[M.j.jsx("p",{className:"block mb-4 text-sm font-bold cursor-default",children:"Quickstart"}),M.j.jsx("ul",{className:"font-light text-gray-500 dark:text-gray-400",children:e.map((e,i)=>M.j.jsx("li",{children:M.j.jsx("button",{className:(0,M.t)("cursor-pointer text-sm p-2 m-1 border border-gray-200 dark:border-gray-700 rounded-md shadow-sm","hover:bg-gray-50 dark:hover:bg-gray-800 hover:border"),onClick:()=>{t((0,_.M)(e),n,!n,r)},children:(0,_.M)(e)})},i))})]})});function Rv({analysisTreeManager:e,projectName:t,isTemp:n=!1,forceSqlOnly:r=!1,metadata:i=null,predefinedQuestions:o=[],autoScroll:s=!0,sideBarClasses:a="",searchBarClasses:l="",searchBarDraggable:c=!0,defaultSidebarOpen:u=!1,onTreeChange:h=()=>{},beforeTitle:d=null}){let f=(0,N.useContext)(M.a),{token:p,apiEndpoint:m}=(0,N.useContext)(T1),g=(0,N.useRef)(null),y=(0,N.useRef)({}),b=(0,N.useRef)(null),v=(0,N.useRef)(!1),[x,w]=(0,N.useState)(!1),[k,O]=(0,N.useState)(!0),[S,C]=(0,N.useState)(""),[T,A]=(0,N.useState)(u),[E,j]=(0,N.useState)(e.getActiveAnalysisId()),[D,P]=(0,N.useState)(e.getActiveRootAnalysisId()),[R,I]=(0,N.useState)(e.getAll()),z=(0,_.F)({protocol:"http",path:"edit_chart",apiEndpoint:m}),L=(0,N.useSyncExternalStore)(e.subscribeToDataChanges,e.getTree),q=(0,N.useMemo)(()=>e.getNestedTree(),[L]),$=Rh(q,L);(0,N.useEffect)(()=>{let t=e.setActiveAnalysisId;return e.setActiveAnalysisId=n=>(j(n),t.call(e,n)),()=>{e.setActiveAnalysisId=t}},[e]),(0,N.useEffect)(()=>{let t=e.setActiveRootAnalysisId;return e.setActiveRootAnalysisId=n=>(P(n),t.call(e,n)),()=>{e.setActiveRootAnalysisId=t}},[e]),(0,N.useEffect)(()=>{I(e.getAll())},[L]);let B=Rf(e,t,r,k,n,p,m,f,z,g,y,w);(0,N.useEffect)(()=>{w(!1),y.current={}},[e]),(0,N.useEffect)(()=>{n||h(t,L)},[h,t,L,n]),Rm(R,y),Rg(E,s,y,b,v);let F=(0,N.useCallback)(()=>{let t=e.getAll(),{id:n}=(0,_.N)(Object.keys(t));if(!n||n===e.getActiveAnalysisId())return;let r=t[n].rootAnalysisId;e.setActiveAnalysisId(n),e.setActiveRootAnalysisId(r)},[]);return M.j.jsx(kf,{children:M.j.jsxs("div",{className:"flex flex-row w-full h-full max-w-full text-gray-600 bg-white dark:bg-gray-900 analysis-tree-viewer",children:[M.j.jsx("div",{className:"absolute left-0 top-0 z-[20] lg:sticky h-full",children:M.j.jsx(M.Q,{location:"left",open:T,onChange:e=>{A(e)},beforeTitle:d,title:M.j.jsxs("h2",{className:"font-bold text-gray-800 dark:text-gray-200 mb-3 text-lg flex items-center justify-between",children:[M.j.jsxs("span",{className:"flex items-center",children:[M.j.jsx("span",{className:"mr-2",children:"\uD83D\uDCDA"})," History"]}),M.j.jsx("span",{title:"Clear history",className:"inline-block text-xs font-medium text-gray-400 cursor-pointer dark:text-gray-500 hover:text-blue-500 dark:hover:text-blue-500 px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",onClick:()=>{e.reset(),e.setActiveAnalysisId(null),e.setActiveRootAnalysisId(null)},children:"Clear"})]}),rootClassNames:(0,M.t)("transition-all z-20 h-[calc(100%-1rem)] absolute left-0 min-h-full shadow-lg lg:shadow-none lg:sticky top-0 bg-gray-50 dark:bg-gray-800 z-20 border-r border-gray-100 dark:border-gray-700",a),contentClassNames:"w-72 p-5 rounded-tl-lg relative sm:block min-h-96 h-full overflow-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600 scrollbar-track-transparent",children:M.j.jsxs("div",{className:"flex flex-col w-full h-full space-y-4",children:[M.j.jsx("div",{className:"sticky top-0 mb-4",children:M.j.jsx(Rl,{isDummy:!0,onClick:()=>{C(""),v.current=!0,e.setActiveRootAnalysisId(null),e.setActiveAnalysisId(null)}})}),Object.entries($).map(([t,n])=>0===n.length?null:M.j.jsxs("div",{className:"mb-6",children:[M.j.jsxs("div",{className:"px-2 mb-3 text-xs font-medium tracking-wide text-blue-600 dark:text-blue-400 uppercase flex items-center",children:[M.j.jsx("div",{className:"h-px bg-blue-100 dark:bg-blue-800 flex-grow mr-2"}),t,M.j.jsx("div",{className:"h-px bg-blue-100 dark:bg-blue-800 flex-grow ml-2"})]}),n.map(t=>{let n=q[t];return M.j.jsx("div",{children:M.j.jsx(Rl,{analysis:n,activeAnalysisId:E,onClick:n=>{e.setActiveRootAnalysisId(t),e.setActiveAnalysisId((null==n?void 0:n.analysisId)||t),window.innerWidth<M.G.lg&&A(!1),b.current&&(clearTimeout(b.current),b.current=null,v.current=!1),b.current=setTimeout(()=>{v.current=!0,s&&Ru((null==n?void 0:n.analysisId)||t,y),v.current=!1},200)},extraClasses:(0,M.t)("ml-4")},null==n?void 0:n.analysisId)},null==n?void 0:n.analysisId)})]},t))]})})}),M.j.jsx("div",{className:(0,M.t)("absolute left-0 top-0 h-full w-full overlay lg:hidden bg-gray-800 dark:bg-gray-900 z-[11] transition-all",T?"opacity-50 block":"opacity-0 pointer-events-none"),onClick:()=>{A(!1)}}),M.j.jsxs("div",{className:(0,M.t)("relative w-full h-full min-w-0 p-2 pt-10 overflow-y-auto overflow-x-clip rounded-tr-lg sm:pt-0 grow lg:p-4",E?"":"flex flex-col"),onScroll:TK(e=>{v.current||(e.stopPropagation(),F())},100),children:[E&&D&&q[D]&&M.j.jsx(Ry,{projectName:t,activeRootAnalysisId:D,nestedTree:q,metadata:i,analysisDomRefs:y,analysisTreeManager:e,autoScroll:s,setLoading:w,submitFollowOn:C}),!E&&(x?M.j.jsx("div",{className:"flex items-center justify-center h-full",children:M.j.jsx(M.I,{})}):M.j.jsx(Rb,{predefinedQuestions:o,handleSubmit:B,activeRootAnalysisId:D,activeAnalysisId:E})),M.j.jsx("div",{className:c?"":"fixed bottom-1 z-40 lg:w-4/6 w-11/12 mx-auto left-0 right-0",children:M.j.jsx(Rc,{ref:g,searchBarClasses:l,searchBarDraggable:c,handleSubmit:B,loading:x,activeRootAnalysisId:D,activeAnalysisId:E,forceSqlOnly:r,setSqlOnly:O,sqlOnly:k,question:S,onNewConversationTextClick:()=>{v.current=!0,e.setActiveRootAnalysisId(null),e.setActiveAnalysisId(null),window.innerWidth<M.G.lg&&A(!1)}})})]})]})})}let Rx=N.memo(function({selectedItem:e,selectedProjectName:t,token:n,apiEndpoint:r}){let i=(0,N.useRef)({}),[o,s]=(0,N.useState)(!1),a=(0,N.useMemo)(()=>e.treeManager||P3(e.analysisTree),[e]),l=(0,N.useSyncExternalStore)(a.subscribeToDataChanges,a.getTree),c=(0,N.useMemo)(()=>a.getNestedTree(),[l]),u=(0,N.useMemo)(()=>Object.keys(c)[0]||null,[c]),{searchBarManager:h}=(0,N.useContext)(uw);(0,N.useEffect)(()=>{u&&(a.setActiveRootAnalysisId(u),a.setActiveAnalysisId(u))},[a,u]);let d=(0,N.useCallback)(e=>{e&&h.setQuestion(e)},[h]);return u?M.j.jsx(T1.Provider,{value:{token:n,apiEndpoint:r,hiddenCharts:[],hideSqlTab:!1,hidePreviewTabs:!1,hideRawAnalysis:!0,analysisDataCache:{},updateConfig:()=>{}},children:M.j.jsx(Ry,{projectName:t,activeRootAnalysisId:u,nestedTree:c,metadata:null,analysisDomRefs:i,analysisTreeManager:a,autoScroll:!0,setLoading:s,submitFollowOn:d})}):null}),Rw=N.memo(function({apiEndpoint:e,token:t,selectedItemId:n,selectedItem:r,selectedProjectName:i,uploadNewProjectOption:o,searchBar:s,onReportDelete:a,onReportParsed:l,onThinkingStreamClosed:c,setMostVisibleAnalysisAsActive:u,onProjectCreated:h}){return M.j.jsxs("div",{className:"flex flex-col grow p-2 relative min-w-0 overflow-auto",children:[null===n&&i===o&&M.j.jsx(ug,{apiEndpoint:e,token:t,onProjectCreated:h}),n&&r&&"analysisTree"in r?M.j.jsx("div",{className:"p-4 space-y-4 max-h-full overflow-y-auto pb-48",onScroll:(0,N.useMemo)(()=>TK(e=>{e.stopPropagation(),u()},100),[u]),children:M.j.jsx(kf,{children:Object.keys(r.analysisTree).length>0&&M.j.jsx(Rx,{selectedItem:r,selectedProjectName:i,token:t,apiEndpoint:e})})}):n&&r&&"status"in r&&r.status===Wl.DONE?M.j.jsx(Wa,{reportId:n,apiEndpoint:e,projectName:i,token:t,onDelete:a,onReportParsed:l},n):n?M.j.jsx(TI,{apiEndpoint:e,token:t,reportId:n,onDelete:a,onStreamClosed:c}):null,s]})}),Rk=({error:e})=>M.j.jsxs("div",{className:"w-screen h-screen flex items-center justify-center bg-rose-50 text-rose-500",children:["Error: ",e]}),RO=({message:e="Loading"})=>(console.log("Rendering OracleLoading with message:",e),M.j.jsx("div",{className:"w-screen h-screen flex flex-col gap-4 items-center justify-center bg-gray-50 text-gray-400",children:M.j.jsxs("div",{className:"flex items-center",children:[M.j.jsx(M.d,{})," ",M.j.jsx("span",{className:"ml-2",children:e})]})})),RS=()=>{let e=(0,N.useCallback)(()=>{if("u">typeof window){let e=new URLSearchParams(window.location.search).get("item_id");if(e){let t=Number(e);return isNaN(t)?e:t.toString()}}return null},[])();return{urlItemIdRef:(0,N.useRef)(e),updateUrlWithItemId:(0,N.useCallback)(e=>{if("u">typeof window){let t=new URL(window.location.href);if(null!==e){let n=String(e);t.searchParams.set("item_id",n)}else t.searchParams.delete("item_id");window.history.pushState({},"",t.toString())}},[])}},RC=(e,t,n)=>{if(!e||!t||!n||!n[e])return"Today";for(let r of Object.keys(n[e]))if(n[e][r]&&Array.isArray(n[e][r])&&n[e][r].some(e=>String(null==e?void 0:e.itemId)===String(t)))return r;return"Today"},RT=()=>({Today:[],Yesterday:[],"Past week":[],"Past month":[],Earlier:[]}),RA=e=>{let t=new Date,n=new Date(t);n.setDate(n.getDate()-1);let r=new Date(t);r.setDate(r.getDate()-7);let i=new Date(t);return i.setMonth(i.getMonth()-1),e.toDateString()===t.toDateString()?"Today":e.toDateString()===n.toDateString()?"Yesterday":e>=r?"Past week":e>=i?"Past month":"Earlier"},RE=e=>{Object.entries(e).forEach(([e,t])=>{t&&Array.isArray(t)&&t.sort((e,t)=>{let n="report_id"in e?new Date(e.date_created+"Z").getTime():new Date(e.date_created).getTime();return("report_id"in t?new Date(t.date_created+"Z").getTime():new Date(t.date_created).getTime())-n})})},RM=(e,t,n=null)=>{let[r,i]=(0,N.useState)(e),[o,s]=(0,N.useState)(null),[a,l]=(0,N.useState)({}),[c,u]=(0,N.useState)(n),h=(0,N.useCallback)(e=>{s(e),t(null),u(null)},[t]),d=(0,N.useCallback)(e=>{i(t=>[...t,e]),u(null),l(t=>({...t,[e]:RT()}))},[]);return{projectNames:r,setProjectNames:i,selectedProjectName:o,setSelectedProjectName:s,oracleHistory:a,setOracleHistory:l,selectedItemId:c,setSelectedItemId:u,handleProjectChange:h,handleNewProjectCreated:d}},RN=(e,t,n,r,i,o,s,a,l,c)=>{let u=null===i||null!==o.current;console.log("Initial loading state:",u,"Selected project:",i,"URL item:",o.current);let[h,d]=(0,N.useState)(u),[f,p]=(0,N.useState)(null),m=(0,N.useRef)(!1);return(0,N.useEffect)(()=>{let s=!1;(async function(){if(m.current||s){console.log("Skipping initial setup - already complete or running");return}console.log("Starting initial setup"),s=!0,d(!0);try{let s=o.current,u={},h=!1,d=null;for(let t of e)u[t]=RT();if(s){if(console.log("URL contains item_id:",s,"- searching for it"),i&&i!==r)try{(await R_(i,t,n,u,s)).foundUrlItemId&&(h=!0,d=i,console.log("Found item in initial project:",i))}catch(e){console.error("Error searching in project:",i,e)}if(!h)for(let o of e.filter(e=>e!==r&&e!==i))try{if(console.log("Checking project:",o),(await R_(o,t,n,u,s)).foundUrlItemId){h=!0,d=o,console.log("Found item in project:",o);break}}catch(e){console.error("Error searching in project:",o,e)}}a(u),h&&d?(console.log("Setting project to",d,"and item to",s),l(d),c(s)):i?console.log("Keeping existing project selection:",i):e.length>0?(console.log("No URL item found, selecting first project"),l(e[0])):(console.log("No projects available, using upload option"),l(r)),console.log("Initial setup completed successfully"),m.current=!0}catch(e){console.error("Initial setup error:",e),p(e.message)}finally{console.log("Setting loading to false in initialSetup"),d(!1),s=!1}})();let u=setTimeout(()=>{h&&(console.log("Safety timeout reached - forcing loading to false"),d(!1),m.current=!0,p("Loading timed out - please try refreshing the page"))},5e3);return()=>clearTimeout(u)},[e,t,n,o,r,i,l,c,a,h,d,p]),(0,N.useEffect)(()=>{if(!m.current||null===i){console.log("Skipping data loading - initial setup not complete or no project selected");return}if(i===r){console.log("Skipping data loading for upload option"),d(!1);return}console.log("Loading data for project:",i);let e=!1;(async function(){if(e){console.log("Already loading data, skipping");return}e=!0,console.log("Setting loading to true for project data"),d(!0);try{let e={...s};e[i]=RT();try{await R_(i,t,n,e,null)}catch{p("Failed to fetch reports for project name "+i)}a(e)}catch(e){console.error("Data loading error:",e),p(e.message)}finally{console.log("Setting loading to false after project data load"),d(!1),e=!1}})()},[i,t,n,r,a,p]),{loading:h,error:f}};async function R_(e,t,n,r,i){let o={foundUrlItemId:!1,foundUrlItemIdProjectName:null},[s,a]=await Promise.all([Wx(t,n,e),(0,_.Q)(t,n,e)]);if(a&&a.length>0&&function(e,t,n,r){let i={foundUrlItemId:!1,foundUrlItemIdProjectName:null};for(let o of e.filter(e=>e.is_root_analysis)){let s=function(e){if(!e||!Array.isArray(e)||0===e.length)return{};let t={},n={},r={};return e.forEach(e=>{var i,o;n[e.analysis_id]=e;let s={analysisId:e.analysis_id,createAnalysisRequestBody:{initialisation_details:{user_question:e.user_question,is_root_analysis:!!e.is_root_analysis,root_analysis_id:e.root_analysis_id,direct_parent_id:e.direct_parent_id},sql_only:(null==(i=e.data)?void 0:i.tool_name)==="sql_aggregator"},directParentId:e.direct_parent_id||null,timestamp:new Date(e.timestamp).getTime(),isRoot:!!e.is_root_analysis,isTemp:!1,projectName:e.db_name,rootAnalysisId:e.is_root_analysis?e.analysis_id:e.root_analysis_id,sqlOnly:(null==(o=e.data)?void 0:o.tool_name)==="sql_aggregator",user_question:e.user_question||"",activeTab:"table",analysisManager:void 0};s.isRoot&&(r[s.analysisId]=s,t[s.analysisId]={root:s,analysisList:[s]})}),e.forEach(e=>{var n,r;if(!e.is_root_analysis&&e.root_analysis_id){let i={analysisId:e.analysis_id,createAnalysisRequestBody:{initialisation_details:{user_question:e.user_question,is_root_analysis:!1,root_analysis_id:e.root_analysis_id,direct_parent_id:e.direct_parent_id},sql_only:(null==(n=e.data)?void 0:n.tool_name)==="sql_aggregator"},directParentId:e.direct_parent_id||null,timestamp:new Date(e.timestamp).getTime(),isRoot:!1,isTemp:!1,projectName:e.db_name,rootAnalysisId:e.root_analysis_id,sqlOnly:(null==(r=e.data)?void 0:r.tool_name)==="sql_aggregator",user_question:e.user_question||"",activeTab:"table",analysisManager:void 0};t[e.root_analysis_id]&&t[e.root_analysis_id].analysisList.push(i)}}),Object.keys(t).forEach(e=>{t[e].analysisList.sort((e,t)=>e.timestamp-t.timestamp)}),t}(e.filter(e=>e.root_analysis_id===o.analysis_id||e.analysis_id===o.analysis_id)),a=P3(s);r&&!i.foundUrlItemId&&String(o.analysis_id)===String(r)&&(i.foundUrlItemId=!0,i.foundUrlItemIdProjectName=n);let l={itemType:"query-data",date_created:o.timestamp,itemId:o.analysis_id,analysisTree:s,treeManager:a},c=RA(new Date(o.timestamp));t[n][c].push(l)}return i}(a,r,e,i).foundUrlItemId&&(o.foundUrlItemId=!0,o.foundUrlItemIdProjectName=e),!s)throw Error("Failed to get reports");return o.foundUrlItemId||function(e,t,n,r){let i={foundUrlItemId:!1,foundUrlItemIdProjectName:null};return r&&e.find(e=>String(e.report_id)===String(r))&&(i.foundUrlItemId=!0,i.foundUrlItemIdProjectName=n),e.filter(e=>e.status!==Wl.ERRORED&&e.status!==Wl.INITIALIZED).forEach(e=>{let r=RA(new Date(e.date_created+"Z")),i={...e,itemId:e.report_id,itemType:"report"};t[n][r].push(i)}),i}(s,r,e,i).foundUrlItemId&&(o.foundUrlItemId=!0,o.foundUrlItemIdProjectName=e),RE(r[e]),o}let Rj=e=>({createNewFastAnalysis:(0,N.useCallback)(async function({question:t,projectName:n,analysisId:r,rootAnalysisId:i,treeManager:o=null}){try{return o?RD({question:t,projectName:n,analysisId:r,rootAnalysisId:i,treeManager:o}):RP({question:t,projectName:n,analysisId:r})}catch(t){throw console.error("Error creating new analysis:",t),e.error("Failed to create analysis: "+t.message),t}},[e])});async function RD({question:e,projectName:t,analysisId:n,rootAnalysisId:r,treeManager:i}){let{newAnalysis:o}=await i.submit({question:e,projectName:t,analysisId:n,rootAnalysisId:r,isRoot:!1,directParentId:i.getActiveAnalysisId(),activeTab:"table"});return(0,_.P)(()=>{Ru(o.analysisId)}),{rootAnalysisId:r,analysisTree:(null==i?void 0:i.getTree())||{},treeManager:i}}async function RP({question:e,projectName:t,analysisId:n}){let r=P3();return await r.submit({question:e,projectName:t,analysisId:n,rootAnalysisId:n,isRoot:!0,directParentId:null,sqlOnly:!1,isTemp:!1,activeTab:"table"}),{rootAnalysisId:n,analysisTree:r.getTree(),treeManager:r}}let RR=(e,t,n,r,i,o,s,a)=>{let l=(0,N.useCallback)(async()=>{let l=RC(r,n,o);if(await Ww(e,n,t,r))return a.success("Report deleted"),s(e=>{let t=e[r][l].filter(e=>"report_id"in e?e.report_id!==n:e.itemId!==n),i={...e,[r]:{...e[r],[l]:t}};return 0===t.length&&delete i[r][l],i}),i(null),null;a.error("Failed to delete report")},[e,t,n,r,i,o,a,s]),c=(0,N.useCallback)(({userQuestion:e,reportId:t,status:n})=>(s(i=>{var o,s,a,l,c;let u={...i};return u[r]={...i[r],Today:[{report_id:t,report_name:e,status:n,date_created:KN(),itemId:t,itemType:"report"},...(null==(o=null==i?void 0:i[r])?void 0:o.Today)||[]],Yesterday:(null==(s=null==i?void 0:i[r])?void 0:s.Yesterday)||[],"Past week":(null==(a=null==i?void 0:i[r])?void 0:a["Past week"])||[],"Past month":(null==(l=null==i?void 0:i[r])?void 0:l["Past month"])||[],Earlier:(null==(c=null==i?void 0:i[r])?void 0:c.Earlier)||[]},u}),i(t),t),[r,i,s]);return{onReportDelete:l,handleReportGenerated:c,handleReportParsed:(0,N.useCallback)(e=>{let t=RC(r,n,o);s(i=>{let o=i[r][t];return{...i,[r]:{...i[r],[t]:o.map(t=>"report_id"in t&&t.report_id===n?{...t,reportData:e}:t)}}})},[r,n,o,s]),handleThinkingStreamClosed:(0,N.useCallback)((e,t)=>{if(!r||!n||!o[r]){console.warn("Stream closed but project or report data missing");return}let a=RC(r,n,o);if(!o[r][a]){console.warn("Stream closed but report group missing:",a);return}t?function(e,t,n,r,i){return i(r=>{let i={...r};return i[e]&&i[e][n]&&Array.isArray(i[e][n])&&(i[e][n]=i[e][n].filter(e=>"report_id"in e?e.report_id!==t:e.itemId!==t)),i}),r(null),null}(r,n,a,i,s):function(e,t,n,r){r(r=>{let i={...r};return i[e]&&i[e][n]&&Array.isArray(i[e][n])&&(i[e][n]=i[e][n].map(e=>e.itemId===t?{...e,status:Wl.DONE}:e)),i})}(r,n,a,s)},[r,n,o,i,s])}},RI=N.memo(function({apiEndpoint:e,token:t,initialProjectNames:n=[]}){let{current:r}=(0,N.useRef)((0,_.g)()),i=(0,N.useRef)(ux()),o=(0,N.useRef)((0,M.M)()),{urlItemIdRef:s,updateUrlWithItemId:a}=RS(),{projectNames:l,selectedProjectName:c,setSelectedProjectName:u,oracleHistory:h,setOracleHistory:d,selectedItemId:f,setSelectedItemId:p,handleProjectChange:m,handleNewProjectCreated:g}=RM(n,a,s.current),{loading:y,error:b}=RN(l,e,t,r,c,s,h,d,u,p),{createNewFastAnalysis:v}=Rj(o.current),{onReportDelete:x,handleReportGenerated:w,handleReportParsed:k,handleThinkingStreamClosed:O}=RR(e,t,f,c,a,h,d,o.current);(0,N.useSyncExternalStore)(i.current.subscribeToDraftChanges,i.current.getDraft);let S=(0,N.useMemo)(()=>{if(!f||!h[c])return null;let e=RC(c,f,h);return h[c][e]?h[c][e].find(e=>String(e.itemId)===String(f)):null},[f,h,c]),C=(0,N.useCallback)(()=>{if((null==S?void 0:S.itemType)!=="query-data"||!S.treeManager)return;let e=S.treeManager.getAll(),{id:t}=(0,_.N)(Object.keys(e));if(!t||t===S.treeManager.getActiveAnalysisId())return;let n=e[t].rootAnalysisId;S.treeManager.setActiveAnalysisId(t),S.treeManager.setActiveRootAnalysisId(n)},[S]),T=(0,N.useCallback)(e=>{p(null==e?void 0:e.itemId)},[p]),A=(0,N.useCallback)((e,t)=>{let n=(0,_.g)();return -1!==l.indexOf(t)&&S?(null==S?void 0:S.itemType)==="query-data"?v({question:e,projectName:t,analysisId:n,rootAnalysisId:S.itemId,treeManager:S.treeManager}):void 0:uN({question:e,projectName:t,analysisId:n,selectedItem:S,createNewFastAnalysis:v,setOracleHistory:d,updateUrlWithItemId:a,setSelectedItemId:p,setSelectedProjectName:u,messageManager:o.current})},[l,S,v,a,d,p,u,o]);(0,N.useEffect)(()=>{let e=()=>{a(null),p(null)};return window.addEventListener("oracle:new-report",e),()=>window.removeEventListener("oracle:new-report",e)},[a,p]);let E=(0,N.useMemo)(()=>M.j.jsx(uM,{selectedProjectName:c,projectNames:l,uploadNewProjectOption:r,hasUploadedFiles:!1,onProjectChange:m}),[c,l,r,!1,m]),j=(0,N.useMemo)(()=>M.j.jsx(uE,{uploadNewProjectOption:r,selectedItem:S,projectName:c,onNewProjectCreated:g,createNewFastAnalysis:A,onReportGenerated:w,setSelectedItemId:p},"search"),[r,S,c,g,A,w,p]);return b?M.j.jsx(Rk,{error:b}):y?(console.log("OracleEmbed is in loading state"),M.j.jsx(RO,{message:"Loading project data..."})):M.j.jsx(uw.Provider,{value:{token:t,apiEndpoint:e,searchBarManager:i.current},children:M.j.jsxs(M.a.Provider,{value:o.current,children:[M.j.jsx(M.b,{rootClassNames:"absolute left-0 right-0"}),M.j.jsxs("div",{className:"flex flex-row min-w-full min-h-full max-h-full h-full text-gray-600 bg-white dark:bg-gray-900",children:[M.j.jsx(uy,{oracleHistory:h,selectedProjectName:c,uploadNewProjectOption:r,selectedItemId:f,updateUrlWithItemId:a,projectSelector:E,setSelectedItem:T}),M.j.jsx(Rw,{apiEndpoint:e,token:t,selectedItemId:f,selectedItem:S,selectedProjectName:c,uploadNewProjectOption:r,searchBar:j,onReportDelete:x,onReportParsed:k,onThinkingStreamClosed:O,setMostVisibleAnalysisAsActive:C,onProjectCreated:g})]})]})})});function Rz(e){this.content=e}Rz.prototype={constructor:Rz,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return -1},get:function(e){var t=this.find(e);return -1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),o=r.content.slice();return -1==i?o.push(n||e,t):(o[i+1]=t,n&&(o[i]=n)),new Rz(o)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new Rz(n)},addToStart:function(e,t){return new Rz([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Rz(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),o=r.find(e);return i.splice(-1==o?i.length:o,0,t,n),new Rz(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=Rz.from(e)).size?new Rz(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=Rz.from(e)).size?new Rz(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Rz.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}},Rz.from=function(e){if(e instanceof Rz)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Rz(t)};class RL{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let t=0;t<e.length;t++)this.size+=e[t].nodeSize}nodesBetween(e,t,n,r=0,i){for(let o=0,s=0;s<t;o++){let a=this.content[o],l=s+a.nodeSize;if(l>e&&!1!==n(a,r+s,i||null,o)&&a.content.size){let i=s+1;a.nodesBetween(Math.max(0,e-i),Math.min(a.content.size,t-i),n,r+i)}s=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let i="",o=!0;return this.nodesBetween(e,t,(s,a)=>{let l=s.isText?s.text.slice(Math.max(e,a)-a,t-a):s.isLeaf?r?"function"==typeof r?r(s):r:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&l||s.isTextblock)&&n&&(o?o=!1:i+=n),i+=l},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),i=1);i<e.content.length;i++)r.push(e.content[i]);return new RL(r,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let n=[],r=0;if(t>e)for(let i=0,o=0;o<t;i++){let s=this.content[i],a=o+s.nodeSize;a>e&&((o<e||a>t)&&(s=s.isText?s.cut(Math.max(0,e-o),Math.min(s.text.length,t-o)):s.cut(Math.max(0,e-o-1),Math.min(s.content.size,t-o-1))),n.push(s),r+=s.nodeSize),o=a}return new RL(n,r)}cutByIndex(e,t){return e==t?RL.empty:0==e&&t==this.content.length?this:new RL(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let r=this.content.slice(),i=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new RL(r,i)}addToStart(e){return new RL([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new RL(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e,t=0){return function e(t,n,r){for(let i=0;;i++){if(i==t.childCount||i==n.childCount)return t.childCount==n.childCount?null:r;let o=t.child(i),s=n.child(i);if(o==s){r+=o.nodeSize;continue}if(!o.sameMarkup(s))return r;if(o.isText&&o.text!=s.text){for(let e=0;o.text[e]==s.text[e];e++)r++;return r}if(o.content.size||s.content.size){let t=e(o.content,s.content,r+1);if(null!=t)return t}r+=o.nodeSize}}(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return function e(t,n,r,i){for(let o=t.childCount,s=n.childCount;;){if(0==o||0==s)return o==s?null:{a:r,b:i};let a=t.child(--o),l=n.child(--s),c=a.nodeSize;if(a==l){r-=c,i-=c;continue}if(!a.sameMarkup(l))return{a:r,b:i};if(a.isText&&a.text!=l.text){let e=0,t=Math.min(a.text.length,l.text.length);for(;e<t&&a.text[a.text.length-e-1]==l.text[l.text.length-e-1];)e++,r--,i--;return{a:r,b:i}}if(a.content.size||l.content.size){let t=e(a.content,l.content,r-1,i-1);if(t)return t}r-=c,i-=c}}(this,e,t,n)}findIndex(e,t=-1){if(0==e)return R$(0,e);if(e==this.size)return R$(this.content.length,e);if(e>this.size||e<0)throw RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=r+this.child(n).nodeSize;if(i>=e)return i==e||t>0?R$(n+1,i):R$(n,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return RL.empty;if(!Array.isArray(t))throw RangeError("Invalid input for Fragment.fromJSON");return new RL(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return RL.empty;let t,n=0;for(let r=0;r<e.length;r++){let i=e[r];n+=i.nodeSize,r&&i.isText&&e[r-1].sameMarkup(i)?(t||(t=e.slice(0,r)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new RL(t||e,n)}static from(e){if(!e)return RL.empty;if(e instanceof RL)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new RL([e],e.nodeSize);throw RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}RL.empty=new RL([],0);let Rq={index:0,offset:0};function R$(e,t){return Rq.index=e,Rq.offset=t,Rq}function RB(e,t){if(e===t)return!0;if(!(e&&"object"==typeof e)||!(t&&"object"==typeof t))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!RB(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!RB(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}let RF=class e{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){let i=e[r];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,r));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(i)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&RB(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw RangeError(`There is no mark type ${t.type} in this schema`);let r=n.create(t.attrs);return n.checkAttrs(r.attrs),r}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&0==t.length)return e.none;if(t instanceof e)return[t];let n=t.slice();return n.sort((e,t)=>e.type.rank-t.type.rank),n}};RF.none=[];class RQ extends Error{}class RV{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=function e(t,n,r,i){let{index:o,offset:s}=t.findIndex(n),a=t.maybeChild(o);if(s==n||a.isText)return t.cut(0,n).append(r).append(t.cut(n));let l=e(a.content,n-s-1,r);return l&&t.replaceChild(o,a.copy(l))}(this.content,e+this.openStart,t);return n&&new RV(n,this.openStart,this.openEnd)}removeBetween(e,t){return new RV(function e(t,n,r){let{index:i,offset:o}=t.findIndex(n),s=t.maybeChild(i),{index:a,offset:l}=t.findIndex(r);if(o==n||s.isText){if(l!=r&&!t.child(a).isText)throw RangeError("Removing non-flat range");return t.cut(0,n).append(t.cut(r))}if(i!=a)throw RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(e(s.content,n-o-1,r-o-1)))}(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return RV.empty;let n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw RangeError("Invalid input for Slice.fromJSON");return new RV(RL.fromJSON(e,t.content),n,r)}static maxOpen(e,t=!0){let n=0,r=0;for(let r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)n++;for(let n=e.lastChild;n&&!n.isLeaf&&(t||!n.type.spec.isolating);n=n.lastChild)r++;return new RV(e,n,r)}}function RH(e,t){if(!t.type.compatibleContent(e.type))throw new RQ("Cannot join "+t.type.name+" onto "+e.type.name)}function RU(e,t,n){let r=e.node(n);return RH(r,t.node(n)),r}function RW(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function RG(e,t,n,r){let i=(t||e).node(n),o=0,s=t?t.index(n):i.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(RW(e.nodeAfter,r),o++));for(let e=o;e<s;e++)RW(i.child(e),r);t&&t.depth==n&&t.textOffset&&RW(t.nodeBefore,r)}function RX(e,t){return e.type.checkContent(t),e.copy(t)}function RY(e,t,n){let r=[];return RG(null,e,n,r),e.depth>n&&RW(RX(RU(e,t,n+1),RY(e,t,n+1)),r),RG(t,null,n,r),new RL(r)}RV.empty=new RV(RL.empty,0,0);class RZ{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1;for(let t=0;t<e;t++)r+=n.child(t).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return RF.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let e=n;n=r,r=e}let i=n.marks;for(var o=0;o<i.length;o++)!1!==i[o].type.spec.inclusive||r&&i[o].isInSet(r.marks)||(i=i[o--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new R1(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw RangeError("Position "+t+" out of range");let n=[],r=0,i=t;for(let t=e;;){let{index:e,offset:o}=t.content.findIndex(i),s=i-o;if(n.push(t,e,r+o),!s||(t=t.child(e)).isText)break;i=s-1,r+=o+1}return new RZ(t,n,i)}static resolveCached(e,t){let n=R0.get(e);if(n)for(let e=0;e<n.elts.length;e++){let r=n.elts[e];if(r.pos==t)return r}else R0.set(e,n=new RK);let r=n.elts[n.i]=RZ.resolve(e,t);return n.i=(n.i+1)%RJ,r}}class RK{constructor(){this.elts=[],this.i=0}}let RJ=12,R0=new WeakMap;class R1{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}let R2=Object.create(null),R4=class e{constructor(e,t,n,r=RF.none){this.type=e,this.attrs=t,this.marks=r,this.content=n||RL.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,r=0){this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&RB(this.attrs,t||e.defaultAttrs||R2)&&RF.sameSet(this.marks,n||RF.none)}copy(t=null){return t==this.content?this:new e(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new e(this.type,this.attrs,this.content,t)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return RV.empty;let r=this.resolve(e),i=this.resolve(t),o=n?0:r.sharedDepth(t),s=r.start(o);return new RV(r.node(o).content.cut(r.pos-s,i.pos-s),r.depth-o,i.depth-o)}replace(e,t,n){return function(e,t,n){if(n.openStart>e.depth)throw new RQ("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new RQ("Inconsistent open depths");return function e(t,n,r,i){let o=t.index(i),s=t.node(i);if(o==n.index(i)&&i<t.depth-r.openStart){let a=e(t,n,r,i+1);return s.copy(s.content.replaceChild(o,a))}if(!r.content.size)return RX(s,RY(t,n,i));if(r.openStart||r.openEnd||t.depth!=i||n.depth!=i){let{start:e,end:o}=function(e,t){let n=t.depth-e.openStart,r=t.node(n).copy(e.content);for(let e=n-1;e>=0;e--)r=t.node(e).copy(RL.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(r,t);return RX(s,function e(t,n,r,i,o){let s=t.depth>o&&RU(t,n,o+1),a=i.depth>o&&RU(r,i,o+1),l=[];return RG(null,t,o,l),s&&a&&n.index(o)==r.index(o)?(RH(s,a),RW(RX(s,e(t,n,r,i,o+1)),l)):(s&&RW(RX(s,RY(t,n,o+1)),l),RG(n,r,o,l),a&&RW(RX(a,RY(r,i,o+1)),l)),RG(i,null,o,l),new RL(l)}(t,e,o,n,i))}{let e=t.parent,i=e.content;return RX(e,i.cut(0,t.parentOffset).append(r.content).append(i.cut(n.parentOffset)))}}(e,t,n,0)}(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(!(t=t.maybeChild(n)))return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return RZ.resolveCached(this,e)}resolveNoCache(e){return RZ.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,e=>(n.isInSet(e.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),R3(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=RL.empty,r=0,i=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,r,i),s=o&&o.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(let e=r;e<i;e++)if(!this.type.allowsMarks(n.child(e).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let i=this.contentMatchAt(e).matchType(n),o=i&&i.matchFragment(this.content,t);return!!o&&o.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=RF.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!RF.sameSet(e,this.marks))throw RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(e=>e.toJSON())),e}static fromJSON(e,t){let n;if(!t)throw RangeError("Invalid input for Node.fromJSON");if(t.marks){if(!Array.isArray(t.marks))throw RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=RL.fromJSON(e,t.content),i=e.nodeType(t.type).create(t.attrs,r,n);return i.type.checkAttrs(i.attrs),i}};R4.prototype.text=void 0;let R5=class e extends R4{constructor(e,t,n,r){if(super(e,t,null,r),!n)throw RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):R3(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)}cut(e=0,t=this.text.length){return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function R3(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class R6{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){var n;let r,i=new R7(e,t);if(null==i.next)return R6.empty;let o=function e(t){let n=[];do n.push(function(t){let n=[];do n.push(function(t){let n=function(t){if(t.eat("(")){let n=e(t);return t.eat(")")||t.err("Missing closing paren"),n}if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=(function(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let e in n){let r=n[e];r.isInGroup(t)&&i.push(r)}return 0==i.length&&e.err("No node type or group '"+t+"' found"),i})(t,t.next).map(e=>(null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}));return t.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}}(t);for(;;)if(t.eat("+"))n={type:"plus",expr:n};else if(t.eat("*"))n={type:"star",expr:n};else if(t.eat("?"))n={type:"opt",expr:n};else if(t.eat("{"))n=function(e,t){let n=R8(e),r=n;return e.eat(",")&&(r="}"!=e.next?R8(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}(t,n);else break;return n}(t));while(t.next&&")"!=t.next&&"|"!=t.next);return 1==n.length?n[0]:{type:"seq",exprs:n}}(t));while(t.eat("|"));return 1==n.length?n[0]:{type:"choice",exprs:n}}(i);i.next&&i.err("Unexpected trailing text");let s=(n=function(e){let t=[[]];return i(function e(t,o){if("choice"==t.type)return t.exprs.reduce((t,n)=>t.concat(e(n,o)),[]);if("seq"==t.type)for(let r=0;;r++){let s=e(t.exprs[r],o);if(r==t.exprs.length-1)return s;i(s,o=n())}else if("star"==t.type){let s=n();return r(o,s),i(e(t.expr,s),s),[r(s)]}else if("plus"==t.type){let s=n();return i(e(t.expr,o),s),i(e(t.expr,s),s),[r(s)]}else{if("opt"==t.type)return[r(o)].concat(e(t.expr,o));if("range"==t.type){let s=o;for(let r=0;r<t.min;r++){let r=n();i(e(t.expr,s),r),s=r}if(-1==t.max)i(e(t.expr,s),s);else for(let o=t.min;o<t.max;o++){let o=n();r(s,o),i(e(t.expr,s),o),s=o}return[r(s)]}if("name"==t.type)return[r(o,void 0,t.value)];throw Error("Unknown expr type")}}(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){let i={term:r,to:n};return t[e].push(i),i}function i(e,t){e.forEach(e=>e.to=t)}}(o),r=Object.create(null),function e(t){let i=[];t.forEach(e=>{n[e].forEach(({term:e,to:t})=>{let r;if(e){for(let t=0;t<i.length;t++)i[t][0]==e&&(r=i[t][1]);Ie(n,t).forEach(t=>{r||i.push([e,r=[]]),-1==r.indexOf(t)&&r.push(t)})}})});let o=r[t.join(",")]=new R6(t.indexOf(n.length-1)>-1);for(let t=0;t<i.length;t++){let n=i[t][1].sort(R9);o.next.push({type:i[t][0],next:r[n.join(",")]||e(n)})}return o}(Ie(n,0)));return function(e,t){for(let n=0,r=[e];n<r.length;n++){let e=r[n],i=!e.validEnd,o=[];for(let t=0;t<e.next.length;t++){let{type:n,next:s}=e.next[t];o.push(n.name),i&&!(n.isText||n.hasRequiredAttrs())&&(i=!1),-1==r.indexOf(s)&&r.push(s)}i&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(s,i),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let r=this;for(let i=t;r&&i<n;i++)r=r.matchType(e.child(i).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let r=[this];return function i(o,s){let a=o.matchFragment(e,n);if(a&&(!t||a.validEnd))return RL.from(s.map(e=>e.createAndFill()));for(let e=0;e<o.next.length;e++){let{type:t,next:n}=o.next[e];if(!(t.isText||t.hasRequiredAttrs())&&-1==r.indexOf(n)){r.push(n);let e=i(n,s.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),i=r.match;if(i.matchType(e)){let e=[];for(let t=r;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<i.next.length;e++){let{type:o,next:s}=i.next[e];o.isLeaf||o.hasRequiredAttrs()||o.name in t||r.type&&!s.validEnd||(n.push({match:o.contentMatch,type:o,via:r}),t[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function t(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}(this),e.map((t,n)=>{let r=n+(t.validEnd?"*":" ")+" ";for(let n=0;n<t.next.length;n++)r+=(n?", ":"")+t.next[n].type.name+"->"+e.indexOf(t.next[n].next);return r}).join(`
`)}}R6.empty=new R6(!0);class R7{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw SyntaxError(e+" (in content expression '"+this.string+"')")}}function R8(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function R9(e,t){return t-e}function Ie(e,t){let n=[];return function t(r){let i=e[r];if(1==i.length&&!i[0].term)return t(i[0].to);n.push(r);for(let e=0;e<i.length;e++){let{term:r,to:o}=i[e];r||-1!=n.indexOf(o)||t(o)}}(t),n.sort(R9)}function It(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function In(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(void 0===i){let t=e[r];if(t.hasDefault)i=t.default;else throw RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function Ir(e,t,n,r){for(let r in t)if(!(r in e))throw RangeError(`Unsupported attribute ${r} for ${n} of type ${r}`);for(let n in e){let r=e[n];r.validate&&r.validate(t[n])}}function Ii(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new Is(e,r,t[r]);return n}let Io=class e{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=Ii(e,n.attrs),this.defaultAttrs=It(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==R6.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:In(this.attrs,e)}create(e=null,t,n){if(this.isText)throw Error("NodeType.create can't construct text nodes");return new R4(this,this.computeAttrs(e),RL.from(t),RF.setFrom(n))}createChecked(e=null,t,n){return t=RL.from(t),this.checkContent(t),new R4(this,this.computeAttrs(e),t,RF.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),(t=RL.from(t)).size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let r=this.contentMatch.matchFragment(t),i=r&&r.fillBefore(RL.empty,!0);return i?new R4(this,e,t.append(i),RF.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let t=0;t<e.childCount;t++)if(!this.allowsMarks(e.child(t).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Ir(this.attrs,e,"node",this.name)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){let t;if(null==this.markSet)return e;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:RF.none:e}static compile(t,n){let r=Object.create(null);t.forEach((t,i)=>r[t]=new e(t,n,i));let i=n.spec.topNode||"doc";if(!r[i])throw RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw RangeError("Every schema needs a 'text' type");for(let e in r.text.attrs)throw RangeError("The text node type should not have attributes");return r}};class Is{constructor(e,t,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate="string"==typeof n.validate?function(e,t,n){let r=n.split("|");return n=>{let i=null===n?"null":typeof n;if(0>r.indexOf(i))throw RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${i}`)}}(e,t,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class Ia{constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=Ii(e,r.attrs),this.excluded=null;let i=It(this.attrs);this.instance=i?new RF(this,i):null}create(e=null){return!e&&this.instance?this.instance:new RF(this,In(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach((e,i)=>n[e]=new Ia(e,r++,t,i)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){Ir(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Il{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let n in e)t[n]=e[n];t.nodes=Rz.from(e.nodes),t.marks=Rz.from(e.marks||{}),this.nodes=Io.compile(this.spec.nodes,this),this.marks=Ia.compile(this.spec.marks,this);let n=Object.create(null);for(let e in this.nodes){if(e in this.marks)throw RangeError(e+" can not be both a node and a mark");let t=this.nodes[e],r=t.spec.content||"",i=t.spec.marks;if(t.contentMatch=n[r]||(n[r]=R6.parse(r,this.nodes)),t.inlineContent=t.contentMatch.inlineContent,t.spec.linebreakReplacement){if(this.linebreakReplacement)throw RangeError("Multiple linebreak nodes defined");if(!t.isInline||!t.isLeaf)throw RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=t}t.markSet="_"==i?null:i?Ic(this,i.split(" ")):""!=i&&t.inlineContent?null:[]}for(let e in this.marks){let t=this.marks[e],n=t.spec.excludes;t.excluded=null==n?[t]:""==n?[]:Ic(this,n.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,r){if("string"==typeof e)e=this.nodeType(e);else if(e instanceof Io){if(e.schema!=this)throw RangeError("Node type from different schema used ("+e.name+")")}else throw RangeError("Invalid node type: "+e);return e.createChecked(t,n,r)}text(e,t){let n=this.nodes.text;return new R5(n,n.defaultAttrs,e,RF.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return R4.fromJSON(this,e)}markFromJSON(e){return RF.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw RangeError("Unknown node type: "+e);return t}}function Ic(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],o=e.marks[i],s=o;if(o)n.push(o);else for(let t in e.marks){let r=e.marks[t];("_"==i||r.spec.group&&r.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=r)}if(!s)throw SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}let Iu=class e{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach(e=>{if(null!=e.tag)this.tags.push(e);else if(null!=e.style){let t=/[^=]*/.exec(e.style)[0];0>n.indexOf(t)&&n.push(t),this.styles.push(e)}}),this.normalizeLists=!this.tags.some(t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)})}parse(e,t={}){let n=new Ig(this,t,!1);return n.addAll(e,RF.none,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new Ig(this,t,!0);return n.addAll(e,RF.none,t.from,t.to),RV.maxOpen(n.finish())}matchTag(e,t,n){for(let o=n?this.tags.indexOf(n)+1:0;o<this.tags.length;o++){var r,i;let n=this.tags[o];if(r=e,i=n.tag,(r.matches||r.msMatchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector).call(r,i)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,r){for(let i=r?this.styles.indexOf(r)+1:0;i<this.styles.length;i++){let r=this.styles[i],o=r.style;if(!(0!=o.indexOf(e)||r.context&&!n.matchesContext(r.context)||o.length>e.length&&(61!=o.charCodeAt(e.length)||o.slice(e.length+1)!=t))){if(r.getAttrs){let e=r.getAttrs(t);if(!1===e)continue;r.attrs=e||void 0}return r}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,r=0;for(;r<t.length;r++){let e=t[r];if((null==e.priority?50:e.priority)<n)break}t.splice(r,0,e)}for(let t in e.marks){let r=e.marks[t].spec.parseDOM;r&&r.forEach(e=>{n(e=Iy(e)),e.mark||e.ignore||e.clearMark||(e.mark=t)})}for(let t in e.nodes){let r=e.nodes[t].spec.parseDOM;r&&r.forEach(e=>{n(e=Iy(e)),e.node||e.ignore||e.mark||(e.node=t)})}return t}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new e(t,e.schemaRules(t)))}},Ih={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Id={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},If={ol:!0,ul:!0};function Ip(e,t,n){return null!=t?+!!t|2*("full"===t):e&&"pre"==e.whitespace?3:-5&n}class Im{constructor(e,t,n,r,i,o){this.type=e,this.attrs=t,this.marks=n,this.solid=r,this.options=o,this.content=[],this.activeMarks=RF.none,this.match=i||(4&o?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(RL.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let t=this.type.contentMatch,n;return(n=t.findWrapping(e.type))?(this.match=t,n):null}}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e=this.content[this.content.length-1],t;e&&e.isText&&(t=/[ \t\r\n\u000c]+$/.exec(e.text))&&(e.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=e.withText(e.text.slice(0,e.text.length-t[0].length)))}let t=RL.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(RL.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Ih.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Ig{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let r=t.topNode,i,o=Ip(null,t.preserveWhitespace,0)|4*!!n;i=r?new Im(r.type,r.attrs,RF.none,!0,t.topMatch||r.type.contentMatch,o):n?new Im(null,null,RF.none,!0,null,o):new Im(e.schema.topNodeType,null,RF.none,!0,null,o),this.nodes=[i],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}addTextNode(e,t){let n=e.nodeValue,r=this.top,i=2&r.options?"full":this.localPreserveWS||(1&r.options)>0;if("full"===i||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(i)n="full"!==i?n.replace(/\r?\n|\r/g," "):n.replace(/\r\n?/g,`
`);else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let t=r.content[r.content.length-1],i=e.previousSibling;(!t||i&&"BR"==i.nodeName||t.isText&&/[ \t\r\n\u000c]$/.test(t.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,n){let r=this.localPreserveWS,i=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),s;If.hasOwnProperty(o)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&If.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(s=this.parser.matchTag(e,this,n));e:if(a?a.ignore:Id.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,t);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let n,r=this.needsBlock;if(Ih.hasOwnProperty(o))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),n=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let s=a&&a.skip?t:this.readStyles(e,t);s&&this.addAll(e,s),n&&this.sync(i),this.needsBlock=r}else{let n=this.readStyles(e,t);n&&this.addElementByRule(e,a,n,!1===a.consuming?s:void 0)}this.localPreserveWS=r}leafFallback(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let n=e.style;if(n&&n.length)for(let e=0;e<this.parser.matchedStyles.length;e++){let r=this.parser.matchedStyles[e],i=n.getPropertyValue(r);if(i)for(let e;;){let n=this.parser.matchStyle(r,i,this,e);if(!n)break;if(n.ignore)return null;if(t=n.clearMark?t.filter(e=>!n.clearMark(e)):t.concat(this.parser.schema.marks[n.mark].create(n.attrs)),!1===n.consuming)e=n;else break}}return t}addElementByRule(e,t,n,r){let i,o;if(t.node){if((o=this.parser.schema.nodes[t.node]).isLeaf)this.insertNode(o.create(t.attrs),n)||this.leafFallback(e,n);else{let e=this.enter(o,t.attrs||null,n,t.preserveWhitespace);e&&(i=!0,n=e)}}else{let e=this.parser.schema.marks[t.mark];n=n.concat(e.create(t.attrs))}let s=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,n,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(e=>this.insertNode(e,n));else{let r=e;"string"==typeof t.contentElement?r=e.querySelector(t.contentElement):"function"==typeof t.contentElement?r=t.contentElement(e):t.contentElement&&(r=t.contentElement),this.findAround(e,r,!0),this.addAll(r,n),this.findAround(e,r,!1)}i&&this.sync(s)&&this.open--}addAll(e,t,n,r){let i=n||0;for(let o=n?e.childNodes[n]:e.firstChild,s=null==r?null:e.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o,t);this.findAtPoint(e,i)}findPlace(e,t){let n,r;for(let t=this.open;t>=0;t--){let i=this.nodes[t],o=i.findWrapping(e);if(o&&(!n||n.length>o.length)&&(n=o,r=i,!o.length)||i.solid)break}if(!n)return null;this.sync(r);for(let e=0;e<n.length;e++)t=this.enterInner(n[e],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&(t=this.enterInner(e,null,t))}let n=this.findPlace(e,t);if(n){this.closeExtra();let t=this.top;t.match&&(t.match=t.match.matchType(e.type));let r=RF.none;for(let i of n.concat(e.marks))(t.type?t.type.allowsMarkType(i.type):Ib(i.type,e.type))&&(r=i.addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,n,r){let i=this.findPlace(e.create(t),n);return i&&(i=this.enterInner(e,t,n,!0,r)),i}enterInner(e,t,n,r=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let s=Ip(e,i,o.options);4&o.options&&0==o.content.length&&(s|=4);let a=RF.none;return n=n.filter(t=>(o.type?!o.type.allowsMarkType(t.type):!Ib(t.type,e))||(a=t.addToSet(a),!1)),this.nodes.push(new Im(e,t,a,r,null,s)),this.open++,n}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=1)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),i=-(n?n.depth+1:0)+ +!r,o=(e,s)=>{for(;e>=0;e--){let a=t[e];if(""==a){if(e==t.length-1||0==e)continue;for(;s>=i;s--)if(o(e-1,s))return!0;return!1}{let e=s>0||0==s&&r?this.nodes[s].type:n&&s>=i?n.node(s-i).type:null;if(!e||e.name!=a&&!e.isInGroup(a))return!1;s--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let e in this.parser.schema.nodes){let t=this.parser.schema.nodes[e];if(t.isTextblock&&t.defaultAttrs)return t}}}function Iy(e){let t={};for(let n in e)t[n]=e[n];return t}function Ib(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let o=[],s=e=>{o.push(e);for(let n=0;n<e.edgeCount;n++){let{type:r,next:i}=e.edge(n);if(r==t||0>o.indexOf(i)&&s(i))return!0}};if(s(i.contentMatch))return!0}}class Iv{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=Iw(t).createDocumentFragment());let r=n,i=[];return e.forEach(e=>{if(i.length||e.marks.length){let n=0,o=0;for(;n<i.length&&o<e.marks.length;){let t=e.marks[o];if(!this.marks[t.type.name]){o++;continue}if(!t.eq(i[n][0])||!1===t.type.spec.spanning)break;n++,o++}for(;n<i.length;)r=i.pop()[1];for(;o<e.marks.length;){let n=e.marks[o++],s=this.serializeMark(n,e.isInline,t);s&&(i.push([n,r]),r.appendChild(s.dom),r=s.contentDOM||s.dom)}}r.appendChild(this.serializeNodeInner(e,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:r}=IO(Iw(t),this.nodes[e.type.name](e),null,e.attrs);if(r){if(e.isLeaf)throw RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let i=this.serializeMark(e.marks[r],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(e,t,n={}){let r=this.marks[e.type.name];return r&&IO(Iw(n),r(e,t),null,e.attrs)}static renderSpec(e,t,n=null,r){return IO(e,t,n,r)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Iv(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Ix(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return Ix(e.marks)}}function Ix(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function Iw(e){return e.document||window.document}let Ik=new WeakMap;function IO(e,t,n,r){let i,o;if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let s=t[0],a;if("string"!=typeof s)throw RangeError("Invalid array passed to renderSpec");if(r&&(void 0===(i=Ik.get(r))&&Ik.set(r,(o=null,function e(t){if(t&&"object"==typeof t){if(Array.isArray(t)){if("string"==typeof t[0])o||(o=[]),o.push(t);else for(let n=0;n<t.length;n++)e(t[n])}else for(let n in t)e(t[n])}}(r),i=o)),a=i)&&a.indexOf(t)>-1)throw RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=s.indexOf(" ");l>0&&(n=s.slice(0,l),s=s.slice(l+1));let c,u=n?e.createElementNS(n,s):e.createElement(s),h=t[1],d=1;if(h&&"object"==typeof h&&null==h.nodeType&&!Array.isArray(h)){for(let e in d=2,h)if(null!=h[e]){let t=e.indexOf(" ");t>0?u.setAttributeNS(e.slice(0,t),e.slice(t+1),h[e]):u.setAttribute(e,h[e])}}for(let i=d;i<t.length;i++){let o=t[i];if(0===o){if(i<t.length-1||i>d)throw RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}{let{dom:t,contentDOM:i}=IO(e,o,n,r);if(u.appendChild(t),i){if(c)throw RangeError("Multiple content holes");c=i}}}return{dom:u,contentDOM:c}}class IS{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class IC{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&IC.empty)return IC.empty}recover(e){let t=0,n=65535&e;if(!this.inverted)for(let e=0;e<n;e++)t+=this.ranges[3*e+2]-this.ranges[3*e+1];return this.ranges[3*n]+t+(e-(65535&e))/65536}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let r=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let a=this.ranges[s]-(this.inverted?r:0);if(a>e)break;let l=this.ranges[s+i],c=this.ranges[s+o],u=a+l;if(e<=u){let i=l?e==a?-1:e==u?1:t:t,o=a+r+(i<0?0:c);if(n)return o;let h=e==(t<0?a:u)?null:s/3+(e-a)*65536,d=e==a?2:e==u?1:4;return(t<0?e!=a:e!=u)&&(d|=8),new IS(o,d,h)}r+=c-l}return n?e+r:new IS(e+r,0,null)}touches(e,t){let n=0,r=65535&t,i=this.inverted?2:1,o=this.inverted?1:2;for(let t=0;t<this.ranges.length;t+=3){let s=this.ranges[t]-(this.inverted?n:0);if(s>e)break;let a=this.ranges[t+i];if(e<=s+a&&t==3*r)return!0;n+=this.ranges[t+o]-a}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,i=0;r<this.ranges.length;r+=3){let o=this.ranges[r],s=o-(this.inverted?i:0),a=o+(this.inverted?0:i),l=this.ranges[r+t],c=this.ranges[r+n];e(s,s+l,a,a+c),i+=c-l}}invert(){return new IC(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?IC.empty:new IC(e<0?[0,-e,0]:[0,0,e])}}IC.empty=new IC([]);class IT{constructor(e=[],t,n=0,r=e.length){this.maps=e,this.mirror=t,this.from=n,this.to=r}slice(e=0,t=this.maps.length){return new IT(this.maps,this.mirror,e,t)}copy(){return new IT(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,n=this.maps.length;t<e.maps.length;t++){let r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}invert(){let e=new IT;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let n=this.from;n<this.to;n++){let i=this.maps[n].mapResult(e,t);if(null!=i.recover){let t=this.getMirror(n);if(null!=t&&t>n&&t<this.to){n=t,e=this.maps[t].recover(i.recover);continue}}r|=i.delInfo,e=i.pos}return n?e:new IS(e,r,null)}}let IA=Object.create(null);class IE{getMap(){return IC.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw RangeError("Invalid input for Step.fromJSON");let n=IA[t.stepType];if(!n)throw RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in IA)throw RangeError("Duplicate use of step JSON ID "+e);return IA[e]=t,t.prototype.jsonID=e,t}}class IM{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new IM(e,null)}static fail(e){return new IM(null,e)}static fromReplace(e,t,n,r){try{return IM.ok(e.replace(t,n,r))}catch(e){if(e instanceof RQ)return IM.fail(e.message);throw e}}}function IN(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let o=e.child(i);o.content.size&&(o=o.copy(IN(o.content,t,o))),o.isInline&&(o=t(o,n,i)),r.push(o)}return RL.fromArray(r)}class I_ extends IE{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),i=new RV(IN(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,r),t.openStart,t.openEnd);return IM.fromReplace(e,this.from,this.to,i)}invert(){return new Ij(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new I_(t.pos,n.pos,this.mark)}merge(e){return e instanceof I_&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new I_(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for AddMarkStep.fromJSON");return new I_(t.from,t.to,e.markFromJSON(t.mark))}}IE.jsonID("addMark",I_);class Ij extends IE{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new RV(IN(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return IM.fromReplace(e,this.from,this.to,n)}invert(){return new I_(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new Ij(t.pos,n.pos,this.mark)}merge(e){return e instanceof Ij&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ij(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ij(t.from,t.to,e.markFromJSON(t.mark))}}IE.jsonID("removeMark",Ij);class ID extends IE{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return IM.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return IM.fromReplace(e,this.pos,this.pos+1,new RV(RL.from(n),0,+!t.isLeaf))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new ID(this.pos,t.marks[n]);return new ID(this.pos,this.mark)}}return new IP(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ID(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ID(t.pos,e.markFromJSON(t.mark))}}IE.jsonID("addNodeMark",ID);class IP extends IE{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return IM.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return IM.fromReplace(e,this.pos,this.pos+1,new RV(RL.from(n),0,+!t.isLeaf))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new ID(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new IP(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new IP(t.pos,e.markFromJSON(t.mark))}}IE.jsonID("removeNodeMark",IP);class IR extends IE{constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&Iz(e,this.from,this.to)?IM.fail("Structure replace would overwrite content"):IM.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new IC([this.from,this.to-this.from,this.slice.size])}invert(e){return new IR(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new IR(t.pos,Math.max(t.pos,n.pos),this.slice)}merge(e){if(!(e instanceof IR)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let t=this.slice.size+e.slice.size==0?RV.empty:new RV(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new IR(e.from,this.to,t,this.structure)}}{let t=this.slice.size+e.slice.size==0?RV.empty:new RV(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new IR(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for ReplaceStep.fromJSON");return new IR(t.from,t.to,RV.fromJSON(e,t.slice),!!t.structure)}}IE.jsonID("replace",IR);class II extends IE{constructor(e,t,n,r,i,o,s=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=i,this.insert=o,this.structure=s}apply(e){if(this.structure&&(Iz(e,this.from,this.gapFrom)||Iz(e,this.gapTo,this.to)))return IM.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return IM.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?IM.fromReplace(e,this.from,this.to,n):IM.fail("Content does not fit in gap")}getMap(){return new IC([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new II(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||i>n.pos?null:new II(t.pos,n.pos,r,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new II(t.from,t.to,t.gapFrom,t.gapTo,RV.fromJSON(e,t.slice),t.insert,!!t.structure)}}function Iz(e,t,n){let r=e.resolve(t),i=n-t,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let e=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,i--}}return!1}function IL(e,t,n,r=n.contentMatch,i=!0){let o=e.doc.nodeAt(t),s=[],a=t+1;for(let t=0;t<o.childCount;t++){let l=o.child(t),c=a+l.nodeSize,u=r.matchType(l.type);if(u){r=u;for(let t=0;t<l.marks.length;t++)n.allowsMarkType(l.marks[t].type)||e.step(new Ij(a,c,l.marks[t]));if(i&&l.isText&&"pre"!=n.whitespace){let e,t=/\r?\n|\r/g,r;for(;e=t.exec(l.text);)r||(r=new RV(RL.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),s.push(new IR(a+e.index,a+e.index+e[0].length,r))}}else s.push(new IR(a,c,RV.empty));a=c}if(!r.validEnd){let t=r.fillBefore(RL.empty,!0);e.replace(a,a,new RV(t,0,0))}for(let t=s.length-1;t>=0;t--)e.step(s[t])}function Iq(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let r=e.$from.node(n),i=e.$from.index(n),o=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(i,o,t))return n;if(0==n||r.type.spec.isolating||!((0==i||r.canReplace(i,r.childCount))&&(o==r.childCount||r.canReplace(0,o))))break}return null}function I$(e,t,n=null,r=e){let i=function(e,t){let{parent:n,startIndex:r,endIndex:i}=e,o=n.contentMatchAt(r).findWrapping(t);if(!o)return null;let s=o.length?o[0]:t;return n.canReplaceWith(r,i,s)?o:null}(e,t),o=i&&function(e,t){let{parent:n,startIndex:r,endIndex:i}=e,o=n.child(r),s=t.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:t).contentMatch;for(let e=r;a&&e<i;e++)a=a.matchType(n.child(e).type);return a&&a.validEnd?s:null}(r,t);return o?i.map(IB).concat({type:t,attrs:n}).concat(o.map(IB)):null}function IB(e){return{type:e,attrs:null}}function IF(e,t,n,r){t.forEach((i,o)=>{if(i.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(i.text);){let i=e.mapping.slice(r).map(n+1+o+s.index);e.replaceWith(i,i+1,t.type.schema.linebreakReplacement.create())}}})}function IQ(e,t,n,r){t.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let i=e.mapping.slice(r).map(n+1+o);e.replaceWith(i,i+1,t.type.schema.text(`
`))}})}function IV(e,t,n=1,r){let i=e.resolve(t),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let e=i.depth-1,t=n-2;e>o;e--,t--){let n=i.node(e),o=i.index(e);if(n.type.spec.isolating)return!1;let s=n.content.cutByIndex(o,n.childCount),a=r&&r[t+1];a&&(s=s.replaceChild(0,a.type.create(a.attrs)));let l=r&&r[t]||n;if(!n.canReplace(o+1,n.childCount)||!l.type.validContent(s))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function IH(e,t){let n=e.resolve(t),r=n.index();return IU(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function IU(e,t){return!!(e&&t&&!e.isLeaf&&function(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let o=t.child(i),s=o.type==r?e.type.schema.nodes.text:o.type;if(!(n=n.matchType(s))||!e.type.allowsMarks(o.marks))return!1}return n.validEnd}(e,t))}function IW(e,t,n=-1){let r=e.resolve(t);for(let e=r.depth;;e--){let i,o,s=r.index(e);if(e==r.depth?(i=r.nodeBefore,o=r.nodeAfter):n>0?(i=r.node(e+1),s++,o=r.node(e).maybeChild(s)):(i=r.node(e).maybeChild(s-1),o=r.node(e+1)),i&&!i.isTextblock&&IU(i,o)&&r.node(e).canReplace(s,s+1))return t;if(0==e)break;t=n<0?r.before(e):r.after(e)}}function IG(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let e=0;e<n.openStart;e++)i=i.firstChild.content;for(let e=1;e<=(0==n.openStart&&n.size?2:1);e++)for(let t=r.depth;t>=0;t--){let n=t==r.depth?0:r.pos<=(r.start(t+1)+r.end(t+1))/2?-1:1,o=r.index(t)+ +(n>0),s=r.node(t),a=!1;if(1==e)a=s.canReplace(o,o,i);else{let e=s.contentMatchAt(o).findWrapping(i.firstChild.type);a=e&&s.canReplaceWith(o,o,e[0])}if(a)return 0==n?r.pos:n<0?r.before(t+1):r.after(t+1)}return null}function IX(e,t,n=t,r=RV.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),o=e.resolve(n);return IY(i,o,r)?new IR(t,n,r):new IZ(i,o,r).fit()}function IY(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}IE.jsonID("replaceAround",II);class IZ{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=RL.empty;for(let t=0;t<=e.depth;t++){let n=e.node(t);this.frontier.push({type:n.type,match:n.contentMatchAt(e.indexAfter(t))})}for(let t=e.depth;t>0;t--)this.placed=RL.from(e.node(t).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;let i=this.placed,o=n.depth,s=r.depth;for(;o&&s&&1==i.childCount;)i=i.firstChild.content,o--,s--;let a=new RV(i,o,s);return e>-1?new II(n.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||n.pos!=this.$to.pos?new IR(n.pos,r.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let i=t.firstChild;if(t.childCount>1&&(r=0),i.type.spec.isolating&&r<=n){e=n;break}t=i.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e,r=null,i=(n?(r=I0(this.unplaced.content,n-1).firstChild).content:this.unplaced.content).firstChild;for(let e=this.depth;e>=0;e--){let{type:o,match:s}=this.frontier[e],a,l=null;if(1==t&&(i?s.matchType(i.type)||(l=s.fillBefore(RL.from(i),!1)):r&&o.compatibleContent(r.type)))return{sliceDepth:n,frontierDepth:e,parent:r,inject:l};if(2==t&&i&&(a=s.findWrapping(i.type)))return{sliceDepth:n,frontierDepth:e,parent:r,wrap:a};if(r&&s.matchType(r.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=I0(e,t);return!!r.childCount&&!r.firstChild.isLeaf&&(this.unplaced=new RV(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=I0(e,t);if(r.childCount<=1&&t>0){let i=e.size-t<=t+r.size;this.unplaced=new RV(IK(e,t-1,1),t-1,i?t-1:n)}else this.unplaced=new RV(IK(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:r,wrap:i}){for(;this.depth>t;)this.closeFrontierNode();if(i)for(let e=0;e<i.length;e++)this.openFrontierNode(i[e]);let o=this.unplaced,s=n?n.content:o.content,a=o.openStart-e,l=0,c=[],{match:u,type:h}=this.frontier[t];if(r){for(let e=0;e<r.childCount;e++)c.push(r.child(e));u=u.matchFragment(r)}let d=s.size+e-(o.content.size-o.openEnd);for(;l<s.childCount;){let e=s.child(l),t=u.matchType(e.type);if(!t)break;(++l>1||0==a||e.content.size)&&(u=t,c.push(function e(t,n,r){if(n<=0)return t;let i=t.content;return n>1&&(i=i.replaceChild(0,e(i.firstChild,n-1,1==i.childCount?r-1:0))),n>0&&(i=t.type.contentMatch.fillBefore(i).append(i),r<=0&&(i=i.append(t.type.contentMatch.matchFragment(i).fillBefore(RL.empty,!0)))),t.copy(i)}(e.mark(h.allowedMarks(e.marks)),1==l?a:0,l==s.childCount?d:-1)))}let f=l==s.childCount;f||(d=-1),this.placed=IJ(this.placed,t,RL.from(c)),this.frontier[t].match=u,f&&d<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let e=0,t=s;e<d;e++){let e=t.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),t=e.content}this.unplaced=f?0==e?RV.empty:new RV(IK(o.content,e-1,1),e-1,d<0?o.openEnd:e-1):new RV(IK(o.content,e,l),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return -1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!I1(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return -1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=I1(e,t,r,n,i);if(o){for(let n=t-1;n>=0;n--){let{match:t,type:r}=this.frontier[n],i=I1(e,n,r,t,!0);if(!i||i.childCount)continue e}return{depth:t,fit:o,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=IJ(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),r=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,r)}return e}openFrontierNode(e,t=null,n){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=IJ(this.placed,this.depth,RL.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(RL.empty,!0);e.childCount&&(this.placed=IJ(this.placed,this.frontier.length,e))}}function IK(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(IK(e.firstChild.content,t-1,n)))}function IJ(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(IJ(e.lastChild.content,t-1,n)))}function I0(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function I1(e,t,n,r,i){let o=e.node(t),s=i?e.indexAfter(t):e.index(t);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!function(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,o.content,s)?a:null}function I2(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let r=e.start(i);if(r<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(r==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==r-1)&&n.push(i)}return n}class I4 extends IE{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return IM.fail("No node at attribute step's position");let n=Object.create(null);for(let e in t.attrs)n[e]=t.attrs[e];n[this.attr]=this.value;let r=t.type.create(n,null,t.marks);return IM.fromReplace(e,this.pos,this.pos+1,new RV(RL.from(r),0,+!t.isLeaf))}getMap(){return IC.empty}invert(e){return new I4(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new I4(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw RangeError("Invalid input for AttrStep.fromJSON");return new I4(t.pos,t.attr,t.value)}}IE.jsonID("attr",I4);class I5 extends IE{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let n in e.attrs)t[n]=e.attrs[n];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return IM.ok(n)}getMap(){return IC.empty}invert(e){return new I5(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw RangeError("Invalid input for DocAttrStep.fromJSON");return new I5(t.attr,t.value)}}IE.jsonID("docAttr",I5);let I3=class extends Error{};(I3=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n}).prototype=Object.create(Error.prototype),I3.prototype.constructor=I3,I3.prototype.name="TransformError";class I6{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new IT}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new I3(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=RV.empty){let r=IX(this.doc,e,t,n);return r&&this.step(r),this}replaceWith(e,t,n){return this.replace(e,t,new RV(RL.from(n),0,0))}delete(e,t){return this.replace(e,t,RV.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return function(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),o=e.doc.resolve(n);if(IY(i,o,r))return e.step(new IR(t,n,r));let s=I2(i,e.doc.resolve(n));0==s[s.length-1]&&s.pop();let a=-(i.depth+1);s.unshift(a);for(let e=i.depth,t=i.pos-1;e>0;e--,t--){let n=i.node(e).type.spec;if(n.defining||n.definingAsContext||n.isolating)break;s.indexOf(e)>-1?a=e:i.before(e)==t&&s.splice(1,0,-e)}let l=s.indexOf(a),c=[],u=r.openStart;for(let e=r.content,t=0;;t++){let n=e.firstChild;if(c.push(n),t==r.openStart)break;e=n.content}for(let e=u-1;e>=0;e--){var h;let t=c[e],n=(h=t.type).spec.defining||h.spec.definingForContent;if(n&&!t.sameMarkup(i.node(Math.abs(a)-1)))u=e;else if(n||!t.type.isTextblock)break}for(let t=r.openStart;t>=0;t--){let a=(t+u+1)%(r.openStart+1),h=c[a];if(h)for(let t=0;t<s.length;t++){let c=s[(t+l)%s.length],u=!0;c<0&&(u=!1,c=-c);let d=i.node(c-1),f=i.index(c-1);if(d.canReplaceWith(f,f,h.type,h.marks))return e.replace(i.before(c),u?o.after(c):n,new RV(function e(t,n,r,i,o){if(n<r){let o=t.firstChild;t=t.replaceChild(0,o.copy(e(o.content,n+1,r,i,o)))}if(n>i){let e=o.contentMatchAt(0),n=e.fillBefore(t).append(t);t=n.append(e.matchFragment(n).fillBefore(RL.empty,!0))}return t}(r.content,0,r.openStart,a),a,r.openEnd))}}let d=e.steps.length;for(let a=s.length-1;a>=0&&(e.replace(t,n,r),!(e.steps.length>d));a--){let e=s[a];e<0||(t=i.before(e),n=o.after(e))}}(this,e,t,n),this}replaceRangeWith(e,t,n){return function(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=function(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(let e=r.depth-1;e>=0;e--){let t=r.index(e);if(r.node(e).canReplaceWith(t,t,n))return r.before(e+1);if(t>0)return null}if(r.parentOffset==r.parent.content.size)for(let e=r.depth-1;e>=0;e--){let t=r.indexAfter(e);if(r.node(e).canReplaceWith(t,t,n))return r.after(e+1);if(t<r.node(e).childCount)break}return null}(e.doc,t,r.type);null!=i&&(t=n=i)}e.replaceRange(t,n,new RV(RL.from(r),0,0))}(this,e,t,n),this}deleteRange(e,t){return function(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),o=I2(r,i);for(let t=0;t<o.length;t++){let n=o[t],s=t==o.length-1;if(s&&0==n||r.node(n).type.contentMatch.validEnd)return e.delete(r.start(n),i.end(n));if(n>0&&(s||r.node(n-1).canReplace(r.index(n-1),i.indexAfter(n-1))))return e.delete(r.before(n),i.after(n))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(t-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return e.delete(r.before(o),n);e.delete(t,n)}(this,e,t),this}lift(e,t){return function(e,t,n){let{$from:r,$to:i,depth:o}=t,s=r.before(o+1),a=i.after(o+1),l=s,c=a,u=RL.empty,h=0;for(let e=o,t=!1;e>n;e--)t||r.index(e)>0?(t=!0,u=RL.from(r.node(e).copy(u)),h++):l--;let d=RL.empty,f=0;for(let e=o,t=!1;e>n;e--)t||i.after(e+1)<i.end(e)?(t=!0,d=RL.from(i.node(e).copy(d)),f++):c++;e.step(new II(l,c,s,a,new RV(u.append(d),h,f),u.size-h,!0))}(this,e,t),this}join(e,t=1){return function(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,o=e.doc.resolve(t-n),s=o.node().type;if(i&&s.inlineContent){let e="pre"==s.whitespace,t=!!s.contentMatch.matchType(i);e&&!t?r=!1:!e&&t&&(r=!0)}let a=e.steps.length;if(!1===r){let r=e.doc.resolve(t+n);IQ(e,r.node(),r.before(),a)}s.inlineContent&&IL(e,t+n-1,s,o.node().contentMatchAt(o.index()),null==r);let l=e.mapping.slice(a),c=l.map(t-n);if(e.step(new IR(c,l.map(t+n,-1),RV.empty,!0)),!0===r){let t=e.doc.resolve(c);IF(e,t.node(),t.before(),e.steps.length)}}(this,e,t),this}wrap(e,t){return function(e,t,n){let r=RL.empty;for(let e=n.length-1;e>=0;e--){if(r.size){let t=n[e].type.contentMatch.matchFragment(r);if(!t||!t.validEnd)throw RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=RL.from(n[e].type.create(n[e].attrs,r))}let i=t.start,o=t.end;e.step(new II(i,o,i,o,new RV(r,0,0),n.length,!0))}(this,e,t),this}setBlockType(e,t=e,n,r=null){return function(e,t,n,r,i){if(!r.isTextblock)throw RangeError("Type given to setBlockType should be a textblock");let o=e.steps.length;e.doc.nodesBetween(t,n,(t,n)=>{var s,a,l;let c,u,h="function"==typeof i?i(t):i;if(t.isTextblock&&!t.hasMarkup(r,h)&&(s=e.doc,a=e.mapping.slice(o).map(n),l=r,u=(c=s.resolve(a)).index(),c.parent.canReplaceWith(u,u+1,l))){let i=null;if(r.schema.linebreakReplacement){let e="pre"==r.whitespace,t=!!r.contentMatch.matchType(r.schema.linebreakReplacement);e&&!t?i=!1:!e&&t&&(i=!0)}!1===i&&IQ(e,t,n,o),IL(e,e.mapping.slice(o).map(n,1),r,void 0,null===i);let s=e.mapping.slice(o),a=s.map(n,1),l=s.map(n+t.nodeSize,1);return e.step(new II(a,l,a+1,l-1,new RV(RL.from(r.create(h,null,t.marks)),0,0),1,!0)),!0===i&&IF(e,t,n,o),!1}})}(this,e,t,n,r),this}setNodeMarkup(e,t,n=null,r){return function(e,t,n,r,i){let o=e.doc.nodeAt(t);if(!o)throw RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return e.replaceWith(t,t+o.nodeSize,s);if(!n.validContent(o.content))throw RangeError("Invalid content for node type "+n.name);e.step(new II(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new RV(RL.from(s),0,0),1,!0))}(this,e,t,n,r),this}setNodeAttribute(e,t,n){return this.step(new I4(e,t,n)),this}setDocAttribute(e,t){return this.step(new I5(e,t)),this}addNodeMark(e,t){return this.step(new ID(e,t)),this}removeNodeMark(e,t){if(!(t instanceof RF)){let n=this.doc.nodeAt(e);if(!n)throw RangeError("No node at position "+e);if(!(t=t.isInSet(n.marks)))return this}return this.step(new IP(e,t)),this}split(e,t=1,n){return function(e,t,n=1,r){let i=e.doc.resolve(t),o=RL.empty,s=RL.empty;for(let e=i.depth,t=i.depth-n,a=n-1;e>t;e--,a--){o=RL.from(i.node(e).copy(o));let t=r&&r[a];s=RL.from(t?t.type.create(t.attrs,s):i.node(e).copy(s))}e.step(new IR(t,t,new RV(o.append(s),n,n),!0))}(this,e,t,n),this}addMark(e,t,n){var r;let i,o,s,a;return r=this,i=[],o=[],r.doc.nodesBetween(e,t,(r,l,c)=>{if(!r.isInline)return;let u=r.marks;if(!n.isInSet(u)&&c.type.allowsMarkType(n.type)){let c=Math.max(l,e),h=Math.min(l+r.nodeSize,t),d=n.addToSet(u);for(let e=0;e<u.length;e++)u[e].isInSet(d)||(s&&s.to==c&&s.mark.eq(u[e])?s.to=h:i.push(s=new Ij(c,h,u[e])));a&&a.to==c?a.to=h:o.push(a=new I_(c,h,n))}}),i.forEach(e=>r.step(e)),o.forEach(e=>r.step(e)),this}removeMark(e,t,n){var r;let i,o;return r=this,i=[],o=0,r.doc.nodesBetween(e,t,(r,s)=>{if(!r.isInline)return;o++;let a=null;if(n instanceof Ia){let e=r.marks,t;for(;t=n.isInSet(e);)(a||(a=[])).push(t),e=t.removeFromSet(e)}else n?n.isInSet(r.marks)&&(a=[n]):a=r.marks;if(a&&a.length){let n=Math.min(s+r.nodeSize,t);for(let t=0;t<a.length;t++){let r=a[t],l;for(let e=0;e<i.length;e++){let t=i[e];t.step==o-1&&r.eq(i[e].style)&&(l=t)}l?(l.to=n,l.step=o):i.push({style:r,from:Math.max(s,e),to:n,step:o})}}}),i.forEach(e=>r.step(new Ij(e.from,e.to,e.style))),this}clearIncompatible(e,t,n){return IL(this,e,t,n),this}}let I7=Object.create(null);class I8{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new I9(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=RV.empty){let n=t.content.lastChild,r=null;for(let e=0;e<t.openEnd;e++)r=n,n=n.lastChild;let i=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:a,$to:l}=o[s],c=e.mapping.slice(i);e.replaceRange(c.map(a.pos),c.map(l.pos),s?RV.empty:t),0==s&&zc(e,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){let{$from:o,$to:s}=r[i],a=e.mapping.slice(n),l=a.map(o.pos),c=a.map(s.pos);i?e.deleteRange(l,c):(e.replaceRangeWith(l,c,t),zc(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let r=e.parent.inlineContent?new zn(e):zl(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let r=e.depth-1;r>=0;r--){let i=t<0?zl(e.node(0),e.node(r),e.before(r+1),e.index(r),t,n):zl(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,n);if(i)return i}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new zs(e.node(0))}static atStart(e){return zl(e,e,0,0,1)||new zs(e)}static atEnd(e){return zl(e,e,e.content.size,e.childCount,-1)||new zs(e)}static fromJSON(e,t){if(!t||!t.type)throw RangeError("Invalid input for Selection.fromJSON");let n=I7[t.type];if(!n)throw RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in I7)throw RangeError("Duplicate use of selection JSON ID "+e);return I7[e]=t,t.prototype.jsonID=e,t}getBookmark(){return zn.between(this.$anchor,this.$head).getBookmark()}}I8.prototype.visible=!0;class I9{constructor(e,t){this.$from=e,this.$to=t}}let ze=!1;function zt(e){ze||e.parent.inlineContent||(ze=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class zn extends I8{constructor(e,t=e){zt(e),zt(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return I8.near(n);let r=e.resolve(t.map(this.anchor));return new zn(r.parent.inlineContent?r:n,n)}replace(e,t=RV.empty){if(super.replace(e,t),t==RV.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof zn&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new zr(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw RangeError("Invalid input for TextSelection.fromJSON");return new zn(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){let r=e.pos-t.pos;if((!n||r)&&(n=r>=0?1:-1),!t.parent.inlineContent){let e=I8.findFrom(t,n,!0)||I8.findFrom(t,-n,!0);if(!e)return I8.near(t,n);t=e.$head}return e.parent.inlineContent||(0==r?e=t:(e=(I8.findFrom(e,-n,!0)||I8.findFrom(e,n,!0)).$anchor).pos<t.pos!=r<0&&(e=t)),new zn(e,t)}}I8.jsonID("text",zn);class zr{constructor(e,t){this.anchor=e,this.head=t}map(e){return new zr(e.map(this.anchor),e.map(this.head))}resolve(e){return zn.between(e.resolve(this.anchor),e.resolve(this.head))}}class zi extends I8{constructor(e){let t=e.nodeAfter;super(e,e.node(0).resolve(e.pos+t.nodeSize)),this.node=t}map(e,t){let{deleted:n,pos:r}=t.mapResult(this.anchor),i=e.resolve(r);return n?I8.near(i):new zi(i)}content(){return new RV(RL.from(this.node),0,0)}eq(e){return e instanceof zi&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new zo(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw RangeError("Invalid input for NodeSelection.fromJSON");return new zi(e.resolve(t.anchor))}static create(e,t){return new zi(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}zi.prototype.visible=!1,I8.jsonID("node",zi);class zo{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new zr(n,n):new zo(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&zi.isSelectable(n)?new zi(t):I8.near(t)}}class zs extends I8{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=RV.empty){if(t==RV.empty){e.delete(0,e.doc.content.size);let t=I8.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new zs(e)}map(e){return new zs(e)}eq(e){return e instanceof zs}getBookmark(){return za}}I8.jsonID("all",zs);let za={map(){return this},resolve:e=>new zs(e)};function zl(e,t,n,r,i,o=!1){if(t.inlineContent)return zn.create(e,n);for(let s=r-(i>0?0:1);i>0?s<t.childCount:s>=0;s+=i){let r=t.child(s);if(r.isAtom){if(!o&&zi.isSelectable(r))return zi.create(e,n-(i<0?r.nodeSize:0))}else{let t=zl(e,r,n+i,i<0?r.childCount:0,i,o);if(t)return t}n+=r.nodeSize*i}return null}function zc(e,t,n){let r,i=e.steps.length-1;if(i<t)return;let o=e.steps[i];(o instanceof IR||o instanceof II)&&(e.mapping.maps[i].forEach((e,t,n,i)=>{null==r&&(r=i)}),e.setSelection(I8.near(e.doc.resolve(r),n)))}class zu extends I6{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(1|this.updated)&-3,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return RF.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||RF.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),n=n??t,!e)return this.deleteRange(t,n);let i=this.storedMarks;if(!i){let e=this.doc.resolve(t);i=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,i)),this.selection.empty||this.setSelection(I8.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function zh(e,t){return t&&e?e.bind(t):e}class zd{constructor(e,t,n){this.name=e,this.init=zh(t.init,n),this.apply=zh(t.apply,n)}}let zf=[new zd("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new zd("selection",{init:(e,t)=>e.selection||I8.atStart(t.doc),apply:e=>e.selection}),new zd("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,r)=>r.selection.$cursor?e.storedMarks:null}),new zd("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class zp{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=zf.slice(),t&&t.forEach(e=>{if(this.pluginsByKey[e.key])throw RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new zd(e.key,e.spec.state,e))})}}class zm{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),r=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let s=this.config.plugins[o];if(s.spec.appendTransaction){let a=r?r[o].n:0,l=r?r[o].state:this,c=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,l,n);if(c&&n.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(let e=0;e<this.config.plugins.length;e++)r.push(e<o?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),i=!0}r&&(r[o]={state:n,n:t.length})}}if(!i)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw RangeError("Applying a mismatched transaction");let t=new zm(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let i=n[r];t[i.name]=i.apply(e,this[i.name],this,t)}return t}get tr(){return new zu(this)}static create(e){let t=new zp(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new zm(t);for(let r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n}reconfigure(e){let t=new zp(this.schema,e.plugins),n=t.fields,r=new zm(t);for(let t=0;t<n.length;t++){let i=n[t].name;r[i]=this.hasOwnProperty(i)?this[i]:n[t].init(e,r)}return r}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(e=>e.toJSON())),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[n],i=r.spec.state;i&&i.toJSON&&(t[n]=i.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,t,n){if(!t)throw RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw RangeError("Required config field 'schema' missing");let r=new zp(e.schema,e.plugins),i=new zm(r);return r.fields.forEach(r=>{if("doc"==r.name)i.doc=R4.fromJSON(e.schema,t.doc);else if("selection"==r.name)i.selection=I8.fromJSON(i.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let o in n){let s=n[o],a=s.spec.state;if(s.key==r.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,o)){i[r.name]=a.fromJSON.call(s,e,t[o],i);return}}i[r.name]=r.init(e,i)}}),i}}class zg{constructor(e){this.spec=e,this.props={},e.props&&function e(t,n,r){for(let i in t){let o=t[i];o instanceof Function?o=o.bind(n):"handleDOMEvents"==i&&(o=e(o,n,{})),r[i]=o}return r}(e.props,this,this.props),this.key=e.key?e.key.key:zb("plugin")}getState(e){return e[this.key]}}let zy=Object.create(null);function zb(e){return e in zy?e+"$"+ ++zy[e]:(zy[e]=0,e+"$")}class zv{constructor(e="key"){this.key=zb(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}let zx=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},zw=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},zk=null,zO=function(e,t,n){let r=zk||(zk=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},zS=function(){zk=null},zC=function(e,t,n,r){return n&&(zA(e,t,n,r,-1)||zA(e,t,n,r,1))},zT=/^(img|br|input|textarea|hr)$/i;function zA(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:zE(e))){let n=e.parentNode;if(!n||1!=n.nodeType||zM(e)||zT.test(e.nodeName)||"false"==e.contentEditable)return!1;t=zx(e)+(i<0?0:1),e=n}else{if(1!=e.nodeType||"false"==(e=e.childNodes[t+(i<0?-1:0)]).contentEditable)return!1;t=i<0?zE(e):0}}}function zE(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function zM(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}let zN=function(e){return e.focusNode&&zC(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function z_(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}let zj="u">typeof navigator?navigator:null,zD="u">typeof document?document:null,zP=zj&&zj.userAgent||"",zR=/Edge\/(\d+)/.exec(zP),zI=/MSIE \d/.exec(zP),zz=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(zP),zL=!!(zI||zz||zR),zq=zI?document.documentMode:zz?+zz[1]:zR?+zR[1]:0,z$=!zL&&/gecko\/(\d+)/i.test(zP);z$&&(/Firefox\/(\d+)/.exec(zP)||[0,0])[1];let zB=!zL&&/Chrome\/(\d+)/.exec(zP),zF=!!zB,zQ=zB?+zB[1]:0,zV=!zL&&!!zj&&/Apple Computer/.test(zj.vendor),zH=zV&&(/Mobile\/\w+/.test(zP)||!!zj&&zj.maxTouchPoints>2),zU=zH||!!zj&&/Mac/.test(zj.platform),zW=!!zj&&/Win/.test(zj.platform),zG=/Android \d/.test(zP),zX=!!zD&&"webkitFontSmoothing"in zD.documentElement.style,zY=zX?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function zZ(e,t){return"number"==typeof e?e:e[t]}function zK(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument;for(let s=n||e.dom;s;s=zw(s)){if(1!=s.nodeType)continue;let e=s,n=e==o.body,a=n?function(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}(o):function(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}(e),l=0,c=0;if(t.top<a.top+zZ(r,"top")?c=-(a.top-t.top+zZ(i,"top")):t.bottom>a.bottom-zZ(r,"bottom")&&(c=t.bottom-t.top>a.bottom-a.top?t.top+zZ(i,"top")-a.top:t.bottom-a.bottom+zZ(i,"bottom")),t.left<a.left+zZ(r,"left")?l=-(a.left-t.left+zZ(i,"left")):t.right>a.right-zZ(r,"right")&&(l=t.right-a.right+zZ(i,"right")),l||c){if(n)o.defaultView.scrollBy(l,c);else{let n=e.scrollLeft,r=e.scrollTop;c&&(e.scrollTop+=c),l&&(e.scrollLeft+=l);let i=e.scrollLeft-n,o=e.scrollTop-r;t={left:t.left-i,top:t.top-o,right:t.right-i,bottom:t.bottom-o}}}if(n||/^(fixed|sticky)$/.test(getComputedStyle(s).position))break}}function zJ(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=zw(r));return t}function z0(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:o}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=o&&(r.scrollLeft=o)}}let z1=null;function z2(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function z4(e){return e.top<e.bottom||e.left<e.right}function z5(e,t){let n=e.getClientRects();if(n.length){let e=n[t<0?0:n.length-1];if(z4(e))return e}return Array.prototype.find.call(n,z4)||e.getBoundingClientRect()}let z3=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function z6(e,t,n){let{node:r,offset:i,atom:o}=e.docView.domFromPos(t,n<0?-1:1),s=zX||z$;if(3==r.nodeType){if(s&&(z3.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let e=z5(zO(r,i,i),n);if(z$&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let t=z5(zO(r,i-1,i-1),-1);if(t.top==e.top){let n=z5(zO(r,i,i+1),-1);if(n.top!=e.top)return z7(n,n.left<t.left)}}return e}{let e=i,t=i,o=n<0?1:-1;return n<0&&!i?(t++,o=-1):n>=0&&i==r.nodeValue.length?(e--,o=1):n<0?e--:t++,z7(z5(zO(r,e,t),o),o<0)}}if(!e.state.doc.resolve(t-(o||0)).parent.inlineContent){if(null==o&&i&&(n<0||i==zE(r))){let e=r.childNodes[i-1];if(1==e.nodeType)return z8(e.getBoundingClientRect(),!1)}if(null==o&&i<zE(r)){let e=r.childNodes[i];if(1==e.nodeType)return z8(e.getBoundingClientRect(),!0)}return z8(r.getBoundingClientRect(),n>=0)}if(null==o&&i&&(n<0||i==zE(r))){let e=r.childNodes[i-1],t=3==e.nodeType?zO(e,zE(e)-+!s):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return z7(z5(t,1),!1)}if(null==o&&i<zE(r)){let e=r.childNodes[i];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?zO(e,0,+!s):1==e.nodeType?e:null:null;if(t)return z7(z5(t,-1),!0)}return z7(z5(3==r.nodeType?zO(r):r,-n),n>=0)}function z7(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function z8(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function z9(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}let Le=/[\u0590-\u08ac]/,Lt=null,Ln=null,Lr=!1;class Li{constructor(e,t,n,r){this.parent=e,this.children=t,this.dom=n,this.contentDOM=r,this.dirty=0,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let r=this.children[t];if(r==e)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){let r;if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){let n,r;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&!((r=n.pmViewDesc)&&r.parent==this);)n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}{let n,r;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&!((r=n.pmViewDesc)&&r.parent==this);)n=n.nextSibling;return n?this.posBeforeChild(r):this.posAtEnd}}if(e==this.dom&&this.contentDOM)r=t>zx(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!1;break}if(t.previousSibling)break}if(null==r&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!0;break}if(t.nextSibling)break}}return r??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,r=e;r;r=r.parentNode){let i=this.getDesc(r),o;if(i&&(!t||i.node)){if(!n||!(o=i.nodeDOM)||(1==o.nodeType?o.contains(1==e.nodeType?e:e.parentNode):o==e))return i;n=!1}}}getDesc(e){let t=e.pmViewDesc;for(let e=t;e;e=e.parent)if(e==this)return t}posFromDOM(e,t,n){for(let r=e;r;r=r.parentNode){let i=this.getDesc(r);if(i)return i.localPosFromDOM(e,t,n)}return -1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let r=this.children[t],i=n+r.size;if(n==e&&i!=n){for(;!r.border&&r.children.length;)for(let e=0;e<r.children.length;e++){let t=r.children[e];if(t.size){r=t;break}}return r}if(e<i)return r.descAt(e-n-r.border);n=i}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,r=0;for(let t=0;n<this.children.length;n++){let i=this.children[n],o=t+i.size;if(o>e||i instanceof Lh){r=e-t;break}t=o}if(r)return this.children[n].domFromPos(r-this.children[n].border,t);for(let e;n&&!(e=this.children[n-1]).size&&e instanceof Lo&&e.side>=0;n--);if(t<=0){let e,r=!0;for(;!(!(e=n?this.children[n-1]:null)||e.dom.parentNode==this.contentDOM);n--,r=!1);return e&&t&&r&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?zx(e.dom)+1:0}}{let e,r=!0;for(;!(!(e=n<this.children.length?this.children[n]:null)||e.dom.parentNode==this.contentDOM);n++,r=!1);return e&&r&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?zx(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,i=-1;for(let o=n,s=0;;s++){let n=this.children[s],a=o+n.size;if(-1==r&&e<=a){let i=o+n.border;if(e>=i&&t<=a-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,i);e=o;for(let t=s;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){r=zx(n.dom)+1;break}e-=n.size}-1==r&&(r=0)}if(r>-1&&(a>t||s==this.children.length-1)){t=a;for(let e=s+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){i=zx(n.dom);break}t+=n.size}-1==i&&(i=this.contentDOM.childNodes.length);break}o=a}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,r=!1){let i=Math.min(e,t),o=Math.max(e,t);for(let s=0,a=0;s<this.children.length;s++){let l=this.children[s],c=a+l.size;if(i>a&&o<c)return l.setSelection(e-a-l.border,t-a-l.border,n,r);a=c}let s=this.domFromPos(e,e?-1:1),a=t==e?s:this.domFromPos(t,t?-1:1),l=n.root.getSelection(),c=n.domSelectionRange(),u=!1;if((z$||zV)&&e==t){let{node:e,offset:t}=s;if(3==e.nodeType){if((u=!!(t&&e.nodeValue[t-1]==`
`))&&t==e.nodeValue.length)for(let t=e,n;t;t=t.parentNode){if(n=t.nextSibling){"BR"==n.nodeName&&(s=a={node:n.parentNode,offset:zx(n)+1});break}let e=t.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];u=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(z$&&c.focusNode&&c.focusNode!=a.node&&1==c.focusNode.nodeType){let e=c.focusNode.childNodes[c.focusOffset];e&&"false"==e.contentEditable&&(r=!0)}if(!(r||u&&zV)&&zC(s.node,s.offset,c.anchorNode,c.anchorOffset)&&zC(a.node,a.offset,c.focusNode,c.focusOffset))return;let h=!1;if((l.extend||e==t)&&!u){l.collapse(s.node,s.offset);try{e!=t&&l.extend(a.node,a.offset),h=!0}catch{}}if(!h){if(e>t){let e=s;s=a,a=e}let n=document.createRange();n.setEnd(a.node,a.offset),n.setStart(s.node,s.offset),l.removeAllRanges(),l.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,r=0;r<this.children.length;r++){let i=this.children[r],o=n+i.size;if(n==o?e<=o&&t>=n:e<o&&t>n){let r=n+i.border,s=o-i.border;if(e>=r&&t<=s){this.dirty=e==n||t==o?2:1,e==r&&t==s&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=3:i.markDirty(e-r,t-r);return}i.dirty=i.dom!=i.contentDOM||i.dom.parentNode!=this.contentDOM||i.children.length?3:2}n=o}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class Lo extends Li{constructor(e,t,n,r){let i,o=t.type.toDOM;if("function"==typeof o&&(o=o(n,()=>i?i.parent?i.parent.posBeforeChild(i):void 0:r)),!t.type.spec.raw){if(1!=o.nodeType){let e=document.createElement("span");e.appendChild(o),o=e}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,i=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Ls extends Li{constructor(e,t,n,r){super(e,[],t,null),this.textDOM=n,this.text=r}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class La extends Li{constructor(e,t,n,r,i){super(e,[],n,r),this.mark=t,this.spec=i}static create(e,t,n,r){let i=r.nodeViews[t.type.name],o=i&&i(t,r,n);return o&&o.dom||(o=Iv.renderSpec(document,t.type.spec.toDOM(t,n),null,t.attrs)),new La(e,t,o.dom,o.contentDOM||o.dom,o)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,t,n){let r=La.create(this.parent,this.mark,!0,n),i=this.children,o=this.size;t<o&&(i=Lk(i,t,o,n)),e>0&&(i=Lk(i,0,e,n));for(let e=0;e<i.length;e++)i[e].parent=r;return r.children=i,r}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Ll extends Li{constructor(e,t,n,r,i,o,s,a,l){super(e,[],i,o),this.node=t,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=s}static create(e,t,n,r,i,o){let s=i.nodeViews[t.type.name],a,l=s&&s(t,i,()=>a?a.parent?a.parent.posBeforeChild(a):void 0:o,n,r),c=l&&l.dom,u=l&&l.contentDOM;if(t.isText){if(c){if(3!=c.nodeType)throw RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text)}else c||({dom:c,contentDOM:u}=Iv.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));u||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let h=c;return c=Ly(c,n,t),l?a=new Ld(e,t,n,r,c,u||null,h,l,i,o+1):t.isText?new Lu(e,t,n,r,c,h,i):new Ll(e,t,n,r,c,u||null,h,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM){if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>RL.empty)}else e.contentElement=this.contentDOM}else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return 0==this.dirty&&e.eq(this.node)&&Lb(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return+!this.node.isLeaf}updateChildren(e,t){let n=this.node.inlineContent,r=t,i=e.composing?this.localCompositionInfo(e,t):null,o=i&&i.pos>-1?i:null,s=i&&i.pos<0,a=new Lx(this,o&&o.node,e);(function(e,t,n,r){let i=t.locals(e),o=0;if(0==i.length){for(let n=0;n<e.childCount;n++){let s=e.child(n);r(s,i,t.forChild(o,s),n),o+=s.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let u,h,d,f;for(;s<i.length&&i[s].to==o;){let e=i[s++];e.widget&&(u?(h||(h=[u])).push(e):u=e)}if(u){if(h){h.sort(Lw);for(let e=0;e<h.length;e++)n(h[e],c,!!l)}else n(u,c,!!l)}if(l)f=-1,d=l,l=null;else if(c<e.childCount)f=c,d=e.child(c++);else break;for(let e=0;e<a.length;e++)a[e].to<=o&&a.splice(e--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)a.push(i[s++]);let p=o+d.nodeSize;if(d.isText){let e=p;s<i.length&&i[s].from<e&&(e=i[s].from);for(let t=0;t<a.length;t++)a[t].to<e&&(e=a[t].to);e<p&&(l=d.cut(e-o),d=d.cut(0,e-o),p=e,f=-1)}else for(;s<i.length&&i[s].to<p;)s++;let m=d.isInline&&!d.isLeaf?a.filter(e=>!e.inline):a.slice();r(d,m,t.forChild(o,d),f),o=p}})(this.node,this.innerDeco,(t,i,o)=>{t.spec.marks?a.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!o&&a.syncToMarks(i==this.node.childCount?RF.none:this.node.child(i).marks,n,e),a.placeWidget(t,e,r)},(t,o,l,c)=>{let u;a.syncToMarks(t.marks,n,e),a.findNodeMatch(t,o,l,c)||s&&e.state.selection.from>r&&e.state.selection.to<r+t.nodeSize&&(u=a.findIndexWithChild(i.node))>-1&&a.updateNodeAt(t,o,l,u,e)||a.updateNextNode(t,o,l,e,c,r)||a.addNode(t,o,l,e,r),r+=t.nodeSize}),a.syncToMarks([],n,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(o&&this.protectLocalComposition(e,o),function e(t,n,r){let i=t.firstChild,o=!1;for(let s=0;s<n.length;s++){let a=n[s],l=a.dom;if(l.parentNode==t){for(;l!=i;)i=Lv(i),o=!0;i=i.nextSibling}else o=!0,t.insertBefore(l,i);if(a instanceof La){let n=i?i.previousSibling:t.lastChild;e(a.contentDOM,a.children,r),i=n?n.nextSibling:t.firstChild}}for(;i;)i=Lv(i),o=!0;o&&r.trackWrites==t&&(r.trackWrites=null)}(this.contentDOM,this.children,e),zH&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}localCompositionInfo(e,t){let{from:n,to:r}=e.state.selection;if(!(e.state.selection instanceof zn)||n<t||r>t+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(!this.node.inlineContent)return{node:i,pos:-1,text:""};{let e=i.nodeValue,o=function(e,t,n,r){for(let i=0,o=0;i<e.childCount&&o<=r;){let s=e.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<e.childCount;){let t=e.child(i++);if(o+=t.nodeSize,!t.isText)break;l+=t.text}if(o>=n){if(o>=r&&l.slice(r-t.length-a,r-a)==t)return r-t.length;let e=a<r?l.lastIndexOf(t,r-a-1):-1;if(e>=0&&e+t.length+a>=n)return a+e;if(n==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}return -1}(this.node.content,e,n-t,r-t);return o<0?null:{node:i,pos:o,text:e}}}protectLocalComposition(e,{node:t,pos:n,text:r}){if(this.getDesc(t))return;let i=t;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new Ls(this,i,t,r);e.input.compositionNodes.push(o),this.children=Lk(this.children,n,n+r.length,e,o)}update(e,t,n,r){return!!(3!=this.dirty&&e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)}updateInner(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(Lb(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Lg(this.dom,this.nodeDOM,Lm(this.outerDeco,this.node,t),Lm(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Lc(e,t,n,r,i){Ly(r,t,e);let o=new Ll(void 0,e,t,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class Lu extends Ll{constructor(e,t,n,r,i,o,s){super(e,t,n,r,i,null,o,s,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,r){return!!(3!=this.dirty&&(0==this.dirty||this.inParent())&&e.sameMarkup(this.node))&&(this.updateOuterDeco(t),(0!=this.dirty||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let r=this.node.cut(e,t),i=document.createTextNode(r.text);return new Lu(this.parent,r,this.outerDeco,this.innerDeco,i,i,n)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(0==e||t==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Lh extends Li{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class Ld extends Ll{constructor(e,t,n,r,i,o,s,a,l,c){super(e,t,n,r,i,o,s,l,c),this.spec=a}update(e,t,n,r){if(3==this.dirty)return!1;if(!this.spec.update||this.node.type!=e.type&&!this.spec.multiType)return(!!this.contentDOM||!!e.isLeaf)&&super.update(e,t,n,r);{let i=this.spec.update(e,t,n);return i&&this.updateInner(e,t,n,r),i}}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,r){this.spec.setSelection?this.spec.setSelection(e,t,n.root):super.setSelection(e,t,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}let Lf=function(e){e&&(this.nodeName=e)};Lf.prototype=Object.create(null);let Lp=[new Lf];function Lm(e,t,n){if(0==e.length)return Lp;let r=n?Lp[0]:new Lf,i=[r];for(let o=0;o<e.length;o++){let s=e[o].type.attrs;if(s)for(let e in s.nodeName&&i.push(r=new Lf(s.nodeName)),s){let o=s[e];null!=o&&(n&&1==i.length&&i.push(r=new Lf(t.isInline?"span":"div")),"class"==e?r.class=(r.class?r.class+" ":"")+o:"style"==e?r.style=(r.style?r.style+";":"")+o:"nodeName"!=e&&(r[e]=o))}}return i}function Lg(e,t,n,r){if(n==Lp&&r==Lp)return t;let i=t;for(let t=0;t<r.length;t++){let o=r[t],s=n[t];if(t){let t;s&&s.nodeName==o.nodeName&&i!=e&&(t=i.parentNode)&&t.nodeName.toLowerCase()==o.nodeName||((t=document.createElement(o.nodeName)).pmIsDeco=!0,t.appendChild(i),s=Lp[0]),i=t}!function(e,t,n){for(let r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(let r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<r.length;t++)-1==i.indexOf(r[t])&&e.classList.remove(r[t]);for(let t=0;t<i.length;t++)-1==r.indexOf(i[t])&&e.classList.add(i[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,r;for(;r=n.exec(t.style);)e.style.removeProperty(r[1])}n.style&&(e.style.cssText+=n.style)}}(i,s||Lp[0],o)}return i}function Ly(e,t,n){return Lg(e,e,Lp,Lm(t,n,1!=e.nodeType))}function Lb(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function Lv(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class Lx{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let n=t,r=n.children.length,i=e.childCount,o=new Map,s=[];e:for(;i>0;){let a;for(;;)if(r){let e=n.children[r-1];if(e instanceof La)n=e,r=e.children.length;else{a=e,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let r=0,i=this.stack.length>>1,o=Math.min(i,e.length);for(;r<o&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<i;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let r=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let n=this.top.children[t];if(n.matchesMark(e[i])&&!this.isLocked(n.dom)){r=t;break}}if(r>-1)r>this.index&&(this.changed=!0,this.destroyBetween(this.index,r)),this.top=this.top.children[this.index];else{let r=La.create(this.top,e[i],t,n);this.top.children.splice(this.index,0,r),this.top=r,this.changed=!0}this.index=0,i++}}findNodeMatch(e,t,n,r){let i=-1,o;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,n))i=this.top.children.indexOf(o,this.index);else for(let r=this.index,o=Math.min(this.top.children.length,r+5);r<o;r++){let o=this.top.children[r];if(o.matchesNode(e,t,n)&&!this.preMatch.matched.has(o)){i=r;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,n,r,i){let o=this.top.children[r];return 3==o.dirty&&o.dom==o.contentDOM&&(o.dirty=2),!!o.update(e,t,n,i)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return -1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t){for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e}return -1}e=t}}updateNextNode(e,t,n,r,i,o){for(let s=this.index;s<this.top.children.length;s++){let a=this.top.children[s];if(a instanceof Ll){let l=this.preMatch.matched.get(a);if(null!=l&&l!=i)return!1;let c=a.dom,u,h=this.isLocked(c)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&3!=a.dirty&&Lb(t,a.outerDeco));if(!h&&a.update(e,t,n,r))return this.destroyBetween(this.index,s),a.dom!=c&&(this.changed=!0),this.index++,!0;if(!h&&(u=this.recreateWrapper(a,e,t,n,r,o)))return this.destroyBetween(this.index,s),this.top.children[this.index]=u,u.contentDOM&&(u.dirty=2,u.updateChildren(r,o+1),u.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,r,i,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Lb(n,e.outerDeco)||!r.eq(e.innerDeco))return null;let s=Ll.create(this.top,t,n,r,i,o);if(s.contentDOM)for(let t of(s.children=e.children,e.children=[],s.children))t.parent=s;return e.destroy(),s}addNode(e,t,n,r,i){let o=Ll.create(this.top,e,t,n,r,i);o.contentDOM&&o.updateChildren(r,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,n){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(r&&r.matchesWidget(e)&&(e==r.widget||!r.widget.type.toDOM.parentNode))this.index++;else{let r=new Lo(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof La;)e=(t=e).children[t.children.length-1];(!e||!(e instanceof Lu)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((zV||zF)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let r=new Lh(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function Lw(e,t){return e.type.side-t.type.side}function Lk(e,t,n,r,i){let o=[];for(let s=0,a=0;s<e.length;s++){let l=e[s],c=a,u=a+=l.size;c>=n||u<=t?o.push(l):(c<t&&o.push(l.slice(0,t-c,r)),i&&(o.push(i),i=void 0),u>n&&o.push(l.slice(n-c,l.size,r)))}return o}function LO(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),o=i&&0==i.size,s=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,c;if(zN(n)){for(l=s;i&&!i.node;)i=i.parent;let e=i.node;if(i&&e.isAtom&&zi.isSelectable(e)&&i.parent&&!(e.isInline&&function(e,t,n){for(let r=0==t,i=t==zE(e);r||i;){if(e==n)return!0;let t=zx(e);if(!(e=e.parentNode))return!1;r=r&&0==t,i=i&&t==zE(e)}}(n.focusNode,n.focusOffset,i.dom))){let e=i.posBefore;c=new zi(s==e?a:r.resolve(e))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let t=s,i=s;for(let r=0;r<n.rangeCount;r++){let o=n.getRangeAt(r);t=Math.min(t,e.docView.posFromDOM(o.startContainer,o.startOffset,1)),i=Math.max(i,e.docView.posFromDOM(o.endContainer,o.endOffset,-1))}if(t<0)return null;[l,s]=i==e.state.selection.anchor?[i,t]:[t,i],a=r.resolve(s)}else l=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let n="pointer"==t||e.state.selection.head<a.pos&&!o?1:-1;c=Lj(e,u,a,n)}return c}function LS(e){return e.editable?e.hasFocus():LP(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function LC(e,t=!1){let n=e.state.selection;if(LN(e,n),LS(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&zF){let t=e.domSelectionRange(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&zC(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection(),n=document.createRange();if(!t)return;let r=e.cursorWrapper.dom,i="IMG"==r.nodeName;i?n.setStart(r.parentNode,zx(r)+1):n.setStart(r,0),n.collapse(!0),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&zL&&zq<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{var r;let i,o,s,a,{anchor:l,head:c}=n,u,h;!LT||n instanceof zn||(n.$from.parent.inlineContent||(u=LA(e,n.from)),n.empty||n.$from.parent.inlineContent||(h=LA(e,n.to))),e.docView.setSelection(l,c,e,t),LT&&(u&&LM(u),h&&LM(h)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&((i=(r=e).dom.ownerDocument).removeEventListener("selectionchange",r.input.hideSelectionGuard),s=(o=r.domSelectionRange()).anchorNode,a=o.anchorOffset,i.addEventListener("selectionchange",r.input.hideSelectionGuard=()=>{(o.anchorNode!=s||o.anchorOffset!=a)&&(i.removeEventListener("selectionchange",r.input.hideSelectionGuard),setTimeout(()=>{(!LS(r)||r.state.selection.visible)&&r.dom.classList.remove("ProseMirror-hideselection")},20))})))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}let LT=zV||zF&&zQ<63;function LA(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(zV&&i&&"false"==i.contentEditable)return LE(i);if((!i||"false"==i.contentEditable)&&(!o||"false"==o.contentEditable)){if(i)return LE(i);if(o)return LE(o)}}function LE(e){return e.contentEditable="true",zV&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function LM(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function LN(e,t){if(t instanceof zi){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(L_(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else L_(e)}function L_(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function Lj(e,t,n,r){return e.someProp("createSelectionBetween",r=>r(e,t,n))||zn.between(t,n,r)}function LD(e){return(!e.editable||!!e.hasFocus())&&LP(e)}function LP(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function LR(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return o&&I8.findFrom(o,t)}function LI(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Lz(e,t,n){let r=e.state.selection;if(r instanceof zn){if(n.indexOf("s")>-1){let{$head:n}=r,i=n.textOffset?null:t<0?n.nodeBefore:n.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=e.state.doc.resolve(n.pos+i.nodeSize*(t<0?-1:1));return LI(e,new zn(r.$anchor,o))}if(!r.empty)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){let n=LR(e.state,t);return!!n&&n instanceof zi&&LI(e,n)}if(!(zU&&n.indexOf("m")>-1)){let n=r.$head,i=n.textOffset?null:t<0?n.nodeBefore:n.nodeAfter,o;if(!i||i.isText)return!1;let s=t<0?n.pos-i.nodeSize:n.pos;return!!(i.isAtom||(o=e.docView.descAt(s))&&!o.contentDOM)&&(zi.isSelectable(i)?LI(e,new zi(t<0?e.state.doc.resolve(n.pos-i.nodeSize):n)):!!zX&&LI(e,new zn(e.state.doc.resolve(t<0?s:s+i.nodeSize))))}}else{if(r instanceof zi&&r.node.isInline)return LI(e,new zn(t>0?r.$to:r.$from));{let n=LR(e.state,t);return!!n&&LI(e,n)}}}function LL(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Lq(e,t){let n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function L$(e,t){return t<0?function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,o,s=!1;for(z$&&1==n.nodeType&&r<LL(n)&&Lq(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(1!=n.nodeType)break;{let e=n.childNodes[r-1];if(Lq(e,-1))i=n,o=--r;else if(3==e.nodeType)r=(n=e).nodeValue.length;else break}}else{if(LB(n))break;{let t=n.previousSibling;for(;t&&Lq(t,-1);)i=n.parentNode,o=zx(t),t=t.previousSibling;if(t)r=LL(n=t);else{if((n=n.parentNode)==e.dom)break;r=0}}}s?LF(e,n,r):i&&LF(e,i,o)}(e):function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i=LL(n),o,s;for(;;)if(r<i){if(1!=n.nodeType)break;if(Lq(n.childNodes[r],1))o=n,s=++r;else break}else{if(LB(n))break;{let t=n.nextSibling;for(;t&&Lq(t,1);)o=t.parentNode,s=zx(t)+1,t=t.nextSibling;if(t)r=0,i=LL(n=t);else{if((n=n.parentNode)==e.dom)break;r=i=0}}}o&&LF(e,o,s)}(e)}function LB(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function LF(e,t,n){if(3!=t.nodeType){let e,r;(r=function(e,t){for(;e&&t==e.childNodes.length&&!zM(e);)t=zx(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}(t,n))?(t=r,n=0):(e=function(e,t){for(;e&&!t&&!zM(e);)t=zx(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=(e=n).childNodes.length}}(t,n))&&(t=e,n=e.nodeValue.length)}let r=e.domSelection();if(!r)return;if(zN(r)){let e=document.createRange();e.setEnd(t,n),e.setStart(t,n),r.removeAllRanges(),r.addRange(e)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&LC(e)},50)}function LQ(e,t){let n=e.state.doc.resolve(t);if(!(zF||zW)&&n.parent.inlineContent){let r=e.coordsAtPos(t);if(t>n.start()){let n=e.coordsAtPos(t-1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left<r.left?"ltr":"rtl"}if(t<n.end()){let n=e.coordsAtPos(t+1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left>r.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function LV(e,t,n){let r=e.state.selection;if(r instanceof zn&&!r.empty||n.indexOf("s")>-1||zU&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=LR(e.state,t);if(n&&n instanceof zi)return LI(e,n)}if(!i.parent.inlineContent){let n=t<0?i:o,s=r instanceof zs?I8.near(n,t):I8.findFrom(n,t);return!!s&&LI(e,s)}return!1}function LH(e,t){if(!(e.state.selection instanceof zn))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let o=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let r=e.state.tr;return t<0?r.delete(n.pos-o.nodeSize,n.pos):r.delete(n.pos,n.pos+o.nodeSize),e.dispatch(r),!0}return!1}function LU(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function LW(e,t){e.someProp("transformCopied",n=>{t=n(t,e)});let n=[],{content:r,openStart:i,openEnd:o}=t;for(;i>1&&o>1&&1==r.childCount&&1==r.firstChild.childCount;){i--,o--;let e=r.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),r=e.content}let s=e.someProp("clipboardSerializer")||Iv.fromSchema(e.state.schema),a=L1(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c=l.firstChild,u,h=0;for(;c&&1==c.nodeType&&(u=LJ[c.nodeName.toLowerCase()]);){for(let e=u.length-1;e>=0;e--){let t=a.createElement(u[e]);for(;l.firstChild;)t.appendChild(l.firstChild);l.appendChild(t),h++}c=l.firstChild}return c&&1==c.nodeType&&c.setAttribute("data-pm-slice",`${i} ${o}${h?` -${h}`:""} ${JSON.stringify(n)}`),{dom:l,text:e.someProp("clipboardTextSerializer",n=>n(t,e))||t.content.textBetween(0,t.content.size,`

`),slice:t}}function LG(e,t,n,r,i){let o=i.parent.type.spec.code,s,a;if(!n&&!t)return null;let l=t&&(r||o||!n);if(l){if(e.someProp("transformPastedText",n=>{t=n(t,o||r,e)}),o)return t?new RV(RL.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):RV.empty;let n=e.someProp("clipboardTextParser",n=>n(t,i,r,e));if(n)a=n;else{let n=i.marks(),{schema:r}=e.state,o=Iv.fromSchema(r);s=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(e=>{let t=s.appendChild(document.createElement("p"));e&&t.appendChild(o.serializeNode(r.text(e,n)))})}}else e.someProp("transformPastedHTML",t=>{n=t(n,e)}),s=function(e){var t;let n,r=/^(\s*<meta [^>]*>)*/.exec(e);r&&(e=e.slice(r[0].length));let i=L1().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(e),s;if((s=o&&LJ[o[1].toLowerCase()])&&(e=s.map(e=>"<"+e+">").join("")+e+s.map(e=>"</"+e+">").reverse().join("")),i.innerHTML=(t=e,(n=window.trustedTypes)?(L2||(L2=n.createPolicy("ProseMirrorClipboard",{createHTML:e=>e})),L2.createHTML(t)):t),s)for(let e=0;e<s.length;e++)i=i.querySelector(s[e])||i;return i}(n),zX&&function(e){let t=e.querySelectorAll(zF?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];1==r.childNodes.length&&"\xa0"==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let e=+u[3];e>0;e--){let e=s.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;s=e}if(a||(a=(e.someProp("clipboardParser")||e.someProp("domParser")||Iu.fromSchema(e.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||u),context:i,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||LX.test(e.parentNode.nodeName)?null:{ignore:!0}})),u)a=function(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:i,openStart:o,openEnd:s}=e;for(let e=r.length-2;e>=0;e-=2){let t=n.nodes[r[e]];if(!t||t.hasRequiredAttrs())break;i=RL.from(t.create(r[e+1],i)),o++,s++}return new RV(i,o,s)}(LK(a,+u[1],+u[2]),u[4]);else if((a=RV.maxOpen(function(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.index(n)),i,o=[];if(e.forEach(e=>{if(!o)return;let t=r.findWrapping(e.type),n;if(!t)return o=null;if(n=o.length&&i.length&&function e(t,n,r,i,o){if(o<t.length&&o<n.length&&t[o]==n[o]){let s=e(t,n,r,i.lastChild,o+1);if(s)return i.copy(i.content.replaceChild(i.childCount-1,s));if(i.contentMatchAt(i.childCount).matchType(o==t.length-1?r.type:t[o+1]))return i.copy(i.content.append(RL.from(LY(r,t,o+1))))}}(t,i,e,o[o.length-1],0))o[o.length-1]=n;else{o.length&&(o[o.length-1]=function e(t,n){if(0==n)return t;let r=t.content.replaceChild(t.childCount-1,e(t.lastChild,n-1)),i=t.contentMatchAt(t.childCount).fillBefore(RL.empty,!0);return t.copy(r.append(i))}(o[o.length-1],i.length));let n=LY(e,t);o.push(n),r=r.matchType(n.type),i=t}}),o)return RL.from(o)}return e}(a.content,i),!0)).openStart||a.openEnd){let e=0,t=0;for(let t=a.content.firstChild;e<a.openStart&&!t.type.spec.isolating;e++,t=t.firstChild);for(let e=a.content.lastChild;t<a.openEnd&&!e.type.spec.isolating;t++,e=e.lastChild);a=LK(a,e,t)}return e.someProp("transformPasted",t=>{a=t(a,e)}),a}let LX=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function LY(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,RL.from(e));return e}function LZ(e,t,n,r,i,o){let s=t<0?e.firstChild:e.lastChild,a=s.content;return e.childCount>1&&(o=0),i<r-1&&(a=LZ(a,t,n,r,i+1,o)),i>=n&&(a=t<0?s.contentMatchAt(0).fillBefore(a,o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(RL.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(a))}function LK(e,t,n){return t<e.openStart&&(e=new RV(LZ(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new RV(LZ(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}let LJ={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},L0=null;function L1(){return L0||(L0=document.implementation.createHTMLDocument("title"))}let L2=null,L4={},L5={},L3={touchstart:!0,touchmove:!0};class L6{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function L7(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function L8(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>L9(e,t))})}function L9(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)})}function qe(e){return{left:e.clientX,top:e.clientY}}function qt(e,t,n,r,i){if(-1==r)return!1;let o=e.state.doc.resolve(r);for(let r=o.depth+1;r>0;r--)if(e.someProp(t,t=>r>o.depth?t(e,n,o.nodeAfter,o.before(r),i,!0):t(e,n,o.node(r),o.before(r),i,!1)))return!0;return!1}function qn(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}L5.keydown=(e,t)=>{if(e.input.shiftKey=16==t.keyCode||t.shiftKey,!qo(e,t)&&(e.input.lastKeyCode=t.keyCode,e.input.lastKeyCodeTime=Date.now(),!(zG&&zF&&13==t.keyCode))){if(229!=t.keyCode&&e.domObserver.forceFlush(),!zH||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",n=>n(e,t))||function(e,t){let n;let r=t.keyCode,i=(n="",t.ctrlKey&&(n+="c"),t.metaKey&&(n+="m"),t.altKey&&(n+="a"),t.shiftKey&&(n+="s"),n);if(8==r||zU&&72==r&&"c"==i)return LH(e,-1)||L$(e,-1);if(46==r&&!t.shiftKey||zU&&68==r&&"c"==i)return LH(e,1)||L$(e,1);if(13==r||27==r)return!0;if(37==r||zU&&66==r&&"c"==i){let t=37==r?"ltr"==LQ(e,e.state.selection.from)?-1:1:-1;return Lz(e,t,i)||L$(e,t)}if(39==r||zU&&70==r&&"c"==i){let t=39==r?"ltr"==LQ(e,e.state.selection.from)?1:-1:1;return Lz(e,t,i)||L$(e,t)}return 38==r||zU&&80==r&&"c"==i?LV(e,-1,i)||L$(e,-1):40==r||zU&&78==r&&"c"==i?function(e){if(!zV||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;LU(e,n,"true"),setTimeout(()=>LU(e,n,"false"),20)}return!1}(e)||LV(e,1,i)||L$(e,1):i==(zU?"m":"c")&&(66==r||73==r||89==r||90==r)}(e,t)?t.preventDefault():L7(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",t=>t(e,z_(13,"Enter"))),e.input.lastIOSEnter=0)},200)}}},L5.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},L5.keypress=(e,t)=>{if(qo(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||zU&&t.metaKey)return;if(e.someProp("handleKeyPress",n=>n(e,t))){t.preventDefault();return}let n=e.state.selection;if(!(n instanceof zn)||!n.$from.sameParent(n.$to)){let r=String.fromCharCode(t.charCode);/[\r\n]/.test(r)||e.someProp("handleTextInput",t=>t(e,n.$from.pos,n.$to.pos,r))||e.dispatch(e.state.tr.insertText(r).scrollIntoView()),t.preventDefault()}};let qr=zU?"metaKey":"ctrlKey";L4.mousedown=(e,t)=>{e.input.shiftKey=t.shiftKey;let n=qc(e),r=Date.now(),i="singleClick";r-e.input.lastClick.time<500&&function(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(t,e.input.lastClick)&&!t[qr]&&("singleClick"==e.input.lastClick.type?i="doubleClick":"doubleClick"==e.input.lastClick.type&&(i="tripleClick")),e.input.lastClick={time:r,x:t.clientX,y:t.clientY,type:i};let o=e.posAtCoords(qe(t));o&&("singleClick"==i?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new qi(e,o,t,!!n)):("doubleClick"==i?function(e,t,n,r){return qt(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",n=>n(e,t,r))}:function(e,t,n,r){return qt(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",n=>n(e,t,r))||function(e,t,n){if(0!=n.button)return!1;let r=e.state.doc;if(-1==t)return!!r.inlineContent&&(qn(e,zn.create(r,0,r.content.size)),!0);let i=r.resolve(t);for(let t=i.depth+1;t>0;t--){let n=t>i.depth?i.nodeAfter:i.node(t),o=i.before(t);if(n.inlineContent)qn(e,zn.create(r,o+1,o+1+n.content.size));else{if(!zi.isSelectable(n))continue;qn(e,zi.create(r,o))}return!0}}(e,n,r)})(e,o.pos,o.inside,t)?t.preventDefault():L7(e,"pointer"))};class qi{constructor(e,t,n,r){let i,o;if(this.view=e,this.pos=t,this.event=n,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[qr],this.allowDefault=n.shiftKey,t.inside>-1)i=e.state.doc.nodeAt(t.inside),o=t.inside;else{let n=e.state.doc.resolve(t.pos);i=n.parent,o=n.depth?n.before():0}let s=r?null:n.target,a=s?e.docView.nearestDesc(s,!0):null;this.target=a&&1==a.dom.nodeType?a.dom:null;let{selection:l}=e.state;(0==n.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||l instanceof zi&&l.from<=o&&l.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&z$&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),L7(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>LC(this.view)),this.view.input.mouseDown=null}up(e){var t,n,r,i;if(this.done(),!this.view.dom.contains(e.target))return;let o=this.pos;this.view.state.doc!=this.startDoc&&(o=this.view.posAtCoords(qe(e))),this.updateAllowDefault(e),this.allowDefault||!o?L7(this.view,"pointer"):(t=this.view,n=o.pos,r=o.inside,i=this.selectNode,qt(t,"handleClickOn",n,r,e)||t.someProp("handleClick",r=>r(t,n,e))||(i?function(e,t){if(-1==t)return!1;let n=e.state.selection,r,i;n instanceof zi&&(r=n.node);let o=e.state.doc.resolve(t);for(let e=o.depth+1;e>0;e--){let t=e>o.depth?o.nodeAfter:o.node(e);if(zi.isSelectable(t)){i=r&&n.$from.depth>0&&e>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?o.before(n.$from.depth):o.before(e);break}}return null!=i&&(qn(e,zi.create(e.state.doc,i)),!0)}(t,r):function(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&zi.isSelectable(r))&&(qn(e,new zi(n)),!0)}(t,r)))?e.preventDefault():0==e.button&&(this.flushed||zV&&this.mightDrag&&!this.mightDrag.node.isAtom||zF&&!this.view.state.selection.visible&&2>=Math.min(Math.abs(o.pos-this.view.state.selection.from),Math.abs(o.pos-this.view.state.selection.to)))?(qn(this.view,I8.near(this.view.state.doc.resolve(o.pos))),e.preventDefault()):L7(this.view,"pointer")}move(e){this.updateAllowDefault(e),L7(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function qo(e,t){return!!e.composing||!!(zV&&500>Math.abs(t.timeStamp-e.input.compositionEndedAt))&&(e.input.compositionEndedAt=-2e8,!0)}L4.touchstart=e=>{e.input.lastTouch=Date.now(),qc(e),L7(e,"pointer")},L4.touchmove=e=>{e.input.lastTouch=Date.now(),L7(e,"pointer")},L4.contextmenu=e=>qc(e);let qs=zG?5e3:-1;function qa(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>qc(e),t))}function ql(e){let t;for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=((t=document.createEvent("Event")).initEvent("event",!0,!0),t.timeStamp));e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function qc(e,t=!1){if(!(zG&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),ql(e),t||e.docView&&e.docView.dirty){let n=LO(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!e.state.selection.empty?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}L5.compositionstart=L5.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof zn&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(e=>!1===e.type.spec.inclusive)))e.markCursor=e.state.storedMarks||n.marks(),qc(e,!0),e.markCursor=null;else if(qc(e,!t.selection.empty),z$&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelectionRange();for(let n=t.focusNode,r=t.focusOffset;n&&1==n.nodeType&&0!=r;){let t=r<0?n.lastChild:n.childNodes[r-1];if(!t)break;if(3==t.nodeType){let n=e.domSelection();n&&n.collapse(t,t.nodeValue.length);break}n=t,r=-1}}e.input.composing=!0}qa(e,qs)},L5.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,qa(e,20))};let qu=zL&&zq<15||zH&&zY<604;function qh(e,t,n,r,i){let o=LG(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",t=>t(e,i,o||RV.empty)))return!0;if(!o)return!1;let s=0==o.openStart&&0==o.openEnd&&1==o.content.childCount?o.content.firstChild:null,a=s?e.state.tr.replaceSelectionWith(s,r):e.state.tr.replaceSelection(o);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function qd(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}L4.copy=L5.cut=(e,t)=>{let n=e.state.selection,r="cut"==t.type;if(n.empty)return;let i=qu?null:t.clipboardData,{dom:o,text:s}=LW(e,n.content());i?(t.preventDefault(),i.clearData(),i.setData("text/html",o.innerHTML),i.setData("text/plain",s)):function(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}(e,o),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},L5.paste=(e,t)=>{if(e.composing&&!zG)return;let n=qu?null:t.clipboardData,r=e.input.shiftKey&&45!=e.input.lastKeyCode;n&&qh(e,qd(n),n.getData("text/html"),r,t)?t.preventDefault():function(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?qh(e,r.value,null,i,t):qh(e,r.textContent,r.innerHTML,i,t)},50)}(e,t)};class qf{constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}let qp=zU?"altKey":"ctrlKey";for(let e in L4.dragstart=(e,t)=>{let n=e.input.mouseDown;if(n&&n.done(),!t.dataTransfer)return;let r=e.state.selection,i=r.empty?null:e.posAtCoords(qe(t)),o;if(!(i&&i.pos>=r.from&&i.pos<=(r instanceof zi?r.to-1:r.to))){if(n&&n.mightDrag)o=zi.create(e.state.doc,n.mightDrag.pos);else if(t.target&&1==t.target.nodeType){let n=e.docView.nearestDesc(t.target,!0);n&&n.node.type.spec.draggable&&n!=e.docView&&(o=zi.create(e.state.doc,n.posBefore))}}let s=(o||e.state.selection).content(),{dom:a,text:l,slice:c}=LW(e,s);t.dataTransfer.files.length&&zF&&!(zQ>120)||t.dataTransfer.clearData(),t.dataTransfer.setData(qu?"Text":"text/html",a.innerHTML),t.dataTransfer.effectAllowed="copyMove",qu||t.dataTransfer.setData("text/plain",l),e.dragging=new qf(c,!t[qp],o)},L4.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)},L5.dragover=L5.dragenter=(e,t)=>t.preventDefault(),L5.drop=(e,t)=>{let n=e.dragging;if(e.dragging=null,!t.dataTransfer)return;let r=e.posAtCoords(qe(t));if(!r)return;let i=e.state.doc.resolve(r.pos),o=n&&n.slice;o?e.someProp("transformPasted",t=>{o=t(o,e)}):o=LG(e,qd(t.dataTransfer),qu?null:t.dataTransfer.getData("text/html"),!1,i);let s=!!(n&&!t[qp]);if(e.someProp("handleDrop",n=>n(e,t,o||RV.empty,s))){t.preventDefault();return}if(!o)return;t.preventDefault();let a=o?IG(e.state.doc,i.pos,o):i.pos;null==a&&(a=i.pos);let l=e.state.tr;if(s){let{node:e}=n;e?e.replace(l):l.deleteSelection()}let c=l.mapping.map(a),u=0==o.openStart&&0==o.openEnd&&1==o.content.childCount,h=l.doc;if(u?l.replaceRangeWith(c,c,o.content.firstChild):l.replaceRange(c,c,o),l.doc.eq(h))return;let d=l.doc.resolve(c);if(u&&zi.isSelectable(o.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(o.content.firstChild))l.setSelection(new zi(d));else{let t=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((e,n,r,i)=>t=i),l.setSelection(Lj(e,d,l.doc.resolve(t)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))},L4.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&LC(e)},20))},L4.blur=(e,t)=>{e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),t.relatedTarget&&e.dom.contains(t.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},L4.beforeinput=(e,t)=>{if(zF&&zG&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=t||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",t=>t(e,z_(8,"Backspace")))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())},50)}},L5)L4[e]=L5[e];function qm(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class qg{constructor(e,t){this.toDOM=e,this.spec=t||qw,this.side=this.spec.side||0}map(e,t,n,r){let{pos:i,deleted:o}=e.mapResult(t.from+r,this.side<0?-1:1);return o?null:new qv(i-n,i-n,this)}valid(){return!0}eq(e){return this==e||e instanceof qg&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&qm(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class qy{constructor(e,t){this.attrs=e,this.spec=t||qw}map(e,t,n,r){let i=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,o=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new qv(i,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof qy&&qm(this.attrs,e.attrs)&&qm(this.spec,e.spec)}static is(e){return e.type instanceof qy}destroy(){}}class qb{constructor(e,t){this.attrs=e,this.spec=t||qw}map(e,t,n,r){let i=e.mapResult(t.from+r,1);if(i.deleted)return null;let o=e.mapResult(t.to+r,-1);return o.deleted||o.pos<=i.pos?null:new qv(i.pos-n,o.pos-n,this)}valid(e,t){let{index:n,offset:r}=e.content.findIndex(t.from),i;return r==t.from&&!(i=e.child(n)).isText&&r+i.nodeSize==t.to}eq(e){return this==e||e instanceof qb&&qm(this.attrs,e.attrs)&&qm(this.spec,e.spec)}destroy(){}}class qv{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new qv(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new qv(e,e,new qg(t,n))}static inline(e,t,n,r){return new qv(e,t,new qy(n,r))}static node(e,t,n,r){return new qv(e,t,new qb(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof qy}get widget(){return this.type instanceof qg}}let qx=[],qw={};class qk{constructor(e,t){this.local=e.length?e:qx,this.children=t.length?t:qx}static create(e,t){return t.length?qE(t,e,0,qw):qO}find(e,t,n){let r=[];return this.findInner(e??0,t??1e9,r,0,n),r}findInner(e,t,n,r,i){for(let o=0;o<this.local.length;o++){let s=this.local[o];s.from<=t&&s.to>=e&&(!i||i(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let s=this.children[o]+1;this.children[o+2].findInner(e-s,t-s,n,r+s,i)}}map(e,t,n){return this==qO||0==e.maps.length?this:this.mapInner(e,t,0,0,n||qw)}mapInner(e,t,n,r,i){let o;for(let s=0;s<this.local.length;s++){let a=this.local[s].map(e,n,r);a&&a.type.valid(t,a)?(o||(o=[])).push(a):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,r,i,o,s){let a=e.slice();for(let e=0,t=o;e<n.maps.length;e++){let r=0;n.maps[e].forEach((e,n,i,o)=>{let s=o-i-(n-e);for(let i=0;i<a.length;i+=3){let o=a[i+1];if(o<0||e>o+t-r)continue;let l=a[i]+t-r;n>=l?a[i+1]=e<=l?-2:-1:e>=t&&s&&(a[i]+=s,a[i+1]+=s)}r+=s}),t=n.maps[e].map(t,-1)}let l=!1;for(let t=0;t<a.length;t+=3)if(a[t+1]<0){if(-2==a[t+1]){l=!0,a[t+1]=-1;continue}let c=n.map(e[t]+o),u=c-i;if(u<0||u>=r.content.size){l=!0;continue}let h=n.map(e[t+1]+o,-1)-i,{index:d,offset:f}=r.content.findIndex(u),p=r.maybeChild(d);if(p&&f==u&&f+p.nodeSize==h){let r=a[t+2].mapInner(n,p,c+1,e[t]+o+1,s);r!=qO?(a[t]=u,a[t+1]=h,a[t+2]=r):(a[t+1]=-2,l=!0)}else l=!0}if(l){let l=qE(function(e,t,n,r,i,o,s){for(let a=0;a<e.length;a+=3)-1==e[a+1]&&function e(t,o){for(let e=0;e<t.local.length;e++){let a=t.local[e].map(r,i,o);a?n.push(a):s.onRemove&&s.onRemove(t.local[e].spec)}for(let n=0;n<t.children.length;n+=3)e(t.children[n+2],t.children[n]+o+1)}(e[a+2],t[a]+o+1);return n}(a,e,t,n,i,o,s),r,0,s);t=l.local;for(let e=0;e<a.length;e+=3)a[e+1]<0&&(a.splice(e,3),e-=3);for(let e=0,t=0;e<l.children.length;e+=3){let n=l.children[e];for(;t<a.length&&a[t]<n;)t+=3;a.splice(t,0,l.children[e],l.children[e+1],l.children[e+2])}}return new qk(t.sort(qM),a)}(this.children,o||[],e,t,n,r,i):o?new qk(o.sort(qM),qx):qO}add(e,t){return t.length?this==qO?qk.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let r,i=0;e.forEach((e,o)=>{let s=o+n,a;if(a=qT(t,e,s)){for(r||(r=this.children.slice());i<r.length&&r[i]<o;)i+=3;r[i]==o?r[i+2]=r[i+2].addInner(e,a,s+1):r.splice(i,0,o,o+e.nodeSize,qE(a,e,s+1,qw)),i+=3}});let o=qC(i?qA(t):t,-n);for(let t=0;t<o.length;t++)o[t].type.valid(e,o[t])||o.splice(t--,1);return new qk(o.length?this.local.concat(o).sort(qM):this.local,r||this.children)}remove(e){return 0==e.length||this==qO?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,r=this.local;for(let r=0;r<n.length;r+=3){let i,o=n[r]+t,s=n[r+1]+t;for(let t=0,n;t<e.length;t++)(n=e[t])&&n.from>o&&n.to<s&&(e[t]=null,(i||(i=[])).push(n));if(!i)continue;n==this.children&&(n=this.children.slice());let a=n[r+2].removeInner(i,o+1);a!=qO?n[r+2]=a:(n.splice(r,3),r-=3)}if(r.length){for(let n=0,i;n<e.length;n++)if(i=e[n])for(let e=0;e<r.length;e++)r[e].eq(i,t)&&(r==this.local&&(r=this.local.slice()),r.splice(e--,1))}return n==this.children&&r==this.local?this:r.length||n.length?new qk(r,n):qO}forChild(e,t){let n,r;if(this==qO)return this;if(t.isLeaf)return qk.empty;for(let t=0;t<this.children.length;t+=3)if(this.children[t]>=e){this.children[t]==e&&(n=this.children[t+2]);break}let i=e+1,o=i+t.content.size;for(let e=0;e<this.local.length;e++){let t=this.local[e];if(t.from<o&&t.to>i&&t.type instanceof qy){let e=Math.max(i,t.from)-i,n=Math.min(o,t.to)-i;e<n&&(r||(r=[])).push(t.copy(e,n))}}if(r){let e=new qk(r.sort(qM),qx);return n?new qS([e,n]):e}return n||qO}eq(e){if(this==e)return!0;if(!(e instanceof qk)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return qN(this.localsInner(e))}localsInner(e){if(this==qO)return qx;if(e.inlineContent||!this.local.some(qy.is))return this.local;let t=[];for(let e=0;e<this.local.length;e++)this.local[e].type instanceof qy||t.push(this.local[e]);return t}forEachSet(e){e(this)}}qk.empty=new qk([],[]),qk.removeOverlap=qN;let qO=qk.empty;class qS{constructor(e){this.members=e}map(e,t){let n=this.members.map(n=>n.map(e,t,qw));return qS.from(n)}forChild(e,t){if(t.isLeaf)return qk.empty;let n=[];for(let r=0;r<this.members.length;r++){let i=this.members[r].forChild(e,t);i!=qO&&(i instanceof qS?n=n.concat(i.members):n.push(i))}return qS.from(n)}eq(e){if(!(e instanceof qS)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let r=0;r<this.members.length;r++){let i=this.members[r].localsInner(e);if(i.length){if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<i.length;e++)t.push(i[e])}else t=i}}return t?qN(n?t:t.sort(qM)):qx}static from(e){switch(e.length){case 0:return qO;case 1:return e[0];default:return new qS(e.every(e=>e instanceof qk)?e:e.reduce((e,t)=>e.concat(t instanceof qk?t:t.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function qC(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new qv(i.from+t,i.to+t,i.type))}return n}function qT(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let t=0,o;t<e.length;t++)(o=e[t])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),e[t]=null);return i}function qA(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function qE(e,t,n,r){let i=[],o=!1;t.forEach((t,s)=>{let a=qT(e,t,s+n);if(a){o=!0;let e=qE(a,t,n+s+1,r);e!=qO&&i.push(s,s+t.nodeSize,e)}});let s=qC(o?qA(e):e,-n).sort(qM);for(let e=0;e<s.length;e++)s[e].type.valid(t,s[e])||(r.onRemove&&r.onRemove(s[e].spec),s.splice(e--,1));return s.length||i.length?new qk(s,i):qO}function qM(e,t){return e.from-t.from||e.to-t.to}function qN(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let o=t[i];if(o.from==r.from){o.to!=r.to&&(t==e&&(t=e.slice()),t[i]=o.copy(o.from,r.to),q_(t,i+1,o.copy(r.to,o.to)));continue}o.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,o.from),q_(t,i,r.copy(o.from,r.to)));break}}return t}function q_(e,t,n){for(;t<e.length&&qM(n,e[t])>0;)t++;e.splice(t,0,n)}function qj(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=qO&&t.push(r)}),e.cursorWrapper&&t.push(qk.create(e.state.doc,[e.cursorWrapper.deco])),qS.from(t)}let qD={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},qP=zL&&zq<=11;class qR{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class qI{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new qR,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);zL&&zq<=11&&e.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),qP&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,qD)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(LD(this.view)){if(this.suppressingSelectionUpdates)return LC(this.view);if(zL&&zq<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&zC(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,n;for(let n=e.focusNode;n;n=zw(n))t.add(n);for(let r=e.anchorNode;r;r=zw(r))if(t.has(r)){n=r;break}let r=n&&this.view.docView.nearestDesc(n);if(r&&r.ignoreMutation({type:"selection",target:3==n.nodeType?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){var e;let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&LD(t)&&!this.ignoreSelectionChange(r),o=-1,s=-1,a=!1,l=[];if(t.editable)for(let e=0;e<n.length;e++){let t=this.registerMutation(n[e],l);t&&(o=o<0?t.from:Math.min(t.from,o),s=s<0?t.to:Math.max(t.to,s),t.typeOver&&(a=!0))}if(z$&&l.length){let e=l.filter(e=>"BR"==e.nodeName);if(2==e.length){let[t,n]=e;t.parentNode&&t.parentNode.parentNode==n.parentNode?n.remove():t.remove()}else{let{focusNode:n}=this.currentSelection;for(let r of e){let e=r.parentNode;e&&"LI"==e.nodeName&&(!n||function(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let t=e.docView.nearestDesc(n,!0);if(t&&t.node.isBlock)return n}return null}(t,n)!=e)&&r.remove()}}}let c=null;o<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&zN(r)&&(c=LO(t))&&c.eq(I8.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,LC(t),this.currentSelection.set(r)):(o>-1||i)&&(o>-1&&(t.docView.markDirty(o,s),e=t,qz.has(e)||(qz.set(e,null),-1===["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace))||(e.requiresGeckoHackNode=z$,qL||(console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),qL=!0))),this.handleDOMChange(o,s,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||LC(t),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if("childList"!=e.type)return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue});{for(let n=0;n<e.addedNodes.length;n++){let r=e.addedNodes[n];t.push(r),3==r.nodeType&&(this.lastChangedTextNode=r)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let r=e.previousSibling,i=e.nextSibling;if(zL&&zq<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:o}=e.addedNodes[t];(!n||0>Array.prototype.indexOf.call(e.addedNodes,n))&&(r=n),(!o||0>Array.prototype.indexOf.call(e.addedNodes,o))&&(i=o)}let o=r&&r.parentNode==e.target?zx(r)+1:0,s=n.localPosFromDOM(e.target,o,-1),a=i&&i.parentNode==e.target?zx(i):e.target.childNodes.length;return{from:s,to:n.localPosFromDOM(e.target,a,1)}}}}let qz=new WeakMap,qL=!1;function qq(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,o=t.endOffset,s=e.domAtPos(e.state.selection.anchor);return zC(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function q$(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(zV&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||zV&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}let qB=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function qF(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:Lj(e,t.resolve(n.anchor),t.resolve(n.head))}function qQ(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let t=e.node(r).maybeChild(e.indexAfter(r));for(;t&&!t.isLeaf;)t=t.firstChild,i++}return i}function qV(e){if(2!=e.length)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class qH{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new L6,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(qY),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=qG(this),qW(this),this.nodeViews=qX(this),this.docView=Lc(this.state.doc,qU(this),qj(this),this.dom,this),this.domObserver=new qI(this,(e,t,n,r)=>(function(e,t,n,r,i){let o=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=LO(e,t);if(n&&!e.state.selection.eq(n)){if(zF&&zG&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",t=>t(e,z_(13,"Enter"))))return;let r=e.state.tr.setSelection(n);"pointer"==t?r.setMeta("pointer",!0):"key"==t&&r.scrollIntoView(),o&&r.setMeta("composition",o),e.dispatch(r)}return}let s=e.state.doc.resolve(t),a=s.sharedDepth(n);t=s.before(a+1),n=e.state.doc.resolve(n).after(a+1);let l=e.state.selection,c=function(e,t,n){let{node:r,fromOffset:i,toOffset:o,from:s,to:a}=e.docView.parseRange(t,n),l=e.domSelectionRange(),c,u=l.anchorNode;if(u&&e.dom.contains(1==u.nodeType?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],zN(l)||c.push({node:l.focusNode,offset:l.focusOffset})),zF&&8===e.input.lastKeyCode)for(let e=o;e>i;e--){let t=r.childNodes[e-1],n=t.pmViewDesc;if("BR"==t.nodeName&&!n){o=e;break}if(!n||n.size)break}let h=e.state.doc,d=e.someProp("domParser")||Iu.fromSchema(e.state.schema),f=h.resolve(s),p=null,m=d.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:i,to:o,preserveWhitespace:"pre"!=f.parent.type.whitespace||"full",findPositions:c,ruleFromNode:q$,context:f});if(c&&null!=c[0].pos){let e=c[0].pos,t=c[1]&&c[1].pos;null==t&&(t=e),p={anchor:e+s,head:t+s}}return{doc:m,sel:p,from:s,to:a}}(e,t,n),u=e.state.doc,h=u.slice(c.from,c.to),d,f;8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(d=e.state.selection.to,f="end"):(d=e.state.selection.from,f="start"),e.input.lastKeyCode=null;let p=function(e,t,n,r,i){let o=e.findDiffStart(t,n);if(null==o)return null;let{a:s,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if("end"==i){let e=Math.max(0,o-Math.min(s,a));r-=s+e-o}if(s<o&&e.size<t.size){let e=r<=o&&r>=s?o-r:0;(o-=e)&&o<t.size&&qV(t.textBetween(o-1,o+1))&&(o+=e?1:-1),a=o+(a-s),s=o}else if(a<o){let t=r<=o&&r>=a?o-r:0;(o-=t)&&o<e.size&&qV(e.textBetween(o-1,o+1))&&(o+=t?1:-1),s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}(h.content,c.doc.content,c.from,d,f);if(p&&e.input.domChangeCount++,(zH&&e.input.lastIOSEnter>Date.now()-225||zG)&&i.some(e=>1==e.nodeType&&!qB.test(e.nodeName))&&(!p||p.endA>=p.endB)&&e.someProp("handleKeyDown",t=>t(e,z_(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!p){if(r&&l instanceof zn&&!l.empty&&l.$head.sameParent(l.$anchor)&&!e.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let t=qF(e,e.state.doc,c.sel);if(t&&!t.eq(e.state.selection)){let n=e.state.tr.setSelection(t);o&&n.setMeta("composition",o),e.dispatch(n)}}return}}e.state.selection.from<e.state.selection.to&&p.start==p.endB&&e.state.selection instanceof zn&&(p.start>e.state.selection.from&&p.start<=e.state.selection.from+2&&e.state.selection.from>=c.from?p.start=e.state.selection.from:p.endA<e.state.selection.to&&p.endA>=e.state.selection.to-2&&e.state.selection.to<=c.to&&(p.endB+=e.state.selection.to-p.endA,p.endA=e.state.selection.to)),zL&&zq<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&" \xa0"==c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)&&(p.start--,p.endA--,p.endB--);let m=c.doc.resolveNoCache(p.start-c.from),g=c.doc.resolveNoCache(p.endB-c.from),y=u.resolve(p.start),b=m.sameParent(g)&&m.parent.inlineContent&&y.end()>=p.endA,v;if((zH&&e.input.lastIOSEnter>Date.now()-225&&(!b||i.some(e=>"DIV"==e.nodeName||"P"==e.nodeName))||!b&&m.pos<c.doc.content.size&&!m.sameParent(g)&&(v=I8.findFrom(c.doc.resolve(m.pos+1),1,!0))&&v.head==g.pos)&&e.someProp("handleKeyDown",t=>t(e,z_(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>p.start&&function(e,t,n,r,i){if(n-t<=i.pos-r.pos||qQ(r,!0,!1)<i.pos)return!1;let o=e.resolve(t);if(!r.parent.isTextblock){let e=o.nodeAfter;return null!=e&&n==t+e.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=e.resolve(qQ(o,!0,!0));return!(!s.parent.isTextblock||s.pos>n||qQ(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(u,p.start,p.endA,m,g)&&e.someProp("handleKeyDown",t=>t(e,z_(8,"Backspace")))){zG&&zF&&e.domObserver.suppressSelectionUpdates();return}zF&&p.endB==p.start&&(e.input.lastChromeDelete=Date.now()),zG&&!b&&m.start()!=g.start()&&0==g.parentOffset&&m.depth==g.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,g=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{e.someProp("handleKeyDown",function(t){return t(e,z_(13,"Enter"))})},20));let x=p.start,w=p.endA,k,O,S;if(b){if(m.pos==g.pos)zL&&zq<=11&&0==m.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>LC(e),20)),k=e.state.tr.delete(x,w),O=u.resolve(p.start).marksAcross(u.resolve(p.endA));else if(p.endA==p.endB&&(S=function(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,o=r,s,a,l;for(let e=0;e<r.length;e++)i=r[e].removeFromSet(i);for(let e=0;e<n.length;e++)o=n[e].removeFromSet(o);if(1==i.length&&0==o.length)a=i[0],s="add",l=e=>e.mark(a.addToSet(e.marks));else{if(0!=i.length||1!=o.length)return null;a=o[0],s="remove",l=e=>e.mark(a.removeFromSet(e.marks))}let c=[];for(let e=0;e<t.childCount;e++)c.push(l(t.child(e)));if(RL.from(c).eq(e))return{mark:a,type:s}}(m.parent.content.cut(m.parentOffset,g.parentOffset),y.parent.content.cut(y.parentOffset,p.endA-y.start()))))k=e.state.tr,"add"==S.type?k.addMark(x,w,S.mark):k.removeMark(x,w,S.mark);else if(m.parent.child(m.index()).isText&&m.index()==g.index()-+!g.textOffset){let t=m.parent.textBetween(m.parentOffset,g.parentOffset);if(e.someProp("handleTextInput",n=>n(e,x,w,t)))return;k=e.state.tr.insertText(t,x,w)}}if(k||(k=e.state.tr.replace(x,w,c.doc.slice(p.start-c.from,p.endB-c.from))),c.sel){let t=qF(e,k.doc,c.sel);t&&!(zF&&e.composing&&t.empty&&(p.start!=p.endB||e.input.lastChromeDelete<Date.now()-100)&&(t.head==x||t.head==k.mapping.map(w)-1)||zL&&t.empty&&t.head==x)&&k.setSelection(t)}O&&k.ensureMarks(O),o&&k.setMeta("composition",o),e.dispatch(k.scrollIntoView())})(this,e,t,n,r)),this.domObserver.start(),function(e){for(let t in L4){let n=L4[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||L9(e,t)||!e.editable&&t.type in L5||n(e,t)},L3[t]?{passive:!0}:void 0)}zV&&e.dom.addEventListener("input",()=>null),L8(e)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;for(let t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&L8(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(qY),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let e in this._props)t[e]=this._props[e];for(let n in t.state=this.state,e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var n,r,i;let o=this.state,s=!1,a=!1;e.storedMarks&&this.composing&&(ql(this),a=!0),this.state=e;let l=o.plugins!=e.plugins||this._props.plugins!=t.plugins;if(l||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=qX(this);(function(e,t){let n=0,r=0;for(let r in e){if(e[r]!=t[r])return!0;n++}for(let e in t)r++;return n!=r})(e,this.nodeViews)&&(this.nodeViews=e,s=!0)}(l||t.handleDOMEvents!=this._props.handleDOMEvents)&&L8(this),this.editable=qG(this),qW(this);let c=qj(this),u=qU(this),h=o.plugins==e.plugins||o.doc.eq(e.doc)?e.scrollToSelection>o.scrollToSelection?"to selection":"preserve":"reset",d=s||!this.docView.matchesNode(e.doc,u,c);(d||!e.selection.eq(o.selection))&&(a=!0);let f="preserve"==h&&a&&null==this.dom.style.overflowAnchor&&function(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,i;for(let o=(t.left+t.right)/2,s=n+1;s<Math.min(innerHeight,t.bottom);s+=5){let t=e.root.elementFromPoint(o,s);if(!t||t==e.dom||!e.dom.contains(t))continue;let a=t.getBoundingClientRect();if(a.top>=n-20){r=t,i=a.top;break}}return{refDOM:r,refTop:i,stack:zJ(e.dom)}}(this);if(a){let t,n,a;this.domObserver.stop();let l=d&&(zL||zF)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&(r=o.selection,i=e.selection,a=Math.min(r.$anchor.sharedDepth(r.head),i.$anchor.sharedDepth(i.head)),r.$anchor.start(a)!=i.$anchor.start(a));if(d){let t=zF?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=function(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=function(e,t){for(;;){if(3==e.nodeType&&t)return e;if(1==e.nodeType&&t>0){if("false"==e.contentEditable)return null;t=zE(e=e.childNodes[t-1])}else{if(!e.parentNode||zM(e))return null;t=zx(e),e=e.parentNode}}}(t.focusNode,t.focusOffset),r=function(e,t){for(;;){if(3==e.nodeType&&t<e.nodeValue.length)return e;if(1==e.nodeType&&t<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[t],t=0}else{if(!e.parentNode||zM(e))return null;t=zx(e)+1,e=e.parentNode}}}(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let t=r.pmViewDesc,i=e.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!t||!t.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let e=n.pmViewDesc;if(!(!e||!e.isText(n.nodeValue)))return r}}return n||r}(this)),(s||!this.docView.update(e.doc,u,c,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=Lc(e.doc,u,c,this.dom,this)),t&&!this.trackWrites&&(l=!0)}l||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&(t=this.docView.domFromPos(this.state.selection.anchor,0),n=this.domSelectionRange(),zC(t.node,t.offset,n.anchorNode,n.anchorOffset)))?LC(this,l):(LN(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),null!==(n=this.dragging)&&void 0!==n&&n.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),"reset"==h?this.dom.scrollTop=0:"to selection"==h?this.scrollToSelection():f&&function({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;z0(n,0==r?0:r-t)}(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(1==e.nodeType?e:e.parentNode))&&!this.someProp("handleScrollToSelection",e=>e(this))){if(this.state.selection instanceof zi){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&zK(this,t.getBoundingClientRect(),e)}else zK(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}updateDraggedNode(e,t){let n=e.node,r=-1;if(this.state.doc.nodeAt(n.from)==n.node)r=n.from;else{let e=n.from+(this.state.doc.content.size-t.doc.content.size);(e>0&&this.state.doc.nodeAt(e))==n.node&&(r=e)}this.dragging=new qf(e.slice,e.move,r<0?void 0:zi.create(this.state.doc,r))}someProp(e,t){let n=this._props&&this._props[e],r;if(null!=n&&(r=t?t(n):n))return r;for(let n=0;n<this.directPlugins.length;n++){let i=this.directPlugins[n].props[e];if(null!=i&&(r=t?t(i):i))return r}let i=this.state.plugins;if(i)for(let n=0;n<i.length;n++){let o=i[n].props[e];if(null!=o&&(r=t?t(o):o))return r}}hasFocus(){if(zL){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(z1)return e.focus(z1);let t=zJ(e);e.focus(null==z1?{get preventScroll(){return z1={preventScroll:!0},!0}}:void 0),z1||(z1=!1,z0(t,0))}(this.dom),LC(this),this.domObserver.start()}get root(){let e=this._root;if(null==e){for(let e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e}return e||document}updateRoot(){this._root=null}posAtCoords(e){return function(e,t){var n;let r,i=e.dom.ownerDocument,o,s=0,a=function(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(zE(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(zE(r.startContainer),r.startOffset)}}}(i,t.left,t.top);a&&({node:o,offset:s}=a);let l=(e.root.elementFromPoint?e.root:i).elementFromPoint(t.left,t.top),c;if(!l||!e.dom.contains(1!=l.nodeType?l.parentNode:l)){let n=e.dom.getBoundingClientRect();if(!z2(t,n)||!(l=function e(t,n,r){let i=t.childNodes.length;if(i&&r.top<r.bottom)for(let o=Math.max(0,Math.min(i-1,Math.floor(i*(n.top-r.top)/(r.bottom-r.top))-2)),s=o;;){let r=t.childNodes[s];if(1==r.nodeType){let t=r.getClientRects();for(let i=0;i<t.length;i++){let o=t[i];if(z2(n,o))return e(r,n,o)}}if((s=(s+1)%i)==o)break}return t}(e.dom,t,n)))return null}if(zV)for(let e=l;o&&e;e=zw(e))e.draggable&&(o=void 0);if(l=(r=(n=l).parentNode)&&/^li$/i.test(r.nodeName)&&t.left<n.getBoundingClientRect().left?r:n,o){let n;if(z$&&1==o.nodeType&&(s=Math.min(s,o.childNodes.length))<o.childNodes.length){let e=o.childNodes[s],n;"IMG"==e.nodeName&&(n=e.getBoundingClientRect()).right<=t.left&&n.bottom>t.top&&s++}zX&&s&&1==o.nodeType&&1==(n=o.childNodes[s-1]).nodeType&&"false"==n.contentEditable&&n.getBoundingClientRect().top>=t.top&&s--,o==e.dom&&s==o.childNodes.length-1&&1==o.lastChild.nodeType&&t.top>o.lastChild.getBoundingClientRect().bottom?c=e.state.doc.content.size:(0==s||1!=o.nodeType||"BR"!=o.childNodes[s-1].nodeName)&&(c=function(e,t,n,r){let i=-1;for(let n=t,o=!1;n!=e.dom;){let t=e.docView.nearestDesc(n,!0),s;if(!t)return null;if(1==t.dom.nodeType&&(t.node.isBlock&&t.parent||!t.contentDOM)&&((s=t.dom.getBoundingClientRect()).width||s.height)&&(t.node.isBlock&&t.parent&&(!o&&s.left>r.left||s.top>r.top?i=t.posBefore:(!o&&s.right<r.left||s.bottom<r.top)&&(i=t.posAfter),o=!0),!t.contentDOM&&i<0&&!t.node.isText))return(t.node.isBlock?r.top<(s.top+s.bottom)/2:r.left<(s.left+s.right)/2)?t.posBefore:t.posAfter;n=t.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}(e,o,s,t))}null==c&&(c=function(e,t,n){let{node:r,offset:i}=function e(t,n){let r,i=2e8,o,s=0,a=n.top,l=n.top,c,u;for(let e=t.firstChild,h=0;e;e=e.nextSibling,h++){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=zO(e).getClientRects()}for(let d=0;d<t.length;d++){let f=t[d];if(f.top<=a&&f.bottom>=l){a=Math.max(f.bottom,a),l=Math.min(f.top,l);let t=f.left>n.left?f.left-n.left:f.right<n.left?n.left-f.right:0;if(t<i){r=e,i=t,o=t&&3==r.nodeType?{left:f.right<n.left?f.right:f.left,top:n.top}:n,1==e.nodeType&&t&&(s=h+ +(n.left>=(f.left+f.right)/2));continue}}else f.top>n.top&&!c&&f.left<=n.left&&f.right>=n.left&&(c=e,u={left:Math.max(f.left,Math.min(f.right,n.left)),top:f.top});!r&&(n.left>=f.right&&n.top>=f.top||n.left>=f.left&&n.top>=f.bottom)&&(s=h+1)}}return!r&&c&&(r=c,o=u,i=0),r&&3==r.nodeType?function(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let n=z5(r,1);if(n.top!=n.bottom&&z2(t,n))return{node:e,offset:i+ +(t.left>=(n.left+n.right)/2)}}return{node:e,offset:0}}(r,o):!r||i&&1==r.nodeType?{node:t,offset:s}:e(r,o)}(t,n),o=-1;if(1==r.nodeType&&!r.firstChild){let e=r.getBoundingClientRect();o=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(r,i,o)}(e,l,t));let u=e.docView.nearestDesc(l,!0);return{pos:c,inside:u?u.posAtStart-u.border:-1}}(this,e)}coordsAtPos(e,t=1){return z6(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,n=-1){let r=this.docView.posFromDOM(e,t,n);if(null==r)throw RangeError("DOM position not inside the editor");return r}endOfTextblock(e,t){var n,r;let i,o;return n=t||this.state,Lt==n&&Ln==e?Lr:(Lt=n,Ln=e,Lr="up"==e||"down"==e?(r=this,i=n.selection,o="up"==e?i.$from:i.$to,z9(r,n,()=>{let{node:t}=r.docView.domFromPos(o.pos,"up"==e?-1:1);for(;;){let e=r.docView.nearestDesc(t,!0);if(!e)break;if(e.node.isBlock){t=e.contentDOM||e.dom;break}t=e.dom.parentNode}let n=z6(r,o.pos,1);for(let r=t.firstChild;r;r=r.nextSibling){let t;if(1==r.nodeType)t=r.getClientRects();else{if(3!=r.nodeType)continue;t=zO(r,0,r.nodeValue.length).getClientRects()}for(let r=0;r<t.length;r++){let i=t[r];if(i.bottom>i.top+1&&("up"==e?n.top-i.top>(i.bottom-n.top)*2:i.bottom-n.bottom>(n.bottom-i.top)*2))return!1}}return!0})):function(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=i==r.parent.content.size,s=e.domSelection();return s?Le.test(r.parent.textContent)&&s.modify?z9(e,t,()=>{let{focusNode:t,focusOffset:i,anchorNode:o,anchorOffset:a}=e.domSelectionRange(),l=s.caretBidiLevel;s.modify("move",n,"character");let c=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:u,focusOffset:h}=e.domSelectionRange(),d=u&&!c.contains(1==u.nodeType?u:u.parentNode)||t==u&&i==h;try{s.collapse(o,a),t&&(t!=o||i!=a)&&s.extend&&s.extend(t,i)}catch{}return null!=l&&(s.caretBidiLevel=l),d}):"left"==n||"backward"==n?!i:o:r.pos==r.start()||r.pos==r.end()}(this,n,e))}pasteHTML(e,t){return qh(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return qh(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return LW(this,e)}destroy(){this.docView&&(function(e){for(let t in e.domObserver.stop(),e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],qj(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,zS())}get isDestroyed(){return null==this.docView}dispatchEvent(e){L9(this,e)||!L4[e.type]||!this.editable&&e.type in L5||L4[e.type](this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?zV&&11===this.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e,t){let n;if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return qq(e,n)}function r(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?qq(e,n):null}(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function qU(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e?t.class+=" "+n[e]:"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))}),t.translate||(t.translate="no"),[qv.node(0,e.state.doc.content.size,t)]}function qW(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:qv.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function qG(e){return!e.someProp("editable",t=>!1===t(e.state))}function qX(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function qY(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw RangeError("Plugins passed directly to the view must not have a state component")}let qZ="u">typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function qK(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function qJ(e){let t=function(e){let t=Object.create(null);for(let n in e)t[function(e){let t,n,r,i,o=e.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(let e=0;e<o.length-1;e++){let s=o[e];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else if(/^s(hift)?$/i.test(s))r=!0;else if(/^mod$/i.test(s))qZ?i=!0:n=!0;else throw Error("Unrecognized modifier name: "+s)}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),i&&(s="Meta-"+s),r&&(s="Shift-"+s),s}(n)]=e[n];return t}(e);return function(e,n){let r=uV(n),i,o=t[qK(r,n)];if(o&&o(e.state,e.dispatch,e))return!0;if(1==r.length&&" "!=r){if(n.shiftKey){let i=t[qK(r,n,!1)];if(i&&i(e.state,e.dispatch,e))return!0}if((n.shiftKey||n.altKey||n.metaKey||r.charCodeAt(0)>127)&&(i=uL[n.keyCode])&&i!=r){let r=t[qK(i,n)];if(r&&r(e.state,e.dispatch,e))return!0}}return!1}}let q0=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function q1(e,t){let{$cursor:n}=e.selection;return n&&(t?t.endOfTextblock("backward",e):!(n.parentOffset>0))?n:null}let q2=(e,t,n)=>{let r=q1(e,n);if(!r)return!1;let i=q8(r);if(!i){let n=r.blockRange(),i=n&&Iq(n);return null!=i&&(t&&t(e.tr.lift(n,i).scrollIntoView()),!0)}let o=i.nodeBefore;if($d(e,i,t,-1))return!0;if(0==r.parent.content.size&&(q6(o,"end")||zi.isSelectable(o)))for(let n=r.depth;;n--){let s=IX(e.doc,r.before(n),r.after(n),RV.empty);if(s&&s.slice.size<s.to-s.from){if(t){let n=e.tr.step(s);n.setSelection(q6(o,"end")?I8.findFrom(n.doc.resolve(n.mapping.map(i.pos,-1)),-1):zi.create(n.doc,i.pos-o.nodeSize)),t(n.scrollIntoView())}return!0}if(1==n||r.node(n-1).childCount>1)break}return!!o.isAtom&&i.depth==r.depth-1&&(t&&t(e.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0)},q4=(e,t,n)=>{let r=q1(e,n);if(!r)return!1;let i=q8(r);return!!i&&q3(e,i,t)},q5=(e,t,n)=>{let r=q9(e,n);if(!r)return!1;let i=$n(r);return!!i&&q3(e,i,t)};function q3(e,t,n){let r=t.nodeBefore,i=t.pos-1;for(;!r.isTextblock;i--){if(r.type.spec.isolating)return!1;let e=r.lastChild;if(!e)return!1;r=e}let o=t.nodeAfter,s=t.pos+1;for(;!o.isTextblock;s++){if(o.type.spec.isolating)return!1;let e=o.firstChild;if(!e)return!1;o=e}let a=IX(e.doc,i,s,RV.empty);if(!a||a.from!=i||a instanceof IR&&a.slice.size>=s-i)return!1;if(n){let t=e.tr.step(a);t.setSelection(zn.create(t.doc,i)),n(t.scrollIntoView())}return!0}function q6(e,t,n=!1){for(let r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)break}return!1}let q7=(e,t,n)=>{let{$head:r,empty:i}=e.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;o=q8(r)}let s=o&&o.nodeBefore;return!!(s&&zi.isSelectable(s))&&(t&&t(e.tr.setSelection(zi.create(e.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function q8(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function q9(e,t){let{$cursor:n}=e.selection;return n&&(t?t.endOfTextblock("forward",e):!(n.parentOffset<n.parent.content.size))?n:null}let $e=(e,t,n)=>{let r=q9(e,n);if(!r)return!1;let i=$n(r);if(!i)return!1;let o=i.nodeAfter;if($d(e,i,t,1))return!0;if(0==r.parent.content.size&&(q6(o,"start")||zi.isSelectable(o))){let n=IX(e.doc,r.before(),r.after(),RV.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(q6(o,"start")?I8.findFrom(r.doc.resolve(r.mapping.map(i.pos)),1):zi.create(r.doc,r.mapping.map(i.pos))),t(r.scrollIntoView())}return!0}}return!!o.isAtom&&i.depth==r.depth-1&&(t&&t(e.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0)},$t=(e,t,n)=>{let{$head:r,empty:i}=e.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;o=$n(r)}let s=o&&o.nodeAfter;return!!(s&&zi.isSelectable(s))&&(t&&t(e.tr.setSelection(zi.create(e.doc,o.pos)).scrollIntoView()),!0)};function $n(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}let $r=(e,t)=>{let n=e.selection,r=n instanceof zi,i;if(r){if(n.node.isTextblock||!IH(e.doc,n.from))return!1;i=n.from}else if(null==(i=IW(e.doc,n.from,-1)))return!1;if(t){let n=e.tr.join(i);r&&n.setSelection(zi.create(n.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(n.scrollIntoView())}return!0},$i=(e,t)=>{let n=e.selection,r;if(n instanceof zi){if(n.node.isTextblock||!IH(e.doc,n.to))return!1;r=n.to}else if(null==(r=IW(e.doc,n.to,1)))return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},$o=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),o=i&&Iq(i);return null!=o&&(t&&t(e.tr.lift(i,o).scrollIntoView()),!0)},$s=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!!(n.parent.type.spec.code&&n.sameParent(r))&&(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function $a(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}let $l=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=$a(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(t){let r=n.after(),i=e.tr.replaceWith(r,r,s.createAndFill());i.setSelection(I8.near(i.doc.resolve(r),1)),t(i.scrollIntoView())}return!0},$c=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof zs||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=$a(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){let n=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,s=e.tr.insert(n,o.createAndFill());s.setSelection(zn.create(s.doc,n+1)),t(s.scrollIntoView())}return!0},$u=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let r=n.before();if(IV(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Iq(r);return null!=i&&(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)},$h=(e,t)=>{let{$from:n,to:r}=e.selection,i,o=n.sharedDepth(r);return 0!=o&&(i=n.before(o),t&&t(e.tr.setSelection(zi.create(e.doc,i))),!0)};function $d(e,t,n,r){let i,o,s,a=t.nodeBefore,l=t.nodeAfter,c,u,h=a.type.spec.isolating||l.type.spec.isolating;if(!h&&(i=t.nodeBefore,o=t.nodeAfter,s=t.index(),i&&o&&i.type.compatibleContent(o.type)&&(!i.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),!0):!!(t.parent.canReplace(s,s+1)&&(o.isTextblock||IH(e.doc,t.pos)))&&(n&&n(e.tr.join(t.pos).scrollIntoView()),!0))))return!0;let d=!h&&t.parent.canReplace(t.index(),t.index()+1);if(d&&(c=(u=a.contentMatchAt(a.childCount)).findWrapping(l.type))&&u.matchType(c[0]||l.type).validEnd){if(n){let r=t.pos+l.nodeSize,i=RL.empty;for(let e=c.length-1;e>=0;e--)i=RL.from(c[e].create(null,i));i=RL.from(a.copy(i));let o=e.tr.step(new II(t.pos-1,r,t.pos,r,new RV(i,1,0),c.length,!0)),s=o.doc.resolve(r+2*c.length);s.nodeAfter&&s.nodeAfter.type==a.type&&IH(o.doc,s.pos)&&o.join(s.pos),n(o.scrollIntoView())}return!0}let f=l.type.spec.isolating||r>0&&h?null:I8.findFrom(t,1),p=f&&f.$from.blockRange(f.$to),m=p&&Iq(p);if(null!=m&&m>=t.depth)return n&&n(e.tr.lift(p,m).scrollIntoView()),!0;if(d&&q6(l,"start",!0)&&q6(a,"end")){let r=a,i=[];for(;i.push(r),!r.isTextblock;)r=r.lastChild;let o=l,s=1;for(;!o.isTextblock;o=o.firstChild)s++;if(r.canReplace(r.childCount,r.childCount,o.content)){if(n){let r=RL.empty;for(let e=i.length-1;e>=0;e--)r=RL.from(i[e].copy(r));n(e.tr.step(new II(t.pos-i.length,t.pos+l.nodeSize,t.pos+s,t.pos+l.nodeSize-s,new RV(r,i.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function $f(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return!!i.node(o).isTextblock&&(n&&n(t.tr.setSelection(zn.create(t.doc,e<0?i.start(o):i.end(o)))),!0)}}let $p=$f(-1),$m=$f(1);function $g(e,t=null){return function(n,r){let i=!1;for(let r=0;r<n.selection.ranges.length&&!i;r++){let{$from:{pos:o},$to:{pos:s}}=n.selection.ranges[r];n.doc.nodesBetween(o,s,(r,o)=>{if(i)return!1;if(!(!r.isTextblock||r.hasMarkup(e,t))){if(r.type==e)i=!0;else{let t=n.doc.resolve(o),r=t.index();i=t.parent.canReplaceWith(r,r+1,e)}}})}if(!i)return!1;if(r){let i=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:o},$to:{pos:s}}=n.selection.ranges[r];i.setBlockType(o,s,e,t)}r(i.scrollIntoView())}return!0}}function $y(...e){return function(t,n,r){for(let i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}function $b(e){let{state:t,transaction:n}=e,{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}$y(q0,q2,q7),$y(q0,$e,$t),$y($s,$c,$u,(e,t)=>{let{$from:n,$to:r}=e.selection;if(e.selection instanceof zi&&e.selection.node.isBlock)return!!(n.parentOffset&&IV(e.doc,n.pos))&&(t&&t(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let i=[],o,s,a=!1,l=!1;for(let e=n.depth;;e--)if(n.node(e).isBlock){a=n.end(e)==n.pos+(n.depth-e),l=n.start(e)==n.pos-(n.depth-e),s=$a(n.node(e-1).contentMatchAt(n.indexAfter(e-1))),i.unshift(a&&s?{type:s}:null),o=e;break}else{if(1==e)return!1;i.unshift(null)}let c=e.tr;(e.selection instanceof zn||e.selection instanceof zs)&&c.deleteSelection();let u=c.mapping.map(n.pos),h=IV(c.doc,u,i.length,i);if(h||(i[0]=s?{type:s}:null,h=IV(c.doc,u,i.length,i)),c.split(u,i.length,i),!a&&l&&n.node(o).type!=s){let e=c.mapping.map(n.before(o)),t=c.doc.resolve(e);s&&n.node(o-1).canReplaceWith(t.index(),t.index()+1,s)&&c.setNodeMarkup(c.mapping.map(n.before(o)),s)}return t&&t(c.scrollIntoView()),!0}),"u">typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"u">typeof os&&os.platform&&os.platform();class $v{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){let{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,o=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,(...e)=>{let n=t(...e)(o);return i.getMeta("preventDispatch")||this.hasCustomState||r.dispatch(i),n}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){let{rawCommands:n,editor:r,state:i}=this,{view:o}=r,s=[],a=!!e,l=e||i.tr,c={...Object.fromEntries(Object.entries(n).map(([e,n])=>[e,(...e)=>{let r=this.buildProps(l,t),i=n(...e)(r);return s.push(i),c}])),run:()=>(a||!t||l.getMeta("preventDispatch")||this.hasCustomState||o.dispatch(l),s.every(e=>!0===e))};return c}createCan(e){let{rawCommands:t,state:n}=this,r=e||n.tr,i=this.buildProps(r,!1);return{...Object.fromEntries(Object.entries(t).map(([e,t])=>[e,(...e)=>t(...e)({...i,dispatch:void 0})])),chain:()=>this.createChain(r,!1)}}buildProps(e,t=!0){let{rawCommands:n,editor:r,state:i}=this,{view:o}=r,s={tr:e,editor:r,view:o,state:$b({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([e,t])=>[e,(...e)=>t(...e)(s)]))}};return s}}class $x{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){let n=this.callbacks[e];return n&&n.forEach(e=>e.apply(this,t)),this}off(e,t){let n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(e=>e!==t):delete this.callbacks[e]),this}once(e,t){let n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}}function $w(e,t,n){return void 0===e.config[t]&&e.parent?$w(e.parent,t,n):"function"==typeof e.config[t]?e.config[t].bind({...n,parent:e.parent?$w(e.parent,t,n):null}):e.config[t]}function $k(e){let t=e.filter(e=>"extension"===e.type);return{baseExtensions:t,nodeExtensions:e.filter(e=>"node"===e.type),markExtensions:e.filter(e=>"mark"===e.type)}}function $O(e){let t=[],{nodeExtensions:n,markExtensions:r}=$k(e),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(e=>{let n={name:e.name,options:e.options,storage:e.storage,extensions:i},r=$w(e,"addGlobalAttributes",n);r&&r().forEach(e=>{e.types.forEach(n=>{Object.entries(e.attributes).forEach(([e,r])=>{t.push({type:n,name:e,attribute:{...o,...r}})})})})}),i.forEach(e=>{let n={name:e.name,options:e.options,storage:e.storage},r=$w(e,"addAttributes",n);r&&Object.entries(r()).forEach(([n,r])=>{let i={...o,...r};"function"==typeof(null==i?void 0:i.default)&&(i.default=i.default()),null!=i&&i.isRequired&&(null==i?void 0:i.default)===void 0&&delete i.default,t.push({type:e.name,name:n,attribute:i})})}),t}function $S(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function $C(...e){return e.filter(e=>!!e).reduce((e,t)=>{let n={...e};return Object.entries(t).forEach(([e,t])=>{if(!n[e]){n[e]=t;return}if("class"===e){let r=t?String(t).split(" "):[],i=n[e]?n[e].split(" "):[],o=r.filter(e=>!i.includes(e));n[e]=[...i,...o].join(" ")}else if("style"===e){let r=t?t.split(";").map(e=>e.trim()).filter(Boolean):[],i=n[e]?n[e].split(";").map(e=>e.trim()).filter(Boolean):[],o=new Map;i.forEach(e=>{let[t,n]=e.split(":").map(e=>e.trim());o.set(t,n)}),r.forEach(e=>{let[t,n]=e.split(":").map(e=>e.trim());o.set(t,n)}),n[e]=Array.from(o.entries()).map(([e,t])=>`${e}: ${t}`).join("; ")}else n[e]=t}),n},{})}function $T(e,t){return t.filter(t=>t.type===e.type.name).filter(e=>e.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]}).reduce((e,t)=>$C(e,t),{})}function $A(e){return"function"==typeof e}function $E(e,t,...n){return $A(e)?t?e.bind(t)(...n):e(...n):e}function $M(e,t){return"style"in e?e:{...e,getAttrs:n=>{let r=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===r)return!1;let i=t.reduce((e,t)=>{var r;let i=t.attribute.parseHTML?t.attribute.parseHTML(n):"string"!=typeof(r=n.getAttribute(t.name))?r:r.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(r):"true"===r||"false"!==r&&r;return null==i?e:{...e,[t.name]:i}},{});return{...r,...i}}}}function $N(e){return Object.fromEntries(Object.entries(e).filter(([e,t])=>!("attrs"===e&&function(e={}){return 0===Object.keys(e).length&&e.constructor===Object}(t))&&null!=t))}function $_(e,t){return t.nodes[e]||t.marks[e]||null}function $j(e,t){return Array.isArray(t)?t.some(t=>("string"==typeof t?t:t.name)===e.name):t}function $D(e,t){let n=Iv.fromSchema(t).serializeFragment(e),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}let $P=(e,t=500)=>{let n="",r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(e,t,i,o)=>{var s,a;let l=(null===(a=(s=e.type.spec).toText)||void 0===a?void 0:a.call(s,{node:e,pos:t,parent:i,index:o}))||e.textContent||"%leaf%";n+=e.isAtom&&!e.isText?l:l.slice(0,Math.max(0,r-t))}),n};function $R(e){return"[object RegExp]"===Object.prototype.toString.call(e)}class $I{constructor(e){this.find=e.find,this.handler=e.handler}}let $z=(e,t)=>{if($R(t))return t.exec(e);let n=t(e);if(!n)return null;let r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function $L(e){var t;let{editor:n,from:r,to:i,text:o,rules:s,plugin:a}=e,{view:l}=n;if(l.composing)return!1;let c=l.state.doc.resolve(r);if(c.parent.type.spec.code||null!==(t=c.nodeBefore||c.nodeAfter)&&void 0!==t&&t.marks.find(e=>e.type.spec.code))return!1;let u=!1,h=$P(c)+o;return s.forEach(e=>{if(u)return;let t=$z(h,e.find);if(!t)return;let s=l.state.tr,c=$b({state:l.state,transaction:s}),d={from:r-(t[0].length-o.length),to:i},{commands:f,chain:p,can:m}=new $v({editor:n,state:c});null!==e.handler({state:c,range:d,match:t,commands:f,chain:p,can:m})&&s.steps.length&&(s.setMeta(a,{transform:s,from:r,to:i,text:o}),l.dispatch(s),u=!0)}),u}function $q(e){return"Object"===Object.prototype.toString.call(e).slice(8,-1)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function $$(e,t){let n={...e};return $q(e)&&$q(t)&&Object.keys(t).forEach(r=>{$q(t[r])&&$q(e[r])?n[r]=$$(e[r],t[r]):n[r]=t[r]}),n}class $B{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=$E($w(this,"addOptions",{name:this.name}))),this.storage=$E($w(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new $B(e)}configure(e={}){let t=this.extend({...this.config,addOptions:()=>$$(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){let t=new $B(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=$E($w(t,"addOptions",{name:t.name})),t.storage=$E($w(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){let{tr:n}=e.state,r=e.state.selection.$from;if(r.pos===r.end()){let i=r.marks();if(!i.find(e=>(null==e?void 0:e.type.name)===t.name))return!1;let o=i.find(e=>(null==e?void 0:e.type.name)===t.name);return o&&n.removeStoredMark(o),n.insertText(" ",r.pos),e.view.dispatch(n),!0}return!1}}class $F{constructor(e){this.find=e.find,this.handler=e.handler}}let $Q=(e,t,n)=>{if($R(t))return[...e.matchAll(t)];let r=t(e,n);return r?r.map(t=>{let n=[t.text];return n.index=t.index,n.input=e,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(t.replaceWith)),n}):[]},$V=null,$H=e=>{var t;let n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return null===(t=n.clipboardData)||void 0===t||t.setData("text/html",e),n};class $U{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=$U.resolve(e),this.schema=function(e,t){var n;let r=$O(e),{nodeExtensions:i,markExtensions:o}=$k(e),s=null===(n=i.find(e=>$w(e,"topNode")))||void 0===n?void 0:n.name;return new Il({topNode:s,nodes:Object.fromEntries(i.map(n=>{let i=r.filter(e=>e.type===n.name),o={name:n.name,options:n.options,storage:n.storage,editor:t},s=$N({...e.reduce((e,t)=>{let r=$w(t,"extendNodeSchema",o);return{...e,...r?r(n):{}}},{}),content:$E($w(n,"content",o)),marks:$E($w(n,"marks",o)),group:$E($w(n,"group",o)),inline:$E($w(n,"inline",o)),atom:$E($w(n,"atom",o)),selectable:$E($w(n,"selectable",o)),draggable:$E($w(n,"draggable",o)),code:$E($w(n,"code",o)),whitespace:$E($w(n,"whitespace",o)),linebreakReplacement:$E($w(n,"linebreakReplacement",o)),defining:$E($w(n,"defining",o)),isolating:$E($w(n,"isolating",o)),attrs:Object.fromEntries(i.map(e=>{var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]}))}),a=$E($w(n,"parseHTML",o));a&&(s.parseDOM=a.map(e=>$M(e,i)));let l=$w(n,"renderHTML",o);l&&(s.toDOM=e=>l({node:e,HTMLAttributes:$T(e,i)}));let c=$w(n,"renderText",o);return c&&(s.toText=c),[n.name,s]})),marks:Object.fromEntries(o.map(n=>{let i=r.filter(e=>e.type===n.name),o={name:n.name,options:n.options,storage:n.storage,editor:t},s=$N({...e.reduce((e,t)=>{let r=$w(t,"extendMarkSchema",o);return{...e,...r?r(n):{}}},{}),inclusive:$E($w(n,"inclusive",o)),excludes:$E($w(n,"excludes",o)),group:$E($w(n,"group",o)),spanning:$E($w(n,"spanning",o)),code:$E($w(n,"code",o)),attrs:Object.fromEntries(i.map(e=>{var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]}))}),a=$E($w(n,"parseHTML",o));a&&(s.parseDOM=a.map(e=>$M(e,i)));let l=$w(n,"renderHTML",o);return l&&(s.toDOM=e=>l({mark:e,HTMLAttributes:$T(e,i)})),[n.name,s]}))})}(this.extensions,t),this.setupExtensions()}static resolve(e){var t;let n=$U.sort($U.flatten(e)),r=Array.from(new Set((t=n.map(e=>e.name)).filter((e,n)=>t.indexOf(e)!==n)));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(e=>`'${e}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(e=>{let t={name:e.name,options:e.options,storage:e.storage},n=$w(e,"addExtensions",t);return n?[e,...this.flatten(n())]:e}).flat(10)}static sort(e){return e.sort((e,t)=>{let n=$w(e,"priority")||100,r=$w(t,"priority")||100;return n>r?-1:+(n<r)})}get commands(){return this.extensions.reduce((e,t)=>{let n={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:$_(t.name,this.schema)},r=$w(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){let{editor:e}=this,t=$U.sort([...this.extensions].reverse()),n=[],r=[],i=t.map(t=>{let i={name:t.name,options:t.options,storage:t.storage,editor:e,type:$_(t.name,this.schema)},o=[],s=$w(t,"addKeyboardShortcuts",i),a={};if("mark"===t.type&&$w(t,"exitable",i)&&(a.ArrowRight=()=>$B.handleExit({editor:e,mark:t})),s){let t=Object.fromEntries(Object.entries(s()).map(([t,n])=>[t,()=>n({editor:e})]));a={...a,...t}}let l=new zg({props:{handleKeyDown:qJ(a)}});o.push(l);let c=$w(t,"addInputRules",i);$j(t,e.options.enableInputRules)&&c&&n.push(...c());let u=$w(t,"addPasteRules",i);$j(t,e.options.enablePasteRules)&&u&&r.push(...u());let h=$w(t,"addProseMirrorPlugins",i);if(h){let e=h();o.push(...e)}return o}).flat();return[function(e){let{editor:t,rules:n}=e,r=new zg({state:{init:()=>null,apply(e,i,o){let s=e.getMeta(r);if(s)return s;let a=e.getMeta("applyInputRules");return a&&setTimeout(()=>{let{text:e}=a;e="string"==typeof e?e:$D(RL.from(e),o.schema);let{from:i}=a,s=i+e.length;$L({editor:t,from:i,to:s,text:e,rules:n,plugin:r})}),e.selectionSet||e.docChanged?null:i}},props:{handleTextInput:(e,i,o,s)=>$L({editor:t,from:i,to:o,text:s,rules:n,plugin:r}),handleDOMEvents:{compositionend:e=>(setTimeout(()=>{let{$cursor:i}=e.state.selection;i&&$L({editor:t,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(e,i){if("Enter"!==i.key)return!1;let{$cursor:o}=e.state.selection;return!!o&&$L({editor:t,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r})}},isInputRules:!0});return r}({editor:e,rules:n}),...function(e){let{editor:t,rules:n}=e,r=null,i=!1,o=!1,s="u">typeof ClipboardEvent?new ClipboardEvent("paste"):null,a;try{a="u">typeof DragEvent?new DragEvent("drop"):null}catch{a=null}let l=({state:e,from:n,to:r,rule:i,pasteEvt:o})=>{let l=e.tr;if(!(!function(e){let{editor:t,state:n,from:r,to:i,rule:o,pasteEvent:s,dropEvent:a}=e,{commands:l,chain:c,can:u}=new $v({editor:t,state:n}),h=[];return n.doc.nodesBetween(r,i,(e,t)=>{if(!e.isTextblock||e.type.spec.code)return;let d=Math.max(r,t),f=Math.min(i,t+e.content.size);$Q(e.textBetween(d-t,f-t,void 0,""),o.find,s).forEach(e=>{if(void 0===e.index)return;let t=d+e.index+1,r=t+e[0].length,i={from:n.tr.mapping.map(t),to:n.tr.mapping.map(r)},f=o.handler({state:n,range:i,match:e,commands:l,chain:c,can:u,pasteEvent:s,dropEvent:a});h.push(f)})}),h.every(e=>null!==e)}({editor:t,state:$b({state:e,transaction:l}),from:Math.max(n-1,0),to:r.b-1,rule:i,pasteEvent:o,dropEvent:a})||!l.steps.length)){try{a="u">typeof DragEvent?new DragEvent("drop"):null}catch{a=null}return s="u">typeof ClipboardEvent?new ClipboardEvent("paste"):null,l}};return n.map(e=>new zg({view(e){let n=n=>{var i;(r=null!==(i=e.dom.parentElement)&&void 0!==i&&i.contains(n.target)?e.dom.parentElement:null)&&($V=t)},i=()=>{$V&&($V=null)};return window.addEventListener("dragstart",n),window.addEventListener("dragend",i),{destroy(){window.removeEventListener("dragstart",n),window.removeEventListener("dragend",i)}}},props:{handleDOMEvents:{drop:(e,t)=>{if(o=r===e.dom.parentElement,a=t,!o){let e=$V;e&&setTimeout(()=>{let t=e.state.selection;t&&e.commands.deleteRange({from:t.from,to:t.to})},10)}return!1},paste:(e,t)=>{var n;let r=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/html");return s=t,i=!!(null!=r&&r.includes("data-pm-slice")),!1}}},appendTransaction:(t,n,r)=>{let a=t[0],c="paste"===a.getMeta("uiEvent")&&!i,u="drop"===a.getMeta("uiEvent")&&!o,h=a.getMeta("applyPasteRules"),d=!!h;if(!c&&!u&&!d)return;if(d){let{text:t}=h;t="string"==typeof t?t:$D(RL.from(t),r.schema);let{from:n}=h,i=n+t.length;return l({rule:e,state:r,from:n,to:{b:i},pasteEvt:$H(t)})}let f=n.doc.content.findDiffStart(r.doc.content),p=n.doc.content.findDiffEnd(r.doc.content);if(!("number"!=typeof f||!p||f===p.b))return l({rule:e,state:r,from:f,to:p,pasteEvt:s})}}))}({editor:e,rules:r}),...i]}get attributes(){return $O(this.extensions)}get nodeViews(){let{editor:e}=this,{nodeExtensions:t}=$k(this.extensions);return Object.fromEntries(t.filter(e=>!!$w(e,"addNodeView")).map(t=>{let n=this.attributes.filter(e=>e.type===t.name),r={name:t.name,options:t.options,storage:t.storage,editor:e,type:$S(t.name,this.schema)},i=$w(t,"addNodeView",r);return i?[t.name,(r,o,s,a,l)=>{let c=$T(r,n);return i()({node:r,view:o,getPos:s,decorations:a,innerDecorations:l,editor:e,extension:t,HTMLAttributes:c})}]:[]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;let n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:$_(e.name,this.schema)};"mark"===e.type&&(null===(t=$E($w(e,"keepOnSplit",n)))||void 0===t||t)&&this.splittableMarks.push(e.name);let r=$w(e,"onBeforeCreate",n),i=$w(e,"onCreate",n),o=$w(e,"onUpdate",n),s=$w(e,"onSelectionUpdate",n),a=$w(e,"onTransaction",n),l=$w(e,"onFocus",n),c=$w(e,"onBlur",n),u=$w(e,"onDestroy",n);r&&this.editor.on("beforeCreate",r),i&&this.editor.on("create",i),o&&this.editor.on("update",o),s&&this.editor.on("selectionUpdate",s),a&&this.editor.on("transaction",a),l&&this.editor.on("focus",l),c&&this.editor.on("blur",c),u&&this.editor.on("destroy",u)})}}class $W{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=$E($w(this,"addOptions",{name:this.name}))),this.storage=$E($w(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new $W(e)}configure(e={}){let t=this.extend({...this.config,addOptions:()=>$$(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){let t=new $W({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=$E($w(t,"addOptions",{name:t.name})),t.storage=$E($w(t,"addStorage",{name:t.name,options:t.options})),t}}function $G(e,t,n){let{from:r,to:i}=t,{blockSeparator:o=`

`,textSerializers:s={}}=n||{},a="";return e.nodesBetween(r,i,(e,n,l,c)=>{var u;e.isBlock&&n>r&&(a+=o);let h=null==s?void 0:s[e.type.name];if(h)return l&&(a+=h({node:e,pos:n,parent:l,index:c,range:t})),!1;e.isText&&(a+=null===(u=null==e?void 0:e.text)||void 0===u?void 0:u.slice(Math.max(r,n)-n,i-n))}),a}function $X(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}let $Y=$W.create({name:"clipboardTextSerializer",addOptions:()=>({blockSeparator:void 0}),addProseMirrorPlugins(){return[new zg({key:new zv("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{let{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:o}=i,s=Math.min(...o.map(e=>e.$from.pos)),a=Math.max(...o.map(e=>e.$to.pos)),l=$X(n);return $G(r,{from:s,to:a},{...void 0!==this.options.blockSeparator?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}});function $Z(e,t,n={strict:!0}){let r=Object.keys(t);return!r.length||r.every(r=>n.strict?t[r]===e[r]:$R(t[r])?t[r].test(e[r]):t[r]===e[r])}function $K(e,t,n={}){return e.find(e=>e.type===t&&$Z(Object.fromEntries(Object.keys(n).map(t=>[t,e.attrs[t]])),n))}function $J(e,t,n={}){return!!$K(e,t,n)}function $0(e,t,n){var r;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if(i.node&&i.node.marks.some(e=>e.type===t)||(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(e=>e.type===t)||(n=n||(null===(r=i.node.marks[0])||void 0===r?void 0:r.attrs),!$K([...i.node.marks],t,n)))return;let o=i.index,s=e.start()+i.offset,a=o+1,l=s+i.node.nodeSize;for(;o>0&&$J([...e.parent.child(o-1).marks],t,n);)o-=1,s-=e.parent.child(o).nodeSize;for(;a<e.parent.childCount&&$J([...e.parent.child(a).marks],t,n);)l+=e.parent.child(a).nodeSize,a+=1;return{from:s,to:l}}function $1(e,t){if("string"==typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function $2(e){return e instanceof zn}function $4(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function $5(e,t=null){if(!t)return null;let n=I8.atStart(e),r=I8.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return r;let i=n.from,o=r.to;return"all"===t?zn.create(e,$4(0,i,o),$4(e.content.size,i,o)):zn.create(e,$4(t,i,o),$4(t,i,o))}function $3(){return"Android"===navigator.platform||/android/i.test(navigator.userAgent)}function $6(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}let $7=e=>{let t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){let r=t[n];3===r.nodeType&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):1===r.nodeType&&$7(r)}return e};function $8(e){let t=`<body>${e}</body>`;return $7(new window.DOMParser().parseFromString(t,"text/html").body)}function $9(e,t,n){if(e instanceof R4||e instanceof RL)return e;n={slice:!0,parseOptions:{},...n};let r="object"==typeof e&&null!==e,i="string"==typeof e;if(r)try{if(Array.isArray(e)&&e.length>0)return RL.fromArray(e.map(e=>t.nodeFromJSON(e)));let r=t.nodeFromJSON(e);return n.errorOnInvalidContent&&r.check(),r}catch(r){if(n.errorOnInvalidContent)throw Error("[tiptap error]: Invalid JSON content",{cause:r});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),$9("",t,n)}if(i){if(n.errorOnInvalidContent){let r=!1,i="",o=new Il({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:e=>(r=!0,i="string"==typeof e?e:e.outerHTML,null)}]}})});if(n.slice?Iu.fromSchema(o).parseSlice($8(e),n.parseOptions):Iu.fromSchema(o).parse($8(e),n.parseOptions),n.errorOnInvalidContent&&r)throw Error("[tiptap error]: Invalid HTML content",{cause:Error(`Invalid element found: ${i}`)})}let r=Iu.fromSchema(t);return n.slice?r.parseSlice($8(e),n.parseOptions).content:r.parse($8(e),n.parseOptions)}return $9("",t,n)}let Be=e=>!("type"in e);function Bt(){return"u">typeof navigator&&/Mac/.test(navigator.platform)}function Bn(e,t,n={}){let{from:r,to:i,empty:o}=e.selection,s=t?$S(t,e.schema):null,a=[];e.doc.nodesBetween(r,i,(e,t)=>{if(e.isText)return;let n=Math.max(r,t),o=Math.min(i,t+e.nodeSize);a.push({node:e,from:n,to:o})});let l=i-r,c=a.filter(e=>!s||s.name===e.node.type.name).filter(e=>$Z(e.node.attrs,n,{strict:!1}));return o?!!c.length:c.reduce((e,t)=>e+t.to-t.from,0)>=l}function Br(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function Bi(e,t){let n="string"==typeof t?[t]:t;return Object.keys(e).reduce((t,r)=>(n.includes(r)||(t[r]=e[r]),t),{})}function Bo(e,t,n={},r={}){return $9(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function Bs(e,t){let n=$1(t,e.schema),{from:r,to:i,empty:o}=e.selection,s=[];o?(e.storedMarks&&s.push(...e.storedMarks),s.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,e=>{s.push(...e.marks)});let a=s.find(e=>e.type.name===n.name);return a?{...a.attrs}:{}}function Ba(e,t){for(let n=e.depth;n>0;n-=1){let r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function Bl(e){return t=>Ba(t.$from,e)}function Bc(e,t,n){let r=[];return e===t?n.resolve(e).marks().forEach(t=>{let i=$0(n.resolve(e),t.type);i&&r.push({mark:t,...i})}):n.nodesBetween(e,t,(e,t)=>{e&&(null==e?void 0:e.nodeSize)!==void 0&&r.push(...e.marks.map(n=>({from:t,to:t+e.nodeSize,mark:n})))}),r}function Bu(e,t,n){return Object.fromEntries(Object.entries(n).filter(([n])=>{let r=e.find(e=>e.type===t&&e.name===n);return!!r&&r.attribute.keepOnSplit}))}function Bh(e,t,n={}){let{empty:r,ranges:i}=e.selection,o=t?$1(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(e=>!o||o.name===e.type.name).find(e=>$Z(e.attrs,n,{strict:!1}));let s=0,a=[];if(i.forEach(({$from:t,$to:n})=>{let r=t.pos,i=n.pos;e.doc.nodesBetween(r,i,(e,t)=>{if(!e.isText&&!e.marks.length)return;let n=Math.max(r,t),o=Math.min(i,t+e.nodeSize);s+=o-n,a.push(...e.marks.map(e=>({mark:e,from:n,to:o})))})}),0===s)return!1;let l=a.filter(e=>!o||o.name===e.mark.type.name).filter(e=>$Z(e.mark.attrs,n,{strict:!1})).reduce((e,t)=>e+t.to-t.from,0),c=a.filter(e=>!o||e.mark.type!==o&&e.mark.type.excludes(o)).reduce((e,t)=>e+t.to-t.from,0);return(l>0?l+c:l)>=s}function Bd(e,t){let{nodeExtensions:n}=$k(t),r=n.find(t=>t.name===e);if(!r)return!1;let i={name:r.name,options:r.options,storage:r.storage},o=$E($w(r,"group",i));return"string"==typeof o&&o.split(" ").includes("list")}function Bf(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if("hardBreak"===e.type.name)return!0;if(e.isText)return/^\s*$/m.test(null!==(r=e.text)&&void 0!==r?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(0===e.content.childCount)return!0;if(t){let r=!0;return e.content.forEach(e=>{!1!==r&&(Bf(e,{ignoreWhitespace:n,checkChildren:t})||(r=!1))}),r}return!1}function Bp(e,t){let n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){let r=n.filter(e=>null==t?void 0:t.includes(e.type.name));e.tr.ensureMarks(r)}}let Bm=(e,t)=>{let n=Bl(e=>e.type===t)(e.selection);if(!n)return!0;let r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;let i=e.doc.nodeAt(r);return n.node.type===(null==i?void 0:i.type)&&IH(e.doc,n.pos)&&e.join(n.pos),!0},Bg=(e,t)=>{let n=Bl(e=>e.type===t)(e.selection);if(!n)return!0;let r=e.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;let i=e.doc.nodeAt(r);return n.node.type===(null==i?void 0:i.type)&&IH(e.doc,r)&&e.join(r),!0};var By=Object.freeze({__proto__:null,blur:()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),null===(n=null==window?void 0:window.getSelection())||void 0===n||n.removeAllRanges())}),!0),clearContent:(e=!1)=>({commands:t})=>t.setContent("",e),clearNodes:()=>({state:e,tr:t,dispatch:n})=>{let{selection:r}=t,{ranges:i}=r;return n&&i.forEach(({$from:n,$to:r})=>{e.doc.nodesBetween(n.pos,r.pos,(e,n)=>{if(e.type.isText)return;let{doc:r,mapping:i}=t,o=r.resolve(i.map(n)),s=r.resolve(i.map(n+e.nodeSize)),a=o.blockRange(s);if(!a)return;let l=Iq(a);if(e.type.isTextblock){let{defaultType:e}=o.parent.contentMatchAt(o.index());t.setNodeMarkup(a.start,e)}(l||0===l)&&t.lift(a,l)})}),!0},command:e=>t=>e(t),createParagraphNear:()=>({state:e,dispatch:t})=>$c(e,t),cut:(e,t)=>({editor:n,tr:r})=>{let{state:i}=n,o=i.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);let s=r.mapping.map(t);return r.insert(s,o.content),r.setSelection(new zn(r.doc.resolve(s-1))),!0},deleteCurrentNode:()=>({tr:e,dispatch:t})=>{let{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;let i=e.selection.$anchor;for(let n=i.depth;n>0;n-=1)if(i.node(n).type===r.type){if(t){let t=i.before(n),r=i.after(n);e.delete(t,r).scrollIntoView()}return!0}return!1},deleteNode:e=>({tr:t,state:n,dispatch:r})=>{let i=$S(e,n.schema),o=t.selection.$anchor;for(let e=o.depth;e>0;e-=1)if(o.node(e).type===i){if(r){let n=o.before(e),r=o.after(e);t.delete(n,r).scrollIntoView()}return!0}return!1},deleteRange:e=>({tr:t,dispatch:n})=>{let{from:r,to:i}=e;return n&&t.delete(r,i),!0},deleteSelection:()=>({state:e,dispatch:t})=>q0(e,t),enter:()=>({commands:e})=>e.keyboardShortcut("Enter"),exitCode:()=>({state:e,dispatch:t})=>$l(e,t),extendMarkRange:(e,t={})=>({tr:n,state:r,dispatch:i})=>{let o=$1(e,r.schema),{doc:s,selection:a}=n,{$from:l,from:c,to:u}=a;if(i){let e=$0(l,o,t);if(e&&e.from<=c&&e.to>=u){let t=zn.create(s,e.from,e.to);n.setSelection(t)}}return!0},first:e=>t=>{let n="function"==typeof e?e(t):e;for(let e=0;e<n.length;e+=1)if(n[e](t))return!0;return!1},focus:(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:o})=>{t={scrollIntoView:!0,...t};let s=()=>{($6()||$3())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),null!=t&&t.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&null===e||!1===e)return!0;if(o&&null===e&&!$2(n.state.selection))return s(),!0;let a=$5(i.doc,e)||n.state.selection,l=n.state.selection.eq(a);return o&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},forEach:(e,t)=>n=>e.every((e,r)=>t(e,{...n,index:r})),insertContent:(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),insertContentAt:(e,t,n)=>({tr:r,dispatch:i,editor:o})=>{var s;if(i){let i,a;n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};try{i=$9(t,o.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:null!==(s=n.errorOnInvalidContent)&&void 0!==s?s:o.options.enableContentCheck})}catch(e){return o.emit("contentError",{editor:o,error:e,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}="number"==typeof e?{from:e,to:e}:{from:e.from,to:e.to},u=!0,h=!0;if((Be(i)?i:[i]).forEach(e=>{e.check(),u=!!u&&e.isText&&0===e.marks.length,h=!!h&&e.isBlock}),l===c&&h){let{parent:e}=r.doc.resolve(l);!e.isTextblock||e.type.spec.code||e.childCount||(l-=1,c+=1)}if(u){if(Array.isArray(t))a=t.map(e=>e.text||"").join("");else if(t instanceof RL){let e="";t.forEach(t=>{t.text&&(e+=t.text)}),a=e}else a="object"==typeof t&&t&&t.text?t.text:t;r.insertText(a,l,c)}else a=i,r.replaceWith(l,c,a);n.updateSelection&&function(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof IR||i instanceof II))return;let o=e.mapping.maps[r],s=0;o.forEach((e,t,n,r)=>{0===s&&(s=r)}),e.setSelection(I8.near(e.doc.resolve(s),-1))}(r,r.steps.length-1,0),n.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:a}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:a})}return!0},joinBackward:()=>({state:e,dispatch:t})=>q2(e,t),joinDown:()=>({state:e,dispatch:t})=>$i(e,t),joinForward:()=>({state:e,dispatch:t})=>$e(e,t),joinItemBackward:()=>({state:e,dispatch:t,tr:n})=>{try{let r=IW(e.doc,e.selection.$from.pos,-1);return null!=r&&(n.join(r,2),t&&t(n),!0)}catch{return!1}},joinItemForward:()=>({state:e,dispatch:t,tr:n})=>{try{let r=IW(e.doc,e.selection.$from.pos,1);return null!=r&&(n.join(r,2),t&&t(n),!0)}catch{return!1}},joinTextblockBackward:()=>({state:e,dispatch:t})=>q4(e,t),joinTextblockForward:()=>({state:e,dispatch:t})=>q5(e,t),joinUp:()=>({state:e,dispatch:t})=>$r(e,t),keyboardShortcut:e=>({editor:t,view:n,tr:r,dispatch:i})=>{let o=(function(e){let t,n,r,i;let o=e.split(/-(?!$)/),s=o[o.length-1];"Space"===s&&(s=" ");for(let e=0;e<o.length-1;e+=1){let s=o[e];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else if(/^s(hift)?$/i.test(s))r=!0;else if(/^mod$/i.test(s))$6()||Bt()?i=!0:n=!0;else throw Error(`Unrecognized modifier name: ${s}`)}return t&&(s=`Alt-${s}`),n&&(s=`Ctrl-${s}`),i&&(s=`Meta-${s}`),r&&(s=`Shift-${s}`),s})(e).split(/-(?!$)/),s=o.find(e=>!["Alt","Ctrl","Meta","Shift"].includes(e)),a=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",e=>e(n,a))});return null==l||l.steps.forEach(e=>{let t=e.map(r.mapping);t&&i&&r.maybeStep(t)}),!0},lift:(e,t={})=>({state:n,dispatch:r})=>{let i=$S(e,n.schema);return!!Bn(n,i,t)&&$o(n,r)},liftEmptyBlock:()=>({state:e,dispatch:t})=>$u(e,t),liftListItem:e=>({state:t,dispatch:n})=>(function(e){return function(t,n){let{$from:r,$to:i}=t.selection,o=r.blockRange(i,t=>t.childCount>0&&t.firstChild.type==e);return!!o&&(!n||(r.node(o.depth-1).type==e?function(e,t,n,r){let i=e.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new II(o-1,s,o,s,new RV(RL.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new R1(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));let a=Iq(r);if(null==a)return!1;i.lift(r,a);let l=i.mapping.map(o,-1)-1;return IH(i.doc,l)&&i.join(l),t(i.scrollIntoView()),!0}(t,n,e,o):function(e,t,n){let r=e.tr,i=n.parent;for(let e=n.end,t=n.endIndex-1,o=n.startIndex;t>o;t--)e-=i.child(t).nodeSize,r.delete(e-1,e+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let a=0==n.startIndex,l=n.endIndex==i.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+ +!a,u+1,s.content.append(l?RL.empty:RL.from(i))))return!1;let h=o.pos,d=h+s.nodeSize;return r.step(new II(h-+!!a,d+ +!!l,h+1,d-1,new RV((a?RL.empty:RL.from(i.copy(RL.empty))).append(l?RL.empty:RL.from(i.copy(RL.empty))),+!a,+!l),+!a)),t(r.scrollIntoView()),!0}(t,n,o)))}})($S(e,t.schema))(t,n),newlineInCode:()=>({state:e,dispatch:t})=>$s(e,t),resetAttributes:(e,t)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null,a=Br("string"==typeof e?e:e.name,r.schema);return!!a&&("node"===a&&(o=$S(e,r.schema)),"mark"===a&&(s=$1(e,r.schema)),i&&n.selection.ranges.forEach(e=>{r.doc.nodesBetween(e.$from.pos,e.$to.pos,(e,r)=>{o&&o===e.type&&n.setNodeMarkup(r,void 0,Bi(e.attrs,t)),s&&e.marks.length&&e.marks.forEach(i=>{s===i.type&&n.addMark(r,r+e.nodeSize,s.create(Bi(i.attrs,t)))})})}),!0)},scrollIntoView:()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),selectAll:()=>({tr:e,dispatch:t})=>{if(t){let t=new zs(e.doc);e.setSelection(t)}return!0},selectNodeBackward:()=>({state:e,dispatch:t})=>q7(e,t),selectNodeForward:()=>({state:e,dispatch:t})=>$t(e,t),selectParentNode:()=>({state:e,dispatch:t})=>$h(e,t),selectTextblockEnd:()=>({state:e,dispatch:t})=>$m(e,t),selectTextblockStart:()=>({state:e,dispatch:t})=>$p(e,t),setContent:(e,t=!1,n={},r={})=>({editor:i,tr:o,dispatch:s,commands:a})=>{var l,c;let{doc:u}=o;if("full"!==n.preserveWhitespace){let a=Bo(e,i.schema,n,{errorOnInvalidContent:null!==(l=r.errorOnInvalidContent)&&void 0!==l?l:i.options.enableContentCheck});return s&&o.replaceWith(0,u.content.size,a).setMeta("preventUpdate",!t),!0}return s&&o.setMeta("preventUpdate",!t),a.insertContentAt({from:0,to:u.content.size},e,{parseOptions:n,errorOnInvalidContent:null!==(c=r.errorOnInvalidContent)&&void 0!==c?c:i.options.enableContentCheck})},setMark:(e,t={})=>({tr:n,state:r,dispatch:i})=>{let{selection:o}=n,{empty:s,ranges:a}=o,l=$1(e,r.schema);if(i){if(s){let e=Bs(r,l);n.addStoredMark(l.create({...e,...t}))}else a.forEach(e=>{let i=e.$from.pos,o=e.$to.pos;r.doc.nodesBetween(i,o,(e,r)=>{let s=Math.max(r,i),a=Math.min(r+e.nodeSize,o);e.marks.find(e=>e.type===l)?e.marks.forEach(e=>{l===e.type&&n.addMark(s,a,l.create({...e.attrs,...t}))}):n.addMark(s,a,l.create(t))})})}return function(e,t,n){var r;let{selection:i}=t,o=null;if($2(i)&&(o=i.$cursor),o){let t=null!==(r=e.storedMarks)&&void 0!==r?r:o.marks();return!!n.isInSet(t)||!t.some(e=>e.type.excludes(n))}let{ranges:s}=i;return s.some(({$from:t,$to:r})=>{let i=0===t.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(t.pos,r.pos,(e,t,r)=>{if(i)return!1;if(e.isInline){let t=!r||r.type.allowsMarkType(n),o=!!n.isInSet(e.marks)||!e.marks.some(e=>e.type.excludes(n));i=t&&o}return!i}),i})}(r,n,l)},setMeta:(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),setNode:(e,t={})=>({state:n,dispatch:r,chain:i})=>{let o;let s=$S(e,n.schema);return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:e})=>!!$g(s,{...o,...t})(n)||e.clearNodes()).command(({state:e})=>$g(s,{...o,...t})(e,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection:e=>({tr:t,dispatch:n})=>{if(n){let{doc:n}=t,r=$4(e,0,n.content.size),i=zi.create(n,r);t.setSelection(i)}return!0},setTextSelection:e=>({tr:t,dispatch:n})=>{if(n){let{doc:n}=t,{from:r,to:i}="number"==typeof e?{from:e,to:e}:e,o=zn.atStart(n).from,s=zn.atEnd(n).to,a=$4(r,o,s),l=$4(i,o,s),c=zn.create(n,a,l);t.setSelection(c)}return!0},sinkListItem:e=>({state:t,dispatch:n})=>(function(e){return function(t,n){let{$from:r,$to:i}=t.selection,o=r.blockRange(i,t=>t.childCount>0&&t.firstChild.type==e);if(!o)return!1;let s=o.startIndex;if(0==s)return!1;let a=o.parent,l=a.child(s-1);if(l.type!=e)return!1;if(n){let r=l.lastChild&&l.lastChild.type==a.type,i=RL.from(r?e.create():null),s=new RV(RL.from(e.create(null,RL.from(a.type.create(null,i)))),r?3:1,0),c=o.start,u=o.end;n(t.tr.step(new II(c-(r?3:1),u,c,u,s,1,!0)).scrollIntoView())}return!0}})($S(e,t.schema))(t,n),splitBlock:({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:i})=>{let{selection:o,doc:s}=t,{$from:a,$to:l}=o,c=Bu(i.extensionManager.attributes,a.node().type.name,a.node().attrs);if(o instanceof zi&&o.node.isBlock)return!!(a.parentOffset&&IV(s,a.pos))&&(r&&(e&&Bp(n,i.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;let u=l.parentOffset===l.parent.content.size,h=0===a.depth?void 0:function(e){for(let t=0;t<e.edgeCount;t+=1){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(a.node(-1).contentMatchAt(a.indexAfter(-1))),d=u&&h?[{type:h,attrs:c}]:void 0,f=IV(t.doc,t.mapping.map(a.pos),1,d);if(!d&&!f&&IV(t.doc,t.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(f=!0,d=h?[{type:h,attrs:c}]:void 0),r){if(f&&(o instanceof zn&&t.deleteSelection(),t.split(t.mapping.map(a.pos),1,d),h&&!u&&!a.parentOffset&&a.parent.type!==h)){let e=t.mapping.map(a.before()),n=t.doc.resolve(e);a.node(-1).canReplaceWith(n.index(),n.index()+1,h)&&t.setNodeMarkup(t.mapping.map(a.before()),h)}e&&Bp(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return f},splitListItem:(e,t={})=>({tr:n,state:r,dispatch:i,editor:o})=>{var s;let a=$S(e,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;let h=l.node(-1);if(h.type!==a)return!1;let d=o.extensionManager.attributes;if(0===l.parent.content.size&&l.node(-1).childCount===l.indexAfter(-1)){if(2===l.depth||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let e=RL.empty,r=l.index(-1)?1:l.index(-2)?2:3;for(let t=l.depth-r;t>=l.depth-3;t-=1)e=RL.from(l.node(t).copy(e));let i=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,o={...Bu(d,l.node().type.name,l.node().attrs),...t},c=(null===(s=a.contentMatch.defaultType)||void 0===s?void 0:s.createAndFill(o))||void 0;e=e.append(RL.from(a.createAndFill(null,c)||void 0));let u=l.before(l.depth-(r-1));n.replace(u,l.after(-i),new RV(e,4-r,0));let h=-1;n.doc.nodesBetween(u,n.doc.content.size,(e,t)=>{if(h>-1)return!1;e.isTextblock&&0===e.content.size&&(h=t+1)}),h>-1&&n.setSelection(zn.near(n.doc.resolve(h))),n.scrollIntoView()}return!0}let f=c.pos===l.end()?h.contentMatchAt(0).defaultType:null,p={...Bu(d,h.type.name,h.attrs),...t},m={...Bu(d,l.node().type.name,l.node().attrs),...t};n.delete(l.pos,c.pos);let g=f?[{type:a,attrs:p},{type:f,attrs:m}]:[{type:a,attrs:p}];if(!IV(n.doc,l.pos,2))return!1;if(i){let{selection:e,storedMarks:t}=r,{splittableMarks:s}=o.extensionManager,a=t||e.$to.parentOffset&&e.$from.marks();if(n.split(l.pos,2,g).scrollIntoView(),!a||!i)return!0;let c=a.filter(e=>s.includes(e.type.name));n.ensureMarks(c)}return!0},toggleList:(e,t,n,r={})=>({editor:i,tr:o,state:s,dispatch:a,chain:l,commands:c,can:u})=>{let{extensions:h,splittableMarks:d}=i.extensionManager,f=$S(e,s.schema),p=$S(t,s.schema),{selection:m,storedMarks:g}=s,{$from:y,$to:b}=m,v=y.blockRange(b),x=g||m.$to.parentOffset&&m.$from.marks();if(!v)return!1;let w=Bl(e=>Bd(e.type.name,h))(m);if(v.depth>=1&&w&&v.depth-w.depth<=1){if(w.node.type===f)return c.liftListItem(p);if(Bd(w.node.type.name,h)&&f.validContent(w.node.content)&&a)return l().command(()=>(o.setNodeMarkup(w.pos,f),!0)).command(()=>Bm(o,f)).command(()=>Bg(o,f)).run()}return n&&x&&a?l().command(()=>{let e=u().wrapInList(f,r),t=x.filter(e=>d.includes(e.type.name));return o.ensureMarks(t),!!e||c.clearNodes()}).wrapInList(f,r).command(()=>Bm(o,f)).command(()=>Bg(o,f)).run():l().command(()=>!!u().wrapInList(f,r)||c.clearNodes()).wrapInList(f,r).command(()=>Bm(o,f)).command(()=>Bg(o,f)).run()},toggleMark:(e,t={},n={})=>({state:r,commands:i})=>{let{extendEmptyMarkRange:o=!1}=n,s=$1(e,r.schema);return Bh(r,s,t)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,t)},toggleNode:(e,t,n={})=>({state:r,commands:i})=>{let o;let s=$S(e,r.schema),a=$S(t,r.schema),l=Bn(r,s,n);return r.selection.$anchor.sameParent(r.selection.$head)&&(o=r.selection.$anchor.parent.attrs),l?i.setNode(a,o):i.setNode(s,{...o,...n})},toggleWrap:(e,t={})=>({state:n,commands:r})=>{let i=$S(e,n.schema);return Bn(n,i,t)?r.lift(i):r.wrapIn(i,t)},undoInputRule:()=>({state:e,dispatch:t})=>{let n=e.plugins;for(let r=0;r<n.length;r+=1){let i;let o=n[r];if(o.spec.isInputRules&&(i=o.getState(e))){if(t){let t=e.tr,n=i.transform;for(let e=n.steps.length-1;e>=0;e-=1)t.step(n.steps[e].invert(n.docs[e]));if(i.text){let n=t.doc.resolve(i.from).marks();t.replaceWith(i.from,i.to,e.schema.text(i.text,n))}else t.delete(i.from,i.to)}return!0}}return!1},unsetAllMarks:()=>({tr:e,dispatch:t})=>{let{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach(t=>{e.removeMark(t.$from.pos,t.$to.pos)}),!0},unsetMark:(e,t={})=>({tr:n,state:r,dispatch:i})=>{var o;let{extendEmptyMarkRange:s=!1}=t,{selection:a}=n,l=$1(e,r.schema),{$from:c,empty:u,ranges:h}=a;if(!i)return!0;if(u&&s){let{from:e,to:t}=a,r=null===(o=c.marks().find(e=>e.type===l))||void 0===o?void 0:o.attrs,i=$0(c,l,r);i&&(e=i.from,t=i.to),n.removeMark(e,t,l)}else h.forEach(e=>{n.removeMark(e.$from.pos,e.$to.pos,l)});return n.removeStoredMark(l),!0},updateAttributes:(e,t={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null,a=Br("string"==typeof e?e:e.name,r.schema);return!!a&&("node"===a&&(o=$S(e,r.schema)),"mark"===a&&(s=$1(e,r.schema)),i&&n.selection.ranges.forEach(e=>{let i,a,l,c;let u=e.$from.pos,h=e.$to.pos;n.selection.empty?r.doc.nodesBetween(u,h,(e,t)=>{o&&o===e.type&&(l=Math.max(t,u),c=Math.min(t+e.nodeSize,h),i=t,a=e)}):r.doc.nodesBetween(u,h,(e,r)=>{r<u&&o&&o===e.type&&(l=Math.max(r,u),c=Math.min(r+e.nodeSize,h),i=r,a=e),r>=u&&r<=h&&(o&&o===e.type&&n.setNodeMarkup(r,void 0,{...e.attrs,...t}),s&&e.marks.length&&e.marks.forEach(i=>{if(s===i.type){let o=Math.max(r,u),a=Math.min(r+e.nodeSize,h);n.addMark(o,a,s.create({...i.attrs,...t}))}}))}),a&&(void 0!==i&&n.setNodeMarkup(i,void 0,{...a.attrs,...t}),s&&a.marks.length&&a.marks.forEach(e=>{s===e.type&&n.addMark(l,c,s.create({...e.attrs,...t}))}))}),!0)},wrapIn:(e,t={})=>({state:n,dispatch:r})=>(function(e,t=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=s&&I$(s,e,t);return!!a&&(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0)}})($S(e,n.schema),t)(n,r),wrapInList:(e,t={})=>({state:n,dispatch:r})=>(function(e,t=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o);if(!s)return!1;let a=r?n.tr:null;return!!function(e,t,n,r=null){let i=!1,o=t,s=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&0==t.startIndex){if(0==t.$from.index(t.depth-1))return!1;let e=s.resolve(t.start-2);o=new R1(e,e,t.depth),t.endIndex<t.parent.childCount&&(t=new R1(t.$from,s.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let a=I$(o,n,r,t);return!!a&&(e&&function(e,t,n,r,i){let o=RL.empty;for(let e=n.length-1;e>=0;e--)o=RL.from(n[e].type.create(n[e].attrs,o));e.step(new II(t.start-2*!!r,t.end,t.start,t.end,new RV(o,0,0),n.length,!0));let s=0;for(let e=0;e<n.length;e++)n[e].type==i&&(s=e+1);let a=n.length-s,l=t.start+n.length-2*!!r,c=t.parent;for(let n=t.startIndex,r=t.endIndex,i=!0;n<r;n++,i=!1)!i&&IV(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=c.child(n).nodeSize}(e,t,a,i,n),!0)}(a,s,e,t)&&(r&&r(a.scrollIntoView()),!0)}})($S(e,n.schema),t)(n,r)});let Bb=$W.create({name:"commands",addCommands:()=>({...By})}),Bv=$W.create({name:"drop",addProseMirrorPlugins(){return[new zg({key:new zv("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),Bx=$W.create({name:"editable",addProseMirrorPlugins(){return[new zg({key:new zv("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Bw=$W.create({name:"focusEvents",addProseMirrorPlugins(){let{editor:e}=this;return[new zg({key:new zv("focusEvents"),props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;let r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;let r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),Bk=$W.create({name:"keymap",addKeyboardShortcuts(){let e=()=>this.editor.commands.first(({commands:e})=>[()=>e.undoInputRule(),()=>e.command(({tr:t})=>{let{selection:n,doc:r}=t,{empty:i,$anchor:o}=n,{pos:s,parent:a}=o,l=o.parent.isTextblock&&s>0?t.doc.resolve(s-1):o,c=l.parent.type.spec.isolating,u=o.pos-o.parentOffset,h=c&&1===l.parent.childCount?u===o.pos:I8.atStart(r).from===s;return!!i&&!!a.type.isTextblock&&!a.textContent.length&&!!h&&(!h||"paragraph"!==o.parent.type.name)&&e.clearNodes()}),()=>e.deleteSelection(),()=>e.joinBackward(),()=>e.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:e})=>[()=>e.deleteSelection(),()=>e.deleteCurrentNode(),()=>e.joinForward(),()=>e.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:e})=>[()=>e.newlineInCode(),()=>e.createParagraphNear(),()=>e.liftEmptyBlock(),()=>e.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},r={...n},i={...n,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return $6()||Bt()?i:r},addProseMirrorPlugins(){return[new zg({key:new zv("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(e=>e.getMeta("composition")))return;let r=e.some(e=>e.docChanged)&&!t.doc.eq(n.doc),i=e.some(e=>e.getMeta("preventClearDocument"));if(!r||i)return;let{empty:o,from:s,to:a}=t.selection,l=I8.atStart(t.doc).from,c=I8.atEnd(t.doc).to;if(o||s!==l||a!==c||!Bf(n.doc))return;let u=n.tr,h=$b({state:n,transaction:u}),{commands:d}=new $v({editor:this.editor,state:h});if(d.clearNodes(),u.steps.length)return u}})]}}),BO=$W.create({name:"paste",addProseMirrorPlugins(){return[new zg({key:new zv("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),BS=$W.create({name:"tabindex",addProseMirrorPlugins(){return[new zg({key:new zv("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});var BC=Object.freeze({__proto__:null,ClipboardTextSerializer:$Y,Commands:Bb,Drop:Bv,Editable:Bx,FocusEvents:Bw,Keymap:Bk,Paste:BO,Tabindex:BS});class BT{get name(){return this.node.type.name}constructor(e,t,n=!1,r=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=t,this.currentNode=r}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return null!==(e=this.actualDepth)&&void 0!==e?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,n=this.to;if(this.isBlock){if(0===this.content.size){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:t,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+ +!this.node.isText}get parent(){if(0===this.depth)return null;let e=this.resolvedPos.start(this.resolvedPos.depth-1);return new BT(this.resolvedPos.doc.resolve(e),this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new BT(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new BT(e,this.editor)}get children(){let e=[];return this.node.content.forEach((t,n)=>{let r=t.isBlock&&!t.isTextblock,i=t.isAtom&&!t.isText,o=this.pos+n+ +!i,s=this.resolvedPos.doc.resolve(o);if(!r&&s.depth<=this.depth)return;let a=new BT(s,this.editor,r,r?t:null);r&&(a.actualDepth=this.depth+1),e.push(new BT(s,this.editor,r,r?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){let e=this.children;return e[e.length-1]||null}closest(e,t={}){let n=null,r=this.parent;for(;r&&!n;){if(r.node.type.name===e){if(Object.keys(t).length>0){let e=r.node.attrs,n=Object.keys(t);for(let r=0;r<n.length;r+=1){let i=n[r];if(e[i]!==t[i])break}}else n=r}r=r.parent}return n}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},n=!1){let r=[];if(!this.children||0===this.children.length)return r;let i=Object.keys(t);return this.children.forEach(o=>{n&&r.length>0||(o.node.type.name===e&&i.every(e=>t[e]===o.node.attrs[e])&&r.push(o),n&&r.length>0||(r=r.concat(o.querySelectorAll(e,t,n))))}),r}setAttribute(e){let{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}let BA=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;class BE extends $x{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:e})=>{throw e},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:e,slice:t,moved:n})=>this.options.onDrop(e,t,n)),this.on("paste",({event:e,slice:t})=>this.options.onPaste(e,t)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=function(e,t,n){let r=document.querySelector("style[data-tiptap-style]");if(null!==r)return r;let i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}(BA,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){let n=$A(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;let t=this.state.plugins,n=t;if([].concat(e).forEach(e=>{let r="string"==typeof e?`${e}$`:e.key;n=t.filter(e=>!e.key.startsWith(r))}),t.length===n.length)return;let r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;let n=[...this.options.enableCoreExtensions?[Bx,$Y.configure({blockSeparator:null===(t=null===(e=this.options.coreExtensionOptions)||void 0===e?void 0:e.clipboardTextSerializer)||void 0===t?void 0:t.blockSeparator}),Bb,Bw,Bk,BS,Bv,BO].filter(e=>"object"!=typeof this.options.enableCoreExtensions||!1!==this.options.enableCoreExtensions[e.name]):[],...this.options.extensions].filter(e=>["extension","node","mark"].includes(null==e?void 0:e.type));this.extensionManager=new $U(n,this)}createCommandManager(){this.commandManager=new $v({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=Bo(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(e=>"collaboration"!==e.name),this.createExtensionManager()}}),t=Bo(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}let n=$5(t,this.options.autofocus);this.view=new qH(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...null===(e=this.options.editorProps)||void 0===e?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:zm.create({doc:t,selection:n||void 0})});let r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass(),this.view.dom.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;let t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(e=>{var t;return null===(t=this.capturedTransaction)||void 0===t?void 0:t.step(e)});return}let t=this.state.apply(e),n=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});let r=e.getMeta("focus"),i=e.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!e.docChanged||e.getMeta("preventUpdate")||this.emit("update",{editor:this,transaction:e})}getAttributes(e){return function(e,t){let n=Br("string"==typeof t?t:t.name,e.schema);return"node"===n?function(e,t){let n=$S(t,e.schema),{from:r,to:i}=e.selection,o=[];e.doc.nodesBetween(r,i,e=>{o.push(e)});let s=o.reverse().find(e=>e.type.name===n.name);return s?{...s.attrs}:{}}(e,t):"mark"===n?Bs(e,t):{}}(this.state,e)}isActive(e,t){let n="string"==typeof e?e:null,r="string"==typeof e?t:e;return function(e,t,n={}){if(!t)return Bn(e,null,n)||Bh(e,null,n);let r=Br(t,e.schema);return"node"===r?Bn(e,t,n):"mark"===r&&Bh(e,t,n)}(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return $D(this.state.doc.content,this.schema)}getText(e){let{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return function(e,t){let n={from:0,to:e.content.size};return $G(e,n,t)}(this.state.doc,{blockSeparator:t,textSerializers:{...$X(this.schema),...n}})}get isEmpty(){return Bf(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){let e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(null!==(e=this.view)&&void 0!==e&&e.docView)}$node(e,t){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelectorAll(e,t))||null}$pos(e){return new BT(this.state.doc.resolve(e),this)}get $doc(){return this.$pos(0)}}function BM(e){return new $I({find:e.find,handler:({state:t,range:n,match:r})=>{let i=$E(e.getAttributes,void 0,r);if(!1===i||null===i)return null;let{tr:o}=t,s=r[r.length-1],a=r[0];if(s){let r=a.search(/\S/),l=n.from+a.indexOf(s),c=l+s.length;if(Bc(n.from,n.to,t.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>l).length)return null;c<n.to&&o.delete(c,n.to),l>n.from&&o.delete(n.from+r,l);let u=n.from+r+s.length;o.addMark(n.from+r,u,e.type.create(i||{})),o.removeStoredMark(e.type)}}})}function BN(e){return new $I({find:e.find,handler:({state:t,range:n,match:r})=>{let i=t.doc.resolve(n.from),o=$E(e.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,o)}})}function B_(e){return new $I({find:e.find,handler:({state:t,range:n,match:r,chain:i})=>{let o=$E(e.getAttributes,void 0,r)||{},s=t.tr.delete(n.from,n.to),a=s.doc.resolve(n.from).blockRange(),l=a&&I$(a,e.type,o);if(!l)return null;if(s.wrap(a,l),e.keepMarks&&e.editor){let{selection:n,storedMarks:r}=t,{splittableMarks:i}=e.editor.extensionManager,o=r||n.$to.parentOffset&&n.$from.marks();if(o){let e=o.filter(e=>i.includes(e.type.name));s.ensureMarks(e)}}if(e.keepAttributes){let t="bulletList"===e.type.name||"orderedList"===e.type.name?"listItem":"taskList";i().updateAttributes(t,o).run()}let c=s.doc.resolve(n.from-1).nodeBefore;c&&c.type===e.type&&IH(s.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,c))&&s.join(n.from-1)}})}let Bj=class e{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=$E($w(this,"addOptions",{name:this.name}))),this.storage=$E($w(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new e(t)}configure(e={}){let t=this.extend({...this.config,addOptions:()=>$$(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(t={}){let n=new e(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=$E($w(n,"addOptions",{name:n.name})),n.storage=$E($w(n,"addStorage",{name:n.name,options:n.options})),n}};class BD{constructor(e,t,n){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.innerDecorations=t.innerDecorations,this.view=t.view,this.HTMLAttributes=t.HTMLAttributes,this.getPos=t.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var t,n,r,i,o,s,a;let{view:l}=this.editor,c=e.target,u=3===c.nodeType?null===(t=c.parentElement)||void 0===t?void 0:t.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(!this.dom||null!==(n=this.contentDOM)&&void 0!==n&&n.contains(c)||!u)return;let h=0,d=0;if(this.dom!==u){let t=this.dom.getBoundingClientRect(),n=u.getBoundingClientRect(),a=null!==(r=e.offsetX)&&void 0!==r?r:null===(i=e.nativeEvent)||void 0===i?void 0:i.offsetX,l=null!==(o=e.offsetY)&&void 0!==o?o:null===(s=e.nativeEvent)||void 0===s?void 0:s.offsetY;h=n.x-t.x+a,d=n.y-t.y+l}null===(a=e.dataTransfer)||void 0===a||a.setDragImage(this.dom,h,d);let f=this.getPos();if("number"!=typeof f)return;let p=zi.create(l.state.doc,f),m=l.state.tr.setSelection(p);l.dispatch(m)}stopEvent(e){var t;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:e});let n=e.target;if(!(this.dom.contains(n)&&!(null!==(t=this.contentDOM)&&void 0!==t&&t.contains(n))))return!1;let r=e.type.startsWith("drag"),i="drop"===e.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!i&&!r)return!0;let{isEditable:o}=this.editor,{isDragging:s}=this,a=!!this.node.type.spec.draggable,l=zi.isSelectable(this.node),c="copy"===e.type,u="paste"===e.type,h="cut"===e.type,d="mousedown"===e.type;if(!a&&l&&r&&e.target===this.dom&&e.preventDefault(),a&&r&&!s&&e.target===this.dom)return e.preventDefault(),!1;if(a&&o&&!s&&d){let e=n.closest("[data-drag-handle]");e&&(this.dom===e||this.dom.contains(e))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(s||i||c||u||h||d&&l)}ignoreMutation(e){return!this.dom||!this.contentDOM||("function"==typeof this.options.ignoreMutation?this.options.ignoreMutation({mutation:e}):!!this.node.isLeaf||!!this.node.isAtom||!("selection"===e.type||this.dom.contains(e.target)&&"childList"===e.type&&($6()||$3())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(e=>e.isContentEditable))&&(this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target)))}updateAttributes(e){this.editor.commands.command(({tr:t})=>{let n=this.getPos();return"number"==typeof n&&(t.setNodeMarkup(n,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){let e=this.getPos();if("number"!=typeof e)return;let t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}}function BP(e){return new $F({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:i})=>{let o=$E(e.getAttributes,void 0,r,i);if(!1===o||null===o)return null;let{tr:s}=t,a=r[r.length-1],l=r[0],c=n.to;if(a){let r=l.search(/\S/),i=n.from+l.indexOf(a),u=i+a.length;if(Bc(n.from,n.to,t.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>i).length)return null;u<n.to&&s.delete(u,n.to),i>n.from&&s.delete(n.from+r,i),c=n.from+r+a.length,s.addMark(n.from+r,c,e.type.create(o||{})),s.removeStoredMark(e.type)}}})}var BR={exports:{}},BI={};BR.exports=function(){if(y)return BI;y=1;var e="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},t=N.useState,n=N.useEffect,r=N.useLayoutEffect,i=N.useDebugValue;function o(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!e(t,r)}catch{return!0}}var s=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?function(e,t){return t()}:function(e,s){var a=s(),l=t({inst:{value:a,getSnapshot:s}}),c=l[0].inst,u=l[1];return r(function(){c.value=a,c.getSnapshot=s,o(c)&&u({inst:c})},[e,a,s]),n(function(){return o(c)&&u({inst:c}),e(function(){o(c)&&u({inst:c})})},[e]),i(a),a};return BI.useSyncExternalStore=void 0!==N.useSyncExternalStore?N.useSyncExternalStore:s,BI}();var Bz=BR.exports;let BL=(...e)=>t=>{e.forEach(e=>{"function"==typeof e?e(t):e&&(e.current=t)})},Bq=({contentComponent:e})=>{let t=Bz.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return N.createElement(N.Fragment,null,Object.values(t))};class B$ extends N.Component{constructor(e){var t;super(e),this.editorContentRef=N.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(null!==(t=e.editor)&&void 0!==t&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){let e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;let t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=function(){let e=new Set,t={};return{subscribe:t=>(e.add(t),()=>{e.delete(t)}),getSnapshot:()=>t,getServerSnapshot:()=>t,setRenderer(n,r){t={...t,[n]:j.createPortal(r.reactElement,r.element,n)},e.forEach(e=>e())},removeRenderer(n){let r={...t};delete r[n],t=r,e.forEach(e=>e())}}}(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(e=>e.hasContentComponentInitialized?e:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){let e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;let t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){let{editor:e,innerRef:t,...n}=this.props;return N.createElement(N.Fragment,null,N.createElement("div",{ref:BL(t,this.editorContentRef),...n}),(null==e?void 0:e.contentComponent)&&N.createElement(Bq,{contentComponent:e.contentComponent}))}}let BB=(0,N.forwardRef)((e,t)=>{let n=N.useMemo(()=>Math.floor(0xffffffff*Math.random()).toString(),[e.editor]);return N.createElement(B$,{key:n,innerRef:t,...e})}),BF=N.memo(BB);var BQ=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;for(i of t.entries())if(!e(i[1],n.get(i[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(t[i]!==n[i])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var r,i,o,s=o[i];if(!("_owner"===s&&t.$$typeof)&&!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n}),BV={exports:{}},BH={};BV.exports=function(){if(b)return BH;b=1;var e="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},t=Bz.useSyncExternalStore,n=N.useRef,r=N.useEffect,i=N.useMemo,o=N.useDebugValue;return BH.useSyncExternalStoreWithSelector=function(s,a,l,c,u){var h=n(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;var f=t(s,(h=i(function(){function t(t){if(!i){if(i=!0,n=t,t=c(t),void 0!==u&&d.hasValue){var o=d.value;if(u(o,t))return r=o}return r=t}if(o=r,e(n,t))return o;var s=c(t);return void 0!==u&&u(o,s)?o:(n=t,r=s)}var n,r,i=!1,o=void 0===l?null:l;return[function(){return t(a())},null===o?void 0:function(){return t(o())}]},[a,l,c,u]))[0],h[1]);return r(function(){d.hasValue=!0,d.value=f},[f]),o(f),f},BH}();var BU=BV.exports;let BW="u">typeof window?N.useLayoutEffect:N.useEffect;class BG{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber||(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber}),this.lastSnapshot}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){let e=()=>{this.transactionNumber+=1,this.subscribers.forEach(e=>e())},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}}let BX=typeof window>"u",BY=BX||!!("u">typeof window&&window.next);class BZ{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(e=>e())}getInitialEditor(){return void 0===this.options.current.immediatelyRender?BX||BY?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){return new BE({...this.options.current,onBeforeCreate:(...e)=>{var t,n;return null===(n=(t=this.options.current).onBeforeCreate)||void 0===n?void 0:n.call(t,...e)},onBlur:(...e)=>{var t,n;return null===(n=(t=this.options.current).onBlur)||void 0===n?void 0:n.call(t,...e)},onCreate:(...e)=>{var t,n;return null===(n=(t=this.options.current).onCreate)||void 0===n?void 0:n.call(t,...e)},onDestroy:(...e)=>{var t,n;return null===(n=(t=this.options.current).onDestroy)||void 0===n?void 0:n.call(t,...e)},onFocus:(...e)=>{var t,n;return null===(n=(t=this.options.current).onFocus)||void 0===n?void 0:n.call(t,...e)},onSelectionUpdate:(...e)=>{var t,n;return null===(n=(t=this.options.current).onSelectionUpdate)||void 0===n?void 0:n.call(t,...e)},onTransaction:(...e)=>{var t,n;return null===(n=(t=this.options.current).onTransaction)||void 0===n?void 0:n.call(t,...e)},onUpdate:(...e)=>{var t,n;return null===(n=(t=this.options.current).onUpdate)||void 0===n?void 0:n.call(t,...e)},onContentError:(...e)=>{var t,n;return null===(n=(t=this.options.current).onContentError)||void 0===n?void 0:n.call(t,...e)},onDrop:(...e)=>{var t,n;return null===(n=(t=this.options.current).onDrop)||void 0===n?void 0:n.call(t,...e)},onPaste:(...e)=>{var t,n;return null===(n=(t=this.options.current).onPaste)||void 0===n?void 0:n.call(t,...e)}})}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(n=>!!["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)||("extensions"===n&&e.extensions&&t.extensions?e.extensions.length===t.extensions.length&&e.extensions.every((e,n)=>{var r;return e===(null===(r=t.extensions)||void 0===r?void 0:r[n])}):e[n]===t[n]))}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&0===e.length?BZ.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(null===this.previousDeps){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((t,n)=>t===e[n]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){let e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}let BK=(0,N.createContext)({editor:null}),BJ=BK.Consumer,B0=()=>(0,N.useContext)(BK);function B1({children:e,slotAfter:t,slotBefore:n,editorContainerProps:r={},...i}){let o=function(e={},t=[]){let n=(0,N.useRef)(e);n.current=e;let[r]=(0,N.useState)(()=>new BZ(n)),i=Bz.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return(0,N.useDebugValue)(i),(0,N.useEffect)(r.onRender(t)),function(e){var t;let[n]=(0,N.useState)(()=>new BG(e.editor)),r=BU.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,null!==(t=e.equalityFn)&&void 0!==t?t:BQ);BW(()=>n.watch(e.editor),[e.editor,n]),(0,N.useDebugValue)(r)}({editor:i,selector:({transactionNumber:t})=>!1===e.shouldRerenderOnTransaction?null:e.immediatelyRender&&0===t?0:t+1}),i}(i);return o?N.createElement(BK.Provider,{value:{editor:o}},n,N.createElement(BJ,null,({editor:e})=>N.createElement(BF,{editor:e,...r})),e,t):null}let B2=(0,N.createContext)({onDragStart:void 0}),B4=()=>(0,N.useContext)(B2),B5=N.forwardRef((e,t)=>{let{onDragStart:n}=B4(),r=e.as||"div";return N.createElement(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});class B3{constructor(e,{editor:t,props:n={},as:r="div",className:i=""}){this.ref=null,this.id=Math.floor(0xffffffff*Math.random()).toString(),this.component=e,this.editor=t,this.props=n,this.element=document.createElement(r),this.element.classList.add("react-renderer"),i&&this.element.classList.add(...i.split(" ")),this.editor.isInitialized?(0,j.flushSync)(()=>{this.render()}):this.render()}render(){var e,t;let n=this.component,r=this.props,i=this.editor;("function"==typeof n&&n.prototype&&n.prototype.isReactComponent||"object"==typeof n&&(null===(t=n.$$typeof)||void 0===t?void 0:t.toString())==="Symbol(react.forward_ref)")&&(r.ref=e=>{this.ref=e}),this.reactElement=N.createElement(n,{...r}),null===(e=null==i?void 0:i.contentComponent)||void 0===e||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;let t=this.editor;null===(e=null==t?void 0:t.contentComponent)||void 0===e||e.removeRenderer(this.id)}updateAttributes(e){Object.keys(e).forEach(t=>{this.element.setAttribute(t,e[t])})}}class B6 extends BD{mount(){let e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(e={})=>this.updateAttributes(e),deleteNode:()=>this.deleteNode()};if(!this.component.displayName){let e;this.component.displayName=(e=this.extension.name).charAt(0).toUpperCase()+e.substring(1)}let t={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:e=>{e&&this.contentDOMElement&&e.firstChild!==this.contentDOMElement&&e.appendChild(this.contentDOMElement)}},n=this.component,r=N.memo(e=>N.createElement(B2.Provider,{value:t},N.createElement(n,e)));r.displayName="ReactNodeView",this.node.isLeaf?this.contentDOMElement=null:this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.style.whiteSpace="inherit");let i=this.node.isInline?"span":"div";this.options.as&&(i=this.options.as);let{className:o=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new B3(r,{editor:this.editor,props:e,as:i,className:`node-${this.node.type.name} ${o}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(null!==(e=this.renderer.element.firstElementChild)&&void 0!==e&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){let{from:e,to:t}=this.editor.state.selection,n=this.getPos();if("number"==typeof n){if(e<=n&&t>=n+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}}update(e,t,n){let r=e=>{this.renderer.updateProps(e),"function"==typeof this.options.attrs&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if("function"==typeof this.options.update){let i=this.node,o=this.decorations,s=this.innerDecorations;return this.node=e,this.decorations=t,this.innerDecorations=n,this.options.update({oldNode:i,oldDecorations:o,newNode:e,newDecorations:t,oldInnerDecorations:s,innerDecorations:n,updateProps:()=>r({node:e,decorations:t,innerDecorations:n})})}return e===this.node&&this.decorations===t&&this.innerDecorations===n||(this.node=e,this.decorations=t,this.innerDecorations=n,r({node:e,decorations:t,innerDecorations:n})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if("function"==typeof this.options.attrs){let t=this.editor.extensionManager.attributes,n=$T(this.node,t);e=this.options.attrs({node:this.node,HTMLAttributes:n})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}function B7(e,t){return n=>n.editor.contentComponent?new B6(e,n,t):{}}function B8(){return M.j.jsx("div",{className:"w-full h-full min-h-60 flex flex-col justify-center items-center text-center rounded-md p-2 bg-white dark:bg-gray-800",children:M.j.jsxs("div",{className:"mb-2 text-sm text-gray-400 dark:text-gray-200",children:[M.j.jsx(M.d,{classNames:"w-5 h-5"}),"Loading"]})})}function B9({error:e}){return M.j.jsx("div",{className:"w-full h-full min-h-60 flex flex-col justify-center items-center bg-rose-100 dark:bg-rose-900 text-red text-center rounded-md p-2",children:M.j.jsx("div",{className:"mb-2 text-sm text-rose-500 dark:text-rose-400",children:e})})}function Fe({analysis:e}){let[t,n]=(0,N.useState)(!1),[r,i]=(0,N.useState)([]),[o,s]=(0,N.useState)("table"),[a,l]=(0,N.useState)(!1),c=(0,N.useMemo)(()=>{if(!e)return null;let t=e.rows.map(t=>{let n={};return e.columns.forEach(e=>{let r=e.title||e.dataIndex;n[r]=void 0===t[r]||null===t[r]?"":t[r]}),n}),n=(0,_.T)(t),r=(0,_.p)(n),i=T3({data:r.data,availableColumns:r.columns.map(e=>({...e,description:"",isDate:e.isDate||!1,dateToUnix:e.dateToUnix||(e=>new Date(e).getTime())}))});return i.autoSelectVariables(),{csvString:n,data:r,chartManager:i,reactive_vars:{},chart_images:{},analysis:{}}},[e.analysis_id]),u=(0,N.useMemo)(()=>c&&M.j.jsx(P5,{stepData:c,initialQuestion:null==e?void 0:e.question,initialOptionsExpanded:t}),[e.analysis_id,c,t]);(0,N.useEffect)(()=>{let t=[];t.push({component:M.j.jsx("div",{className:"w-full overflow-x-auto",children:M.j.jsx(M.T,{columns:e.columns,rows:e.rows,columnHeaderClassNames:"py-2",skipColumns:["index"],rootClassNames:"shadow-sm min-w-[400px]"})}),key:"table",tabLabel:"Table",icon:M.j.jsx(ed,{className:"w-4 h-4 mb-0.5 mr-1 inline"})}),t.push({component:M.j.jsx(kf,{children:u}),key:"chart",tabLabel:"Chart",icon:M.j.jsx(B,{className:"w-4 h-4 mb-0.5 mr-1 inline"})}),i(t)},[e.analysis_id,u]);let h=(0,N.useRef)(null);return(0,N.useEffect)(()=>{let e=e=>{var t;let r=document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement,i=(null==(t=h.current)?void 0:t.contains(document.activeElement))||h.current===document.activeElement;if(!r&&i){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;(0,M.ab)(e.key,M.a8.TOGGLE_CHART_OPTIONS)&&"chart"===o&&(n(e=>!e),e.preventDefault()),(0,M.ab)(e.key,M.a8.VIEW_TABLE)&&(s("table"),e.preventDefault()),(0,M.ab)(e.key,M.a8.VIEW_CHART)&&(s("chart"),e.preventDefault())}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[o,s]),M.j.jsxs("div",{ref:h,className:"flex flex-col space-y-4",tabIndex:-1,children:[e.question&&M.j.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg border dark:border-gray-600",children:M.j.jsxs("div",{className:"flex items-start gap-2",children:[M.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500 dark:text-blue-400 mt-0.5 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[M.j.jsx("circle",{cx:"12",cy:"12",r:"10"}),M.j.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),M.j.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),M.j.jsxs("div",{children:[M.j.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"SQL Analysis"}),M.j.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:e.question})]})]})}),M.j.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[M.j.jsxs("span",{className:"inline-flex items-center gap-1 bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 text-xs font-medium px-2.5 py-1 rounded",children:[M.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:[M.j.jsx("path",{d:"M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"}),M.j.jsx("path",{d:"M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"}),M.j.jsx("path",{d:"M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"})]}),(null==e?void 0:e.db_name)||"Database"]}),e.rows&&M.j.jsxs("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded dark:bg-blue-900/30 dark:text-blue-300",children:[e.rows.length," ",1===e.rows.length?"row":"rows"]})]}),M.j.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-600 overflow-hidden",children:[M.j.jsxs("div",{className:"flex flex-wrap items-center justify-between p-3 border-b dark:border-gray-600 bg-gray-50 dark:bg-gray-700",children:[M.j.jsx("div",{className:"flex items-center gap-2",children:M.j.jsx("nav",{className:"flex space-x-4","aria-label":"Tabs",children:r.map(e=>M.j.jsxs("button",{onClick:()=>s(e.key),className:`
                    px-3 py-2 text-sm font-medium rounded-t-lg flex items-center gap-2
                    ${o===e.key?"border-b-2 border-blue-500 text-blue-600 dark:text-white":"text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}
                  `,children:[M.j.jsxs("span",{className:"flex items-center",children:[e.icon,e.tabLabel]}),"table"===e.key&&M.j.jsx(M.a2,{keyValue:M.a8.VIEW_TABLE,className:"opacity-50 px-1 py-0.5"}),"chart"===e.key&&M.j.jsx(M.a2,{keyValue:M.a8.VIEW_CHART,className:"opacity-50 px-1 py-0.5"})]},e.key))})}),(null==e?void 0:e.sql)&&M.j.jsxs("button",{onClick:()=>l(!a),className:"text-xs bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded px-2 py-1 transition-colors flex items-center gap-1",children:[M.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:[M.j.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),M.j.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),a?"Hide SQL":"Show SQL"]})]}),a&&(null==e?void 0:e.sql)&&M.j.jsxs("div",{className:"border-b dark:border-gray-700",children:[M.j.jsxs("div",{className:"flex flex-wrap items-center justify-between px-3 py-2 bg-gray-100 dark:bg-gray-700",children:[M.j.jsxs("div",{className:"flex items-center gap-1.5 mb-2 sm:mb-0",children:[M.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-purple-500 dark:text-purple-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[M.j.jsx("path",{d:"M8 9l3 3-3 3"}),M.j.jsx("line",{x1:"13",y1:"15",x2:"16",y2:"15"}),M.j.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"})]}),M.j.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:"SQL Query"})]}),M.j.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(e.sql||"")},className:"text-xs bg-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-300 rounded px-1.5 py-0.5 transition-colors flex items-center gap-1",children:[M.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:[M.j.jsx("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),M.j.jsx("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"})]}),"Copy"]})]}),M.j.jsx("div",{className:"max-h-[150px] sm:max-h-[200px] overflow-auto",children:M.j.jsx(kp,{code:e.sql||"",language:"sql",editable:!1,className:"text-sm"})})]}),M.j.jsx("div",{className:"p-2 sm:p-3",children:r.map(e=>M.j.jsx("div",{className:e.key===o?"z-2":"absolute overflow-hidden top-[-100%] z-[-1] pointer-events-none *:pointer-events-none opacity-0",children:e.component},e.key))})]})]})}function Ft({analysis:e}){var t,n,r;return M.j.jsxs("div",{className:"flex flex-col space-y-4",children:[(null==(t=e.inputs)?void 0:t.question)&&M.j.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg border dark:border-gray-600",children:M.j.jsxs("div",{className:"flex items-start gap-2",children:[M.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500 dark:text-blue-400 mt-0.5 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[M.j.jsx("circle",{cx:"12",cy:"12",r:"10"}),M.j.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),M.j.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),M.j.jsxs("div",{children:[M.j.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Question"}),M.j.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:e.inputs.question})]})]})}),(null==(n=e.result)?void 0:n.answer)&&M.j.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-600 p-4",children:[M.j.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b dark:border-gray-600",children:[M.j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500 dark:text-green-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:M.j.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),M.j.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Answer from Web Search"})]}),M.j.jsx("div",{className:"prose dark:prose-invert prose-sm max-w-none",dangerouslySetInnerHTML:{__html:Of.parse(e.result.answer)}})]}),(null==(r=e.result)?void 0:r.reference_sources)&&Array.isArray(e.result.reference_sources)&&e.result.reference_sources.length>0&&M.j.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg border dark:border-gray-600 p-3 sm:p-4",children:[M.j.jsxs("div",{className:"flex items-center gap-2 mb-3 pb-2 border-b dark:border-gray-600",children:[M.j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-500 dark:text-indigo-400 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:M.j.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),M.j.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Reference Sources"})]}),M.j.jsx("ul",{className:"space-y-2",children:e.result.reference_sources.map((e,t)=>M.j.jsxs("li",{className:"flex items-start",children:[M.j.jsx("span",{className:"inline-flex items-center justify-center h-5 w-5 rounded-full bg-indigo-100 dark:bg-indigo-900 text-xs text-indigo-700 dark:text-indigo-300 mr-2 flex-shrink-0",children:t+1}),M.j.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 dark:text-blue-400 hover:underline hover:text-blue-800 dark:hover:text-blue-300 break-all",children:e.source})]},t))})]})]})}function Fn({analysis:e}){var t;return M.j.jsxs("div",{className:"flex flex-col space-y-4",children:[(null==(t=e.inputs)?void 0:t.question)&&M.j.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg border dark:border-gray-600",children:M.j.jsxs("div",{className:"flex items-start gap-2",children:[M.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500 dark:text-blue-400 mt-0.5 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[M.j.jsx("circle",{cx:"12",cy:"12",r:"10"}),M.j.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),M.j.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),M.j.jsxs("div",{children:[M.j.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Question"}),M.j.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:e.inputs.question})]})]})}),M.j.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-600 p-3 sm:p-4",children:[M.j.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b dark:border-gray-600",children:[M.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500 dark:text-blue-400 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[M.j.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),M.j.jsx("polyline",{points:"14 2 14 8 20 8"}),M.j.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),M.j.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),M.j.jsx("polyline",{points:"10 9 9 9 8 9"})]}),M.j.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"PDF Citations"})]}),e.result.citations.map((e,t)=>M.j.jsxs("div",{className:"mb-4 relative group",children:[M.j.jsx("div",{className:"prose dark:prose-invert prose-sm max-w-none py-1",dangerouslySetInnerHTML:{__html:Of.parse(e.text)}}),e.citations&&Array.isArray(e.citations)&&e.citations.length>0&&M.j.jsxs(M.j.Fragment,{children:[M.j.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 flex flex-wrap items-center",children:[M.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1 flex-shrink-0 text-blue-500 dark:text-blue-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[M.j.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),M.j.jsx("polyline",{points:"14 2 14 8 20 8"})]}),M.j.jsx("span",{className:"italic mr-1",children:"Source:"}),M.j.jsx("span",{className:"break-all",children:e.citations[0].document_title}),e.citations[0].start_page_number&&M.j.jsxs("span",{className:"ml-1",children:["(Pages ",e.citations[0].start_page_number,"-",e.citations[0].end_page_number,")"]})]}),M.j.jsx("div",{className:"absolute left-0 right-0 -bottom-1 opacity-0 invisible group-hover:opacity-100 group-hover:visible md:transition-all md:duration-200 transform translate-y-full z-10",children:M.j.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg border dark:border-gray-600 mt-2 shadow-lg",children:[M.j.jsx("h5",{className:"text-xs font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Cited Text:"}),M.j.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300 italic bg-gray-100 dark:bg-gray-800 p-2 rounded",children:['"',e.citations[0].cited_text,'"']})]})}),M.j.jsx("button",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1 block md:hidden",onClick:e=>{var t;let n=null==(t=e.currentTarget.parentElement)?void 0:t.querySelector(".mobile-citation-panel");n&&n.classList.toggle("hidden")},children:"View citation"}),M.j.jsx("div",{className:"mobile-citation-panel hidden mt-2 md:hidden",children:M.j.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg border dark:border-gray-600 shadow-sm",children:[M.j.jsx("h5",{className:"text-xs font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Cited Text:"}),M.j.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300 italic bg-gray-100 dark:bg-gray-800 p-2 rounded",children:['"',e.citations[0].cited_text,'"']})]})})]})]},t))]})]})}class Fr{constructor(e,t,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=t,this.end=n}static range(e,t){return t?e&&e.loc&&t.loc&&e.loc.lexer===t.loc.lexer?new Fr(e.loc.lexer,e.loc.start,t.loc.end):null:e&&e.loc}}let Fi=class e{constructor(e,t){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=t}range(t,n){return new e(n,Fr.range(this,t))}};class Fo{constructor(e,t){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n,r,i="KaTeX parse error: "+e,o=t&&t.loc;if(o&&o.start<=o.end){var s,a=o.lexer.input;n=o.start,r=o.end,n===a.length?i+=" at end of input: ":i+=" at position "+(n+1)+": ";var l,c=a.slice(n,r).replace(/[^]/g,"$&");i+=(n>15?""+a.slice(n-15,n):a.slice(0,n))+c+(r+15<a.length?a.slice(r,r+15)+"":a.slice(r))}var u=Error(i);return u.name="ParseError",u.__proto__=Fo.prototype,u.position=n,null!=n&&null!=r&&(u.length=r-n),u.rawMessage=e,u}}Fo.prototype.__proto__=Error.prototype;var Fs=/([A-Z])/g,Fa={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Fl=/[&><"']/g,Fc=function e(t){return"ordgroup"===t.type||"color"===t.type?1===t.body.length?e(t.body[0]):t:"font"===t.type?e(t.body):t},Fu=function(e){if(!e)throw Error("Expected non-null, but got "+String(e));return e},Fh={contains:function(e,t){return -1!==e.indexOf(t)},deflt:function(e,t){return void 0===e?t:e},escape:function(e){return String(e).replace(Fl,e=>Fa[e])},hyphenate:function(e){return e.replace(Fs,"-$1").toLowerCase()},getBaseElem:Fc,isCharacterBox:function(e){var t=Fc(e);return"mathord"===t.type||"textord"===t.type||"atom"===t.type},protocolFromUrl:function(e){var t=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return t?":"===t[2]&&/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(t[1])?t[1].toLowerCase():null:"_relative"}},Fd={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:e=>"#"+e},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(e,t)=>(t.push(e),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:e=>Math.max(0,e),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:e=>Math.max(0,e),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:e=>Math.max(0,e),cli:"-e, --max-expand <n>",cliProcessor:e=>"Infinity"===e?1/0:parseInt(e)},globalGroup:{type:"boolean",cli:!1}};class Ff{constructor(e){for(var t in this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{},Fd)if(Fd.hasOwnProperty(t)){var n=Fd[t];this[t]=void 0!==e[t]?n.processor?n.processor(e[t]):e[t]:function(e){if(e.default)return e.default;var t=e.type,n=Array.isArray(t)?t[0]:t;if("string"!=typeof n)return n.enum[0];switch(n){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}(n)}}reportNonstrict(e,t,n){var r=this.strict;if("function"==typeof r&&(r=r(e,t,n)),!(!r||"ignore"===r)){if(!0===r||"error"===r)throw new Fo("LaTeX-incompatible input and strict mode is set to 'error': "+(t+" [")+e+"]",n);"warn"===r?"u">typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" [")+e+"]"):"u">typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+r+"': "+t+" [")+e+"]")}}useStrictBehavior(e,t,n){var r=this.strict;if("function"==typeof r)try{r=r(e,t,n)}catch{r="error"}return!!r&&"ignore"!==r&&(!0===r||"error"===r||("warn"===r?"u">typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" [")+e+"]"):"u">typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+r+"': "+t+" [")+e+"]"),!1))}isTrusted(e){if(e.url&&!e.protocol){var t=Fh.protocolFromUrl(e.url);if(null==t)return!1;e.protocol=t}return!!("function"==typeof this.trust?this.trust(e):this.trust)}}class Fp{constructor(e,t,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=t,this.cramped=n}sup(){return Fm[Fg[this.id]]}sub(){return Fm[Fy[this.id]]}fracNum(){return Fm[Fb[this.id]]}fracDen(){return Fm[Fv[this.id]]}cramp(){return Fm[Fx[this.id]]}text(){return Fm[Fw[this.id]]}isTight(){return this.size>=2}}var Fm=[new Fp(0,0,!1),new Fp(1,0,!0),new Fp(2,1,!1),new Fp(3,1,!0),new Fp(4,2,!1),new Fp(5,2,!0),new Fp(6,3,!1),new Fp(7,3,!0)],Fg=[4,5,4,5,6,7,6,7],Fy=[5,5,5,5,7,7,7,7],Fb=[2,3,4,5,6,7,6,7],Fv=[3,3,5,5,7,7,7,7],Fx=[1,1,3,3,5,5,7,7],Fw=[0,1,2,3,2,3,2,3],Fk={DISPLAY:Fm[0],TEXT:Fm[2],SCRIPT:Fm[4],SCRIPTSCRIPT:Fm[6]},FO=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}],FS=[];function FC(e){for(var t=0;t<FS.length;t+=2)if(e>=FS[t]&&e<=FS[t+1])return!0;return!1}FO.forEach(e=>e.blocks.forEach(e=>FS.push(...e)));var FT=function(e,t,n){t*=1e3;var r,i,o,s,a,l,c="";switch(e){case"sqrtMain":c="M95,"+(622+(r=t)+80)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+r/2.075+" -"+r+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+r)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+r)+" 80h400000v"+(40+r)+"h-400000z";break;case"sqrtSize1":c="M263,"+(601+(i=t)+80)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+i/2.084+" -"+i+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+i)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+i)+" 80h400000v"+(40+i)+"h-400000z";break;case"sqrtSize2":c="M983 "+(10+(o=t)+80)+`
l`+o/3.13+" -"+o+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+o)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+o)+" 80h400000v"+(40+o)+"h-400000z";break;case"sqrtSize3":c="M424,"+(2398+(s=t)+80)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+s/4.223+" -"+s+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+s)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+s)+" 80"+`
h400000v`+(40+s)+"h-400000z";break;case"sqrtSize4":c="M473,"+(2713+(a=t)+80)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+a/5.298+" -"+a+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+a)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+a)+" 80h400000v"+(40+a)+"H1017.7z";break;case"sqrtTall":c="M702 "+((l=t)+80)+"H400000"+(40+l)+`
H742v`+(n-54-80-l)+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+"80H400000v"+(40+l)+"H742z"}return c},FA=function(e,t){switch(e){case"":return"M291 0 H417 V"+t+" H291z M291 0 H417 V"+t+" H291z";case"":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z";case"":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z"+("M367 0 H410 V"+t+" H367z M367 0 H410 V")+t+" H367z";case"":return"M457 0 H583 V"+t+" H457z M457 0 H583 V"+t+" H457z";case"":return"M319 0 H403 V"+t+" H319z M319 0 H403 V"+t+" H319z";case"":return"M263 0 H347 V"+t+" H263z M263 0 H347 V"+t+" H263z";case"":return"M384 0 H504 V"+t+" H384z M384 0 H504 V"+t+" H384z";case"":return"M312 0 H355 V"+t+" H312z M312 0 H355 V"+t+" H312z";case"":return"M257 0 H300 V"+t+" H257z M257 0 H300 V"+t+" H257z"+("M478 0 H521 V"+t+" H478z M478 0 H521 V")+t+" H478z";default:return""}},FE={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},FM=function(e,t){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+t+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+t+" v1759 h84z";case"vert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+" v585 h43z";case"doublevert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+` v585 h43z
M367 15 v585 v`+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+t+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+t+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+t+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v602 h84z
M403 1759 V0 H319 V1759 v`+t+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v602 h84z
M347 1759 V0 h-84 V1759 v`+t+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(t+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(t+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(t+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(t+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw Error("Unknown stretchy delimiter.")}};class FN{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return Fh.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e}toText(){return this.children.map(e=>e.toText()).join("")}}var F_={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},Fj={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},FD={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function FP(e,t,n){if(!F_[t])throw Error("Font metrics not found for font: "+t+".");var r=e.charCodeAt(0),i=F_[t][r];if(!i&&e[0]in FD&&(r=FD[e[0]].charCodeAt(0),i=F_[t][r]),!i&&"text"===n&&FC(r)&&(i=F_[t][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var FR={},FI=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],Fz=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],FL=function(e,t){return t.size<2?e:FI[e-1][t.size-1]};class Fq{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Fq.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=Fz[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var t={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return new Fq(t)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:FL(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:Fz[e-1]})}havingBaseStyle(e){e=e||this.style.text();var t=FL(Fq.BASESIZE,e);return this.size===t&&this.textSize===Fq.BASESIZE&&this.style===e?this:this.extend({style:e,size:t})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Fq.BASESIZE?["sizing","reset-size"+this.size,"size"+Fq.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=function(e){var t;if(!FR[t=e>=5?0:e>=3?1:2]){var n=FR[t]={cssEmPerMu:Fj.quad[t]/18};for(var r in Fj)Fj.hasOwnProperty(r)&&(n[r]=Fj[r][t])}return FR[t]}(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Fq.BASESIZE=6;var F$={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:1.00375,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:1.00375},FB={ex:!0,em:!0,mu:!0},FF=function(e){return"string"!=typeof e&&(e=e.unit),e in F$||e in FB||"ex"===e},FQ=function(e,t){var n,r;if(e.unit in F$)n=F$[e.unit]/t.fontMetrics().ptPerEm/t.sizeMultiplier;else if("mu"===e.unit)n=t.fontMetrics().cssEmPerMu;else{if(r=t.style.isTight()?t.havingStyle(t.style.text()):t,"ex"===e.unit)n=r.fontMetrics().xHeight;else if("em"===e.unit)n=r.fontMetrics().quad;else throw new Fo("Invalid unit: '"+e.unit+"'");r!==t&&(n*=r.sizeMultiplier/t.sizeMultiplier)}return Math.min(e.number*n,t.maxSize)},FV=function(e){return+e.toFixed(4)+"em"},FH=function(e){return e.filter(e=>e).join(" ")},FU=function(e,t,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},t){t.style.isTight()&&this.classes.push("mtight");var r=t.getColor();r&&(this.style.color=r)}},FW=function(e){var t=document.createElement(e);for(var n in t.className=FH(this.classes),this.style)this.style.hasOwnProperty(n)&&(t.style[n]=this.style[n]);for(var r in this.attributes)this.attributes.hasOwnProperty(r)&&t.setAttribute(r,this.attributes[r]);for(var i=0;i<this.children.length;i++)t.appendChild(this.children[i].toNode());return t},FG=/[\s"'>/=\x00-\x1f]/,FX=function(e){var t="<"+e;this.classes.length&&(t+=' class="'+Fh.escape(FH(this.classes))+'"');var n="";for(var r in this.style)this.style.hasOwnProperty(r)&&(n+=Fh.hyphenate(r)+":"+this.style[r]+";");for(var i in n&&(t+=' style="'+Fh.escape(n)+'"'),this.attributes)if(this.attributes.hasOwnProperty(i)){if(FG.test(i))throw new Fo("Invalid attribute name '"+i+"'");t+=" "+i+'="'+Fh.escape(this.attributes[i])+'"'}t+=">";for(var o=0;o<this.children.length;o++)t+=this.children[o].toMarkup();return t+("</"+e)+">"};class FY{constructor(e,t,n,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,FU.call(this,e,n,r),this.children=t||[]}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return Fh.contains(this.classes,e)}toNode(){return FW.call(this,"span")}toMarkup(){return FX.call(this,"span")}}class FZ{constructor(e,t,n,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,FU.call(this,t,r),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return Fh.contains(this.classes,e)}toNode(){return FW.call(this,"a")}toMarkup(){return FX.call(this,"a")}}class FK{constructor(e,t,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=t,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return Fh.contains(this.classes,e)}toNode(){var e=document.createElement("img");for(var t in e.src=this.src,e.alt=this.alt,e.className="mord",this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);return e}toMarkup(){var e='<img src="'+Fh.escape(this.src)+'" alt="'+Fh.escape(this.alt)+'"',t="";for(var n in this.style)this.style.hasOwnProperty(n)&&(t+=Fh.hyphenate(n)+":"+this.style[n]+";");return t&&(e+=' style="'+Fh.escape(t)+'"'),e+="'/>"}}var FJ={:"",:"",:"",:""};class F0{constructor(e,t,n,r,i,o,s,a){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=t||0,this.depth=n||0,this.italic=r||0,this.skew=i||0,this.width=o||0,this.classes=s||[],this.style=a||{},this.maxFontSize=0;var l=function(e){for(var t=0;t<FO.length;t++)for(var n=FO[t],r=0;r<n.blocks.length;r++){var i=n.blocks[r];if(e>=i[0]&&e<=i[1])return n.name}return null}(this.text.charCodeAt(0));l&&this.classes.push(l+"_fallback"),/[]/.test(this.text)&&(this.text=FJ[this.text])}hasClass(e){return Fh.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),t=null;for(var n in this.italic>0&&((t=document.createElement("span")).style.marginRight=FV(this.italic)),this.classes.length>0&&((t=t||document.createElement("span")).className=FH(this.classes)),this.style)this.style.hasOwnProperty(n)&&((t=t||document.createElement("span")).style[n]=this.style[n]);return t?(t.appendChild(e),t):e}toMarkup(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=Fh.escape(FH(this.classes)),t+='"');var n="";for(var r in this.italic>0&&(n+="margin-right:"+this.italic+"em;"),this.style)this.style.hasOwnProperty(r)&&(n+=Fh.hyphenate(r)+":"+this.style[r]+";");n&&(e=!0,t+=' style="'+Fh.escape(n)+'"');var i=Fh.escape(this.text);return e?(t+=">",t+=i,t+="</span>"):i}}class F1{constructor(e,t){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=t||{}}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);for(var n=0;n<this.children.length;n++)e.appendChild(this.children[n].toNode());return e}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+Fh.escape(this.attributes[t])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+"</svg>"}}class F2{constructor(e,t){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=t}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?e.setAttribute("d",this.alternate):e.setAttribute("d",FE[this.pathName]),e}toMarkup(){return this.alternate?'<path d="'+Fh.escape(this.alternate)+'"/>':'<path d="'+Fh.escape(FE[this.pathName])+'"/>'}}class F4{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","line");for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);return e}toMarkup(){var e="<line";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+Fh.escape(this.attributes[t])+'"');return e+"/>"}}function F5(e){if(e instanceof F0)return e;throw Error("Expected symbolNode but got "+String(e)+".")}var F3={bin:1,close:1,inner:1,open:1,punct:1,rel:1},F6={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},F7={math:{},text:{}};function F8(e,t,n,r,i,o){F7[e][i]={font:t,group:n,replace:r},o&&r&&(F7[e][r]=F7[e][i])}var F9="math",Qe="text",Qt="main",Qn="accent-token",Qr="close",Qi="inner",Qo="mathord",Qs="op-token",Qa="open",Ql="punct",Qc="spacing",Qu="textord";F8(F9,Qt,"rel","","\\equiv",!0),F8(F9,Qt,"rel","","\\prec",!0),F8(F9,Qt,"rel","","\\succ",!0),F8(F9,Qt,"rel","","\\sim",!0),F8(F9,Qt,"rel","","\\perp"),F8(F9,Qt,"rel","","\\preceq",!0),F8(F9,Qt,"rel","","\\succeq",!0),F8(F9,Qt,"rel","","\\simeq",!0),F8(F9,Qt,"rel","","\\mid",!0),F8(F9,Qt,"rel","","\\ll",!0),F8(F9,Qt,"rel","","\\gg",!0),F8(F9,Qt,"rel","","\\asymp",!0),F8(F9,Qt,"rel","","\\parallel"),F8(F9,Qt,"rel","","\\bowtie",!0),F8(F9,Qt,"rel","","\\smile",!0),F8(F9,Qt,"rel","","\\sqsubseteq",!0),F8(F9,Qt,"rel","","\\sqsupseteq",!0),F8(F9,Qt,"rel","","\\doteq",!0),F8(F9,Qt,"rel","","\\frown",!0),F8(F9,Qt,"rel","","\\ni",!0),F8(F9,Qt,"rel","","\\propto",!0),F8(F9,Qt,"rel","","\\vdash",!0),F8(F9,Qt,"rel","","\\dashv",!0),F8(F9,Qt,"rel","","\\owns"),F8(F9,Qt,Ql,".","\\ldotp"),F8(F9,Qt,Ql,"","\\cdotp"),F8(F9,Qt,Qu,"#","\\#"),F8(Qe,Qt,Qu,"#","\\#"),F8(F9,Qt,Qu,"&","\\&"),F8(Qe,Qt,Qu,"&","\\&"),F8(F9,Qt,Qu,"","\\aleph",!0),F8(F9,Qt,Qu,"","\\forall",!0),F8(F9,Qt,Qu,"","\\hbar",!0),F8(F9,Qt,Qu,"","\\exists",!0),F8(F9,Qt,Qu,"","\\nabla",!0),F8(F9,Qt,Qu,"","\\flat",!0),F8(F9,Qt,Qu,"","\\ell",!0),F8(F9,Qt,Qu,"","\\natural",!0),F8(F9,Qt,Qu,"","\\clubsuit",!0),F8(F9,Qt,Qu,"","\\wp",!0),F8(F9,Qt,Qu,"","\\sharp",!0),F8(F9,Qt,Qu,"","\\diamondsuit",!0),F8(F9,Qt,Qu,"","\\Re",!0),F8(F9,Qt,Qu,"","\\heartsuit",!0),F8(F9,Qt,Qu,"","\\Im",!0),F8(F9,Qt,Qu,"","\\spadesuit",!0),F8(F9,Qt,Qu,"\xa7","\\S",!0),F8(Qe,Qt,Qu,"\xa7","\\S"),F8(F9,Qt,Qu,"\xb6","\\P",!0),F8(Qe,Qt,Qu,"\xb6","\\P"),F8(F9,Qt,Qu,"","\\dag"),F8(Qe,Qt,Qu,"","\\dag"),F8(Qe,Qt,Qu,"","\\textdagger"),F8(F9,Qt,Qu,"","\\ddag"),F8(Qe,Qt,Qu,"","\\ddag"),F8(Qe,Qt,Qu,"","\\textdaggerdbl"),F8(F9,Qt,Qr,"","\\rmoustache",!0),F8(F9,Qt,Qa,"","\\lmoustache",!0),F8(F9,Qt,Qr,"","\\rgroup",!0),F8(F9,Qt,Qa,"","\\lgroup",!0),F8(F9,Qt,"bin","","\\mp",!0),F8(F9,Qt,"bin","","\\ominus",!0),F8(F9,Qt,"bin","","\\uplus",!0),F8(F9,Qt,"bin","","\\sqcap",!0),F8(F9,Qt,"bin","","\\ast"),F8(F9,Qt,"bin","","\\sqcup",!0),F8(F9,Qt,"bin","","\\bigcirc",!0),F8(F9,Qt,"bin","","\\bullet",!0),F8(F9,Qt,"bin","","\\ddagger"),F8(F9,Qt,"bin","","\\wr",!0),F8(F9,Qt,"bin","","\\amalg"),F8(F9,Qt,"bin","&","\\And"),F8(F9,Qt,"rel","","\\longleftarrow",!0),F8(F9,Qt,"rel","","\\Leftarrow",!0),F8(F9,Qt,"rel","","\\Longleftarrow",!0),F8(F9,Qt,"rel","","\\longrightarrow",!0),F8(F9,Qt,"rel","","\\Rightarrow",!0),F8(F9,Qt,"rel","","\\Longrightarrow",!0),F8(F9,Qt,"rel","","\\leftrightarrow",!0),F8(F9,Qt,"rel","","\\longleftrightarrow",!0),F8(F9,Qt,"rel","","\\Leftrightarrow",!0),F8(F9,Qt,"rel","","\\Longleftrightarrow",!0),F8(F9,Qt,"rel","","\\mapsto",!0),F8(F9,Qt,"rel","","\\longmapsto",!0),F8(F9,Qt,"rel","","\\nearrow",!0),F8(F9,Qt,"rel","","\\hookleftarrow",!0),F8(F9,Qt,"rel","","\\hookrightarrow",!0),F8(F9,Qt,"rel","","\\searrow",!0),F8(F9,Qt,"rel","","\\leftharpoonup",!0),F8(F9,Qt,"rel","","\\rightharpoonup",!0),F8(F9,Qt,"rel","","\\swarrow",!0),F8(F9,Qt,"rel","","\\leftharpoondown",!0),F8(F9,Qt,"rel","","\\rightharpoondown",!0),F8(F9,Qt,"rel","","\\nwarrow",!0),F8(F9,Qt,"rel","","\\rightleftharpoons",!0),F8(F9,"ams","rel","","\\nless",!0),F8(F9,"ams","rel","","\\@nleqslant"),F8(F9,"ams","rel","","\\@nleqq"),F8(F9,"ams","rel","","\\lneq",!0),F8(F9,"ams","rel","","\\lneqq",!0),F8(F9,"ams","rel","","\\@lvertneqq"),F8(F9,"ams","rel","","\\lnsim",!0),F8(F9,"ams","rel","","\\lnapprox",!0),F8(F9,"ams","rel","","\\nprec",!0),F8(F9,"ams","rel","","\\npreceq",!0),F8(F9,"ams","rel","","\\precnsim",!0),F8(F9,"ams","rel","","\\precnapprox",!0),F8(F9,"ams","rel","","\\nsim",!0),F8(F9,"ams","rel","","\\@nshortmid"),F8(F9,"ams","rel","","\\nmid",!0),F8(F9,"ams","rel","","\\nvdash",!0),F8(F9,"ams","rel","","\\nvDash",!0),F8(F9,"ams","rel","","\\ntriangleleft"),F8(F9,"ams","rel","","\\ntrianglelefteq",!0),F8(F9,"ams","rel","","\\subsetneq",!0),F8(F9,"ams","rel","","\\@varsubsetneq"),F8(F9,"ams","rel","","\\subsetneqq",!0),F8(F9,"ams","rel","","\\@varsubsetneqq"),F8(F9,"ams","rel","","\\ngtr",!0),F8(F9,"ams","rel","","\\@ngeqslant"),F8(F9,"ams","rel","","\\@ngeqq"),F8(F9,"ams","rel","","\\gneq",!0),F8(F9,"ams","rel","","\\gneqq",!0),F8(F9,"ams","rel","","\\@gvertneqq"),F8(F9,"ams","rel","","\\gnsim",!0),F8(F9,"ams","rel","","\\gnapprox",!0),F8(F9,"ams","rel","","\\nsucc",!0),F8(F9,"ams","rel","","\\nsucceq",!0),F8(F9,"ams","rel","","\\succnsim",!0),F8(F9,"ams","rel","","\\succnapprox",!0),F8(F9,"ams","rel","","\\ncong",!0),F8(F9,"ams","rel","","\\@nshortparallel"),F8(F9,"ams","rel","","\\nparallel",!0),F8(F9,"ams","rel","","\\nVDash",!0),F8(F9,"ams","rel","","\\ntriangleright"),F8(F9,"ams","rel","","\\ntrianglerighteq",!0),F8(F9,"ams","rel","","\\@nsupseteqq"),F8(F9,"ams","rel","","\\supsetneq",!0),F8(F9,"ams","rel","","\\@varsupsetneq"),F8(F9,"ams","rel","","\\supsetneqq",!0),F8(F9,"ams","rel","","\\@varsupsetneqq"),F8(F9,"ams","rel","","\\nVdash",!0),F8(F9,"ams","rel","","\\precneqq",!0),F8(F9,"ams","rel","","\\succneqq",!0),F8(F9,"ams","rel","","\\@nsubseteqq"),F8(F9,"ams","bin","","\\unlhd"),F8(F9,"ams","bin","","\\unrhd"),F8(F9,"ams","rel","","\\nleftarrow",!0),F8(F9,"ams","rel","","\\nrightarrow",!0),F8(F9,"ams","rel","","\\nLeftarrow",!0),F8(F9,"ams","rel","","\\nRightarrow",!0),F8(F9,"ams","rel","","\\nleftrightarrow",!0),F8(F9,"ams","rel","","\\nLeftrightarrow",!0),F8(F9,"ams","rel","","\\vartriangle"),F8(F9,"ams",Qu,"","\\hslash"),F8(F9,"ams",Qu,"","\\triangledown"),F8(F9,"ams",Qu,"","\\lozenge"),F8(F9,"ams",Qu,"","\\circledS"),F8(F9,"ams",Qu,"\xae","\\circledR"),F8(Qe,"ams",Qu,"\xae","\\circledR"),F8(F9,"ams",Qu,"","\\measuredangle",!0),F8(F9,"ams",Qu,"","\\nexists"),F8(F9,"ams",Qu,"","\\mho"),F8(F9,"ams",Qu,"","\\Finv",!0),F8(F9,"ams",Qu,"","\\Game",!0),F8(F9,"ams",Qu,"","\\backprime"),F8(F9,"ams",Qu,"","\\blacktriangle"),F8(F9,"ams",Qu,"","\\blacktriangledown"),F8(F9,"ams",Qu,"","\\blacksquare"),F8(F9,"ams",Qu,"","\\blacklozenge"),F8(F9,"ams",Qu,"","\\bigstar"),F8(F9,"ams",Qu,"","\\sphericalangle",!0),F8(F9,"ams",Qu,"","\\complement",!0),F8(F9,"ams",Qu,"\xf0","\\eth",!0),F8(Qe,Qt,Qu,"\xf0","\xf0"),F8(F9,"ams",Qu,"","\\diagup"),F8(F9,"ams",Qu,"","\\diagdown"),F8(F9,"ams",Qu,"","\\square"),F8(F9,"ams",Qu,"","\\Box"),F8(F9,"ams",Qu,"","\\Diamond"),F8(F9,"ams",Qu,"\xa5","\\yen",!0),F8(Qe,"ams",Qu,"\xa5","\\yen",!0),F8(F9,"ams",Qu,"","\\checkmark",!0),F8(Qe,"ams",Qu,"","\\checkmark"),F8(F9,"ams",Qu,"","\\beth",!0),F8(F9,"ams",Qu,"","\\daleth",!0),F8(F9,"ams",Qu,"","\\gimel",!0),F8(F9,"ams",Qu,"","\\digamma",!0),F8(F9,"ams",Qu,"","\\varkappa"),F8(F9,"ams",Qa,"","\\@ulcorner",!0),F8(F9,"ams",Qr,"","\\@urcorner",!0),F8(F9,"ams",Qa,"","\\@llcorner",!0),F8(F9,"ams",Qr,"","\\@lrcorner",!0),F8(F9,"ams","rel","","\\leqq",!0),F8(F9,"ams","rel","","\\leqslant",!0),F8(F9,"ams","rel","","\\eqslantless",!0),F8(F9,"ams","rel","","\\lesssim",!0),F8(F9,"ams","rel","","\\lessapprox",!0),F8(F9,"ams","rel","","\\approxeq",!0),F8(F9,"ams","bin","","\\lessdot"),F8(F9,"ams","rel","","\\lll",!0),F8(F9,"ams","rel","","\\lessgtr",!0),F8(F9,"ams","rel","","\\lesseqgtr",!0),F8(F9,"ams","rel","","\\lesseqqgtr",!0),F8(F9,"ams","rel","","\\doteqdot"),F8(F9,"ams","rel","","\\risingdotseq",!0),F8(F9,"ams","rel","","\\fallingdotseq",!0),F8(F9,"ams","rel","","\\backsim",!0),F8(F9,"ams","rel","","\\backsimeq",!0),F8(F9,"ams","rel","","\\subseteqq",!0),F8(F9,"ams","rel","","\\Subset",!0),F8(F9,"ams","rel","","\\sqsubset",!0),F8(F9,"ams","rel","","\\preccurlyeq",!0),F8(F9,"ams","rel","","\\curlyeqprec",!0),F8(F9,"ams","rel","","\\precsim",!0),F8(F9,"ams","rel","","\\precapprox",!0),F8(F9,"ams","rel","","\\vartriangleleft"),F8(F9,"ams","rel","","\\trianglelefteq"),F8(F9,"ams","rel","","\\vDash",!0),F8(F9,"ams","rel","","\\Vvdash",!0),F8(F9,"ams","rel","","\\smallsmile"),F8(F9,"ams","rel","","\\smallfrown"),F8(F9,"ams","rel","","\\bumpeq",!0),F8(F9,"ams","rel","","\\Bumpeq",!0),F8(F9,"ams","rel","","\\geqq",!0),F8(F9,"ams","rel","","\\geqslant",!0),F8(F9,"ams","rel","","\\eqslantgtr",!0),F8(F9,"ams","rel","","\\gtrsim",!0),F8(F9,"ams","rel","","\\gtrapprox",!0),F8(F9,"ams","bin","","\\gtrdot"),F8(F9,"ams","rel","","\\ggg",!0),F8(F9,"ams","rel","","\\gtrless",!0),F8(F9,"ams","rel","","\\gtreqless",!0),F8(F9,"ams","rel","","\\gtreqqless",!0),F8(F9,"ams","rel","","\\eqcirc",!0),F8(F9,"ams","rel","","\\circeq",!0),F8(F9,"ams","rel","","\\triangleq",!0),F8(F9,"ams","rel","","\\thicksim"),F8(F9,"ams","rel","","\\thickapprox"),F8(F9,"ams","rel","","\\supseteqq",!0),F8(F9,"ams","rel","","\\Supset",!0),F8(F9,"ams","rel","","\\sqsupset",!0),F8(F9,"ams","rel","","\\succcurlyeq",!0),F8(F9,"ams","rel","","\\curlyeqsucc",!0),F8(F9,"ams","rel","","\\succsim",!0),F8(F9,"ams","rel","","\\succapprox",!0),F8(F9,"ams","rel","","\\vartriangleright"),F8(F9,"ams","rel","","\\trianglerighteq"),F8(F9,"ams","rel","","\\Vdash",!0),F8(F9,"ams","rel","","\\shortmid"),F8(F9,"ams","rel","","\\shortparallel"),F8(F9,"ams","rel","","\\between",!0),F8(F9,"ams","rel","","\\pitchfork",!0),F8(F9,"ams","rel","","\\varpropto"),F8(F9,"ams","rel","","\\blacktriangleleft"),F8(F9,"ams","rel","","\\therefore",!0),F8(F9,"ams","rel","","\\backepsilon"),F8(F9,"ams","rel","","\\blacktriangleright"),F8(F9,"ams","rel","","\\because",!0),F8(F9,"ams","rel","","\\llless"),F8(F9,"ams","rel","","\\gggtr"),F8(F9,"ams","bin","","\\lhd"),F8(F9,"ams","bin","","\\rhd"),F8(F9,"ams","rel","","\\eqsim",!0),F8(F9,Qt,"rel","","\\Join"),F8(F9,"ams","rel","","\\Doteq",!0),F8(F9,"ams","bin","","\\dotplus",!0),F8(F9,"ams","bin","","\\smallsetminus"),F8(F9,"ams","bin","","\\Cap",!0),F8(F9,"ams","bin","","\\Cup",!0),F8(F9,"ams","bin","","\\doublebarwedge",!0),F8(F9,"ams","bin","","\\boxminus",!0),F8(F9,"ams","bin","","\\boxplus",!0),F8(F9,"ams","bin","","\\divideontimes",!0),F8(F9,"ams","bin","","\\ltimes",!0),F8(F9,"ams","bin","","\\rtimes",!0),F8(F9,"ams","bin","","\\leftthreetimes",!0),F8(F9,"ams","bin","","\\rightthreetimes",!0),F8(F9,"ams","bin","","\\curlywedge",!0),F8(F9,"ams","bin","","\\curlyvee",!0),F8(F9,"ams","bin","","\\circleddash",!0),F8(F9,"ams","bin","","\\circledast",!0),F8(F9,"ams","bin","","\\centerdot"),F8(F9,"ams","bin","","\\intercal",!0),F8(F9,"ams","bin","","\\doublecap"),F8(F9,"ams","bin","","\\doublecup"),F8(F9,"ams","bin","","\\boxtimes",!0),F8(F9,"ams","rel","","\\dashrightarrow",!0),F8(F9,"ams","rel","","\\dashleftarrow",!0),F8(F9,"ams","rel","","\\leftleftarrows",!0),F8(F9,"ams","rel","","\\leftrightarrows",!0),F8(F9,"ams","rel","","\\Lleftarrow",!0),F8(F9,"ams","rel","","\\twoheadleftarrow",!0),F8(F9,"ams","rel","","\\leftarrowtail",!0),F8(F9,"ams","rel","","\\looparrowleft",!0),F8(F9,"ams","rel","","\\leftrightharpoons",!0),F8(F9,"ams","rel","","\\curvearrowleft",!0),F8(F9,"ams","rel","","\\circlearrowleft",!0),F8(F9,"ams","rel","","\\Lsh",!0),F8(F9,"ams","rel","","\\upuparrows",!0),F8(F9,"ams","rel","","\\upharpoonleft",!0),F8(F9,"ams","rel","","\\downharpoonleft",!0),F8(F9,Qt,"rel","","\\origof",!0),F8(F9,Qt,"rel","","\\imageof",!0),F8(F9,"ams","rel","","\\multimap",!0),F8(F9,"ams","rel","","\\leftrightsquigarrow",!0),F8(F9,"ams","rel","","\\rightrightarrows",!0),F8(F9,"ams","rel","","\\rightleftarrows",!0),F8(F9,"ams","rel","","\\twoheadrightarrow",!0),F8(F9,"ams","rel","","\\rightarrowtail",!0),F8(F9,"ams","rel","","\\looparrowright",!0),F8(F9,"ams","rel","","\\curvearrowright",!0),F8(F9,"ams","rel","","\\circlearrowright",!0),F8(F9,"ams","rel","","\\Rsh",!0),F8(F9,"ams","rel","","\\downdownarrows",!0),F8(F9,"ams","rel","","\\upharpoonright",!0),F8(F9,"ams","rel","","\\downharpoonright",!0),F8(F9,"ams","rel","","\\rightsquigarrow",!0),F8(F9,"ams","rel","","\\leadsto"),F8(F9,"ams","rel","","\\Rrightarrow",!0),F8(F9,"ams","rel","","\\restriction"),F8(F9,Qt,Qu,"","`"),F8(F9,Qt,Qu,"$","\\$"),F8(Qe,Qt,Qu,"$","\\$"),F8(Qe,Qt,Qu,"$","\\textdollar"),F8(F9,Qt,Qu,"%","\\%"),F8(Qe,Qt,Qu,"%","\\%"),F8(F9,Qt,Qu,"_","\\_"),F8(Qe,Qt,Qu,"_","\\_"),F8(Qe,Qt,Qu,"_","\\textunderscore"),F8(F9,Qt,Qu,"","\\angle",!0),F8(F9,Qt,Qu,"","\\infty",!0),F8(F9,Qt,Qu,"","\\prime"),F8(F9,Qt,Qu,"","\\triangle"),F8(F9,Qt,Qu,"","\\Gamma",!0),F8(F9,Qt,Qu,"","\\Delta",!0),F8(F9,Qt,Qu,"","\\Theta",!0),F8(F9,Qt,Qu,"","\\Lambda",!0),F8(F9,Qt,Qu,"","\\Xi",!0),F8(F9,Qt,Qu,"","\\Pi",!0),F8(F9,Qt,Qu,"","\\Sigma",!0),F8(F9,Qt,Qu,"","\\Upsilon",!0),F8(F9,Qt,Qu,"","\\Phi",!0),F8(F9,Qt,Qu,"","\\Psi",!0),F8(F9,Qt,Qu,"","\\Omega",!0),F8(F9,Qt,Qu,"A",""),F8(F9,Qt,Qu,"B",""),F8(F9,Qt,Qu,"E",""),F8(F9,Qt,Qu,"Z",""),F8(F9,Qt,Qu,"H",""),F8(F9,Qt,Qu,"I",""),F8(F9,Qt,Qu,"K",""),F8(F9,Qt,Qu,"M",""),F8(F9,Qt,Qu,"N",""),F8(F9,Qt,Qu,"O",""),F8(F9,Qt,Qu,"P",""),F8(F9,Qt,Qu,"T",""),F8(F9,Qt,Qu,"X",""),F8(F9,Qt,Qu,"\xac","\\neg",!0),F8(F9,Qt,Qu,"\xac","\\lnot"),F8(F9,Qt,Qu,"","\\top"),F8(F9,Qt,Qu,"","\\bot"),F8(F9,Qt,Qu,"","\\emptyset"),F8(F9,"ams",Qu,"","\\varnothing"),F8(F9,Qt,Qo,"","\\alpha",!0),F8(F9,Qt,Qo,"","\\beta",!0),F8(F9,Qt,Qo,"","\\gamma",!0),F8(F9,Qt,Qo,"","\\delta",!0),F8(F9,Qt,Qo,"","\\epsilon",!0),F8(F9,Qt,Qo,"","\\zeta",!0),F8(F9,Qt,Qo,"","\\eta",!0),F8(F9,Qt,Qo,"","\\theta",!0),F8(F9,Qt,Qo,"","\\iota",!0),F8(F9,Qt,Qo,"","\\kappa",!0),F8(F9,Qt,Qo,"","\\lambda",!0),F8(F9,Qt,Qo,"","\\mu",!0),F8(F9,Qt,Qo,"","\\nu",!0),F8(F9,Qt,Qo,"","\\xi",!0),F8(F9,Qt,Qo,"","\\omicron",!0),F8(F9,Qt,Qo,"","\\pi",!0),F8(F9,Qt,Qo,"","\\rho",!0),F8(F9,Qt,Qo,"","\\sigma",!0),F8(F9,Qt,Qo,"","\\tau",!0),F8(F9,Qt,Qo,"","\\upsilon",!0),F8(F9,Qt,Qo,"","\\phi",!0),F8(F9,Qt,Qo,"","\\chi",!0),F8(F9,Qt,Qo,"","\\psi",!0),F8(F9,Qt,Qo,"","\\omega",!0),F8(F9,Qt,Qo,"","\\varepsilon",!0),F8(F9,Qt,Qo,"","\\vartheta",!0),F8(F9,Qt,Qo,"","\\varpi",!0),F8(F9,Qt,Qo,"","\\varrho",!0),F8(F9,Qt,Qo,"","\\varsigma",!0),F8(F9,Qt,Qo,"","\\varphi",!0),F8(F9,Qt,"bin","","*",!0),F8(F9,Qt,"bin","+","+"),F8(F9,Qt,"bin","","-",!0),F8(F9,Qt,"bin","","\\cdot",!0),F8(F9,Qt,"bin","","\\circ",!0),F8(F9,Qt,"bin","\xf7","\\div",!0),F8(F9,Qt,"bin","\xb1","\\pm",!0),F8(F9,Qt,"bin","\xd7","\\times",!0),F8(F9,Qt,"bin","","\\cap",!0),F8(F9,Qt,"bin","","\\cup",!0),F8(F9,Qt,"bin","","\\setminus",!0),F8(F9,Qt,"bin","","\\land"),F8(F9,Qt,"bin","","\\lor"),F8(F9,Qt,"bin","","\\wedge",!0),F8(F9,Qt,"bin","","\\vee",!0),F8(F9,Qt,Qu,"","\\surd"),F8(F9,Qt,Qa,"","\\langle",!0),F8(F9,Qt,Qa,"","\\lvert"),F8(F9,Qt,Qa,"","\\lVert"),F8(F9,Qt,Qr,"?","?"),F8(F9,Qt,Qr,"!","!"),F8(F9,Qt,Qr,"","\\rangle",!0),F8(F9,Qt,Qr,"","\\rvert"),F8(F9,Qt,Qr,"","\\rVert"),F8(F9,Qt,"rel","=","="),F8(F9,Qt,"rel",":",":"),F8(F9,Qt,"rel","","\\approx",!0),F8(F9,Qt,"rel","","\\cong",!0),F8(F9,Qt,"rel","","\\ge"),F8(F9,Qt,"rel","","\\geq",!0),F8(F9,Qt,"rel","","\\gets"),F8(F9,Qt,"rel",">","\\gt",!0),F8(F9,Qt,"rel","","\\in",!0),F8(F9,Qt,"rel","","\\@not"),F8(F9,Qt,"rel","","\\subset",!0),F8(F9,Qt,"rel","","\\supset",!0),F8(F9,Qt,"rel","","\\subseteq",!0),F8(F9,Qt,"rel","","\\supseteq",!0),F8(F9,"ams","rel","","\\nsubseteq",!0),F8(F9,"ams","rel","","\\nsupseteq",!0),F8(F9,Qt,"rel","","\\models"),F8(F9,Qt,"rel","","\\leftarrow",!0),F8(F9,Qt,"rel","","\\le"),F8(F9,Qt,"rel","","\\leq",!0),F8(F9,Qt,"rel","<","\\lt",!0),F8(F9,Qt,"rel","","\\rightarrow",!0),F8(F9,Qt,"rel","","\\to"),F8(F9,"ams","rel","","\\ngeq",!0),F8(F9,"ams","rel","","\\nleq",!0),F8(F9,Qt,Qc,"\xa0","\\ "),F8(F9,Qt,Qc,"\xa0","\\space"),F8(F9,Qt,Qc,"\xa0","\\nobreakspace"),F8(Qe,Qt,Qc,"\xa0","\\ "),F8(Qe,Qt,Qc,"\xa0"," "),F8(Qe,Qt,Qc,"\xa0","\\space"),F8(Qe,Qt,Qc,"\xa0","\\nobreakspace"),F8(F9,Qt,Qc,null,"\\nobreak"),F8(F9,Qt,Qc,null,"\\allowbreak"),F8(F9,Qt,Ql,",",","),F8(F9,Qt,Ql,";",";"),F8(F9,"ams","bin","","\\barwedge",!0),F8(F9,"ams","bin","","\\veebar",!0),F8(F9,Qt,"bin","","\\odot",!0),F8(F9,Qt,"bin","","\\oplus",!0),F8(F9,Qt,"bin","","\\otimes",!0),F8(F9,Qt,Qu,"","\\partial",!0),F8(F9,Qt,"bin","","\\oslash",!0),F8(F9,"ams","bin","","\\circledcirc",!0),F8(F9,"ams","bin","","\\boxdot",!0),F8(F9,Qt,"bin","","\\bigtriangleup"),F8(F9,Qt,"bin","","\\bigtriangledown"),F8(F9,Qt,"bin","","\\dagger"),F8(F9,Qt,"bin","","\\diamond"),F8(F9,Qt,"bin","","\\star"),F8(F9,Qt,"bin","","\\triangleleft"),F8(F9,Qt,"bin","","\\triangleright"),F8(F9,Qt,Qa,"{","\\{"),F8(Qe,Qt,Qu,"{","\\{"),F8(Qe,Qt,Qu,"{","\\textbraceleft"),F8(F9,Qt,Qr,"}","\\}"),F8(Qe,Qt,Qu,"}","\\}"),F8(Qe,Qt,Qu,"}","\\textbraceright"),F8(F9,Qt,Qa,"{","\\lbrace"),F8(F9,Qt,Qr,"}","\\rbrace"),F8(F9,Qt,Qa,"[","\\lbrack",!0),F8(Qe,Qt,Qu,"[","\\lbrack",!0),F8(F9,Qt,Qr,"]","\\rbrack",!0),F8(Qe,Qt,Qu,"]","\\rbrack",!0),F8(F9,Qt,Qa,"(","\\lparen",!0),F8(F9,Qt,Qr,")","\\rparen",!0),F8(Qe,Qt,Qu,"<","\\textless",!0),F8(Qe,Qt,Qu,">","\\textgreater",!0),F8(F9,Qt,Qa,"","\\lfloor",!0),F8(F9,Qt,Qr,"","\\rfloor",!0),F8(F9,Qt,Qa,"","\\lceil",!0),F8(F9,Qt,Qr,"","\\rceil",!0),F8(F9,Qt,Qu,"\\","\\backslash"),F8(F9,Qt,Qu,"","|"),F8(F9,Qt,Qu,"","\\vert"),F8(Qe,Qt,Qu,"|","\\textbar",!0),F8(F9,Qt,Qu,"","\\|"),F8(F9,Qt,Qu,"","\\Vert"),F8(Qe,Qt,Qu,"","\\textbardbl"),F8(Qe,Qt,Qu,"~","\\textasciitilde"),F8(Qe,Qt,Qu,"\\","\\textbackslash"),F8(Qe,Qt,Qu,"^","\\textasciicircum"),F8(F9,Qt,"rel","","\\uparrow",!0),F8(F9,Qt,"rel","","\\Uparrow",!0),F8(F9,Qt,"rel","","\\downarrow",!0),F8(F9,Qt,"rel","","\\Downarrow",!0),F8(F9,Qt,"rel","","\\updownarrow",!0),F8(F9,Qt,"rel","","\\Updownarrow",!0),F8(F9,Qt,Qs,"","\\coprod"),F8(F9,Qt,Qs,"","\\bigvee"),F8(F9,Qt,Qs,"","\\bigwedge"),F8(F9,Qt,Qs,"","\\biguplus"),F8(F9,Qt,Qs,"","\\bigcap"),F8(F9,Qt,Qs,"","\\bigcup"),F8(F9,Qt,Qs,"","\\int"),F8(F9,Qt,Qs,"","\\intop"),F8(F9,Qt,Qs,"","\\iint"),F8(F9,Qt,Qs,"","\\iiint"),F8(F9,Qt,Qs,"","\\prod"),F8(F9,Qt,Qs,"","\\sum"),F8(F9,Qt,Qs,"","\\bigotimes"),F8(F9,Qt,Qs,"","\\bigoplus"),F8(F9,Qt,Qs,"","\\bigodot"),F8(F9,Qt,Qs,"","\\oint"),F8(F9,Qt,Qs,"","\\oiint"),F8(F9,Qt,Qs,"","\\oiiint"),F8(F9,Qt,Qs,"","\\bigsqcup"),F8(F9,Qt,Qs,"","\\smallint"),F8(Qe,Qt,Qi,"","\\textellipsis"),F8(F9,Qt,Qi,"","\\mathellipsis"),F8(Qe,Qt,Qi,"","\\ldots",!0),F8(F9,Qt,Qi,"","\\ldots",!0),F8(F9,Qt,Qi,"","\\@cdots",!0),F8(F9,Qt,Qi,"","\\ddots",!0),F8(F9,Qt,Qu,"","\\varvdots"),F8(Qe,Qt,Qu,"","\\varvdots"),F8(F9,Qt,Qn,"","\\acute"),F8(F9,Qt,Qn,"","\\grave"),F8(F9,Qt,Qn,"\xa8","\\ddot"),F8(F9,Qt,Qn,"~","\\tilde"),F8(F9,Qt,Qn,"","\\bar"),F8(F9,Qt,Qn,"","\\breve"),F8(F9,Qt,Qn,"","\\check"),F8(F9,Qt,Qn,"^","\\hat"),F8(F9,Qt,Qn,"","\\vec"),F8(F9,Qt,Qn,"","\\dot"),F8(F9,Qt,Qn,"","\\mathring"),F8(F9,Qt,Qo,"","\\@imath"),F8(F9,Qt,Qo,"","\\@jmath"),F8(F9,Qt,Qu,"",""),F8(F9,Qt,Qu,"",""),F8(Qe,Qt,Qu,"","\\i",!0),F8(Qe,Qt,Qu,"","\\j",!0),F8(Qe,Qt,Qu,"\xdf","\\ss",!0),F8(Qe,Qt,Qu,"\xe6","\\ae",!0),F8(Qe,Qt,Qu,"","\\oe",!0),F8(Qe,Qt,Qu,"\xf8","\\o",!0),F8(Qe,Qt,Qu,"\xc6","\\AE",!0),F8(Qe,Qt,Qu,"","\\OE",!0),F8(Qe,Qt,Qu,"\xd8","\\O",!0),F8(Qe,Qt,Qn,"","\\'"),F8(Qe,Qt,Qn,"","\\`"),F8(Qe,Qt,Qn,"","\\^"),F8(Qe,Qt,Qn,"","\\~"),F8(Qe,Qt,Qn,"","\\="),F8(Qe,Qt,Qn,"","\\u"),F8(Qe,Qt,Qn,"","\\."),F8(Qe,Qt,Qn,"\xb8","\\c"),F8(Qe,Qt,Qn,"","\\r"),F8(Qe,Qt,Qn,"","\\v"),F8(Qe,Qt,Qn,"\xa8",'\\"'),F8(Qe,Qt,Qn,"","\\H"),F8(Qe,Qt,Qn,"","\\textcircled");var Qh={"--":!0,"---":!0,"``":!0,"''":!0};F8(Qe,Qt,Qu,"","--",!0),F8(Qe,Qt,Qu,"","\\textendash"),F8(Qe,Qt,Qu,"","---",!0),F8(Qe,Qt,Qu,"","\\textemdash"),F8(Qe,Qt,Qu,"","`",!0),F8(Qe,Qt,Qu,"","\\textquoteleft"),F8(Qe,Qt,Qu,"","'",!0),F8(Qe,Qt,Qu,"","\\textquoteright"),F8(Qe,Qt,Qu,"","``",!0),F8(Qe,Qt,Qu,"","\\textquotedblleft"),F8(Qe,Qt,Qu,"","''",!0),F8(Qe,Qt,Qu,"","\\textquotedblright"),F8(F9,Qt,Qu,"\xb0","\\degree",!0),F8(Qe,Qt,Qu,"\xb0","\\degree"),F8(Qe,Qt,Qu,"\xb0","\\textdegree",!0),F8(F9,Qt,Qu,"\xa3","\\pounds"),F8(F9,Qt,Qu,"\xa3","\\mathsterling",!0),F8(Qe,Qt,Qu,"\xa3","\\pounds"),F8(Qe,Qt,Qu,"\xa3","\\textsterling",!0),F8(F9,"ams",Qu,"","\\maltese"),F8(Qe,"ams",Qu,"","\\maltese");for(var Qd='0123456789/@."',Qf=0;Qf<Qd.length;Qf++){var Qp=Qd.charAt(Qf);F8(F9,Qt,Qu,Qp,Qp)}for(var Qm='0123456789!@*()-=+";:?/.,',Qg=0;Qg<Qm.length;Qg++){var Qy=Qm.charAt(Qg);F8(Qe,Qt,Qu,Qy,Qy)}for(var Qb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Qv=0;Qv<Qb.length;Qv++){var Qx=Qb.charAt(Qv);F8(F9,Qt,Qo,Qx,Qx),F8(Qe,Qt,Qu,Qx,Qx)}F8(F9,"ams",Qu,"C",""),F8(Qe,"ams",Qu,"C",""),F8(F9,"ams",Qu,"H",""),F8(Qe,"ams",Qu,"H",""),F8(F9,"ams",Qu,"N",""),F8(Qe,"ams",Qu,"N",""),F8(F9,"ams",Qu,"P",""),F8(Qe,"ams",Qu,"P",""),F8(F9,"ams",Qu,"Q",""),F8(Qe,"ams",Qu,"Q",""),F8(F9,"ams",Qu,"R",""),F8(Qe,"ams",Qu,"R",""),F8(F9,"ams",Qu,"Z",""),F8(Qe,"ams",Qu,"Z",""),F8(F9,Qt,Qo,"h",""),F8(Qe,Qt,Qo,"h","");for(var Qw="",Qk=0;Qk<Qb.length;Qk++){var QO=Qb.charAt(Qk);F8(F9,Qt,Qo,QO,Qw=String.fromCharCode(55349,56320+Qk)),F8(Qe,Qt,Qu,QO,Qw),F8(F9,Qt,Qo,QO,Qw=String.fromCharCode(55349,56372+Qk)),F8(Qe,Qt,Qu,QO,Qw),F8(F9,Qt,Qo,QO,Qw=String.fromCharCode(55349,56424+Qk)),F8(Qe,Qt,Qu,QO,Qw),F8(F9,Qt,Qo,QO,Qw=String.fromCharCode(55349,56580+Qk)),F8(Qe,Qt,Qu,QO,Qw),F8(F9,Qt,Qo,QO,Qw=String.fromCharCode(55349,56684+Qk)),F8(Qe,Qt,Qu,QO,Qw),F8(F9,Qt,Qo,QO,Qw=String.fromCharCode(55349,56736+Qk)),F8(Qe,Qt,Qu,QO,Qw),F8(F9,Qt,Qo,QO,Qw=String.fromCharCode(55349,56788+Qk)),F8(Qe,Qt,Qu,QO,Qw),F8(F9,Qt,Qo,QO,Qw=String.fromCharCode(55349,56840+Qk)),F8(Qe,Qt,Qu,QO,Qw),F8(F9,Qt,Qo,QO,Qw=String.fromCharCode(55349,56944+Qk)),F8(Qe,Qt,Qu,QO,Qw),Qk<26&&(F8(F9,Qt,Qo,QO,Qw=String.fromCharCode(55349,56632+Qk)),F8(Qe,Qt,Qu,QO,Qw),F8(F9,Qt,Qo,QO,Qw=String.fromCharCode(55349,56476+Qk)),F8(Qe,Qt,Qu,QO,Qw))}F8(F9,Qt,Qo,"k",Qw="\uD835\uDD5C"),F8(Qe,Qt,Qu,"k",Qw);for(var QS=0;QS<10;QS++){var QC=QS.toString();F8(F9,Qt,Qo,QC,Qw=String.fromCharCode(55349,57294+QS)),F8(Qe,Qt,Qu,QC,Qw),F8(F9,Qt,Qo,QC,Qw=String.fromCharCode(55349,57314+QS)),F8(Qe,Qt,Qu,QC,Qw),F8(F9,Qt,Qo,QC,Qw=String.fromCharCode(55349,57324+QS)),F8(Qe,Qt,Qu,QC,Qw),F8(F9,Qt,Qo,QC,Qw=String.fromCharCode(55349,57334+QS)),F8(Qe,Qt,Qu,QC,Qw)}for(var QT="\xd0\xde\xfe",QA=0;QA<QT.length;QA++){var QE=QT.charAt(QA);F8(F9,Qt,Qo,QE,QE),F8(Qe,Qt,Qu,QE,QE)}var QM=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],QN=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Q_=function(e,t){var n=(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320)+65536,r=+("math"!==t);if(119808<=n&&n<120484){var i=Math.floor((n-119808)/26);return[QM[i][2],QM[i][r]]}if(120782<=n&&n<=120831){var o=Math.floor((n-120782)/10);return[QN[o][2],QN[o][r]]}if(120485===n||120486===n)return[QM[0][2],QM[0][r]];if(120486<n&&n<120782)return["",""];throw new Fo("Unsupported character: "+e)},Qj=function(e,t,n){return F7[n][e]&&F7[n][e].replace&&(e=F7[n][e].replace),{value:e,metrics:FP(e,t,n)}},QD=function(e,t,n,r,i){var o,s=Qj(e,t,n),a=s.metrics;if(e=s.value,a){var l=a.italic;("text"===n||r&&"mathit"===r.font)&&(l=0),o=new F0(e,a.height,a.depth,l,a.skew,a.width,i)}else"u">typeof console&&console.warn("No character metrics "+("for '"+e+"' in style '"+t+"' and mode '")+n+"'"),o=new F0(e,0,0,0,0,0,i);if(r){o.maxFontSize=r.sizeMultiplier,r.style.isTight()&&o.classes.push("mtight");var c=r.getColor();c&&(o.style.color=c)}return o},QP=(e,t)=>{if(FH(e.classes)!==FH(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;if(1===e.classes.length){var n=e.classes[0];if("mbin"===n||"mord"===n)return!1}for(var r in e.style)if(e.style.hasOwnProperty(r)&&e.style[r]!==t.style[r])return!1;for(var i in t.style)if(t.style.hasOwnProperty(i)&&e.style[i]!==t.style[i])return!1;return!0},QR=function(e){for(var t=0,n=0,r=0,i=0;i<e.children.length;i++){var o=e.children[i];o.height>t&&(t=o.height),o.depth>n&&(n=o.depth),o.maxFontSize>r&&(r=o.maxFontSize)}e.height=t,e.depth=n,e.maxFontSize=r},QI=function(e,t,n,r){var i=new FY(e,t,n,r);return QR(i),i},Qz=(e,t,n,r)=>new FY(e,t,n,r),QL=function(e){var t=new FN(e);return QR(t),t},Qq=function(e){if("individualShift"===e.positionType){for(var t,n=e.children,r=[n[0]],i=-n[0].shift-n[0].elem.depth,o=i,s=1;s<n.length;s++){var a=-n[s].shift-o-n[s].elem.depth,l=a-(n[s-1].elem.height+n[s-1].elem.depth);o+=a,r.push({type:"kern",size:l}),r.push(n[s])}return{children:r,depth:i}}if("top"===e.positionType){for(var c=e.positionData,u=0;u<e.children.length;u++){var h=e.children[u];c-="kern"===h.type?h.size:h.elem.height+h.elem.depth}t=c}else if("bottom"===e.positionType)t=-e.positionData;else{var d=e.children[0];if("elem"!==d.type)throw Error('First child must have type "elem".');if("shift"===e.positionType)t=-d.elem.depth-e.positionData;else if("firstBaseline"===e.positionType)t=-d.elem.depth;else throw Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:t}},Q$=function(e,t,n){var r="";switch(e){case"amsrm":r="AMS";break;case"textrm":r="Main";break;case"textsf":r="SansSerif";break;case"texttt":r="Typewriter";break;default:r=e}return r+"-"+("textbf"===t&&"textit"===n?"BoldItalic":"textbf"===t?"Bold":"textit"===t?"Italic":"Regular")},QB={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},QF={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},QQ={fontMap:QB,makeSymbol:QD,mathsym:function(e,t,n,r){return void 0===r&&(r=[]),"boldsymbol"===n.font&&Qj(e,"Main-Bold",t).metrics?QD(e,"Main-Bold",t,n,r.concat(["mathbf"])):"\\"===e||"main"===F7[t][e].font?QD(e,"Main-Regular",t,n,r):QD(e,"AMS-Regular",t,n,r.concat(["amsrm"]))},makeSpan:QI,makeSvgSpan:Qz,makeLineSpan:function(e,t,n){var r=QI([e],[],t);return r.height=Math.max(n||t.fontMetrics().defaultRuleThickness,t.minRuleThickness),r.style.borderBottomWidth=FV(r.height),r.maxFontSize=1,r},makeAnchor:function(e,t,n,r){var i=new FZ(e,t,n,r);return QR(i),i},makeFragment:QL,wrapFragment:function(e,t){return e instanceof FN?QI([],[e],t):e},makeVList:function(e,t){for(var n,{children:r,depth:i}=Qq(e),o=0,s=0;s<r.length;s++){var a=r[s];if("elem"===a.type){var l=a.elem;o=Math.max(o,l.maxFontSize,l.height)}}o+=2;var c=QI(["pstrut"],[]);c.style.height=FV(o);for(var u=[],h=i,d=i,f=i,p=0;p<r.length;p++){var m=r[p];if("kern"===m.type)f+=m.size;else{var g=m.elem,y=QI(m.wrapperClasses||[],[c,g],void 0,m.wrapperStyle||{});y.style.top=FV(-o-f-g.depth),m.marginLeft&&(y.style.marginLeft=m.marginLeft),m.marginRight&&(y.style.marginRight=m.marginRight),u.push(y),f+=g.height+g.depth}h=Math.min(h,f),d=Math.max(d,f)}var b=QI(["vlist"],u);if(b.style.height=FV(d),h<0){var v=QI([],[]),x=QI(["vlist"],[v]);x.style.height=FV(-h);var w=QI(["vlist-s"],[new F0("")]);n=[QI(["vlist-r"],[b,w]),QI(["vlist-r"],[x])]}else n=[QI(["vlist-r"],[b])];var k=QI(["vlist-t"],n);return 2===n.length&&k.classes.push("vlist-t2"),k.height=d,k.depth=-h,k},makeOrd:function(e,t,n){var r,i,o=e.mode,s=e.text,a=["mord"],l="math"===o||"text"===o&&t.font,c=l?t.font:t.fontFamily,u="",h="";if(55349===s.charCodeAt(0)&&([u,h]=Q_(s,o)),u.length>0)return QD(s,u,o,t,a.concat(h));if(c){if("boldsymbol"===c){var d="textord"!==n&&Qj(s,"Math-BoldItalic",o).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"};r=d.fontName,i=[d.fontClass]}else l?(r=QB[c].fontName,i=[c]):(r=Q$(c,t.fontWeight,t.fontShape),i=[c,t.fontWeight,t.fontShape]);if(Qj(s,r,o).metrics)return QD(s,r,o,t,a.concat(i));if(Qh.hasOwnProperty(s)&&"Typewriter"===r.slice(0,10)){for(var f=[],p=0;p<s.length;p++)f.push(QD(s[p],r,o,t,a.concat(i)));return QL(f)}}if("mathord"===n)return QD(s,"Math-Italic",o,t,a.concat(["mathnormal"]));if("textord"===n){var m=F7[o][s]&&F7[o][s].font;if("ams"===m)return QD(s,Q$("amsrm",t.fontWeight,t.fontShape),o,t,a.concat("amsrm",t.fontWeight,t.fontShape));if("main"===m||!m)return QD(s,Q$("textrm",t.fontWeight,t.fontShape),o,t,a.concat(t.fontWeight,t.fontShape));var g=Q$(m,t.fontWeight,t.fontShape);return QD(s,g,o,t,a.concat(g,t.fontWeight,t.fontShape))}throw Error("unexpected type: "+n+" in makeOrd")},makeGlue:(e,t)=>{var n=QI(["mspace"],[],t),r=FQ(e,t);return n.style.marginRight=FV(r),n},staticSvg:function(e,t){var[n,r,i]=QF[e],o=Qz(["overlay"],[new F1([new F2(n)],{width:FV(r),height:FV(i),style:"width:"+FV(r),viewBox:"0 0 "+1e3*r+" "+1e3*i,preserveAspectRatio:"xMinYMin"})],t);return o.height=i,o.style.height=FV(i),o.style.width=FV(r),o},svgData:QF,tryCombineChars:e=>{for(var t=0;t<e.length-1;t++){var n=e[t],r=e[t+1];n instanceof F0&&r instanceof F0&&QP(n,r)&&(n.text+=r.text,n.height=Math.max(n.height,r.height),n.depth=Math.max(n.depth,r.depth),n.italic=r.italic,e.splice(t+1,1),t--)}return e}},QV={number:3,unit:"mu"},QH={number:4,unit:"mu"},QU={number:5,unit:"mu"},QW={mord:{mop:QV,mbin:QH,mrel:QU,minner:QV},mop:{mord:QV,mop:QV,mrel:QU,minner:QV},mbin:{mord:QH,mop:QH,mopen:QH,minner:QH},mrel:{mord:QU,mop:QU,mopen:QU,minner:QU},mopen:{},mclose:{mop:QV,mbin:QH,mrel:QU,minner:QV},mpunct:{mord:QV,mop:QV,mrel:QU,mopen:QV,mclose:QV,mpunct:QV,minner:QV},minner:{mord:QV,mop:QV,mbin:QH,mrel:QU,mopen:QV,mpunct:QV,minner:QV}},QG={mord:{mop:QV},mop:{mord:QV,mop:QV},mbin:{},mrel:{},mopen:{},mclose:{mop:QV},mpunct:{},minner:{mop:QV}},QX={},QY={},QZ={};function QK(e){for(var{type:t,names:n,props:r,handler:i,htmlBuilder:o,mathmlBuilder:s}=e,a={type:t,numArgs:r.numArgs,argTypes:r.argTypes,allowedInArgument:!!r.allowedInArgument,allowedInText:!!r.allowedInText,allowedInMath:void 0===r.allowedInMath||r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,primitive:!!r.primitive,handler:i},l=0;l<n.length;++l)QX[n[l]]=a;t&&(o&&(QY[t]=o),s&&(QZ[t]=s))}function QJ(e){var{type:t,htmlBuilder:n,mathmlBuilder:r}=e;QK({type:t,names:[],props:{numArgs:0},handler(){throw Error("Should never be called.")},htmlBuilder:n,mathmlBuilder:r})}var Q0=function(e){return"ordgroup"===e.type&&1===e.body.length?e.body[0]:e},Q1=function(e){return"ordgroup"===e.type?e.body:[e]},Q2=QQ.makeSpan,Q4=["leftmost","mbin","mopen","mrel","mop","mpunct"],Q5=["rightmost","mrel","mclose","mpunct"],Q3={display:Fk.DISPLAY,text:Fk.TEXT,script:Fk.SCRIPT,scriptscript:Fk.SCRIPTSCRIPT},Q6={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Q7=function(e,t,n,r){void 0===r&&(r=[null,null]);for(var i=[],o=0;o<e.length;o++){var s=Vr(e[o],t);if(s instanceof FN){var a=s.children;i.push(...a)}else i.push(s)}if(QQ.tryCombineChars(i),!n)return i;var l=t;if(1===e.length){var c=e[0];"sizing"===c.type?l=t.havingSize(c.size):"styling"===c.type&&(l=t.havingStyle(Q3[c.style]))}var u=Q2([r[0]||"leftmost"],[],t),h=Q2([r[1]||"rightmost"],[],t),d="root"===n;return Q8(i,(e,t)=>{var n=t.classes[0],r=e.classes[0];"mbin"===n&&Fh.contains(Q5,r)?t.classes[0]="mord":"mbin"===r&&Fh.contains(Q4,n)&&(e.classes[0]="mord")},{node:u},h,d),Q8(i,(e,t)=>{var n=Vt(t),r=Vt(e),i=n&&r?e.hasClass("mtight")?QG[n][r]:QW[n][r]:null;if(i)return QQ.makeGlue(i,l)},{node:u},h,d),i},Q8=function e(t,n,r,i,o){i&&t.push(i);for(var s=0;s<t.length;s++){let i;var a=t[s],l=Q9(a);if(l){e(l.children,n,r,null,o);continue}var c=!a.hasClass("mspace");if(c){var u=n(a,r.node);u&&(r.insertAfter?r.insertAfter(u):(t.unshift(u),s++))}c?r.node=a:o&&a.hasClass("newline")&&(r.node=Q2(["leftmost"])),i=s,r.insertAfter=e=>{t.splice(i+1,0,e),s++}}i&&t.pop()},Q9=function(e){return e instanceof FN||e instanceof FZ||e instanceof FY&&e.hasClass("enclosing")?e:null},Ve=function e(t,n){var r=Q9(t);if(r){var i=r.children;if(i.length){if("right"===n)return e(i[i.length-1],"right");if("left"===n)return e(i[0],"left")}}return t},Vt=function(e,t){return e?(t&&(e=Ve(e,t)),Q6[e.classes[0]]||null):null},Vn=function(e,t){var n=["nulldelimiter"].concat(e.baseSizingClasses());return Q2(t.concat(n))},Vr=function(e,t,n){if(!e)return Q2();if(QY[e.type]){var r=QY[e.type](e,t);if(n&&t.size!==n.size){r=Q2(t.sizingClasses(n),[r],t);var i=t.sizeMultiplier/n.sizeMultiplier;r.height*=i,r.depth*=i}return r}throw new Fo("Got group of unknown type: '"+e.type+"'")};function Vi(e,t){var n=Q2(["base"],e,t),r=Q2(["strut"]);return r.style.height=FV(n.height+n.depth),n.depth&&(r.style.verticalAlign=FV(-n.depth)),n.children.unshift(r),n}function Vo(e,t){var n,r=null;1===e.length&&"tag"===e[0].type&&(r=e[0].tag,e=e[0].body);var i,o=Q7(e,t,"root");2===o.length&&o[1].hasClass("tag")&&(i=o.pop());for(var s=[],a=[],l=0;l<o.length;l++)if(a.push(o[l]),o[l].hasClass("mbin")||o[l].hasClass("mrel")||o[l].hasClass("allowbreak")){for(var c=!1;l<o.length-1&&o[l+1].hasClass("mspace")&&!o[l+1].hasClass("newline");)l++,a.push(o[l]),o[l].hasClass("nobreak")&&(c=!0);c||(s.push(Vi(a,t)),a=[])}else o[l].hasClass("newline")&&(a.pop(),a.length>0&&(s.push(Vi(a,t)),a=[]),s.push(o[l]));a.length>0&&s.push(Vi(a,t)),r?((n=Vi(Q7(r,t,!0))).classes=["tag"],s.push(n)):i&&s.push(i);var u=Q2(["katex-html"],s);if(u.setAttribute("aria-hidden","true"),n){var h=n.children[0];h.style.height=FV(u.height+u.depth),u.depth&&(h.style.verticalAlign=FV(-u.depth))}return u}function Vs(e){return new FN(e)}class Va{constructor(e,t,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=t||[],this.classes=n||[]}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);this.classes.length>0&&(e.className=FH(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof Vl&&this.children[n+1]instanceof Vl){for(var r=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof Vl;)r+=this.children[++n].toText();e.appendChild(new Vl(r).toNode())}else e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=Fh.escape(this.attributes[t]),e+='"');this.classes.length>0&&(e+=' class ="'+Fh.escape(FH(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+("</"+this.type)+">"}toText(){return this.children.map(e=>e.toText()).join("")}}class Vl{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return Fh.escape(this.toText())}toText(){return this.text}}class Vc{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",FV(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+FV(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var Vu={MathNode:Va,TextNode:Vl,SpaceNode:Vc,newDocumentFragment:Vs},Vh=function(e,t,n){return F7[t][e]&&F7[t][e].replace&&55349!==e.charCodeAt(0)&&!(Qh.hasOwnProperty(e)&&n&&(n.fontFamily&&"tt"===n.fontFamily.slice(4,6)||n.font&&"tt"===n.font.slice(4,6)))&&(e=F7[t][e].replace),new Vu.TextNode(e)},Vd=function(e){return 1===e.length?e[0]:new Vu.MathNode("mrow",e)},Vf=function(e,t){if("texttt"===t.fontFamily)return"monospace";if("textsf"===t.fontFamily)return"textit"===t.fontShape&&"textbf"===t.fontWeight?"sans-serif-bold-italic":"textit"===t.fontShape?"sans-serif-italic":"textbf"===t.fontWeight?"bold-sans-serif":"sans-serif";if("textit"===t.fontShape&&"textbf"===t.fontWeight)return"bold-italic";if("textit"===t.fontShape)return"italic";if("textbf"===t.fontWeight)return"bold";var n=t.font;if(!n||"mathnormal"===n)return null;var r=e.mode;if("mathit"===n)return"italic";if("boldsymbol"===n)return"textord"===e.type?"bold":"bold-italic";if("mathbf"===n)return"bold";if("mathbb"===n)return"double-struck";if("mathsfit"===n)return"sans-serif-italic";if("mathfrak"===n)return"fraktur";if("mathscr"===n||"mathcal"===n)return"script";if("mathsf"===n)return"sans-serif";if("mathtt"===n)return"monospace";var i=e.text;return Fh.contains(["\\imath","\\jmath"],i)?null:(F7[r][i]&&F7[r][i].replace&&(i=F7[r][i].replace),FP(i,QQ.fontMap[n].fontName,r)?QQ.fontMap[n].variant:null)};function Vp(e){if(!e)return!1;if("mi"===e.type&&1===e.children.length){var t=e.children[0];return t instanceof Vl&&"."===t.text}if("mo"!==e.type||1!==e.children.length||"true"!==e.getAttribute("separator")||"0em"!==e.getAttribute("lspace")||"0em"!==e.getAttribute("rspace"))return!1;var n=e.children[0];return n instanceof Vl&&","===n.text}var Vm=function(e,t,n){if(1===e.length){var r=Vy(e[0],t);return n&&r instanceof Va&&"mo"===r.type&&(r.setAttribute("lspace","0em"),r.setAttribute("rspace","0em")),[r]}for(var i,o=[],s=0;s<e.length;s++){var a=Vy(e[s],t);if(a instanceof Va&&i instanceof Va){if("mtext"===a.type&&"mtext"===i.type&&a.getAttribute("mathvariant")===i.getAttribute("mathvariant")){i.children.push(...a.children);continue}if("mn"===a.type&&"mn"===i.type){i.children.push(...a.children);continue}if(Vp(a)&&"mn"===i.type){i.children.push(...a.children);continue}else if("mn"===a.type&&Vp(i))a.children=[...i.children,...a.children],o.pop();else if(("msup"===a.type||"msub"===a.type)&&a.children.length>=1&&("mn"===i.type||Vp(i))){var l=a.children[0];l instanceof Va&&"mn"===l.type&&(l.children=[...i.children,...l.children],o.pop())}else if("mi"===i.type&&1===i.children.length){var c=i.children[0];if(c instanceof Vl&&""===c.text&&("mo"===a.type||"mi"===a.type||"mn"===a.type)){var u=a.children[0];u instanceof Vl&&u.text.length>0&&(u.text=u.text.slice(0,1)+""+u.text.slice(1),o.pop())}}}o.push(a),i=a}return o},Vg=function(e,t,n){return Vd(Vm(e,t,n))},Vy=function(e,t){if(!e)return new Vu.MathNode("mrow");if(QZ[e.type])return QZ[e.type](e,t);throw new Fo("Got group of unknown type: '"+e.type+"'")};function Vb(e,t,n,r,i){var o,s=Vm(e,n);o=1===s.length&&s[0]instanceof Va&&Fh.contains(["mrow","mtable"],s[0].type)?s[0]:new Vu.MathNode("mrow",s);var a=new Vu.MathNode("annotation",[new Vu.TextNode(t)]);a.setAttribute("encoding","application/x-tex");var l=new Vu.MathNode("semantics",[o,a]),c=new Vu.MathNode("math",[l]);return c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),r&&c.setAttribute("display","block"),QQ.makeSpan([i?"katex":"katex-mathml"],[c])}var Vv=function(e){return new Fq({style:e.displayMode?Fk.DISPLAY:Fk.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},Vx=function(e,t){if(t.displayMode){var n=["katex-display"];t.leqno&&n.push("leqno"),t.fleqn&&n.push("fleqn"),e=QQ.makeSpan(n,[e])}return e},Vw=function(e,t,n){var r,i=Vv(n);if("mathml"===n.output)return Vb(e,t,i,n.displayMode,!0);if("html"===n.output){var o=Vo(e,i);r=QQ.makeSpan(["katex"],[o])}else{var s=Vb(e,t,i,n.displayMode,!1),a=Vo(e,i);r=QQ.makeSpan(["katex"],[s,a])}return Vx(r,n)},Vk={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},VO={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},VS={encloseSpan:function(e,t,n,r,i){var o,s=e.height+e.depth+n+r;if(/fbox|color|angl/.test(t)){if(o=QQ.makeSpan(["stretchy",t],[],i),"fbox"===t){var a=i.color&&i.getColor();a&&(o.style.borderColor=a)}}else{var l=[];/^[bx]cancel$/.test(t)&&l.push(new F4({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(t)&&l.push(new F4({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var c=new F1(l,{width:"100%",height:FV(s)});o=QQ.makeSvgSpan([],[c],i)}return o.height=s,o.style.height=FV(s),o},mathMLnode:function(e){var t=new Vu.MathNode("mo",[new Vu.TextNode(Vk[e.replace(/^\\/,"")])]);return t.setAttribute("stretchy","true"),t},svgSpan:function(e,t){var{span:n,minWidth:r,height:i}=function(){var n=4e5,r=e.label.slice(1);if(Fh.contains(["widehat","widecheck","widetilde","utilde"],r)){var i,o,s,a,l="ordgroup"===(i=e.base).type?i.body.length:1;if(l>5)"widehat"===r||"widecheck"===r?(o=420,n=2364,a=.42,s=r+"4"):(o=312,n=2340,a=.34,s="tilde4");else{var c=[1,1,2,2,3,3][l];"widehat"===r||"widecheck"===r?(n=[0,1062,2364,2364,2364][c],o=[0,239,300,360,420][c],a=[0,.24,.3,.3,.36,.42][c],s=r+c):(n=[0,600,1033,2339,2340][c],o=[0,260,286,306,312][c],a=[0,.26,.286,.3,.306,.34][c],s="tilde"+c)}var u=new F1([new F2(s)],{width:"100%",height:FV(a),viewBox:"0 0 "+n+" "+o,preserveAspectRatio:"none"});return{span:QQ.makeSvgSpan([],[u],t),minWidth:0,height:a}}var h,d,f=[],p=VO[r],[m,g,y]=p,b=y/1e3,v=m.length;if(1===v)h=["hide-tail"],d=[p[3]];else if(2===v)h=["halfarrow-left","halfarrow-right"],d=["xMinYMin","xMaxYMin"];else if(3===v)h=["brace-left","brace-center","brace-right"],d=["xMinYMin","xMidYMin","xMaxYMin"];else throw Error(`Correct katexImagesData or update code here to support
                    `+v+" children.");for(var x=0;x<v;x++){var w=new F1([new F2(m[x])],{width:"400em",height:FV(b),viewBox:"0 0 "+n+" "+y,preserveAspectRatio:d[x]+" slice"}),k=QQ.makeSvgSpan([h[x]],[w],t);if(1===v)return{span:k,minWidth:g,height:b};k.style.height=FV(b),f.push(k)}return{span:QQ.makeSpan(["stretchy"],f,t),minWidth:g,height:b}}();return n.height=i,n.style.height=FV(i),r>0&&(n.style.minWidth=FV(r)),n}};function VC(e,t){if(!e||e.type!==t)throw Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return e}function VT(e){var t=VA(e);if(!t)throw Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}function VA(e){return e&&("atom"===e.type||F6.hasOwnProperty(e.type))?e:null}var VE=(e,t)=>{e&&"supsub"===e.type?(o=(s=VC(e.base,"accent")).base,e.base=o,a=function(e){if(e instanceof FY)return e;throw Error("Expected span<HtmlDomNode> but got "+String(e)+".")}(Vr(e,t)),e.base=s):o=(s=VC(e,"accent")).base;var n=Vr(o,t.havingCrampedStyle()),r=s.isShifty&&Fh.isCharacterBox(o),i=0;r&&(i=F5(Vr(Fh.getBaseElem(o),t.havingCrampedStyle())).skew);var o,s,a,l,c="\\c"===s.label,u=c?n.height+n.depth:Math.min(n.height,t.fontMetrics().xHeight);if(s.isStretchy)l=VS.svgSpan(s,t),l=QQ.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n},{type:"elem",elem:l,wrapperClasses:["svg-align"],wrapperStyle:i>0?{width:"calc(100% - "+FV(2*i)+")",marginLeft:FV(2*i)}:void 0}]},t);else{"\\vec"===s.label?(h=QQ.staticSvg("vec",t),d=QQ.svgData.vec[1]):((h=F5(h=QQ.makeOrd({mode:s.mode,text:s.label},t,"textord"))).italic=0,d=h.width,c&&(u+=h.depth)),l=QQ.makeSpan(["accent-body"],[h]);var h,d,f="\\textcircled"===s.label;f&&(l.classes.push("accent-full"),u=n.height);var p=i;f||(p-=d/2),l.style.left=FV(p),"\\textcircled"===s.label&&(l.style.top=".2em"),l=QQ.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n},{type:"kern",size:-u},{type:"elem",elem:l}]},t)}var m=QQ.makeSpan(["mord","accent"],[l],t);return a?(a.children[0]=m,a.height=Math.max(m.height,a.height),a.classes[0]="mord",a):m},VM=(e,t)=>{var n=e.isStretchy?VS.mathMLnode(e.label):new Vu.MathNode("mo",[Vh(e.label,e.mode)]),r=new Vu.MathNode("mover",[Vy(e.base,t),n]);return r.setAttribute("accent","true"),r},VN=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(e=>"\\"+e).join("|"));QK({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{var n=Q0(t[0]),r=!VN.test(e.funcName),i=!r||"\\widehat"===e.funcName||"\\widetilde"===e.funcName||"\\widecheck"===e.funcName;return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:r,isShifty:i,base:n}},htmlBuilder:VE,mathmlBuilder:VM}),QK({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{var n=t[0],r=e.parser.mode;return"math"===r&&(e.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+e.funcName+" works only in text mode"),r="text"),{type:"accent",mode:r,label:e.funcName,isStretchy:!1,isShifty:!0,base:n}},htmlBuilder:VE,mathmlBuilder:VM}),QK({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=t[0];return{type:"accentUnder",mode:n.mode,label:r,base:i}},htmlBuilder:(e,t)=>{var n=Vr(e.base,t),r=VS.svgSpan(e,t),i=.12*("\\utilde"===e.label),o=QQ.makeVList({positionType:"top",positionData:n.height,children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:n}]},t);return QQ.makeSpan(["mord","accentunder"],[o],t)},mathmlBuilder:(e,t)=>{var n=VS.mathMLnode(e.label),r=new Vu.MathNode("munder",[Vy(e.base,t),n]);return r.setAttribute("accentunder","true"),r}});var V_=e=>{var t=new Vu.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};QK({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,n){var{parser:r,funcName:i}=e;return{type:"xArrow",mode:r.mode,label:i,body:t[0],below:n[0]}},htmlBuilder(e,t){var n,r,i=t.style,o=t.havingStyle(i.sup()),s=QQ.wrapFragment(Vr(e.body,o,t),t),a="\\x"===e.label.slice(0,2)?"x":"cd";s.classes.push(a+"-arrow-pad"),e.below&&(o=t.havingStyle(i.sub()),(n=QQ.wrapFragment(Vr(e.below,o,t),t)).classes.push(a+"-arrow-pad"));var l=VS.svgSpan(e,t),c=-t.fontMetrics().axisHeight+.5*l.height,u=-t.fontMetrics().axisHeight-.5*l.height-.111;if((s.depth>.25||"\\xleftequilibrium"===e.label)&&(u-=s.depth),n){var h=-t.fontMetrics().axisHeight+n.height+.5*l.height+.111;r=QQ.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:u},{type:"elem",elem:l,shift:c},{type:"elem",elem:n,shift:h}]},t)}else r=QQ.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:u},{type:"elem",elem:l,shift:c}]},t);return r.children[0].children[0].children[1].classes.push("svg-align"),QQ.makeSpan(["mrel","x-arrow"],[r],t)},mathmlBuilder(e,t){var n,r=VS.mathMLnode(e.label);if(r.setAttribute("minsize","x"===e.label.charAt(0)?"1.75em":"3.0em"),e.body){var i=V_(Vy(e.body,t));if(e.below){var o=V_(Vy(e.below,t));n=new Vu.MathNode("munderover",[r,o,i])}else n=new Vu.MathNode("mover",[r,i])}else if(e.below){var s=V_(Vy(e.below,t));n=new Vu.MathNode("munder",[r,s])}else n=V_(),n=new Vu.MathNode("mover",[r,n]);return n}});var Vj=QQ.makeSpan;function VD(e,t){var n=Q7(e.body,t,!0);return Vj([e.mclass],n,t)}function VP(e,t){var n,r=Vm(e.body,t);return"minner"===e.mclass?n=new Vu.MathNode("mpadded",r):"mord"===e.mclass?e.isCharacterBox?(n=r[0]).type="mi":n=new Vu.MathNode("mi",r):(e.isCharacterBox?(n=r[0]).type="mo":n=new Vu.MathNode("mo",r),"mbin"===e.mclass?(n.attributes.lspace="0.22em",n.attributes.rspace="0.22em"):"mpunct"===e.mclass?(n.attributes.lspace="0em",n.attributes.rspace="0.17em"):"mopen"===e.mclass||"mclose"===e.mclass?(n.attributes.lspace="0em",n.attributes.rspace="0em"):"minner"===e.mclass&&(n.attributes.lspace="0.0556em",n.attributes.width="+0.1111em")),n}QK({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(e,t){var{parser:n,funcName:r}=e,i=t[0];return{type:"mclass",mode:n.mode,mclass:"m"+r.slice(5),body:Q1(i),isCharacterBox:Fh.isCharacterBox(i)}},htmlBuilder:VD,mathmlBuilder:VP});var VR=e=>{var t="ordgroup"===e.type&&e.body.length?e.body[0]:e;return"atom"===t.type&&("bin"===t.family||"rel"===t.family)?"m"+t.family:"mord"};QK({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(e,t){var{parser:n}=e;return{type:"mclass",mode:n.mode,mclass:VR(t[0]),body:Q1(t[1]),isCharacterBox:Fh.isCharacterBox(t[1])}}}),QK({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(e,t){var n,{parser:r,funcName:i}=e,o=t[1],s=t[0];n="\\stackrel"!==i?VR(o):"mrel";var a={type:"op",mode:o.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:"\\stackrel"!==i,body:Q1(o)},l={type:"supsub",mode:s.mode,base:a,sup:"\\underset"===i?null:s,sub:"\\underset"===i?s:null};return{type:"mclass",mode:r.mode,mclass:n,body:[l],isCharacterBox:Fh.isCharacterBox(l)}},htmlBuilder:VD,mathmlBuilder:VP}),QK({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:n}=e;return{type:"pmb",mode:n.mode,mclass:VR(t[0]),body:Q1(t[0])}},htmlBuilder(e,t){var n=Q7(e.body,t,!0),r=QQ.makeSpan([e.mclass],n,t);return r.style.textShadow="0.02em 0.01em 0.04px",r},mathmlBuilder(e,t){var n=Vm(e.body,t),r=new Vu.MathNode("mstyle",n);return r.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),r}});var VI={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},Vz=()=>({type:"styling",body:[],mode:"math",style:"display"}),VL=e=>"textord"===e.type&&"@"===e.text,Vq=(e,t)=>("mathord"===e.type||"atom"===e.type)&&e.text===t;QK({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(e,t){var{parser:n,funcName:r}=e;return{type:"cdlabel",mode:n.mode,side:r.slice(4),label:t[0]}},htmlBuilder(e,t){var n=t.havingStyle(t.style.sup()),r=QQ.wrapFragment(Vr(e.label,n,t),t);return r.classes.push("cd-label-"+e.side),r.style.bottom=FV(.8-r.depth),r.height=0,r.depth=0,r},mathmlBuilder(e,t){var n=new Vu.MathNode("mrow",[Vy(e.label,t)]);return(n=new Vu.MathNode("mpadded",[n])).setAttribute("width","0"),"left"===e.side&&n.setAttribute("lspace","-1width"),n.setAttribute("voffset","0.7em"),(n=new Vu.MathNode("mstyle",[n])).setAttribute("displaystyle","false"),n.setAttribute("scriptlevel","1"),n}}),QK({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(e,t){var{parser:n}=e;return{type:"cdlabelparent",mode:n.mode,fragment:t[0]}},htmlBuilder(e,t){var n=QQ.wrapFragment(Vr(e.fragment,t),t);return n.classes.push("cd-vert-arrow"),n},mathmlBuilder:(e,t)=>new Vu.MathNode("mrow",[Vy(e.fragment,t)])}),QK({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(e,t){for(var{parser:n}=e,r=VC(t[0],"ordgroup"),i=r.body,o="",s=0;s<i.length;s++)o+=VC(i[s],"textord").text;var a,l=parseInt(o);if(isNaN(l))throw new Fo("\\@char has non-numeric argument "+o);if(l<0||l>=1114111)throw new Fo("\\@char with invalid code point "+o);return l<=65535?a=String.fromCharCode(l):(l-=65536,a=String.fromCharCode((l>>10)+55296,(1023&l)+56320)),{type:"textord",mode:n.mode,text:a}}});var V$=(e,t)=>{var n=Q7(e.body,t.withColor(e.color),!1);return QQ.makeFragment(n)},VB=(e,t)=>{var n=Vm(e.body,t.withColor(e.color)),r=new Vu.MathNode("mstyle",n);return r.setAttribute("mathcolor",e.color),r};QK({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(e,t){var{parser:n}=e,r=VC(t[0],"color-token").color,i=t[1];return{type:"color",mode:n.mode,color:r,body:Q1(i)}},htmlBuilder:V$,mathmlBuilder:VB}),QK({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(e,t){var{parser:n,breakOnTokenText:r}=e,i=VC(t[0],"color-token").color;n.gullet.macros.set("\\current@color",i);var o=n.parseExpression(!0,r);return{type:"color",mode:n.mode,color:i,body:o}},htmlBuilder:V$,mathmlBuilder:VB}),QK({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(e,t,n){var{parser:r}=e,i="["===r.gullet.future().text?r.parseSizeGroup(!0):null,o=!r.settings.displayMode||!r.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:r.mode,newLine:o,size:i&&VC(i,"size").value}},htmlBuilder(e,t){var n=QQ.makeSpan(["mspace"],[],t);return e.newLine&&(n.classes.push("newline"),e.size&&(n.style.marginTop=FV(FQ(e.size,t)))),n},mathmlBuilder(e,t){var n=new Vu.MathNode("mspace");return e.newLine&&(n.setAttribute("linebreak","newline"),e.size&&n.setAttribute("height",FV(FQ(e.size,t)))),n}});var VF={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},VQ=e=>{var t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new Fo("Expected a control sequence",e);return t},VV=e=>{var t=e.gullet.popToken();return"="===t.text&&" "===(t=e.gullet.popToken()).text&&(t=e.gullet.popToken()),t},VH=(e,t,n,r)=>{var i=e.gullet.macros.get(n.text);null==i&&(n.noexpand=!0,i={tokens:[n],numArgs:0,unexpandable:!e.gullet.isExpandable(n.text)}),e.gullet.macros.set(t,i,r)};QK({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t,funcName:n}=e;t.consumeSpaces();var r=t.fetch();if(VF[r.text])return("\\global"===n||"\\\\globallong"===n)&&(r.text=VF[r.text]),VC(t.parseFunction(),"internal");throw new Fo("Invalid token after macro prefix",r)}}),QK({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:n}=e,r=t.gullet.popToken(),i=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new Fo("Expected a control sequence",r);for(var o,s=0,a=[[]];"{"!==t.gullet.future().text;)if("#"===(r=t.gullet.popToken()).text){if("{"===t.gullet.future().text){o=t.gullet.future(),a[s].push("{");break}if(r=t.gullet.popToken(),!/^[1-9]$/.test(r.text))throw new Fo('Invalid argument number "'+r.text+'"');if(parseInt(r.text)!==s+1)throw new Fo('Argument number "'+r.text+'" out of order');s++,a.push([])}else{if("EOF"===r.text)throw new Fo("Expected a macro definition");a[s].push(r.text)}var{tokens:l}=t.gullet.consumeArg();return o&&l.unshift(o),("\\edef"===n||"\\xdef"===n)&&(l=t.gullet.expandTokens(l)).reverse(),t.gullet.macros.set(i,{tokens:l,numArgs:s,delimiters:a},n===VF[n]),{type:"internal",mode:t.mode}}}),QK({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:n}=e,r=VQ(t.gullet.popToken());t.gullet.consumeSpaces();var i=VV(t);return VH(t,r,i,"\\\\globallet"===n),{type:"internal",mode:t.mode}}}),QK({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:n}=e,r=VQ(t.gullet.popToken()),i=t.gullet.popToken(),o=t.gullet.popToken();return VH(t,r,o,"\\\\globalfuture"===n),t.gullet.pushToken(o),t.gullet.pushToken(i),{type:"internal",mode:t.mode}}});var VU=function(e,t,n){var r=FP(F7.math[e]&&F7.math[e].replace||e,t,n);if(!r)throw Error("Unsupported symbol "+e+" and font size "+t+".");return r},VW=function(e,t,n,r){var i=n.havingBaseStyle(t),o=QQ.makeSpan(r.concat(i.sizingClasses(n)),[e],n),s=i.sizeMultiplier/n.sizeMultiplier;return o.height*=s,o.depth*=s,o.maxFontSize=i.sizeMultiplier,o},VG=function(e,t,n){var r=t.havingBaseStyle(n),i=(1-t.sizeMultiplier/r.sizeMultiplier)*t.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=FV(i),e.height-=i,e.depth+=i},VX=function(e,t,n,r,i,o){var s=VW(QQ.makeSymbol(e,"Main-Regular",i,r),t,r,o);return n&&VG(s,r,t),s},VY=function(e,t,n,r,i,o){var s=QQ.makeSymbol(e,"Size"+t+"-Regular",i,r),a=VW(QQ.makeSpan(["delimsizing","size"+t],[s],r),Fk.TEXT,r,o);return n&&VG(a,r,Fk.TEXT),a},VZ=function(e,t,n){return{type:"elem",elem:QQ.makeSpan(["delimsizinginner","Size1-Regular"===t?"delim-size1":"delim-size4"],[QQ.makeSpan([],[QQ.makeSymbol(e,t,n)])])}},VK=function(e,t,n){var r=F_["Size4-Regular"][e.charCodeAt(0)]?F_["Size4-Regular"][e.charCodeAt(0)][4]:F_["Size1-Regular"][e.charCodeAt(0)][4],i=new F1([new F2("inner",FA(e,Math.round(1e3*t)))],{width:FV(r),height:FV(t),style:"width:"+FV(r),viewBox:"0 0 "+1e3*r+" "+Math.round(1e3*t),preserveAspectRatio:"xMinYMin"}),o=QQ.makeSvgSpan([],[i],n);return o.height=t,o.style.height=FV(t),o.style.width=FV(r),{type:"elem",elem:o}},VJ={type:"kern",size:-.008},V0=["|","\\lvert","\\rvert","\\vert"],V1=["\\|","\\lVert","\\rVert","\\Vert"],V2=function(e,t,n,r,i,o){var s,a,l,c,u="",h=0;s=l=c=e,a=null;var d="Size1-Regular";"\\uparrow"===e?l=c="":"\\Uparrow"===e?l=c="":"\\downarrow"===e?s=l="":"\\Downarrow"===e?s=l="":"\\updownarrow"===e?(s="\\uparrow",l="",c="\\downarrow"):"\\Updownarrow"===e?(s="\\Uparrow",l="",c="\\Downarrow"):Fh.contains(V0,e)?(l="",u="vert",h=333):Fh.contains(V1,e)?(l="",u="doublevert",h=556):"["===e||"\\lbrack"===e?(s="",l="",c="",d="Size4-Regular",u="lbrack",h=667):"]"===e||"\\rbrack"===e?(s="",l="",c="",d="Size4-Regular",u="rbrack",h=667):"\\lfloor"===e||""===e?(l=s="",c="",d="Size4-Regular",u="lfloor",h=667):"\\lceil"===e||""===e?(s="",l=c="",d="Size4-Regular",u="lceil",h=667):"\\rfloor"===e||""===e?(l=s="",c="",d="Size4-Regular",u="rfloor",h=667):"\\rceil"===e||""===e?(s="",l=c="",d="Size4-Regular",u="rceil",h=667):"("===e||"\\lparen"===e?(s="",l="",c="",d="Size4-Regular",u="lparen",h=875):")"===e||"\\rparen"===e?(s="",l="",c="",d="Size4-Regular",u="rparen",h=875):"\\{"===e||"\\lbrace"===e?(s="",a="",c="",l="",d="Size4-Regular"):"\\}"===e||"\\rbrace"===e?(s="",a="",c="",l="",d="Size4-Regular"):"\\lgroup"===e||""===e?(s="",c="",l="",d="Size4-Regular"):"\\rgroup"===e||""===e?(s="",c="",l="",d="Size4-Regular"):"\\lmoustache"===e||""===e?(s="",c="",l="",d="Size4-Regular"):("\\rmoustache"===e||""===e)&&(s="",c="",l="",d="Size4-Regular");var f=VU(s,d,i),p=f.height+f.depth,m=VU(l,d,i),g=m.height+m.depth,y=VU(c,d,i),b=y.height+y.depth,v=0,x=1;if(null!==a){var w=VU(a,d,i);v=w.height+w.depth,x=2}var k=p+b+v,O=Math.max(0,Math.ceil((t-k)/(x*g))),S=k+O*x*g,C=r.fontMetrics().axisHeight;n&&(C*=r.sizeMultiplier);var T=S/2-C,A=[];if(u.length>0){var E=Math.round(1e3*S),M=FM(u,Math.round(1e3*(S-p-b))),N=new F2(u,M),_=(h/1e3).toFixed(3)+"em",j=(E/1e3).toFixed(3)+"em",D=new F1([N],{width:_,height:j,viewBox:"0 0 "+h+" "+E}),P=QQ.makeSvgSpan([],[D],r);P.height=E/1e3,P.style.width=_,P.style.height=j,A.push({type:"elem",elem:P})}else{if(A.push(VZ(c,d,i)),A.push(VJ),null===a)A.push(VK(l,S-p-b+.016,r));else{var R=(S-p-b-v)/2+.016;A.push(VK(l,R,r)),A.push(VJ),A.push(VZ(a,d,i)),A.push(VJ),A.push(VK(l,R,r))}A.push(VJ),A.push(VZ(s,d,i))}var I=r.havingBaseStyle(Fk.TEXT),z=QQ.makeVList({positionType:"bottom",positionData:T,children:A},I);return VW(QQ.makeSpan(["delimsizing","mult"],[z],I),Fk.TEXT,r,o)},V4=function(e,t,n,r,i){var o=FT(e,r,n),s=new F1([new F2(e,o)],{width:"400em",height:FV(t),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return QQ.makeSvgSpan(["hide-tail"],[s],i)},V5=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],V3=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],V6=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],V7=[0,1.2,1.8,2.4,3],V8=[{type:"small",style:Fk.SCRIPTSCRIPT},{type:"small",style:Fk.SCRIPT},{type:"small",style:Fk.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],V9=[{type:"small",style:Fk.SCRIPTSCRIPT},{type:"small",style:Fk.SCRIPT},{type:"small",style:Fk.TEXT},{type:"stack"}],He=[{type:"small",style:Fk.SCRIPTSCRIPT},{type:"small",style:Fk.SCRIPT},{type:"small",style:Fk.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Ht=function(e){if("small"===e.type)return"Main-Regular";if("large"===e.type)return"Size"+e.size+"-Regular";if("stack"===e.type)return"Size4-Regular";throw Error("Add support for delim type '"+e.type+"' here.")},Hn=function(e,t,n,r){for(var i=Math.min(2,3-r.style.size),o=i;o<n.length&&"stack"!==n[o].type;o++){var s=VU(e,Ht(n[o]),"math"),a=s.height+s.depth;if("small"===n[o].type&&(a*=r.havingBaseStyle(n[o].style).sizeMultiplier),a>t)return n[o]}return n[n.length-1]},Hr=function(e,t,n,r,i,o){"<"===e||"\\lt"===e||""===e?e="\\langle":(">"===e||"\\gt"===e||""===e)&&(e="\\rangle");var s=Fh.contains(V6,e)?V8:Fh.contains(V5,e)?He:V9,a=Hn(e,t,s,r);return"small"===a.type?VX(e,a.style,n,r,i,o):"large"===a.type?VY(e,a.size,n,r,i,o):V2(e,t,n,r,i,o)},Hi={sqrtImage:function(e,t){var n,r,i=t.havingBaseSizing(),o=Hn("\\surd",e*i.sizeMultiplier,He,i),s=i.sizeMultiplier,a=Math.max(0,t.minRuleThickness-t.fontMetrics().sqrtRuleThickness),l=0,c=0,u=0;return"small"===o.type?(u=1e3+1e3*a+80,e<1?s=1:e<1.4&&(s=.7),l=(1+a+.08)/s,c=(1+a)/s,(n=V4("sqrtMain",l,u,a,t)).style.minWidth="0.853em",r=.833/s):"large"===o.type?(u=1080*V7[o.size],c=(V7[o.size]+a)/s,l=(V7[o.size]+a+.08)/s,(n=V4("sqrtSize"+o.size,l,u,a,t)).style.minWidth="1.02em",r=1/s):(l=e+a+.08,c=e+a,(n=V4("sqrtTall",l,u=Math.floor(1e3*e+a)+80,a,t)).style.minWidth="0.742em",r=1.056),n.height=c,n.style.height=FV(l),{span:n,advanceWidth:r,ruleWidth:(t.fontMetrics().sqrtRuleThickness+a)*s}},sizedDelim:function(e,t,n,r,i){if("<"===e||"\\lt"===e||""===e?e="\\langle":(">"===e||"\\gt"===e||""===e)&&(e="\\rangle"),Fh.contains(V5,e)||Fh.contains(V6,e))return VY(e,t,!1,n,r,i);if(Fh.contains(V3,e))return V2(e,V7[t],!1,n,r,i);throw new Fo("Illegal delimiter: '"+e+"'")},sizeToMaxHeight:V7,customSizedDelim:Hr,leftRightDelim:function(e,t,n,r,i,o){var s=r.fontMetrics().axisHeight*r.sizeMultiplier,a=5/r.fontMetrics().ptPerEm,l=Math.max(t-s,n+s);return Hr(e,Math.max(l/500*901,2*l-a),!0,r,i,o)}},Ho={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Hs=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function Ha(e,t){var n=VA(e);if(n&&Fh.contains(Hs,n.text))return n;throw n?new Fo("Invalid delimiter '"+n.text+"' after '"+t.funcName+"'",e):new Fo("Invalid delimiter type '"+e.type+"'",e)}function Hl(e){if(!e.body)throw Error("Bug: The leftright ParseNode wasn't fully parsed.")}QK({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{var n=Ha(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:Ho[e.funcName].size,mclass:Ho[e.funcName].mclass,delim:n.text}},htmlBuilder:(e,t)=>"."===e.delim?QQ.makeSpan([e.mclass]):Hi.sizedDelim(e.delim,e.size,t,e.mode,[e.mclass]),mathmlBuilder:e=>{var t=[];"."!==e.delim&&t.push(Vh(e.delim,e.mode));var n=new Vu.MathNode("mo",t);"mopen"===e.mclass||"mclose"===e.mclass?n.setAttribute("fence","true"):n.setAttribute("fence","false"),n.setAttribute("stretchy","true");var r=FV(Hi.sizeToMaxHeight[e.size]);return n.setAttribute("minsize",r),n.setAttribute("maxsize",r),n}}),QK({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var n=e.parser.gullet.macros.get("\\current@color");if(n&&"string"!=typeof n)throw new Fo("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:e.parser.mode,delim:Ha(t[0],e).text,color:n}}}),QK({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var n=Ha(t[0],e),r=e.parser;++r.leftrightDepth;var i=r.parseExpression(!1);--r.leftrightDepth,r.expect("\\right",!1);var o=VC(r.parseFunction(),"leftright-right");return{type:"leftright",mode:r.mode,body:i,left:n.text,right:o.delim,rightColor:o.color}},htmlBuilder:(e,t)=>{Hl(e);for(var n,r,i=Q7(e.body,t,!0,["mopen","mclose"]),o=0,s=0,a=!1,l=0;l<i.length;l++)i[l].isMiddle?a=!0:(o=Math.max(i[l].height,o),s=Math.max(i[l].depth,s));if(o*=t.sizeMultiplier,s*=t.sizeMultiplier,n="."===e.left?Vn(t,["mopen"]):Hi.leftRightDelim(e.left,o,s,t,e.mode,["mopen"]),i.unshift(n),a)for(var c=1;c<i.length;c++){var u=i[c].isMiddle;u&&(i[c]=Hi.leftRightDelim(u.delim,o,s,u.options,e.mode,[]))}if("."===e.right)r=Vn(t,["mclose"]);else{var h=e.rightColor?t.withColor(e.rightColor):t;r=Hi.leftRightDelim(e.right,o,s,h,e.mode,["mclose"])}return i.push(r),QQ.makeSpan(["minner"],i,t)},mathmlBuilder:(e,t)=>{Hl(e);var n=Vm(e.body,t);if("."!==e.left){var r=new Vu.MathNode("mo",[Vh(e.left,e.mode)]);r.setAttribute("fence","true"),n.unshift(r)}if("."!==e.right){var i=new Vu.MathNode("mo",[Vh(e.right,e.mode)]);i.setAttribute("fence","true"),e.rightColor&&i.setAttribute("mathcolor",e.rightColor),n.push(i)}return Vd(n)}}),QK({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var n=Ha(t[0],e);if(!e.parser.leftrightDepth)throw new Fo("\\middle without preceding \\left",n);return{type:"middle",mode:e.parser.mode,delim:n.text}},htmlBuilder:(e,t)=>{var n;if("."===e.delim)n=Vn(t,[]);else{n=Hi.sizedDelim(e.delim,1,t,e.mode,[]);var r={delim:e.delim,options:t};n.isMiddle=r}return n},mathmlBuilder:(e,t)=>{var n="\\vert"===e.delim||"|"===e.delim?Vh("|","text"):Vh(e.delim,e.mode),r=new Vu.MathNode("mo",[n]);return r.setAttribute("fence","true"),r.setAttribute("lspace","0.05em"),r.setAttribute("rspace","0.05em"),r}});var Hc=(e,t)=>{var n,r,i=QQ.wrapFragment(Vr(e.body,t),t),o=e.label.slice(1),s=t.sizeMultiplier,a=0,l=Fh.isCharacterBox(e.body);if("sout"===o)(r=QQ.makeSpan(["stretchy","sout"])).height=t.fontMetrics().defaultRuleThickness/s,a=-.5*t.fontMetrics().xHeight;else if("phase"===o){var c=FQ({number:.6,unit:"pt"},t),u=FQ({number:.35,unit:"ex"},t);s/=t.havingBaseSizing().sizeMultiplier;var h=i.height+i.depth+c+u;i.style.paddingLeft=FV(h/2+c);var d=Math.floor(1e3*h*s),f=new F1([new F2("phase","M400000 "+d+" H0 L"+d/2+" 0 l65 45 L145 "+(d-80)+" H400000z")],{width:"400em",height:FV(d/1e3),viewBox:"0 0 400000 "+d,preserveAspectRatio:"xMinYMin slice"});(r=QQ.makeSvgSpan(["hide-tail"],[f],t)).style.height=FV(h),a=i.depth+c+u}else{/cancel/.test(o)?l||i.classes.push("cancel-pad"):"angl"===o?i.classes.push("anglpad"):i.classes.push("boxpad");var p=0,m=0,g=0;/box/.test(o)?(g=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),m=p=t.fontMetrics().fboxsep+("colorbox"===o?0:g)):"angl"===o?(p=4*(g=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness)),m=Math.max(0,.25-i.depth)):m=p=.2*!!l,r=VS.encloseSpan(i,o,p,m,t),/fbox|boxed|fcolorbox/.test(o)?(r.style.borderStyle="solid",r.style.borderWidth=FV(g)):"angl"===o&&.049!==g&&(r.style.borderTopWidth=FV(g),r.style.borderRightWidth=FV(g)),a=i.depth+m,e.backgroundColor&&(r.style.backgroundColor=e.backgroundColor,e.borderColor&&(r.style.borderColor=e.borderColor))}if(e.backgroundColor)n=QQ.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:a},{type:"elem",elem:i,shift:0}]},t);else{var y=/cancel|phase/.test(o)?["svg-align"]:[];n=QQ.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:0},{type:"elem",elem:r,shift:a,wrapperClasses:y}]},t)}return/cancel/.test(o)&&(n.height=i.height,n.depth=i.depth),/cancel/.test(o)&&!l?QQ.makeSpan(["mord","cancel-lap"],[n],t):QQ.makeSpan(["mord"],[n],t)},Hu=(e,t)=>{var n=0,r=new Vu.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Vy(e.body,t)]);switch(e.label){case"\\cancel":r.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike");break;case"\\phase":r.setAttribute("notation","phasorangle");break;case"\\sout":r.setAttribute("notation","horizontalstrike");break;case"\\fbox":r.setAttribute("notation","box");break;case"\\angl":r.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(n=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,r.setAttribute("width","+"+2*n+"pt"),r.setAttribute("height","+"+2*n+"pt"),r.setAttribute("lspace",n+"pt"),r.setAttribute("voffset",n+"pt"),"\\fcolorbox"===e.label){var i=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);r.setAttribute("style","border: "+i+"em solid "+String(e.borderColor))}break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike")}return e.backgroundColor&&r.setAttribute("mathbackground",e.backgroundColor),r};QK({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(e,t,n){var{parser:r,funcName:i}=e,o=VC(t[0],"color-token").color,s=t[1];return{type:"enclose",mode:r.mode,label:i,backgroundColor:o,body:s}},htmlBuilder:Hc,mathmlBuilder:Hu}),QK({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(e,t,n){var{parser:r,funcName:i}=e,o=VC(t[0],"color-token").color,s=VC(t[1],"color-token").color,a=t[2];return{type:"enclose",mode:r.mode,label:i,backgroundColor:s,borderColor:o,body:a}},htmlBuilder:Hc,mathmlBuilder:Hu}),QK({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(e,t){var{parser:n}=e;return{type:"enclose",mode:n.mode,label:"\\fbox",body:t[0]}}}),QK({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(e,t){var{parser:n,funcName:r}=e,i=t[0];return{type:"enclose",mode:n.mode,label:r,body:i}},htmlBuilder:Hc,mathmlBuilder:Hu}),QK({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(e,t){var{parser:n}=e;return{type:"enclose",mode:n.mode,label:"\\angl",body:t[0]}}});var Hh={};function Hd(e){for(var{type:t,names:n,props:r,handler:i,htmlBuilder:o,mathmlBuilder:s}=e,a={type:t,numArgs:r.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},l=0;l<n.length;++l)Hh[n[l]]=a;o&&(QY[t]=o),s&&(QZ[t]=s)}var Hf={};function Hp(e){var t=[];e.consumeSpaces();var n=e.fetch().text;for("\\relax"===n&&(e.consume(),e.consumeSpaces(),n=e.fetch().text);"\\hline"===n||"\\hdashline"===n;)e.consume(),t.push("\\hdashline"===n),e.consumeSpaces(),n=e.fetch().text;return t}var Hm=e=>{if(!e.parser.settings.displayMode)throw new Fo("{"+e.envName+"} can be used only in display mode.")};function Hg(e){if(-1===e.indexOf("ed"))return -1===e.indexOf("*")}function Hy(e,t,n){var{hskipBeforeAndAfter:r,addJot:i,cols:o,arraystretch:s,colSeparationType:a,autoTag:l,singleRow:c,emptySingleRow:u,maxNumCols:h,leqno:d}=t;if(e.gullet.beginGroup(),c||e.gullet.macros.set("\\cr","\\\\\\relax"),!s){var f=e.gullet.expandMacroAsText("\\arraystretch");if(null==f)s=1;else if(!(s=parseFloat(f))||s<0)throw new Fo("Invalid \\arraystretch: "+f)}e.gullet.beginGroup();var p=[],m=[p],g=[],y=[],b=null!=l?[]:void 0;function v(){l&&e.gullet.macros.set("\\@eqnsw","1",!0)}function x(){b&&(e.gullet.macros.get("\\df@tag")?(b.push(e.subparse([new Fi("\\df@tag")])),e.gullet.macros.set("\\df@tag",void 0,!0)):b.push(!!l&&"1"===e.gullet.macros.get("\\@eqnsw")))}for(v(),y.push(Hp(e));;){var w=e.parseExpression(!1,c?"\\end":"\\\\");e.gullet.endGroup(),e.gullet.beginGroup(),w={type:"ordgroup",mode:e.mode,body:w},n&&(w={type:"styling",mode:e.mode,style:n,body:[w]}),p.push(w);var k=e.fetch().text;if("&"===k){if(h&&p.length===h){if(c||a)throw new Fo("Too many tab characters: &",e.nextToken);e.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}e.consume()}else if("\\end"===k){x(),1===p.length&&"styling"===w.type&&0===w.body[0].body.length&&(m.length>1||!u)&&m.pop(),y.length<m.length+1&&y.push([]);break}else if("\\\\"===k){e.consume();var O=void 0;" "!==e.gullet.future().text&&(O=e.parseSizeGroup(!0)),g.push(O?O.value:null),x(),y.push(Hp(e)),p=[],m.push(p),v()}else throw new Fo("Expected & or \\\\ or \\cr or \\end",e.nextToken)}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:i,arraystretch:s,body:m,cols:o,rowGaps:g,hskipBeforeAndAfter:r,hLinesBeforeRow:y,colSeparationType:a,tags:b,leqno:d}}function Hb(e){return"d"===e.slice(0,1)?"display":"text"}var Hv=function(e,t){var n,r,i=e.body.length,o=e.hLinesBeforeRow,s=0,a=Array(i),l=[],c=Math.max(t.fontMetrics().arrayRuleWidth,t.minRuleThickness),u=1/t.fontMetrics().ptPerEm,h=5*u;e.colSeparationType&&"small"===e.colSeparationType&&(h=.2778*(t.havingStyle(Fk.SCRIPT).sizeMultiplier/t.sizeMultiplier));var d="CD"===e.colSeparationType?FQ({number:3,unit:"ex"},t):12*u,f=3*u,p=e.arraystretch*d,m=.7*p,g=.3*p,y=0;function b(e){for(var t=0;t<e.length;++t)t>0&&(y+=.25),l.push({pos:y,isDashed:e[t]})}for(b(o[0]),n=0;n<e.body.length;++n){var v=e.body[n],x=m,w=g;s<v.length&&(s=v.length);var k=Array(v.length);for(r=0;r<v.length;++r){var O=Vr(v[r],t);w<O.depth&&(w=O.depth),x<O.height&&(x=O.height),k[r]=O}var S=e.rowGaps[n],C=0;S&&(C=FQ(S,t))>0&&(w<(C+=g)&&(w=C),C=0),e.addJot&&(w+=f),k.height=x,k.depth=w,k.pos=y+=x,y+=w+C,a[n]=k,b(o[n+1])}var T,A,E=y/2+t.fontMetrics().axisHeight,M=e.cols||[],N=[],_=[];if(e.tags&&e.tags.some(e=>e))for(n=0;n<i;++n){var j=a[n],D=j.pos-E,P=e.tags[n],R=void 0;(R=!0===P?QQ.makeSpan(["eqn-num"],[],t):!1===P?QQ.makeSpan([],[],t):QQ.makeSpan([],Q7(P,t,!0),t)).depth=j.depth,R.height=j.height,_.push({type:"elem",elem:R,shift:D})}for(r=0,A=0;r<s||A<M.length;++r,++A){for(var I=M[A]||{},z=!0;"separator"===I.type;){if(z||((T=QQ.makeSpan(["arraycolsep"],[])).style.width=FV(t.fontMetrics().doubleRuleSep),N.push(T)),"|"===I.separator||":"===I.separator){var L="|"===I.separator?"solid":"dashed",q=QQ.makeSpan(["vertical-separator"],[],t);q.style.height=FV(y),q.style.borderRightWidth=FV(c),q.style.borderRightStyle=L,q.style.margin="0 "+FV(-c/2);var $=y-E;$&&(q.style.verticalAlign=FV(-$)),N.push(q)}else throw new Fo("Invalid separator type: "+I.separator);I=M[++A]||{},z=!1}if(!(r>=s)){var B=void 0;(r>0||e.hskipBeforeAndAfter)&&0!==(B=Fh.deflt(I.pregap,h))&&((T=QQ.makeSpan(["arraycolsep"],[])).style.width=FV(B),N.push(T));var F=[];for(n=0;n<i;++n){var Q=a[n],V=Q[r];if(V){var H=Q.pos-E;V.depth=Q.depth,V.height=Q.height,F.push({type:"elem",elem:V,shift:H})}}F=QQ.makeVList({positionType:"individualShift",children:F},t),F=QQ.makeSpan(["col-align-"+(I.align||"c")],[F]),N.push(F),(r<s-1||e.hskipBeforeAndAfter)&&0!==(B=Fh.deflt(I.postgap,h))&&((T=QQ.makeSpan(["arraycolsep"],[])).style.width=FV(B),N.push(T))}}if(a=QQ.makeSpan(["mtable"],N),l.length>0){for(var U=QQ.makeLineSpan("hline",t,c),W=QQ.makeLineSpan("hdashline",t,c),G=[{type:"elem",elem:a,shift:0}];l.length>0;){var X=l.pop(),Y=X.pos-E;X.isDashed?G.push({type:"elem",elem:W,shift:Y}):G.push({type:"elem",elem:U,shift:Y})}a=QQ.makeVList({positionType:"individualShift",children:G},t)}if(0===_.length)return QQ.makeSpan(["mord"],[a],t);var Z=QQ.makeVList({positionType:"individualShift",children:_},t);return Z=QQ.makeSpan(["tag"],[Z],t),QQ.makeFragment([a,Z])},Hx={c:"center ",l:"left ",r:"right "},Hw=function(e,t){for(var n=[],r=new Vu.MathNode("mtd",[],["mtr-glue"]),i=new Vu.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<e.body.length;o++){for(var s=e.body[o],a=[],l=0;l<s.length;l++)a.push(new Vu.MathNode("mtd",[Vy(s[l],t)]));e.tags&&e.tags[o]&&(a.unshift(r),a.push(r),e.leqno?a.unshift(i):a.push(i)),n.push(new Vu.MathNode("mtr",a))}var c=new Vu.MathNode("mtable",n),u=.5===e.arraystretch?.1:.16+e.arraystretch-1+.09*!!e.addJot;c.setAttribute("rowspacing",FV(u));var h="",d="";if(e.cols&&e.cols.length>0){var f=e.cols,p="",m=!1,g=0,y=f.length;"separator"===f[0].type&&(h+="top ",g=1),"separator"===f[f.length-1].type&&(h+="bottom ",y-=1);for(var b=g;b<y;b++)"align"===f[b].type?(d+=Hx[f[b].align],m&&(p+="none "),m=!0):"separator"===f[b].type&&m&&(p+="|"===f[b].separator?"solid ":"dashed ",m=!1);c.setAttribute("columnalign",d.trim()),/[sd]/.test(p)&&c.setAttribute("columnlines",p.trim())}if("align"===e.colSeparationType){for(var v=e.cols||[],x="",w=1;w<v.length;w++)x+=w%2?"0em ":"1em ";c.setAttribute("columnspacing",x.trim())}else"alignat"===e.colSeparationType||"gather"===e.colSeparationType?c.setAttribute("columnspacing","0em"):"small"===e.colSeparationType?c.setAttribute("columnspacing","0.2778em"):"CD"===e.colSeparationType?c.setAttribute("columnspacing","0.5em"):c.setAttribute("columnspacing","1em");var k="",O=e.hLinesBeforeRow;h+=(O[0].length>0?"left ":"")+(O[O.length-1].length>0?"right ":"");for(var S=1;S<O.length-1;S++)k+=0===O[S].length?"none ":O[S][0]?"dashed ":"solid ";return/[sd]/.test(k)&&c.setAttribute("rowlines",k.trim()),""!==h&&(c=new Vu.MathNode("menclose",[c])).setAttribute("notation",h.trim()),e.arraystretch&&e.arraystretch<1&&(c=new Vu.MathNode("mstyle",[c])).setAttribute("scriptlevel","1"),c},Hk=function(e,t){-1===e.envName.indexOf("ed")&&Hm(e);var n,r=[],i=e.envName.indexOf("at")>-1?"alignat":"align",o="split"===e.envName,s=Hy(e.parser,{cols:r,addJot:!0,autoTag:o?void 0:Hg(e.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:o?2:void 0,leqno:e.parser.settings.leqno},"display"),a=0,l={type:"ordgroup",mode:e.mode,body:[]};if(t[0]&&"ordgroup"===t[0].type){for(var c="",u=0;u<t[0].body.length;u++)c+=VC(t[0].body[u],"textord").text;a=2*(n=Number(c))}var h=!a;s.body.forEach(function(e){for(var t=1;t<e.length;t+=2){var r=VC(e[t],"styling");VC(r.body[0],"ordgroup").body.unshift(l)}if(h)a<e.length&&(a=e.length);else{var i=e.length/2;if(n<i)throw new Fo("Too many math in a row: expected "+n+", but got "+i,e[0])}});for(var d=0;d<a;++d){var f="r",p=0;d%2==1?f="l":d>0&&h&&(p=1),r[d]={type:"align",align:f,pregap:p,postgap:0}}return s.colSeparationType=h?"align":"alignat",s};Hd({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){var n=(VA(t[0])?[t[0]]:VC(t[0],"ordgroup").body).map(function(e){var t=VT(e).text;if(-1!=="lcr".indexOf(t))return{type:"align",align:t};if("|"===t)return{type:"separator",separator:"|"};if(":"===t)return{type:"separator",separator:":"};throw new Fo("Unknown column alignment: "+t,e)}),r={cols:n,hskipBeforeAndAfter:!0,maxNumCols:n.length};return Hy(e.parser,r,Hb(e.envName))},htmlBuilder:Hv,mathmlBuilder:Hw}),Hd({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")],n="c",r={hskipBeforeAndAfter:!1,cols:[{type:"align",align:n}]};if("*"===e.envName.charAt(e.envName.length-1)){var i=e.parser;if(i.consumeSpaces(),"["===i.fetch().text){if(i.consume(),i.consumeSpaces(),n=i.fetch().text,-1==="lcr".indexOf(n))throw new Fo("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),r.cols=[{type:"align",align:n}]}}var o=Hy(e.parser,r,Hb(e.envName)),s=Math.max(0,...o.body.map(e=>e.length));return o.cols=Array(s).fill({type:"align",align:n}),t?{type:"leftright",mode:e.mode,body:[o],left:t[0],right:t[1],rightColor:void 0}:o},htmlBuilder:Hv,mathmlBuilder:Hw}),Hd({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){var t=Hy(e.parser,{arraystretch:.5},"script");return t.colSeparationType="small",t},htmlBuilder:Hv,mathmlBuilder:Hw}),Hd({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){var n=(VA(t[0])?[t[0]]:VC(t[0],"ordgroup").body).map(function(e){var t=VT(e).text;if(-1!=="lc".indexOf(t))return{type:"align",align:t};throw new Fo("Unknown column alignment: "+t,e)});if(n.length>1)throw new Fo("{subarray} can contain only one column");var r={cols:n,hskipBeforeAndAfter:!1,arraystretch:.5};if((r=Hy(e.parser,r,"script")).body.length>0&&r.body[0].length>1)throw new Fo("{subarray} can contain only one column");return r},htmlBuilder:Hv,mathmlBuilder:Hw}),Hd({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){var t=Hy(e.parser,{arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},Hb(e.envName));return{type:"leftright",mode:e.mode,body:[t],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Hv,mathmlBuilder:Hw}),Hd({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:Hk,htmlBuilder:Hv,mathmlBuilder:Hw}),Hd({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){Fh.contains(["gather","gather*"],e.envName)&&Hm(e);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:Hg(e.envName),emptySingleRow:!0,leqno:e.parser.settings.leqno};return Hy(e.parser,t,"display")},htmlBuilder:Hv,mathmlBuilder:Hw}),Hd({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:Hk,htmlBuilder:Hv,mathmlBuilder:Hw}),Hd({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){Hm(e);var t={autoTag:Hg(e.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:e.parser.settings.leqno};return Hy(e.parser,t,"display")},htmlBuilder:Hv,mathmlBuilder:Hw}),Hd({type:"array",names:["CD"],props:{numArgs:0},handler:e=>(Hm(e),function(e){var t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();var n=e.fetch().text;if("&"===n||"\\\\"===n)e.consume();else if("\\end"===n){0===t[t.length-1].length&&t.pop();break}else throw new Fo("Expected \\\\ or \\cr or \\end",e.nextToken)}for(var r=[],i=[r],o=0;o<t.length;o++){for(var s=t[o],a=Vz(),l=0;l<s.length;l++)if(VL(s[l])){r.push(a);var c=VT(s[l+=1]).text,u=[,,];if(u[0]={type:"ordgroup",mode:"math",body:[]},u[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(c)>-1)){if("<>AV".indexOf(c)>-1)for(var h=0;h<2;h++){for(var d=!0,f=l+1;f<s.length;f++){if(Vq(s[f],c)){d=!1,l=f;break}if(VL(s[f]))throw new Fo("Missing a "+c+" character to complete a CD arrow.",s[f]);u[h].body.push(s[f])}if(d)throw new Fo("Missing a "+c+" character to complete a CD arrow.",s[l])}else throw new Fo('Expected one of "<>AV=|." after @',s[l])}var p={type:"styling",body:[function(e,t,n){var r=VI[e];switch(r){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return n.callFunction(r,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":var i=n.callFunction("\\\\cdleft",[t[0]],[]),o=n.callFunction("\\Big",[{type:"atom",text:r,mode:"math",family:"rel"}],[]),s=n.callFunction("\\\\cdright",[t[1]],[]);return n.callFunction("\\\\cdparent",[{type:"ordgroup",mode:"math",body:[i,o,s]}],[]);case"\\\\cdlongequal":return n.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":return n.callFunction("\\Big",[{type:"textord",text:"\\Vert",mode:"math"}],[]);default:return{type:"textord",text:" ",mode:"math"}}}(c,u,e)],mode:"math",style:"display"};r.push(p),a=Vz()}else a.body.push(s[l]);o%2==0?r.push(a):r.shift(),r=[],i.push(r)}e.gullet.endGroup(),e.gullet.endGroup();var m=Array(i[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:i,arraystretch:1,addJot:!0,rowGaps:[null],cols:m,colSeparationType:"CD",hLinesBeforeRow:Array(i.length+1).fill([])}}(e.parser)),htmlBuilder:Hv,mathmlBuilder:Hw}),Hf["\\nonumber"]="\\gdef\\@eqnsw{0}",Hf["\\notag"]="\\nonumber",QK({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new Fo(e.funcName+" valid only within array environment")}}),QK({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(e,t){var{parser:n,funcName:r}=e,i=t[0];if("ordgroup"!==i.type)throw new Fo("Invalid environment name",i);for(var o="",s=0;s<i.body.length;++s)o+=VC(i.body[s],"textord").text;if("\\begin"===r){if(!Hh.hasOwnProperty(o))throw new Fo("No such environment: "+o,i);var a=Hh[o],{args:l,optArgs:c}=n.parseArguments("\\begin{"+o+"}",a),u={mode:n.mode,envName:o,parser:n},h=a.handler(u,l,c);n.expect("\\end",!1);var d=n.nextToken,f=VC(n.parseFunction(),"environment");if(f.name!==o)throw new Fo("Mismatch: \\begin{"+o+"} matched by \\end{"+f.name+"}",d);return h}return{type:"environment",mode:n.mode,name:o,nameGroup:i}}});var HO=(e,t)=>{var n=e.font,r=t.withFont(n);return Vr(e.body,r)},HS=(e,t)=>{var n=e.font,r=t.withFont(n);return Vy(e.body,r)},HC={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};QK({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=Q0(t[0]),o=r;return o in HC&&(o=HC[o]),{type:"font",mode:n.mode,font:o.slice(1),body:i}},htmlBuilder:HO,mathmlBuilder:HS}),QK({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(e,t)=>{var{parser:n}=e,r=t[0],i=Fh.isCharacterBox(r);return{type:"mclass",mode:n.mode,mclass:VR(r),body:[{type:"font",mode:n.mode,font:"boldsymbol",body:r}],isCharacterBox:i}}}),QK({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{parser:n,funcName:r,breakOnTokenText:i}=e,{mode:o}=n,s=n.parseExpression(!0,i);return{type:"font",mode:o,font:"math"+r.slice(1),body:{type:"ordgroup",mode:n.mode,body:s}}},htmlBuilder:HO,mathmlBuilder:HS});var HT=(e,t)=>{var n=t;return"display"===e?n=n.id>=Fk.SCRIPT.id?n.text():Fk.DISPLAY:"text"===e&&n.size===Fk.DISPLAY.size?n=Fk.TEXT:"script"===e?n=Fk.SCRIPT:"scriptscript"===e&&(n=Fk.SCRIPTSCRIPT),n},HA=(e,t)=>{var n,r,i,o,s,a,l,c,u=HT(e.size,t.style),h=u.fracNum(),d=u.fracDen();c=t.havingStyle(h);var f=Vr(e.numer,c,t);if(e.continued){var p=8.5/t.fontMetrics().ptPerEm,m=3.5/t.fontMetrics().ptPerEm;f.height=f.height<p?p:f.height,f.depth=f.depth<m?m:f.depth}c=t.havingStyle(d);var g,y,b,v=Vr(e.denom,c,t);if(e.hasBarLine?(e.barSize?(y=FQ(e.barSize,t),g=QQ.makeLineSpan("frac-line",t,y)):g=QQ.makeLineSpan("frac-line",t),y=g.height,b=g.height):(g=null,y=0,b=t.fontMetrics().defaultRuleThickness),u.size===Fk.DISPLAY.size||"display"===e.size?(n=t.fontMetrics().num1,r=y>0?3*b:7*b,i=t.fontMetrics().denom1):(y>0?(n=t.fontMetrics().num2,r=b):(n=t.fontMetrics().num3,r=3*b),i=t.fontMetrics().denom2),g){var x=t.fontMetrics().axisHeight;n-f.depth-(x+.5*y)<r&&(n+=r-(n-f.depth-(x+.5*y))),x-.5*y-(v.height-i)<r&&(i+=r-(x-.5*y-(v.height-i)));var w=-(x-.5*y);o=QQ.makeVList({positionType:"individualShift",children:[{type:"elem",elem:v,shift:i},{type:"elem",elem:g,shift:w},{type:"elem",elem:f,shift:-n}]},t)}else{var k=n-f.depth-(v.height-i);k<r&&(n+=.5*(r-k),i+=.5*(r-k)),o=QQ.makeVList({positionType:"individualShift",children:[{type:"elem",elem:v,shift:i},{type:"elem",elem:f,shift:-n}]},t)}return c=t.havingStyle(u),o.height*=c.sizeMultiplier/t.sizeMultiplier,o.depth*=c.sizeMultiplier/t.sizeMultiplier,s=u.size===Fk.DISPLAY.size?t.fontMetrics().delim1:u.size===Fk.SCRIPTSCRIPT.size?t.havingStyle(Fk.SCRIPT).fontMetrics().delim2:t.fontMetrics().delim2,a=null==e.leftDelim?Vn(t,["mopen"]):Hi.customSizedDelim(e.leftDelim,s,!0,t.havingStyle(u),e.mode,["mopen"]),l=e.continued?QQ.makeSpan([]):null==e.rightDelim?Vn(t,["mclose"]):Hi.customSizedDelim(e.rightDelim,s,!0,t.havingStyle(u),e.mode,["mclose"]),QQ.makeSpan(["mord"].concat(c.sizingClasses(t)),[a,QQ.makeSpan(["mfrac"],[o]),l],t)},HE=(e,t)=>{var n=new Vu.MathNode("mfrac",[Vy(e.numer,t),Vy(e.denom,t)]);if(e.hasBarLine){if(e.barSize){var r=FQ(e.barSize,t);n.setAttribute("linethickness",FV(r))}}else n.setAttribute("linethickness","0px");var i=HT(e.size,t.style);if(i.size!==t.style.size){n=new Vu.MathNode("mstyle",[n]);var o=i.size===Fk.DISPLAY.size?"true":"false";n.setAttribute("displaystyle",o),n.setAttribute("scriptlevel","0")}if(null!=e.leftDelim||null!=e.rightDelim){var s=[];if(null!=e.leftDelim){var a=new Vu.MathNode("mo",[new Vu.TextNode(e.leftDelim.replace("\\",""))]);a.setAttribute("fence","true"),s.push(a)}if(s.push(n),null!=e.rightDelim){var l=new Vu.MathNode("mo",[new Vu.TextNode(e.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),s.push(l)}return Vd(s)}return n};QK({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(e,t)=>{var n,{parser:r,funcName:i}=e,o=t[0],s=t[1],a=null,l=null,c="auto";switch(i){case"\\dfrac":case"\\frac":case"\\tfrac":n=!0;break;case"\\\\atopfrac":n=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":n=!1,a="(",l=")";break;case"\\\\bracefrac":n=!1,a="\\{",l="\\}";break;case"\\\\brackfrac":n=!1,a="[",l="]";break;default:throw Error("Unrecognized genfrac command")}switch(i){case"\\dfrac":case"\\dbinom":c="display";break;case"\\tfrac":case"\\tbinom":c="text"}return{type:"genfrac",mode:r.mode,continued:!1,numer:o,denom:s,hasBarLine:n,leftDelim:a,rightDelim:l,size:c,barSize:null}},htmlBuilder:HA,mathmlBuilder:HE}),QK({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=t[0],o=t[1];return{type:"genfrac",mode:n.mode,continued:!0,numer:i,denom:o,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),QK({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(e){var t,{parser:n,funcName:r,token:i}=e;switch(r){case"\\over":t="\\frac";break;case"\\choose":t="\\binom";break;case"\\atop":t="\\\\atopfrac";break;case"\\brace":t="\\\\bracefrac";break;case"\\brack":t="\\\\brackfrac";break;default:throw Error("Unrecognized infix genfrac command")}return{type:"infix",mode:n.mode,replaceWith:t,token:i}}});var HM=["display","text","script","scriptscript"],HN=function(e){var t=null;return e.length>0&&(t="."===(t=e)?null:t),t};QK({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(e,t){var n,{parser:r}=e,i=t[4],o=t[5],s=Q0(t[0]),a="atom"===s.type&&"open"===s.family?HN(s.text):null,l=Q0(t[1]),c="atom"===l.type&&"close"===l.family?HN(l.text):null,u=VC(t[2],"size"),h=null;n=!!u.isBlank||(h=u.value).number>0;var d="auto",f=t[3];return"ordgroup"===f.type?f.body.length>0&&(d=HM[Number(VC(f.body[0],"textord").text)]):d=HM[Number((f=VC(f,"textord")).text)],{type:"genfrac",mode:r.mode,numer:i,denom:o,continued:!1,hasBarLine:n,barSize:h,leftDelim:a,rightDelim:c,size:d}},htmlBuilder:HA,mathmlBuilder:HE}),QK({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(e,t){var{parser:n,funcName:r,token:i}=e;return{type:"infix",mode:n.mode,replaceWith:"\\\\abovefrac",size:VC(t[0],"size").value,token:i}}}),QK({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=t[0],o=Fu(VC(t[1],"infix").size),s=t[2],a=o.number>0;return{type:"genfrac",mode:n.mode,numer:i,denom:s,continued:!1,hasBarLine:a,barSize:o,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:HA,mathmlBuilder:HE});var H_=(e,t)=>{var n,r,i=t.style;"supsub"===e.type?(n=e.sup?Vr(e.sup,t.havingStyle(i.sup()),t):Vr(e.sub,t.havingStyle(i.sub()),t),r=VC(e.base,"horizBrace")):r=VC(e,"horizBrace");var o,s=Vr(r.base,t.havingBaseStyle(Fk.DISPLAY)),a=VS.svgSpan(r,t);if(r.isOver?(o=QQ.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:a}]},t)).children[0].children[0].children[1].classes.push("svg-align"):(o=QQ.makeVList({positionType:"bottom",positionData:s.depth+.1+a.height,children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:s}]},t)).children[0].children[0].children[0].classes.push("svg-align"),n){var l=QQ.makeSpan(["mord",r.isOver?"mover":"munder"],[o],t);o=r.isOver?QQ.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:n}]},t):QQ.makeVList({positionType:"bottom",positionData:l.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:l}]},t)}return QQ.makeSpan(["mord",r.isOver?"mover":"munder"],[o],t)};QK({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(e,t){var{parser:n,funcName:r}=e;return{type:"horizBrace",mode:n.mode,label:r,isOver:/^\\over/.test(r),base:t[0]}},htmlBuilder:H_,mathmlBuilder:(e,t)=>{var n=VS.mathMLnode(e.label);return new Vu.MathNode(e.isOver?"mover":"munder",[Vy(e.base,t),n])}}),QK({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[1],i=VC(t[0],"url").url;return n.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:n.mode,href:i,body:Q1(r)}:n.formatUnsupportedCmd("\\href")},htmlBuilder:(e,t)=>{var n=Q7(e.body,t,!1);return QQ.makeAnchor(e.href,[],n,t)},mathmlBuilder:(e,t)=>{var n=Vg(e.body,t);return n instanceof Va||(n=new Va("mrow",[n])),n.setAttribute("href",e.href),n}}),QK({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=VC(t[0],"url").url;if(!n.settings.isTrusted({command:"\\url",url:r}))return n.formatUnsupportedCmd("\\url");for(var i=[],o=0;o<r.length;o++){var s=r[o];"~"===s&&(s="\\textasciitilde"),i.push({type:"textord",mode:"text",text:s})}var a={type:"text",mode:n.mode,font:"\\texttt",body:i};return{type:"href",mode:n.mode,href:r,body:Q1(a)}}}),QK({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(e,t){var{parser:n}=e;return{type:"hbox",mode:n.mode,body:Q1(t[0])}},htmlBuilder(e,t){var n=Q7(e.body,t,!1);return QQ.makeFragment(n)},mathmlBuilder:(e,t)=>new Vu.MathNode("mrow",Vm(e.body,t))}),QK({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(e,t)=>{var{parser:n,funcName:r,token:i}=e,o=VC(t[0],"raw").string,s=t[1];n.settings.strict&&n.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var a,l={};switch(r){case"\\htmlClass":l.class=o,a={command:"\\htmlClass",class:o};break;case"\\htmlId":l.id=o,a={command:"\\htmlId",id:o};break;case"\\htmlStyle":l.style=o,a={command:"\\htmlStyle",style:o};break;case"\\htmlData":for(var c=o.split(","),u=0;u<c.length;u++){var h=c[u].split("=");if(2!==h.length)throw new Fo("Error parsing key-value for \\htmlData");l["data-"+h[0].trim()]=h[1].trim()}a={command:"\\htmlData",attributes:l};break;default:throw Error("Unrecognized html command")}return n.settings.isTrusted(a)?{type:"html",mode:n.mode,attributes:l,body:Q1(s)}:n.formatUnsupportedCmd(r)},htmlBuilder:(e,t)=>{var n=Q7(e.body,t,!1),r=["enclosing"];e.attributes.class&&r.push(...e.attributes.class.trim().split(/\s+/));var i=QQ.makeSpan(r,n,t);for(var o in e.attributes)"class"!==o&&e.attributes.hasOwnProperty(o)&&i.setAttribute(o,e.attributes[o]);return i},mathmlBuilder:(e,t)=>Vg(e.body,t)}),QK({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e;return{type:"htmlmathml",mode:n.mode,html:Q1(t[0]),mathml:Q1(t[1])}},htmlBuilder:(e,t)=>{var n=Q7(e.html,t,!1);return QQ.makeFragment(n)},mathmlBuilder:(e,t)=>Vg(e.mathml,t)});var Hj=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new Fo("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(t[1]+t[2]),unit:t[3]};if(!FF(n))throw new Fo("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};QK({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(e,t,n)=>{var{parser:r}=e,i={number:0,unit:"em"},o={number:.9,unit:"em"},s={number:0,unit:"em"},a="";if(n[0])for(var l=VC(n[0],"raw").string,c=l.split(","),u=0;u<c.length;u++){var h=c[u].split("=");if(2===h.length){var d=h[1].trim();switch(h[0].trim()){case"alt":a=d;break;case"width":i=Hj(d);break;case"height":o=Hj(d);break;case"totalheight":s=Hj(d);break;default:throw new Fo("Invalid key: '"+h[0]+"' in \\includegraphics.")}}}var f=VC(t[0],"url").url;return""===a&&(a=(a=(a=f).replace(/^.*[\\/]/,"")).substring(0,a.lastIndexOf("."))),r.settings.isTrusted({command:"\\includegraphics",url:f})?{type:"includegraphics",mode:r.mode,alt:a,width:i,height:o,totalheight:s,src:f}:r.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(e,t)=>{var n=FQ(e.height,t),r=0;e.totalheight.number>0&&(r=FQ(e.totalheight,t)-n);var i=0;e.width.number>0&&(i=FQ(e.width,t));var o={height:FV(n+r)};i>0&&(o.width=FV(i)),r>0&&(o.verticalAlign=FV(-r));var s=new FK(e.src,e.alt,o);return s.height=n,s.depth=r,s},mathmlBuilder:(e,t)=>{var n=new Vu.MathNode("mglyph",[]);n.setAttribute("alt",e.alt);var r=FQ(e.height,t),i=0;if(e.totalheight.number>0&&(i=FQ(e.totalheight,t)-r,n.setAttribute("valign",FV(-i))),n.setAttribute("height",FV(r+i)),e.width.number>0){var o=FQ(e.width,t);n.setAttribute("width",FV(o))}return n.setAttribute("src",e.src),n}}),QK({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(e,t){var{parser:n,funcName:r}=e,i=VC(t[0],"size");if(n.settings.strict){var o="m"===r[1],s="mu"===i.value.unit;o?(s||n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" supports only mu units, not "+i.value.unit+" units"),"math"!==n.mode&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" works only in math mode")):s&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" doesn't support mu units")}return{type:"kern",mode:n.mode,dimension:i.value}},htmlBuilder:(e,t)=>QQ.makeGlue(e.dimension,t),mathmlBuilder(e,t){var n=FQ(e.dimension,t);return new Vu.SpaceNode(n)}}),QK({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=t[0];return{type:"lap",mode:n.mode,alignment:r.slice(5),body:i}},htmlBuilder:(e,t)=>{"clap"===e.alignment?(n=QQ.makeSpan([],[Vr(e.body,t)]),n=QQ.makeSpan(["inner"],[n],t)):n=QQ.makeSpan(["inner"],[Vr(e.body,t)]);var n,r=QQ.makeSpan(["fix"],[]),i=QQ.makeSpan([e.alignment],[n,r],t),o=QQ.makeSpan(["strut"]);return o.style.height=FV(i.height+i.depth),i.depth&&(o.style.verticalAlign=FV(-i.depth)),i.children.unshift(o),i=QQ.makeSpan(["thinbox"],[i],t),QQ.makeSpan(["mord","vbox"],[i],t)},mathmlBuilder:(e,t)=>{var n=new Vu.MathNode("mpadded",[Vy(e.body,t)]);if("rlap"!==e.alignment){var r="llap"===e.alignment?"-1":"-0.5";n.setAttribute("lspace",r+"width")}return n.setAttribute("width","0px"),n}}),QK({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){var{funcName:n,parser:r}=e,i=r.mode;r.switchMode("math");var o="\\("===n?"\\)":"$",s=r.parseExpression(!1,o);return r.expect(o),r.switchMode(i),{type:"styling",mode:r.mode,style:"text",body:s}}}),QK({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new Fo("Mismatched "+e.funcName)}});var HD=(e,t)=>{switch(t.style.size){case Fk.DISPLAY.size:return e.display;case Fk.TEXT.size:return e.text;case Fk.SCRIPT.size:return e.script;case Fk.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}};QK({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(e,t)=>{var{parser:n}=e;return{type:"mathchoice",mode:n.mode,display:Q1(t[0]),text:Q1(t[1]),script:Q1(t[2]),scriptscript:Q1(t[3])}},htmlBuilder:(e,t)=>{var n=Q7(HD(e,t),t,!1);return QQ.makeFragment(n)},mathmlBuilder:(e,t)=>Vg(HD(e,t),t)});var HP=(e,t,n,r,i,o,s)=>{e=QQ.makeSpan([],[e]);var a,l,c,u=n&&Fh.isCharacterBox(n);if(t){var h=Vr(t,r.havingStyle(i.sup()),r);c={elem:h,kern:Math.max(r.fontMetrics().bigOpSpacing1,r.fontMetrics().bigOpSpacing3-h.depth)}}if(n){var d=Vr(n,r.havingStyle(i.sub()),r);l={elem:d,kern:Math.max(r.fontMetrics().bigOpSpacing2,r.fontMetrics().bigOpSpacing4-d.height)}}if(c&&l){var f=r.fontMetrics().bigOpSpacing5+l.elem.height+l.elem.depth+l.kern+e.depth+s;a=QQ.makeVList({positionType:"bottom",positionData:f,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:FV(-o)},{type:"kern",size:l.kern},{type:"elem",elem:e},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:FV(o)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else if(l){var p=e.height-s;a=QQ.makeVList({positionType:"top",positionData:p,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:FV(-o)},{type:"kern",size:l.kern},{type:"elem",elem:e}]},r)}else{if(!c)return e;var m=e.depth+s;a=QQ.makeVList({positionType:"bottom",positionData:m,children:[{type:"elem",elem:e},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:FV(o)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}var g=[a];if(l&&0!==o&&!u){var y=QQ.makeSpan(["mspace"],[],r);y.style.marginRight=FV(o),g.unshift(y)}return QQ.makeSpan(["mop","op-limits"],g,r)},HR=["\\smallint"],HI=(e,t)=>{var n,r,i,o,s=!1;"supsub"===e.type?(r=e.sup,i=e.sub,o=VC(e.base,"op"),s=!0):o=VC(e,"op");var a=t.style,l=!1;if(a.size===Fk.DISPLAY.size&&o.symbol&&!Fh.contains(HR,o.name)&&(l=!0),o.symbol){var c=l?"Size2-Regular":"Size1-Regular",u="";if(("\\oiint"===o.name||"\\oiiint"===o.name)&&(u=o.name.slice(1),o.name="oiint"===u?"\\iint":"\\iiint"),n=QQ.makeSymbol(o.name,c,"math",t,["mop","op-symbol",l?"large-op":"small-op"]),u.length>0){var h=n.italic,d=QQ.staticSvg(u+"Size"+(l?"2":"1"),t);n=QQ.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:0},{type:"elem",elem:d,shift:.08*!!l}]},t),o.name="\\"+u,n.classes.unshift("mop"),n.italic=h}}else if(o.body){var f=Q7(o.body,t,!0);1===f.length&&f[0]instanceof F0?(n=f[0]).classes[0]="mop":n=QQ.makeSpan(["mop"],f,t)}else{for(var p=[],m=1;m<o.name.length;m++)p.push(QQ.mathsym(o.name[m],o.mode,t));n=QQ.makeSpan(["mop"],p,t)}var g=0,y=0;return(n instanceof F0||"\\oiint"===o.name||"\\oiiint"===o.name)&&!o.suppressBaseShift&&(g=(n.height-n.depth)/2-t.fontMetrics().axisHeight,y=n.italic),s?HP(n,r,i,t,a,y,g):(g&&(n.style.position="relative",n.style.top=FV(g)),n)},Hz=(e,t)=>{var n;if(e.symbol)n=new Va("mo",[Vh(e.name,e.mode)]),Fh.contains(HR,e.name)&&n.setAttribute("largeop","false");else if(e.body)n=new Va("mo",Vm(e.body,t));else{n=new Va("mi",[new Vl(e.name.slice(1))]);var r=new Va("mo",[Vh("","text")]);n=e.parentIsSupSub?new Va("mrow",[n,r]):Vs([n,r])}return n},HL={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};QK({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=r;return 1===i.length&&(i=HL[i]),{type:"op",mode:n.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:HI,mathmlBuilder:Hz}),QK({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"op",mode:n.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Q1(r)}},htmlBuilder:HI,mathmlBuilder:Hz});var Hq={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};QK({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(e){var{parser:t,funcName:n}=e;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:HI,mathmlBuilder:Hz}),QK({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(e){var{parser:t,funcName:n}=e;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:HI,mathmlBuilder:Hz}),QK({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(e){var{parser:t,funcName:n}=e,r=n;return 1===r.length&&(r=Hq[r]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:HI,mathmlBuilder:Hz});var H$=(e,t)=>{var n,r,i,o,s=!1;if("supsub"===e.type?(r=e.sup,i=e.sub,o=VC(e.base,"operatorname"),s=!0):o=VC(e,"operatorname"),o.body.length>0){for(var a=o.body.map(e=>{var t=e.text;return"string"==typeof t?{type:"textord",mode:e.mode,text:t}:e}),l=Q7(a,t.withFont("mathrm"),!0),c=0;c<l.length;c++){var u=l[c];u instanceof F0&&(u.text=u.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}n=QQ.makeSpan(["mop"],l,t)}else n=QQ.makeSpan(["mop"],[],t);return s?HP(n,r,i,t,t.style,0,0):n};function HB(e,t,n){for(var r=Q7(e,t,!1),i=t.sizeMultiplier/n.sizeMultiplier,o=0;o<r.length;o++){var s=r[o].classes.indexOf("sizing");s<0?Array.prototype.push.apply(r[o].classes,t.sizingClasses(n)):r[o].classes[s+1]==="reset-size"+t.size&&(r[o].classes[s+1]="reset-size"+n.size),r[o].height*=i,r[o].depth*=i}return QQ.makeFragment(r)}QK({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=t[0];return{type:"operatorname",mode:n.mode,body:Q1(i),alwaysHandleSupSub:"\\operatornamewithlimits"===r,limits:!1,parentIsSupSub:!1}},htmlBuilder:H$,mathmlBuilder:(e,t)=>{for(var n=Vm(e.body,t.withFont("mathrm")),r=!0,i=0;i<n.length;i++){var o=n[i];if(!(o instanceof Vu.SpaceNode)){if(o instanceof Vu.MathNode)switch(o.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":var s=o.children[0];1===o.children.length&&s instanceof Vu.TextNode?s.text=s.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):r=!1;break;default:r=!1}else r=!1}}if(r){var a=n.map(e=>e.toText()).join("");n=[new Vu.TextNode(a)]}var l=new Vu.MathNode("mi",n);l.setAttribute("mathvariant","normal");var c=new Vu.MathNode("mo",[Vh("","text")]);return e.parentIsSupSub?new Vu.MathNode("mrow",[l,c]):Vu.newDocumentFragment([l,c])}}),Hf["\\operatorname"]="\\@ifstar\\operatornamewithlimits\\operatorname@",QJ({type:"ordgroup",htmlBuilder:(e,t)=>e.semisimple?QQ.makeFragment(Q7(e.body,t,!1)):QQ.makeSpan(["mord"],Q7(e.body,t,!0),t),mathmlBuilder:(e,t)=>Vg(e.body,t,!0)}),QK({type:"overline",names:["\\overline"],props:{numArgs:1},handler(e,t){var{parser:n}=e,r=t[0];return{type:"overline",mode:n.mode,body:r}},htmlBuilder(e,t){var n=Vr(e.body,t.havingCrampedStyle()),r=QQ.makeLineSpan("overline-line",t),i=t.fontMetrics().defaultRuleThickness,o=QQ.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n},{type:"kern",size:3*i},{type:"elem",elem:r},{type:"kern",size:i}]},t);return QQ.makeSpan(["mord","overline"],[o],t)},mathmlBuilder(e,t){var n=new Vu.MathNode("mo",[new Vu.TextNode("")]);n.setAttribute("stretchy","true");var r=new Vu.MathNode("mover",[Vy(e.body,t),n]);return r.setAttribute("accent","true"),r}}),QK({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"phantom",mode:n.mode,body:Q1(r)}},htmlBuilder:(e,t)=>{var n=Q7(e.body,t.withPhantom(),!1);return QQ.makeFragment(n)},mathmlBuilder:(e,t)=>{var n=Vm(e.body,t);return new Vu.MathNode("mphantom",n)}}),QK({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"hphantom",mode:n.mode,body:r}},htmlBuilder:(e,t)=>{var n=QQ.makeSpan([],[Vr(e.body,t.withPhantom())]);if(n.height=0,n.depth=0,n.children)for(var r=0;r<n.children.length;r++)n.children[r].height=0,n.children[r].depth=0;return n=QQ.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},t),QQ.makeSpan(["mord"],[n],t)},mathmlBuilder:(e,t)=>{var n=Vm(Q1(e.body),t),r=new Vu.MathNode("mphantom",n),i=new Vu.MathNode("mpadded",[r]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}}),QK({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"vphantom",mode:n.mode,body:r}},htmlBuilder:(e,t)=>{var n=QQ.makeSpan(["inner"],[Vr(e.body,t.withPhantom())]),r=QQ.makeSpan(["fix"],[]);return QQ.makeSpan(["mord","rlap"],[n,r],t)},mathmlBuilder:(e,t)=>{var n=Vm(Q1(e.body),t),r=new Vu.MathNode("mphantom",n),i=new Vu.MathNode("mpadded",[r]);return i.setAttribute("width","0px"),i}}),QK({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(e,t){var{parser:n}=e,r=VC(t[0],"size").value,i=t[1];return{type:"raisebox",mode:n.mode,dy:r,body:i}},htmlBuilder(e,t){var n=Vr(e.body,t),r=FQ(e.dy,t);return QQ.makeVList({positionType:"shift",positionData:-r,children:[{type:"elem",elem:n}]},t)},mathmlBuilder(e,t){var n=new Vu.MathNode("mpadded",[Vy(e.body,t)]),r=e.dy.number+e.dy.unit;return n.setAttribute("voffset",r),n}}),QK({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t}=e;return{type:"internal",mode:t.mode}}}),QK({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(e,t,n){var{parser:r}=e,i=n[0],o=VC(t[0],"size"),s=VC(t[1],"size");return{type:"rule",mode:r.mode,shift:i&&VC(i,"size").value,width:o.value,height:s.value}},htmlBuilder(e,t){var n=QQ.makeSpan(["mord","rule"],[],t),r=FQ(e.width,t),i=FQ(e.height,t),o=e.shift?FQ(e.shift,t):0;return n.style.borderRightWidth=FV(r),n.style.borderTopWidth=FV(i),n.style.bottom=FV(o),n.width=r,n.height=i+o,n.depth=-o,n.maxFontSize=1.125*i*t.sizeMultiplier,n},mathmlBuilder(e,t){var n=FQ(e.width,t),r=FQ(e.height,t),i=e.shift?FQ(e.shift,t):0,o=t.color&&t.getColor()||"black",s=new Vu.MathNode("mspace");s.setAttribute("mathbackground",o),s.setAttribute("width",FV(n)),s.setAttribute("height",FV(r));var a=new Vu.MathNode("mpadded",[s]);return i>=0?a.setAttribute("height",FV(i)):(a.setAttribute("height",FV(i)),a.setAttribute("depth",FV(-i))),a.setAttribute("voffset",FV(i)),a}});var HF=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"];QK({type:"sizing",names:HF,props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{breakOnTokenText:n,funcName:r,parser:i}=e,o=i.parseExpression(!1,n);return{type:"sizing",mode:i.mode,size:HF.indexOf(r)+1,body:o}},htmlBuilder:(e,t)=>{var n=t.havingSize(e.size);return HB(e.body,n,t)},mathmlBuilder:(e,t)=>{var n=t.havingSize(e.size),r=Vm(e.body,n),i=new Vu.MathNode("mstyle",r);return i.setAttribute("mathsize",FV(n.sizeMultiplier)),i}}),QK({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(e,t,n)=>{var{parser:r}=e,i=!1,o=!1,s=n[0]&&VC(n[0],"ordgroup");if(s)for(var a="",l=0;l<s.body.length;++l)if("t"===(a=s.body[l].text))i=!0;else if("b"===a)o=!0;else{i=!1,o=!1;break}else i=!0,o=!0;var c=t[0];return{type:"smash",mode:r.mode,body:c,smashHeight:i,smashDepth:o}},htmlBuilder:(e,t)=>{var n=QQ.makeSpan([],[Vr(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return n;if(e.smashHeight&&(n.height=0,n.children))for(var r=0;r<n.children.length;r++)n.children[r].height=0;if(e.smashDepth&&(n.depth=0,n.children))for(var i=0;i<n.children.length;i++)n.children[i].depth=0;var o=QQ.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},t);return QQ.makeSpan(["mord"],[o],t)},mathmlBuilder:(e,t)=>{var n=new Vu.MathNode("mpadded",[Vy(e.body,t)]);return e.smashHeight&&n.setAttribute("height","0px"),e.smashDepth&&n.setAttribute("depth","0px"),n}}),QK({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,n){var{parser:r}=e,i=n[0],o=t[0];return{type:"sqrt",mode:r.mode,body:o,index:i}},htmlBuilder(e,t){var n=Vr(e.body,t.havingCrampedStyle());0===n.height&&(n.height=t.fontMetrics().xHeight),n=QQ.wrapFragment(n,t);var r=t.fontMetrics().defaultRuleThickness,i=r;t.style.id<Fk.TEXT.id&&(i=t.fontMetrics().xHeight);var o=r+i/4,s=n.height+n.depth+o+r,{span:a,ruleWidth:l,advanceWidth:c}=Hi.sqrtImage(s,t),u=a.height-l;u>n.height+n.depth+o&&(o=(o+u-n.height-n.depth)/2);var h=a.height-n.height-o-l;n.style.paddingLeft=FV(c);var d=QQ.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:-(n.height+h)},{type:"elem",elem:a},{type:"kern",size:l}]},t);if(!e.index)return QQ.makeSpan(["mord","sqrt"],[d],t);var f=t.havingStyle(Fk.SCRIPTSCRIPT),p=Vr(e.index,f,t),m=.6*(d.height-d.depth),g=QQ.makeVList({positionType:"shift",positionData:-m,children:[{type:"elem",elem:p}]},t),y=QQ.makeSpan(["root"],[g]);return QQ.makeSpan(["mord","sqrt"],[y,d],t)},mathmlBuilder(e,t){var{body:n,index:r}=e;return r?new Vu.MathNode("mroot",[Vy(n,t),Vy(r,t)]):new Vu.MathNode("msqrt",[Vy(n,t)])}});var HQ={display:Fk.DISPLAY,text:Fk.TEXT,script:Fk.SCRIPT,scriptscript:Fk.SCRIPTSCRIPT};QK({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e,t){var{breakOnTokenText:n,funcName:r,parser:i}=e,o=i.parseExpression(!0,n),s=r.slice(1,r.length-5);return{type:"styling",mode:i.mode,style:s,body:o}},htmlBuilder(e,t){var n=HQ[e.style],r=t.havingStyle(n).withFont("");return HB(e.body,r,t)},mathmlBuilder(e,t){var n=HQ[e.style],r=t.havingStyle(n),i=Vm(e.body,r),o=new Vu.MathNode("mstyle",i),s={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[e.style];return o.setAttribute("scriptlevel",s[0]),o.setAttribute("displaystyle",s[1]),o}});var HV=function(e,t){var n=e.base;return n?"op"===n.type?n.limits&&(t.style.size===Fk.DISPLAY.size||n.alwaysHandleSupSub)?HI:null:"operatorname"===n.type?n.alwaysHandleSupSub&&(t.style.size===Fk.DISPLAY.size||n.limits)?H$:null:"accent"===n.type?Fh.isCharacterBox(n.base)?VE:null:"horizBrace"===n.type&&!e.sub===n.isOver?H_:null:null};QJ({type:"supsub",htmlBuilder(e,t){var n,r,i=HV(e,t);if(i)return i(e,t);var o,s,{base:a,sup:l,sub:c}=e,u=Vr(a,t),h=t.fontMetrics(),d=0,f=0,p=a&&Fh.isCharacterBox(a);if(l){var m=t.havingStyle(t.style.sup());o=Vr(l,m,t),p||(d=u.height-m.fontMetrics().supDrop*m.sizeMultiplier/t.sizeMultiplier)}if(c){var g=t.havingStyle(t.style.sub());s=Vr(c,g,t),p||(f=u.depth+g.fontMetrics().subDrop*g.sizeMultiplier/t.sizeMultiplier)}n=t.style===Fk.DISPLAY?h.sup1:t.style.cramped?h.sup3:h.sup2;var y=t.sizeMultiplier,b=FV(.5/h.ptPerEm/y),v=null;if(s){var x=e.base&&"op"===e.base.type&&e.base.name&&("\\oiint"===e.base.name||"\\oiiint"===e.base.name);(u instanceof F0||x)&&(v=FV(-u.italic))}if(o&&s){d=Math.max(d,n,o.depth+.25*h.xHeight),f=Math.max(f,h.sub2);var w=4*h.defaultRuleThickness;if(d-o.depth-(s.height-f)<w){f=w-(d-o.depth)+s.height;var k=.8*h.xHeight-(d-o.depth);k>0&&(d+=k,f-=k)}var O=[{type:"elem",elem:s,shift:f,marginRight:b,marginLeft:v},{type:"elem",elem:o,shift:-d,marginRight:b}];r=QQ.makeVList({positionType:"individualShift",children:O},t)}else if(s){f=Math.max(f,h.sub1,s.height-.8*h.xHeight);var S=[{type:"elem",elem:s,marginLeft:v,marginRight:b}];r=QQ.makeVList({positionType:"shift",positionData:f,children:S},t)}else if(o)d=Math.max(d,n,o.depth+.25*h.xHeight),r=QQ.makeVList({positionType:"shift",positionData:-d,children:[{type:"elem",elem:o,marginRight:b}]},t);else throw Error("supsub must have either sup or sub.");var C=Vt(u,"right")||"mord";return QQ.makeSpan([C],[u,QQ.makeSpan(["msupsub"],[r])],t)},mathmlBuilder(e,t){var n,r,i=!1;e.base&&"horizBrace"===e.base.type&&!!e.sup===e.base.isOver&&(i=!0,r=e.base.isOver),e.base&&("op"===e.base.type||"operatorname"===e.base.type)&&(e.base.parentIsSupSub=!0);var o=[Vy(e.base,t)];if(e.sub&&o.push(Vy(e.sub,t)),e.sup&&o.push(Vy(e.sup,t)),i)n=r?"mover":"munder";else if(e.sub){if(e.sup){var s=e.base;n=s&&"op"===s.type&&s.limits&&t.style===Fk.DISPLAY||s&&"operatorname"===s.type&&s.alwaysHandleSupSub&&(t.style===Fk.DISPLAY||s.limits)?"munderover":"msubsup"}else{var a=e.base;n=a&&"op"===a.type&&a.limits&&(t.style===Fk.DISPLAY||a.alwaysHandleSupSub)||a&&"operatorname"===a.type&&a.alwaysHandleSupSub&&(a.limits||t.style===Fk.DISPLAY)?"munder":"msub"}}else{var l=e.base;n=l&&"op"===l.type&&l.limits&&(t.style===Fk.DISPLAY||l.alwaysHandleSupSub)||l&&"operatorname"===l.type&&l.alwaysHandleSupSub&&(l.limits||t.style===Fk.DISPLAY)?"mover":"msup"}return new Vu.MathNode(n,o)}}),QJ({type:"atom",htmlBuilder:(e,t)=>QQ.mathsym(e.text,e.mode,t,["m"+e.family]),mathmlBuilder(e,t){var n=new Vu.MathNode("mo",[Vh(e.text,e.mode)]);if("bin"===e.family){var r=Vf(e,t);"bold-italic"===r&&n.setAttribute("mathvariant",r)}else"punct"===e.family?n.setAttribute("separator","true"):("open"===e.family||"close"===e.family)&&n.setAttribute("stretchy","false");return n}});var HH={mi:"italic",mn:"normal",mtext:"normal"};QJ({type:"mathord",htmlBuilder:(e,t)=>QQ.makeOrd(e,t,"mathord"),mathmlBuilder(e,t){var n=new Vu.MathNode("mi",[Vh(e.text,e.mode,t)]),r=Vf(e,t)||"italic";return r!==HH[n.type]&&n.setAttribute("mathvariant",r),n}}),QJ({type:"textord",htmlBuilder:(e,t)=>QQ.makeOrd(e,t,"textord"),mathmlBuilder(e,t){var n,r=Vh(e.text,e.mode,t),i=Vf(e,t)||"normal";return i!==HH[(n="text"===e.mode?new Vu.MathNode("mtext",[r]):/[0-9]/.test(e.text)?new Vu.MathNode("mn",[r]):"\\prime"===e.text?new Vu.MathNode("mo",[r]):new Vu.MathNode("mi",[r])).type]&&n.setAttribute("mathvariant",i),n}});var HU={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},HW={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};QJ({type:"spacing",htmlBuilder(e,t){if(HW.hasOwnProperty(e.text)){var n=HW[e.text].className||"";if("text"!==e.mode)return QQ.makeSpan(["mspace",n],[QQ.mathsym(e.text,e.mode,t)],t);var r=QQ.makeOrd(e,t,"textord");return r.classes.push(n),r}if(HU.hasOwnProperty(e.text))return QQ.makeSpan(["mspace",HU[e.text]],[],t);throw new Fo('Unknown type of space "'+e.text+'"')},mathmlBuilder(e,t){var n;if(HW.hasOwnProperty(e.text))n=new Vu.MathNode("mtext",[new Vu.TextNode("\xa0")]);else{if(HU.hasOwnProperty(e.text))return new Vu.MathNode("mspace");throw new Fo('Unknown type of space "'+e.text+'"')}return n}});var HG=()=>{var e=new Vu.MathNode("mtd",[]);return e.setAttribute("width","50%"),e};QJ({type:"tag",mathmlBuilder(e,t){var n=new Vu.MathNode("mtable",[new Vu.MathNode("mtr",[HG(),new Vu.MathNode("mtd",[Vg(e.body,t)]),HG(),new Vu.MathNode("mtd",[Vg(e.tag,t)])])]);return n.setAttribute("width","100%"),n}});var HX={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},HY={"\\textbf":"textbf","\\textmd":"textmd"},HZ={"\\textit":"textit","\\textup":"textup"},HK=(e,t)=>{var n=e.font;return n?HX[n]?t.withTextFontFamily(HX[n]):HY[n]?t.withTextFontWeight(HY[n]):"\\emph"===n?"textit"===t.fontShape?t.withTextFontShape("textup"):t.withTextFontShape("textit"):t.withTextFontShape(HZ[n]):t};QK({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(e,t){var{parser:n,funcName:r}=e,i=t[0];return{type:"text",mode:n.mode,body:Q1(i),font:r}},htmlBuilder(e,t){var n=HK(e,t),r=Q7(e.body,n,!0);return QQ.makeSpan(["mord","text"],r,n)},mathmlBuilder(e,t){var n=HK(e,t);return Vg(e.body,n)}}),QK({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:n}=e;return{type:"underline",mode:n.mode,body:t[0]}},htmlBuilder(e,t){var n=Vr(e.body,t),r=QQ.makeLineSpan("underline-line",t),i=t.fontMetrics().defaultRuleThickness,o=QQ.makeVList({positionType:"top",positionData:n.height,children:[{type:"kern",size:i},{type:"elem",elem:r},{type:"kern",size:3*i},{type:"elem",elem:n}]},t);return QQ.makeSpan(["mord","underline"],[o],t)},mathmlBuilder(e,t){var n=new Vu.MathNode("mo",[new Vu.TextNode("")]);n.setAttribute("stretchy","true");var r=new Vu.MathNode("munder",[Vy(e.body,t),n]);return r.setAttribute("accentunder","true"),r}}),QK({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(e,t){var{parser:n}=e;return{type:"vcenter",mode:n.mode,body:t[0]}},htmlBuilder(e,t){var n=Vr(e.body,t),r=t.fontMetrics().axisHeight,i=.5*(n.height-r-(n.depth+r));return QQ.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:n}]},t)},mathmlBuilder:(e,t)=>new Vu.MathNode("mpadded",[Vy(e.body,t)],["vcenter"])}),QK({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,n){throw new Fo("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(e,t){for(var n=HJ(e),r=[],i=t.havingStyle(t.style.text()),o=0;o<n.length;o++){var s=n[o];"~"===s&&(s="\\textasciitilde"),r.push(QQ.makeSymbol(s,"Typewriter-Regular",e.mode,i,["mord","texttt"]))}return QQ.makeSpan(["mord","text"].concat(i.sizingClasses(t)),QQ.tryCombineChars(r),i)},mathmlBuilder(e,t){var n=new Vu.TextNode(HJ(e)),r=new Vu.MathNode("mtext",[n]);return r.setAttribute("mathvariant","monospace"),r}});var HJ=e=>e.body.replace(/ /g,e.star?"":"\xa0"),H0=`[ \r
	]`,H1=`\\\\(
|[ \r	]+
?)[ \r	]*`,H2="[-]",H4=RegExp(H2+"+$"),H5="("+H0+"+)|"+H1+"|([!-\\[\\]---]"+H2+"*|[\uD800-\uDBFF][\uDC00-\uDFFF]"+H2+"*|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5|(\\\\[a-zA-Z@]+)"+H0+"*|\\\\[^\uD800-\uDFFF])";class H3{constructor(e,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=t,this.tokenRegex=RegExp(H5,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,t){this.catcodes[e]=t}lex(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new Fi("EOF",new Fr(this,t,t));var n=this.tokenRegex.exec(e);if(null===n||n.index!==t)throw new Fo("Unexpected character: '"+e[t]+"'",new Fi(e[t],new Fr(this,t,t+1)));var r=n[6]||n[3]||(n[2]?"\\ ":" ");if(14===this.catcodes[r]){var i=e.indexOf(`
`,this.tokenRegex.lastIndex);return -1===i?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=i+1,this.lex()}return new Fi(r,new Fr(this,t,this.tokenRegex.lastIndex))}}class H6{constructor(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(0===this.undefStack.length)throw new Fo("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(null==e[t]?delete this.current[t]:this.current[t]=e[t])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,t,n){if(void 0===n&&(n=!1),n){for(var r=0;r<this.undefStack.length;r++)delete this.undefStack[r][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(e)&&(i[e]=this.current[e])}null==t?delete this.current[e]:this.current[e]=t}}Hf["\\noexpand"]=function(e){var t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}},Hf["\\expandafter"]=function(e){var t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}},Hf["\\@firstoftwo"]=function(e){return{tokens:e.consumeArgs(2)[0],numArgs:0}},Hf["\\@secondoftwo"]=function(e){return{tokens:e.consumeArgs(2)[1],numArgs:0}},Hf["\\@ifnextchar"]=function(e){var t=e.consumeArgs(3);e.consumeSpaces();var n=e.future();return 1===t[0].length&&t[0][0].text===n.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}},Hf["\\@ifstar"]="\\@ifnextchar *{\\@firstoftwo{#1}}",Hf["\\TextOrMath"]=function(e){var t=e.consumeArgs(2);return"text"===e.mode?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}};var H7={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Hf["\\char"]=function(e){var t,n,r=e.popToken(),i="";if("'"===r.text)n=8,r=e.popToken();else if('"'===r.text)n=16,r=e.popToken();else if("`"===r.text){if("\\"===(r=e.popToken()).text[0])i=r.text.charCodeAt(1);else{if("EOF"===r.text)throw new Fo("\\char` missing argument");i=r.text.charCodeAt(0)}}else n=10;if(n){if(null==(i=H7[r.text])||i>=n)throw new Fo("Invalid base-"+n+" digit "+r.text);for(;null!=(t=H7[e.future().text])&&t<n;)i*=n,i+=t,e.popToken()}return"\\@char{"+i+"}"};var H8=(e,t,n,r)=>{var i=e.consumeArg().tokens;if(1!==i.length)throw new Fo("\\newcommand's first argument must be a macro name");var o=i[0].text,s=e.isDefined(o);if(s&&!t)throw new Fo("\\newcommand{"+o+"} attempting to redefine "+o+"; use \\renewcommand");if(!s&&!n)throw new Fo("\\renewcommand{"+o+"} when command "+o+" does not yet exist; use \\newcommand");var a=0;if(1===(i=e.consumeArg().tokens).length&&"["===i[0].text){for(var l="",c=e.expandNextToken();"]"!==c.text&&"EOF"!==c.text;)l+=c.text,c=e.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new Fo("Invalid number of arguments: "+l);a=parseInt(l),i=e.consumeArg().tokens}return s&&r||e.macros.set(o,{tokens:i,numArgs:a}),""};Hf["\\newcommand"]=e=>H8(e,!1,!0,!1),Hf["\\renewcommand"]=e=>H8(e,!0,!1,!1),Hf["\\providecommand"]=e=>H8(e,!0,!0,!0),Hf["\\message"]=e=>(console.log(e.consumeArgs(1)[0].reverse().map(e=>e.text).join("")),""),Hf["\\errmessage"]=e=>(console.error(e.consumeArgs(1)[0].reverse().map(e=>e.text).join("")),""),Hf["\\show"]=e=>{var t=e.popToken(),n=t.text;return console.log(t,e.macros.get(n),QX[n],F7.math[n],F7.text[n]),""},Hf["\\bgroup"]="{",Hf["\\egroup"]="}",Hf["~"]="\\nobreakspace",Hf["\\lq"]="`",Hf["\\rq"]="'",Hf["\\aa"]="\\r a",Hf["\\AA"]="\\r A",Hf["\\textcopyright"]="\\html@mathml{\\textcircled{c}}{\\char`\xa9}",Hf["\\copyright"]="\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}",Hf["\\textregistered"]="\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`\xae}",Hf[""]="\\mathscr{B}",Hf[""]="\\mathscr{E}",Hf[""]="\\mathscr{F}",Hf[""]="\\mathscr{H}",Hf[""]="\\mathscr{I}",Hf[""]="\\mathscr{L}",Hf[""]="\\mathscr{M}",Hf[""]="\\mathscr{R}",Hf[""]="\\mathfrak{C}",Hf[""]="\\mathfrak{H}",Hf[""]="\\mathfrak{Z}",Hf["\\Bbbk"]="\\Bbb{k}",Hf["\xb7"]="\\cdotp",Hf["\\llap"]="\\mathllap{\\textrm{#1}}",Hf["\\rlap"]="\\mathrlap{\\textrm{#1}}",Hf["\\clap"]="\\mathclap{\\textrm{#1}}",Hf["\\mathstrut"]="\\vphantom{(}",Hf["\\underbar"]="\\underline{\\text{#1}}",Hf["\\not"]='\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}',Hf["\\neq"]="\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}",Hf["\\ne"]="\\neq",Hf[""]="\\neq",Hf["\\notin"]="\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}",Hf[""]="\\notin",Hf[""]="\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}",Hf[""]="\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}",Hf[""]="\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}",Hf[""]="\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}",Hf[""]="\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}",Hf[""]="\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}",Hf[""]="\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}",Hf[""]="\\perp",Hf[""]="\\mathclose{!\\mkern-0.8mu!}",Hf[""]="\\notni",Hf[""]="\\ulcorner",Hf[""]="\\urcorner",Hf[""]="\\llcorner",Hf[""]="\\lrcorner",Hf["\xa9"]="\\copyright",Hf["\xae"]="\\textregistered",Hf[""]="\\textregistered",Hf["\\ulcorner"]='\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}',Hf["\\urcorner"]='\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}',Hf["\\llcorner"]='\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}',Hf["\\lrcorner"]='\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}',Hf["\\vdots"]="{\\varvdots\\rule{0pt}{15pt}}",Hf[""]="\\vdots",Hf["\\varGamma"]="\\mathit{\\Gamma}",Hf["\\varDelta"]="\\mathit{\\Delta}",Hf["\\varTheta"]="\\mathit{\\Theta}",Hf["\\varLambda"]="\\mathit{\\Lambda}",Hf["\\varXi"]="\\mathit{\\Xi}",Hf["\\varPi"]="\\mathit{\\Pi}",Hf["\\varSigma"]="\\mathit{\\Sigma}",Hf["\\varUpsilon"]="\\mathit{\\Upsilon}",Hf["\\varPhi"]="\\mathit{\\Phi}",Hf["\\varPsi"]="\\mathit{\\Psi}",Hf["\\varOmega"]="\\mathit{\\Omega}",Hf["\\substack"]="\\begin{subarray}{c}#1\\end{subarray}",Hf["\\colon"]="\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax",Hf["\\boxed"]="\\fbox{$\\displaystyle{#1}$}",Hf["\\iff"]="\\DOTSB\\;\\Longleftrightarrow\\;",Hf["\\implies"]="\\DOTSB\\;\\Longrightarrow\\;",Hf["\\impliedby"]="\\DOTSB\\;\\Longleftarrow\\;",Hf["\\dddot"]="{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}",Hf["\\ddddot"]="{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}";var H9={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Hf["\\dots"]=function(e){var t="\\dotso",n=e.expandAfterFuture().text;return n in H9?t=H9[n]:("\\not"===n.slice(0,4)||n in F7.math&&Fh.contains(["bin","rel"],F7.math[n].group))&&(t="\\dotsb"),t};var Ue={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Hf["\\dotso"]=function(e){return e.future().text in Ue?"\\ldots\\,":"\\ldots"},Hf["\\dotsc"]=function(e){var t=e.future().text;return t in Ue&&","!==t?"\\ldots\\,":"\\ldots"},Hf["\\cdots"]=function(e){return e.future().text in Ue?"\\@cdots\\,":"\\@cdots"},Hf["\\dotsb"]="\\cdots",Hf["\\dotsm"]="\\cdots",Hf["\\dotsi"]="\\!\\cdots",Hf["\\dotsx"]="\\ldots\\,",Hf["\\DOTSI"]="\\relax",Hf["\\DOTSB"]="\\relax",Hf["\\DOTSX"]="\\relax",Hf["\\tmspace"]="\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax",Hf["\\,"]="\\tmspace+{3mu}{.1667em}",Hf["\\thinspace"]="\\,",Hf["\\>"]="\\mskip{4mu}",Hf["\\:"]="\\tmspace+{4mu}{.2222em}",Hf["\\medspace"]="\\:",Hf["\\;"]="\\tmspace+{5mu}{.2777em}",Hf["\\thickspace"]="\\;",Hf["\\!"]="\\tmspace-{3mu}{.1667em}",Hf["\\negthinspace"]="\\!",Hf["\\negmedspace"]="\\tmspace-{4mu}{.2222em}",Hf["\\negthickspace"]="\\tmspace-{5mu}{.277em}",Hf["\\enspace"]="\\kern.5em ",Hf["\\enskip"]="\\hskip.5em\\relax",Hf["\\quad"]="\\hskip1em\\relax",Hf["\\qquad"]="\\hskip2em\\relax",Hf["\\tag"]="\\@ifstar\\tag@literal\\tag@paren",Hf["\\tag@paren"]="\\tag@literal{({#1})}",Hf["\\tag@literal"]=e=>{if(e.macros.get("\\df@tag"))throw new Fo("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"},Hf["\\bmod"]="\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}",Hf["\\pod"]="\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)",Hf["\\pmod"]="\\pod{{\\rm mod}\\mkern6mu#1}",Hf["\\mod"]="\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1",Hf["\\newline"]="\\\\\\relax",Hf["\\TeX"]="\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}";var Ut=FV(F_["Main-Regular"][84][1]-.7*F_["Main-Regular"][65][1]);Hf["\\LaTeX"]="\\textrm{\\html@mathml{L\\kern-.36em\\raisebox{"+Ut+"}{\\scriptstyle A}\\kern-.15em\\TeX}{LaTeX}}",Hf["\\KaTeX"]="\\textrm{\\html@mathml{K\\kern-.17em\\raisebox{"+Ut+"}{\\scriptstyle A}\\kern-.15em\\TeX}{KaTeX}}",Hf["\\hspace"]="\\@ifstar\\@hspacer\\@hspace",Hf["\\@hspace"]="\\hskip #1\\relax",Hf["\\@hspacer"]="\\rule{0pt}{0pt}\\hskip #1\\relax",Hf["\\ordinarycolon"]=":",Hf["\\vcentcolon"]="\\mathrel{\\mathop\\ordinarycolon}",Hf["\\dblcolon"]='\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}',Hf["\\coloneqq"]='\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}',Hf["\\Coloneqq"]='\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}',Hf["\\coloneq"]='\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}',Hf["\\Coloneq"]='\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}',Hf["\\eqqcolon"]='\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}',Hf["\\Eqqcolon"]='\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}',Hf["\\eqcolon"]='\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}',Hf["\\Eqcolon"]='\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}',Hf["\\colonapprox"]='\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}',Hf["\\Colonapprox"]='\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}',Hf["\\colonsim"]='\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}',Hf["\\Colonsim"]='\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}',Hf[""]="\\dblcolon",Hf[""]="\\eqcolon",Hf[""]="\\coloneqq",Hf[""]="\\eqqcolon",Hf[""]="\\Coloneqq",Hf["\\ratio"]="\\vcentcolon",Hf["\\coloncolon"]="\\dblcolon",Hf["\\colonequals"]="\\coloneqq",Hf["\\coloncolonequals"]="\\Coloneqq",Hf["\\equalscolon"]="\\eqqcolon",Hf["\\equalscoloncolon"]="\\Eqqcolon",Hf["\\colonminus"]="\\coloneq",Hf["\\coloncolonminus"]="\\Coloneq",Hf["\\minuscolon"]="\\eqcolon",Hf["\\minuscoloncolon"]="\\Eqcolon",Hf["\\coloncolonapprox"]="\\Colonapprox",Hf["\\coloncolonsim"]="\\Colonsim",Hf["\\simcolon"]="\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}",Hf["\\simcoloncolon"]="\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}",Hf["\\approxcolon"]="\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}",Hf["\\approxcoloncolon"]="\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}",Hf["\\notni"]="\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}",Hf["\\limsup"]="\\DOTSB\\operatorname*{lim\\,sup}",Hf["\\liminf"]="\\DOTSB\\operatorname*{lim\\,inf}",Hf["\\injlim"]="\\DOTSB\\operatorname*{inj\\,lim}",Hf["\\projlim"]="\\DOTSB\\operatorname*{proj\\,lim}",Hf["\\varlimsup"]="\\DOTSB\\operatorname*{\\overline{lim}}",Hf["\\varliminf"]="\\DOTSB\\operatorname*{\\underline{lim}}",Hf["\\varinjlim"]="\\DOTSB\\operatorname*{\\underrightarrow{lim}}",Hf["\\varprojlim"]="\\DOTSB\\operatorname*{\\underleftarrow{lim}}",Hf["\\gvertneqq"]="\\html@mathml{\\@gvertneqq}{}",Hf["\\lvertneqq"]="\\html@mathml{\\@lvertneqq}{}",Hf["\\ngeqq"]="\\html@mathml{\\@ngeqq}{}",Hf["\\ngeqslant"]="\\html@mathml{\\@ngeqslant}{}",Hf["\\nleqq"]="\\html@mathml{\\@nleqq}{}",Hf["\\nleqslant"]="\\html@mathml{\\@nleqslant}{}",Hf["\\nshortmid"]="\\html@mathml{\\@nshortmid}{}",Hf["\\nshortparallel"]="\\html@mathml{\\@nshortparallel}{}",Hf["\\nsubseteqq"]="\\html@mathml{\\@nsubseteqq}{}",Hf["\\nsupseteqq"]="\\html@mathml{\\@nsupseteqq}{}",Hf["\\varsubsetneq"]="\\html@mathml{\\@varsubsetneq}{}",Hf["\\varsubsetneqq"]="\\html@mathml{\\@varsubsetneqq}{}",Hf["\\varsupsetneq"]="\\html@mathml{\\@varsupsetneq}{}",Hf["\\varsupsetneqq"]="\\html@mathml{\\@varsupsetneqq}{}",Hf["\\imath"]="\\html@mathml{\\@imath}{}",Hf["\\jmath"]="\\html@mathml{\\@jmath}{}",Hf["\\llbracket"]="\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}",Hf["\\rrbracket"]="\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}",Hf[""]="\\llbracket",Hf[""]="\\rrbracket",Hf["\\lBrace"]="\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}",Hf["\\rBrace"]="\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}",Hf[""]="\\lBrace",Hf[""]="\\rBrace",Hf["\\minuso"]="\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}",Hf[""]="\\minuso",Hf["\\darr"]="\\downarrow",Hf["\\dArr"]="\\Downarrow",Hf["\\Darr"]="\\Downarrow",Hf["\\lang"]="\\langle",Hf["\\rang"]="\\rangle",Hf["\\uarr"]="\\uparrow",Hf["\\uArr"]="\\Uparrow",Hf["\\Uarr"]="\\Uparrow",Hf["\\N"]="\\mathbb{N}",Hf["\\R"]="\\mathbb{R}",Hf["\\Z"]="\\mathbb{Z}",Hf["\\alef"]="\\aleph",Hf["\\alefsym"]="\\aleph",Hf["\\Alpha"]="\\mathrm{A}",Hf["\\Beta"]="\\mathrm{B}",Hf["\\bull"]="\\bullet",Hf["\\Chi"]="\\mathrm{X}",Hf["\\clubs"]="\\clubsuit",Hf["\\cnums"]="\\mathbb{C}",Hf["\\Complex"]="\\mathbb{C}",Hf["\\Dagger"]="\\ddagger",Hf["\\diamonds"]="\\diamondsuit",Hf["\\empty"]="\\emptyset",Hf["\\Epsilon"]="\\mathrm{E}",Hf["\\Eta"]="\\mathrm{H}",Hf["\\exist"]="\\exists",Hf["\\harr"]="\\leftrightarrow",Hf["\\hArr"]="\\Leftrightarrow",Hf["\\Harr"]="\\Leftrightarrow",Hf["\\hearts"]="\\heartsuit",Hf["\\image"]="\\Im",Hf["\\infin"]="\\infty",Hf["\\Iota"]="\\mathrm{I}",Hf["\\isin"]="\\in",Hf["\\Kappa"]="\\mathrm{K}",Hf["\\larr"]="\\leftarrow",Hf["\\lArr"]="\\Leftarrow",Hf["\\Larr"]="\\Leftarrow",Hf["\\lrarr"]="\\leftrightarrow",Hf["\\lrArr"]="\\Leftrightarrow",Hf["\\Lrarr"]="\\Leftrightarrow",Hf["\\Mu"]="\\mathrm{M}",Hf["\\natnums"]="\\mathbb{N}",Hf["\\Nu"]="\\mathrm{N}",Hf["\\Omicron"]="\\mathrm{O}",Hf["\\plusmn"]="\\pm",Hf["\\rarr"]="\\rightarrow",Hf["\\rArr"]="\\Rightarrow",Hf["\\Rarr"]="\\Rightarrow",Hf["\\real"]="\\Re",Hf["\\reals"]="\\mathbb{R}",Hf["\\Reals"]="\\mathbb{R}",Hf["\\Rho"]="\\mathrm{P}",Hf["\\sdot"]="\\cdot",Hf["\\sect"]="\\S",Hf["\\spades"]="\\spadesuit",Hf["\\sub"]="\\subset",Hf["\\sube"]="\\subseteq",Hf["\\supe"]="\\supseteq",Hf["\\Tau"]="\\mathrm{T}",Hf["\\thetasym"]="\\vartheta",Hf["\\weierp"]="\\wp",Hf["\\Zeta"]="\\mathrm{Z}",Hf["\\argmin"]="\\DOTSB\\operatorname*{arg\\,min}",Hf["\\argmax"]="\\DOTSB\\operatorname*{arg\\,max}",Hf["\\plim"]="\\DOTSB\\mathop{\\operatorname{plim}}\\limits",Hf["\\bra"]="\\mathinner{\\langle{#1}|}",Hf["\\ket"]="\\mathinner{|{#1}\\rangle}",Hf["\\braket"]="\\mathinner{\\langle{#1}\\rangle}",Hf["\\Bra"]="\\left\\langle#1\\right|",Hf["\\Ket"]="\\left|#1\\right\\rangle";var Un=e=>t=>{var n=t.consumeArg().tokens,r=t.consumeArg().tokens,i=t.consumeArg().tokens,o=t.consumeArg().tokens,s=t.macros.get("|"),a=t.macros.get("\\|");t.macros.beginGroup();var l=t=>n=>{e&&(n.macros.set("|",s),i.length&&n.macros.set("\\|",a));var o=t;return!t&&i.length&&"|"===n.future().text&&(n.popToken(),o=!0),{tokens:o?i:r,numArgs:0}};t.macros.set("|",l(!1)),i.length&&t.macros.set("\\|",l(!0));var c=t.consumeArg().tokens,u=t.expandTokens([...o,...c,...n]);return t.macros.endGroup(),{tokens:u.reverse(),numArgs:0}};c=Un(!1),Hf["\\bra@ket"]=c,u=Un(!0),Hf["\\bra@set"]=u,Hf["\\Braket"]="\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}",Hf["\\Set"]="\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}",Hf["\\set"]="\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}",Hf["\\angln"]="{\\angl n}",Hf["\\blue"]="\\textcolor{##6495ed}{#1}",Hf["\\orange"]="\\textcolor{##ffa500}{#1}",Hf["\\pink"]="\\textcolor{##ff00af}{#1}",Hf["\\red"]="\\textcolor{##df0030}{#1}",Hf["\\green"]="\\textcolor{##28ae7b}{#1}",Hf["\\gray"]="\\textcolor{gray}{#1}",Hf["\\purple"]="\\textcolor{##9d38bd}{#1}",Hf["\\blueA"]="\\textcolor{##ccfaff}{#1}",Hf["\\blueB"]="\\textcolor{##80f6ff}{#1}",Hf["\\blueC"]="\\textcolor{##63d9ea}{#1}",Hf["\\blueD"]="\\textcolor{##11accd}{#1}",Hf["\\blueE"]="\\textcolor{##0c7f99}{#1}",Hf["\\tealA"]="\\textcolor{##94fff5}{#1}",Hf["\\tealB"]="\\textcolor{##26edd5}{#1}",Hf["\\tealC"]="\\textcolor{##01d1c1}{#1}",Hf["\\tealD"]="\\textcolor{##01a995}{#1}",Hf["\\tealE"]="\\textcolor{##208170}{#1}",Hf["\\greenA"]="\\textcolor{##b6ffb0}{#1}",Hf["\\greenB"]="\\textcolor{##8af281}{#1}",Hf["\\greenC"]="\\textcolor{##74cf70}{#1}",Hf["\\greenD"]="\\textcolor{##1fab54}{#1}",Hf["\\greenE"]="\\textcolor{##0d923f}{#1}",Hf["\\goldA"]="\\textcolor{##ffd0a9}{#1}",Hf["\\goldB"]="\\textcolor{##ffbb71}{#1}",Hf["\\goldC"]="\\textcolor{##ff9c39}{#1}",Hf["\\goldD"]="\\textcolor{##e07d10}{#1}",Hf["\\goldE"]="\\textcolor{##a75a05}{#1}",Hf["\\redA"]="\\textcolor{##fca9a9}{#1}",Hf["\\redB"]="\\textcolor{##ff8482}{#1}",Hf["\\redC"]="\\textcolor{##f9685d}{#1}",Hf["\\redD"]="\\textcolor{##e84d39}{#1}",Hf["\\redE"]="\\textcolor{##bc2612}{#1}",Hf["\\maroonA"]="\\textcolor{##ffbde0}{#1}",Hf["\\maroonB"]="\\textcolor{##ff92c6}{#1}",Hf["\\maroonC"]="\\textcolor{##ed5fa6}{#1}",Hf["\\maroonD"]="\\textcolor{##ca337c}{#1}",Hf["\\maroonE"]="\\textcolor{##9e034e}{#1}",Hf["\\purpleA"]="\\textcolor{##ddd7ff}{#1}",Hf["\\purpleB"]="\\textcolor{##c6b9fc}{#1}",Hf["\\purpleC"]="\\textcolor{##aa87ff}{#1}",Hf["\\purpleD"]="\\textcolor{##7854ab}{#1}",Hf["\\purpleE"]="\\textcolor{##543b78}{#1}",Hf["\\mintA"]="\\textcolor{##f5f9e8}{#1}",Hf["\\mintB"]="\\textcolor{##edf2df}{#1}",Hf["\\mintC"]="\\textcolor{##e0e5cc}{#1}",Hf["\\grayA"]="\\textcolor{##f6f7f7}{#1}",Hf["\\grayB"]="\\textcolor{##f0f1f2}{#1}",Hf["\\grayC"]="\\textcolor{##e3e5e6}{#1}",Hf["\\grayD"]="\\textcolor{##d6d8da}{#1}",Hf["\\grayE"]="\\textcolor{##babec2}{#1}",Hf["\\grayF"]="\\textcolor{##888d93}{#1}",Hf["\\grayG"]="\\textcolor{##626569}{#1}",Hf["\\grayH"]="\\textcolor{##3b3e40}{#1}",Hf["\\grayI"]="\\textcolor{##21242c}{#1}",Hf["\\kaBlue"]="\\textcolor{##314453}{#1}",Hf["\\kaGreen"]="\\textcolor{##71B307}{#1}";var Ur={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class Ui{constructor(e,t,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new H6(Hf,t.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new H3(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return 0===this.stack.length&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var t,n,r;if(e){if(this.consumeSpaces(),"["!==this.future().text)return null;t=this.popToken(),{tokens:r,end:n}=this.consumeArg(["]"])}else({tokens:r,start:t,end:n}=this.consumeArg());return this.pushToken(new Fi("EOF",n.loc)),this.pushTokens(r),t.range(n,"")}consumeSpaces(){for(;;)if(" "===this.future().text)this.stack.pop();else break}consumeArg(e){var t=[],n=e&&e.length>0;n||this.consumeSpaces();var r,i=this.future(),o=0,s=0;do{if(r=this.popToken(),t.push(r),"{"===r.text)++o;else if("}"===r.text){if(-1==--o)throw new Fo("Extra }",r)}else if("EOF"===r.text)throw new Fo("Unexpected end of input in a macro argument, expected '"+(e&&n?e[s]:"}")+"'",r);if(e&&n){if((0===o||1===o&&"{"===e[s])&&r.text===e[s]){if(++s===e.length){t.splice(-s,s);break}}else s=0}}while(0!==o||n);return"{"===i.text&&"}"===t[t.length-1].text&&(t.pop(),t.shift()),t.reverse(),{tokens:t,start:i,end:r}}consumeArgs(e,t){if(t){if(t.length!==e+1)throw new Fo("The length of delimiters doesn't match the number of args!");for(var n=t[0],r=0;r<n.length;r++){var i=this.popToken();if(n[r]!==i.text)throw new Fo("Use of the macro doesn't match its definition",i)}}for(var o=[],s=0;s<e;s++)o.push(this.consumeArg(t&&t[s+1]).tokens);return o}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new Fo("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var t=this.popToken(),n=t.text,r=t.noexpand?null:this._getExpansion(n);if(null==r||e&&r.unexpandable){if(e&&null==r&&"\\"===n[0]&&!this.isDefined(n))throw new Fo("Undefined control sequence: "+n);return this.pushToken(t),!1}this.countExpansion(1);var i=r.tokens,o=this.consumeArgs(r.numArgs,r.delimiters);if(r.numArgs){i=i.slice();for(var s=i.length-1;s>=0;--s){var a=i[s];if("#"===a.text){if(0===s)throw new Fo("Incomplete placeholder at end of macro body",a);if("#"===(a=i[--s]).text)i.splice(s+1,1);else if(/^[1-9]$/.test(a.text))i.splice(s,2,...o[+a.text-1]);else throw new Fo("Not a valid argument number",a)}}}return this.pushTokens(i),i.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(!1===this.expandOnce()){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw Error()}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Fi(e)]):void 0}expandTokens(e){var t=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(!1===this.expandOnce(!0)){var r=this.stack.pop();r.treatAsRelax&&(r.noexpand=!1,r.treatAsRelax=!1),t.push(r)}return this.countExpansion(t.length),t}expandMacroAsText(e){var t=this.expandMacro(e);return t&&t.map(e=>e.text).join("")}_getExpansion(e){var t=this.macros.get(e);if(null==t)return t;if(1===e.length){var n=this.lexer.catcodes[e];if(null!=n&&13!==n)return}var r="function"==typeof t?t(this):t;if("string"==typeof r){var i=0;if(-1!==r.indexOf("#"))for(var o=r.replace(/##/g,"");-1!==o.indexOf("#"+(i+1));)++i;for(var s=new H3(r,this.settings),a=[],l=s.lex();"EOF"!==l.text;)a.push(l),l=s.lex();return a.reverse(),{tokens:a,numArgs:i}}return r}isDefined(e){return this.macros.has(e)||QX.hasOwnProperty(e)||F7.math.hasOwnProperty(e)||F7.text.hasOwnProperty(e)||Ur.hasOwnProperty(e)}isExpandable(e){var t=this.macros.get(e);return null!=t?"string"==typeof t||"function"==typeof t||!t.unexpandable:QX.hasOwnProperty(e)&&!QX[e].primitive}}var Uo=/^[]/,Us=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"a",:"e",:"h",:"i",:"j",:"k",:"l",:"m",:"n",:"o",:"p",:"r",:"s",:"t",:"u",:"v",:"x",:"",:"",:"",:"",:"","":"+","":"-","":"=","":"(","":")","":"0","\xb9":"1","\xb2":"2","\xb3":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"A",:"B",:"D",:"E",:"G",:"H",:"I",:"J",:"K",:"L",:"M",:"N",:"O",:"P",:"R",:"T",:"U",:"V",:"W",:"a",:"b",:"c",:"d",:"e",:"f",:"g",:"h",:"i",:"j",:"k",:"l",:"m",:"n",:"o",:"p",:"r",:"s",:"t",:"u",:"v",:"w",:"x",:"y",:"z",:"",:"",:"",:"",:"",:""}),Ua={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},Ul={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class Uc{constructor(e,t){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Ui(e,t,this.mode),this.settings=t,this.leftrightDepth=0}expect(e,t){if(void 0===t&&(t=!0),this.fetch().text!==e)throw new Fo("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());t&&this.consume()}consume(){this.nextToken=null}fetch(){return null==this.nextToken&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var t=this.nextToken;this.consume(),this.gullet.pushToken(new Fi("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=t,n}parseExpression(e,t){for(var n=[];;){"math"===this.mode&&this.consumeSpaces();var r=this.fetch();if(-1!==Uc.endOfExpression.indexOf(r.text)||t&&r.text===t||e&&QX[r.text]&&QX[r.text].infix)break;var i=this.parseAtom(t);if(i){if("internal"===i.type)continue}else break;n.push(i)}return"text"===this.mode&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var t,n=-1,r=0;r<e.length;r++)if("infix"===e[r].type){if(-1!==n)throw new Fo("only one infix operator per group",e[r].token);n=r,t=e[r].replaceWith}if(-1===n||!t)return e;var i,o,s,a=e.slice(0,n),l=e.slice(n+1);return o=1===a.length&&"ordgroup"===a[0].type?a[0]:{type:"ordgroup",mode:this.mode,body:a},s=1===l.length&&"ordgroup"===l[0].type?l[0]:{type:"ordgroup",mode:this.mode,body:l},["\\\\abovefrac"===t?this.callFunction(t,[o,e[n],s],[]):this.callFunction(t,[o,s],[])]}handleSupSubscript(e){var t=this.fetch(),n=t.text;this.consume(),this.consumeSpaces();var r=this.parseGroup(e);if(!r)throw new Fo("Expected group after '"+n+"'",t);return r}formatUnsupportedCmd(e){for(var t=[],n=0;n<e.length;n++)t.push({type:"textord",mode:"text",text:e[n]});var r={type:"text",mode:this.mode,body:t};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[r]}}parseAtom(e){var t,n,r=this.parseGroup("atom",e);if("text"===this.mode)return r;for(;;){this.consumeSpaces();var i=this.fetch();if("\\limits"===i.text||"\\nolimits"===i.text){if(r&&"op"===r.type)r.limits="\\limits"===i.text,r.alwaysHandleSupSub=!0;else if(r&&"operatorname"===r.type)r.alwaysHandleSupSub&&(r.limits="\\limits"===i.text);else throw new Fo("Limit controls must follow a math operator",i);this.consume()}else if("^"===i.text){if(t)throw new Fo("Double superscript",i);t=this.handleSupSubscript("superscript")}else if("_"===i.text){if(n)throw new Fo("Double subscript",i);n=this.handleSupSubscript("subscript")}else if("'"===i.text){if(t)throw new Fo("Double superscript",i);var o={type:"textord",mode:this.mode,text:"\\prime"},s=[o];for(this.consume();"'"===this.fetch().text;)s.push(o),this.consume();"^"===this.fetch().text&&s.push(this.handleSupSubscript("superscript")),t={type:"ordgroup",mode:this.mode,body:s}}else if(Us[i.text]){var a=Uo.test(i.text),l=[];for(l.push(new Fi(Us[i.text])),this.consume();;){var c=this.fetch().text;if(!Us[c]||Uo.test(c)!==a)break;l.unshift(new Fi(Us[c])),this.consume()}var u=this.subparse(l);a?n={type:"ordgroup",mode:"math",body:u}:t={type:"ordgroup",mode:"math",body:u}}else break}return t||n?{type:"supsub",mode:this.mode,base:r,sup:t,sub:n}:r}parseFunction(e,t){var n=this.fetch(),r=n.text,i=QX[r];if(!i)return null;if(this.consume(),t&&"atom"!==t&&!i.allowedInArgument)throw new Fo("Got function '"+r+"' with no arguments"+(t?" as "+t:""),n);if("text"===this.mode&&!i.allowedInText)throw new Fo("Can't use function '"+r+"' in text mode",n);if("math"===this.mode&&!1===i.allowedInMath)throw new Fo("Can't use function '"+r+"' in math mode",n);var{args:o,optArgs:s}=this.parseArguments(r,i);return this.callFunction(r,o,s,n,e)}callFunction(e,t,n,r,i){var o=QX[e];if(o&&o.handler)return o.handler({funcName:e,parser:this,token:r,breakOnTokenText:i},t,n);throw new Fo("No function handler for "+e)}parseArguments(e,t){var n=t.numArgs+t.numOptionalArgs;if(0===n)return{args:[],optArgs:[]};for(var r=[],i=[],o=0;o<n;o++){var s=t.argTypes&&t.argTypes[o],a=o<t.numOptionalArgs;(t.primitive&&null==s||"sqrt"===t.type&&1===o&&null==i[0])&&(s="primitive");var l=this.parseGroupOfType("argument to '"+e+"'",s,a);if(a)i.push(l);else if(null!=l)r.push(l);else throw new Fo("Null argument, please report this as a bug")}return{args:r,optArgs:i}}parseGroupOfType(e,t,n){switch(t){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,t);case"hbox":var r=this.parseArgumentGroup(n,"text");return null!=r?{type:"styling",mode:r.mode,body:[r],style:"text"}:null;case"raw":var i=this.parseStringGroup("raw",n);return null!=i?{type:"raw",mode:"text",string:i.text}:null;case"primitive":if(n)throw new Fo("A primitive argument cannot be optional");var o=this.parseGroup(e);if(null==o)throw new Fo("Expected group as "+e,this.fetch());return o;case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new Fo("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;" "===this.fetch().text;)this.consume()}parseStringGroup(e,t){var n=this.gullet.scanArgument(t);if(null==n)return null;for(var r,i="";"EOF"!==(r=this.fetch()).text;)i+=r.text,this.consume();return this.consume(),n.text=i,n}parseRegexGroup(e,t){for(var n,r=this.fetch(),i=r,o="";"EOF"!==(n=this.fetch()).text&&e.test(o+n.text);)o+=(i=n).text,this.consume();if(""===o)throw new Fo("Invalid "+t+": '"+r.text+"'",r);return r.range(i,o)}parseColorGroup(e){var t=this.parseStringGroup("color",e);if(null==t)return null;var n=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(t.text);if(!n)throw new Fo("Invalid color: '"+t.text+"'",t);var r=n[0];return/^[0-9a-f]{6}$/i.test(r)&&(r="#"+r),{type:"color-token",mode:this.mode,color:r}}parseSizeGroup(e){var t,n=!1;if(this.gullet.consumeSpaces(),!(t=e||"{"===this.gullet.future().text?this.parseStringGroup("size",e):this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size")))return null;e||0!==t.text.length||(t.text="0pt",n=!0);var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t.text);if(!r)throw new Fo("Invalid size: '"+t.text+"'",t);var i={number:+(r[1]+r[2]),unit:r[3]};if(!FF(i))throw new Fo("Invalid unit: '"+i.unit+"'",t);return{type:"size",mode:this.mode,value:i,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var t=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),null==t)return null;var n=t.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,t){var n=this.gullet.scanArgument(e);if(null==n)return null;var r=this.mode;t&&this.switchMode(t),this.gullet.beginGroup();var i=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:n.loc,body:i};return t&&this.switchMode(r),o}parseGroup(e,t){var n,r=this.fetch(),i=r.text;if("{"===i||"\\begingroup"===i){this.consume();var o="{"===i?"}":"\\endgroup";this.gullet.beginGroup();var s=this.parseExpression(!1,o),a=this.fetch();this.expect(o),this.gullet.endGroup(),n={type:"ordgroup",mode:this.mode,loc:Fr.range(r,a),body:s,semisimple:"\\begingroup"===i||void 0}}else if(null==(n=this.parseFunction(t,e)||this.parseSymbol())&&"\\"===i[0]&&!Ur.hasOwnProperty(i)){if(this.settings.throwOnError)throw new Fo("Undefined control sequence: "+i,r);n=this.formatUnsupportedCmd(i),this.consume()}return n}formLigatures(e){for(var t=e.length-1,n=0;n<t;++n){var r=e[n],i=r.text;"-"===i&&"-"===e[n+1].text&&(n+1<t&&"-"===e[n+2].text?(e.splice(n,3,{type:"textord",mode:"text",loc:Fr.range(r,e[n+2]),text:"---"}),t-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:Fr.range(r,e[n+1]),text:"--"}),t-=1)),("'"===i||"`"===i)&&e[n+1].text===i&&(e.splice(n,2,{type:"textord",mode:"text",loc:Fr.range(r,e[n+1]),text:i+i}),t-=1)}}parseSymbol(){var e=this.fetch(),t=e.text;if(/^\\verb[^a-zA-Z]/.test(t)){this.consume();var n=t.slice(5),r="*"===n.charAt(0);if(r&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new Fo(`\\verb assertion failed --
                    please report what input caused this bug`);return{type:"verb",mode:"text",body:n=n.slice(1,-1),star:r}}Ul.hasOwnProperty(t[0])&&!F7[this.mode][t[0]]&&(this.settings.strict&&"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+t[0]+'" used in math mode',e),t=Ul[t[0]]+t.slice(1));var i=H4.exec(t);if(i&&("i"===(t=t.substring(0,i.index))?t="":"j"===t&&(t="")),F7[this.mode][t]){this.settings.strict&&"math"===this.mode&&QT.indexOf(t)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+t[0]+'" used in math mode',e);var o,s,a=F7[this.mode][t].group,l=Fr.range(e);o=F3.hasOwnProperty(a)?{type:"atom",mode:this.mode,family:a,loc:l,text:t}:{type:a,mode:this.mode,loc:l,text:t}}else{if(!(t.charCodeAt(0)>=128))return null;this.settings.strict&&(FC(t.charCodeAt(0))?"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+t[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+t[0]+'" ('+t.charCodeAt(0)+")",e)),o={type:"textord",mode:"text",loc:Fr.range(e),text:t}}if(this.consume(),i)for(var c=0;c<i[0].length;c++){var u=i[0][c];if(!Ua[u])throw new Fo("Unknown accent ' "+u+"'",e);var h=Ua[u][this.mode]||Ua[u].text;if(!h)throw new Fo("Accent "+u+" unsupported in "+this.mode+" mode",e);o={type:"accent",mode:this.mode,loc:Fr.range(e),label:h,isStretchy:!1,isShifty:!0,base:o}}return o}}Uc.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var Uu=function(e,t){if(!("string"==typeof e||e instanceof String))throw TypeError("KaTeX can only parse string typed expression");var n=new Uc(e,t);delete n.gullet.macros.current["\\df@tag"];var r=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new Fo("\\tag works only in display equations");r=[{type:"tag",mode:"text",body:r,tag:n.subparse([new Fi("\\df@tag")])}]}return r},Uh=function(e,t,n){t.textContent="";var r=Uf(e,n).toNode();t.appendChild(r)};"u">typeof document&&"CSS1Compat"!==document.compatMode&&"u">typeof console&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype.");var Ud=function(e,t,n){if(n.throwOnError||!(e instanceof Fo))throw e;var r=QQ.makeSpan(["katex-error"],[new F0(t)]);return r.setAttribute("title",e.toString()),r.setAttribute("style","color:"+n.errorColor),r},Uf=function(e,t){var n=new Ff(t);try{var r=Uu(e,n);return Vw(r,e,n)}catch(t){return Ud(t,e,n)}},Up={renderToString:function(e,t){return Uf(e,t).toMarkup()}};let Um=(0,N.createContext)({apiEndpoint:"",user:null,projectName:"",reportId:"",token:"",multiTables:{},tables:{},images:{},analyses:[],executiveSummary:{title:"",introduction:"",recommendations:[]},isLoading:!1,setIsLoading:()=>{}});function Ug(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Uy(e,t){if(e){if("string"==typeof e)return Ug(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ug(e,t):void 0}}function Ub(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||Uy(e,t)||function(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var Uv={},Ux={};Object.defineProperty(Ux,"__esModule",{value:!0}),Ux.bind=void 0,Ux.bind=function(e,t){var n=t.type,r=t.listener,i=t.options;return e.addEventListener(n,r,i),function(){e.removeEventListener(n,r,i)}};var Uw={},Uk=_.w&&_.w.__assign||function(){return(Uk=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function UO(e){if(!(typeof e>"u"))return"boolean"==typeof e?{capture:e}:e}Object.defineProperty(Uw,"__esModule",{value:!0}),Uw.bindAll=void 0,Uw.bindAll=function(e,t,n){var r=t.map(function(t){var r=null==n?t:Uk(Uk({},t),{options:Uk(Uk({},UO(n)),UO(t.options))});return(0,Ux.bind)(e,r)});return function(){r.forEach(function(e){return e()})}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.bindAll=e.bind=void 0,Object.defineProperty(e,"bind",{enumerable:!0,get:function(){return Ux.bind}}),Object.defineProperty(e,"bindAll",{enumerable:!0,get:function(){return Uw.bindAll}})}(Uv);var US="data-pdnd-honey-pot";function UC(e){return e instanceof Element&&e.hasAttribute(US)}function UT(e){var t=Ub(document.elementsFromPoint(e.x,e.y),2),n=t[0],r=t[1];return n?UC(n)?r??null:n:null}function UA(e){return(UA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UE(e,t,n){var r;return(r=function(e,t){if("object"!=UA(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=UA(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==UA(r)?r:r+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function UN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UM(Object(n),!0).forEach(function(t){UE(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function U_(e){var t,n,r,i,o={x:Math.min((i={x:Math.max((r={x:(n={x:Math.floor((t=e.client).x),y:Math.floor(t.y)}).x-1,y:n.y-1}).x,0),y:Math.max(r.y,0)}).x,window.innerWidth-2),y:Math.min(i.y,window.innerHeight-2)};return DOMRect.fromRect({x:o.x,y:o.y,width:2,height:2})}function Uj(e){var t=e.clientRect;return{left:"".concat(t.left,"px"),top:"".concat(t.top,"px"),width:"".concat(t.width,"px"),height:"".concat(t.height,"px")}}function UD(e){return function(e){if(Array.isArray(e))return Ug(e)}(e)||function(e){if("u">typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Uy(e)||function(){throw TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function UP(e){var t=null;return function(){if(!t){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];t={result:e.apply(this,r)}}return t.result}}var UR=UP(function(){return navigator.userAgent.includes("Firefox")}),UI=UP(function(){var e=navigator.userAgent;return e.includes("AppleWebKit")&&!e.includes("Chrome")}),Uz={isLeavingWindow:Symbol("leaving"),isEnteringWindow:Symbol("entering")};function UL(e){return{altKey:e.altKey,button:e.button,buttons:e.buttons,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY}}!function(){if(!(typeof window>"u")&&UI()){var e=t();Uv.bindAll(window,[{type:"dragstart",listener:function(){e.enterCount=0,e.isOverWindow=!0}},{type:"drop",listener:n},{type:"dragend",listener:n},{type:"dragenter",listener:function(t){e.isOverWindow||0!==e.enterCount||(t[Uz.isEnteringWindow]=!0),e.isOverWindow=!0,e.enterCount++}},{type:"dragleave",listener:function(t){e.enterCount--,e.isOverWindow&&0===e.enterCount&&(t[Uz.isLeavingWindow]=!0,e.isOverWindow=!1)}}],{capture:!0})}function t(){return{enterCount:0,isOverWindow:!1}}function n(){e=t()}}();var Uq=function(e){var t=[],n=null,r=function(){for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];t=i,n||(n=requestAnimationFrame(function(){n=null,e.apply(void 0,t)}))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r}(function(e){return e()}),U$=function(){var e=null;return{schedule:function(t){e={frameId:requestAnimationFrame(function(){e=null,t()}),fn:t}},flush:function(){e&&(cancelAnimationFrame(e.frameId),e.fn(),e=null)}}}(),UB={isActive:!1};function UF(){return!UB.isActive}function UQ(e){var t,n=e.event,r=null===(t=e.current[0])||void 0===t?void 0:t.dropEffect;null!=r&&n.dataTransfer&&(n.dataTransfer.dropEffect=r)}var UV={canStart:UF,start:function(e){var t=e.event,n=e.dragType,r=e.getDropTargetsOver,i=e.dispatchEvent;if(UF()){var o,s,a=function(e){var t=e.event,n=e.dragType,r=e.getDropTargetsOver,i=UL(t);if("external"===n.startedFrom)return{input:i,dropTargets:[]};var o=r({input:i,source:n.payload,target:t.target,current:[]});return{input:i,dropTargets:o}}({event:t,dragType:n,getDropTargetsOver:r});UB.isActive=!0;var l={current:a};UQ({event:t,current:a.dropTargets});var c=function(e){var t=e.source,n=e.initial,r=e.dispatchEvent,i={dropTargets:[]};function o(e){r(e),i={dropTargets:e.payload.location.current.dropTargets}}return{start:function(e){var r=e.nativeSetDragImage,s={current:n,previous:i,initial:n};o({eventName:"onGenerateDragPreview",payload:{source:t,location:s,nativeSetDragImage:r}}),U$.schedule(function(){o({eventName:"onDragStart",payload:{source:t,location:s}})})},dragUpdate:function(e){var r=e.current;U$.flush(),Uq.cancel(),o({eventName:"onDropTargetChange",payload:{source:t,location:{initial:n,previous:i,current:r}}})},drag:function(e){var r=e.current;Uq(function(){U$.flush(),o({eventName:"onDrag",payload:{source:t,location:{initial:n,previous:i,current:r}}})})},drop:function(e){var r=e.current,s=e.updatedSourcePayload;U$.flush(),Uq.cancel(),o({eventName:"onDrop",payload:{source:s??t,location:{current:r,previous:i,initial:n}}})}}}({source:n.payload,dispatchEvent:i,initial:a}),u=Uv.bindAll(window,[{type:"dragover",listener:function(e){d(e),c.drag({current:l.current})}},{type:"dragenter",listener:d},{type:"dragleave",listener:function(e){(function(e){var t,n=e.dragLeave,r=n.type,i=n.relatedTarget;return"dragleave"===r&&(UI()?!!UI()&&n.hasOwnProperty(Uz.isLeavingWindow):null==i||(UR()?"nodeName"in(t=i)&&t.ownerDocument!==document:i instanceof HTMLIFrameElement))})({dragLeave:e})&&(h({input:l.current.input,dropTargets:[]}),"external"===n.startedFrom&&f())}},{type:"drop",listener:function(e){if(l.current={dropTargets:l.current.dropTargets,input:UL(e)},!l.current.dropTargets.length){f();return}e.preventDefault(),UQ({event:e,current:l.current.dropTargets}),c.drop({current:l.current,updatedSourcePayload:"external"===n.type?n.getDropPayload(e):null}),p()}},{type:"dragend",listener:function(e){l.current={dropTargets:l.current.dropTargets,input:UL(e)},f()}}].concat(UD([{type:"pointermove",listener:(s=0,function(){if(s<20){s++;return}o()})},{type:"pointerdown",listener:o=f}])),{capture:!0});c.start({nativeSetDragImage:t.dataTransfer?t.dataTransfer.setDragImage.bind(t.dataTransfer):null})}function h(e){var t=function(e){var t=e.current,n=e.next;if(t.length!==n.length)return!0;for(var r=0;r<t.length;r++)if(t[r].element!==n[r].element)return!0;return!1}({current:l.current.dropTargets,next:e.dropTargets});l.current=e,t&&c.dragUpdate({current:l.current})}function d(e){var t=UL(e),i=r({target:UC(e.target)?UT({x:t.clientX,y:t.clientY}):e.target,input:t,source:n.payload,current:l.current.dropTargets});i.length&&(e.preventDefault(),UQ({event:e,current:i})),h({dropTargets:i,input:t})}function f(){l.current.dropTargets.length&&h({dropTargets:[],input:l.current.input}),c.drop({current:l.current,updatedSourcePayload:null}),p()}function p(){UB.isActive=!1,u()}}},UH=new Map;function UU(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){t.forEach(function(e){return e()})}}function UW(e,t){var n=t.attribute,r=t.value;return e.setAttribute(n,r),function(){return e.removeAttribute(n)}}function UG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function UX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UG(Object(n),!0).forEach(function(t){UE(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UG(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function UY(e,t){var n="u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return UZ(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?UZ(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function UZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function UK(e){return e.slice(0).reverse()}function UJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function U0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var U1=UP(function(){return navigator.userAgent.toLocaleLowerCase().includes("android")}),U2="text/plain",U4=new WeakMap,U5=function(){var e=null;return{bindEvents:function(){return e=null,Uv.bind(window,{type:"pointermove",listener:function(t){e={x:t.clientX,y:t.clientY}},options:{capture:!0}})},getOnPostDispatch:function(){var t=null;return function(n){var r=n.eventName,i=n.payload;if("onDragStart"===r){var o,s,a,l,c=i.location.initial.input,u=null!==(l=e)&&void 0!==l?l:{x:c.clientX,y:c.clientY};(o=document.createElement("div")).setAttribute(US,"true"),s=U_({client:u}),Object.assign(o.style,UN(UN({backgroundColor:"transparent",position:"fixed",padding:0,margin:0,boxSizing:"border-box"},Uj({clientRect:s})),{},{pointerEvents:"auto",zIndex:0x7fffffff})),document.body.appendChild(o),a=Uv.bind(window,{type:"pointermove",listener:function(e){s=U_({client:{x:e.clientX,y:e.clientY}}),Object.assign(o.style,Uj({clientRect:s}))},options:{capture:!0}}),t=function(e){var t,n,r,i=e.current;if(a(),n=(t={client:i,clientRect:s}).client,r=t.clientRect,n.x>=r.x&&n.x<=r.x+r.width&&n.y>=r.y&&n.y<=r.y+r.height){o.remove();return}function l(){c(),o.remove()}var c=Uv.bindAll(window,[{type:"pointerdown",listener:l},{type:"pointermove",listener:l},{type:"focusin",listener:l},{type:"focusout",listener:l},{type:"dragstart",listener:l},{type:"dragenter",listener:l},{type:"dragover",listener:l}],{capture:!0})}}if("onDrop"===r){var h,d=i.location.current.input;null===(h=t)||void 0===h||h({current:{x:d.clientX,y:d.clientY}}),t=null,e=null}}}}}(),U3=function(e){var t=e.typeKey,n=e.mount,r=e.dispatchEventToSource,i=e.onPostDispatch,o=e.defaultDropEffect,s=function(){var e=new Set,t=null;function n(e){t&&(!e.canMonitor||e.canMonitor(t.canMonitorArgs))&&t.active.add(e)}return{dispatchEvent:function(r){var i=r.eventName,o=r.payload;if("onGenerateDragPreview"===i){t={canMonitorArgs:{initial:o.location.initial,source:o.source},active:new Set};var s,a=function(e,t){var n="u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return UJ(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?UJ(e,t):void 0}}(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}(e);try{for(a.s();!(s=a.n()).done;){var l=s.value;n(l)}}catch(e){a.e(e)}finally{a.f()}}if(t){for(var c=Array.from(t.active),u=0;u<c.length;u++){var h,d=c[u];t.active.has(d)&&(null===(h=d[i])||void 0===h||h.call(d,o))}"onDrop"===i&&(t.active.clear(),t=null)}},monitorForConsumers:function(r){var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U0(Object(n),!0).forEach(function(t){UE(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U0(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r);return e.add(i),n(i),function(){e.delete(i),t&&t.active.delete(i)}}}}(),a=function(e){var t=e.typeKey,n=e.defaultDropEffect,r=new WeakMap,i="data-drop-target-for-".concat(t),o="[".concat(i,"]");function s(e){var t,n=e.eventName,i=e.payload,o=UY(i.location.current.dropTargets);try{for(o.s();!(t=o.n()).done;){var s,a=t.value,l=r.get(a.element),c=UX(UX({},i),{},{self:a});null==l||null===(s=l[n])||void 0===s||s.call(l,c)}}catch(e){o.e(e)}finally{o.f()}}var a={onGenerateDragPreview:s,onDrag:s,onDragStart:s,onDrop:s,onDropTargetChange:function(e){var t,n=e.payload,i=new Set(n.location.current.dropTargets.map(function(e){return e.element})),o=new Set,s=UY(n.location.previous.dropTargets);try{for(s.s();!(t=s.n()).done;){var a,l,c=t.value;o.add(c.element);var u=r.get(c.element),h=i.has(c.element),d=UX(UX({},n),{},{self:c});null==u||null===(l=u.onDropTargetChange)||void 0===l||l.call(u,d),h||null==u||null===(a=u.onDragLeave)||void 0===a||a.call(u,d)}}catch(e){s.e(e)}finally{s.f()}var f,p=UY(n.location.current.dropTargets);try{for(p.s();!(f=p.n()).done;){var m,g,y=f.value;if(!o.has(y.element)){var b=UX(UX({},n),{},{self:y}),v=r.get(y.element);null==v||null===(m=v.onDropTargetChange)||void 0===m||m.call(v,b),null==v||null===(g=v.onDragEnter)||void 0===g||g.call(v,b)}}}catch(e){p.e(e)}finally{p.f()}}};return{dropTargetForConsumers:function(e){return UU(UW(e.element,{attribute:i,value:"true"}),(r.set(e.element,e),function(){return r.delete(e.element)}))},getIsOver:function(e){var t=e.source,i=e.target,s=e.input,a=e.current,l=function e(t){var i,s,a,l,c=t.source,u=t.target,h=t.input,d=t.result,f=void 0===d?[]:d;if(null==u)return f;if(!(u instanceof Element))return u instanceof Node?e({source:c,target:u.parentElement,input:h,result:f}):f;var p=u.closest(o);if(null==p)return f;var m=r.get(p);if(null==m)return f;var g={input:h,source:c,element:m.element};if(m.canDrop&&!m.canDrop(g))return e({source:c,target:m.element.parentElement,input:h,result:f});var y=null!==(i=null===(s=m.getData)||void 0===s?void 0:s.call(m,g))&&void 0!==i?i:{},b=null!==(a=null===(l=m.getDropEffect)||void 0===l?void 0:l.call(m,g))&&void 0!==a?a:n,v={data:y,element:m.element,dropEffect:b,isActiveDueToStickiness:!1};return e({source:c,target:m.element.parentElement,input:h,result:[].concat(UD(f),[v])})}({source:t,target:i,input:s});if(l.length>=a.length)return l;for(var c=UK(a),u=UK(l),h=[],d=0;d<c.length;d++){var f,p=c[d],m=u[d];if(null!=m){h.push(m);continue}var g=h[d-1],y=c[d-1];if((null==g?void 0:g.element)!==(null==y?void 0:y.element))break;var b=r.get(p.element);if(!b)break;var v={input:s,source:t,element:b.element};if(b.canDrop&&!b.canDrop(v)||!(null!==(f=b.getIsSticky)&&void 0!==f&&f.call(b,v)))break;h.push(UX(UX({},p),{},{isActiveDueToStickiness:!0}))}return UK(h)},dispatchEvent:function(e){a[e.eventName](e)}}}({typeKey:t,defaultDropEffect:o});function l(e){null==r||r(e),a.dispatchEvent(e),s.dispatchEvent(e),null==i||i(e)}function c(e){var t=e.event,n=e.dragType;UV.start({event:t,dragType:n,getDropTargetsOver:a.getIsOver,dispatchEvent:l})}return{registerUsage:function(){var e,r;return r=function(e){var t=e.typeKey,n=e.mount,r=UH.get(t);if(r)return r.usageCount++,r;var i={typeKey:t,unmount:n(),usageCount:1};return UH.set(t,i),i}(e={typeKey:t,mount:function(){return n({canStart:UV.canStart,start:c})}}),function(){r.usageCount--,r.usageCount>0||(r.unmount(),UH.delete(e.typeKey))}},dropTarget:a.dropTargetForConsumers,monitor:s.monitorForConsumers}}({typeKey:"element",defaultDropEffect:"move",mount:function(e){return UU(U5.bindEvents(),Uv.bind(document,{type:"dragstart",listener:function(t){var n,r,i,o,s,a;if(e.canStart(t)&&!t.defaultPrevented){if(!t.dataTransfer)return;var l=t.target;if(!(l instanceof HTMLElement))return null;var c=U4.get(l);if(!c)return null;var u=UL(t),h={element:c.element,dragHandle:null!==(n=c.dragHandle)&&void 0!==n?n:null,input:u};if(c.canDrag&&!c.canDrag(h))return t.preventDefault(),null;if(c.dragHandle){var d=UT({x:u.clientX,y:u.clientY});if(!c.dragHandle.contains(d))return t.preventDefault(),null}var f=null!==(r=null===(i=c.getInitialDataForExternal)||void 0===i?void 0:i.call(c,h))&&void 0!==r?r:null;if(f)for(var p=0,m=Object.entries(f);p<m.length;p++){var g=Ub(m[p],2),y=g[0],b=g[1];t.dataTransfer.setData(y,b??"")}!U1()||t.dataTransfer.types.includes(U2)||t.dataTransfer.types.includes("text/uri-list")||t.dataTransfer.setData(U2,"pdnd:android-fallback"),t.dataTransfer.setData("application/vnd.pdnd","");var v={element:c.element,dragHandle:null!==(o=c.dragHandle)&&void 0!==o?o:null,data:null!==(s=null===(a=c.getInitialData)||void 0===a?void 0:a.call(c,h))&&void 0!==s?s:{}};e.start({event:t,dragType:{type:"element",payload:v,startedFrom:"internal"}})}}}))},dispatchEventToSource:function(e){var t,n,r=e.eventName,i=e.payload;null===(t=U4.get(i.source.element))||void 0===t||null===(n=t[r])||void 0===n||n.call(t,i)},onPostDispatch:U5.getOnPostDispatch()}),U6=U3.dropTarget,U7=U3.monitor,U8={exports:{}},U9={},We={exports:{}},Wt={};(function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||"function"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}})(),U8.exports=function(){if(w)return U9;w=1;var e,t,n=(x||(x=1,v||(v=1,function(e){function t(e,t){var n=e.length;for(e.push(t);0<n;){var r=n-1>>>1,o=e[r];if(0<i(o,t))e[r]=t,e[n]=o,n=r;else break}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;for(var r=0,o=e.length,s=o>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>i(l,n))c<o&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else if(c<o&&0>i(u,n))e[r]=u,e[c]=n,r=c;else break}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var o,s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,v="u">typeof setImmediate?setImmediate:null;function x(e){for(var i=n(u);null!==i;){if(null===i.callback)r(u);else if(i.startTime<=e)r(u),i.sortIndex=i.expirationTime,t(c,i);else break;i=n(u)}}function w(e){if(g=!1,x(e),!m){if(null!==n(c))m=!0,N();else{var t=n(u);null!==t&&_(w,t.startTime-e)}}}var k=!1,O=-1,S=5,C=-1;function T(){return!(e.unstable_now()-C<S)}function A(){if(k){var t=e.unstable_now();C=t;var i=!0;try{e:{m=!1,g&&(g=!1,b(O),O=-1),p=!0;var s=f;try{t:{for(x(t),d=n(c);null!==d&&!(d.expirationTime>t&&T());){var a=d.callback;if("function"==typeof a){d.callback=null,f=d.priorityLevel;var l=a(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof l){d.callback=l,x(t),i=!0;break t}d===n(c)&&r(c),x(t)}else r(c);d=n(c)}if(null!==d)i=!0;else{var h=n(u);null!==h&&_(w,h.startTime-t),i=!1}}break e}finally{d=null,f=s,p=!1}i=void 0}}finally{i?o():k=!1}}}if("function"==typeof v)o=function(){v(A)};else if("u">typeof MessageChannel){var E=new MessageChannel,M=E.port2;E.port1.onmessage=A,o=function(){M.postMessage(null)}}else o=function(){y(A,0)};function N(){k||(k=!0,o())}function _(t,n){O=y(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,N())},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,i,o){var s=e.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?s+o:s,r){case 1:var a=-1;break;case 2:a=250;break;case 5:a=0x3fffffff;break;case 4:a=1e4;break;default:a=5e3}return a=o+a,r={id:h++,callback:i,priorityLevel:r,startTime:o,expirationTime:a,sortIndex:-1},o>s?(r.sortIndex=o,t(u,r),null===n(c)&&r===n(u)&&(g?(b(O),O=-1):g=!0,_(w,o-s))):(r.sortIndex=a,t(c,r),m||p||(m=!0,N())),r},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}}(Wt)),We.exports=Wt),We.exports);function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}var o=Symbol.for("react.element"),s=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),k=Symbol.for("react.offscreen"),O=Symbol.for("react.memo_cache_sentinel"),S=Symbol.iterator;function C(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=S&&e[S]||e["@@iterator"])?e:null}var T,A,E=Symbol.for("react.client.reference"),M=N.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_=Object.assign;function P(e){if(void 0===T)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);T=t&&t[1]||"",A=-1<e.stack.indexOf(`
    at`)?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return`
`+T+e+A}var R=!1;function I(e,t){if(!e||R)return"";R=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(e){if(e&&r&&"string"==typeof e.stack)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=r.DetermineComponentFrameRoot(),s=o[0],a=o[1];if(s&&a){var l=s.split(`
`),c=a.split(`
`);for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do if(r--,i--,0>i||l[r]!==c[i]){var u=`
`+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=r&&0<=i);break}}}finally{R=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?P(n):""}function z(e){try{var t="";do t+=function(e){switch(e.tag){case 26:case 27:case 5:return P(e.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 15:return e=I(e.type,!1);case 11:return e=I(e.type.render,!1);case 1:return e=I(e.type,!0);default:return""}}(e),e=e.return;while(e);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}function L(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do 4098&(t=e).flags&&(n=t.return),e=t.return;while(e)}return 3===t.tag?n:null}function q(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function $(e){if(L(e)!==e)throw Error(r(188))}var B=Array.isArray,F=j.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},V=[],H=-1;function U(e){return{current:e}}function W(e){0>H||(e.current=V[H],V[H]=null,H--)}function G(e,t){V[++H]=e.current,e.current=t}var X=U(null),Y=U(null),Z=U(null),K=U(null);function J(e,t){switch(G(Z,t),G(Y,e),G(X,null),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?l9(t):0;break;default:if(t=(e=8===e?t.parentNode:t).tagName,e=e.namespaceURI)t=ce(e=l9(e),t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}W(X),G(X,t)}function ee(){W(X),W(Y),W(Z)}function et(e){null!==e.memoizedState&&G(K,e);var t=X.current,n=ce(t,e.type);t!==n&&(G(Y,e),G(X,n))}function en(e){Y.current===e&&(W(X),W(Y)),K.current===e&&(W(K),cq._currentValue=Q)}var er=Object.prototype.hasOwnProperty,ei=n.unstable_scheduleCallback,eo=n.unstable_cancelCallback,es=n.unstable_shouldYield,ea=n.unstable_requestPaint,el=n.unstable_now,ec=n.unstable_getCurrentPriorityLevel,eu=n.unstable_ImmediatePriority,eh=n.unstable_UserBlockingPriority,ed=n.unstable_NormalPriority,ef=n.unstable_LowPriority,ep=n.unstable_IdlePriority,em=n.log,eg=n.unstable_setDisableYieldValue,ey=null,eb=null;function ev(e){if("function"==typeof em&&eg(e),eb&&"function"==typeof eb.setStrictMode)try{eb.setStrictMode(ey,e)}catch{}}var ex=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(ew(e)/ek|0)|0},ew=Math.log,ek=Math.LN2,eO=128,eS=4194304;function eC(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 0x1000000:case 0x2000000:return 0x3c00000&e;case 0x4000000:return 0x4000000;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0;default:return e}}function eT(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=e.warmLanes;e=0!==e.finishedLanes;var a=0x7ffffff&n;return 0!==a?0!=(n=a&~i)?r=eC(n):0!=(o&=a)?r=eC(o):e||0!=(s=a&~s)&&(r=eC(s)):0!=(a=n&~i)?r=eC(a):0!==o?r=eC(o):e||0!=(s=n&~s)&&(r=eC(s)),0===r?0:0!==t&&t!==r&&!(t&i)&&((i=r&-r)>=(s=t&-t)||32===i&&(4194176&s)!=0)?t:r}function eA(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)==0}function eE(){var e=eO;return 4194176&(eO<<=1)||(eO=128),e}function eM(){var e=eS;return 0x3c00000&(eS<<=1)||(eS=4194304),e}function eN(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function e_(e,t){e.pendingLanes|=t,0x10000000!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ej(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-ex(t);e.entangledLanes|=t,e.entanglements[r]=0x40000000|e.entanglements[r]|4194218&n}function eD(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ex(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function eP(e){return 2<(e&=-e)?8<e?0x7ffffff&e?32:0x10000000:8:2}function eR(){var e=F.p;return 0!==e?e:void 0===(e=window.event)?32:cJ(e.type)}var eI=Math.random().toString(36).slice(2),ez="__reactFiber$"+eI,eL="__reactProps$"+eI,eq="__reactContainer$"+eI,e$="__reactEvents$"+eI,eB="__reactListeners$"+eI,eF="__reactHandles$"+eI,eQ="__reactResources$"+eI,eV="__reactMarker$"+eI;function eH(e){delete e[ez],delete e[eL],delete e[e$],delete e[eB],delete e[eF]}function eU(e){var t=e[ez];if(t)return t;for(var n=e.parentNode;n;){if(t=n[eq]||n[ez]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ch(e);null!==e;){if(n=e[ez])return n;e=ch(e)}return t}n=(e=n).parentNode}return null}function eW(e){if(e=e[ez]||e[eq]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function eG(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(r(33))}function eX(e){var t=e[eQ];return t||(t=e[eQ]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function eY(e){e[eV]=!0}var eZ=new Set,eK={};function eJ(e,t){e0(e,t),e0(e+"Capture",t)}function e0(e,t){for(eK[e]=t,e=0;e<t.length;e++)eZ.add(t[e])}var e1=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),e2=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),e4={},e5={};function e3(e,t,n){if(er.call(e5,t)||!er.call(e4,t)&&(e2.test(t)?e5[t]=!0:(e4[t]=!0,!1))){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}}function e6(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function e7(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+r)}}function e8(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function e9(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function te(e){e._valueTracker||(e._valueTracker=function(e){var t=e9(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"u">typeof n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function tt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=e9(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function tn(e){if(typeof(e=e||("u">typeof document?document:void 0))>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var tr=/[\n"\\]/g;function ti(e){return e.replace(tr,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function to(e,t,n,r,i,o,s,a){e.name="",null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+e8(t)):e.value!==""+e8(t)&&(e.value=""+e8(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?ta(e,s,e8(t)):null!=n?ta(e,s,e8(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=o&&(e.defaultChecked=!!o),null!=i&&(e.checked=i&&"function"!=typeof i&&"symbol"!=typeof i),null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a?e.name=""+e8(a):e.removeAttribute("name")}function ts(e,t,n,r,i,o,s,a){if(null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o&&(e.type=o),null!=t||null!=n){if(("submit"===o||"reset"===o)&&null==t)return;n=null!=n?""+e8(n):"",t=null!=t?""+e8(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=r??i)&&"symbol"!=typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s&&(e.name=s)}function ta(e,t,n){"number"===t&&tn(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function tl(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+e8(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function tc(e,t,n){if(null!=t&&((t=""+e8(t))!==e.value&&(e.value=t),null==n)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=null!=n?""+e8(n):""}function tu(e,t,n,i){if(null==t){if(null!=i){if(null!=n)throw Error(r(92));if(B(i)){if(1<i.length)throw Error(r(93));i=i[0]}n=i}null==n&&(n=""),t=n}e.defaultValue=n=e8(t),(i=e.textContent)===n&&""!==i&&null!==i&&(e.value=i)}function th(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType){n.nodeValue=t;return}}e.textContent=t}var td=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tf(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||td.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function tp(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(r(62));if(e=e.style,null!=n){for(var i in n)!n.hasOwnProperty(i)||null!=t&&t.hasOwnProperty(i)||(0===i.indexOf("--")?e.setProperty(i,""):"float"===i?e.cssFloat="":e[i]="");for(var o in t)i=t[o],t.hasOwnProperty(o)&&n[o]!==i&&tf(e,o,i)}else for(var s in t)t.hasOwnProperty(s)&&tf(e,s,t[s])}function tm(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ty=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tb(e){return ty.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var tv=null;function tx(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var tw=null,tk=null;function tO(e){var t=eW(e);if(t&&(e=t.stateNode)){var n=e[eL]||null;switch(e=t.stateNode,t.type){case"input":if(to(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ti(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=i[eL]||null;if(!o)throw Error(r(90));to(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)(i=n[t]).form===e.form&&tt(i)}break;case"textarea":tc(e,n.value,n.defaultValue);break;case"select":null!=(t=n.value)&&tl(e,!!n.multiple,t,!1)}}}var tS=!1;function tC(e,t,n){if(tS)return e(t,n);tS=!0;try{return e(t)}finally{if(tS=!1,(null!==tw||null!==tk)&&(a9(),tw&&(t=tw,e=tk,tk=tw=null,tO(t),e)))for(t=0;t<e.length;t++)tO(e[t])}}function tT(e,t){var n=e.stateNode;if(null===n)return null;var i=n[eL]||null;if(null===i)return null;switch(n=i[t],t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i="button"!==(e=e.type)&&"input"!==e&&"select"!==e&&"textarea"!==e),e=!i;break;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(r(231,t,typeof n));return n}var tA=!1;if(e1)try{var tE={};Object.defineProperty(tE,"passive",{get:function(){tA=!0}}),window.addEventListener("test",tE,tE),window.removeEventListener("test",tE,tE)}catch{tA=!1}var tM=null,tN=null,t_=null;function tj(){if(t_)return t_;var e,t,n=tN,r=n.length,i="value"in tM?tM.value:tM.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return t_=i.slice(e,1<t?1-t:void 0)}function tD(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tP(){return!0}function tR(){return!1}function tI(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?tP:tR,this.isPropagationStopped=tR,this}return _(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tP)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tP)},persist:function(){},isPersistent:tP}),t}var tz,tL,tq,t$={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tB=tI(t$),tF=_({},t$,{view:0,detail:0}),tQ=tI(tF),tV=_({},tF,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:t1,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==tq&&(tq&&"mousemove"===e.type?(tz=e.screenX-tq.screenX,tL=e.screenY-tq.screenY):tL=tz=0,tq=e),tz)},movementY:function(e){return"movementY"in e?e.movementY:tL}}),tH=tI(tV),tU=tI(_({},tV,{dataTransfer:0})),tW=tI(_({},tF,{relatedTarget:0})),tG=tI(_({},t$,{animationName:0,elapsedTime:0,pseudoElement:0})),tX=tI(_({},t$,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),tY=tI(_({},t$,{data:0})),tZ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tK={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tJ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=tJ[e])&&!!t[e]}function t1(){return t0}var t2=tI(_({},tF,{key:function(e){if(e.key){var t=tZ[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tD(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?tK[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:t1,charCode:function(e){return"keypress"===e.type?tD(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tD(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),t4=tI(_({},tV,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),t5=tI(_({},tF,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:t1})),t3=tI(_({},t$,{propertyName:0,elapsedTime:0,pseudoElement:0})),t6=tI(_({},tV,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),t7=tI(_({},t$,{newState:0,oldState:0})),t8=[9,13,27,32],t9=e1&&"CompositionEvent"in window,ne=null;e1&&"documentMode"in document&&(ne=document.documentMode);var nt=e1&&"TextEvent"in window&&!ne,nn=e1&&(!t9||ne&&8<ne&&11>=ne),nr=!1;function ni(e,t){switch(e){case"keyup":return -1!==t8.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function no(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var ns=!1,na={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!na[e.type]:"textarea"===t}function nc(e,t,n,r){tw?tk?tk.push(r):tk=[r]:tw=r,0<(t=lX(t,"onChange")).length&&(n=new tB("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var nu=null,nh=null;function nd(e){lB(e,0)}function nf(e){if(tt(eG(e)))return e}function np(e,t){if("change"===e)return t}var nm=!1;if(e1){if(e1){var ng="oninput"in document;if(!ng){var ny=document.createElement("div");ny.setAttribute("oninput","return;"),ng="function"==typeof ny.oninput}e=ng}else e=!1;nm=e&&(!document.documentMode||9<document.documentMode)}function nb(){nu&&(nu.detachEvent("onpropertychange",nv),nh=nu=null)}function nv(e){if("value"===e.propertyName&&nf(nh)){var t=[];nc(t,nh,e,tx(e)),tC(nd,t)}}function nx(e,t,n){"focusin"===e?(nb(),nu=t,nh=n,nu.attachEvent("onpropertychange",nv)):"focusout"===e&&nb()}function nw(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return nf(nh)}function nk(e,t){if("click"===e)return nf(t)}function nO(e,t){if("input"===e||"change"===e)return nf(t)}var nS="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function nC(e,t){if(nS(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!er.call(t,i)||!nS(e[i],t[i]))return!1}return!0}function nT(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nA(e,t){var n,r=nT(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=nT(r)}}function nE(e){e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;for(var t=tn(e.document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch{n=!1}if(n)e=t.contentWindow;else break;t=tn(e.document)}return t}function nM(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nN=e1&&"documentMode"in document&&11>=document.documentMode,n_=null,nj=null,nD=null,nP=!1;function nR(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;nP||null==n_||n_!==tn(r)||(r="selectionStart"in(r=n_)&&nM(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},nD&&nC(nD,r)||(nD=r,0<(r=lX(nj,"onSelect")).length&&(t=new tB("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=n_)))}function nI(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var nz={animationend:nI("Animation","AnimationEnd"),animationiteration:nI("Animation","AnimationIteration"),animationstart:nI("Animation","AnimationStart"),transitionrun:nI("Transition","TransitionRun"),transitionstart:nI("Transition","TransitionStart"),transitioncancel:nI("Transition","TransitionCancel"),transitionend:nI("Transition","TransitionEnd")},nL={},nq={};function n$(e){if(nL[e])return nL[e];if(!nz[e])return e;var t,n=nz[e];for(t in n)if(n.hasOwnProperty(t)&&t in nq)return nL[e]=n[t];return e}e1&&(nq=document.createElement("div").style,"AnimationEvent"in window||(delete nz.animationend.animation,delete nz.animationiteration.animation,delete nz.animationstart.animation),"TransitionEvent"in window||delete nz.transitionend.transition);var nB=n$("animationend"),nF=n$("animationiteration"),nQ=n$("animationstart"),nV=n$("transitionrun"),nH=n$("transitionstart"),nU=n$("transitioncancel"),nW=n$("transitionend"),nG=new Map,nX="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function nY(e,t){nG.set(e,t),eJ(t,[e])}var nZ=[],nK=0,nJ=0;function n0(){for(var e=nK,t=nJ=nK=0;t<e;){var n=nZ[t];nZ[t++]=null;var r=nZ[t];nZ[t++]=null;var i=nZ[t];nZ[t++]=null;var o=nZ[t];if(nZ[t++]=null,null!==r&&null!==i){var s=r.pending;null===s?i.next=i:(i.next=s.next,s.next=i),r.pending=i}0!==o&&n5(n,i,o)}}function n1(e,t,n,r){nZ[nK++]=e,nZ[nK++]=t,nZ[nK++]=n,nZ[nK++]=r,nJ|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function n2(e,t,n,r){return n1(e,t,n,r),n3(e)}function n4(e,t){return n1(e,null,null,t),n3(e)}function n5(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(r=o.alternate)&&(r.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(i=!0)),e=o,o=o.return;i&&null!==t&&3===e.tag&&(o=e.stateNode,i=31-ex(n),null===(e=(o=o.hiddenUpdates)[i])?o[i]=[t]:e.push(t),t.lane=0x20000000|n)}function n3(e){if(50<a0)throw a0=0,a1=null,Error(r(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var n6={},n7=new WeakMap;function n8(e,t){if("object"==typeof e&&null!==e){var n=n7.get(e);return void 0!==n?n:(t={value:e,source:t,stack:z(t)},n7.set(e,t),t)}return{value:e,source:t,stack:z(t)}}var n9=[],re=0,rt=null,rn=0,rr=[],ri=0,ro=null,rs=1,ra="";function rl(e,t){n9[re++]=rn,n9[re++]=rt,rt=e,rn=t}function rc(e,t,n){rr[ri++]=rs,rr[ri++]=ra,rr[ri++]=ro,ro=e;var r=rs;e=ra;var i=32-ex(r)-1;r&=~(1<<i),n+=1;var o=32-ex(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,rs=1<<32-ex(t)+i|n<<i|r,ra=o+e}else rs=1<<o|n<<i|r,ra=e}function ru(e){null!==e.return&&(rl(e,1),rc(e,1,0))}function rh(e){for(;e===rt;)rt=n9[--re],n9[re]=null,rn=n9[--re],n9[re]=null;for(;e===ro;)ro=rr[--ri],rr[ri]=null,ra=rr[--ri],rr[ri]=null,rs=rr[--ri],rr[ri]=null}var rd=null,rf=null,rp=!1,rm=null,rg=!1,ry=Error(r(519));function rb(e){throw rO(n8(Error(r(418,"")),e)),ry}function rv(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[ez]=e,t[eL]=r,n){case"dialog":lF("cancel",t),lF("close",t);break;case"iframe":case"object":case"embed":lF("load",t);break;case"video":case"audio":for(n=0;n<lq.length;n++)lF(lq[n],t);break;case"source":lF("error",t);break;case"img":case"image":case"link":lF("error",t),lF("load",t);break;case"details":lF("toggle",t);break;case"input":lF("invalid",t),ts(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),te(t);break;case"select":lF("invalid",t);break;case"textarea":lF("invalid",t),tu(t,r.value,r.defaultValue,r.children),te(t)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||l1(t.textContent,n)?(null!=r.popover&&(lF("beforetoggle",t),lF("toggle",t)),null!=r.onScroll&&lF("scroll",t),null!=r.onScrollEnd&&lF("scrollend",t),null!=r.onClick&&(t.onclick=l2),t=!0):t=!1,t||rb(e)}function rx(e){for(rd=e.return;rd;)switch(rd.tag){case 3:case 27:rg=!0;return;case 5:case 13:rg=!1;return;default:rd=rd.return}}function rw(e){if(e!==rd)return!1;if(!rp)return rx(e),rp=!0,!1;var t,n=!1;if((t=3!==e.tag&&27!==e.tag)&&((t=5===e.tag)&&(t="form"===(t=e.type)||"button"===t||ct(e.type,e.memoizedProps)),t=!t),t&&(n=!0),n&&rf&&rb(e),rx(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType){if("/$"===(t=e.data)){if(0===n){rf=cu(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++}e=e.nextSibling}rf=null}}else rf=rd?cu(e.stateNode.nextSibling):null;return!0}function rk(){rf=rd=null,rp=!1}function rO(e){null===rm?rm=[e]:rm.push(e)}var rS=Error(r(460)),rC=Error(r(474)),rT={then:function(){}};function rA(e){return"fulfilled"===(e=e.status)||"rejected"===e}function rE(){}function rM(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(rE,rE),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw(e=t.reason)===rS?Error(r(483)):e;default:if("string"==typeof t.status)t.then(rE,rE);else{if(null!==(e=aA)&&100<e.shellSuspendCounter)throw Error(r(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw(e=t.reason)===rS?Error(r(483)):e}throw rN=t,rS}}var rN=null;function r_(){if(null===rN)throw Error(r(459));var e=rN;return rN=null,e}var rj=null,rD=0;function rP(e){var t=rD;return rD+=1,null===rj&&(rj=[]),rM(rj,e,t)}function rR(e,t){e.ref=void 0!==(t=t.props.ref)?t:null}function rI(e,t){throw t.$$typeof===o?Error(r(525)):Error(r(31,"[object Object]"===(e=Object.prototype.toString.call(t))?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rz(e){return(0,e._init)(e._payload)}function rL(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function i(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(e,t){return(e=ah(e,t)).index=0,e.sibling=null,e}function c(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=0x2000002,n):r:(t.flags|=0x2000002,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=0x2000002),t}function h(e,t,n,r){return null===t||6!==t.tag?(t=ag(n,e.mode,r)).return=e:(t=o(t,n)).return=e,t}function d(e,t,n,r){var i=n.type;return i===l?m(e,t,n.props.children,r,n.key):(null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===b&&rz(i)===t.type)?rR(t=o(t,n.props),n):rR(t=af(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function p(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=ay(n,e.mode,r)).return=e:(t=o(t,n.children||[])).return=e,t}function m(e,t,n,r,i){return null===t||7!==t.tag?(t=ap(n,e.mode,r,i)).return=e:(t=o(t,n)).return=e,t}function g(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=ag(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case s:return rR(n=af(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case a:return(t=ay(t,e.mode,n)).return=e,t;case b:return g(e,t=(0,t._init)(t._payload),n)}if(B(t)||C(t))return(t=ap(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return g(e,rP(t),n);if(t.$$typeof===f)return g(e,sy(e,t),n);rI(e,t)}return null}function y(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==i?null:h(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case s:return n.key===i?d(e,t,n,r):null;case a:return n.key===i?p(e,t,n,r):null;case b:return y(e,t,n=(i=n._init)(n._payload),r)}if(B(n)||C(n))return null!==i?null:m(e,t,n,r,null);if("function"==typeof n.then)return y(e,t,rP(n),r);if(n.$$typeof===f)return y(e,t,sy(e,n),r);rI(e,n)}return null}function v(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return h(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case s:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case a:return p(t,e=e.get(null===r.key?n:r.key)||null,r,i);case b:return v(e,t,n,r=(0,r._init)(r._payload),i)}if(B(r)||C(r))return m(t,e=e.get(n)||null,r,i,null);if("function"==typeof r.then)return v(e,t,n,rP(r),i);if(r.$$typeof===f)return v(e,t,n,sy(t,r),i);rI(t,r)}return null}return function(h,d,p,m){try{rD=0;var x=function h(d,p,m,x){if("object"==typeof m&&null!==m&&m.type===l&&null===m.key&&(m=m.props.children),"object"==typeof m&&null!==m){switch(m.$$typeof){case s:e:{for(var w=m.key;null!==p;){if(p.key===w){if((w=m.type)===l){if(7===p.tag){n(d,p.sibling),(x=o(p,m.props.children)).return=d,d=x;break e}}else if(p.elementType===w||"object"==typeof w&&null!==w&&w.$$typeof===b&&rz(w)===p.type){n(d,p.sibling),rR(x=o(p,m.props),m),x.return=d,d=x;break e}n(d,p);break}t(d,p),p=p.sibling}m.type===l?(x=ap(m.props.children,d.mode,x,m.key)).return=d:(rR(x=af(m.type,m.key,m.props,null,d.mode,x),m),x.return=d),d=x}return u(d);case a:e:{for(w=m.key;null!==p;){if(p.key===w){if(4===p.tag&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){n(d,p.sibling),(x=o(p,m.children||[])).return=d,d=x;break e}n(d,p);break}t(d,p),p=p.sibling}(x=ay(m,d.mode,x)).return=d,d=x}return u(d);case b:return h(d,p,m=(w=m._init)(m._payload),x)}if(B(m))return function(r,o,s,a){for(var l=null,u=null,h=o,d=o=0,f=null;null!==h&&d<s.length;d++){h.index>d?(f=h,h=null):f=h.sibling;var p=y(r,h,s[d],a);if(null===p){null===h&&(h=f);break}e&&h&&null===p.alternate&&t(r,h),o=c(p,o,d),null===u?l=p:u.sibling=p,u=p,h=f}if(d===s.length)return n(r,h),rp&&rl(r,d),l;if(null===h){for(;d<s.length;d++)null!==(h=g(r,s[d],a))&&(o=c(h,o,d),null===u?l=h:u.sibling=h,u=h);return rp&&rl(r,d),l}for(h=i(h);d<s.length;d++)null!==(f=v(h,r,d,s[d],a))&&(e&&null!==f.alternate&&h.delete(null===f.key?d:f.key),o=c(f,o,d),null===u?l=f:u.sibling=f,u=f);return e&&h.forEach(function(e){return t(r,e)}),rp&&rl(r,d),l}(d,p,m,x);if(C(m)){if("function"!=typeof(w=C(m)))throw Error(r(150));return function(o,s,a,l){if(null==a)throw Error(r(151));for(var u=null,h=null,d=s,f=s=0,p=null,m=a.next();null!==d&&!m.done;f++,m=a.next()){d.index>f?(p=d,d=null):p=d.sibling;var b=y(o,d,m.value,l);if(null===b){null===d&&(d=p);break}e&&d&&null===b.alternate&&t(o,d),s=c(b,s,f),null===h?u=b:h.sibling=b,h=b,d=p}if(m.done)return n(o,d),rp&&rl(o,f),u;if(null===d){for(;!m.done;f++,m=a.next())null!==(m=g(o,m.value,l))&&(s=c(m,s,f),null===h?u=m:h.sibling=m,h=m);return rp&&rl(o,f),u}for(d=i(d);!m.done;f++,m=a.next())null!==(m=v(d,o,f,m.value,l))&&(e&&null!==m.alternate&&d.delete(null===m.key?f:m.key),s=c(m,s,f),null===h?u=m:h.sibling=m,h=m);return e&&d.forEach(function(e){return t(o,e)}),rp&&rl(o,f),u}(d,p,m=w.call(m),x)}if("function"==typeof m.then)return h(d,p,rP(m),x);if(m.$$typeof===f)return h(d,p,sy(d,m),x);rI(d,m)}return"string"==typeof m&&""!==m||"number"==typeof m||"bigint"==typeof m?(m=""+m,null!==p&&6===p.tag?(n(d,p.sibling),(x=o(p,m)).return=d):(n(d,p),(x=ag(m,d.mode,x)).return=d),u(d=x)):n(d,p)}(h,d,p,m);return rj=null,x}catch(e){if(e===rS)throw e;var w=ac(29,e,null,h.mode);return w.lanes=m,w.return=h,w}finally{}}}var rq=rL(!0),r$=rL(!1),rB=U(null),rF=U(0);function rQ(e,t){G(rF,e=aR),G(rB,t),aR=e|t.baseLanes}function rV(){G(rF,aR),G(rB,rB.current)}function rH(){aR=rF.current,W(rB),W(rF)}var rU=U(null),rW=null;function rG(e){var t=e.alternate;G(rK,1&rK.current),G(rU,e),null===rW&&(null===t||null!==rB.current||null!==t.memoizedState)&&(rW=e)}function rX(e){if(22===e.tag){if(G(rK,rK.current),G(rU,e),null===rW){var t=e.alternate;null!==t&&null!==t.memoizedState&&(rW=e)}}else rY()}function rY(){G(rK,rK.current),G(rU,rU.current)}function rZ(e){W(rU),rW===e&&(rW=null),W(rK)}var rK=U(0);function rJ(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var r0="u">typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},r1=n.unstable_scheduleCallback,r2=n.unstable_NormalPriority,r4={$$typeof:f,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function r5(){return{controller:new r0,data:new Map,refCount:0}}function r3(e){e.refCount--,0===e.refCount&&r1(r2,function(){e.controller.abort()})}var r6=null,r7=0,r8=0,r9=null;function ie(){if(0==--r7&&null!==r6){null!==r9&&(r9.status="fulfilled");var e=r6;r6=null,r8=0,r9=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var ir=M.S;M.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===r6){var n=r6=[];r7=0,r8=lP(),r9={status:"pending",value:void 0,then:function(e){n.push(e)}}}r7++,t.then(ie,ie)}(0,t),null!==ir&&ir(e,t)};var ii=U(null);function io(){var e=ii.current;return null!==e?e:aA.pooledCache}function is(e,t){null===t?G(ii,ii.current):G(ii,t.pool)}function ia(){var e=io();return null===e?null:{parent:r4._currentValue,pool:e}}var il=0,ic=null,iu=null,ih=null,id=!1,ip=!1,im=!1,ig=0,iy=0,ib=null,iv=0;function ix(){throw Error(r(321))}function iw(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!nS(e[n],t[n]))return!1;return!0}function ik(e,t,n,r,i,o){return il=o,ic=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,M.H=null===e||null===e.memoizedState?oA:oE,im=!1,o=n(r,i),im=!1,ip&&(o=iS(t,n,r,i)),iO(e),o}function iO(e){M.H=oT;var t=null!==iu&&null!==iu.next;if(il=0,ih=iu=ic=null,id=!1,iy=0,ib=null,t)throw Error(r(300));null===e||oH||null!==(e=e.dependencies)&&sp(e)&&(oH=!0)}function iS(e,t,n,i){ic=e;var o=0;do{if(ip&&(ib=null),iy=0,ip=!1,25<=o)throw Error(r(301));if(o+=1,ih=iu=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}M.H=oM,s=t(n,i)}while(ip);return s}function iC(){var e=M.H,t=e.useState()[0];return t="function"==typeof t.then?i_(t):t,e=e.useState()[0],(null!==iu?iu.memoizedState:null)!==e&&(ic.flags|=1024),t}function iT(){var e=0!==ig;return ig=0,e}function iA(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function iE(e){if(id){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}id=!1}il=0,ih=iu=ic=null,ip=!1,iy=ig=0,ib=null}function iM(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ih?ic.memoizedState=ih=e:ih=ih.next=e,ih}function iN(){if(null===iu){var e=ic.alternate;e=null!==e?e.memoizedState:null}else e=iu.next;var t=null===ih?ic.memoizedState:ih.next;if(null!==t)ih=t,iu=e;else{if(null===e)throw null===ic.alternate?Error(r(467)):Error(r(310));e={memoizedState:(iu=e).memoizedState,baseState:iu.baseState,baseQueue:iu.baseQueue,queue:iu.queue,next:null},null===ih?ic.memoizedState=ih=e:ih=ih.next=e}return ih}function i_(e){var t=iy;return iy+=1,null===ib&&(ib=[]),e=rM(ib,e,t),t=ic,(null===ih?t.memoizedState:ih.next)===null&&(M.H=null===(t=t.alternate)||null===t.memoizedState?oA:oE),e}function ij(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return i_(e);if(e.$$typeof===f)return sg(e)}throw Error(r(438,String(e)))}function iD(e){var n=null,r=ic.updateQueue;if(null!==r&&(n=r.memoCache),null==n){var i=ic.alternate;null!==i&&null!==(i=i.updateQueue)&&null!=(i=i.memoCache)&&(n={data:i.data.map(function(e){return e.slice()}),index:0})}if(null==n&&(n={data:[],index:0}),null===r&&(r=t(),ic.updateQueue=r),r.memoCache=n,void 0===(r=n.data[n.index]))for(r=n.data[n.index]=Array(e),i=0;i<e;i++)r[i]=O;return n.index++,r}function iP(e,t){return"function"==typeof t?t(e):t}function iR(e){return iI(iN(),iu,e)}function iI(e,t,n){var i=e.queue;if(null===i)throw Error(r(311));i.lastRenderedReducer=n;var o=e.baseQueue,s=i.pending;if(null!==s){if(null!==o){var a=o.next;o.next=s.next,s.next=a}t.baseQueue=o=s,i.pending=null}if(s=e.baseState,null===o)e.memoizedState=s;else{t=o.next;var l=a=null,c=null,u=t,h=!1;do{var d=-0x20000001&u.lane;if(d!==u.lane?(aM&d)===d:(il&d)===d){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===r8&&(h=!0);else if((il&f)===f){u=u.next,f===r8&&(h=!0);continue}else d={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=d,a=s):c=c.next=d,ic.lanes|=f,az|=f;d=u.action,im&&n(s,d),s=u.hasEagerState?u.eagerState:n(s,d)}else f={lane:d,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,a=s):c=c.next=f,ic.lanes|=d,az|=d;u=u.next}while(null!==u&&u!==t);if(null===c?a=s:c.next=l,!nS(s,e.memoizedState)&&(oH=!0,h&&null!==(n=r9)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=c,i.lastRenderedState=s}return null===o&&(i.lanes=0),[e.memoizedState,i.dispatch]}function iz(e){var t=iN(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=n.dispatch,o=n.pending,s=t.memoizedState;if(null!==o){n.pending=null;var a=o=o.next;do s=e(s,a.action),a=a.next;while(a!==o);nS(s,t.memoizedState)||(oH=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function iL(e,t,n){var i=ic,o=iN(),s=rp;if(s){if(void 0===n)throw Error(r(407));n=n()}else n=t();var a=!nS((iu||o).memoizedState,n);if(a&&(o.memoizedState=n,oH=!0),o=o.queue,i9(iB.bind(null,i,o,e),[e]),o.getSnapshot!==t||a||null!==ih&&1&ih.memoizedState.tag){if(i.flags|=2048,i5(9,i$.bind(null,i,o,n,t),{destroy:void 0},null),null===aA)throw Error(r(349));s||60&il||iq(i,t,n)}return n}function iq(e,n,r){e.flags|=16384,e={getSnapshot:n,value:r},null===(n=ic.updateQueue)?(n=t(),ic.updateQueue=n,n.stores=[e]):null===(r=n.stores)?n.stores=[e]:r.push(e)}function i$(e,t,n,r){t.value=n,t.getSnapshot=r,iF(t)&&iQ(e)}function iB(e,t,n){return n(function(){iF(t)&&iQ(e)})}function iF(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!nS(e,n)}catch{return!0}}function iQ(e){var t=n4(e,2);null!==t&&a5(t,e,2)}function iV(e){var t=iM();if("function"==typeof e){var n=e;if(e=n(),im){ev(!0);try{n()}finally{ev(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:iP,lastRenderedState:e},t}function iH(e,t,n,r){return e.baseState=n,iI(e,iu,"function"==typeof r?r:iP)}function iU(e,t,n,i,o){if(oO(e))throw Error(r(485));if(null!==(e=t.action)){var s={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==M.T?n(!0):s.isTransition=!1,i(s),null===(n=t.pending)?(s.next=t.pending=s,iW(t,s)):(s.next=n.next,t.pending=n.next=s)}}function iW(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var o=M.T,s={};M.T=s;try{var a=n(i,r),l=M.S;null!==l&&l(s,a),iG(e,t,a)}catch(n){iY(e,t,n)}finally{M.T=o}}else try{o=n(i,r),iG(e,t,o)}catch(n){iY(e,t,n)}}function iG(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){iX(e,t,n)},function(n){return iY(e,t,n)}):iX(e,t,n)}function iX(e,t,n){t.status="fulfilled",t.value=n,iZ(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,iW(e,n)))}function iY(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do t.status="rejected",t.reason=n,iZ(t),t=t.next;while(t!==r)}e.action=null}function iZ(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function iK(e,t){return t}function iJ(e,t){if(rp){var n=aA.formState;if(null!==n){e:{var r=ic;if(rp){if(rf){t:{for(var i=rf,o=rg;8!==i.nodeType;)if(!o||null===(i=cu(i.nextSibling))){i=null;break t}i="F!"===(o=i.data)||"F"===o?i:null}if(i){rf=cu(i.nextSibling),r="F!"===i.data;break e}}rb(r)}r=!1}r&&(t=n[0])}}return(n=iM()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:iK,lastRenderedState:t},n.queue=r,n=ox.bind(null,ic,r),r.dispatch=n,r=iV(!1),o=ok.bind(null,ic,!1,r.queue),r=iM(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=iU.bind(null,ic,i,o,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function i0(e){return i1(iN(),iu,e)}function i1(e,t,n){t=iI(e,t,iK)[0],e=iR(iP)[0],t="object"==typeof t&&null!==t&&"function"==typeof t.then?i_(t):t;var r=iN(),i=r.queue,o=i.dispatch;return n!==r.memoizedState&&(ic.flags|=2048,i5(9,i2.bind(null,i,n),{destroy:void 0},null)),[t,o,e]}function i2(e,t){e.action=t}function i4(e){var t=iN(),n=iu;if(null!==n)return i1(t,n,e);iN(),t=t.memoizedState;var r=(n=iN()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function i5(e,n,r,i){return e={tag:e,create:n,inst:r,deps:i,next:null},null===(n=ic.updateQueue)&&(n=t(),ic.updateQueue=n),null===(r=n.lastEffect)?n.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,n.lastEffect=e),e}function i3(){return iN().memoizedState}function i6(e,t,n,r){var i=iM();ic.flags|=e,i.memoizedState=i5(1|t,n,{destroy:void 0},void 0===r?null:r)}function i7(e,t,n,r){var i=iN();r=void 0===r?null:r;var o=i.memoizedState.inst;null!==iu&&null!==r&&iw(r,iu.memoizedState.deps)?i.memoizedState=i5(t,n,o,r):(ic.flags|=e,i.memoizedState=i5(1|t,n,o,r))}function i8(e,t){i6(8390656,8,e,t)}function i9(e,t){i7(2048,8,e,t)}function oe(e,t){return i7(4,2,e,t)}function ot(e,t){return i7(4,4,e,t)}function on(e,t){if("function"==typeof t){var n=t(e=e());return function(){"function"==typeof n?n():t(null)}}if(null!=t)return t.current=e=e(),function(){t.current=null}}function or(e,t,n){n=null!=n?n.concat([e]):null,i7(4,4,on.bind(null,t,e),n)}function oi(){}function oo(e,t){var n=iN();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&iw(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function oa(e,t){var n=iN();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&iw(t,r[1]))return r[0];if(r=e(),im){ev(!0);try{e()}finally{ev(!1)}}return n.memoizedState=[r,t],r}function ol(e,t,n){return void 0===n||0x40000000&il?e.memoizedState=t:(e.memoizedState=n,e=a4(),ic.lanes|=e,az|=e,n)}function oc(e,t,n,r){return nS(n,t)?n:null!==rB.current?(nS(e=ol(e,n,r),t)||(oH=!0),e):42&il?(e=a4(),ic.lanes|=e,az|=e,t):(oH=!0,e.memoizedState=n)}function ou(e,t,n,r,i){var o=F.p;F.p=0!==o&&8>o?o:8;var s=M.T,a={};M.T=a,ok(e,!1,t,n);try{var l=i(),c=M.S;if(null!==c&&c(a,l),null!==l&&"object"==typeof l&&"function"==typeof l.then){var u,h,d=(u=[],h={status:"pending",value:null,reason:null,then:function(e){u.push(e)}},l.then(function(){h.status="fulfilled",h.value=r;for(var e=0;e<u.length;e++)(0,u[e])(r)},function(e){for(h.status="rejected",h.reason=e,e=0;e<u.length;e++)(0,u[e])(void 0)}),h);ow(e,t,d,a2(e))}else ow(e,t,r,a2(e))}catch(n){ow(e,t,{then:function(){},status:"rejected",reason:n},a2())}finally{F.p=o,M.T=s}}function oh(){}function od(e,t,n,i){if(5!==e.tag)throw Error(r(476));var o=of(e).queue;ou(e,o,t,Q,null===n?oh:function(){return op(e),n(i)})}function of(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:iP,lastRenderedState:Q},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:iP,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function op(e){var t=of(e).next.queue;ow(e,t,{},a2())}function om(){return sg(cq)}function og(){return iN().memoizedState}function oy(){return iN().memoizedState}function ob(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=a2(),r=sO(t,e=sk(n),n);null!==r&&(a5(r,t,n),sS(r,t,n)),t={cache:r5()},e.payload=t;return}t=t.return}}function ov(e,t,n){var r=a2();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},oO(e)?oS(t,n):null!==(n=n2(e,t,n,r))&&(a5(n,e,r),oC(n,t,r))}function ox(e,t,n){ow(e,t,n,a2())}function ow(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(oO(e))oS(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,nS(a,s))return n1(e,t,i,0),null===aA&&n0(),!1}catch{}finally{}if(null!==(n=n2(e,t,i,r)))return a5(n,e,r),oC(n,t,r),!0}return!1}function ok(e,t,n,i){if(i={lane:2,revertLane:lP(),action:i,hasEagerState:!1,eagerState:null,next:null},oO(e)){if(t)throw Error(r(479))}else null!==(t=n2(e,n,i,2))&&a5(t,e,2)}function oO(e){var t=e.alternate;return e===ic||null!==t&&t===ic}function oS(e,t){ip=id=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oC(e,t,n){if(4194176&n){var r=t.lanes;r&=e.pendingLanes,t.lanes=n|=r,eD(e,n)}}t=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};var oT={readContext:sg,use:ij,useCallback:ix,useContext:ix,useEffect:ix,useImperativeHandle:ix,useLayoutEffect:ix,useInsertionEffect:ix,useMemo:ix,useReducer:ix,useRef:ix,useState:ix,useDebugValue:ix,useDeferredValue:ix,useTransition:ix,useSyncExternalStore:ix,useId:ix};oT.useCacheRefresh=ix,oT.useMemoCache=ix,oT.useHostTransitionStatus=ix,oT.useFormState=ix,oT.useActionState=ix,oT.useOptimistic=ix;var oA={readContext:sg,use:ij,useCallback:function(e,t){return iM().memoizedState=[e,void 0===t?null:t],e},useContext:sg,useEffect:i8,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,i6(4194308,4,on.bind(null,t,e),n)},useLayoutEffect:function(e,t){return i6(4194308,4,e,t)},useInsertionEffect:function(e,t){i6(4,2,e,t)},useMemo:function(e,t){var n=iM();t=void 0===t?null:t;var r=e();if(im){ev(!0);try{e()}finally{ev(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=iM();if(void 0!==n){var i=n(t);if(im){ev(!0);try{n(t)}finally{ev(!1)}}}else i=t;return r.memoizedState=r.baseState=i,r.queue=e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},e=e.dispatch=ov.bind(null,ic,e),[r.memoizedState,e]},useRef:function(e){return iM().memoizedState=e={current:e}},useState:function(e){var t=(e=iV(e)).queue,n=ox.bind(null,ic,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:oi,useDeferredValue:function(e,t){return ol(iM(),e,t)},useTransition:function(){var e=iV(!1);return e=ou.bind(null,ic,e.queue,!0,!1),iM().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=ic,o=iM();if(rp){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===aA)throw Error(r(349));60&aM||iq(i,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,i8(iB.bind(null,i,s,e),[e]),i.flags|=2048,i5(9,i$.bind(null,i,s,n,t),{destroy:void 0},null),n},useId:function(){var e=iM(),t=aA.identifierPrefix;if(rp){var n=ra,r=rs;t=":"+t+"R"+(n=(r&~(1<<32-ex(r)-1)).toString(32)+n),0<(n=ig++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=iv++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return iM().memoizedState=ob.bind(null,ic)}};oA.useMemoCache=iD,oA.useHostTransitionStatus=om,oA.useFormState=iJ,oA.useActionState=iJ,oA.useOptimistic=function(e){var t=iM();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ok.bind(null,ic,!0,n),n.dispatch=t,[e,t]};var oE={readContext:sg,use:ij,useCallback:oo,useContext:sg,useEffect:i9,useImperativeHandle:or,useInsertionEffect:oe,useLayoutEffect:ot,useMemo:oa,useReducer:iR,useRef:i3,useState:function(){return iR(iP)},useDebugValue:oi,useDeferredValue:function(e,t){return oc(iN(),iu.memoizedState,e,t)},useTransition:function(){var e=iR(iP)[0],t=iN().memoizedState;return["boolean"==typeof e?e:i_(e),t]},useSyncExternalStore:iL,useId:og};oE.useCacheRefresh=oy,oE.useMemoCache=iD,oE.useHostTransitionStatus=om,oE.useFormState=i0,oE.useActionState=i0,oE.useOptimistic=function(e,t){return iH(iN(),iu,e,t)};var oM={readContext:sg,use:ij,useCallback:oo,useContext:sg,useEffect:i9,useImperativeHandle:or,useInsertionEffect:oe,useLayoutEffect:ot,useMemo:oa,useReducer:iz,useRef:i3,useState:function(){return iz(iP)},useDebugValue:oi,useDeferredValue:function(e,t){var n=iN();return null===iu?ol(n,e,t):oc(n,iu.memoizedState,e,t)},useTransition:function(){var e=iz(iP)[0],t=iN().memoizedState;return["boolean"==typeof e?e:i_(e),t]},useSyncExternalStore:iL,useId:og};function oN(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:_({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}oM.useCacheRefresh=oy,oM.useMemoCache=iD,oM.useHostTransitionStatus=om,oM.useFormState=i4,oM.useActionState=i4,oM.useOptimistic=function(e,t){var n=iN();return null!==iu?iH(n,iu,e,t):(n.baseState=e,[e,n.queue.dispatch])};var o_={isMounted:function(e){return!!(e=e._reactInternals)&&L(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=a2(),i=sk(r);i.payload=t,null!=n&&(i.callback=n),null!==(t=sO(e,i,r))&&(a5(t,e,r),sS(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=a2(),i=sk(r);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=sO(e,i,r))&&(a5(t,e,r),sS(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=a2(),r=sk(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=sO(e,r,n))&&(a5(t,e,n),sS(t,e,n))}};function oj(e,t,n,r,i,o,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||!nC(n,r)||!nC(i,o)}function oD(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&o_.enqueueReplaceState(t,t.state,null)}function oP(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=_({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var oR="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof D&&"function"==typeof D.emit){D.emit("uncaughtException",e);return}console.error(e)};function oI(e){oR(e)}function oz(e){console.error(e)}function oL(e){oR(e)}function oq(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function o$(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function oB(e,t,n){return(n=sk(n)).tag=3,n.payload={element:null},n.callback=function(){oq(e,t)},n}function oF(e){return(e=sk(e)).tag=3,e}function oQ(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"==typeof i){var o=r.value;e.payload=function(){return i(o)},e.callback=function(){o$(t,n,r)}}var s=n.stateNode;null!==s&&"function"==typeof s.componentDidCatch&&(e.callback=function(){o$(t,n,r),"function"!=typeof i&&(null===aG?aG=new Set([this]):aG.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var oV=Error(r(461)),oH=!1;function oU(e,t,n,r){t.child=null===e?r$(t,null,n,r):rq(t,e.child,n,r)}function oW(e,t,n,r,i){n=n.render;var o=t.ref;if("ref"in r){var s={};for(var a in r)"ref"!==a&&(s[a]=r[a])}else s=r;return sm(t),r=ik(e,t,n,s,o,i),a=iT(),null===e||oH?(rp&&a&&ru(t),t.flags|=1,oU(e,t,r,i),t.child):(iA(e,t,i),sr(e,t,i))}function oG(e,t,n,r,i){if(null===e){var o=n.type;return"function"!=typeof o||au(o)||void 0!==o.defaultProps||null!==n.compare?((e=af(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,oX(e,t,o,r,i))}if(o=e.child,!si(e,i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:nC)(s,r)&&e.ref===t.ref)return sr(e,t,i)}return t.flags|=1,(e=ah(o,r)).ref=t.ref,e.return=t,t.child=e}function oX(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(nC(o,r)&&e.ref===t.ref){if(oH=!1,t.pendingProps=r=o,!si(e,i))return t.lanes=e.lanes,sr(e,t,i);131072&e.flags&&(oH=!0)}}return oJ(e,t,n,r,i)}function oY(e,t,n){var r=t.pendingProps,i=r.children,o=(2&t.stateNode._pendingVisibility)!=0,s=null!==e?e.memoizedState:null;if(oK(e,t),"hidden"===r.mode||o){if(128&t.flags){if(r=null!==s?s.baseLanes|n:n,null!==e){for(i=t.child=e.child,o=0;null!==i;)o=o|i.lanes|i.childLanes,i=i.sibling;t.childLanes=o&~r}else t.childLanes=0,t.child=null;return oZ(e,t,r,n)}if(!(0x20000000&n))return t.lanes=t.childLanes=0x20000000,oZ(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&is(t,null!==s?s.cachePool:null),null!==s?rQ(t,s):rV(),rX(t)}else null!==s?(is(t,s.cachePool),rQ(t,s),rY(),t.memoizedState=null):(null!==e&&is(t,null),rV(),rY());return oU(e,t,i,n),t.child}function oZ(e,t,n,r){var i=io();return t.memoizedState={baseLanes:n,cachePool:i=null===i?null:{parent:r4._currentValue,pool:i}},null!==e&&is(t,null),rV(),rX(t),null!==e&&sf(e,t,r,!0),null}function oK(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(r(284));(null===e||e.ref!==n)&&(t.flags|=2097664)}}function oJ(e,t,n,r,i){return sm(t),n=ik(e,t,n,r,void 0,i),r=iT(),null===e||oH?(rp&&r&&ru(t),t.flags|=1,oU(e,t,n,i),t.child):(iA(e,t,i),sr(e,t,i))}function o0(e,t,n,r,i,o){return sm(t),t.updateQueue=null,n=iS(t,r,n,i),iO(e),r=iT(),null===e||oH?(rp&&r&&ru(t),t.flags|=1,oU(e,t,n,o),t.child):(iA(e,t,o),sr(e,t,o))}function o1(e,t,n,r,i){if(sm(t),null===t.stateNode){var o=n6,s=n.contextType;"object"==typeof s&&null!==s&&(o=sg(s)),t.memoizedState=null!==(o=new n(r,o)).state&&void 0!==o.state?o.state:null,o.updater=o_,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=r,o.state=t.memoizedState,o.refs={},sx(t),s=n.contextType,o.context="object"==typeof s&&null!==s?sg(s):n6,o.state=t.memoizedState,"function"==typeof(s=n.getDerivedStateFromProps)&&(oN(t,n,s,r),o.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(s=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),s!==o.state&&o_.enqueueReplaceState(o,o.state,null),sE(t,r,o,i),sA(),o.state=t.memoizedState),"function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){o=t.stateNode;var a=t.memoizedProps,l=oP(n,a);o.props=l;var c=o.context,u=n.contextType;s=n6,"object"==typeof u&&null!==u&&(s=sg(u));var h=n.getDerivedStateFromProps;u="function"==typeof h||"function"==typeof o.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a||c!==s)&&oD(t,o,r,s),sv=!1;var d=t.memoizedState;o.state=d,sE(t,r,o,i),sA(),c=t.memoizedState,a||d!==c||sv?("function"==typeof h&&(oN(t,n,h,r),c=t.memoizedState),(l=sv||oj(t,n,l,r,d,c,s))?(u||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=s,r=l):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,sw(e,t),u=oP(n,s=t.memoizedProps),o.props=u,h=t.pendingProps,d=o.context,c=n.contextType,l=n6,"object"==typeof c&&null!==c&&(l=sg(c)),(c="function"==typeof(a=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==h||d!==l)&&oD(t,o,r,l),sv=!1,d=t.memoizedState,o.state=d,sE(t,r,o,i),sA();var f=t.memoizedState;s!==h||d!==f||sv||null!==e&&null!==e.dependencies&&sp(e.dependencies)?("function"==typeof a&&(oN(t,n,a,r),f=t.memoizedState),(u=sv||oj(t,n,u,r,d,f,l)||null!==e&&null!==e.dependencies&&sp(e.dependencies))?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=u):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return o=r,oK(e,t),r=(128&t.flags)!=0,o||r?(o=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&r?(t.child=rq(t,e.child,null,i),t.child=rq(t,null,n,i)):oU(e,t,n,i),t.memoizedState=o.state,e=t.child):e=sr(e,t,i),e}function o2(e,t,n,r){return rk(),t.flags|=256,oU(e,t,n,r),t.child}var o4={dehydrated:null,treeContext:null,retryLane:0};function o5(e){return{baseLanes:e,cachePool:ia()}}function o3(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=a$),e}function o6(e,t,n){var i,o=t.pendingProps,s=!1,a=(128&t.flags)!=0;if((i=a)||(i=(null===e||null!==e.memoizedState)&&(2&rK.current)!=0),i&&(s=!0,t.flags&=-129),i=(32&t.flags)!=0,t.flags&=-33,null===e){if(rp){if(s?rG(t):rY(),rp){var l,c=rf;if(l=c){e:{for(l=c,c=rg;8!==l.nodeType;)if(!c||null===(l=cu(l.nextSibling))){c=null;break e}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==ro?{id:rs,overflow:ra}:null,retryLane:0x20000000},(l=ac(18,null,null,0)).stateNode=c,l.return=t,t.child=l,rd=t,rf=null,l=!0):l=!1}l||rb(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return"$!"===c.data?t.lanes=16:t.lanes=0x20000000,null;rZ(t)}return c=o.children,o=o.fallback,s?(rY(),c=o8({mode:"hidden",children:c},s=t.mode),o=ap(o,s,n,null),c.return=t,o.return=t,c.sibling=o,t.child=c,(s=t.child).memoizedState=o5(n),s.childLanes=o3(e,i,n),t.memoizedState=o4,o):(rG(t),o7(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(a)256&t.flags?(rG(t),t.flags&=-257,t=o9(e,t,n)):null!==t.memoizedState?(rY(),t.child=e.child,t.flags|=128,t=null):(rY(),s=o.fallback,c=t.mode,o=o8({mode:"visible",children:o.children},c),s=ap(s,c,n,null),s.flags|=2,o.return=t,s.return=t,o.sibling=s,t.child=o,rq(t,e.child,null,n),(o=t.child).memoizedState=o5(n),o.childLanes=o3(e,i,n),t.memoizedState=o4,t=s);else if(rG(t),"$!"===c.data){if(i=c.nextSibling&&c.nextSibling.dataset)var u=i.dgst;i=u,(o=Error(r(419))).stack="",o.digest=i,rO({value:o,source:null,stack:null}),t=o9(e,t,n)}else if(oH||sf(e,t,n,!1),i=(n&e.childLanes)!=0,oH||i){if(null!==(i=aA)){if(42&(o=n&-n))o=1;else switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:o=64;break;case 0x10000000:o=0x8000000;break;default:o=0}if(0!==(o=o&(i.suspendedLanes|n)?0:o)&&o!==l.retryLane)throw l.retryLane=o,n4(e,o),a5(i,e,o),oV}"$?"===c.data||lo(),t=o9(e,t,n)}else"$?"===c.data?(t.flags|=128,t.child=e.child,t=lx.bind(null,e),c._reactRetry=t,t=null):(e=l.treeContext,rf=cu(c.nextSibling),rd=t,rp=!0,rm=null,rg=!1,null!==e&&(rr[ri++]=rs,rr[ri++]=ra,rr[ri++]=ro,rs=e.id,ra=e.overflow,ro=t),t=o7(t,o.children),t.flags|=4096);return t}return s?(rY(),s=o.fallback,c=t.mode,u=(l=e.child).sibling,(o=ah(l,{mode:"hidden",children:o.children})).subtreeFlags=0x1e00000&l.subtreeFlags,null!==u?s=ah(u,s):(s=ap(s,c,n,null),s.flags|=2),s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,null===(c=e.child.memoizedState)?c=o5(n):(null!==(l=c.cachePool)?(u=r4._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=ia(),c={baseLanes:c.baseLanes|n,cachePool:l}),s.memoizedState=c,s.childLanes=o3(e,i,n),t.memoizedState=o4,o):(rG(t),e=(n=e.child).sibling,(n=ah(n,{mode:"visible",children:o.children})).return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function o7(e,t){return(t=o8({mode:"visible",children:t},e.mode)).return=e,e.child=t}function o8(e,t){return am(e,t,0,null)}function o9(e,t,n){return rq(t,e.child,null,n),e=o7(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function se(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),sh(e.return,t,n)}function st(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function sn(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(oU(e,t,r.children,n),2&(r=rK.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&se(e,n,t);else if(19===e.tag)se(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(G(rK,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===rJ(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),st(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===rJ(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}st(t,!0,n,null,o);break;case"together":st(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function sr(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),az|=t.lanes,!(n&t.childLanes)){if(null===e)return null;if(sf(e,t,n,!1),(n&t.childLanes)==0)return null}if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=ah(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=ah(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function si(e,t){return!!(e.lanes&t)||!!(null!==(e=e.dependencies)&&sp(e))}function so(e,t,n){if(null!==e){if(e.memoizedProps!==t.pendingProps)oH=!0;else{if(!si(e,n)&&!(128&t.flags))return oH=!1,function(e,t,n){switch(t.tag){case 3:J(t,t.stateNode.containerInfo),sc(t,r4,e.memoizedState.cache),rk();break;case 27:case 5:et(t);break;case 4:J(t,t.stateNode.containerInfo);break;case 10:sc(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(rG(t),t.flags|=128,null):n&t.child.childLanes?o6(e,t,n):(rG(t),null!==(e=sr(e,t,n))?e.sibling:null);rG(t);break;case 19:var i=(128&e.flags)!=0;if((r=(n&t.childLanes)!=0)||(sf(e,t,n,!1),r=(n&t.childLanes)!=0),i){if(r)return sn(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),G(rK,rK.current),r)break;return null;case 22:case 23:return t.lanes=0,oY(e,t,n);case 24:sc(t,r4,e.memoizedState.cache)}return sr(e,t,n)}(e,t,n);oH=!!(131072&e.flags)}}else oH=!1,rp&&1048576&t.flags&&rc(t,rn,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,o=i._init;if(i=o(i._payload),t.type=i,"function"==typeof i)au(i)?(e=oP(i,e),t.tag=1,t=o1(null,t,i,e,n)):(t.tag=0,t=oJ(null,t,i,e,n));else{if(null!=i){if((o=i.$$typeof)===p){t.tag=11,t=oW(null,t,i,e,n);break e}if(o===y){t.tag=14,t=oG(null,t,i,e,n);break e}}throw Error(r(306,t=function e(t){if(null==t)return null;if("function"==typeof t)return t.$$typeof===E?null:t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case l:return"Fragment";case a:return"Portal";case u:return"Profiler";case c:return"StrictMode";case m:return"Suspense";case g:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case f:return(t.displayName||"Context")+".Provider";case d:return(t._context.displayName||"Context")+".Consumer";case p:var n=t.render;return(t=t.displayName)||(t=""!==(t=n.displayName||n.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case y:return null!==(n=t.displayName||null)?n:e(t.type)||"Memo";case b:n=t._payload,t=t._init;try{return e(t(n))}catch{}}return null}(i)||i,""))}}return t;case 0:return oJ(e,t,t.type,t.pendingProps,n);case 1:return o=oP(i=t.type,t.pendingProps),o1(e,t,i,o,n);case 3:e:{if(J(t,t.stateNode.containerInfo),null===e)throw Error(r(387));var s=t.pendingProps;i=(o=t.memoizedState).element,sw(e,t),sE(t,s,null,n);var h=t.memoizedState;if(sc(t,r4,s=h.cache),s!==o.cache&&sd(t,[r4],n,!0),sA(),s=h.element,o.isDehydrated){if(o={element:s,isDehydrated:!1,cache:h.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=o2(e,t,s,n);break e}if(s!==i){rO(i=n8(Error(r(424)),t)),t=o2(e,t,s,n);break e}else for(rf=cu(t.stateNode.containerInfo.firstChild),rd=t,rp=!0,rm=null,rg=!0,n=r$(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(rk(),s===i){t=sr(e,t,n);break e}oU(e,t,s,n)}t=t.child}return t;case 26:return oK(e,t),null===e?(n=cv(t.type,null,t.pendingProps,null))?t.memoizedState=n:rp||(n=t.type,e=t.pendingProps,(i=l8(Z.current).createElement(n))[ez]=t,i[eL]=e,l3(i,n,e),eY(i),t.stateNode=i):t.memoizedState=cv(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return et(t),null===e&&rp&&(i=t.stateNode=cd(t.type,t.pendingProps,Z.current),rd=t,rg=!0,rf=cu(i.firstChild)),i=t.pendingProps.children,null!==e||rp?oU(e,t,i,n):t.child=rq(t,null,i,n),oK(e,t),t.child;case 5:return null===e&&rp&&((o=i=rf)&&(null!==(i=function(e,t,n,r){for(;1===e.nodeType;){if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[eV])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence")||i!==n.rel||e.getAttribute("href")!==(null==n.href?null:n.href)||e.getAttribute("crossorigin")!==(null==n.crossOrigin?null:n.crossOrigin)||e.getAttribute("title")!==(null==n.title?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==n.src?null:n.src)||e.getAttribute("type")!==(null==n.type?null:n.type)||e.getAttribute("crossorigin")!==(null==n.crossOrigin?null:n.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==n.name?null:""+n.name;if("hidden"===n.type&&e.getAttribute("name")===i)return e}if(null===(e=cu(e.nextSibling)))break}return null}(i,t.type,t.pendingProps,rg))?(t.stateNode=i,rd=t,rf=cu(i.firstChild),rg=!1,o=!0):o=!1),o||rb(t)),et(t),o=t.type,s=t.pendingProps,h=null!==e?e.memoizedProps:null,i=s.children,ct(o,s)?i=null:null!==h&&ct(o,h)&&(t.flags|=32),null!==t.memoizedState&&(cq._currentValue=o=ik(e,t,iC,null,null,n)),oK(e,t),oU(e,t,i,n),t.child;case 6:return null===e&&rp&&((e=n=rf)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;)if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n||null===(e=cu(e.nextSibling)))return null;return e}(n,t.pendingProps,rg))?(t.stateNode=n,rd=t,rf=null,e=!0):e=!1),e||rb(t)),null;case 13:return o6(e,t,n);case 4:return J(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=rq(t,null,i,n):oU(e,t,i,n),t.child;case 11:return oW(e,t,t.type,t.pendingProps,n);case 7:return oU(e,t,t.pendingProps,n),t.child;case 8:case 12:return oU(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,sc(t,t.type,i.value),oU(e,t,i.children,n),t.child;case 9:return o=t.type._context,i=t.pendingProps.children,sm(t),i=i(o=sg(o)),t.flags|=1,oU(e,t,i,n),t.child;case 14:return oG(e,t,t.type,t.pendingProps,n);case 15:return oX(e,t,t.type,t.pendingProps,n);case 19:return sn(e,t,n);case 22:return oY(e,t,n);case 24:return sm(t),i=sg(r4),null===e?(null===(o=io())&&(o=aA,s=r5(),o.pooledCache=s,s.refCount++,null!==s&&(o.pooledCacheLanes|=n),o=s),t.memoizedState={parent:i,cache:o},sx(t),sc(t,r4,o)):(e.lanes&n&&(sw(e,t),sE(t,null,null,n),sA()),o=e.memoizedState,s=t.memoizedState,o.parent!==i?(o={parent:i,cache:i},t.memoizedState=o,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=o),sc(t,r4,i)):(sc(t,r4,i=s.cache),i!==o.cache&&sd(t,[r4],n,!0))),oU(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}var ss=U(null),sa=null,sl=null;function sc(e,t,n){G(ss,t._currentValue),t._currentValue=n}function su(e){e._currentValue=ss.current,W(ss)}function sh(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function sd(e,t,n,i){var o=e.child;for(null!==o&&(o.return=e);null!==o;){var s=o.dependencies;if(null!==s){var a=o.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=o;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),sh(s.return,n,e),i||(a=null);break e}s=l.next}}else if(18===o.tag){if(null===(a=o.return))throw Error(r(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),sh(a,n,e),a=null}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===e){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}}function sf(e,t,n,i){e=null;for(var o=t,s=!1;null!==o;){if(!s){if(524288&o.flags)s=!0;else if(262144&o.flags)break}if(10===o.tag){var a=o.alternate;if(null===a)throw Error(r(387));if(null!==(a=a.memoizedProps)){var l=o.type;nS(o.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(o===K.current){if(null===(a=o.alternate))throw Error(r(387));a.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(null!==e?e.push(cq):e=[cq])}o=o.return}null!==e&&sd(t,e,n,i),t.flags|=262144}function sp(e){for(e=e.firstContext;null!==e;){if(!nS(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function sm(e){sa=e,sl=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function sg(e){return sb(sa,e)}function sy(e,t){return null===sa&&sm(e),sb(e,t)}function sb(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===sl){if(null===e)throw Error(r(308));sl=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else sl=sl.next=t;return n}var sv=!1;function sx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sw(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function sk(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function sO(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&aT){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=n3(e),n5(e,null,n),t}return n1(e,r,t,n),n3(e)}function sS(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,(4194176&n)!=0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,eD(e,n)}}function sC(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var sT=!1;function sA(){if(sT){var e=r9;if(null!==e)throw e}}function sE(e,t,n,r){sT=!1;var i=e.updateQueue;sv=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&(a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l)}if(null!==o){var h=i.baseState;for(s=0,u=c=l=null,a=o;;){var d=-0x20000001&a.lane,f=d!==a.lane;if(f?(aM&d)===d:(r&d)===d){0!==d&&d===r8&&(sT=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var p=e,m=a;switch(d=t,m.tag){case 1:if("function"==typeof(p=m.payload)){h=p.call(n,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(d="function"==typeof(p=m.payload)?p.call(n,h,d):p))break e;h=_({},h,d);break e;case 2:sv=!0}}null!==(d=a.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=i.callbacks)?i.callbacks=[d]:f.push(d))}else f={lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,s|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(f=a).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===o&&(i.shared.lanes=0),az|=s,e.lanes=s,e.memoizedState=h}}function sM(e,t){if("function"!=typeof e)throw Error(r(191,e));e.call(t)}function sN(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)sM(n[e],t)}function s_(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var o=n.create;n.inst.destroy=r=o()}n=n.next}while(n!==i)}}catch(e){lg(t,t.return,e)}}function sj(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var o=i.next;r=o;do{if((r.tag&e)===e){var s=r.inst,a=s.destroy;if(void 0!==a){s.destroy=void 0,i=t;try{a()}catch(e){lg(i,n,e)}}}r=r.next}while(r!==o)}}catch(e){lg(t,t.return,e)}}function sD(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{sN(t,n)}catch(t){lg(e,e.return,t)}}}function sP(e,t,n){n.props=oP(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){lg(e,t,n)}}function sR(e,t){try{var n=e.ref;if(null!==n){var r=e.stateNode;switch(e.tag){case 26:case 27:case 5:var i=r;break;default:i=r}"function"==typeof n?e.refCleanup=n(i):n.current=i}}catch(n){lg(e,t,n)}}function sI(e,t){var n=e.ref,r=e.refCleanup;if(null!==n){if("function"==typeof r)try{r()}catch(n){lg(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(n){lg(e,t,n)}else n.current=null}}function sz(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){lg(e,e.return,t)}}function sL(e,t,n){try{var i=e.stateNode;(function(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,s=null,a=null,l=null,c=null,u=null,h=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&null!=d)switch(p){case"checked":case"value":break;case"defaultValue":c=d;default:i.hasOwnProperty(p)||l4(e,t,p,null,i,d)}}for(var f in i){var p=i[f];if(d=n[f],i.hasOwnProperty(f)&&(null!=p||null!=d))switch(f){case"type":s=p;break;case"name":o=p;break;case"checked":u=p;break;case"defaultChecked":h=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(r(137,t));break;default:p!==d&&l4(e,t,f,p,i,d)}}to(e,a,l,c,u,h,s,o);return;case"select":for(s in p=a=l=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":p=c;default:i.hasOwnProperty(s)||l4(e,t,s,null,i,c)}for(o in i)if(s=i[o],c=n[o],i.hasOwnProperty(o)&&(null!=s||null!=c))switch(o){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==c&&l4(e,t,o,s,i,c)}t=l,n=a,i=p,null!=f?tl(e,!!n,f,!1):!!i!=!!n&&(null!=t?tl(e,!!n,t,!0):tl(e,!!n,n?[]:"",!1));return;case"textarea":for(l in p=f=null,n)if(o=n[l],n.hasOwnProperty(l)&&null!=o&&!i.hasOwnProperty(l))switch(l){case"value":case"children":break;default:l4(e,t,l,null,i,o)}for(a in i)if(o=i[a],s=n[a],i.hasOwnProperty(a)&&(null!=o||null!=s))switch(a){case"value":f=o;break;case"defaultValue":p=o;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(r(91));break;default:o!==s&&l4(e,t,a,o,i,s)}tc(e,f,p);return;case"option":for(var m in n)f=n[m],n.hasOwnProperty(m)&&null!=f&&!i.hasOwnProperty(m)&&("selected"===m?e.selected=!1:l4(e,t,m,null,i,f));for(c in i)f=i[c],p=n[c],i.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p)&&("selected"===c?e.selected=f&&"function"!=typeof f&&"symbol"!=typeof f:l4(e,t,c,f,i,p));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!i.hasOwnProperty(g)&&l4(e,t,g,null,i,f);for(u in i)if(f=i[u],p=n[u],i.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(r(137,t));break;default:l4(e,t,u,f,i,p)}return;default:if(tm(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!i.hasOwnProperty(y)&&l5(e,t,y,void 0,i,f);for(h in i)f=i[h],p=n[h],i.hasOwnProperty(h)&&f!==p&&(void 0!==f||void 0!==p)&&l5(e,t,h,f,i,p);return}}for(var b in n)f=n[b],n.hasOwnProperty(b)&&null!=f&&!i.hasOwnProperty(b)&&l4(e,t,b,null,i,f);for(d in i)f=i[d],p=n[d],i.hasOwnProperty(d)&&f!==p&&(null!=f||null!=p)&&l4(e,t,d,f,i,p)})(i,e.type,n,t),i[eL]=t}catch(t){lg(e,e.return,t)}}function sq(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag||4===e.tag}function s$(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sq(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&27!==e.tag&&18!==e.tag;){if(2&e.flags||null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function sB(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&27!==r&&null!==(e=e.child))for(sB(e,t,n),e=e.sibling;null!==e;)sB(e,t,n),e=e.sibling}var sF=!1,sQ=!1,sV=!1,sH="function"==typeof WeakSet?WeakSet:Set,sU=null,sW=!1;function sG(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:s3(e,n),4&r&&s_(5,n);break;case 1:if(s3(e,n),4&r){if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(e){lg(n,n.return,e)}else{var i=oP(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){lg(n,n.return,e)}}}64&r&&sD(n),512&r&&sR(n,n.return);break;case 3:if(s3(e,n),64&r&&null!==(r=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:e=n.child.stateNode}try{sN(r,e)}catch(e){lg(n,n.return,e)}}break;case 26:s3(e,n),512&r&&sR(n,n.return);break;case 27:case 5:s3(e,n),null===t&&4&r&&sz(n),512&r&&sR(n,n.return);break;case 12:default:s3(e,n);break;case 13:s3(e,n),4&r&&sJ(e,n);break;case 22:if(!(i=null!==n.memoizedState||sF)){t=null!==t&&null!==t.memoizedState||sQ;var o=sF,s=sQ;sF=i,(sQ=t)&&!s?function e(t,n,r){for(r=r&&(8772&n.subtreeFlags)!=0,n=n.child;null!==n;){var i=n.alternate,o=t,s=n,a=s.flags;switch(s.tag){case 0:case 11:case 15:e(o,s,r),s_(4,s);break;case 1:if(e(o,s,r),"function"==typeof(o=(i=s).stateNode).componentDidMount)try{o.componentDidMount()}catch(e){lg(i,i.return,e)}if(null!==(o=(i=s).updateQueue)){var l=i.stateNode;try{var c=o.shared.hiddenCallbacks;if(null!==c)for(o.shared.hiddenCallbacks=null,o=0;o<c.length;o++)sM(c[o],l)}catch(e){lg(i,i.return,e)}}r&&64&a&&sD(s),sR(s,s.return);break;case 26:case 27:case 5:e(o,s,r),r&&null===i&&4&a&&sz(s),sR(s,s.return);break;case 12:default:e(o,s,r);break;case 13:e(o,s,r),r&&4&a&&sJ(o,s);break;case 22:null===s.memoizedState&&e(o,s,r),sR(s,s.return)}n=n.sibling}}(e,n,(8772&n.subtreeFlags)!=0):s3(e,n),sF=o,sQ=s}512&r&&("manual"===n.memoizedProps.mode?sR(n,n.return):sI(n,n.return))}}var sX=null,sY=!1;function sZ(e,t,n){for(n=n.child;null!==n;)sK(e,t,n),n=n.sibling}function sK(e,t,n){if(eb&&"function"==typeof eb.onCommitFiberUnmount)try{eb.onCommitFiberUnmount(ey,n)}catch{}switch(n.tag){case 26:sQ||sI(n,t),sZ(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:sQ||sI(n,t);var r=sX,i=sY;for(sX=n.stateNode,sZ(e,t,n),t=(n=n.stateNode).attributes;t.length;)n.removeAttributeNode(t[0]);eH(n),sX=r,sY=i;break;case 5:sQ||sI(n,t);case 6:i=sX;var o=sY;if(sX=null,sZ(e,t,n),sX=i,sY=o,null!==sX){if(sY)try{e=sX,r=n.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)}catch(e){lg(n,t,e)}else try{sX.removeChild(n.stateNode)}catch(e){lg(n,t,e)}}break;case 18:null!==sX&&(sY?(t=sX,n=n.stateNode,8===t.nodeType?cl(t.parentNode,n):1===t.nodeType&&cl(t,n),ua(t)):cl(sX,n.stateNode));break;case 4:r=sX,i=sY,sX=n.stateNode.containerInfo,sY=!0,sZ(e,t,n),sX=r,sY=i;break;case 0:case 11:case 14:case 15:sQ||sj(2,n,t),sQ||sj(4,n,t),sZ(e,t,n);break;case 1:sQ||(sI(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&sP(n,t,r)),sZ(e,t,n);break;case 21:default:sZ(e,t,n);break;case 22:sQ||sI(n,t),sQ=(r=sQ)||null!==n.memoizedState,sZ(e,t,n),sQ=r}}function sJ(e,t){if(null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{ua(e)}catch(e){lg(t,t.return,e)}}function s0(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new sH),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new sH),t;default:throw Error(r(435,e.tag))}}(e);t.forEach(function(t){var r=lw.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function s1(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var o=n[i],s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:case 5:sX=l.stateNode,sY=!1;break e;case 3:case 4:sX=l.stateNode.containerInfo,sY=!0;break e}l=l.return}if(null===sX)throw Error(r(160));sK(s,a,o),sX=null,sY=!1,null!==(s=o.alternate)&&(s.return=null),o.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)s4(t,e),t=t.sibling}var s2=null;function s4(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:s1(t,e),s5(e),4&i&&(sj(3,e,e.return),s_(3,e),sj(5,e,e.return));break;case 1:s1(t,e),s5(e),512&i&&(sQ||null===n||sI(n,n.return)),64&i&&sF&&null!==(e=e.updateQueue)&&null!==(i=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?i:n.concat(i));break;case 26:var o=s2;if(s1(t,e),s5(e),512&i&&(sQ||null===n||sI(n,n.return)),4&i){var s=null!==n?n.memoizedState:null;if(i=e.memoizedState,null===n){if(null===i){if(null===e.stateNode){e:{i=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(i){case"title":(!(s=o.getElementsByTagName("title")[0])||s[eV]||s[ez]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=o.createElement(i),o.head.insertBefore(s,o.querySelector("head > title"))),l3(s,i,n),s[ez]=e,eY(s),i=s;break e;case"link":var a=cN("link","href",o).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if((s=a[l]).getAttribute("href")===(null==n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}}l3(s=o.createElement(i),i,n),o.head.appendChild(s);break;case"meta":if(a=cN("meta","content",o).get(i+(n.content||""))){for(l=0;l<a.length;l++)if((s=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}}l3(s=o.createElement(i),i,n),o.head.appendChild(s);break;default:throw Error(r(468,i))}s[ez]=e,eY(s),i=s}e.stateNode=i}else c_(o,e.type,e.stateNode)}else e.stateNode=cC(o,i,e.memoizedProps)}else s!==i?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===i?c_(o,e.type,e.stateNode):cC(o,i,e.memoizedProps)):null===i&&null!==e.stateNode&&sL(e,e.memoizedProps,n.memoizedProps)}break;case 27:if(4&i&&null===e.alternate){o=e.stateNode,s=e.memoizedProps;try{for(var c=o.firstChild;c;){var u=c.nextSibling,h=c.nodeName;c[eV]||"HEAD"===h||"BODY"===h||"SCRIPT"===h||"STYLE"===h||"LINK"===h&&"stylesheet"===c.rel.toLowerCase()||o.removeChild(c),c=u}for(var d=e.type,f=o.attributes;f.length;)o.removeAttributeNode(f[0]);l3(o,d,s),o[ez]=e,o[eL]=s}catch(t){lg(e,e.return,t)}}case 5:if(s1(t,e),s5(e),512&i&&(sQ||null===n||sI(n,n.return)),32&e.flags){o=e.stateNode;try{th(o,"")}catch(t){lg(e,e.return,t)}}4&i&&null!=e.stateNode&&(o=e.memoizedProps,sL(e,o,null!==n?n.memoizedProps:o)),1024&i&&(sV=!0);break;case 6:if(s1(t,e),s5(e),4&i){if(null===e.stateNode)throw Error(r(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(t){lg(e,e.return,t)}}break;case 3:if(cM=null,o=s2,s2=cm(t.containerInfo),s1(t,e),s2=o,s5(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{ua(t.containerInfo)}catch(t){lg(e,e.return,t)}sV&&(sV=!1,function e(t){if(1024&t.subtreeFlags)for(t=t.child;null!==t;){var n=t;e(n),5===n.tag&&1024&n.flags&&n.stateNode.reset(),t=t.sibling}}(e));break;case 4:i=s2,s2=cm(e.stateNode.containerInfo),s1(t,e),s5(e),s2=i;break;case 12:default:s1(t,e),s5(e);break;case 13:s1(t,e),s5(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(aH=el()),4&i&&null!==(i=e.updateQueue)&&(e.updateQueue=null,s0(e,i));break;case 22:if(512&i&&(sQ||null===n||sI(n,n.return)),c=null!==e.memoizedState,u=null!==n&&null!==n.memoizedState,h=sF,d=sQ,sF=h||c,sQ=d||u,s1(t,e),sQ=d,sF=h,s5(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&i&&(t._visibility=c?-2&t._visibility:1|t._visibility,c&&(t=sF||sQ,null===n||u||t||function e(t){for(t=t.child;null!==t;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:sj(4,n,n.return),e(n);break;case 1:sI(n,n.return);var r=n.stateNode;"function"==typeof r.componentWillUnmount&&sP(n,n.return,r),e(n);break;case 26:case 27:case 5:sI(n,n.return),e(n);break;case 22:sI(n,n.return),null===n.memoizedState&&e(n);break;default:e(n)}t=t.sibling}}(e)),null===e.memoizedProps||"manual"!==e.memoizedProps.mode))e:for(n=null,t=e;;){if(5===t.tag||26===t.tag||27===t.tag){if(null===n){u=n=t;try{if(o=u.stateNode,c)s=o.style,"function"==typeof s.setProperty?s.setProperty("display","none","important"):s.display="none";else{a=u.stateNode,l=u.memoizedProps.style;var p=null!=l&&l.hasOwnProperty("display")?l.display:null;a.style.display=null==p||"boolean"==typeof p?"":(""+p).trim()}}catch(e){lg(u,u.return,e)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(e){lg(u,u.return,e)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&i&&null!==(i=e.updateQueue)&&null!==(n=i.retryQueue)&&(i.retryQueue=null,s0(e,n));break;case 19:s1(t,e),s5(e),4&i&&null!==(i=e.updateQueue)&&(e.updateQueue=null,s0(e,i));case 21:}}function s5(e){var t=e.flags;if(2&t){try{if(27!==e.tag){e:{for(var n=e.return;null!==n;){if(sq(n)){var i=n;break e}n=n.return}throw Error(r(160))}switch(i.tag){case 27:var o=i.stateNode,s=s$(e);sB(e,s,o);break;case 5:var a=i.stateNode;32&i.flags&&(th(a,""),i.flags&=-33);var l=s$(e);sB(e,l,a);break;case 3:case 4:var c=i.stateNode.containerInfo,u=s$(e);!function e(t,n,r){var i=t.tag;if(5===i||6===i)t=t.stateNode,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!=(r=r._reactRootContainer)||null!==n.onclick||(n.onclick=l2));else if(4!==i&&27!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,u,c);break;default:throw Error(r(161))}}}catch(t){lg(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function s3(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)sG(e,t.alternate,t),t=t.sibling}function s6(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&r3(n))}function s7(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&r3(e))}function s8(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)s9(e,t,n,r),t=t.sibling}function s9(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:s8(e,t,n,r),2048&i&&s_(9,t);break;case 3:s8(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&r3(e)));break;case 12:if(2048&i){s8(e,t,n,r),e=t.stateNode;try{var o=t.memoizedProps,s=o.id,a=o.onPostCommit;"function"==typeof a&&a(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(e){lg(t,t.return,e)}}else s8(e,t,n,r);break;case 23:break;case 22:o=t.stateNode,null!==t.memoizedState?4&o._visibility?s8(e,t,n,r):ae(e,t):4&o._visibility?s8(e,t,n,r):(o._visibility|=4,function e(t,n,r,i,o){for(o=o&&(10256&n.subtreeFlags)!=0,n=n.child;null!==n;){var s=n,a=s.flags;switch(s.tag){case 0:case 11:case 15:e(t,s,r,i,o),s_(8,s);break;case 23:break;case 22:var l=s.stateNode;null!==s.memoizedState?4&l._visibility?e(t,s,r,i,o):ae(t,s):(l._visibility|=4,e(t,s,r,i,o)),o&&2048&a&&s6(s.alternate,s);break;case 24:e(t,s,r,i,o),o&&2048&a&&s7(s.alternate,s);break;default:e(t,s,r,i,o)}n=n.sibling}}(e,t,n,r,(10256&t.subtreeFlags)!=0)),2048&i&&s6(t.alternate,t);break;case 24:s8(e,t,n,r),2048&i&&s7(t.alternate,t);break;default:s8(e,t,n,r)}}function ae(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=t,r=n.flags;switch(n.tag){case 22:ae(e,n),2048&r&&s6(n.alternate,n);break;case 24:ae(e,n),2048&r&&s7(n.alternate,n);break;default:ae(e,n)}t=t.sibling}}var at=8192;function an(e){if(e.subtreeFlags&at)for(e=e.child;null!==e;)ar(e),e=e.sibling}function ar(e){switch(e.tag){case 26:an(e),e.flags&at&&null!==e.memoizedState&&function(e,t,n){if(null===cD)throw Error(r(475));var i=cD;if("stylesheet"===t.type&&("string"!=typeof n.media||!1!==matchMedia(n.media).matches)&&!(4&t.state.loading)){if(null===t.instance){var o=cx(n.href),s=e.querySelector(cw(o));if(s){null!==(e=s._p)&&"object"==typeof e&&"function"==typeof e.then&&(i.count++,i=cR.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,eY(s);return}s=e.ownerDocument||e,n=ck(n),(o=cf.get(o))&&cA(n,o),eY(s=s.createElement("link"));var a=s;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),l3(s,"link",n),t.instance=s}null===i.stylesheets&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(3&t.state.loading)&&(i.count++,t=cR.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}(s2,e.memoizedState,e.memoizedProps);break;case 5:default:an(e);break;case 3:case 4:var t=s2;s2=cm(e.stateNode.containerInfo),an(e),s2=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=at,at=0x1000000,an(e),at=t):an(e))}}function ai(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(null!==e)}}function ao(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];sU=r,aa(r,e)}ai(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)as(e),e=e.sibling}function as(e){switch(e.tag){case 0:case 11:case 15:ao(e),2048&e.flags&&sj(9,e,e.return);break;case 3:case 12:default:ao(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,function e(t){var n=t.deletions;if(16&t.flags){if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];sU=i,aa(i,t)}ai(t)}for(t=t.child;null!==t;){switch((n=t).tag){case 0:case 11:case 15:sj(8,n,n.return),e(n);break;case 22:4&(r=n.stateNode)._visibility&&(r._visibility&=-5,e(n));break;default:e(n)}t=t.sibling}}(e)):ao(e)}}function aa(e,t){for(;null!==sU;){var n=sU;switch(n.tag){case 0:case 11:case 15:sj(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:r3(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,sU=r;else for(n=e;null!==sU;){var i=(r=sU).sibling,o=r.return;if(function e(t){var n=t.alternate;null!==n&&(t.alternate=null,e(n)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&null!==(n=t.stateNode)&&eH(n),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}(r),r===n){sU=null;break}if(null!==i){i.return=o,sU=i;break}sU=o}}}function al(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ac(e,t,n,r){return new al(e,t,n,r)}function au(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ah(e,t){var n=e.alternate;return null===n?((n=ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=0x1e00000&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function ad(e,t){e.flags&=0x1e00002;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,e.dependencies=null===(t=n.dependencies)?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function af(e,t,n,i,o,s){var a=0;if(i=e,"function"==typeof e)au(e)&&(a=1);else if("string"==typeof e)a=!function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;if("stylesheet"===t.rel)return e=t.disabled,"string"==typeof t.precedence&&null==e;return!0;case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,X.current)?"html"===e||"head"===e||"body"===e?27:5:26;else e:switch(e){case l:return ap(n.children,o,s,t);case c:a=8,o|=24;break;case u:return(e=ac(12,n,t,2|o)).elementType=u,e.lanes=s,e;case m:return(e=ac(13,n,t,o)).elementType=m,e.lanes=s,e;case g:return(e=ac(19,n,t,o)).elementType=g,e.lanes=s,e;case k:return am(n,o,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case h:case f:a=10;break e;case d:a=9;break e;case p:a=11;break e;case y:a=14;break e;case b:a=16,i=null;break e}a=29,n=Error(r(130,null===e?"null":typeof e,"")),i=null}return(t=ac(a,n,t,o)).elementType=e,t.type=i,t.lanes=s,t}function ap(e,t,n,r){return(e=ac(7,e,r,t)).lanes=n,e}function am(e,t,n,i){(e=ac(22,e,i,t)).elementType=k,e.lanes=n;var o={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=o._current;if(null===e)throw Error(r(456));if(!(2&o._pendingVisibility)){var t=n4(e,2);null!==t&&(o._pendingVisibility|=2,a5(t,e,2))}},attach:function(){var e=o._current;if(null===e)throw Error(r(456));if(2&o._pendingVisibility){var t=n4(e,2);null!==t&&(o._pendingVisibility&=-3,a5(t,e,2))}}};return e.stateNode=o,e}function ag(e,t,n){return(e=ac(6,e,null,t)).lanes=n,e}function ay(e,t,n){return(t=ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ab(e){e.flags|=4}function av(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-0x1000001;else if(e.flags|=0x1000000,!cj(t)){if(null!==(t=rU.current)&&((4194176&aM)===aM?null!==rW:(0x3c00000&aM)!==aM&&!(0x20000000&aM)||t!==rW))throw rN=rT,rC;e.flags|=8192}}function ax(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?eM():0x20000000,e.lanes|=t,aB|=t)}function aw(e,t){if(!rp)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ak(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=0x1e00000&i.subtreeFlags,r|=0x1e00000&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function aO(e,t){switch(rh(t),t.tag){case 3:su(r4),ee();break;case 26:case 27:case 5:en(t);break;case 4:ee();break;case 13:rZ(t);break;case 19:W(rK);break;case 10:su(t.type);break;case 22:case 23:rZ(t),rH(),null!==e&&W(ii);break;case 24:su(r4)}}var aS={getCacheForType:function(e){var t=sg(r4),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},aC="function"==typeof WeakMap?WeakMap:Map,aT=0,aA=null,aE=null,aM=0,aN=0,a_=null,aj=!1,aD=!1,aP=!1,aR=0,aI=0,az=0,aL=0,aq=0,a$=0,aB=0,aF=null,aQ=null,aV=!1,aH=0,aU=1/0,aW=null,aG=null,aX=!1,aY=null,aZ=0,aK=0,aJ=null,a0=0,a1=null;function a2(){if(2&aT&&0!==aM)return aM&-aM;if(null!==M.T){var e=r8;return 0!==e?e:lP()}return eR()}function a4(){0===a$&&(a$=!(0x20000000&aM)||rp?eE():0x20000000);var e=rU.current;return null!==e&&(e.flags|=32),a$}function a5(e,t,n){(e===aA&&2===aN||null!==e.cancelPendingCommit)&&(lt(e,0),a8(e,aM,a$,!1)),e_(e,n),2&aT&&e===aA||(e===aA&&(2&aT||(aL|=n),4===aI&&a8(e,aM,a$,!1)),lE(e))}function a3(e,t,n){if(6&aT)throw Error(r(327));for(var i=!n&&(60&t)==0&&(t&e.expiredLanes)==0||eA(e,t),o=i?function(e,t){var n=aT;aT|=2;var i=lr(),o=li();aA!==e||aM!==t?(aW=null,aU=el()+500,lt(e,t)):aD=eA(e,t);e:for(;;)try{if(0!==aN&&null!==aE){t=aE;var s=a_;t:switch(aN){case 1:aN=0,a_=null,lc(e,t,s,1);break;case 2:if(rA(s)){aN=0,a_=null,ll(t);break}t=function(){2===aN&&aA===e&&(aN=7),lE(e)},s.then(t,t);break e;case 3:aN=7;break e;case 4:aN=5;break e;case 7:rA(s)?(aN=0,a_=null,ll(t)):(aN=0,a_=null,lc(e,t,s,7));break;case 5:var a=null;switch(aE.tag){case 26:a=aE.memoizedState;case 5:case 27:var l=aE;if(!a||cj(a)){aN=0,a_=null;var c=l.sibling;if(null!==c)aE=c;else{var u=l.return;null!==u?(aE=u,lu(u)):aE=null}break t}}aN=0,a_=null,lc(e,t,s,5);break;case 6:aN=0,a_=null,lc(e,t,s,6);break;case 8:le(),aI=6;break e;default:throw Error(r(462))}}(function(){for(;null!==aE&&!es();)la(aE)})();break}catch(t){ln(e,t)}return sl=sa=null,M.H=i,M.A=o,aT=n,null!==aE?0:(aA=null,aM=0,n0(),aI)}(e,t):ls(e,t,!0),s=i;;){if(0===o)aD&&!i&&a8(e,t,0,!1);else if(6===o)a8(e,t,0,!aj);else{if(n=e.current.alternate,s&&!function(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&null!==(n=t.updateQueue)&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!nS(o(),i))return!1}catch{return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(n)){o=ls(e,t,!1),s=!1;continue}if(2===o){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=0!=(a=-0x20000001&e.pendingLanes)?a:0x20000000&a?0x20000000:0;if(0!==a){t=a;e:{o=aF;var l=e.current.memoizedState.isDehydrated;if(l&&(lt(e,a).flags|=256),2!==(a=ls(e,a,!1))){if(aP&&!l){e.errorRecoveryDisabledLanes|=s,aL|=s,o=4;break e}s=aQ,aQ=o,null!==s&&a6(s)}o=a}if(s=!1,2!==o)continue}}if(1===o){lt(e,0),a8(e,t,0,!0);break}e:{switch(i=e,o){case 0:case 1:throw Error(r(345));case 4:if((4194176&t)===t){a8(i,t,a$,!aj);break e}break;case 2:aQ=null;break;case 3:case 5:break;default:throw Error(r(329))}if(i.finishedWork=n,i.finishedLanes=t,(0x3c00000&t)===t&&10<(s=aH+300-el())){if(a8(i,t,a$,!aj),0!==eT(i,0))break e;i.timeoutHandle=cr(a7.bind(null,i,n,aQ,aW,aV,t,a$,aL,aB,aj,2,-0,0),s);break e}a7(i,n,aQ,aW,aV,t,a$,aL,aB,aj,0,-0,0)}}break}lE(e)}function a6(e){null===aQ?aQ=e:aQ.push.apply(aQ,e)}function a7(e,t,n,i,o,s,a,l,c,u,h,d,f){var p=t.subtreeFlags;if((8192&p||(0x1002000&p)==0x1002000)&&(cD={stylesheets:null,count:0,unsuspend:cP},ar(t),null!==(t=function(){if(null===cD)throw Error(r(475));var e=cD;return e.stylesheets&&0===e.count&&cz(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&cz(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}()))){e.cancelPendingCommit=t(ld.bind(null,e,n,i,o,a,l,c,1,d,f)),a8(e,s,a,!u);return}ld(e,n,i,o,a,l,c,h,d,f)}function a8(e,t,n,r){t&=~aq,t&=~aL,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var o=31-ex(i),s=1<<o;r[o]=-1,i&=~s}0!==n&&ej(e,n,t)}function a9(){return!!(6&aT)||(lM(0),!1)}function le(){if(null!==aE){if(0===aN)var e=aE.return;else e=aE,sl=sa=null,iE(e),rj=null,rD=0,e=aE;for(;null!==e;)aO(e.alternate,e),e=e.return;aE=null}}function lt(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ci(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),le(),aA=e,aE=n=ah(e.current,null),aM=t,aN=0,a_=null,aj=!1,aD=eA(e,t),aP=!1,aB=a$=aq=aL=az=aI=0,aQ=aF=null,aV=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-ex(r),o=1<<i;t|=e[i],r&=~o}return aR=t,n0(),n}function ln(e,t){ic=null,M.H=oT,t===rS?(t=r_(),aN=3):t===rC?(t=r_(),aN=4):aN=t===oV?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,a_=t,null===aE&&(aI=1,oq(e,n8(t,e.current)))}function lr(){var e=M.H;return M.H=oT,null===e?oT:e}function li(){var e=M.A;return M.A=aS,e}function lo(){aI=4,aj||(4194176&aM)!==aM&&null!==rU.current||(aD=!0),(0x7ffffff&az||0x7ffffff&aL)&&null!==aA&&a8(aA,aM,a$,!1)}function ls(e,t,n){var r=aT;aT|=2;var i=lr(),o=li();(aA!==e||aM!==t)&&(aW=null,lt(e,t)),t=!1;var s=aI;e:for(;;)try{if(0!==aN&&null!==aE){var a=aE,l=a_;switch(aN){case 8:le(),s=6;break e;case 3:case 2:case 6:null===rU.current&&(t=!0);var c=aN;if(aN=0,a_=null,lc(e,a,l,c),n&&aD){s=0;break e}break;default:c=aN,aN=0,a_=null,lc(e,a,l,c)}}(function(){for(;null!==aE;)la(aE)})(),s=aI;break}catch(t){ln(e,t)}return t&&e.shellSuspendCounter++,sl=sa=null,aT=r,M.H=i,M.A=o,null===aE&&(aA=null,aM=0,n0()),s}function la(e){var t=so(e.alternate,e,aR);e.memoizedProps=e.pendingProps,null===t?lu(e):aE=t}function ll(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=o0(n,t,t.pendingProps,t.type,void 0,aM);break;case 11:t=o0(n,t,t.pendingProps,t.type.render,t.ref,aM);break;case 5:iE(t);default:aO(n,t),t=so(n,t=aE=ad(t,aR),aR)}e.memoizedProps=e.pendingProps,null===t?lu(e):aE=t}function lc(e,t,n,i){sl=sa=null,iE(t),rj=null,rD=0;var o=t.return;try{if(function(e,t,n,i,o){if(n.flags|=32768,null!==i&&"object"==typeof i&&"function"==typeof i.then){if(null!==(t=n.alternate)&&sf(t,n,o,!0),null!==(n=rU.current)){switch(n.tag){case 13:return null===rW?lo():null===n.alternate&&0===aI&&(aI=3),n.flags&=-257,n.flags|=65536,n.lanes=o,i===rT?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([i]):t.add(i),ly(e,i,o)),!1;case 22:return n.flags|=65536,i===rT?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([i]):n.add(i),ly(e,i,o)),!1}throw Error(r(435,n.tag))}return ly(e,i,o),lo(),!1}if(rp)return null!==(t=rU.current)?(65536&t.flags||(t.flags|=256),t.flags|=65536,t.lanes=o,i!==ry&&rO(n8(e=Error(r(422),{cause:i}),n))):(i!==ry&&rO(n8(t=Error(r(423),{cause:i}),n)),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,i=n8(i,n),o=oB(e.stateNode,i,o),sC(e,o),4!==aI&&(aI=2)),!1;var s=Error(r(520),{cause:i});if(s=n8(s,n),null===aF?aF=[s]:aF.push(s),4!==aI&&(aI=2),null===t)return!0;i=n8(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=oB(n.stateNode,i,e),sC(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(128&n.flags)==0&&("function"==typeof t.getDerivedStateFromError||null!==s&&"function"==typeof s.componentDidCatch&&(null===aG||!aG.has(s))))return n.flags|=65536,o&=-o,n.lanes|=o,oQ(o=oF(o),e,n,i),sC(n,o),!1}n=n.return}while(null!==n);return!1}(e,o,t,n,aM)){aI=1,oq(e,n8(n,e.current)),aE=null;return}}catch(t){if(null!==o)throw aE=o,t;aI=1,oq(e,n8(n,e.current)),aE=null;return}32768&t.flags?(rp||1===i?e=!0:aD||0x20000000&aM?e=!1:(aj=e=!0,(2===i||3===i||6===i)&&null!==(i=rU.current)&&13===i.tag&&(i.flags|=16384)),lh(t,e)):lu(t)}function lu(e){var t=e;do{if(32768&t.flags){lh(t,aj);return}e=t.return;var n=function(e,t,n){var i=t.pendingProps;switch(rh(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return ak(t),null;case 3:return n=t.stateNode,i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),su(r4),ee(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(null===e||null===e.child)&&(rw(t)?ab(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==rm&&(a6(rm),rm=null))),ak(t),null;case 26:return n=t.memoizedState,null===e?(ab(t),null!==n?(ak(t),av(t,n)):(ak(t),t.flags&=-0x1000001)):n?n!==e.memoizedState?(ab(t),ak(t),av(t,n)):(ak(t),t.flags&=-0x1000001):(e.memoizedProps!==i&&ab(t),ak(t),t.flags&=-0x1000001),null;case 27:en(t),n=Z.current;var o=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==i&&ab(t);else{if(!i){if(null===t.stateNode)throw Error(r(166));return ak(t),null}e=X.current,rw(t)?rv(t):(e=cd(o,i,n),t.stateNode=e,ab(t))}return ak(t),null;case 5:if(en(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&ab(t);else{if(!i){if(null===t.stateNode)throw Error(r(166));return ak(t),null}if(e=X.current,rw(t))rv(t);else{switch(o=l8(Z.current),e){case 1:e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof i.is?o.createElement("select",{is:i.is}):o.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e="string"==typeof i.is?o.createElement(n,{is:i.is}):o.createElement(n)}}e[ez]=t,e[eL]=i;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)e.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(t.stateNode=e,l3(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break;case"img":e=!0;break;default:e=!1}e&&ab(t)}}return ak(t),t.flags&=-0x1000001,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==i&&ab(t);else{if("string"!=typeof i&&null===t.stateNode)throw Error(r(166));if(e=Z.current,rw(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,null!==(o=rd))switch(o.tag){case 27:case 5:i=o.memoizedProps}e[ez]=t,(e=!!(e.nodeValue===n||null!==i&&!0===i.suppressHydrationWarning||l1(e.nodeValue,n)))||rb(t)}else(e=l8(e).createTextNode(i))[ez]=t,t.stateNode=e}return ak(t),null;case 13:if(i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(o=rw(t),null!==i&&null!==i.dehydrated){if(null===e){if(!o)throw Error(r(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(r(317));o[ez]=t}else rk(),128&t.flags||(t.memoizedState=null),t.flags|=4;ak(t),o=!1}else null!==rm&&(a6(rm),rm=null),o=!0;if(!o)return 256&t.flags?(rZ(t),t):(rZ(t),null)}if(rZ(t),128&t.flags)return t.lanes=n,t;if(n=null!==i,e=null!==e&&null!==e.memoizedState,n){i=t.child,o=null,null!==i.alternate&&null!==i.alternate.memoizedState&&null!==i.alternate.memoizedState.cachePool&&(o=i.alternate.memoizedState.cachePool.pool);var s=null;null!==i.memoizedState&&null!==i.memoizedState.cachePool&&(s=i.memoizedState.cachePool.pool),s!==o&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),ax(t,t.updateQueue),ak(t),null;case 4:return ee(),null===e&&lH(t.stateNode.containerInfo),ak(t),null;case 10:return su(t.type),ak(t),null;case 19:if(W(rK),null===(o=t.memoizedState))return ak(t),null;if(i=(128&t.flags)!=0,null===(s=o.rendering)){if(i)aw(o,!1);else{if(0!==aI||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(s=rJ(e))){for(t.flags|=128,aw(o,!1),e=s.updateQueue,t.updateQueue=e,ax(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)ad(n,e),n=n.sibling;return G(rK,1&rK.current|2),t.child}e=e.sibling}null!==o.tail&&el()>aU&&(t.flags|=128,i=!0,aw(o,!1),t.lanes=4194304)}}else{if(!i){if(null!==(e=rJ(s))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,ax(t,e),aw(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!rp)return ak(t),null}else 2*el()-o.renderingStartTime>aU&&0x20000000!==n&&(t.flags|=128,i=!0,aw(o,!1),t.lanes=4194304)}o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=o.last)?e.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=el(),t.sibling=null,e=rK.current,G(rK,i?1&e|2:1&e),t):(ak(t),null);case 22:case 23:return rZ(t),rH(),i=null!==t.memoizedState,null!==e?null!==e.memoizedState!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?0x20000000&n&&!(128&t.flags)&&(ak(t),6&t.subtreeFlags&&(t.flags|=8192)):ak(t),null!==(n=t.updateQueue)&&ax(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),i=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),null!==e&&W(ii),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),su(r4),ak(t),null;case 25:return null}throw Error(r(156,t.tag))}(t.alternate,t,aR);if(null!==n){aE=n;return}if(null!==(t=t.sibling)){aE=t;return}aE=t=e}while(null!==t);0===aI&&(aI=5)}function lh(e,t){do{var n=function(e,t){switch(rh(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return su(r4),ee(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return en(t),null;case 13:if(rZ(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));rk()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return W(rK),null;case 4:return ee(),null;case 10:return su(t.type),null;case 22:case 23:return rZ(t),rH(),null!==e&&W(ii),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return su(r4),null;default:return null}}(e.alternate,e);if(null!==n){n.flags&=32767,aE=n;return}if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling)){aE=e;return}aE=e=n}while(null!==e);aI=6,aE=null}function ld(e,t,n,i,o,s,a,l,c,u){var h=M.T,d=F.p;try{F.p=2,M.T=null,function(e,t,n,i,o,s,a,l){do lp();while(null!==aY);if(6&aT)throw Error(r(327));var c,u,h=e.finishedWork;if(i=e.finishedLanes,null!==h){if(e.finishedWork=null,e.finishedLanes=0,h===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var d=h.lanes|h.childLanes;if(function(e,t,n,r,i,o){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=s&~n;0<n;){var u=31-ex(n),h=1<<u;a[u]=0,l[u]=-1;var d=c[u];if(null!==d)for(c[u]=null,u=0;u<d.length;u++){var f=d[u];null!==f&&(f.lane&=-0x20000001)}n&=~h}0!==r&&ej(e,r,0),0!==o&&0===i&&0!==e.tag&&(e.suspendedLanes|=o&~(s&~t))}(e,i,d|=nJ,s,a,l),e===aA&&(aE=aA=null,aM=0),(10256&h.subtreeFlags||10256&h.flags)&&!aX&&(aX=!0,aK=d,aJ=n,c=ed,u=function(){return lp(),null},ei(c,u)),n=(15990&h.flags)!=0,15990&h.subtreeFlags||n?(n=M.T,M.T=null,s=F.p,F.p=2,a=aT,aT|=4,function(e,t){if(e=e.containerInfo,l6=cU,nM(e=nE(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var o,s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var l=0,c=-1,u=-1,h=0,d=0,f=e,p=null;t:for(;;){for(;f!==n||0!==s&&3!==f.nodeType||(c=l+s),f!==a||0!==i&&3!==f.nodeType||(u=l+i),3===f.nodeType&&(l+=f.nodeValue.length),null!==(o=f.firstChild);)p=f,f=o;for(;;){if(f===e)break t;if(p===n&&++h===s&&(c=l),p===a&&++d===i&&(u=l),null!==(o=f.nextSibling))break;p=(f=p).parentNode}f=o}n=-1===c||-1===u?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(l7={focusedElem:e,selectionRange:n},cU=!1,sU=t;null!==sU;)if(e=(t=sU).child,(1028&t.subtreeFlags)!=0&&null!==e)e.return=t,sU=e;else for(;null!==sU;){switch(a=(t=sU).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==a){e=void 0,n=t,s=a.memoizedProps,a=a.memoizedState,i=n.stateNode;try{var m=oP(n.type,s,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(m,a),i.__reactInternalSnapshotBeforeUpdate=e}catch(e){lg(n,n.return,e)}}break;case 3:if(1024&e){if(9===(n=(e=t.stateNode.containerInfo).nodeType))cc(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":cc(e);break;default:e.textContent=""}}break;default:if(1024&e)throw Error(r(163))}if(null!==(e=t.sibling)){e.return=t.return,sU=e;break}sU=t.return}m=sW,sW=!1}(e,h),s4(h,e),function(e,t){var n=nE(t);t=e.focusedElem;var r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&function e(t,n){return!!t&&!!n&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(t.ownerDocument.documentElement,t)){if(null!==r&&nM(t)){if(e=r.start,void 0===(n=r.end)&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if((n=(e=t.ownerDocument||document)&&e.defaultView||window).getSelection){n=n.getSelection();var i=t.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!n.extend&&o>r&&(i=r,r=o,o=i),i=nA(t,o);var s=nA(t,r);i&&s&&(1!==n.rangeCount||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==s.node||n.focusOffset!==s.offset)&&((e=e.createRange()).setStart(i.node,i.offset),n.removeAllRanges(),o>r?(n.addRange(e),n.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)1===n.nodeType&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for("function"==typeof t.focus&&t.focus(),t=0;t<e.length;t++)(n=e[t]).element.scrollLeft=n.left,n.element.scrollTop=n.top}}(l7,e.containerInfo),cU=!!l6,l7=l6=null,e.current=h,sG(e,h.alternate,h),ea(),aT=a,F.p=s,M.T=n):e.current=h,aX?(aX=!1,aY=e,aZ=i):lf(e,d),0===(d=e.pendingLanes)&&(aG=null),function(e){if(eb&&"function"==typeof eb.onCommitFiberRoot)try{eb.onCommitFiberRoot(ey,e,void 0,(128&e.current.flags)==128)}catch{}}(h.stateNode),lE(e),null!==t)for(o=e.onRecoverableError,h=0;h<t.length;h++)o((d=t[h]).value,{componentStack:d.stack});3&aZ&&lp(),d=e.pendingLanes,4194218&i&&42&d?e===a1?a0++:(a0=0,a1=e):a0=0,lM(0)}}(e,t,n,i,d,o,s,a,l,c,u)}finally{M.T=h,F.p=d}}function lf(e,t){0==(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,r3(t))}function lp(){if(null!==aY){var e=aY,t=aK;aK=0;var n=eP(aZ),i=M.T,o=F.p;try{if(F.p=32>n?32:n,M.T=null,null===aY)var s=!1;else{n=aJ,aJ=null;var a=aY,l=aZ;if(aY=null,aZ=0,6&aT)throw Error(r(331));var c=aT;if(aT|=4,as(a.current),s9(a,a.current,l,n),aT=c,lM(0,!1),eb&&"function"==typeof eb.onPostCommitFiberRoot)try{eb.onPostCommitFiberRoot(ey,a)}catch{}s=!0}return s}finally{F.p=o,M.T=i,lf(e,t)}}return!1}function lm(e,t,n){t=n8(n,t),t=oB(e.stateNode,t,2),null!==(e=sO(e,t,2))&&(e_(e,2),lE(e))}function lg(e,t,n){if(3===e.tag)lm(e,e,n);else for(;null!==t;){if(3===t.tag){lm(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===aG||!aG.has(r))){e=n8(n,e),null!==(r=sO(t,n=oF(2),2))&&(oQ(n,r,t,e),e_(r,2),lE(r));break}}t=t.return}}function ly(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new aC;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(aP=!0,i.add(n),e=lb.bind(null,e,t,n),t.then(e,e))}function lb(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,aA===e&&(aM&n)===n&&(4===aI||3===aI&&(0x3c00000&aM)===aM&&300>el()-aH?2&aT||lt(e,0):aq|=n,aB===aM&&(aB=0)),lE(e)}function lv(e,t){0===t&&(t=eM()),null!==(e=n4(e,t))&&(e_(e,t),lE(e))}function lx(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),lv(e,n)}function lw(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(r(314))}null!==i&&i.delete(t),lv(e,n)}var lk=null,lO=null,lS=!1,lC=!1,lT=!1,lA=0;function lE(e){var t;e!==lO&&null===e.next&&(null===lO?lk=lO=e:lO=lO.next=e),lC=!0,lS||(lS=!0,t=lN,cs(function(){6&aT?ei(eu,t):t()}))}function lM(e,t){if(!lT&&lC){lT=!0;do for(var n=!1,r=lk;null!==r;){if(0!==e){var i=r.pendingLanes;if(0===i)var o=0;else{var s=r.suspendedLanes,a=r.pingedLanes;o=0xc000055&(o=(1<<31-ex(42|e)+1)-1&(i&~(s&~a)))?0xc000055&o|1:o?2|o:0}0!==o&&(n=!0,lD(r,o))}else o=aM,!(3&(o=eT(r,r===aA?o:0)))||eA(r,o)||(n=!0,lD(r,o));r=r.next}while(n);lT=!1}}function lN(){lC=lS=!1;var e,t=0;0!==lA&&(((e=window.event)&&"popstate"===e.type?e===cn||(cn=e,0):(cn=null,1))||(t=lA),lA=0);for(var n=el(),r=null,i=lk;null!==i;){var o=i.next,s=l_(i,n);0===s?(i.next=null,null===r?lk=o:r.next=o,null===o&&(lO=r)):(r=i,(0!==t||3&s)&&(lC=!0)),i=o}lM(t)}function l_(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=-0x3c00001&e.pendingLanes;0<o;){var s=31-ex(o),a=1<<s,l=i[s];-1===l?(!(a&n)||a&r)&&(i[s]=function(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return -1}}(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}if(t=aA,n=aM,n=eT(e,e===t?n:0),r=e.callbackNode,0===n||e===t&&2===aN||null!==e.cancelPendingCommit)return null!==r&&null!==r&&eo(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||eA(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&eo(r),eP(n)){case 2:case 8:n=eh;break;case 32:default:n=ed;break;case 0x10000000:n=ep}return n=ei(n,r=lj.bind(null,e)),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&eo(r),e.callbackPriority=2,e.callbackNode=null,2}function lj(e,t){var n=e.callbackNode;if(lp()&&e.callbackNode!==n)return null;var r=aM;return 0===(r=eT(e,e===aA?r:0))?null:(a3(e,r,t),l_(e,el()),null!=e.callbackNode&&e.callbackNode===n?lj.bind(null,e):null)}function lD(e,t){if(lp())return null;a3(e,t,!0)}function lP(){return 0===lA&&(lA=eE()),lA}function lR(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:tb(""+e)}function lI(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var lz=0;lz<nX.length;lz++){var lL=nX[lz];nY(lL.toLowerCase(),"on"+(lL[0].toUpperCase()+lL.slice(1)))}nY(nB,"onAnimationEnd"),nY(nF,"onAnimationIteration"),nY(nQ,"onAnimationStart"),nY("dblclick","onDoubleClick"),nY("focusin","onFocus"),nY("focusout","onBlur"),nY(nV,"onTransitionRun"),nY(nH,"onTransitionStart"),nY(nU,"onTransitionCancel"),nY(nW,"onTransitionEnd"),e0("onMouseEnter",["mouseout","mouseover"]),e0("onMouseLeave",["mouseout","mouseover"]),e0("onPointerEnter",["pointerout","pointerover"]),e0("onPointerLeave",["pointerout","pointerover"]),eJ("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),eJ("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),eJ("onBeforeInput",["compositionend","keypress","textInput","paste"]),eJ("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),eJ("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),eJ("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lq="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l$=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lq));function lB(e,t){t=(4&t)!=0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;o=a,i.currentTarget=c;try{o(i)}catch(e){oR(e)}i.currentTarget=null,o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;o=a,i.currentTarget=c;try{o(i)}catch(e){oR(e)}i.currentTarget=null,o=l}}}}function lF(e,t){var n=t[e$];void 0===n&&(n=t[e$]=new Set);var r=e+"__bubble";n.has(r)||(lU(t,e,2,!1),n.add(r))}function lQ(e,t,n){var r=0;t&&(r|=4),lU(n,e,r,t)}var lV="_reactListening"+Math.random().toString(36).slice(2);function lH(e){if(!e[lV]){e[lV]=!0,eZ.forEach(function(t){"selectionchange"!==t&&(l$.has(t)||lQ(t,!1,e),lQ(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[lV]||(t[lV]=!0,lQ("selectionchange",!1,t))}}function lU(e,t,n,r){switch(cJ(t)){case 2:var i=cW;break;case 8:i=cG;break;default:i=cX}n=i.bind(null,t,n,e),i=void 0,tA&&("touchstart"===t||"touchmove"===t||"wheel"===t)&&(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function lW(e,t,n,r,i){var o=r;if(!(1&t)&&!(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=eU(a)))return;if(5===(l=s.tag)||6===l||26===l||27===l){r=o=s;continue e}a=a.parentNode}}r=r.return}tC(function(){var r=o,i=tx(n),s=[];e:{var a=nG.get(e);if(void 0!==a){var l=tB,c=e;switch(e){case"keypress":if(0===tD(n))break e;case"keydown":case"keyup":l=t2;break;case"focusin":c="focus",l=tW;break;case"focusout":c="blur",l=tW;break;case"beforeblur":case"afterblur":l=tW;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=tH;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=tU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=t5;break;case nB:case nF:case nQ:l=tG;break;case nW:l=t3;break;case"scroll":case"scrollend":l=tQ;break;case"wheel":l=t6;break;case"copy":case"cut":case"paste":l=tX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=t4;break;case"toggle":case"beforetoggle":l=t7}var u=(4&t)!=0,h=!u&&("scroll"===e||"scrollend"===e),d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=p;if(f=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===f||null===d||null!=(m=tT(p,d))&&u.push(lG(p,m,f)),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(!(7&t)){if(a="mouseover"===e||"pointerover"===e,l="mouseout"===e||"pointerout"===e,!(a&&n!==tv&&(c=n.relatedTarget||n.fromElement)&&(eU(c)||c[eq]))&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(c=n.relatedTarget||n.toElement,l=r,null!==(c=c?eU(c):null)&&(h=L(c),u=c.tag,c!==h||5!==u&&27!==u&&6!==u)&&(c=null)):(l=null,c=r),l!==c)){if(u=tH,m="onMouseLeave",d="onMouseEnter",p="mouse",("pointerout"===e||"pointerover"===e)&&(u=t4,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:eG(l),f=null==c?a:eG(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,eU(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)t:{for(u=l,d=c,p=0,f=u;f;f=lY(f))p++;for(f=0,m=d;m;m=lY(m))f++;for(;0<p-f;)u=lY(u),p--;for(;0<f-p;)d=lY(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break t;u=lY(u),d=lY(d)}u=null}else u=null;null!==l&&lZ(s,a,l,u,!1),null!==c&&null!==h&&lZ(s,h,c,u,!0)}e:{if("select"===(l=(a=r?eG(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g,y=np;else if(nl(a)){if(nm)y=nO;else{y=nw;var b=nx}}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)?y=nk:r&&tm(r.elementType)&&(y=np);if(y&&(y=y(e,r))){nc(s,y,n,i);break e}b&&b(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&ta(a,"number",a.value)}switch(b=r?eG(r):window,e){case"focusin":(nl(b)||"true"===b.contentEditable)&&(n_=b,nj=r,nD=null);break;case"focusout":nD=nj=n_=null;break;case"mousedown":nP=!0;break;case"contextmenu":case"mouseup":case"dragend":nP=!1,nR(s,n,i);break;case"selectionchange":if(nN)break;case"keydown":case"keyup":nR(s,n,i)}if(t9)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else ns?ni(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(nn&&"ko"!==n.locale&&(ns||"onCompositionStart"!==v?"onCompositionEnd"===v&&ns&&(g=tj()):(tN="value"in(tM=i)?tM.value:tM.textContent,ns=!0)),0<(b=lX(r,v)).length&&(v=new tY(v,e,null,n,i),s.push({event:v,listeners:b}),g?v.data=g:null!==(g=no(n))&&(v.data=g))),(g=nt?function(e,t){switch(e){case"compositionend":return no(t);case"keypress":return 32!==t.which?null:(nr=!0," ");case"textInput":return" "===(e=t.data)&&nr?null:e;default:return null}}(e,n):function(e,t){if(ns)return"compositionend"===e||!t9&&ni(e,t)?(e=tj(),t_=tN=tM=null,ns=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return nn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(v=lX(r,"onBeforeInput")).length&&(b=new tY("onBeforeInput","beforeinput",null,n,i),s.push({event:b,listeners:v}),b.data=g),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var o=lR((i[eL]||null).action),s=r.submitter;s&&null!==(t=(t=s[eL]||null)?lR(t.formAction):s.getAttribute("formAction"))&&(o=t,s=null);var a=new tB("action","action",null,r,i);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==lA){var e=s?lI(i,s):new FormData(i);od(n,{pending:!0,data:e,method:i.method,action:o},null,e)}}else"function"==typeof o&&(a.preventDefault(),od(n,{pending:!0,data:e=s?lI(i,s):new FormData(i),method:i.method,action:o},o,e))},currentTarget:i}]})}}(s,e,r,n,i)}lB(s,t)})}function lG(e,t,n){return{instance:e,listener:t,currentTarget:n}}function lX(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5!==(i=i.tag)&&26!==i&&27!==i||null===o||(null!=(i=tT(e,n))&&r.unshift(lG(e,i,o)),null!=(i=tT(e,t))&&r.push(lG(e,i,o))),e=e.return}return r}function lY(e){if(null===e)return null;do e=e.return;while(e&&5!==e.tag&&27!==e.tag);return e||null}function lZ(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===c||(l=c,i?null!=(c=tT(n,o))&&s.unshift(lG(n,c,l)):i||null!=(c=tT(n,o))&&s.push(lG(n,c,l))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var lK=/\r\n?/g,lJ=/\u0000|\uFFFD/g;function l0(e){return("string"==typeof e?e:""+e).replace(lK,`
`).replace(lJ,"")}function l1(e,t){return t=l0(t),l0(e)===t}function l2(){}function l4(e,t,n,i,o,s){switch(n){case"children":"string"==typeof i?"body"===t||"textarea"===t&&""===i||th(e,i):("number"==typeof i||"bigint"==typeof i)&&"body"!==t&&th(e,""+i);break;case"className":e6(e,"class",i);break;case"tabIndex":e6(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":e6(e,n,i);break;case"style":tp(e,i,s);break;case"data":if("object"!==t){e6(e,"data",i);break}case"src":case"href":if(""===i&&("a"!==t||"href"!==n)||null==i||"function"==typeof i||"symbol"==typeof i||"boolean"==typeof i){e.removeAttribute(n);break}i=tb(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if("function"==typeof i){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof s&&("formAction"===n?("input"!==t&&l4(e,t,"name",o.name,o,null),l4(e,t,"formEncType",o.formEncType,o,null),l4(e,t,"formMethod",o.formMethod,o,null),l4(e,t,"formTarget",o.formTarget,o,null)):(l4(e,t,"encType",o.encType,o,null),l4(e,t,"method",o.method,o,null),l4(e,t,"target",o.target,o,null))),null==i||"symbol"==typeof i||"boolean"==typeof i){e.removeAttribute(n);break}i=tb(""+i),e.setAttribute(n,i);break;case"onClick":null!=i&&(e.onclick=l2);break;case"onScroll":null!=i&&lF("scroll",e);break;case"onScrollEnd":null!=i&&lF("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!=typeof i||!("__html"in i))throw Error(r(61));if(null!=(n=i.__html)){if(null!=o.children)throw Error(r(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&"function"!=typeof i&&"symbol"!=typeof i;break;case"muted":e.muted=i&&"function"!=typeof i&&"symbol"!=typeof i;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":case"innerText":case"textContent":break;case"xlinkHref":if(null==i||"function"==typeof i||"boolean"==typeof i||"symbol"==typeof i){e.removeAttribute("xlink:href");break}n=tb(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=i&&"function"!=typeof i&&"symbol"!=typeof i?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&"function"!=typeof i&&"symbol"!=typeof i?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===i?e.setAttribute(n,""):!1!==i&&null!=i&&"function"!=typeof i&&"symbol"!=typeof i?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":null==i||"function"==typeof i||"symbol"==typeof i||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":lF("beforetoggle",e),lF("toggle",e),e3(e,"popover",i);break;case"xlinkActuate":e7(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":e7(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":e7(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":e7(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":e7(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":e7(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":e7(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":e7(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":e7(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":e3(e,"is",i);break;default:2<n.length&&("o"===n[0]||"O"===n[0])&&("n"===n[1]||"N"===n[1])||e3(e,n=tg.get(n)||n,i)}}function l5(e,t,n,i,o,s){switch(n){case"style":tp(e,i,s);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!=typeof i||!("__html"in i))throw Error(r(61));if(null!=(n=i.__html)){if(null!=o.children)throw Error(r(60));e.innerHTML=n}}break;case"children":"string"==typeof i?th(e,i):("number"==typeof i||"bigint"==typeof i)&&th(e,""+i);break;case"onScroll":null!=i&&lF("scroll",e);break;case"onScrollEnd":null!=i&&lF("scrollend",e);break;case"onClick":null!=i&&(e.onclick=l2);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:if(!eK.hasOwnProperty(n))e:{if("o"===n[0]&&"n"===n[1]&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),"function"==typeof(s=null!=(s=e[eL]||null)?s[n]:null)&&e.removeEventListener(t,s,o),"function"==typeof i)){"function"!=typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,o);break e}n in e?e[n]=i:!0===i?e.setAttribute(n,""):e3(e,n,i)}}}function l3(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":lF("error",e),lF("load",e);var i,o=!1,s=!1;for(i in n)if(n.hasOwnProperty(i)){var a=n[i];if(null!=a)switch(i){case"src":o=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:l4(e,t,i,a,n,null)}}s&&l4(e,t,"srcSet",n.srcSet,n,null),o&&l4(e,t,"src",n.src,n,null);return;case"input":lF("invalid",e);var l=i=a=s=null,c=null,u=null;for(o in n)if(n.hasOwnProperty(o)){var h=n[o];if(null!=h)switch(o){case"name":s=h;break;case"type":a=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":i=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(r(137,t));break;default:l4(e,t,o,h,n,null)}}ts(e,i,l,c,u,a,s,!1),te(e);return;case"select":for(s in lF("invalid",e),o=a=i=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":i=l;break;case"defaultValue":a=l;break;case"multiple":o=l;default:l4(e,t,s,l,n,null)}t=i,n=a,e.multiple=!!o,null!=t?tl(e,!!o,t,!1):null!=n&&tl(e,!!o,n,!0);return;case"textarea":for(a in lF("invalid",e),i=s=o=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":o=l;break;case"defaultValue":s=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(r(91));break;default:l4(e,t,a,l,n,null)}tu(e,o,s,i),te(e);return;case"option":for(c in n)n.hasOwnProperty(c)&&null!=(o=n[c])&&("selected"===c?e.selected=o&&"function"!=typeof o&&"symbol"!=typeof o:l4(e,t,c,o,n,null));return;case"dialog":lF("cancel",e),lF("close",e);break;case"iframe":case"object":lF("load",e);break;case"video":case"audio":for(o=0;o<lq.length;o++)lF(lq[o],e);break;case"image":lF("error",e),lF("load",e);break;case"details":lF("toggle",e);break;case"embed":case"source":case"link":lF("error",e),lF("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(o=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:l4(e,t,u,o,n,null)}return;default:if(tm(t)){for(h in n)n.hasOwnProperty(h)&&void 0!==(o=n[h])&&l5(e,t,h,o,n,void 0);return}}for(l in n)n.hasOwnProperty(l)&&null!=(o=n[l])&&l4(e,t,l,o,n,null)}var l6=null,l7=null;function l8(e){return 9===e.nodeType?e:e.ownerDocument}function l9(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ce(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ct(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var cn=null,cr="function"==typeof setTimeout?setTimeout:void 0,ci="function"==typeof clearTimeout?clearTimeout:void 0,co="function"==typeof Promise?Promise:void 0,cs="function"==typeof queueMicrotask?queueMicrotask:"u">typeof co?function(e){return co.resolve(null).then(e).catch(ca)}:cr;function ca(e){setTimeout(function(){throw e})}function cl(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType){if("/$"===(n=i.data)){if(0===r){e.removeChild(i),ua(t);return}r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++}n=i}while(n);ua(t)}function cc(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":cc(n),eH(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function cu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}function ch(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function cd(e,t,n){switch(t=l8(n),e){case"html":if(!(e=t.documentElement))throw Error(r(452));return e;case"head":if(!(e=t.head))throw Error(r(453));return e;case"body":if(!(e=t.body))throw Error(r(454));return e;default:throw Error(r(451))}}var cf=new Map,cp=new Set;function cm(e){return"function"==typeof e.getRootNode?e.getRootNode():e.ownerDocument}var cg=F.d;F.d={f:function(){var e=cg.f(),t=a9();return e||t},r:function(e){var t=eW(e);null!==t&&5===t.tag&&"form"===t.type?op(t):cg.r(e)},D:function(e){cg.D(e),cb("dns-prefetch",e,null)},C:function(e,t){cg.C(e,t),cb("preconnect",e,t)},L:function(e,t,n){if(cg.L(e,t,n),cy&&e&&t){var r='link[rel="preload"][as="'+ti(t)+'"]';"image"===t&&n&&n.imageSrcSet?(r+='[imagesrcset="'+ti(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(r+='[imagesizes="'+ti(n.imageSizes)+'"]')):r+='[href="'+ti(e)+'"]';var i=r;switch(t){case"style":i=cx(e);break;case"script":i=cO(e)}cf.has(i)||(e=_({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),cf.set(i,e),null!==cy.querySelector(r)||"style"===t&&cy.querySelector(cw(i))||"script"===t&&cy.querySelector(cS(i))||(l3(t=cy.createElement("link"),"link",e),eY(t),cy.head.appendChild(t)))}},m:function(e,t){if(cg.m(e,t),cy&&e){var n=t&&"string"==typeof t.as?t.as:"script",r='link[rel="modulepreload"][as="'+ti(n)+'"][href="'+ti(e)+'"]',i=r;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=cO(e)}if(!cf.has(i)&&(e=_({rel:"modulepreload",href:e},t),cf.set(i,e),null===cy.querySelector(r))){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(cy.querySelector(cS(i)))return}l3(n=cy.createElement("link"),"link",e),eY(n),cy.head.appendChild(n)}}},X:function(e,t){if(cg.X(e,t),cy&&e){var n=eX(cy).hoistableScripts,r=cO(e),i=n.get(r);i||((i=cy.querySelector(cS(r)))||(e=_({src:e,async:!0},t),(t=cf.get(r))&&cE(e,t),eY(i=cy.createElement("script")),l3(i,"link",e),cy.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(r,i))}},S:function(e,t,n){if(cg.S(e,t,n),cy&&e){var r=eX(cy).hoistableStyles,i=cx(e);t=t||"default";var o=r.get(i);if(!o){var s={loading:0,preload:null};if(o=cy.querySelector(cw(i)))s.loading=5;else{e=_({rel:"stylesheet",href:e,"data-precedence":t},n),(n=cf.get(i))&&cA(e,n);var a=o=cy.createElement("link");eY(a),l3(a,"link",e),a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),a.addEventListener("load",function(){s.loading|=1}),a.addEventListener("error",function(){s.loading|=2}),s.loading|=4,cT(o,t,cy)}o={type:"stylesheet",instance:o,count:1,state:s},r.set(i,o)}}},M:function(e,t){if(cg.M(e,t),cy&&e){var n=eX(cy).hoistableScripts,r=cO(e),i=n.get(r);i||((i=cy.querySelector(cS(r)))||(e=_({src:e,async:!0,type:"module"},t),(t=cf.get(r))&&cE(e,t),eY(i=cy.createElement("script")),l3(i,"link",e),cy.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(r,i))}}};var cy=typeof document>"u"?null:document;function cb(e,t,n){if(cy&&"string"==typeof t&&t){var r=ti(t);r='link[rel="'+e+'"][href="'+r+'"]',"string"==typeof n&&(r+='[crossorigin="'+n+'"]'),cp.has(r)||(cp.add(r),e={rel:e,crossOrigin:n,href:t},null===cy.querySelector(r)&&(l3(t=cy.createElement("link"),"link",e),eY(t),cy.head.appendChild(t)))}}function cv(e,t,n,i){var o=(o=Z.current)?cm(o):null;if(!o)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=cx(n.href),(i=(n=eX(o).hoistableStyles).get(t))||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=cx(n.href);var s,a,l,c,u=eX(o).hoistableStyles,h=u.get(e);if(h||(o=o.ownerDocument||o,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=o.querySelector(cw(e)))&&!u._p&&(h.instance=u,h.state.loading=5),cf.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},cf.set(e,n),u||(s=o,a=e,l=n,c=h.state,s.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(c.preload=a=s.createElement("link"),a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),l3(a,"link",l),eY(a),s.head.appendChild(a))))),t&&null===i)throw Error(r(528,""));return h}if(t&&null!==i)throw Error(r(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=cO(n),(i=(n=eX(o).hoistableScripts).get(t))||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function cx(e){return'href="'+ti(e)+'"'}function cw(e){return'link[rel="stylesheet"]['+e+"]"}function ck(e){return _({},e,{"data-precedence":e.precedence,precedence:null})}function cO(e){return'[src="'+ti(e)+'"]'}function cS(e){return"script[async]"+e}function cC(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+ti(n.href)+'"]');if(i)return t.instance=i,eY(i),i;var o=_({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return eY(i=(e.ownerDocument||e).createElement("style")),l3(i,"style",o),cT(i,n.precedence,e),t.instance=i;case"stylesheet":o=cx(n.href);var s=e.querySelector(cw(o));if(s)return t.state.loading|=4,t.instance=s,eY(s),s;i=ck(n),(o=cf.get(o))&&cA(i,o),eY(s=(e.ownerDocument||e).createElement("link"));var a=s;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),l3(s,"link",i),t.state.loading|=4,cT(s,n.precedence,e),t.instance=s;case"script":return s=cO(n.src),(o=e.querySelector(cS(s)))?(t.instance=o,eY(o),o):(i=n,(o=cf.get(s))&&cE(i=_({},n),o),eY(o=(e=e.ownerDocument||e).createElement("script")),l3(o,"link",i),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(r(443,t.type))}else"stylesheet"!==t.type||4&t.state.loading||(i=t.instance,t.state.loading|=4,cT(i,n.precedence,e));return t.instance}function cT(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,o=i,s=0;s<r.length;s++){var a=r[s];if(a.dataset.precedence===t)o=a;else if(o!==i)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function cA(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function cE(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var cM=null;function cN(e,t,n){if(null===cM){var r=new Map,i=cM=new Map;i.set(n,r)}else(r=(i=cM).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var o=n[i];if(!(o[eV]||o[ez]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var s=o.getAttribute(t)||"";s=e+s;var a=r.get(s);a?a.push(o):r.set(s,[o])}}return r}function c_(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function cj(e){return!("stylesheet"===e.type&&!(3&e.state.loading))}var cD=null;function cP(){}function cR(){if(this.count--,0===this.count){if(this.stylesheets)cz(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var cI=null;function cz(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,cI=new Map,t.forEach(cL,e),cI=null,cR.call(e))}function cL(e,t){if(!(4&t.state.loading)){var n=cI.get(e);if(n)var r=n.get(null);else{n=new Map,cI.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<i.length;o++){var s=i[o];("LINK"===s.nodeName||"not all"!==s.getAttribute("media"))&&(n.set(s.dataset.precedence,s),r=s)}r&&n.set(null,r)}s=(i=t.instance).getAttribute("data-precedence"),(o=n.get(s)||r)===r&&n.set(null,i),n.set(s,i),this.count++,r=cR.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),o?o.parentNode.insertBefore(i,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var cq={$$typeof:f,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function c$(e,t,n,r,i,o,s,a){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=eN(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eN(0),this.hiddenUpdates=eN(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=o,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function cB(e,t,n,r,i,o,s,a,l,c,u,h){return e=new c$(e,t,n,s,a,l,c,h),t=1,!0===o&&(t|=24),o=ac(3,null,null,t),e.current=o,o.stateNode=e,t=r5(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:r,isDehydrated:n,cache:t},sx(o),e}function cF(e,t,n,r,i,o){var s;i=n6,null===r.context?r.context=i:r.pendingContext=i,(r=sk(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(r.callback=o),null!==(n=sO(e,r,t))&&(a5(n,e,t),sS(n,e,t))}function cQ(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function cV(e,t){cQ(e,t),(e=e.alternate)&&cQ(e,t)}function cH(e){if(13===e.tag){var t=n4(e,0x4000000);null!==t&&a5(t,e,0x4000000),cV(e,0x4000000)}}var cU=!0;function cW(e,t,n,r){var i=M.T;M.T=null;var o=F.p;try{F.p=2,cX(e,t,n,r)}finally{F.p=o,M.T=i}}function cG(e,t,n,r){var i=M.T;M.T=null;var o=F.p;try{F.p=8,cX(e,t,n,r)}finally{F.p=o,M.T=i}}function cX(e,t,n,r){if(cU){var i=cY(r);if(null===i)lW(e,t,r,cZ,n),c8(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return c1=c9(c1,e,t,n,r,i),!0;case"dragenter":return c2=c9(c2,e,t,n,r,i),!0;case"mouseover":return c4=c9(c4,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return c5.set(o,c9(c5.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,c3.set(o,c9(c3.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(c8(e,r),4&t&&-1<c7.indexOf(e)){for(;null!==i;){var o=eW(i);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var s=eC(o.pendingLanes);if(0!==s){var a=o;for(a.pendingLanes|=2,a.entangledLanes|=2;s;){var l=1<<31-ex(s);a.entanglements[1]|=l,s&=~l}lE(o),6&aT||(aU=el()+500,lM(0))}}break;case 13:null!==(a=n4(o,2))&&a5(a,o,2),a9(),cV(o,2)}if(null===(o=cY(r))&&lW(e,t,r,cZ,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else lW(e,t,r,null,n)}}function cY(e){return cK(e=tx(e))}var cZ=null;function cK(e){if(cZ=null,null!==(e=eU(e))){var t=L(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=q(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return cZ=e,null}function cJ(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ec()){case eu:return 2;case eh:return 8;case ed:case ef:return 32;case ep:return 0x10000000;default:return 32}default:return 32}}var c0=!1,c1=null,c2=null,c4=null,c5=new Map,c3=new Map,c6=[],c7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function c8(e,t){switch(e){case"focusin":case"focusout":c1=null;break;case"dragenter":case"dragleave":c2=null;break;case"mouseover":case"mouseout":c4=null;break;case"pointerover":case"pointerout":c5.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":c3.delete(t.pointerId)}}function c9(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&null!==(t=eW(t))&&cH(t)):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i)),e}function ue(e){var t=eU(e.target);if(null!==t){var n=L(t);if(null!==n){if(13===(t=n.tag)){if(null!==(t=q(n))){e.blockedOn=t,function(e,t){var n=F.p;try{return F.p=e,t()}finally{F.p=n}}(e.priority,function(){if(13===n.tag){var e=a2(),t=n4(n,e);null!==t&&a5(t,n,e),cV(n,e)}});return}}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=3===n.tag?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=cY(e.nativeEvent);if(null!==n)return null!==(t=eW(n))&&cH(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);tv=r,n.target.dispatchEvent(r),tv=null,t.shift()}return!0}function un(e,t,n){ut(e)&&n.delete(t)}function ur(){c0=!1,null!==c1&&ut(c1)&&(c1=null),null!==c2&&ut(c2)&&(c2=null),null!==c4&&ut(c4)&&(c4=null),c5.forEach(un),c3.forEach(un)}function ui(e,t){e.blockedOn===t&&(e.blockedOn=null,c0||(c0=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,ur)))}var uo=null;function us(e){uo!==e&&(uo=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){uo===e&&(uo=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!=typeof r){if(null===cK(r||n))continue;break}var o=eW(n);null!==o&&(e.splice(t,3),t-=3,od(o,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function ua(e){function t(t){return ui(t,e)}null!==c1&&ui(c1,e),null!==c2&&ui(c2,e),null!==c4&&ui(c4,e),c5.forEach(t),c3.forEach(t);for(var n=0;n<c6.length;n++){var r=c6[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<c6.length&&null===(n=c6[0]).blockedOn;)ue(n),null===n.blockedOn&&c6.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],o=n[r+1],s=i[eL]||null;if("function"==typeof o)s||us(n);else if(s){var a=null;if(o&&o.hasAttribute("formAction")){if(i=o,s=o[eL]||null)a=s.formAction;else if(null!==cK(i))continue}else a=s.action;"function"==typeof a?n[r+1]=a:(n.splice(r,3),r-=3),us(n)}}}function ul(e){this._internalRoot=e}function uc(e){this._internalRoot=e}uc.prototype.render=ul.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));cF(t.current,a2(),e,t,null,null)},uc.prototype.unmount=ul.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;0===e.tag&&lp(),cF(e.current,2,null,e,null,null),a9(),t[eq]=null}},uc.prototype.unstable_scheduleHydration=function(e){if(e){var t=eR();e={blockedOn:null,target:e,priority:t};for(var n=0;n<c6.length&&0!==t&&t<c6[n].priority;n++);c6.splice(n,0,e),0===n&&ue(e)}};var uu=N.version;if("19.0.0"!==uu)throw Error(r(527,uu,"19.0.0"));if(F.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t)throw"function"==typeof e.render?Error(r(188)):Error(r(268,e=Object.keys(e).join(",")));return e=null===(e=null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=L(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,i=t;;){var o=n.return;if(null===o)break;var s=o.alternate;if(null===s){if(null!==(i=o.return)){n=i;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return $(o),e;if(s===i)return $(o),t;s=s.sibling}throw Error(r(188))}if(n.return!==i.return)n=o,i=s;else{for(var a=!1,l=o.child;l;){if(l===n){a=!0,n=o,i=s;break}if(l===i){a=!0,i=o,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=o;break}if(l===i){a=!0,i=s,n=o;break}l=l.sibling}if(!a)throw Error(r(189))}}if(n.alternate!==i)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(t))?function e(t){var n=t.tag;if(5===n||26===n||27===n||6===n)return t;for(t=t.child;null!==t;){if(null!==(n=e(t)))return n;t=t.sibling}return null}(e):null)?null:e.stateNode},"u">typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var uh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uh.isDisabled&&uh.supportsFiber)try{ey=uh.inject({bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:M,findFiberByHostInstance:eU,reconcilerVersion:"19.0.0"}),eb=uh}catch{}}return U9.createRoot=function(e,t){if(!i(e))throw Error(r(299));var n=!1,o="",s=oI,a=oz,l=oL,c=null;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(o=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(a=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&(c=t.unstable_transitionCallbacks)),t=cB(e,1,!1,null,null,n,o,s,a,l,c,null),e[eq]=t.current,lH(8===e.nodeType?e.parentNode:e),new ul(t)},U9.hydrateRoot=function(e,t,n){if(!i(e))throw Error(r(299));var o=!1,s="",a=oI,l=oz,c=oL,u=null,h=null;return null!=n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onUncaughtError&&(a=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&(u=n.unstable_transitionCallbacks),void 0!==n.formState&&(h=n.formState)),(t=cB(e,1,!0,t,n??null,o,s,a,l,c,u,h)).context=n6,n=t.current,(s=sk(o=a2())).callback=null,sO(n,s,o),t.current.lanes=o,e_(t,o),lE(t),e[eq]=t.current,lH(e),new uc(t)},U9.version="19.0.0",U9}();var Wn=U8.exports;function Wr({question:e,result:t,sql:n,code:r,error:i}){let[o,s]=(0,N.useState)(!1),[a,l]=(0,N.useState)(!1);return M.j.jsxs("div",{className:"flex flex-col space-y-4",children:[M.j.jsx("div",{className:"prose dark:prose-invert prose-sm max-w-none py-1",dangerouslySetInnerHTML:{__html:Of.parse(t||i)}}),M.j.jsxs("div",{className:"flex flex-col gap-4",children:[M.j.jsx("div",{children:r&&M.j.jsxs(M.j.Fragment,{children:[M.j.jsxs("button",{onClick:()=>s(!o),className:"w-fit text-xs bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded px-2 py-1 transition-colors flex items-center gap-1",children:[M.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:[M.j.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),M.j.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),o?"Hide Code":"Show Code"]}),M.j.jsx("div",{className:(0,M.t)("transition-all",o?"h-96 overflow-scroll":"h-0 overflow-hidden"),children:M.j.jsx(kp,{code:r,editable:!1,language:"python"})})]})}),M.j.jsx("div",{children:n&&M.j.jsxs(M.j.Fragment,{children:[M.j.jsxs("button",{onClick:()=>l(!a),className:"w-fit text-xs bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-t px-2 py-1 transition-colors flex items-center gap-1",children:[M.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:[M.j.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),M.j.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),a?"Hide SQL":"Show SQL"]}),M.j.jsx("div",{className:(0,M.t)("transition-all",a?"h-auto overflow-scroll":"h-0 overflow-hidden"),children:M.j.jsx(kp,{code:n,editable:!1,language:"sql"})})]})})]})]})}let Wi={text_to_sql_tool:"SQL",pdf_citations_tool:"PDF",web_search_tool:"Web"};function Wo({citations:e}){let t=(0,N.useContext)(Um),{analyses:n}=t,[r,i]=(0,N.useState)(!1),[o,s]=(0,N.useState)([]),[a,l]=(0,N.useState)(new Set),[c,u]=(0,N.useState)("all"),[h,d]=(0,N.useState)(null),f=(0,N.useMemo)(()=>{if(!e)return null;console.groupCollapsed("Parsing citations");try{return e.map(e=>{let t={...e,parsed:""};if(e.text||(t.parsed=""),-1===e.text.indexOf("<latex-block>")&&-1===e.text.indexOf("<latex-inline>"))t.parsed=e.text;else{let n=e.text;t.parsed=function(e){try{let t=[/<latex-block>([\s\S]*?)<\/latex-block>/g,/<latex-inline>([\s\S]*?)<\/latex-inline>/g],n=[];if(!e)return null;for(let r=0;r<t.length;r++){let i;let o=t[r];do(i=o.exec(e))&&n.push(i);while(i)}if(n&&n.length>0){console.groupCollapsed("Latex Matches"),console.log(e),console.log(n.map(e=>e.index)),n.sort((e,t)=>e.index-t.index),console.log("matches",n);let t=[];n[0].index>0&&t.push(e.slice(0,n[0].index));for(let r=0;r<n.length;r++){let i=n[r],o=i[0].includes("<latex-block>"),s=r<n.length-1?n[r+1].index:e.length,a=e.slice(i.index+i[0].length,s);if(o)t.push(Up.renderToString(i[1],{displayMode:!0,output:"html"})),a.length>0&&t.push(a);else{let e=Up.renderToString(i[1],{displayMode:!1,output:"html"});t.length>0?t[t.length-1]+=e+a:t.push(e+a)}}return console.groupEnd(),t.join("")}return console.log("No latex matches, returning text as is"),e}catch(t){return console.error(t),e}finally{}}(n)}return t.citations&&Array.isArray(e.citations)&&e.citations.length>0&&e.citations.forEach(e=>{let[n,r]=e.document_title.split(":"),i=Wi[n.trim()]||n;t.parsed=`${t.parsed}<span class='report-citation' data-document-title='${e.document_title}' data-tool-name='${n}' data-citation-id='${r.trim()}' data-expanded='0'><span class='report-citation-label'>${i}</span><span class='report-citation-content initial'></span></span>`}),t}).filter(e=>e.parsed)}catch(e){return console.error(e),null}finally{console.groupEnd()}},[e]);(0,N.useEffect)(()=>{document.querySelectorAll(".report-citation").forEach((e,r)=>{let i=e.querySelector(".report-citation-label");i&&i.addEventListener("click",function(r){var i;r.preventDefault(),r.stopPropagation();let o=e.querySelector(".report-citation-content");+(null==(i=null==e?void 0:e.dataset)?void 0:i.expanded)||(function(){var r,i,o;let s=null,a=null;try{a=e.querySelector(".report-citation-content");let t=null==(r=null==e?void 0:e.dataset)?void 0:r.citationId,l=null==(i=null==e?void 0:e.dataset)?void 0:i.documentTitle;null==(o=null==e?void 0:e.dataset)||o.toolName,s=M.j.jsxs(M.j.Fragment,{children:[M.j.jsx("span",{className:"report-citation-header",children:"Citation"}),p(l,n.findIndex(e=>e.analysis_id===t))]})}catch{s=M.j.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"Error getting citation content"})}finally{Wn.createRoot(a).render(M.j.jsx(Um.Provider,{value:t,children:s}))}}(),e.dataset.expanded=1),o.classList.remove("initial"),o.classList.contains("show")?(o.classList.remove("show"),o.classList.add("hide")):(o.classList.add("show"),o.classList.remove("hide"))})})},[[e]]);let p=(e,t)=>{if(!n||-1===t)return null;let r=n[t];return e.includes("text_to_sql")?M.j.jsx("div",{className:"bg-white dark:bg-gray-800 rounded",children:M.j.jsx(Fe,{analysis:r})}):e.includes("pdf_citations")?M.j.jsx("div",{className:"bg-white dark:bg-gray-800 rounded",children:M.j.jsx(Fn,{analysis:r})}):e.includes("web_search")?M.j.jsx("div",{className:"bg-white dark:bg-gray-800 rounded",children:M.j.jsx(Ft,{analysis:r})}):e.includes("code_interpreter")?M.j.jsx("div",{className:"bg-white dark:bg-gray-800 rounded",children:M.j.jsx(Wr,{...r.result})}):M.j.jsx("div",{className:"text-sm bg-white dark:bg-gray-800 rounded",children:M.j.jsx("div",{className:"font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Analysis"})})};(0,N.useEffect)(()=>U7({onDragStart:({source:e})=>d(e.data.id),onDrop:({location:e,source:t})=>{d(null);let n=e.current.dropTargets[0];if(!n)return;let r=t.data.id,i=n.data.id,a=o.findIndex(e=>e.id===r),l=o.findIndex(e=>e.id===i);if(a<0||l<0||a===l){console.warn("Drag and drop failed: Invalid indices",{sourceId:r,targetId:i,sourceIndex:a,targetIndex:l});return}s(e=>(function(e){var t=e.list,n=e.startIndex,r=e.finishIndex;if(-1===n||-1===r)return Array.from(t);var i=Array.from(t),o=Ub(i.splice(n,1),1)[0];return i.splice(r,0,o),i})({list:e,startIndex:a,finishIndex:l}))}}),[o]),(0,N.useEffect)(()=>{if(!n){s([]);return}let e=[];n.forEach(t=>{var n,r,i;if(t.rows&&t.rows.length>0&&t.columns&&t.columns.length>0&&"pdf_citations_tool"!==t.function_name&&"web_search_tool"!==t.function_name)try{let n=t.rows.map(e=>{let n={};return t.columns.forEach(t=>{let r=t.title||t.dataIndex;n[r]=void 0===e[r]||null===e[r]?"":e[r]}),n}),r=(0,_.T)(n),i=(0,_.p)(r),o=i.columns.map(e=>{let t=e.isDate||!1;if(!t&&i.data.length>0){let n=i.data.slice(0,Math.min(5,i.data.length)).map(t=>t[e.key]).filter(e=>null!=e&&""!==e);n.length>0&&n.every(e=>!isNaN(new Date(e).getTime()))&&(t=!0)}return{...e,description:"",isDate:t,dateToUnix:e=>{if(!e)return null;let t=new Date(e);return isNaN(t.getTime())?null:t.getTime()}}}),s=T3({data:i.data,availableColumns:o});s.autoSelectVariables(),e.push({id:t.analysis_id,type:"chart",analysis:t,chartData:{csvString:r,data:i,chartManager:s,reactive_vars:{},chart_images:{},analysis:{}}})}catch(e){console.error(`Error processing chart analysis ${t.analysis_id}:`,e)}else"pdf_citations_tool"===t.function_name&&null!=(n=t.result)&&n.citations&&Array.isArray(t.result.citations)&&t.result.citations.length>0?e.push({id:t.analysis_id,type:"pdf",analysis:t}):"web_search_tool"===t.function_name&&t.result&&(t.result.answer||t.result.reference_sources&&Array.isArray(t.result.reference_sources)&&t.result.reference_sources.length>0)?e.push({id:t.analysis_id,type:"webSearch",analysis:t}):"code_interpreter_tool"===t.function_name&&t.result&&!(null!=(r=null==t?void 0:t.result)&&r.error)&&null!=(i=null==t?void 0:t.result)&&i.result&&t.result.sql&&e.push({id:t.analysis_id,type:"codeInterpreter",analysis:t})}),s(e),l(new Set),u("all")},[n]);let m=(0,N.useMemo)(()=>{let e={charts:0,pdfs:0,webSearches:0,codeInterpreterRuns:0,hidden:a.size};return o.forEach(t=>{a.has(t.id)||("chart"===t.type?e.charts++:"pdf"===t.type?e.pdfs++:"webSearch"===t.type?e.webSearches++:"codeInterpreter"===t.type&&e.codeInterpreterRuns++)}),e},[o,a]),g=(0,N.useMemo)(()=>"hidden"===c?o.filter(e=>a.has(e.id)):"all"===c?o.filter(e=>!a.has(e.id)):o.filter(e=>e.type===("charts"===c?"chart":"pdfs"===c?"pdf":"webSearches"===c?"webSearch":"codeInterpreter")&&!a.has(e.id)),[o,c,a]),y=(0,N.useCallback)(e=>{l(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},[]);return r&&n&&n.length>0?M.j.jsxs("div",{className:"flex flex-col space-y-6 mt-10",children:[M.j.jsxs("div",{className:"flex flex-col gap-4",children:[M.j.jsxs("div",{className:"flex justify-between items-center",children:[M.j.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200",children:"Content Dashboard"}),M.j.jsxs("button",{onClick:()=>i(!1),className:"flex items-center gap-2 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-300 rounded-md px-3 py-1.5 font-medium transition-colors",children:[M.j.jsx(M.X,{className:"w-4 h-4"}),"Close Dashboard"]})]}),M.j.jsxs("div",{className:"flex flex-wrap gap-3 pb-2 border-b dark:border-gray-700",children:[M.j.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 self-center mr-2",children:"Filter:"}),M.j.jsxs("button",{onClick:()=>u("all"),className:`px-3 py-1 text-sm rounded-full flex items-center gap-1 ${"all"===c?"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300 ring-1 ring-blue-300 dark:ring-blue-600":"bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:["All (",m.charts+m.pdfs+m.webSearches,")"]}),m.charts>0&&M.j.jsxs("button",{onClick:()=>u("charts"),className:`px-3 py-1 text-sm rounded-full flex items-center gap-1 ${"charts"===c?"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300 ring-1 ring-blue-300 dark:ring-blue-600":"bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[M.j.jsx(B,{className:"w-4 h-4"}),"Charts (",m.charts,")"]}),m.pdfs>0&&M.j.jsxs("button",{onClick:()=>u("pdfs"),className:`px-3 py-1 text-sm rounded-full flex items-center gap-1 ${"pdfs"===c?"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300 ring-1 ring-blue-300 dark:ring-blue-600":"bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[M.j.jsx(M.a9,{className:"w-4 h-4"}),"PDFs (",m.pdfs,")"]}),m.webSearches>0&&M.j.jsxs("button",{onClick:()=>u("webSearches"),className:`px-3 py-1 text-sm rounded-full flex items-center gap-1 ${"webSearches"===c?"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300 ring-1 ring-blue-300 dark:ring-blue-600":"bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[M.j.jsx(es,{className:"w-4 h-4"}),"Web (",m.webSearches,")"]}),m.codeInterpreterRuns>0&&M.j.jsxs("button",{onClick:()=>u("codeInterpreterRuns"),className:`px-3 py-1 text-sm rounded-full flex items-center gap-1 ${"codeInterpreterRuns"===c?"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300 ring-1 ring-blue-300 dark:ring-blue-600":"bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[M.j.jsx(X,{className:"w-4 h-4"}),"Code (",m.codeInterpreterRuns,")"]}),m.hidden>0&&M.j.jsxs("button",{onClick:()=>u("hidden"),className:`px-3 py-1 text-sm rounded-full flex items-center gap-1 ${"hidden"===c?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/40 dark:text-yellow-300 ring-1 ring-yellow-300 dark:ring-yellow-600":"bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[M.j.jsx(Y,{className:"w-4 h-4"}),"Hidden (",m.hidden,")"]})]})]}),g.length>0?M.j.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[M.j.jsx("div",{className:"flex flex-col gap-6",children:g.filter((e,t)=>t%2==0).map(e=>M.j.jsx(Ws,{isHidden:a.has(e.id),item:e,isDragging:h===e.id,toggleHidden:y},e.id))}),M.j.jsx("div",{className:"flex flex-col gap-6",children:g.filter((e,t)=>t%2!=0).map(e=>M.j.jsx(Ws,{item:e,isHidden:a.has(e.id),isDragging:h===e.id,toggleHidden:y},e.id))})]}):M.j.jsx("div",{className:"text-center py-10 text-gray-500 dark:text-gray-400",children:"hidden"===c?"No hidden items.":"No items match the current filter."})]}):M.j.jsxs("div",{className:"flex flex-col space-y-4 mt-10",children:[o.length>0&&M.j.jsx("div",{className:"flex justify-end",children:M.j.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 text-sm bg-blue-50 hover:bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:hover:bg-blue-800/40 dark:text-blue-400 rounded-md px-3 py-1.5 font-medium transition-colors",children:[M.j.jsx(et,{className:"w-4 h-4"}),"View Content Dashboard (",o.length,")"]})}),M.j.jsx("div",{className:"prose dark:prose-invert prose-sm max-w-none py-1",dangerouslySetInnerHTML:{__html:Of.parse(f.map(e=>e.parsed).join(""))}})]})}let Ws=({item:e,isHidden:t,isDragging:n,toggleHidden:r})=>{var i;let[o,s]=(0,N.useState)(!1),a=(0,N.useRef)(null),[l,c]=(0,N.useState)(!1);(0,N.useEffect)(()=>{let t=a.current;if(t)return UU(function(e){return UU(U3.registerUsage(),(U4.set(e.element,e),function(){U4.delete(e.element)}),UW(e.element,{attribute:"draggable",value:"true"}))}({element:t,getInitialData:()=>({id:e.id})}),U6({element:t,getData:()=>({id:e.id}),getIsSticky:()=>!0}))},[e.id]);let u=e.analysis.question||(null==(i=e.analysis.inputs)?void 0:i.question)||("chart"===e.type?"Chart Analysis":"pdf"===e.type?"PDF Citation":"webSearch"===e.type?"Web Search":"Analysis"),h="chart"===e.type?M.j.jsx(B,{className:"min-w-3 min-h-3 w-3 h-3 text-blue-500 dark:text-blue-400"}):"pdf"===e.type?M.j.jsx(M.a9,{className:"min-w-3 min-h-3 w-3 h-3 text-green-500 dark:text-green-400"}):"webSearch"===e.type?M.j.jsx(es,{className:"min-w-3 min-h-3 w-3 h-3 text-purple-500 dark:text-purple-400"}):"codeInterpreter"===e.type?M.j.jsx(X,{className:"min-w-3 min-h-3 w-3 h-3 text-purple-500 dark:text-purple-400"}):null;(0,N.useEffect)(()=>{!l&&o&&c(!0)},[o,l]);let d=(0,N.useMemo)(()=>l||o?M.j.jsx("div",{className:"p-4",children:M.j.jsxs(kf,{children:["chart"===e.type&&e.chartData&&M.j.jsx(P5,{stepData:e.chartData,initialQuestion:e.analysis.question,initialOptionsExpanded:!1},e.id),"pdf"===e.type&&M.j.jsx(Fn,{analysis:e.analysis}),"webSearch"===e.type&&M.j.jsx(Ft,{analysis:e.analysis}),"codeInterpreter"===e.type&&M.j.jsx(Wr,{...e.analysis.result})]})}):null,[l,o]);return M.j.jsxs("div",{ref:a,className:`bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-600 overflow-hidden shadow-sm transition-opacity ${n?"opacity-50 ring-2 ring-blue-500":"opacity-100"} ${t?"border-dashed border-yellow-500 dark:border-yellow-600":""}`,children:[M.j.jsxs("div",{className:"flex justify-between items-center p-3 border-b dark:border-gray-700 bg-gray-100 dark:bg-gray-700",children:[M.j.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[M.j.jsx("button",{className:"cursor-grab text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 p-1 -ml-1",children:M.j.jsx(M.ag,{size:16})}),h,M.j.jsx("h4",{className:"font-medium text-sm text-gray-700 dark:text-gray-300",title:u,children:u})]}),M.j.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[M.j.jsx("button",{onClick:()=>r(e.id),title:t?"Unhide Card":"Hide Card",className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",children:t?M.j.jsx(Z,{size:16}):M.j.jsx(Y,{size:16})}),!t&&M.j.jsx("button",{onClick:()=>s(e=>!e),title:o?"Collapse Card":"Expand Card",className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",children:o?M.j.jsx(U,{size:16}):M.j.jsx(M.E,{size:16})})]})]}),M.j.jsx("div",{className:`transition-all duration-300 ease-in-out ${o?"h-[600px] opacity-100 overflow-scroll":"h-0 opacity-0 overflow-hidden"}`,style:{maxHeight:o?"800px":"0px"},children:d})]})};function Wa({apiEndpoint:e,reportId:t,projectName:n,token:r,onReportParsed:i=()=>{},onDelete:o=()=>{}}){let[s,a]=(0,N.useState)({}),[l,c]=(0,N.useState)([]),[u,h]=(0,N.useState)([]),[d,f]=(0,N.useState)(null),[p,m]=(0,N.useState)(null),[g,y]=(0,N.useState)(null),[b,v]=(0,N.useState)(!0),[x,w]=(0,N.useState)(!1),[k,O]=(0,N.useState)(!1),[S,C]=(0,N.useState)(!1),T=(0,N.useRef)(null);if((0,N.useEffect)(()=>{(!1!==b||null===d)&&t&&n&&(async(t,n)=>{try{v(!0);let o=await Wv(e,t,n,r);o.parsed.mdx&&f(o.parsed.mdx),o.parsed.tables&&a(o.parsed.tables),o.analyses&&c(o.analyses),o.comments&&h(o.comments),o.report_with_citations&&m(o.report_with_citations),i&&i(o)}catch(e){console.error(e),y(e.message||String(e))}finally{v(!1)}})(t,n)},[t]),(0,N.useEffect)(()=>{let e=e=>{T.current&&!T.current.contains(e.target)&&w(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),b)return M.j.jsx(B8,{});if(g)return M.j.jsx(B9,{error:g});l.filter(e=>!(null!=e&&e.error)||""===e.error);let A=()=>{let e=`report-${t}.md`;KE(p?p.map(e=>e.text||"").join(`

`):d||"",e),w(!1)},E=()=>{let e=`report-${t}.pdf`;KM(p?p.map(e=>e.text||"").join(`

`):d||"",e),w(!1)},_=()=>{try{let i=p?p.map(e=>e.text||"").join(`

`):d||"";w(!1),KA(i,t,e,n,r,C).catch(e=>{console.error(e)})}catch(e){console.error(e)}};return M.j.jsx(Um.Provider,{value:{apiEndpoint:e,tables:s,multiTables:{},images:{},analyses:l,executiveSummary:{title:"",introduction:"",recommendations:[]},reportId:t,projectName:n,token:r,commentManager:KS({apiEndpoint:e,reportId:t,projectName:n,token:r,initialComments:u}),isLoading:S,setIsLoading:C},children:M.j.jsxs("div",{className:"relative overflow-auto",children:[S&&M.j.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:M.j.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-5 flex flex-col items-center shadow-lg",children:[M.j.jsx("div",{className:"w-12 h-12 border-t-4 border-blue-500 border-solid rounded-full animate-spin mb-4"}),M.j.jsx("p",{className:"text-gray-800 dark:text-gray-200 font-medium",children:"Generating podcast transcript..."}),M.j.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-2",children:"This may take a minute, please wait."})]})}),M.j.jsx("div",{className:"relative oracle-report-ctr w-full",children:p&&p.length>0?M.j.jsxs("div",{className:"w-full max-w-none sm:max-w-3xl lg:max-w-4xl xl:max-w-5xl 2xl:max-w-6xl mx-auto py-2 px-2 sm:px-4 md:px-6 mb-12 md:mb-0",children:[M.j.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 z-10 flex items-center justify-between px-4 py-2 border-b dark:border-gray-700",children:[M.j.jsx(M.D,{variant:"danger",onClick:()=>O(!0),children:"Delete"}),M.j.jsx(()=>M.j.jsxs("div",{className:"relative z-50",ref:T,children:[M.j.jsx(M.D,{variant:"secondary",onClick:()=>w(!x),className:x?"bg-gray-100 dark:bg-gray-700":"",children:M.j.jsx(M.ad,{className:"w-5 h-5"})}),x&&M.j.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg z-50 border dark:border-gray-700",children:M.j.jsxs("div",{className:"py-1",children:[M.j.jsxs("button",{onClick:A,className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center",children:[M.j.jsx(J,{className:"w-4 h-4 mr-2"}),"Export as Markdown"]}),M.j.jsxs("button",{onClick:E,className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center",children:[M.j.jsx(J,{className:"w-4 h-4 mr-2"}),"Export as PDF"]}),M.j.jsx("button",{onClick:_,disabled:S,className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center",children:S?M.j.jsxs(M.j.Fragment,{children:[M.j.jsx("div",{className:"w-4 h-4 mr-2 border-t-2 border-blue-500 border-solid rounded-full animate-spin"}),"Generating podcast..."]}):M.j.jsxs(M.j.Fragment,{children:[M.j.jsx(ei,{className:"w-4 h-4 mr-2"}),"Export as Podcast"]})})]})})]}),{}),M.j.jsx(M.e,{open:k,onOk:()=>{o(t,n),O(!1)},onCancel:()=>O(!1),okText:"Yes, Delete",okVariant:"danger",title:"Delete Report",children:M.j.jsx("p",{children:"Are you sure you want to delete this report? This action cannot be undone."})})]}),M.j.jsx(Wo,{citations:p})]}):M.j.jsx(B1,{extensions:Kx,content:d,immediatelyRender:!1,editable:!1,slotBefore:M.j.jsx(Kj,{onDelete:o}),editorProps:{attributes:{class:"w-full max-w-none sm:max-w-3xl lg:max-w-4xl xl:max-w-5xl 2xl:max-w-6xl oracle-report-tiptap relative prose prose-base dark:prose-invert mx-auto py-2 px-2 sm:px-4 md:px-6 mb-12 md:mb-0 focus:outline-none *:cursor-default"}}})})]})})}let Wl={DONE:"DONE",ERRORED:"ERRORED",THINKING:"THINKING",INITIALIZED:"INITIALIZED"};function Wc(e,t){let n=[],r=new DOMParser().parseFromString(e,"text/html").querySelectorAll(t);for(let e=0;e<r.length;e++){let t=r[e],i=t.outerHTML,o={};for(let e=0;e<t.attributes.length;e++){let n=t.attributes[e];o[n.name]=n.value}let s=t.innerHTML;n.push({fullText:i,attributes:o,innerContent:s})}return n}class Wu{constructor(e,t,n,r){z(this,"mdx"),z(this,"tables"),z(this,"multiTables"),z(this,"images"),z(this,"table_csv"),z(this,"sql"),z(this,"generated_qn"),z(this,"parseTables",()=>{let e=function(e,t,n,r){let i={tables:{},multiTables:{}};for(let t of Wc(e,"table")){let n=crypto.randomUUID();e=e.replace(t.fullText,`<oracle-table id="${n}"></oracle-table>`);let{columns:o,data:s}=(0,_.p)(t.attributes.csv);i.tables[n]={columns:o,data:s,...t},i.tables[n].attributes={...i.tables[n].attributes,generated_qn:r}}for(let t of Wc(e,"multitable")){let n=crypto.randomUUID(),r=Wc(t.fullText,"oracle-table");e=e.replace(t.fullText,`<oracle-multi-table id="${n}"></oracle-multi-table>`),i.multiTables[n]={tableIds:r.map(e=>e.attributes.id),...t}}if(0===Object.keys(i.multiTables).length&&t&&n){let{columns:o,data:s}=(0,_.p)(t);i.tables["default-table"]={columns:o,data:s,attributes:{sql:n,csv:t,generated_qn:r,type:"fetched_table_csv"}},i.multiTables["default-multi-table"]={tableIds:["default-table"],attributes:{},fullText:'<multitable><oracle-table id="default-table"></oracle-table></multitable>',innerText:'<oracle-table id="default-table"></oracle-table>'},e+='<oracle-multi-table id="default-multi-table"><oracle-table id="default-table"></oracle-table></oracle-multi-table>'}return{mdx:e,...i}}(this.mdx,this.table_csv,this.sql,this.generated_qn);return this.tables=e.tables,this.multiTables=e.multiTables,this.mdx=e.mdx,this}),z(this,"parseImages",()=>{let e=function(e){let t={images:{}};for(let n of Wc(e,"image")){let r=crypto.randomUUID();e=e.replace(n.fullText,`<oracle-image id="${r}"></oracle-image>`),t.images[r]=n}return{mdx:e,...t}}(this.mdx);return this.images=e.images,this.mdx=e.mdx,this}),z(this,"cleanup",()=>{let e=Wc(this.mdx,"oracle-comment-handler");if(e.length>0)for(let t of e)this.mdx=this.mdx.replace(t.fullText,"");return this.mdx=this.mdx+`

<oracle-comment-handler/>`,this}),z(this,"getParsed",()=>Object.assign({},{mdx:this.mdx,tables:Object.assign({},this.tables),multiTables:Object.assign({},this.multiTables),images:Object.assign({},this.images)})),this.mdx=e,this.tables={},this.multiTables={},this.images={},this.table_csv=t||"",this.sql=n||"",this.generated_qn=r||""}}let Wh=(e,t,n,r)=>{let i=new Wu(e,t,n,r);return i.parseTables().parseImages().cleanup(),i.getParsed()},Wd=e=>{let t=e;return(t=(t=(t=(t=(t=t.replace(/<oracle-table[^>]*><\/oracle-table>/g,"")).replace(/<oracle-multi-table[^>]*><\/oracle-multi-table>/g,"")).replace(/<oracle-image[^>]*><\/oracle-image>/g,"")).replace(/<oracle-comment-handler\/>/g,"")).replace(/<oracle-[^>]*>/g,"")).replace(/<\/oracle-[^>]*>/g,"")},Wf=async(e,t,n,r)=>{let i=await fetch((0,_.F)({protocol:"http",path:"oracle/get_report_mdx",apiEndpoint:e}),{method:"POST",headers:{"Content-Type":"application/json",mode:"no-cors"},body:JSON.stringify({db_name:n,token:r,report_id:t})});if(!i.ok)throw Error("Failed to fetch mdx");return await i.json()},Wp=async(e,t,n,r,i)=>{if(!(await fetch((0,_.F)({protocol:"http",path:"oracle/update_report_mdx",apiEndpoint:e}),{method:"POST",headers:{"Content-Type":"application/json",mode:"no-cors"},body:JSON.stringify({db_name:n,token:r,report_id:t,tiptap_mdx:i})})).ok)throw Error("Failed to update mdx")},Wm=async(e,t,n,r,i)=>{let o=await fetch((0,_.F)({protocol:"http",path:"oracle/get_report_image",apiEndpoint:e}),{method:"POST",headers:{"Content-Type":"application/json",mode:"no-cors"},body:JSON.stringify({image_file_name:i,db_name:n,report_id:t,token:r})});if(!o.ok)throw Error("Failed to fetch image");let s=await o.json();if(!s.encoded)throw Error("Error fetching image");return s.encoded},Wg=async(e,t,n,r)=>{let i=await fetch((0,_.F)({protocol:"http",path:"oracle/get_report_comments",apiEndpoint:e}),{method:"POST",headers:{"Content-Type":"application/json",mode:"no-cors"},body:JSON.stringify({db_name:n,token:r,report_id:t})});if(!i.ok)throw Error("Failed to fetch comments");return(await i.json()).comments||[]},Wy=async(e,t,n,r,i)=>{if(!(await fetch((0,_.F)({protocol:"http",path:"oracle/update_report_comments",apiEndpoint:e}),{method:"POST",headers:{"Content-Type":"application/json",mode:"no-cors"},body:JSON.stringify({db_name:n,token:r,report_id:t,comments:i})})).ok)throw Error("Failed to update comments")},Wb=async(e,t,n,r,i,o)=>{let s=await fetch((0,_.F)({protocol:"http",path:"oracle/revise_report",apiEndpoint:e}),{method:"POST",headers:{"Content-Type":"application/json",mode:"no-cors"},body:JSON.stringify({db_name:n,token:r,report_id:t,general_comments:i,comments_with_relevant_text:o})}),a=await s.json();if(!s.ok||a.error)throw Error(a.message||"Failed to submit for revision");return a};async function Wv(e,t,n,r){let{mdx:i,analyses:o,report_with_citations:s}=await Wf(e,t,n,r);return{parsed:Wh(i),analyses:o,comments:await Wg(e,t,n,r),report_with_citations:s}}let Wx=async(e,t,n)=>{try{let r=await fetch((0,_.F)({apiEndpoint:e,protocol:"http",path:"oracle/list_reports"}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,db_name:n})});if(!r.ok)throw Error("Failed to fetch reports");return(await r.json()).reports}catch(e){return console.error("Error fetching reports:",e),null}},Ww=async(e,t,n,r)=>{try{return(await fetch((0,_.F)({apiEndpoint:e,protocol:"http",path:"oracle/delete_report"}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({db_name:r,report_id:t,token:n})})).ok}catch(e){return console.error("Error deleting report:",e),!1}},Wk=async(e,t,n,r,i,o=[],s=!0)=>{if(!t)throw Error("No token");if(!i)throw Error("No user question");if(!n)throw Error("No project name");if(!(await fetch((0,_.F)({apiEndpoint:e,protocol:"http",path:"oracle/generate_report"}),{method:"POST",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3),body:JSON.stringify({db_name:n,token:t,user_question:i,task_type:"exploration",clarifications:o,report_id:r,use_websearch:s})})).ok)throw Error("Failed to generate report")},WO=async(e,t,n,r)=>{if(!t)throw Error("No token");let i=await fetch((0,_.F)({apiEndpoint:e,protocol:"http",path:"oracle/clarify_question"}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({db_name:n,token:t,user_question:r})});if(!i.ok)throw Error(await i.text()||"Failed to get clarifications");return await i.json()},WS=async(e,t,n)=>{try{if(!t)throw Error("No token");if(!n)throw Error("No project name");let r=await fetch((0,_.F)({apiEndpoint:e,protocol:"http",path:"integration/get_tables_and_files"}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,db_name:n})});if(!r.ok)throw Error("Failed to get tables and files");let i=await r.json();return{tables:i.tables||[],pdf_files:i.pdf_files||[]}}catch(e){return console.error("Error fetching tables and files:",e),{tables:[],pdf_files:[]}}},WC=/^\s*>\s$/,WT=Bj.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:e}){return["blockquote",$C(this.options.HTMLAttributes,e),0]},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[B_({find:WC,type:this.type})]}}),WA=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,WE=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,WM=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,WN=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,W_=$B.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return["strong",$C(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[BM({find:WA,type:this.type}),BM({find:WM,type:this.type})]},addPasteRules(){return[BP({find:WE,type:this.type}),BP({find:WN,type:this.type})]}}),Wj="textStyle",WD=/^\s*([-+*])\s$/,WP=Bj.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:e}){return["ul",$C(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(Wj)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=B_({find:WD,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=B_({find:WD,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Wj),editor:this.editor})),[e]}}),WR=/(^|[^`])`([^`]+)`(?!`)/,WI=/(^|[^`])`([^`]+)`(?!`)/g,Wz=$B.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:e}){return["code",$C(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[BM({find:WR,type:this.type})]},addPasteRules(){return[BP({find:WI,type:this.type})]}}),WL=/^```([a-z]+)?[\s\n]$/,Wq=/^~~~([a-z]+)?[\s\n]$/,W$=Bj.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;let{languageClassPrefix:n}=this.options;return[...(null===(t=e.firstElementChild)||void 0===t?void 0:t.classList)||[]].filter(e=>e.startsWith(n)).map(e=>e.replace(n,""))[0]||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:e,HTMLAttributes:t}){return["pre",$C(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{let{empty:e,$anchor:t}=this.editor.state.selection,n=1===t.pos;return!!e&&t.parent.type.name===this.name&&(!!n||!t.parent.textContent.length)&&this.editor.commands.clearNodes()},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;let{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;let o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!!o&&!!s&&e.chain().command(({tr:e})=>(e.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;let{state:t}=e,{selection:n,doc:r}=t,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||i.parentOffset!==i.parent.nodeSize-2)return!1;let s=i.after();return void 0!==s&&(r.nodeAt(s)?e.commands.command(({tr:e})=>(e.setSelection(I8.near(r.resolve(s))),!0)):e.commands.exitCode())}}},addInputRules(){return[BN({find:WL,type:this.type,getAttributes:e=>({language:e[1]})}),BN({find:Wq,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new zg({key:new zv("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;let n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=null==i?void 0:i.mode;if(!n||!o)return!1;let{tr:s,schema:a}=e.state,l=a.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:o},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(zn.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),e.dispatch(s),!0}}})]}}),WB=Bj.create({name:"doc",topNode:!0,content:"block+"});class WF{constructor(e,t){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(n=t.width)&&void 0!==n?n:1,this.color=!1===t.color?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(t=>{let n=e=>{this[t](e)};return e.dom.addEventListener(t,n),{name:t,handler:n}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e,t,n=this.editorView.state.doc.resolve(this.cursorPos),r=!n.parent.inlineContent,i;if(r){let e=n.nodeBefore,t=n.nodeAfter;if(e||t){let n=this.editorView.nodeDOM(this.cursorPos-(e?e.nodeSize:0));if(n){let r=n.getBoundingClientRect(),o=e?r.bottom:r.top;e&&t&&(o=(o+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),i={left:r.left,right:r.right,top:o-this.width/2,bottom:o+this.width/2}}}}if(!i){let e=this.editorView.coordsAtPos(this.cursorPos);i={left:e.left-this.width/2,right:e.left+this.width/2,top:e.top,bottom:e.bottom}}let o=this.editorView.dom.offsetParent;if(this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r),o&&(o!=document.body||"static"!=getComputedStyle(o).position)){let n=o.getBoundingClientRect();e=n.left-o.scrollLeft,t=n.top-o.scrollTop}else e=-pageXOffset,t=-pageYOffset;this.element.style.left=i.left-e+"px",this.element.style.top=i.top-t+"px",this.element.style.width=i.right-i.left+"px",this.element.style.height=i.bottom-i.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),r=n&&n.type.spec.disableDropCursor,i="function"==typeof r?r(this.editorView,t,e):r;if(t&&!i){let e=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let t=IG(this.editorView.state.doc,e,this.editorView.dragging.slice);null!=t&&(e=t)}this.setCursor(e),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}let WQ=$W.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[function(e={}){return new zg({view:t=>new WF(t,e)})}(this.options)]}});class WV extends I8{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return WV.valid(n)?new WV(n):I8.near(n)}content(){return RV.empty}eq(e){return e instanceof WV&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for GapCursor.fromJSON");return new WV(e.resolve(t.pos))}getBookmark(){return new WH(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!function(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(0==n){if(r.type.spec.isolating)return!0;continue}for(let e=r.child(n-1);;e=e.lastChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}}return!0}(e)||!function(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let e=r.child(n);;e=e.firstChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}}return!0}(e))return!1;let n=t.type.spec.allowGapCursor;if(null!=n)return n;let r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,t,n=!1){e:for(;;){if(!n&&WV.valid(e))return e;let r=e.pos,i=null;for(let n=e.depth;;n--){let o=e.node(n);if(t>0?e.indexAfter(n)<o.childCount:e.index(n)>0){i=o.child(t>0?e.indexAfter(n):e.index(n)-1);break}if(0==n)return null;r+=t;let s=e.doc.resolve(r);if(WV.valid(s))return s}for(;;){let o=t>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!zi.isSelectable(i)){e=e.doc.resolve(r+i.nodeSize*t),n=!1;continue e}break}i=o,r+=t;let s=e.doc.resolve(r);if(WV.valid(s))return s}return null}}}WV.prototype.visible=!1,WV.findFrom=WV.findGapCursorFrom,I8.jsonID("gapcursor",WV);class WH{constructor(e){this.pos=e}map(e){return new WH(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return WV.valid(t)?new WV(t):I8.near(t)}}let WU=qJ({ArrowLeft:WW("horiz",-1),ArrowRight:WW("horiz",1),ArrowUp:WW("vert",-1),ArrowDown:WW("vert",1)});function WW(e,t){let n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,i){let o=e.selection,s=t>0?o.$to:o.$from,a=o.empty;if(o instanceof zn){if(!i.endOfTextblock(n)||0==s.depth)return!1;a=!1,s=e.doc.resolve(t>0?s.after():s.before())}let l=WV.findGapCursorFrom(s,t,a);return!!l&&(r&&r(e.tr.setSelection(new WV(l))),!0)}}function WG(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!WV.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return!(i&&i.inside>-1&&zi.isSelectable(e.state.doc.nodeAt(i.inside)))&&(e.dispatch(e.state.tr.setSelection(new WV(r))),!0)}function WX(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof WV))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=RL.empty;for(let e=r.length-1;e>=0;e--)i=RL.from(r[e].createAndFill(null,i));let o=e.state.tr.replace(n.pos,n.pos,new RV(i,0,0));return o.setSelection(zn.near(o.doc.resolve(n.pos+1))),e.dispatch(o),!1}function WY(e){if(!(e.selection instanceof WV))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",qk.create(e.doc,[qv.widget(e.selection.head,t,{key:"gapcursor"})])}let WZ=$W.create({name:"gapCursor",addProseMirrorPlugins:()=>[new zg({props:{decorations:WY,createSelectionBetween:(e,t,n)=>t.pos==n.pos&&WV.valid(n)?new WV(n):null,handleClick:WG,handleKeyDown:WU,handleDOMEvents:{beforeinput:WX}}})],extendNodeSchema(e){var t;let n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:null!==(t=$E($w(e,"allowGapCursor",n)))&&void 0!==t?t:null}}}),WK=Bj.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:e}){return["br",$C(this.options.HTMLAttributes,e)]},renderText:()=>`
`,addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{let{selection:e,storedMarks:i}=n;if(e.$from.parent.type.spec.isolating)return!1;let{keepMarks:o}=this.options,{splittableMarks:s}=r.extensionManager,a=i||e.$to.parentOffset&&e.$from.marks();return t().insertContent({type:this.name}).command(({tr:e,dispatch:t})=>{if(t&&a&&o){let t=a.filter(e=>s.includes(e.type.name));e.ensureMarks(t)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),WJ=Bj.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,$C(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.setNode(this.name,e),toggleHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>BN({find:RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}});var W0=function(){};W0.prototype.append=function(e){return e.length?(e=W0.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},W0.prototype.prepend=function(e){return e.length?W0.from(e).append(this):this},W0.prototype.appendInner=function(e){return new W2(this,e)},W0.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?W0.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},W0.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},W0.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},W0.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach(function(t,n){return r.push(e(t,n))},t,n),r},W0.from=function(e){return e instanceof W0?e:e&&e.length?new W1(e):W0.empty};var W1=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var i=t;i<n;i++)if(!1===e(this.values[i],r+i))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var i=t-1;i>=n;i--)if(!1===e(this.values[i],r+i))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=200)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=200)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(W0);W0.empty=new W1([]);var W2=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var i=this.left.length;if(t<i&&!1===this.left.forEachInner(e,t,Math.min(n,i),r)||n>i&&!1===this.right.forEachInner(e,Math.max(t-i,0),Math.min(this.length,n)-i,r+i))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){var i=this.left.length;if(t>i&&!1===this.right.forEachInvertedInner(e,t-i,Math.max(n,i)-i,r+i)||n<i&&!1===this.left.forEachInvertedInner(e,Math.min(t,i),n,r))return!1},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(W0);class W4{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){let n,r;if(0==this.eventCount)return null;let i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}t&&(r=(n=this.remapping(i,this.items.length)).maps.length);let o=e.tr,s,a,l=[],c=[];return this.items.forEach((e,t)=>{if(!e.step){n||(r=(n=this.remapping(i,t+1)).maps.length),r--,c.push(e);return}if(n){c.push(new W5(e.map));let t=e.step.map(n.slice(r)),i;t&&o.maybeStep(t).doc&&(i=o.mapping.maps[o.mapping.maps.length-1],l.push(new W5(i,void 0,void 0,l.length+c.length))),r--,i&&n.appendMap(i,r)}else o.maybeStep(e.step);if(e.selection)return s=n?e.selection.map(n.slice(r)):e.selection,a=new W4(this.items.slice(0,i).append(c.reverse().concat(l)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:o,selection:s}}addTransform(e,t,n,r){var i,o;let s,a=[],l=this.eventCount,c=this.items,u=!r&&c.length?c.get(c.length-1):null;for(let n=0;n<e.steps.length;n++){let i=e.steps[n].invert(e.docs[n]),o=new W5(e.mapping.maps[n],i,t),s;(s=u&&u.merge(o))&&(o=s,n?a.pop():c=c.slice(0,c.length-1)),a.push(o),t&&(l++,t=void 0),r||(u=o)}let h=l-n.depth;return h>W6&&(i=c,o=h,i.forEach((e,t)=>{if(e.selection&&0==o--)return s=t,!1}),c=i.slice(s),l-=h),new W4(c.append(a),l)}remapping(e,t){let n=new IT;return this.items.forEach((t,r)=>{let i=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,i)},e,t),n}addMaps(e){return 0==this.eventCount?this:new W4(this.items.append(e.map(e=>new W5(e))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-t),i=e.mapping,o=e.steps.length,s=this.eventCount;this.items.forEach(e=>{e.selection&&s--},r);let a=t;this.items.forEach(t=>{let r=i.getMirror(--a);if(null==r)return;o=Math.min(o,r);let l=i.maps[r];if(t.step){let o=e.steps[r].invert(e.docs[r]),c=t.selection&&t.selection.map(i.slice(a+1,r));c&&s++,n.push(new W5(l,o,c))}else n.push(new W5(l))},r);let l=[];for(let e=t;e<o;e++)l.push(new W5(i.maps[e]));let c=new W4(this.items.slice(0,r).append(l).append(n),s);return c.emptyItemCount()>500&&(c=c.compress(this.items.length-n.length)),c}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,r=[],i=0;return this.items.forEach((o,s)=>{if(s>=e)r.push(o),o.selection&&i++;else if(o.step){let e=o.step.map(t.slice(n)),s=e&&e.getMap();if(n--,s&&t.appendMap(s,n),e){let a=o.selection&&o.selection.map(t.slice(n));a&&i++;let l=new W5(s.invert(),e,a),c,u=r.length-1;(c=r.length&&r[u].merge(l))?r[u]=c:r.push(l)}}else o.map&&n--},this.items.length,0),new W4(W0.from(r.reverse()),i)}}W4.empty=new W4(W0.empty,0);class W5{constructor(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new W5(t.getMap().invert(),t,this.selection)}}}class W3{constructor(e,t,n,r,i){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r,this.prevComposition=i}}let W6=20;function W7(e){let t=[];for(let n=e.length-1;n>=0&&0==t.length;n--)e[n].forEach((e,n,r,i)=>t.push(r,i));return t}function W8(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),o=t.map(e[r+1],-1);i<=o&&n.push(i,o)}return n}let W9=!1,Ge=null;function Gt(e){let t=e.plugins;if(Ge!=t){W9=!1,Ge=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){W9=!0;break}}return W9}let Gn=new zv("history"),Gr=new zv("closeHistory");function Gi(e,t){return(n,r)=>{let i=Gn.getState(n);if(!i||0==(e?i.undone:i.done).eventCount)return!1;if(r){let o=function(e,t,n){let r=Gt(t),i=Gn.get(t).spec.config,o=(n?e.undone:e.done).popEvent(t,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),a=(n?e.done:e.undone).addTransform(o.transform,t.selection.getBookmark(),i,r),l=new W3(n?a:o.remaining,n?o.remaining:a,null,0,-1);return o.transform.setSelection(s).setMeta(Gn,{redo:n,historyState:l})}(i,n,e);o&&r(t?o.scrollIntoView():o)}return!0}}let Go=Gi(!1,!0),Gs=Gi(!0,!0),Ga=$W.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:e,dispatch:t})=>Go(e,t),redo:()=>({state:e,dispatch:t})=>Gs(e,t)}),addProseMirrorPlugins(){return[function(e={}){return new zg({key:Gn,state:{init:()=>new W3(W4.empty,W4.empty,null,0,-1),apply:(t,n,r)=>(function(e,t,n,r){let i=n.getMeta(Gn),o;if(i)return i.historyState;n.getMeta(Gr)&&(e=new W3(e.done,e.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(Gn))return s.getMeta(Gn).redo?new W3(e.done.addTransform(n,void 0,r,Gt(t)),e.undone,W7(n.mapping.maps),e.prevTime,e.prevComposition):new W3(e.done,e.undone.addTransform(n,void 0,r,Gt(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new W3(e.done.rebased(n,o),e.undone.rebased(n,o),W8(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new W3(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),W8(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);{let i=n.getMeta("composition"),o=0==e.prevTime||!s&&e.prevComposition!=i&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((e,r)=>{for(let i=0;i<t.length;i+=2)e<=t[i+1]&&r>=t[i]&&(n=!0)}),n}(n,e.prevRanges)),a=s?W8(e.prevRanges,n.mapping):W7(n.mapping.maps);return new W3(e.done.addTransform(n,o?t.selection.getBookmark():void 0,r,Gt(t)),W4.empty,a,n.time,i??e.prevComposition)}})(n,r,t,e)},config:e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,r="historyUndo"==n?Go:"historyRedo"==n?Gs:null;return!!r&&(t.preventDefault(),r(e.state,e.dispatch))}}}})}(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),Gl=Bj.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:e}){return["hr",$C(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{let{selection:n}=t,{$from:r,$to:i}=n,o=e();return 0===r.parentOffset?o.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):n instanceof zi?o.insertContentAt(i.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:e,dispatch:t})=>{var n;if(t){let{$to:t}=e.selection,r=t.end();if(t.nodeAfter)t.nodeAfter.isTextblock?e.setSelection(zn.create(e.doc,t.pos+1)):t.nodeAfter.isBlock?e.setSelection(zi.create(e.doc,t.pos)):e.setSelection(zn.create(e.doc,t.pos));else{let i=null===(n=t.parent.type.contentMatch.defaultType)||void 0===n?void 0:n.create();i&&(e.insert(r,i),e.setSelection(zn.create(e.doc,r+1)))}e.scrollIntoView()}return!0}).run()}}},addInputRules(){var e;return[new $I({find:(e={find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type}).find,handler:({state:t,range:n,match:r})=>{let i=$E(e.getAttributes,void 0,r)||{},{tr:o}=t,s=n.from,a=n.to,l=e.type.create(i);if(r[1]){let e=s+r[0].lastIndexOf(r[1]);e>a?e=a:a=e+r[1].length;let t=r[0][r[0].length-1];o.insertText(t,s+r[0].length-1),o.replaceWith(e,a,l)}else if(r[0]){let t=e.type.isInline?s:s-1;o.insert(t,e.type.create(i)).delete(o.mapping.map(s),o.mapping.map(a))}o.scrollIntoView()}})]}}),Gc=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Gu=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Gh=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Gd=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Gf=$B.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",$C(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[BM({find:Gc,type:this.type}),BM({find:Gh,type:this.type})]},addPasteRules(){return[BP({find:Gu,type:this.type}),BP({find:Gd,type:this.type})]}}),Gp=Bj.create({name:"listItem",addOptions:()=>({HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:e}){return["li",$C(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Gm="textStyle",Gg=/^(\d+)\.\s$/,Gy=Bj.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:e=>e.getAttribute("type")}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:e}){let{start:t,...n}=e;return 1===t?["ol",$C(this.options.HTMLAttributes,n),0]:["ol",$C(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(Gm)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=B_({find:Gg,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=B_({find:Gg,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Gm)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[e]}}),Gb=Bj.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:e}){return["p",$C(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Gv=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Gx=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Gw=$B.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("line-through")&&{}}],renderHTML({HTMLAttributes:e}){return["s",$C(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[BM({find:Gv,type:this.type})]},addPasteRules(){return[BP({find:Gx,type:this.type})]}}),Gk=Bj.create({name:"text",group:"inline"}),GO=$W.create({name:"starterKit",addExtensions(){var e,t,n,r,i,o,s,a,l,c,u,h,d,f,p,m,g,y;let b=[];return!1!==this.options.bold&&b.push(W_.configure(null===(e=this.options)||void 0===e?void 0:e.bold)),!1!==this.options.blockquote&&b.push(WT.configure(null===(t=this.options)||void 0===t?void 0:t.blockquote)),!1!==this.options.bulletList&&b.push(WP.configure(null===(n=this.options)||void 0===n?void 0:n.bulletList)),!1!==this.options.code&&b.push(Wz.configure(null===(r=this.options)||void 0===r?void 0:r.code)),!1!==this.options.codeBlock&&b.push(W$.configure(null===(i=this.options)||void 0===i?void 0:i.codeBlock)),!1!==this.options.document&&b.push(WB.configure(null===(o=this.options)||void 0===o?void 0:o.document)),!1!==this.options.dropcursor&&b.push(WQ.configure(null===(s=this.options)||void 0===s?void 0:s.dropcursor)),!1!==this.options.gapcursor&&b.push(WZ.configure(null===(a=this.options)||void 0===a?void 0:a.gapcursor)),!1!==this.options.hardBreak&&b.push(WK.configure(null===(l=this.options)||void 0===l?void 0:l.hardBreak)),!1!==this.options.heading&&b.push(WJ.configure(null===(c=this.options)||void 0===c?void 0:c.heading)),!1!==this.options.history&&b.push(Ga.configure(null===(u=this.options)||void 0===u?void 0:u.history)),!1!==this.options.horizontalRule&&b.push(Gl.configure(null===(h=this.options)||void 0===h?void 0:h.horizontalRule)),!1!==this.options.italic&&b.push(Gf.configure(null===(d=this.options)||void 0===d?void 0:d.italic)),!1!==this.options.listItem&&b.push(Gp.configure(null===(f=this.options)||void 0===f?void 0:f.listItem)),!1!==this.options.orderedList&&b.push(Gy.configure(null===(p=this.options)||void 0===p?void 0:p.orderedList)),!1!==this.options.paragraph&&b.push(Gb.configure(null===(m=this.options)||void 0===m?void 0:m.paragraph)),!1!==this.options.strike&&b.push(Gw.configure(null===(g=this.options)||void 0===g?void 0:g.strike)),!1!==this.options.text&&b.push(Gk.configure(null===(y=this.options)||void 0===y?void 0:y.text)),b}});if("u">typeof WeakMap){let e=new WeakMap;k=t=>e.get(t),O=(t,n)=>(e.set(t,n),n)}else{let e=[],t=0;k=t=>{for(let n=0;n<e.length;n+=2)if(e[n]==t)return e[n+1]},O=(n,r)=>(10==t&&(t=0),e[t++]=n,e[t++]=r)}var GS=class{constructor(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r}findCell(e){for(let t=0;t<this.map.length;t++){let n=this.map[t];if(n!=e)continue;let r=t%this.width,i=t/this.width|0,o=r+1,s=i+1;for(let e=1;o<this.width&&this.map[t+e]==n;e++)o++;for(let e=1;s<this.height&&this.map[t+this.width*e]==n;e++)s++;return{left:r,top:i,right:o,bottom:s}}throw RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){let{left:r,right:i,top:o,bottom:s}=this.findCell(e);return"horiz"==t?(n<0?0==r:i==this.width)?null:this.map[o*this.width+(n<0?r-1:i)]:(n<0?0==o:s==this.height)?null:this.map[r+this.width*(n<0?o-1:s)]}rectBetween(e,t){let{left:n,right:r,top:i,bottom:o}=this.findCell(e),{left:s,right:a,top:l,bottom:c}=this.findCell(t);return{left:Math.min(n,s),top:Math.min(i,l),right:Math.max(r,a),bottom:Math.max(o,c)}}cellsInRect(e){let t=[],n={};for(let r=e.top;r<e.bottom;r++)for(let i=e.left;i<e.right;i++){let o=r*this.width+i,s=this.map[o];n[s]||(n[s]=!0,i==e.left&&i&&this.map[o-1]==s||r==e.top&&r&&this.map[o-this.width]==s||t.push(s))}return t}positionAt(e,t,n){for(let r=0,i=0;;r++){let o=i+n.child(r).nodeSize;if(r==e){let n=t+e*this.width,r=(e+1)*this.width;for(;n<r&&this.map[n]<i;)n++;return n==r?o-1:this.map[n]}i=o}}static get(e){return k(e)||O(e,function(e){if("table"!=e.type.spec.tableRole)throw RangeError("Not a table node: "+e.type.name);let t=function(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){let i=e.child(r),o=0;if(n)for(let t=0;t<r;t++){let n=e.child(t);for(let e=0;e<n.childCount;e++){let i=n.child(e);t+i.attrs.rowspan>r&&(o+=i.attrs.colspan)}}for(let e=0;e<i.childCount;e++){let t=i.child(e);o+=t.attrs.colspan,t.attrs.rowspan>1&&(n=!0)}-1==t?t=o:t!=o&&(t=Math.max(t,o))}return t}(e),n=e.childCount,r=[],i=0,o=null,s=[];for(let e=0,i=t*n;e<i;e++)r[e]=0;for(let a=0,l=0;a<n;a++){let c=e.child(a);l++;for(let e=0;;e++){for(;i<r.length&&0!=r[i];)i++;if(e==c.childCount)break;let u=c.child(e),{colspan:h,rowspan:d,colwidth:f}=u.attrs;for(let e=0;e<d;e++){if(e+a>=n){(o||(o=[])).push({type:"overlong_rowspan",pos:l,n:d-e});break}let c=i+e*t;for(let e=0;e<h;e++){0==r[c+e]?r[c+e]=l:(o||(o=[])).push({type:"collision",row:a,pos:l,n:h-e});let n=f&&f[e];if(n){let r=(c+e)%t*2,i=s[r];null==i||i!=n&&1==s[r+1]?(s[r]=n,s[r+1]=1):i==n&&s[r+1]++}}}i+=h,l+=u.nodeSize}let u=(a+1)*t,h=0;for(;i<u;)0==r[i++]&&h++;h&&(o||(o=[])).push({type:"missing",row:a,n:h}),l++}(0===t||0===n)&&(o||(o=[])).push({type:"zero_sized"});let a=new GS(t,n,r,o),l=!1;for(let e=0;!l&&e<s.length;e+=2)null!=s[e]&&s[e+1]<n&&(l=!0);return l&&function(e,t,n){e.problems||(e.problems=[]);let r={};for(let i=0;i<e.map.length;i++){let o=e.map[i];if(r[o])continue;r[o]=!0;let s=n.nodeAt(o);if(!s)throw RangeError(`No cell with offset ${o} found`);let a=null,l=s.attrs;for(let n=0;n<l.colspan;n++){let r=t[2*((i+n)%e.width)];null==r||l.colwidth&&l.colwidth[n]==r||((a||(a=function(e){if(e.colwidth)return e.colwidth.slice();let t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}(l)))[n]=r)}a&&e.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:a})}}(a,s,e),a}(e))}};function GC(e){let t=e.cached.tableNodeTypes;if(!t)for(let n in t=e.cached.tableNodeTypes={},e.nodes){let r=e.nodes[n],i=r.spec.tableRole;i&&(t[i]=r)}return t}var GT=new zv("selectingCells");function GA(e){for(let t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function GE(e){let t=e.selection.$head;for(let e=t.depth;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return!0;return!1}function GM(e){let t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&"cell"==t.node.type.spec.tableRole)return t.$anchor;let n=GA(t.$head)||function(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){let r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){let r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n-t.nodeSize)}}(t.$head);if(n)return n;throw RangeError(`No cell found around position ${t.head}`)}function GN(e){return"row"==e.parent.type.spec.tableRole&&!!e.nodeAfter}function G_(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function Gj(e,t,n){let r=e.node(-1),i=GS.get(r),o=e.start(-1),s=i.nextCell(e.pos-o,t,n);return null==s?null:e.node(0).resolve(o+s)}function GD(e,t,n=1){let r={...e,colspan:e.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(e=>e>0)||(r.colwidth=null)),r}function GP(e,t,n=1){let r={...e,colspan:e.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let e=0;e<n;e++)r.colwidth.splice(t,0,0)}return r}var GR=class e extends I8{constructor(e,t=e){let n=e.node(-1),r=GS.get(n),i=e.start(-1),o=r.rectBetween(e.pos-i,t.pos-i),s=e.node(0),a=r.cellsInRect(o).filter(e=>e!=t.pos-i);a.unshift(t.pos-i);let l=a.map(e=>{let t=n.nodeAt(e);if(!t)throw RangeError(`No cell with offset ${e} found`);let r=i+e+1;return new I9(s.resolve(r),s.resolve(r+t.content.size))});super(l[0].$from,l[0].$to,l),this.$anchorCell=e,this.$headCell=t}map(t,n){let r=t.resolve(n.map(this.$anchorCell.pos)),i=t.resolve(n.map(this.$headCell.pos));if(GN(r)&&GN(i)&&G_(r,i)){let t=this.$anchorCell.node(-1)!=r.node(-1);return t&&this.isRowSelection()?e.rowSelection(r,i):t&&this.isColSelection()?e.colSelection(r,i):new e(r,i)}return zn.between(r,i)}content(){let e=this.$anchorCell.node(-1),t=GS.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),i={},o=[];for(let n=r.top;n<r.bottom;n++){let s=[];for(let o=n*t.width+r.left,a=r.left;a<r.right;a++,o++){let n=t.map[o];if(i[n])continue;i[n]=!0;let a=t.findCell(n),l=e.nodeAt(n);if(!l)throw RangeError(`No cell with offset ${n} found`);let c=r.left-a.left,u=a.right-r.right;if(c>0||u>0){let e=l.attrs;if(c>0&&(e=GD(e,0,c)),u>0&&(e=GD(e,e.colspan-u,u)),a.left<r.left){if(!(l=l.type.createAndFill(e)))throw RangeError(`Could not create cell with attrs ${JSON.stringify(e)}`)}else l=l.type.create(e,l.content)}if(a.top<r.top||a.bottom>r.bottom){let e={...l.attrs,rowspan:Math.min(a.bottom,r.bottom)-Math.max(a.top,r.top)};l=a.top<r.top?l.type.createAndFill(e):l.type.create(e,l.content)}s.push(l)}o.push(e.child(n).copy(RL.from(s)))}let s=this.isColSelection()&&this.isRowSelection()?e:o;return new RV(RL.from(s),1,1)}replace(e,t=RV.empty){let n=e.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){let{$from:o,$to:s}=r[i],a=e.mapping.slice(n);e.replace(a.map(o.pos),a.map(s.pos),i?RV.empty:t)}let i=I8.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);i&&e.setSelection(i)}replaceWith(e,t){this.replace(e,new RV(RL.from(t),0,0))}forEachCell(e){let t=this.$anchorCell.node(-1),n=GS.get(t),r=this.$anchorCell.start(-1),i=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r));for(let n=0;n<i.length;n++)e(t.nodeAt(i[n]),r+i[n])}isColSelection(){let e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);return!(Math.min(e,t)>0)&&Math.max(e+this.$anchorCell.nodeAfter.attrs.rowspan,t+this.$headCell.nodeAfter.attrs.rowspan)==this.$headCell.node(-1).childCount}static colSelection(t,n=t){let r=t.node(-1),i=GS.get(r),o=t.start(-1),s=i.findCell(t.pos-o),a=i.findCell(n.pos-o),l=t.node(0);return s.top<=a.top?(s.top>0&&(t=l.resolve(o+i.map[s.left])),a.bottom<i.height&&(n=l.resolve(o+i.map[i.width*(i.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(o+i.map[a.left])),s.bottom<i.height&&(t=l.resolve(o+i.map[i.width*(i.height-1)+s.right-1]))),new e(t,n)}isRowSelection(){let e=this.$anchorCell.node(-1),t=GS.get(e),n=this.$anchorCell.start(-1),r=t.colCount(this.$anchorCell.pos-n),i=t.colCount(this.$headCell.pos-n);return!(Math.min(r,i)>0)&&Math.max(r+this.$anchorCell.nodeAfter.attrs.colspan,i+this.$headCell.nodeAfter.attrs.colspan)==t.width}eq(t){return t instanceof e&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,n=t){let r=t.node(-1),i=GS.get(r),o=t.start(-1),s=i.findCell(t.pos-o),a=i.findCell(n.pos-o),l=t.node(0);return s.left<=a.left?(s.left>0&&(t=l.resolve(o+i.map[s.top*i.width])),a.right<i.width&&(n=l.resolve(o+i.map[i.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(o+i.map[a.top*i.width])),s.right<i.width&&(t=l.resolve(o+i.map[i.width*(s.top+1)-1]))),new e(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new e(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){return new e(t.resolve(n),t.resolve(r))}getBookmark(){return new GI(this.$anchorCell.pos,this.$headCell.pos)}};GR.prototype.visible=!1,I8.jsonID("cell",GR);var GI=class e{constructor(e,t){this.anchor=e,this.head=t}map(t){return new e(t.map(this.anchor),t.map(this.head))}resolve(e){let t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&G_(t,n)?new GR(t,n):I8.near(n,1)}};function Gz(e){if(!(e.selection instanceof GR))return null;let t=[];return e.selection.forEachCell((e,n)=>{t.push(qv.node(n,n+e.nodeSize,{class:"selectedCell"}))}),qk.create(e.doc,t)}var GL=new zv("fix-tables");function Gq(e,t){let n;let r=(t,r)=>{"table"==t.type.spec.tableRole&&(n=function(e,t,n,r){let i,o;let s=GS.get(t);if(!s.problems)return r;r||(r=e.tr);let a=[];for(let e=0;e<s.height;e++)a.push(0);for(let e=0;e<s.problems.length;e++){let i=s.problems[e];if("collision"==i.type){let e=t.nodeAt(i.pos);if(!e)continue;let o=e.attrs;for(let e=0;e<o.rowspan;e++)a[i.row+e]+=i.n;r.setNodeMarkup(r.mapping.map(n+1+i.pos),null,GD(o,o.colspan-i.n,i.n))}else if("missing"==i.type)a[i.row]+=i.n;else if("overlong_rowspan"==i.type){let e=t.nodeAt(i.pos);if(!e)continue;r.setNodeMarkup(r.mapping.map(n+1+i.pos),null,{...e.attrs,rowspan:e.attrs.rowspan-i.n})}else if("colwidth mismatch"==i.type){let e=t.nodeAt(i.pos);if(!e)continue;r.setNodeMarkup(r.mapping.map(n+1+i.pos),null,{...e.attrs,colwidth:i.colwidth})}else if("zero_sized"==i.type){let e=r.mapping.map(n);r.delete(e,e+t.nodeSize)}}for(let e=0;e<a.length;e++)a[e]&&(null==i&&(i=e),o=e);for(let l=0,c=n+1;l<s.height;l++){let n=t.child(l),s=c+n.nodeSize,u=a[l];if(u>0){let t="cell";n.firstChild&&(t=n.firstChild.type.spec.tableRole);let a=[];for(let n=0;n<u;n++){let n=GC(e.schema)[t].createAndFill();n&&a.push(n)}let h=(0==l||i==l-1)&&o==l?c+1:s-1;r.insert(r.mapping.map(h),a)}c=s}return r.setMeta(GL,{fixTables:!0})}(e,t,r,n))};return t?t.doc!=e.doc&&function e(t,n,r,i){let o=t.childCount,s=n.childCount;e:for(let a=0,l=0;a<s;a++){let s=n.child(a);for(let e=l,n=Math.min(o,a+3);e<n;e++)if(t.child(e)==s){l=e+1,r+=s.nodeSize;continue e}i(s,r),l<o&&t.child(l).sameMarkup(s)?e(t.child(l),s,r+1,i):s.nodesBetween(0,s.content.size,i,r+1),r+=s.nodeSize}}(t.doc,e.doc,0,r):e.doc.descendants(r),n}function G$(e){let t=e.selection,n=GM(e),r=n.node(-1),i=n.start(-1),o=GS.get(r);return{...t instanceof GR?o.rectBetween(t.$anchorCell.pos-i,t.$headCell.pos-i):o.findCell(n.pos-i),tableStart:i,map:o,table:r}}function GB(e,{map:t,tableStart:n,table:r},i){let o=i>0?-1:0;(function(e,t,n){let r=GC(t.type.schema).header_cell;for(let i=0;i<e.height;i++)if(t.nodeAt(e.map[n+i*e.width]).type!=r)return!1;return!0})(t,r,i+o)&&(o=0==i||i==t.width?null:0);for(let s=0;s<t.height;s++){let a=s*t.width+i;if(i>0&&i<t.width&&t.map[a-1]==t.map[a]){let o=t.map[a],l=r.nodeAt(o);e.setNodeMarkup(e.mapping.map(n+o),null,GP(l.attrs,i-t.colCount(o))),s+=l.attrs.rowspan-1}else{let l=null==o?GC(r.type.schema).cell:r.nodeAt(t.map[a+o]).type,c=t.positionAt(s,i,r);e.insert(e.mapping.map(n+c),l.createAndFill())}}return e}function GF(e,{map:t,tableStart:n,table:r},i){var o;let s=n;for(let e=0;e<i;e++)s+=r.child(e).nodeSize;let a=[],l=i>0?-1:0;(function(e,t,n){var r;let i=GC(t.type.schema).header_cell;for(let o=0;o<e.width;o++)if((null==(r=t.nodeAt(e.map[o+n*e.width]))?void 0:r.type)!=i)return!1;return!0})(t,r,i+l)&&(l=0==i||i==t.height?null:0);for(let s=0,c=t.width*i;s<t.width;s++,c++)if(i>0&&i<t.height&&t.map[c]==t.map[c-t.width]){let i=t.map[c],o=r.nodeAt(i).attrs;e.setNodeMarkup(n+i,null,{...o,rowspan:o.rowspan+1}),s+=o.colspan-1}else{let e=null==l?GC(r.type.schema).cell:null==(o=r.nodeAt(t.map[c+l*t.width]))?void 0:o.type,n=null==e?void 0:e.createAndFill();n&&a.push(n)}return e.insert(s,GC(r.type.schema).row.create(null,a)),e}function GQ(e){let t=e.content;return 1==t.childCount&&t.child(0).isTextblock&&0==t.child(0).childCount}function GV(e,t){let n=e.selection;if(!(n instanceof GR)||n.$anchorCell.pos==n.$headCell.pos)return!1;let r=G$(e),{map:i}=r;if(function({width:e,height:t,map:n},r){let i=r.top*e+r.left,o=i,s=(r.bottom-1)*e+r.left,a=i+(r.right-r.left-1);for(let t=r.top;t<r.bottom;t++){if(r.left>0&&n[o]==n[o-1]||r.right<e&&n[a]==n[a+1])return!0;o+=e,a+=e}for(let o=r.left;o<r.right;o++){if(r.top>0&&n[i]==n[i-e]||r.bottom<t&&n[s]==n[s+e])return!0;i++,s++}return!1}(i,r))return!1;if(t){let n=e.tr,o={},s=RL.empty,a,l;for(let e=r.top;e<r.bottom;e++)for(let t=r.left;t<r.right;t++){let c=i.map[e*i.width+t],u=r.table.nodeAt(c);if(!(o[c]||!u)){if(o[c]=!0,null==a)a=c,l=u;else{GQ(u)||(s=s.append(u.content));let e=n.mapping.map(c+r.tableStart);n.delete(e,e+u.nodeSize)}}}if(null==a||null==l)return!0;if(n.setNodeMarkup(a+r.tableStart,null,{...GP(l.attrs,l.attrs.colspan,r.right-r.left-l.attrs.colspan),rowspan:r.bottom-r.top}),s.size){let e=a+1+l.content.size,t=GQ(l)?a+1:e;n.replaceWith(t+r.tableStart,e+r.tableStart,s)}n.setSelection(new GR(n.doc.resolve(a+r.tableStart))),t(n)}return!0}function GH(e,t){var n;let r=GC(e.schema);return(n=({node:e})=>r[e.type.spec.tableRole],(e,t)=>{var r;let i,o;let s=e.selection;if(s instanceof GR){if(s.$anchorCell.pos!=s.$headCell.pos)return!1;i=s.$anchorCell.nodeAfter,o=s.$anchorCell.pos}else{if(!(i=function(e){for(let t=e.depth;t>0;t--){let n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}(s.$from)))return!1;o=null==(r=GA(s.$from))?void 0:r.pos}if(null==i||null==o||1==i.attrs.colspan&&1==i.attrs.rowspan)return!1;if(t){let r,a=i.attrs,l=[],c=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});let u=G$(e),h=e.tr;for(let e=0;e<u.right-u.left;e++)l.push(c?{...a,colwidth:c&&c[e]?[c[e]]:null}:a);for(let e=u.top;e<u.bottom;e++){let t=u.map.positionAt(e,u.left,u.table);e==u.top&&(t+=i.nodeSize);for(let o=u.left,s=0;o<u.right;o++,s++)o==u.left&&e==u.top||h.insert(r=h.mapping.map(t+u.tableStart,1),n({node:i,row:e,col:o}).createAndFill(l[s]))}h.setNodeMarkup(o,n({node:i,row:u.top,col:u.left}),l[0]),s instanceof GR&&h.setSelection(new GR(h.doc.resolve(s.$anchorCell.pos),r?h.doc.resolve(r):void 0)),t(h)}return!0})(e,t)}function GU(e,t,n){let r=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1});for(let e=0;e<r.length;e++){let i=t.table.nodeAt(r[e]);if(i&&i.type!==n.header_cell)return!1}return!0}function GW(e,t){return(t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(t,n){if(!GE(t))return!1;if(n){let r=GC(t.schema),i=G$(t),o=t.tr,s=i.map.cellsInRect("column"==e?{left:i.left,top:0,right:i.right,bottom:i.map.height}:"row"==e?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),a=s.map(e=>i.table.nodeAt(e));for(let e=0;e<s.length;e++)a[e].type==r.header_cell&&o.setNodeMarkup(i.tableStart+s[e],r.cell,a[e].attrs);if(0==o.steps.length)for(let e=0;e<s.length;e++)o.setNodeMarkup(i.tableStart+s[e],r.header_cell,a[e].attrs);n(o)}return!0}:function(t,n){if(!GE(t))return!1;if(n){let r=GC(t.schema),i=G$(t),o=t.tr,s=GU("row",i,r),a=GU("column",i,r),l=+("column"===e?!!s:"row"===e&&!!a),c="column"==e?{left:0,top:l,right:1,bottom:i.map.height}:"row"==e?{left:l,top:0,right:i.map.width,bottom:1}:i,u="column"==e?a?r.cell:r.header_cell:"row"==e?s?r.cell:r.header_cell:r.cell;i.map.cellsInRect(c).forEach(e=>{let t=e+i.tableStart,n=o.doc.nodeAt(t);n&&o.setNodeMarkup(t,u,n.attrs)}),n(o)}return!0}}GW("row",{useDeprecatedLogic:!0}),GW("column",{useDeprecatedLogic:!0});var GG=GW("cell",{useDeprecatedLogic:!0});function GX(e){return function(t,n){if(!GE(t))return!1;let r=function(e,t){if(t<0){let t=e.nodeBefore;if(t)return e.pos-t.nodeSize;for(let t=e.index(-1)-1,n=e.before();t>=0;t--){let r=e.node(-1).child(t),i=r.lastChild;if(i)return n-1-i.nodeSize;n-=r.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;let t=e.node(-1);for(let n=e.indexAfter(-1),r=e.after();n<t.childCount;n++){let e=t.child(n);if(e.childCount)return r+1;r+=e.nodeSize}}return null}(GM(t),e);if(null==r)return!1;if(n){let e=t.doc.resolve(r);n(t.tr.setSelection(zn.between(e,e.node(0).resolve(e.pos+e.nodeAfter.nodeSize))).scrollIntoView())}return!0}}function GY(e,t){let n=e.selection;if(!(n instanceof GR))return!1;if(t){let r=e.tr,i=GC(e.schema).cell.createAndFill().content;n.forEachCell((e,t)=>{e.content.eq(i)||r.replace(r.mapping.map(t+1),r.mapping.map(t+e.nodeSize-1),new RV(i,0,0))}),r.docChanged&&t(r)}return!0}function GZ(e,t){let n=e.createAndFill();return new I6(n).replace(0,n.content.size,t).doc}function GK(e,t,n,r,i,o,s,a){if(0==s||s==t.height)return!1;let l=!1;for(let c=i;c<o;c++){let i=s*t.width+c,o=t.map[i];if(t.map[i-t.width]==o){l=!0;let i=n.nodeAt(o),{top:u,left:h}=t.findCell(o);e.setNodeMarkup(e.mapping.slice(a).map(o+r),null,{...i.attrs,rowspan:s-u}),e.insert(e.mapping.slice(a).map(t.positionAt(s,h,n)),i.type.createAndFill({...i.attrs,rowspan:u+i.attrs.rowspan-s})),c+=i.attrs.colspan-1}}return l}function GJ(e,t,n,r,i,o,s,a){if(0==s||s==t.width)return!1;let l=!1;for(let c=i;c<o;c++){let i=c*t.width+s,o=t.map[i];if(t.map[i-1]==o){l=!0;let i=n.nodeAt(o),u=t.colCount(o),h=e.mapping.slice(a).map(o+r);e.setNodeMarkup(h,null,GD(i.attrs,s-u,i.attrs.colspan-(s-u))),e.insert(h+i.nodeSize,i.type.createAndFill(GD(i.attrs,0,s-u))),c+=i.attrs.rowspan-1}}return l}function G0(e,t,n,r,i){let o=n?e.doc.nodeAt(n-1):e.doc;if(!o)throw Error("No table found");let s=GS.get(o),{top:a,left:l}=r,c=l+i.width,u=a+i.height,h=e.tr,d=0;function f(){if(!(o=n?h.doc.nodeAt(n-1):h.doc))throw Error("No table found");s=GS.get(o),d=h.mapping.maps.length}(function(e,t,n,r,i,o,s){let a,l;let c=GC(e.doc.type.schema);if(i>t.width)for(let o=0,s=0;o<t.height;o++){let u;let h=n.child(o);s+=h.nodeSize;let d=[];u=null==h.lastChild||h.lastChild.type==c.cell?a||(a=c.cell.createAndFill()):l||(l=c.header_cell.createAndFill());for(let e=t.width;e<i;e++)d.push(u);e.insert(e.mapping.slice(0).map(s-1+r),d)}if(o>t.height){let u=[];for(let e=0,r=(t.height-1)*t.width;e<Math.max(t.width,i);e++){let i=!(e>=t.width)&&n.nodeAt(t.map[r+e]).type==c.header_cell;u.push(i?l||(l=c.header_cell.createAndFill()):a||(a=c.cell.createAndFill()))}let h=c.row.create(null,RL.from(u)),d=[];for(let e=t.height;e<o;e++)d.push(h);e.insert(e.mapping.slice(s).map(r+n.nodeSize-2),d)}return!!(a||l)})(h,s,o,n,c,u,0)&&f(),GK(h,s,o,n,l,c,a,d)&&f(),GK(h,s,o,n,l,c,u,d)&&f(),GJ(h,s,o,n,a,u,l,d)&&f(),GJ(h,s,o,n,a,u,c,d)&&f();for(let e=a;e<u;e++){let t=s.positionAt(e,l,o),r=s.positionAt(e,c,o);h.replace(h.mapping.slice(d).map(t+n),h.mapping.slice(d).map(r+n),new RV(i.rows[e-a],0,0))}f(),h.setSelection(new GR(h.doc.resolve(n+s.positionAt(a,l,o)),h.doc.resolve(n+s.positionAt(u-1,c-1,o)))),t(h)}var G1=qJ({ArrowLeft:G4("horiz",-1),ArrowRight:G4("horiz",1),ArrowUp:G4("vert",-1),ArrowDown:G4("vert",1),"Shift-ArrowLeft":G5("horiz",-1),"Shift-ArrowRight":G5("horiz",1),"Shift-ArrowUp":G5("vert",-1),"Shift-ArrowDown":G5("vert",1),Backspace:GY,"Mod-Backspace":GY,Delete:GY,"Mod-Delete":GY});function G2(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function G4(e,t){return(n,r,i)=>{if(!i)return!1;let o=n.selection;if(o instanceof GR)return G2(n,r,I8.near(o.$headCell,t));if("horiz"!=e&&!o.empty)return!1;let s=G8(i,e,t);if(null==s)return!1;if("horiz"==e)return G2(n,r,I8.near(n.doc.resolve(o.head+t),t));{let i;let o=n.doc.resolve(s),a=Gj(o,e,t);return i=a?I8.near(a,1):t<0?I8.near(n.doc.resolve(o.before(-1)),-1):I8.near(n.doc.resolve(o.after(-1)),1),G2(n,r,i)}}}function G5(e,t){return(n,r,i)=>{let o;if(!i)return!1;let s=n.selection;if(s instanceof GR)o=s;else{let r=G8(i,e,t);if(null==r)return!1;o=new GR(n.doc.resolve(r))}let a=Gj(o.$headCell,e,t);return!!a&&G2(n,r,new GR(o.$anchorCell,a))}}function G3(e,t){let n=GA(e.state.doc.resolve(t));return!!n&&(e.dispatch(e.state.tr.setSelection(new GR(n))),!0)}function G6(e,t,n){if(!GE(e.state))return!1;let r=function(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:r}=e;for(;1==t.childCount&&(n>0&&r>0||"table"==t.child(0).type.spec.tableRole);)n--,r--,t=t.child(0).content;let i=t.child(0),o=i.type.spec.tableRole,s=i.type.schema,a=[];if("row"==o)for(let e=0;e<t.childCount;e++){let i=t.child(e).content,o=e?0:Math.max(0,n-1),l=e<t.childCount-1?0:Math.max(0,r-1);(o||l)&&(i=GZ(GC(s).row,new RV(i,o,l)).content),a.push(i)}else{if("cell"!=o&&"header_cell"!=o)return null;a.push(n||r?GZ(GC(s).row,new RV(t,n,r)).content:t)}return function(e,t){let n=[];for(let e=0;e<t.length;e++){let r=t[e];for(let t=r.childCount-1;t>=0;t--){let{rowspan:i,colspan:o}=r.child(t).attrs;for(let t=e;t<e+i;t++)n[t]=(n[t]||0)+o}}let r=0;for(let e=0;e<n.length;e++)r=Math.max(r,n[e]);for(let i=0;i<n.length;i++)if(i>=t.length&&t.push(RL.empty),n[i]<r){let o=GC(e).cell.createAndFill(),s=[];for(let e=n[i];e<r;e++)s.push(o);t[i]=t[i].append(RL.from(s))}return{height:t.length,width:r,rows:t}}(s,a)}(n),i=e.state.selection;if(i instanceof GR){r||(r={width:1,height:1,rows:[RL.from(GZ(GC(e.state.schema).cell,n))]});let t=i.$anchorCell.node(-1),o=i.$anchorCell.start(-1),s=GS.get(t).rectBetween(i.$anchorCell.pos-o,i.$headCell.pos-o);return r=function({width:e,height:t,rows:n},r,i){if(e!=r){let t=[],i=[];for(let e=0;e<n.length;e++){let o=n[e],s=[];for(let n=t[e]||0,i=0;n<r;i++){let a=o.child(i%o.childCount);n+a.attrs.colspan>r&&(a=a.type.createChecked(GD(a.attrs,a.attrs.colspan,n+a.attrs.colspan-r),a.content)),s.push(a),n+=a.attrs.colspan;for(let n=1;n<a.attrs.rowspan;n++)t[e+n]=(t[e+n]||0)+a.attrs.colspan}i.push(RL.from(s))}n=i,e=r}if(t!=i){let e=[];for(let r=0,o=0;r<i;r++,o++){let s=[],a=n[o%t];for(let e=0;e<a.childCount;e++){let t=a.child(e);r+t.attrs.rowspan>i&&(t=t.type.create({...t.attrs,rowspan:Math.max(1,i-t.attrs.rowspan)},t.content)),s.push(t)}e.push(RL.from(s))}n=e,t=i}return{width:e,height:t,rows:n}}(r,s.right-s.left,s.bottom-s.top),G0(e.state,e.dispatch,o,s,r),!0}if(!r)return!1;{let t=GM(e.state),n=t.start(-1);return G0(e.state,e.dispatch,n,GS.get(t.node(-1)).findCell(t.pos-n),r),!0}}function G7(e,t){var n;let r;if(t.ctrlKey||t.metaKey)return;let i=G9(e,t.target);if(t.shiftKey&&e.state.selection instanceof GR)o(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&i&&null!=(r=GA(e.state.selection.$anchor))&&(null==(n=Xe(e,t))?void 0:n.pos)!=r.pos)o(r,t),t.preventDefault();else if(!i)return;function o(t,n){let r=Xe(e,n),i=null==GT.getState(e.state);if(!r||!G_(t,r)){if(!i)return;r=t}let o=new GR(t,r);if(i||!e.state.selection.eq(o)){let n=e.state.tr.setSelection(o);i&&n.setMeta(GT,t.pos),e.dispatch(n)}}function s(){e.root.removeEventListener("mouseup",s),e.root.removeEventListener("dragstart",s),e.root.removeEventListener("mousemove",a),null!=GT.getState(e.state)&&e.dispatch(e.state.tr.setMeta(GT,-1))}function a(n){let r;let a=GT.getState(e.state);if(null!=a)r=e.state.doc.resolve(a);else if(G9(e,n.target)!=i&&!(r=Xe(e,t)))return s();r&&o(r,n)}e.root.addEventListener("mouseup",s),e.root.addEventListener("dragstart",s),e.root.addEventListener("mousemove",a)}function G8(e,t,n){if(!(e.state.selection instanceof zn))return null;let{$head:r}=e.state.selection;for(let i=r.depth-1;i>=0;i--){let o=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:o.childCount))break;if("cell"==o.type.spec.tableRole||"header_cell"==o.type.spec.tableRole){let o=r.before(i),s="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(s)?o:null}}return null}function G9(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t;return null}function Xe(e,t){let n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?GA(e.state.doc.resolve(n.pos)):null}var Xt=class{constructor(e,t){this.node=e,this.defaultCellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${t}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Xn(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type==this.node.type&&(this.node=e,Xn(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))}};function Xn(e,t,n,r,i,o){var s;let a=0,l=!0,c=t.firstChild,u=e.firstChild;if(u){for(let e=0,n=0;e<u.childCount;e++){let{colspan:s,colwidth:h}=u.child(e).attrs;for(let e=0;e<s;e++,n++){let s=i==n?o:h&&h[e],u=s?s+"px":"";if(a+=s||r,s||(l=!1),c)c.style.width!=u&&(c.style.width=u),c=c.nextSibling;else{let e=document.createElement("col");e.style.width=u,t.appendChild(e)}}}for(;c;){let e=c.nextSibling;null==(s=c.parentNode)||s.removeChild(c),c=e}l?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var Xr=new zv("tableColumnResizing"),Xi=class e{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(t){let n=t.getMeta(Xr);if(n&&null!=n.setHandle)return new e(n.setHandle,!1);if(n&&void 0!==n.setDragging)return new e(this.activeHandle,n.setDragging);if(this.activeHandle>-1&&t.docChanged){let n=t.mapping.map(this.activeHandle,-1);return GN(t.doc.resolve(n))||(n=-1),new e(n,this.dragging)}return this}};function Xo(e,t,n,r){let i=e.posAtCoords({left:t.clientX+("right"==n?-r:r),top:t.clientY});if(!i)return -1;let{pos:o}=i,s=GA(e.state.doc.resolve(o));if(!s)return -1;if("right"==n)return s.pos;let a=GS.get(s.node(-1)),l=s.start(-1),c=a.map.indexOf(s.pos-l);return c%a.width==0?-1:l+a.map[c-1]}function Xs(e,t,n){let r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function Xa(e,t){e.dispatch(e.state.tr.setMeta(Xr,{setHandle:t}))}function Xl(e,t,n,r){let i=e.state.doc.resolve(t),o=i.node(-1),s=i.start(-1),a=GS.get(o).colCount(i.pos-s)+i.nodeAfter.attrs.colspan-1,l=e.domAtPos(i.start(-1)).node;for(;l&&"TABLE"!=l.nodeName;)l=l.parentNode;l&&Xn(o,l.firstChild,l,r,a,n)}function Xc(e,t){return t?["width",`${Math.max(t,e)}px`]:["min-width",`${e}px`]}function Xu(e,t,n,r,i,o){var s;let a=0,l=!0,c=t.firstChild,u=e.firstChild;if(null!==u)for(let e=0,n=0;e<u.childCount;e+=1){let{colspan:s,colwidth:h}=u.child(e).attrs;for(let e=0;e<s;e+=1,n+=1){let s=i===n?o:h&&h[e],u=s?`${s}px`:"";if(a+=s||r,s||(l=!1),c){if(c.style.width!==u){let[e,t]=Xc(r,s);c.style.setProperty(e,t)}c=c.nextSibling}else{let e=document.createElement("col"),[n,i]=Xc(r,s);e.style.setProperty(n,i),t.appendChild(e)}}}for(;c;){let e=c.nextSibling;null===(s=c.parentNode)||void 0===s||s.removeChild(c),c=e}l?(n.style.width=`${a}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${a}px`)}class Xh{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Xu(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type===this.node.type&&(this.node=e,Xu(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return"attributes"===e.type&&(e.target===this.table||this.colgroup.contains(e.target))}}function Xd(e,t){return e.createAndFill()}let Xf=({editor:e})=>{let{selection:t}=e.state;if(!(t instanceof GR))return!1;let n=0,r=Ba(t.ranges[0].$from,e=>"table"===e.type.name);return null==r||r.node.descendants(e=>{if("table"===e.type.name)return!1;["tableCell","tableHeader"].includes(e.type.name)&&(n+=1)}),n===t.ranges.length&&(e.commands.deleteTable(),!0)},Xp=Bj.create({name:"table",addOptions:()=>({HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:Xh,lastColumnResizable:!0,allowTableNodeSelection:!1}),content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML:()=>[{tag:"table"}],renderHTML({node:e,HTMLAttributes:t}){let{colgroup:n,tableWidth:r,tableMinWidth:i}=function(e,t,n,r){let i=0,o=!0,s=[],a=e.firstChild;if(!a)return{};for(let e=0,n=0;e<a.childCount;e+=1){let{colspan:r,colwidth:l}=a.child(e).attrs;for(let e=0;e<r;e+=1,n+=1){let r=void 0===n?void 0:l&&l[e];i+=r||t,r||(o=!1);let[a,c]=Xc(t,r);s.push(["col",{style:`${a}: ${c}`}])}}return{colgroup:["colgroup",{},...s],tableWidth:o?`${i}px`:"",tableMinWidth:o?"":`${i}px`}}(e,this.options.cellMinWidth);return["table",$C(this.options.HTMLAttributes,t,{style:r?`width: ${r}`:`min-width: ${i}`}),n,["tbody",0]]},addCommands:()=>({insertTable:({rows:e=3,cols:t=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:i,editor:o})=>{let s=function(e,t,n,r,i){let o=function(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;let t={};return Object.keys(e.nodes).forEach(n=>{let r=e.nodes[n];r.spec.tableRole&&(t[r.spec.tableRole]=r)}),e.cached.tableNodeTypes=t,t}(e),s=[],a=[];for(let e=0;e<n;e+=1){let e=Xd(o.cell);if(e&&a.push(e),r){let e=Xd(o.header_cell);e&&s.push(e)}}let l=[];for(let e=0;e<t;e+=1)l.push(o.row.createChecked(null,r&&0===e?s:a));return o.table.createChecked(null,l)}(o.schema,e,t,n);if(i){let e=r.selection.from+1;r.replaceSelectionWith(s).scrollIntoView().setSelection(zn.near(r.doc.resolve(e)))}return!0},addColumnBefore:()=>({state:e,dispatch:t})=>(function(e,t){if(!GE(e))return!1;if(t){let n=G$(e);t(GB(e.tr,n,n.left))}return!0})(e,t),addColumnAfter:()=>({state:e,dispatch:t})=>(function(e,t){if(!GE(e))return!1;if(t){let n=G$(e);t(GB(e.tr,n,n.right))}return!0})(e,t),deleteColumn:()=>({state:e,dispatch:t})=>(function(e,t){if(!GE(e))return!1;if(t){let n=G$(e),r=e.tr;if(0==n.left&&n.right==n.map.width)return!1;for(let e=n.right-1;function(e,{map:t,table:n,tableStart:r},i){let o=e.mapping.maps.length;for(let s=0;s<t.height;){let a=s*t.width+i,l=t.map[a],c=n.nodeAt(l),u=c.attrs;if(i>0&&t.map[a-1]==l||i<t.width-1&&t.map[a+1]==l)e.setNodeMarkup(e.mapping.slice(o).map(r+l),null,GD(u,i-t.colCount(l)));else{let t=e.mapping.slice(o).map(r+l);e.delete(t,t+c.nodeSize)}s+=u.rowspan}}(r,n,e),e!=n.left;e--){let e=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!e)throw RangeError("No table found");n.table=e,n.map=GS.get(e)}t(r)}return!0})(e,t),addRowBefore:()=>({state:e,dispatch:t})=>(function(e,t){if(!GE(e))return!1;if(t){let n=G$(e);t(GF(e.tr,n,n.top))}return!0})(e,t),addRowAfter:()=>({state:e,dispatch:t})=>(function(e,t){if(!GE(e))return!1;if(t){let n=G$(e);t(GF(e.tr,n,n.bottom))}return!0})(e,t),deleteRow:()=>({state:e,dispatch:t})=>(function(e,t){if(!GE(e))return!1;if(t){let n=G$(e),r=e.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(let e=n.bottom-1;function(e,{map:t,table:n,tableStart:r},i){let o=0;for(let e=0;e<i;e++)o+=n.child(e).nodeSize;let s=o+n.child(i).nodeSize,a=e.mapping.maps.length;e.delete(o+r,s+r);let l=new Set;for(let o=0,s=i*t.width;o<t.width;o++,s++){let c=t.map[s];if(!l.has(c)){if(l.add(c),i>0&&c==t.map[s-t.width]){let t=n.nodeAt(c).attrs;e.setNodeMarkup(e.mapping.slice(a).map(c+r),null,{...t,rowspan:t.rowspan-1}),o+=t.colspan-1}else if(i<t.height&&c==t.map[s+t.width]){let s=n.nodeAt(c),l=s.attrs,u=s.type.create({...l,rowspan:s.attrs.rowspan-1},s.content),h=t.positionAt(i+1,o,n);e.insert(e.mapping.slice(a).map(r+h),u),o+=l.colspan-1}}}}(r,n,e),e!=n.top;e--){let e=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!e)throw RangeError("No table found");n.table=e,n.map=GS.get(n.table)}t(r)}return!0})(e,t),deleteTable:()=>({state:e,dispatch:t})=>(function(e,t){let n=e.selection.$anchor;for(let r=n.depth;r>0;r--)if("table"==n.node(r).type.spec.tableRole)return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1})(e,t),mergeCells:()=>({state:e,dispatch:t})=>GV(e,t),splitCell:()=>({state:e,dispatch:t})=>GH(e,t),toggleHeaderColumn:()=>({state:e,dispatch:t})=>GW("column")(e,t),toggleHeaderRow:()=>({state:e,dispatch:t})=>GW("row")(e,t),toggleHeaderCell:()=>({state:e,dispatch:t})=>GG(e,t),mergeOrSplit:()=>({state:e,dispatch:t})=>!!GV(e,t)||GH(e,t),setCellAttribute:(e,t)=>({state:n,dispatch:r})=>(function(e,t){return function(n,r){if(!GE(n))return!1;let i=GM(n);if(i.nodeAfter.attrs[e]===t)return!1;if(r){let o=n.tr;n.selection instanceof GR?n.selection.forEachCell((n,r)=>{n.attrs[e]!==t&&o.setNodeMarkup(r,null,{...n.attrs,[e]:t})}):o.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[e]:t}),r(o)}return!0}})(e,t)(n,r),goToNextCell:()=>({state:e,dispatch:t})=>GX(1)(e,t),goToPreviousCell:()=>({state:e,dispatch:t})=>GX(-1)(e,t),fixTables:()=>({state:e,dispatch:t})=>(t&&Gq(e),!0),setCellSelection:e=>({tr:t,dispatch:n})=>{if(n){let n=GR.create(t.doc,e.anchorCell,e.headCell);t.setSelection(n)}return!0}}),addKeyboardShortcuts(){return{Tab:()=>!!this.editor.commands.goToNextCell()||!!this.editor.can().addRowAfter()&&this.editor.chain().addRowAfter().goToNextCell().run(),"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:Xf,"Mod-Backspace":Xf,Delete:Xf,"Mod-Delete":Xf}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[function({handleWidth:e=5,cellMinWidth:t=25,defaultCellMinWidth:n=100,View:r=Xt,lastColumnResizable:i=!0}={}){let o=new zg({key:Xr,state:{init(e,t){var i,s;let a=null==(s=null==(i=o.spec)?void 0:i.props)?void 0:s.nodeViews,l=GC(t.schema).table.name;return r&&a&&(a[l]=(e,t)=>new r(e,n,t)),new Xi(-1,!1)},apply:(e,t)=>t.apply(e)},props:{attributes:e=>{let t=Xr.getState(e);return t&&t.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(t,n)=>{!function(e,t,n,r){if(!e.editable)return;let i=Xr.getState(e.state);if(i&&!i.dragging){let o=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target),s=-1;if(o){let{left:r,right:i}=o.getBoundingClientRect();t.clientX-r<=n?s=Xo(e,t,"left",n):i-t.clientX<=n&&(s=Xo(e,t,"right",n))}if(s!=i.activeHandle){if(!r&&-1!==s){let t=e.state.doc.resolve(s),n=t.node(-1),r=GS.get(n),i=t.start(-1);if(r.colCount(t.pos-i)+t.nodeAfter.attrs.colspan-1==r.width-1)return}Xa(e,s)}}}(t,n,e,i)},mouseleave:e=>{!function(e){if(!e.editable)return;let t=Xr.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&Xa(e,-1)}(e)},mousedown:(e,r)=>{!function(e,t,n,r){var i;if(!e.editable)return;let o=null!=(i=e.dom.ownerDocument.defaultView)?i:window,s=Xr.getState(e.state);if(!s||-1==s.activeHandle||s.dragging)return;let a=e.state.doc.nodeAt(s.activeHandle),l=function(e,t,{colspan:n,colwidth:r}){let i=r&&r[r.length-1];if(i)return i;let o=e.domAtPos(t),s=o.node.childNodes[o.offset].offsetWidth,a=n;if(r)for(let e=0;e<n;e++)r[e]&&(s-=r[e],a--);return s/a}(e,s.activeHandle,a.attrs);function c(t){o.removeEventListener("mouseup",c),o.removeEventListener("mousemove",u);let r=Xr.getState(e.state);null!=r&&r.dragging&&(function(e,t,n){let r=e.state.doc.resolve(t),i=r.node(-1),o=GS.get(i),s=r.start(-1),a=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,l=e.state.tr;for(let e=0;e<o.height;e++){let t=e*o.width+a;if(e&&o.map[t]==o.map[t-o.width])continue;let r=o.map[t],c=i.nodeAt(r).attrs,u=1==c.colspan?0:a-o.colCount(r);if(c.colwidth&&c.colwidth[u]==n)continue;let h=c.colwidth?c.colwidth.slice():Array(c.colspan).fill(0);h[u]=n,l.setNodeMarkup(s+r,null,{...c,colwidth:h})}l.docChanged&&e.dispatch(l)}(e,r.activeHandle,Xs(r.dragging,t,n)),e.dispatch(e.state.tr.setMeta(Xr,{setDragging:null})))}function u(t){if(!t.which)return c(t);let i=Xr.getState(e.state);if(i&&i.dragging){let o=Xs(i.dragging,t,n);Xl(e,i.activeHandle,o,r)}}e.dispatch(e.state.tr.setMeta(Xr,{setDragging:{startX:t.clientX,startWidth:l}})),Xl(e,s.activeHandle,l,r),o.addEventListener("mouseup",c),o.addEventListener("mousemove",u),t.preventDefault()}(e,r,t,n)}},decorations:e=>{let t=Xr.getState(e);if(t&&t.activeHandle>-1)return function(e,t){var n;let r=[],i=e.doc.resolve(t),o=i.node(-1);if(!o)return qk.empty;let s=GS.get(o),a=i.start(-1),l=s.colCount(i.pos-a)+i.nodeAfter.attrs.colspan-1;for(let t=0;t<s.height;t++){let i=l+t*s.width;if((l==s.width-1||s.map[i]!=s.map[i+1])&&(0==t||s.map[i]!=s.map[i-s.width])){let t=s.map[i],l=a+t+o.nodeAt(t).nodeSize-1,c=document.createElement("div");c.className="column-resize-handle",null!=(n=Xr.getState(e))&&n.dragging&&r.push(qv.node(a+t,a+t+o.nodeAt(t).nodeSize,{class:"column-resize-dragging"})),r.push(qv.widget(l,c))}}return qk.create(e.doc,r)}(e,t.activeHandle)},nodeViews:{}}});return o}({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],function({allowTableNodeSelection:e=!1}={}){return new zg({key:GT,state:{init:()=>null,apply(e,t){let n=e.getMeta(GT);if(null!=n)return -1==n?null:n;if(null==t||!e.docChanged)return t;let{deleted:r,pos:i}=e.mapping.mapResult(t);return r?null:i}},props:{decorations:Gz,handleDOMEvents:{mousedown:G7},createSelectionBetween:e=>null!=GT.getState(e.state)?e.state.selection:null,handleTripleClick:G3,handleKeyDown:G1,handlePaste:G6},appendTransaction:(t,n,r)=>(function(e,t,n){let r,i;let o=(t||e).selection,s=(t||e).doc;if(o instanceof zi&&(i=o.node.type.spec.tableRole)){if("cell"==i||"header_cell"==i)r=GR.create(s,o.from);else if("row"==i){let e=s.resolve(o.from+1);r=GR.rowSelection(e,e)}else if(!n){let e=GS.get(o.node),t=o.from+1,n=t+e.map[e.width*e.height-1];r=GR.create(s,t+1,n)}}else o instanceof zn&&function({$from:e,$to:t}){if(e.pos==t.pos||e.pos<t.pos-6)return!1;let n=e.pos,r=t.pos,i=e.depth;for(;i>=0&&!(e.after(i+1)<e.end(i));i--,n++);for(let e=t.depth;e>=0&&!(t.before(e+1)>t.start(e));e--,r--);return n==r&&/row|table/.test(e.node(i).type.spec.tableRole)}(o)?r=zn.create(s,o.from):o instanceof zn&&function({$from:e,$to:t}){let n,r;for(let t=e.depth;t>0;t--){let r=e.node(t);if("cell"===r.type.spec.tableRole||"header_cell"===r.type.spec.tableRole){n=r;break}}for(let e=t.depth;e>0;e--){let n=t.node(e);if("cell"===n.type.spec.tableRole||"header_cell"===n.type.spec.tableRole){r=n;break}}return n!==r&&0===t.parentOffset}(o)&&(r=zn.create(s,o.$from.start(),o.$from.end()));return r&&(t||(t=e.tr)).setSelection(r),t})(r,Gq(r,n),e)})}({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(e){let t={name:e.name,options:e.options,storage:e.storage};return{tableRole:$E($w(e,"tableRole",t))}}}),Xm=Bj.create({name:"tableRow",addOptions:()=>({HTMLAttributes:{}}),content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML:()=>[{tag:"tr"}],renderHTML({HTMLAttributes:e}){return["tr",$C(this.options.HTMLAttributes,e),0]}}),Xg=Bj.create({name:"tableHeader",addOptions:()=>({HTMLAttributes:{}}),content:"block+",addAttributes:()=>({colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{let t=e.getAttribute("colwidth");return t?t.split(",").map(e=>parseInt(e,10)):null}}}),tableRole:"header_cell",isolating:!0,parseHTML:()=>[{tag:"th"}],renderHTML({HTMLAttributes:e}){return["th",$C(this.options.HTMLAttributes,e),0]}}),Xy=Bj.create({name:"tableCell",addOptions:()=>({HTMLAttributes:{}}),content:"block+",addAttributes:()=>({colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{let t=e.getAttribute("colwidth");return t?t.split(",").map(e=>parseInt(e,10)):null}}}),tableRole:"cell",isolating:!0,parseHTML:()=>[{tag:"td"}],renderHTML({HTMLAttributes:e}){return["td",$C(this.options.HTMLAttributes,e),0]}}),Xb={};function Xv(e,t){"string"!=typeof t&&(t=Xv.defaultChars);let n=function(e){let t=Xb[e];if(t)return t;t=Xb[e]=[];for(let e=0;e<128;e++){let n=String.fromCharCode(e);t.push(n)}for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(e){let t="";for(let r=0,i=e.length;r<i;r+=3){let o=parseInt(e.slice(r+1,r+3),16);if(o<128){t+=n[o];continue}if((224&o)==192&&r+3<i){let n=parseInt(e.slice(r+4,r+6),16);if((192&n)==128){let e=o<<6&1984|63&n;e<128?t+="":t+=String.fromCharCode(e),r+=3;continue}}if((240&o)==224&&r+6<i){let n=parseInt(e.slice(r+4,r+6),16),i=parseInt(e.slice(r+7,r+9),16);if((192&n)==128&&(192&i)==128){let e=o<<12&61440|n<<6&4032|63&i;e<2048||e>=55296&&e<=57343?t+="":t+=String.fromCharCode(e),r+=6;continue}}if((248&o)==240&&r+9<i){let n=parseInt(e.slice(r+4,r+6),16),i=parseInt(e.slice(r+7,r+9),16),s=parseInt(e.slice(r+10,r+12),16);if((192&n)==128&&(192&i)==128&&(192&s)==128){let e=o<<18&1835008|n<<12&258048|i<<6&4032|63&s;e<65536||e>1114111?t+="":(e-=65536,t+=String.fromCharCode(55296+(e>>10),56320+(1023&e))),r+=9;continue}}t+=""}return t})}Xv.defaultChars=";/?:@&=+$,#",Xv.componentChars="";let Xx={};function Xw(e,t,n){"string"!=typeof t&&(n=t,t=Xw.defaultChars),typeof n>"u"&&(n=!0);let r=function(e){let t=Xx[e];if(t)return t;t=Xx[e]=[];for(let e=0;e<128;e++){let n=String.fromCharCode(e);/^[0-9a-z]$/i.test(n)?t.push(n):t.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}(t),i="";for(let t=0,o=e.length;t<o;t++){let s=e.charCodeAt(t);if(n&&37===s&&t+2<o&&/^[0-9a-f]{2}$/i.test(e.slice(t+1,t+3))){i+=e.slice(t,t+3),t+=2;continue}if(s<128){i+=r[s];continue}if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&t+1<o){let n=e.charCodeAt(t+1);if(n>=56320&&n<=57343){i+=encodeURIComponent(e[t]+e[t+1]),t++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(e[t])}return i}function Xk(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&-1!==e.hostname.indexOf(":")?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||""}function XO(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}Xw.defaultChars=";/?:@&=+$,-_.!~*'()#",Xw.componentChars="-_.!~*'()";let XS=/^([a-z0-9.+-]+:)/i,XC=/:[0-9]*$/,XT=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,XA=["%","/","?",";","#"].concat(["'"].concat(["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]))),XE=["/","?","#"],XM=/^[+a-z0-9A-Z_-]{0,63}$/,XN=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,X_={javascript:!0,"javascript:":!0},Xj={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function XD(e,t){if(e&&e instanceof XO)return e;let n=new XO;return n.parse(e,t),n}XO.prototype.parse=function(e,t){let n,r,i,o=e;if(o=o.trim(),!t&&1===e.split("#").length){let e=XT.exec(o);if(e)return this.pathname=e[1],e[2]&&(this.search=e[2]),this}let s=XS.exec(o);if(s&&(n=(s=s[0]).toLowerCase(),this.protocol=s,o=o.substr(s.length)),(t||s||o.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i="//"===o.substr(0,2))&&!(s&&X_[s])&&(o=o.substr(2),this.slashes=!0),!X_[s]&&(i||s&&!Xj[s])){let e,t,n=-1;for(let e=0;e<XE.length;e++)-1!==(r=o.indexOf(XE[e]))&&(-1===n||r<n)&&(n=r);-1!==(t=-1===n?o.lastIndexOf("@"):o.lastIndexOf("@",n))&&(e=o.slice(0,t),o=o.slice(t+1),this.auth=e),n=-1;for(let e=0;e<XA.length;e++)-1!==(r=o.indexOf(XA[e]))&&(-1===n||r<n)&&(n=r);-1===n&&(n=o.length),":"===o[n-1]&&n--;let i=o.slice(0,n);o=o.slice(n),this.parseHost(i),this.hostname=this.hostname||"";let s="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!s){let e=this.hostname.split(/\./);for(let t=0,n=e.length;t<n;t++){let n=e[t];if(n&&!n.match(XM)){let r="";for(let e=0,t=n.length;e<t;e++)n.charCodeAt(e)>127?r+="x":r+=n[e];if(!r.match(XM)){let r=e.slice(0,t),i=e.slice(t+1),s=n.match(XN);s&&(r.push(s[1]),i.unshift(s[2])),i.length&&(o=i.join(".")+o),this.hostname=r.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),s&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}let a=o.indexOf("#");-1!==a&&(this.hash=o.substr(a),o=o.slice(0,a));let l=o.indexOf("?");return -1!==l&&(this.search=o.substr(l),o=o.slice(0,l)),o&&(this.pathname=o),Xj[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this},XO.prototype.parseHost=function(e){let t=XC.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};let XP=Object.freeze(Object.defineProperty({__proto__:null,decode:Xv,encode:Xw,format:Xk,parse:XD},Symbol.toStringTag,{value:"Module"})),XR=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,XI=/[\0-\x1F\x7F-\x9F]/,Xz=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,XL=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,Xq=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,X$=Object.freeze(Object.defineProperty({__proto__:null,Any:XR,Cc:XI,Cf:/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,P:Xz,S:XL,Z:Xq},Symbol.toStringTag,{value:"Module"})),XB=new Uint16Array('<\xd5\0\0\0\0\0\0EMabcfglmnoprstu\\bfms\x7f\x84\x8b\x90\x95\x98\xa6\xb3\xb9\xc8\xcflig\xc6P&cute\xc1reve;iyx}rc\xc2;r;\uD835\uDD04rave\xc0pha;acr;d;gp\x9d\xa1on;f;\uD835\uDD38plyFunction;ing\xc5cs\xbe\xc3r;\uD835\uDC9Cign;ilde\xc3ml\xc4aceforsu\xe5\xfb\xfecr\xea\xf2kslash;\xf6\xf8;ed;y;crtause;noullis;a;r;\uD835\uDD05pf;\uD835\uDD39eve;c\xf2mpeq;HOacdefhilorsucy;PY\xa9cpyute;;italDifferentialD;leys;aeioron;dil\xc7rc;nint;ot;dnilla;terDot;\xf2i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;\uD835\uDC9Ep;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;\uD835\uDD07afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;\uD835\uDD3B;DEot;qual;bleCDLRUVontourIntegra\xeco\0\0\xbbnArrow;eoftARTrrow;ightArrow;e\xe5ngLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;\uD835\uDC9Frok;NTacdfglmopqstuxG;H\xd0cute\xc9aiyron;rc\xca;ot;r;\uD835\uDD08rave\xc8ement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;\uD835\uDD3Csilon;uail;Tilde;librium;cir;m;a;ml\xcbipsts;onentialE;cfiosy;r;\uD835\uDD09lled\0\0mallSquare;erySmallSquare;\0\0\0f;\uD835\uDD3DAll;riertrf;c\xf2JTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;\uD835\uDD0A;pf;\uD835\uDD3EeaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;\uD835\uDCA2;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ct\xf2rok;mpownHum\xf0qual;EJOacdfgmnostucy;lig;cy;cute\xcdiyrc\xce;ot;r;rave\xcc;apcgr;inaryI;lie\xf3\0;egrral;section;isibleCTomma;imes;gpton;f;\uD835\uDD40a;cr;ilde;\0cy;l\xcfcfosuiyrc;;r;\uD835\uDD0Dpf;\uD835\uDD41\0r;\uD835\uDCA5rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;\uD835\uDD0Epf;\uD835\uDD42cr;\uD835\uDCA6JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ight\xe1sEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;\uD835\uDD0F;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftaright\xe1ight\xe1f;\uD835\uDD43erLReftArrow;ightArrow;cht\xf2;rok;;acefiosup;y;dliumSpace;lintrf;r;\uD835\uDD10nusPlus;pf;\uD835\uDD44c\xf2;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicn\xeberyThi\xeetedGLreaterGreate\xf2essLes\xf3Line;r;\uD835\uDD11Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;\uD835\uDCA9ilde\xd1;Eacdfgmoprstuvlig;cute\xd3iyrc\xd4;blac;r;\uD835\uDD12rave\xd2aeicr;ga;cron;pf;\uD835\uDD46enCurlyDQoubleQuote;uote;;clr;\uD835\uDCAAash\xd8ide\xd5es;ml\xd6erBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;\uD835\uDD13i;;usMinus;ipncareplan\xe5f;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;\uD835\uDCAB;UfosOT"r;\uD835\uDD14pf;cr;\uD835\uDCACBEacefhiorsuarr;G\xaecnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;r\xbbo;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;\uD835\uDD16ortDLRUownArrow\xbbeftArrow\xbbightArrow\xbbpArrow;gma;allCircle;pf;\uD835\uDD4A\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;\uD835\uDCAEar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th\xe1;;esrset;Equal;et\xbbHRSacfhiorsORN\xdeADE;Hccy;y;bu;;aeyron;dil;;r;\uD835\uDD17ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;\uD835\uDD4BipleDot;ctr;\uD835\uDCAFrok;\0\0\0\0\0\0\0crute\xdar;ocir;r\0y;ve;iyrc\xdb;blac;r;\uD835\uDD18rave\xd9acr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;\uD835\uDD4CADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;own\xe1erLReftArrow;ightArrow;i;lon;ing;cr;\uD835\uDCB0ilde;ml\xdcDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;\uD835\uDD19pf;\uD835\uDD4Dcr;\uD835\uDCB1dash;cefosirc;dge;r;\uD835\uDD1Apf;\uD835\uDD4Ecr;\uD835\uDCB2fiosr;\uD835\uDD1B;pf;\uD835\uDD4Fcr;\uD835\uDCB3AIUacfosucy;cy;cy;cute\xddiyrc;;r;\uD835\uDD1Cpf;\uD835\uDD50cr;\uD835\uDCB4ml;Hacdefoscy;cute;ayron;;ot;\0oWidt\xe8a;r;pf;cr;\uD835\uDCB5\0\0\0\0\0\0\0cute\xe1reve;;Ediuy;;rc\xe2te\xb4;lig\xe6;r\xb2;\uD835\uDD1Erave\xe0epfpsym;\xe8ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;e\xbbsd;a;;;;;;;;t;vb;d;pth;\xbb\xb9arr;gpon;f;\uD835\uDD52;Eaeiop;cir;;d;s;rox;e\xf1ing\xe5ctyr;\uD835\uDCB6;mp;e\xf1ilde\xe3ml\xe4cionin\xf4nt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;ge\xbbrk;tbrk;oy;quo;cmprtaus;eptyv;s\xe9no\xf5ahw;;een;r;\uD835\uDD1Fgcostuvwaiu\xf0rc;p\xbbdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;e\xe5\xe5arow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;\uD835\uDD53;tom\xbbtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbar\xa6ceior;\uD835\uDCB7mi;m;el;bh;sub;l;et\xbbp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;\xeeaeiu\0s;on;dil\xe7rc;ps;sm;ot;dmnil\xb8ptyv;t\xa2;er\xe4r;\uD835\uDD20ceiy;ck;mark\xbb;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd\xbb;st;irc;ash;nint;id;cir;ubs;uit\xbb\0on;e;q\xc7\xc6\0\0a;t;;fl\xeeemxent\xbbe\xf3\0;dot;n\xf4fry;\uD835\uDD54o\xe4\xa9;sr;aorr;ss;cur;\uD835\uDCB8bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0re\xe3u\xe3ee;edge;en\xa4earrowlreft\xbbight\xbbe\xe4cionin\xf4nt;lcty;AHabcdefhijlorstuwzr\xf2ar;glrsger;eth;\xf2h;v\xbbarow;a\xe3ayron;;;aogrr;tseq;glm\xb0ta;ptyv;irsht;;\uD835\uDD21arlr\xbb\xbbaegsvm;osnd;suit;amma;in;;iode\xf7;ontimes;n\xf8cy;c\0\0rn;op;lptuwlar;f;\uD835\uDD55;empsq;dot;inus;lus;quare;blebarwedg\xe5\xfanadhownarrow\xf3arpoonlref\xf4igh\xf4karo\xf7\0\0rn;op;cotry;\uD835\uDCB9;l;rok;drot;i;fahr\xf2a\xf2angle;ciy;grarr;DacdefglmnopqrstuxDoo\xf4csute\xe9ter;aioyron;r;c\xealon;;ot;Drot;;\uD835\uDD22;rsave\xe8;dot;;ilsnters;;;dot;apscr;ty;svet\xbbp1;;;gs;p;gpon;f;\uD835\uDD56alsr;sl;us;i;lvon\xbb;csuviorc\xbb\0\0\xedantgltr\xbbess\xbbaeils;st;v;DD;parsl;Daot;rr;cdir;o\xf4ah;\xf0mrl\xebo;cipl;s\xf4eoctatio\xeenential\xe5\0\0\0\0\0\0\0llingdotse\xf1y;male;ilrlig;\0\0g;ig;;\uD835\uDD23lig;lig;fjaltt;ig;ns;of;\0f;\uD835\uDD57ak;v;artint;aocs\0\0\xbd;\xbc;;;\0;;\0\0\xbe;;5;\0;;8;l;wn;cr;\uD835\uDCBBEabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan\xf4;cdlc;ot;o;l;;es;r;\uD835\uDD24;gmel;cy;;Eaj;;;Eaes;p;prox\xbb;q;qim;pf;\uD835\uDD58cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pro\xf8r;qlqles\xf3i\xedenrtneqq;\xc5Aabcefkosyr\xf2ilmrrs\xf0f\xbbil\xf4drcy;;cwir;;ar;irc;alrrts;uit\xbblip;con;r;\uD835\uDD25sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;\uD835\uDD59bar;cltr;\uD835\uDCBDas\xe8rok;bpull;hen\xbb\0\0\0\0\0\0cute\xed;iyrc\xee;cxy;cl\xa1fr;\uD835\uDD26rave\xec;inoinnt;t;fin;ta;lig;aopcgtr;elpin\xe5ar\xf4h;f;ed;;cfotare;in;tie;do\xf4;celpal;grer\xf3\xe3arhk;rod;cgpty;on;f;\uD835\uDD5Aa;uest\xbfcir;\uD835\uDCBEn;Edsv;ot;;v;;ilde;\0cy;l\xefcfmosuiyrc;;r;\uD835\uDD27ath;pf;\uD835\uDD5B\0r;\uD835\uDCBFrcy;kcy;acfghjosppa;v;eydil;;r;\uD835\uDD28reen;cy;cy;pf;\uD835\uDD5Ccr;\uD835\uDCC0ABEHabcdefghjlmnoprstuvartr\xf2\xf2ail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;ra\xeebda;g;dl;\xe5;uo\xabr;bfhlpst;fs;s;\xebp;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;\xec\xe2;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;ta\xe9arpoonduown\xbbp\xbbeftarrows;ightahsrrow;sarpoon\xf3quigarro\xf7hreetimes;;qslan\xf4;cdgsc;ot;o;r;;es;adegsppro\xf8ot;qgq\xf4gt\xf2\xf4i\xedilrsht;;\uD835\uDD29;E;rdu;l;lk;cy;;achtr\xf2orne\xf2ard;ri;iodot;ust;ache\xbbEaes;p;prox\xbb;q;qim;abnoptwznrg;r;r\xebglmreftaright\xe1apsto;ight\xe1parrowlref\xf4ight;aflr;;\uD835\uDD5Dus;imes;st;\xe1;efnge\xbbar;lt;achmtr\xf2orne\xf2ar;d;;ri;achiqtquo;r;\uD835\uDCC1m;eg;;buo;r;rok;<;cdhilqrci;r;re\xe5mes;arr;uest;Piar;;efrdushar;har;enrtneqq;\xc5DacdefhilnopsuDot;clprr\xafet;;ese\xbb;sto;dluow\xeeef\xf4\xf0ker;oymma;;ash;asuredangle\xbbr;\uD835\uDD2Ao;cdnro\xb5;acds\xf4ir;ot\xb7us;bd;u;p;\xf2\xf0dpels;f;\uD835\uDD5Ectr;\uD835\uDCC2pos\xbb;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptla\xbbute;g;;Eiop;d;s;ro\xf8ur;al;s\0p\xa0mp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;ui\xf6eiar;\xedist;sr;\uD835\uDD2BEest;qs;qslan\xf4i\xed;r\xbbAapr\xf2rr;ar;;sv;d;cy;AEadestr\xf2;rr;r;;fqstarrro\xf7ightarro\xf7;qslan\xf4;s\xbbi\xed;ri;ei\xe4ptf;\uD835\uDD5F\xac;inn;Edv;ot;;;i;v;;aorr;astlle\xecl;;lint;;ceu\xe5;c;e\xf1Aaitr\xf2rr;cw;;ghtarrow\xbbri;echimpqu;ceru\xe5;\uD835\uDCC3ort\0\0ar\xe1m;e;qsubp\xe5\xe5bcp;Ees;et;eq;qc;e\xf1;Ees;et;eq;qgilr\xeclde\xf1\xe7ianglelreft;e\xf1ight;e\xf1;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csute\xf3iyr;c\xf4;abioslac;v;old;lig;crir;;\uD835\uDD2C\0\0\0n;ave\xf2;bmar;acitr\xf2irr;oss;n\xe5;aeicr;ga;cdnron;;pf;\uD835\uDD60aelr;rp;;adiosvr\xf2;efmr;of\xbb\xaa\xbagof;r;lope;;clo\xf2ash\xf8l;ide\xf5es;as;ml\xf6bar;\0\0\0\0\0\0\0\0\0r;ast\xb6;lle\xec\0\0m;;y;rcimptnt;od;il;enk;r;\uD835\uDD2Dimo;v;ma\xf4ne;;tvchfork\xbb;aunckk;h;\xf6s;abcdemstcir;ir;ou;;n\xb1im;wo;ipuntint;f;\uD835\uDD61nd\xa3;Eaceinosu;p;u\xe5;c;acensppro\xf8urlye\xf1\xf1aespprox;qq;im;i\xedme;sEas\xf0dfpalslar;ine;urf;;t\xefrel;cir;\uD835\uDCC5;ncsp;fiopsur;\uD835\uDD2Epf;\uD835\uDD62rime;cr;\uD835\uDCC6aeoteirnion\xf3nt;st;e\xf1\xf4ABHabcdefhilmnoprstuxartr\xf2\xf2ail;ar\xf2ar;cdenqrteu;te;i\xe3mptyv;g;del;;\xe5uo\xbbr;abcfhlpstwp;;fs;;s;\xeb\xf0l;im;l;;aiil;o;nal\xf3abrr\xf2rk;akcek;;es;ldu;;aeuyron;diil;\xec\xe2;clqsa;dhar;uo;rh;acgl;ipsn\xe5ar\xf4t;ilrsht;;\uD835\uDD2Faordu\xbb;l;;v;gnshtahlrstrrow;ta\xe9arpoonduow\xeep\xbbeftahrrow\xf3arpoon\xf3ightarrows;quigarro\xf7hreetimes;g;ingdotse\xf1ahmr\xf2a\xf2;oust;ache\xbbmid;abptnrg;r;r\xebaflr;;\uD835\uDD63us;imes;apr;gt;olint;ar\xf2achqquo;r;\uD835\uDCC7buo;rhirre\xe5mes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu\xef;Eaceinpsy;\0;on;u\xe5;dil;rc;Eas;p;im;olint;i\xed;ot;be;Aacmstxrr;rhr\xeb;ot\xa7i;war;min\xf0nu\xf3\xf1t;r;o\uD835\uDD30acoyrp;hycy;;rt\0\0i\xe4ara\xec\xadgmma;fv;;deglnprot;;q;E;;E;e;lus;arr;ar\xf2aeitlslsetm\xe9hp;parsl;dle;;e;s;flptcy;;b;ar;f;\uD835\uDD64adres;uit\xbbcsuaup;s;p;s;ubp;eset;e\xf1;eset;e\xf1;afr\xbbar\xf2cemtr;\uD835\uDCC8tm\xee\xf1i\xecar\xe6arr;fanighteppsilo\xeeh\xe9s\xbbbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acensppro\xf8urlye\xf1\xf1aesppro\xf8q\xf1g;123;Edehlmnps\xb9\xb2\xb3;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr\xeb;owar;lig\xdf\0\0\0\0\0\0\0\0\0\0\0\0get;;r\xebaeyron;dil;;lrec;r;\uD835\uDD31eiko\0e4fa;svym;cnkasppro\xf8im\xbbs\xf0as\xf0rn\xfees\xd7;bd;ar;;eps\xe1;bcfot;ir;;o\uD835\uDD65rk;\xe1rime;aipd\xe5adempstngle;dlqrown\xbbeft;e\xf1;ight;e\xf1ot;inus;lus;b;ime;ezium;chtry;\uD835\uDCC9;cy;rok;iox\xf4headlreftarro\xf7ightarrow\xbbAHabcdfghlmoprstuwr\xf2ar;crute\xfa\xf2r\0y;ve;iyrc\xfb;abhr\xf2lac;a\xf2irsht;;\uD835\uDD32rave\xf9rlr\xbb\xbblk;ct\0\0rn;er\xbbop;ri;alcr;\xa8gpon;f;\uD835\uDD66adhlsuown\xe1arpoonlref\xf4igh\xf4i;hl\xbbon\xbbparrows;cit\0\0rn;er\xbbop;ng;ri;cr;\uD835\uDCCAdirot;lde;i;f\xbbamr\xf2l\xfcangle;ABDacdeflnoprszr\xf2ar;v;as\xe8nrgrt;eknprstapp\xe1othin\xe7hirop\xf4;h\xefiugm\xe1bpsetneq;q;setneq;q;hret\xe1ianglelreft\xbbight\xbby;ash\xbbelr;bear;q;lip;bta\xf2r;\uD835\uDD33tr\xe9subp\xbb\xbbpf;\uD835\uDD67ro\xf0tr\xe9cur;\uD835\uDCCBbpnEe\xbbnEe\xbbigzag;cefoprsirc;dibgar;e;q;erp;r;\uD835\uDD34pf;\uD835\uDD68;eat\xe8cr;\uD835\uDCCC\0\0\0\0\0\0\0tr\xe9r;\uD835\uDD35Aar\xf2r\xf2;Aar\xf2r\xf2a\xf0is;dptfl;\uD835\uDD69im\xe5Aar\xf2r\xf2cqr;\uD835\uDCCDptr\xe9acefiosucuyte\xfd;iyrc;;n\xa5r;\uD835\uDD36cy;pf;\uD835\uDD6Acr;\uD835\uDCCEcmy;l\xffacdefhioswcute;ayron;;ot;ettr\xe6a;r;\uD835\uDD37cy;grarr;pf;\uD835\uDD6Bcr;\uD835\uDCCFjn;j;'.split("").map(e=>e.charCodeAt(0))),XF=new Uint16Array("aglq	\x15\x18\x1b\x0f\0\0\x12p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0))),XQ=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),XV=null!==(S=String.fromCodePoint)&&void 0!==S?S:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)};function XH(e){return e>=C.ZERO&&e<=C.NINE}!function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"}(C||(C={})),!function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"}(T||(T={})),!function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"}(A||(A={})),function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"}(E||(E={}));class XU{constructor(e,t,n){this.decodeTree=e,this.emitCodePoint=t,this.errors=n,this.state=A.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=E.Strict}startEntity(e){this.decodeMode=e,this.state=A.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case A.EntityStart:return e.charCodeAt(t)===C.NUM?(this.state=A.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=A.NamedEntity,this.stateNamedEntity(e,t));case A.NumericStart:return this.stateNumericStart(e,t);case A.NumericDecimal:return this.stateNumericDecimal(e,t);case A.NumericHex:return this.stateNumericHex(e,t);case A.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===C.LOWER_X?(this.state=A.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=A.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,n,r){if(t!==n){let i=n-t;this.result=this.result*Math.pow(r,i)+parseInt(e.substr(t,i),r),this.consumed+=i}}stateNumericHex(e,t){let n=t;for(;t<e.length;){var r;let i=e.charCodeAt(t);if(!XH(i)&&(!((r=i)>=C.UPPER_A)||!(r<=C.UPPER_F))&&(!(r>=C.LOWER_A)||!(r<=C.LOWER_F)))return this.addToNumericResult(e,n,t,16),this.emitNumericEntity(i,3);t+=1}return this.addToNumericResult(e,n,t,16),-1}stateNumericDecimal(e,t){let n=t;for(;t<e.length;){let r=e.charCodeAt(t);if(!XH(r))return this.addToNumericResult(e,n,t,10),this.emitNumericEntity(r,2);t+=1}return this.addToNumericResult(e,n,t,10),-1}emitNumericEntity(e,t){var n,r,i;if(this.consumed<=t)return null===(n=this.errors)||void 0===n||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===C.SEMI)this.consumed+=1;else if(this.decodeMode===E.Strict)return 0;return this.emitCodePoint((r=this.result)>=55296&&r<=57343||r>1114111?65533:null!==(i=XQ.get(r))&&void 0!==i?i:r,this.consumed),this.errors&&(e!==C.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){let{decodeTree:n}=this,r=n[this.treeIndex],i=(r&T.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){let o=e.charCodeAt(t);if(this.treeIndex=function(e,t,n,r){let i=(t&T.BRANCH_LENGTH)>>7,o=t&T.JUMP_TABLE;if(0===i)return 0!==o&&r===o?n:-1;if(o){let t=r-o;return t<0||t>=i?-1:e[n+t]-1}let s=n,a=s+i-1;for(;s<=a;){let t=s+a>>>1,n=e[t];if(n<r)s=t+1;else{if(!(n>r))return e[t+i];a=t-1}}return -1}(n,r,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return 0===this.result||this.decodeMode===E.Attribute&&(0===i||function(e){var t;return e===C.EQUALS||(t=e)>=C.UPPER_A&&t<=C.UPPER_Z||t>=C.LOWER_A&&t<=C.LOWER_Z||XH(t)}(o))?0:this.emitNotTerminatedNamedEntity();if(0!=(i=((r=n[this.treeIndex])&T.VALUE_LENGTH)>>14)){if(o===C.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==E.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return -1}emitNotTerminatedNamedEntity(){var e;let{result:t,decodeTree:n}=this,r=(n[t]&T.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,r,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,n){let{decodeTree:r}=this;return this.emitCodePoint(1===t?r[e]&~T.VALUE_LENGTH:r[e+1],n),3===t&&this.emitCodePoint(r[e+2],n),n}end(){var e;switch(this.state){case A.NamedEntity:return 0!==this.result&&(this.decodeMode!==E.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case A.NumericDecimal:return this.emitNumericEntity(0,2);case A.NumericHex:return this.emitNumericEntity(0,3);case A.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case A.EntityStart:return 0}}}function XW(e){let t="",n=new XU(e,e=>t+=XV(e));return function(e,r){let i=0,o=0;for(;(o=e.indexOf("&",o))>=0;){t+=e.slice(i,o),n.startEntity(r);let s=n.write(e,o+1);if(s<0){i=o+n.end();break}i=o+s,o=0===s?i+1:i}let s=t+e.slice(i);return t="",s}}let XG=XW(XB);function XX(e,t=E.Legacy){return XG(e,t)}function XY(e){return"[object String]"===Object.prototype.toString.call(e)}XW(XF);let XZ=Object.prototype.hasOwnProperty;function XK(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(t){if("object"!=typeof t)throw TypeError(t+"must be object");Object.keys(t).forEach(function(n){e[n]=t[n]})}}),e}function XJ(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function X0(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(65535&e)==65535||(65535&e)==65534||e>=0&&e<=8||11===e||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function X1(e){return e>65535?String.fromCharCode(55296+((e-=65536)>>10),56320+(1023&e)):String.fromCharCode(e)}let X2=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,X4=RegExp(X2.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),X5=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function X3(e){return 0>e.indexOf("\\")&&0>e.indexOf("&")?e:e.replace(X4,function(e,t,n){return t||function(e,t){if(35===t.charCodeAt(0)&&X5.test(t)){let n="x"===t[1].toLowerCase()?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return X0(n)?X1(n):e}let n=XX(e);return n!==e?n:e}(e,n)})}let X6=/[&<>"]/,X7=/[&<>"]/g,X8={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function X9(e){return X8[e]}function Ye(e){return X6.test(e)?e.replace(X7,X9):e}let Yt=/[.?*+^$[\]\\(){}|-]/g;function Yn(e){switch(e){case 9:case 32:return!0}return!1}function Yr(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Yi(e){return Xz.test(e)||XL.test(e)}function Yo(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Ys(e){return(e=e.trim().replace(/\s+/g," ")).toLowerCase().toUpperCase()}let Ya=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:XJ,assign:XK,escapeHtml:Ye,escapeRE:function(e){return e.replace(Yt,"\\$&")},fromCodePoint:X1,has:function(e,t){return XZ.call(e,t)},isMdAsciiPunct:Yo,isPunctChar:Yi,isSpace:Yn,isString:XY,isValidEntityCode:X0,isWhiteSpace:Yr,lib:{mdurl:XP,ucmicro:X$},normalizeReference:Ys,unescapeAll:X3,unescapeMd:function(e){return 0>e.indexOf("\\")?e:e.replace(X2,"$1")}},Symbol.toStringTag,{value:"Module"})),Yl=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:function(e,t,n){let r,i=t,o={ok:!1,pos:0,str:""};if(60===e.charCodeAt(i)){for(i++;i<n&&10!==(r=e.charCodeAt(i))&&60!==r;){if(62===r)return o.pos=i+1,o.str=X3(e.slice(t+1,i)),o.ok=!0,o;if(92===r&&i+1<n){i+=2;continue}i++}return o}let s=0;for(;i<n&&!(32===(r=e.charCodeAt(i))||r<32||127===r);){if(92===r&&i+1<n){if(32===e.charCodeAt(i+1))break;i+=2;continue}if(40===r&&++s>32)return o;if(41===r){if(0===s)break;s--}i++}return t===i||0!==s||(o.str=X3(e.slice(t,i)),o.pos=i,o.ok=!0),o},parseLinkLabel:function(e,t,n){let r,i,o,s;let a=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<a;){if(93===(o=e.src.charCodeAt(e.pos))&&0==--r){i=!0;break}if(s=e.pos,e.md.inline.skipToken(e),91===o){if(s===e.pos-1)r++;else if(n)return e.pos=l,-1}}let c=-1;return i&&(c=e.pos),e.pos=l,c},parseLinkTitle:function(e,t,n,r){let i,o=t,s={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)s.str=r.str,s.marker=r.marker;else{if(o>=n)return s;let r=e.charCodeAt(o);if(34!==r&&39!==r&&40!==r)return s;t++,o++,40===r&&(r=41),s.marker=r}for(;o<n;){if((i=e.charCodeAt(o))===s.marker)return s.pos=o+1,s.str+=X3(e.slice(t,o)),s.ok=!0,s;if(40===i&&41===s.marker)return s;92===i&&o+1<n&&o++,o++}return s.can_continue=!0,s.str+=X3(e.slice(t,o)),s}},Symbol.toStringTag,{value:"Module"})),Yc={};function Yu(){this.rules=XK({},Yc)}function Yh(){this.__rules__=[],this.__cache__=null}function Yd(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}function Yf(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}Yc.code_inline=function(e,t,n,r,i){let o=e[t];return"<code"+i.renderAttrs(o)+">"+Ye(o.content)+"</code>"},Yc.code_block=function(e,t,n,r,i){let o=e[t];return"<pre"+i.renderAttrs(o)+"><code>"+Ye(e[t].content)+`</code></pre>
`},Yc.fence=function(e,t,n,r,i){let o;let s=e[t],a=s.info?X3(s.info).trim():"",l="",c="";if(a){let e=a.split(/(\s+)/g);l=e[0],c=e.slice(2).join("")}if(0===(o=n.highlight&&n.highlight(s.content,l,c)||Ye(s.content)).indexOf("<pre"))return o+`
`;if(a){let e=s.attrIndex("class"),t=s.attrs?s.attrs.slice():[];return e<0?t.push(["class",n.langPrefix+l]):(t[e]=t[e].slice(),t[e][1]+=" "+n.langPrefix+l),`<pre><code${i.renderAttrs({attrs:t})}>${o}</code></pre>
`}return`<pre><code${i.renderAttrs(s)}>${o}</code></pre>
`},Yc.image=function(e,t,n,r,i){let o=e[t];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,n,r),i.renderToken(e,t,n)},Yc.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`},Yc.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`},Yc.text=function(e,t){return Ye(e[t].content)},Yc.html_block=function(e,t){return e[t].content},Yc.html_inline=function(e,t){return e[t].content},Yu.prototype.renderAttrs=function(e){let t,n,r;if(!e.attrs)return"";for(r="",t=0,n=e.attrs.length;t<n;t++)r+=" "+Ye(e.attrs[t][0])+'="'+Ye(e.attrs[t][1])+'"';return r},Yu.prototype.renderToken=function(e,t,n){let r=e[t],i="";if(r.hidden)return"";r.block&&-1!==r.nesting&&t&&e[t-1].hidden&&(i+=`
`),i+=(-1===r.nesting?"</":"<")+r.tag,i+=this.renderAttrs(r),0===r.nesting&&n.xhtmlOut&&(i+=" /");let o=!1;if(r.block&&(o=!0,1===r.nesting&&t+1<e.length)){let n=e[t+1];("inline"===n.type||n.hidden||-1===n.nesting&&n.tag===r.tag)&&(o=!1)}return i+(o?`>
`:">")},Yu.prototype.renderInline=function(e,t,n){let r="",i=this.rules;for(let o=0,s=e.length;o<s;o++){let s=e[o].type;"u">typeof i[s]?r+=i[s](e,o,t,n,this):r+=this.renderToken(e,o,t)}return r},Yu.prototype.renderInlineAsText=function(e,t,n){let r="";for(let i=0,o=e.length;i<o;i++)switch(e[i].type){case"text":case"html_inline":case"html_block":r+=e[i].content;break;case"image":r+=this.renderInlineAsText(e[i].children,t,n);break;case"softbreak":case"hardbreak":r+=`
`}return r},Yu.prototype.render=function(e,t,n){let r="",i=this.rules;for(let o=0,s=e.length;o<s;o++){let s=e[o].type;"inline"===s?r+=this.renderInline(e[o].children,t,n):"u">typeof i[s]?r+=i[s](e,o,t,n,this):r+=this.renderToken(e,o,t,n)}return r},Yh.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return -1},Yh.prototype.__compile__=function(){let e=this,t=[""];e.__rules__.forEach(function(e){e.enabled&&e.alt.forEach(function(e){0>t.indexOf(e)&&t.push(e)})}),e.__cache__={},t.forEach(function(t){e.__cache__[t]=[],e.__rules__.forEach(function(n){n.enabled&&(t&&0>n.alt.indexOf(t)||e.__cache__[t].push(n.fn))})})},Yh.prototype.at=function(e,t,n){let r=this.__find__(e);if(-1===r)throw Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=(n||{}).alt||[],this.__cache__=null},Yh.prototype.before=function(e,t,n,r){let i=this.__find__(e);if(-1===i)throw Error("Parser rule not found: "+e);this.__rules__.splice(i,0,{name:t,enabled:!0,fn:n,alt:(r||{}).alt||[]}),this.__cache__=null},Yh.prototype.after=function(e,t,n,r){let i=this.__find__(e);if(-1===i)throw Error("Parser rule not found: "+e);this.__rules__.splice(i+1,0,{name:t,enabled:!0,fn:n,alt:(r||{}).alt||[]}),this.__cache__=null},Yh.prototype.push=function(e,t,n){this.__rules__.push({name:e,enabled:!0,fn:t,alt:(n||{}).alt||[]}),this.__cache__=null},Yh.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);let n=[];return e.forEach(function(e){let r=this.__find__(e);if(r<0){if(t)return;throw Error("Rules manager: invalid rule name "+e)}this.__rules__[r].enabled=!0,n.push(e)},this),this.__cache__=null,n},Yh.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(e){e.enabled=!1}),this.enable(e,t)},Yh.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);let n=[];return e.forEach(function(e){let r=this.__find__(e);if(r<0){if(t)return;throw Error("Rules manager: invalid rule name "+e)}this.__rules__[r].enabled=!1,n.push(e)},this),this.__cache__=null,n},Yh.prototype.getRules=function(e){return null===this.__cache__&&this.__compile__(),this.__cache__[e]||[]},Yd.prototype.attrIndex=function(e){if(!this.attrs)return -1;let t=this.attrs;for(let n=0,r=t.length;n<r;n++)if(t[n][0]===e)return n;return -1},Yd.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]},Yd.prototype.attrSet=function(e,t){let n=this.attrIndex(e),r=[e,t];n<0?this.attrPush(r):this.attrs[n]=r},Yd.prototype.attrGet=function(e){let t=this.attrIndex(e),n=null;return t>=0&&(n=this.attrs[t][1]),n},Yd.prototype.attrJoin=function(e,t){let n=this.attrIndex(e);n<0?this.attrPush([e,t]):this.attrs[n][1]=this.attrs[n][1]+" "+t},Yf.prototype.Token=Yd;let Yp=/\r\n?|\n/g,Ym=/\0/g,Yg=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Yy=/\((c|tm|r)\)/i,Yb=/\((c|tm|r)\)/ig,Yv={c:"\xa9",r:"\xae",tm:""};function Yx(e,t){return Yv[t.toLowerCase()]}let Yw=/['"]/,Yk=/['"]/g;function YO(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}let YS=[["normalize",function(e){let t;t=(t=e.src.replace(Yp,`
`)).replace(Ym,""),e.src=t}],["block",function(e){let t;e.inlineMode?((t=new e.Token("inline","",0)).content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}],["inline",function(e){let t=e.tokens;for(let n=0,r=t.length;n<r;n++){let r=t[n];"inline"===r.type&&e.md.inline.parse(r.content,e.md,e.env,r.children)}}],["linkify",function(e){let t=e.tokens;if(e.md.options.linkify)for(let i=0,o=t.length;i<o;i++){if("inline"!==t[i].type||!e.md.linkify.pretest(t[i].content))continue;let o=t[i].children,s=0;for(let a=o.length-1;a>=0;a--){var n,r;let l=o[a];if("link_close"===l.type){for(a--;o[a].level!==l.level&&"link_open"!==o[a].type;)a--;continue}if("html_inline"===l.type&&(n=l.content,/^<a[>\s]/i.test(n)&&s>0&&s--,r=l.content,/^<\/a\s*>/i.test(r)&&s++),!(s>0)&&"text"===l.type&&e.md.linkify.test(l.content)){let n=l.content,r=e.md.linkify.match(n),s=[],c=l.level,u=0;r.length>0&&0===r[0].index&&a>0&&"text_special"===o[a-1].type&&(r=r.slice(1));for(let t=0;t<r.length;t++){let i=r[t].url,o=e.md.normalizeLink(i);if(!e.md.validateLink(o))continue;let a=r[t].text;a=r[t].schema?"mailto:"!==r[t].schema||/^mailto:/i.test(a)?e.md.normalizeLinkText(a):e.md.normalizeLinkText("mailto:"+a).replace(/^mailto:/,""):e.md.normalizeLinkText("http://"+a).replace(/^http:\/\//,"");let l=r[t].index;if(l>u){let t=new e.Token("text","",0);t.content=n.slice(u,l),t.level=c,s.push(t)}let h=new e.Token("link_open","a",1);h.attrs=[["href",o]],h.level=c++,h.markup="linkify",h.info="auto",s.push(h);let d=new e.Token("text","",0);d.content=a,d.level=c,s.push(d);let f=new e.Token("link_close","a",-1);f.level=--c,f.markup="linkify",f.info="auto",s.push(f),u=r[t].lastIndex}if(u<n.length){let t=new e.Token("text","",0);t.content=n.slice(u),t.level=c,s.push(t)}t[i].children=o=XJ(o,a,s)}}}}],["replacements",function(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&(Yy.test(e.tokens[t].content)&&function(e){let t=0;for(let n=e.length-1;n>=0;n--){let r=e[n];"text"!==r.type||t||(r.content=r.content.replace(Yb,Yx)),"link_open"===r.type&&"auto"===r.info&&t--,"link_close"===r.type&&"auto"===r.info&&t++}}(e.tokens[t].children),Yg.test(e.tokens[t].content)&&function(e){let t=0;for(let n=e.length-1;n>=0;n--){let r=e[n];"text"===r.type&&!t&&Yg.test(r.content)&&(r.content=r.content.replace(/\+-/g,"\xb1").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),"link_open"===r.type&&"auto"===r.info&&t--,"link_close"===r.type&&"auto"===r.info&&t++}}(e.tokens[t].children))}],["smartquotes",function(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&Yw.test(e.tokens[t].content)&&function(e,t){let n;let r=[];for(let i=0;i<e.length;i++){let o=e[i],s=e[i].level;for(n=r.length-1;n>=0&&!(r[n].level<=s);n--);if(r.length=n+1,"text"!==o.type)continue;let a=o.content,l=0,c=a.length;e:for(;l<c;){Yk.lastIndex=l;let u=Yk.exec(a);if(!u)break;let h=!0,d=!0;l=u.index+1;let f="'"===u[0],p=32;if(u.index-1>=0)p=a.charCodeAt(u.index-1);else for(n=i-1;n>=0&&"softbreak"!==e[n].type&&"hardbreak"!==e[n].type;n--)if(e[n].content){p=e[n].content.charCodeAt(e[n].content.length-1);break}let m=32;if(l<c)m=a.charCodeAt(l);else for(n=i+1;n<e.length&&"softbreak"!==e[n].type&&"hardbreak"!==e[n].type;n++)if(e[n].content){m=e[n].content.charCodeAt(0);break}let g=Yo(p)||Yi(String.fromCharCode(p)),y=Yo(m)||Yi(String.fromCharCode(m)),b=Yr(p),v=Yr(m);if(v?h=!1:y&&(b||g||(h=!1)),b?d=!1:g&&(v||y||(d=!1)),34===m&&'"'===u[0]&&p>=48&&p<=57&&(d=h=!1),h&&d&&(h=g,d=y),!h&&!d){f&&(o.content=YO(o.content,u.index,""));continue}if(d)for(n=r.length-1;n>=0;n--){let h=r[n];if(r[n].level<s)break;if(h.single===f&&r[n].level===s){let s,d;h=r[n],f?(s=t.md.options.quotes[2],d=t.md.options.quotes[3]):(s=t.md.options.quotes[0],d=t.md.options.quotes[1]),o.content=YO(o.content,u.index,d),e[h.token].content=YO(e[h.token].content,h.pos,s),l+=d.length-1,h.token===i&&(l+=s.length-1),c=(a=o.content).length,r.length=n;continue e}}h?r.push({token:i,pos:u.index,single:f,level:s}):d&&f&&(o.content=YO(o.content,u.index,""))}}}(e.tokens[t].children,e)}],["text_join",function(e){let t,n;let r=e.tokens,i=r.length;for(let e=0;e<i;e++){if("inline"!==r[e].type)continue;let i=r[e].children,o=i.length;for(t=0;t<o;t++)"text_special"===i[t].type&&(i[t].type="text");for(t=n=0;t<o;t++)"text"===i[t].type&&t+1<o&&"text"===i[t+1].type?i[t+1].content=i[t].content+i[t+1].content:(t!==n&&(i[n]=i[t]),n++);t!==n&&(i.length=n)}}]];function YC(){this.ruler=new Yh;for(let e=0;e<YS.length;e++)this.ruler.push(YS[e][0],YS[e][1])}function YT(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;let i=this.src;for(let e=0,t=0,n=0,r=0,o=i.length,s=!1;t<o;t++){let a=i.charCodeAt(t);if(!s){if(Yn(a)){n++,9===a?r+=4-r%4:r++;continue}s=!0}(10===a||t===o-1)&&(10!==a&&t++,this.bMarks.push(e),this.eMarks.push(t),this.tShift.push(n),this.sCount.push(r),this.bsCount.push(0),s=!1,n=0,r=0,e=t+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}function YA(e,t){let n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function YE(e){let t=[],n=e.length,r=0,i=e.charCodeAt(r),o=!1,s=0,a="";for(;r<n;)124===i&&(o?(a+=e.substring(s,r-1),s=r):(t.push(a+e.substring(s,r)),a="",s=r+1)),o=92===i,r++,i=e.charCodeAt(r);return t.push(a+e.substring(s)),t}function YM(e,t){let n=e.eMarks[t],r=e.bMarks[t]+e.tShift[t],i=e.src.charCodeAt(r++);return 42!==i&&45!==i&&43!==i||r<n&&!Yn(e.src.charCodeAt(r))?-1:r}function YN(e,t){let n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t],i=n;if(i+1>=r)return -1;let o=e.src.charCodeAt(i++);if(o<48||o>57)return -1;for(;;){if(i>=r)return -1;if((o=e.src.charCodeAt(i++))>=48&&o<=57){if(i-n>=10)return -1;continue}if(41===o||46===o)break;return -1}return i<r&&!Yn(o=e.src.charCodeAt(i))?-1:i}YC.prototype.process=function(e){let t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)},YC.prototype.State=Yf,YT.prototype.push=function(e,t,n){let r=new Yd(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r},YT.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]},YT.prototype.skipEmptyLines=function(e){for(let t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e},YT.prototype.skipSpaces=function(e){for(let t=this.src.length;e<t&&Yn(this.src.charCodeAt(e));e++);return e},YT.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!Yn(this.src.charCodeAt(--e)))return e+1;return e},YT.prototype.skipChars=function(e,t){for(let n=this.src.length;e<n&&this.src.charCodeAt(e)===t;e++);return e},YT.prototype.skipCharsBack=function(e,t,n){if(e<=n)return e;for(;e>n;)if(t!==this.src.charCodeAt(--e))return e+1;return e},YT.prototype.getLines=function(e,t,n,r){if(e>=t)return"";let i=Array(t-e);for(let o=0,s=e;s<t;s++,o++){let e=0,a=this.bMarks[s],l=a,c;for(c=s+1<t||r?this.eMarks[s]+1:this.eMarks[s];l<c&&e<n;){let t=this.src.charCodeAt(l);if(Yn(t))9===t?e+=4-(e+this.bsCount[s])%4:e++;else if(l-a<this.tShift[s])e++;else break;l++}e>n?i[o]=Array(e-n+1).join(" ")+this.src.slice(l,c):i[o]=this.src.slice(l,c)}return i.join("")},YT.prototype.Token=Yd;let Y_="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",Yj="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",YD=RegExp("^(?:"+Y_+"|"+Yj+"|\x3c!---?>|\x3c!--(?:[^-]|-[^-]|--[^>])*--\x3e|<[?][\\s\\S]*?[?]>|<![A-Za-z][^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),YP=RegExp("^(?:"+Y_+"|"+Yj+")"),YR=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[RegExp("^</?(address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?=(\\s|/?>|$))","i"),/^$/,!0],[RegExp(YP.source+"\\s*$"),/^$/,!1]],YI=[["table",function(e,t,n,r){if(t+2>n)return!1;let i=t+1;if(e.sCount[i]<e.blkIndent||e.sCount[i]-e.blkIndent>=4)return!1;let o=e.bMarks[i]+e.tShift[i];if(o>=e.eMarks[i])return!1;let s=e.src.charCodeAt(o++);if(124!==s&&45!==s&&58!==s||o>=e.eMarks[i])return!1;let a=e.src.charCodeAt(o++);if(124!==a&&45!==a&&58!==a&&!Yn(a)||45===s&&Yn(a))return!1;for(;o<e.eMarks[i];){let t=e.src.charCodeAt(o);if(124!==t&&45!==t&&58!==t&&!Yn(t))return!1;o++}let l=YA(e,t+1),c=l.split("|"),u=[];for(let e=0;e<c.length;e++){let t=c[e].trim();if(!t){if(0===e||e===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(t))return!1;58===t.charCodeAt(t.length-1)?u.push(58===t.charCodeAt(0)?"center":"right"):58===t.charCodeAt(0)?u.push("left"):u.push("")}if(-1===(l=YA(e,t).trim()).indexOf("|")||e.sCount[t]-e.blkIndent>=4)return!1;(c=YE(l)).length&&""===c[0]&&c.shift(),c.length&&""===c[c.length-1]&&c.pop();let h=c.length;if(0===h||h!==u.length)return!1;if(r)return!0;let d=e.parentType;e.parentType="table";let f=e.md.block.ruler.getRules("blockquote"),p=e.push("table_open","table",1),m=[t,0];p.map=m,e.push("thead_open","thead",1).map=[t,t+1],e.push("tr_open","tr",1).map=[t,t+1];for(let t=0;t<c.length;t++){let n=e.push("th_open","th",1);u[t]&&(n.attrs=[["style","text-align:"+u[t]]]);let r=e.push("inline","",0);r.content=c[t].trim(),r.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let g,y=0;for(i=t+2;i<n&&!(e.sCount[i]<e.blkIndent);i++){let r=!1;for(let t=0,o=f.length;t<o;t++)if(f[t](e,i,n,!0)){r=!0;break}if(r||!(l=YA(e,i).trim())||e.sCount[i]-e.blkIndent>=4||((c=YE(l)).length&&""===c[0]&&c.shift(),c.length&&""===c[c.length-1]&&c.pop(),(y+=h-c.length)>65536))break;i===t+2&&(e.push("tbody_open","tbody",1).map=g=[t+2,0]),e.push("tr_open","tr",1).map=[i,i+1];for(let t=0;t<h;t++){let n=e.push("td_open","td",1);u[t]&&(n.attrs=[["style","text-align:"+u[t]]]);let r=e.push("inline","",0);r.content=c[t]?c[t].trim():"",r.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return g&&(e.push("tbody_close","tbody",-1),g[1]=i),e.push("table_close","table",-1),m[1]=i,e.parentType=d,e.line=i,!0},["paragraph","reference"]],["code",function(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,i=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){i=++r;continue}break}e.line=i;let o=e.push("code_block","code",0);return o.content=e.getLines(t,i,4+e.blkIndent,!1)+`
`,o.map=[t,e.line],!0}],["fence",function(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||i+3>o)return!1;let s=e.src.charCodeAt(i);if(126!==s&&96!==s)return!1;let a=i,l=(i=e.skipChars(i,s))-a;if(l<3)return!1;let c=e.src.slice(a,i),u=e.src.slice(i,o);if(96===s&&u.indexOf(String.fromCharCode(s))>=0)return!1;if(r)return!0;let h=t,d=!1;for(;!(++h>=n||(i=a=e.bMarks[h]+e.tShift[h])<(o=e.eMarks[h])&&e.sCount[h]<e.blkIndent);)if(e.src.charCodeAt(i)===s&&!(e.sCount[h]-e.blkIndent>=4)&&!((i=e.skipChars(i,s))-a<l)&&!((i=e.skipSpaces(i))<o)){d=!0;break}l=e.sCount[t],e.line=h+ +!!d;let f=e.push("fence","code",0);return f.info=u,f.content=e.getLines(t+1,h,l,!0),f.markup=c,f.map=[t,e.line],!0},["paragraph","reference","blockquote","list"]],["blockquote",function(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t],s=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||62!==e.src.charCodeAt(i))return!1;if(r)return!0;let a=[],l=[],c=[],u=[],h=e.md.block.ruler.getRules("blockquote"),d=e.parentType;e.parentType="blockquote";let f=!1,p;for(p=t;p<n;p++){let t=e.sCount[p]<e.blkIndent;if((i=e.bMarks[p]+e.tShift[p])>=(o=e.eMarks[p]))break;if(62===e.src.charCodeAt(i++)&&!t){let t=e.sCount[p]+1,n,r;32===e.src.charCodeAt(i)?(i++,t++,r=!1,n=!0):9===e.src.charCodeAt(i)?(n=!0,(e.bsCount[p]+t)%4==3?(i++,t++,r=!1):r=!0):n=!1;let s=t;for(a.push(e.bMarks[p]),e.bMarks[p]=i;i<o;){let t=e.src.charCodeAt(i);if(Yn(t))9===t?s+=4-(s+e.bsCount[p]+ +!!r)%4:s++;else break;i++}f=i>=o,l.push(e.bsCount[p]),e.bsCount[p]=e.sCount[p]+1+ +!!n,c.push(e.sCount[p]),e.sCount[p]=s-t,u.push(e.tShift[p]),e.tShift[p]=i-e.bMarks[p];continue}if(f)break;let r=!1;for(let t=0,i=h.length;t<i;t++)if(h[t](e,p,n,!0)){r=!0;break}if(r){e.lineMax=p,0!==e.blkIndent&&(a.push(e.bMarks[p]),l.push(e.bsCount[p]),u.push(e.tShift[p]),c.push(e.sCount[p]),e.sCount[p]-=e.blkIndent);break}a.push(e.bMarks[p]),l.push(e.bsCount[p]),u.push(e.tShift[p]),c.push(e.sCount[p]),e.sCount[p]=-1}let m=e.blkIndent;e.blkIndent=0;let g=e.push("blockquote_open","blockquote",1);g.markup=">";let y=[t,0];g.map=y,e.md.block.tokenize(e,t,p),e.push("blockquote_close","blockquote",-1).markup=">",e.lineMax=s,e.parentType=d,y[1]=e.line;for(let n=0;n<u.length;n++)e.bMarks[n+t]=a[n],e.tShift[n+t]=u[n],e.sCount[n+t]=c[n],e.bsCount[n+t]=l[n];return e.blkIndent=m,!0},["paragraph","reference","blockquote","list"]],["hr",function(e,t,n,r){let i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.bMarks[t]+e.tShift[t],s=e.src.charCodeAt(o++);if(42!==s&&45!==s&&95!==s)return!1;let a=1;for(;o<i;){let t=e.src.charCodeAt(o++);if(t!==s&&!Yn(t))return!1;t===s&&a++}if(a<3)return!1;if(r)return!0;e.line=t+1;let l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(a+1).join(String.fromCharCode(s)),!0},["paragraph","reference","blockquote","list"]],["list",function(e,t,n,r){let i,o,s,a,l,c,u,h=t,d=!0;if(e.sCount[h]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[h]-e.listIndent>=4&&e.sCount[h]<e.blkIndent)return!1;let f=!1;if(r&&"paragraph"===e.parentType&&e.sCount[h]>=e.blkIndent&&(f=!0),(s=YN(e,h))>=0){if(i=!0,c=e.bMarks[h]+e.tShift[h],o=Number(e.src.slice(c,s-1)),f&&1!==o)return!1}else{if(!((s=YM(e,h))>=0))return!1;i=!1}if(f&&e.skipSpaces(s)>=e.eMarks[h])return!1;if(r)return!0;let p=e.src.charCodeAt(s-1),m=e.tokens.length;i?(u=e.push("ordered_list_open","ol",1),1!==o&&(u.attrs=[["start",o]])):u=e.push("bullet_list_open","ul",1);let g=[h,0];u.map=g,u.markup=String.fromCharCode(p);let y=!1,b=e.md.block.ruler.getRules("list"),v=e.parentType;for(e.parentType="list";h<n;){let t;l=s,a=e.eMarks[h];let r=e.sCount[h]+s-(e.bMarks[h]+e.tShift[h]),o=r;for(;l<a;){let t=e.src.charCodeAt(l);if(9===t)o+=4-(o+e.bsCount[h])%4;else if(32===t)o++;else break;l++}let f=l;(t=f>=a?1:o-r)>4&&(t=1);let m=r+t;(u=e.push("list_item_open","li",1)).markup=String.fromCharCode(p);let g=[h,0];u.map=g,i&&(u.info=e.src.slice(c,s-1));let v=e.tight,x=e.tShift[h],w=e.sCount[h],k=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=m,e.tight=!0,e.tShift[h]=f-e.bMarks[h],e.sCount[h]=o,f>=a&&e.isEmpty(h+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,h,n,!0),(!e.tight||y)&&(d=!1),y=e.line-h>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=k,e.tShift[h]=x,e.sCount[h]=w,e.tight=v,(u=e.push("list_item_close","li",-1)).markup=String.fromCharCode(p),h=e.line,g[1]=h,h>=n||e.sCount[h]<e.blkIndent||e.sCount[h]-e.blkIndent>=4)break;let O=!1;for(let t=0,r=b.length;t<r;t++)if(b[t](e,h,n,!0)){O=!0;break}if(O)break;if(i){if((s=YN(e,h))<0)break;c=e.bMarks[h]+e.tShift[h]}else if((s=YM(e,h))<0)break;if(p!==e.src.charCodeAt(s-1))break}return(u=i?e.push("ordered_list_close","ol",-1):e.push("bullet_list_close","ul",-1)).markup=String.fromCharCode(p),g[1]=h,e.line=h,e.parentType=v,d&&function(e,t){let n=e.level+2;for(let r=t+2,i=e.tokens.length-2;r<i;r++)e.tokens[r].level===n&&"paragraph_open"===e.tokens[r].type&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}(e,m),!0},["paragraph","reference","blockquote"]],["reference",function(e,t,n,r){let i,o=e.bMarks[t]+e.tShift[t],s=e.eMarks[t],a=t+1;if(e.sCount[t]-e.blkIndent>=4||91!==e.src.charCodeAt(o))return!1;function l(t){let n=e.lineMax;if(t>=n||e.isEmpty(t))return null;let r=!1;if(e.sCount[t]-e.blkIndent>3&&(r=!0),e.sCount[t]<0&&(r=!0),!r){let r=e.md.block.ruler.getRules("reference"),i=e.parentType;e.parentType="reference";let o=!1;for(let i=0,s=r.length;i<s;i++)if(r[i](e,t,n,!0)){o=!0;break}if(e.parentType=i,o)return null}let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];return e.src.slice(i,o+1)}let c=e.src.slice(o,s+1);s=c.length;let u=-1;for(o=1;o<s;o++){let e=c.charCodeAt(o);if(91===e)return!1;if(93===e){u=o;break}if(10===e){let e=l(a);null!==e&&(c+=e,s=c.length,a++)}else if(92===e&&++o<s&&10===c.charCodeAt(o)){let e=l(a);null!==e&&(c+=e,s=c.length,a++)}}if(u<0||58!==c.charCodeAt(u+1))return!1;for(o=u+2;o<s;o++){let e=c.charCodeAt(o);if(10===e){let e=l(a);null!==e&&(c+=e,s=c.length,a++)}else if(!Yn(e))break}let h=e.md.helpers.parseLinkDestination(c,o,s);if(!h.ok)return!1;let d=e.md.normalizeLink(h.str);if(!e.md.validateLink(d))return!1;let f=o=h.pos,p=a,m=o;for(;o<s;o++){let e=c.charCodeAt(o);if(10===e){let e=l(a);null!==e&&(c+=e,s=c.length,a++)}else if(!Yn(e))break}let g=e.md.helpers.parseLinkTitle(c,o,s);for(;g.can_continue;){let t=l(a);if(null===t)break;c+=t,o=s,s=c.length,a++,g=e.md.helpers.parseLinkTitle(c,o,s,g)}for(o<s&&m!==o&&g.ok?(i=g.str,o=g.pos):(i="",o=f,a=p);o<s&&Yn(c.charCodeAt(o));)o++;if(o<s&&10!==c.charCodeAt(o)&&i)for(i="",o=f,a=p;o<s&&Yn(c.charCodeAt(o));)o++;if(o<s&&10!==c.charCodeAt(o))return!1;let y=Ys(c.slice(1,u));return!!y&&(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[y]>"u"&&(e.env.references[y]={title:i,href:d}),e.line=a),!0)}],["html_block",function(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||60!==e.src.charCodeAt(i))return!1;let s=e.src.slice(i,o),a=0;for(;a<YR.length&&!YR[a][0].test(s);a++);if(a===YR.length)return!1;if(r)return YR[a][2];let l=t+1;if(!YR[a][1].test(s)){for(;l<n&&!(e.sCount[l]<e.blkIndent);l++)if(i=e.bMarks[l]+e.tShift[l],o=e.eMarks[l],s=e.src.slice(i,o),YR[a][1].test(s)){0!==s.length&&l++;break}}e.line=l;let c=e.push("html_block","",0);return c.map=[t,l],c.content=e.getLines(t,l,e.blkIndent,!0),!0},["paragraph","reference","blockquote"]],["heading",function(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let s=e.src.charCodeAt(i);if(35!==s||i>=o)return!1;let a=1;for(s=e.src.charCodeAt(++i);35===s&&i<o&&a<=6;)a++,s=e.src.charCodeAt(++i);if(a>6||i<o&&!Yn(s))return!1;if(r)return!0;o=e.skipSpacesBack(o,i);let l=e.skipCharsBack(o,35,i);l>i&&Yn(e.src.charCodeAt(l-1))&&(o=l),e.line=t+1;let c=e.push("heading_open","h"+String(a),1);c.markup="########".slice(0,a),c.map=[t,e.line];let u=e.push("inline","",0);return u.content=e.src.slice(i,o).trim(),u.map=[t,e.line],u.children=[],e.push("heading_close","h"+String(a),-1).markup="########".slice(0,a),!0},["paragraph","reference","blockquote"]],["lheading",function(e,t,n){let r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.parentType;e.parentType="paragraph";let o=0,s,a=t+1;for(;a<n&&!e.isEmpty(a);a++){if(e.sCount[a]-e.blkIndent>3)continue;if(e.sCount[a]>=e.blkIndent){let t=e.bMarks[a]+e.tShift[a],n=e.eMarks[a];if(t<n&&(45===(s=e.src.charCodeAt(t))||61===s)&&(t=e.skipChars(t,s),(t=e.skipSpaces(t))>=n)){o=61===s?1:2;break}}if(e.sCount[a]<0)continue;let t=!1;for(let i=0,o=r.length;i<o;i++)if(r[i](e,a,n,!0)){t=!0;break}if(t)break}if(!o)return!1;let l=e.getLines(t,a,e.blkIndent,!1).trim();e.line=a+1;let c=e.push("heading_open","h"+String(o),1);c.markup=String.fromCharCode(s),c.map=[t,e.line];let u=e.push("inline","",0);return u.content=l,u.map=[t,e.line-1],u.children=[],e.push("heading_close","h"+String(o),-1).markup=String.fromCharCode(s),e.parentType=i,!0}],["paragraph",function(e,t,n){let r=e.md.block.ruler.getRules("paragraph"),i=e.parentType,o=t+1;for(e.parentType="paragraph";o<n&&!e.isEmpty(o);o++){if(e.sCount[o]-e.blkIndent>3||e.sCount[o]<0)continue;let t=!1;for(let i=0,s=r.length;i<s;i++)if(r[i](e,o,n,!0)){t=!0;break}if(t)break}let s=e.getLines(t,o,e.blkIndent,!1).trim();e.line=o,e.push("paragraph_open","p",1).map=[t,e.line];let a=e.push("inline","",0);return a.content=s,a.map=[t,e.line],a.children=[],e.push("paragraph_close","p",-1),e.parentType=i,!0}]];function Yz(){this.ruler=new Yh;for(let e=0;e<YI.length;e++)this.ruler.push(YI[e][0],YI[e][1],{alt:(YI[e][2]||[]).slice()})}function YL(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Yz.prototype.tokenize=function(e,t,n){let r=this.ruler.getRules(""),i=r.length,o=e.md.options.maxNesting,s=t,a=!1;for(;s<n&&(e.line=s=e.skipEmptyLines(s),!(s>=n||e.sCount[s]<e.blkIndent));){if(e.level>=o){e.line=n;break}let t=e.line,l=!1;for(let o=0;o<i;o++)if(l=r[o](e,s,n,!1)){if(t>=e.line)throw Error("block rule didn't increment state.line");break}if(!l)throw Error("none of the block rules matched");e.tight=!a,e.isEmpty(e.line-1)&&(a=!0),(s=e.line)<n&&e.isEmpty(s)&&(a=!0,e.line=++s)}},Yz.prototype.parse=function(e,t,n,r){if(!e)return;let i=new this.State(e,t,n,r);this.tokenize(i,i.line,i.lineMax)},Yz.prototype.State=YT,YL.prototype.pushPending=function(){let e=new Yd("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e},YL.prototype.push=function(e,t,n){this.pending&&this.pushPending();let r=new Yd(e,t,n),i=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r},YL.prototype.scanDelims=function(e,t){let n=this.posMax,r=this.src.charCodeAt(e),i=e>0?this.src.charCodeAt(e-1):32,o=e;for(;o<n&&this.src.charCodeAt(o)===r;)o++;let s=o-e,a=o<n?this.src.charCodeAt(o):32,l=Yo(i)||Yi(String.fromCharCode(i)),c=Yo(a)||Yi(String.fromCharCode(a)),u=Yr(i),h=Yr(a),d=!h&&(!c||u||l),f=!u&&(!l||h||c);return{can_open:d&&(t||!f||l),can_close:f&&(t||!d||c),length:s}},YL.prototype.Token=Yd;let Yq=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i,Y$=[];for(let e=0;e<256;e++)Y$.push(0);function YB(e,t){let n;let r=[],i=t.length;for(let o=0;o<i;o++){let i=t[o];if(126!==i.marker||-1===i.end)continue;let s=t[i.end];(n=e.tokens[i.token]).type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",(n=e.tokens[s.token]).type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="","text"===e.tokens[s.token-1].type&&"~"===e.tokens[s.token-1].content&&r.push(s.token-1)}for(;r.length;){let t=r.pop(),i=t+1;for(;i<e.tokens.length&&"s_close"===e.tokens[i].type;)i++;t!==--i&&(n=e.tokens[i],e.tokens[i]=e.tokens[t],e.tokens[t]=n)}}"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){Y$[e.charCodeAt(0)]=1});let YF={tokenize:function(e,t){let n;let r=e.pos,i=e.src.charCodeAt(r);if(t||126!==i)return!1;let o=e.scanDelims(e.pos,!0),s=o.length,a=String.fromCharCode(i);if(s<2)return!1;s%2&&(e.push("text","",0).content=a,s--);for(let t=0;t<s;t+=2)e.push("text","",0).content=a+a,e.delimiters.push({marker:i,length:0,token:e.tokens.length-1,end:-1,open:o.can_open,close:o.can_close});return e.pos+=o.length,!0},postProcess:function(e){let t=e.tokens_meta,n=e.tokens_meta.length;YB(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&YB(e,t[r].delimiters)}};function YQ(e,t){let n=t.length;for(let r=n-1;r>=0;r--){let n=t[r];if(95!==n.marker&&42!==n.marker||-1===n.end)continue;let i=t[n.end],o=r>0&&t[r-1].end===n.end+1&&t[r-1].marker===n.marker&&t[r-1].token===n.token-1&&t[n.end+1].token===i.token+1,s=String.fromCharCode(n.marker),a=e.tokens[n.token];a.type=o?"strong_open":"em_open",a.tag=o?"strong":"em",a.nesting=1,a.markup=o?s+s:s,a.content="";let l=e.tokens[i.token];l.type=o?"strong_close":"em_close",l.tag=o?"strong":"em",l.nesting=-1,l.markup=o?s+s:s,l.content="",o&&(e.tokens[t[r-1].token].content="",e.tokens[t[n.end+1].token].content="",r--)}}let YV={tokenize:function(e,t){let n=e.pos,r=e.src.charCodeAt(n);if(t||95!==r&&42!==r)return!1;let i=e.scanDelims(e.pos,42===r);for(let t=0;t<i.length;t++)e.push("text","",0).content=String.fromCharCode(r),e.delimiters.push({marker:r,length:i.length,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0},postProcess:function(e){let t=e.tokens_meta,n=e.tokens_meta.length;YQ(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&YQ(e,t[r].delimiters)}},YH=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,YU=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/,YW=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,YG=/^&([a-z][a-z0-9]{1,31});/i;function YX(e){let t={},n=e.length;if(!n)return;let r=0,i=-2,o=[];for(let s=0;s<n;s++){let n=e[s];if(o.push(0),(e[r].marker!==n.marker||i!==n.token-1)&&(r=s),i=n.token,n.length=n.length||0,!n.close)continue;t.hasOwnProperty(n.marker)||(t[n.marker]=[-1,-1,-1,-1,-1,-1]);let a=t[n.marker][3*!!n.open+n.length%3],l=r-o[r]-1,c=l;for(;l>a;l-=o[l]+1){let t=e[l];if(t.marker===n.marker&&t.open&&t.end<0){let r=!1;if((t.close||n.open)&&(t.length+n.length)%3==0&&(t.length%3!=0||n.length%3!=0)&&(r=!0),!r){let r=l>0&&!e[l-1].open?o[l-1]+1:0;o[s]=s-l+r,o[l]=r,n.open=!1,t.end=s,t.close=!1,c=-1,i=-2;break}}}-1!==c&&(t[n.marker][3*!!n.open+(n.length||0)%3]=c)}}let YY=[["text",function(e,t){let n=e.pos;for(;n<e.posMax&&!function(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}(e.src.charCodeAt(n));)n++;return n!==e.pos&&(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}],["linkify",function(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;let n=e.pos;if(n+3>e.posMax||58!==e.src.charCodeAt(n)||47!==e.src.charCodeAt(n+1)||47!==e.src.charCodeAt(n+2))return!1;let r=e.pending.match(Yq);if(!r)return!1;let i=r[1],o=e.md.linkify.matchAtStart(e.src.slice(n-i.length));if(!o)return!1;let s=o.url;if(s.length<=i.length)return!1;s=s.replace(/\*+$/,"");let a=e.md.normalizeLink(s);if(!e.md.validateLink(a))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);let t=e.push("link_open","a",1);t.attrs=[["href",a]],t.markup="linkify",t.info="auto",e.push("text","",0).content=e.md.normalizeLinkText(s);let n=e.push("link_close","a",-1);n.markup="linkify",n.info="auto"}return e.pos+=s.length-i.length,!0}],["newline",function(e,t){let n=e.pos;if(10!==e.src.charCodeAt(n))return!1;let r=e.pending.length-1,i=e.posMax;if(!t){if(r>=0&&32===e.pending.charCodeAt(r)){if(r>=1&&32===e.pending.charCodeAt(r-1)){let t=r-1;for(;t>=1&&32===e.pending.charCodeAt(t-1);)t--;e.pending=e.pending.slice(0,t),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0)}else e.push("softbreak","br",0)}for(n++;n<i&&Yn(e.src.charCodeAt(n));)n++;return e.pos=n,!0}],["escape",function(e,t){let n=e.pos,r=e.posMax;if(92!==e.src.charCodeAt(n)||++n>=r)return!1;let i=e.src.charCodeAt(n);if(10===i){for(t||e.push("hardbreak","br",0),n++;n<r&&Yn(i=e.src.charCodeAt(n));)n++;return e.pos=n,!0}let o=e.src[n];if(i>=55296&&i<=56319&&n+1<r){let t=e.src.charCodeAt(n+1);t>=56320&&t<=57343&&(o+=e.src[n+1],n++)}let s="\\"+o;if(!t){let t=e.push("text_special","",0);i<256&&0!==Y$[i]?t.content=o:t.content=s,t.markup=s,t.info="escape"}return e.pos=n+1,!0}],["backticks",function(e,t){let n=e.pos;if(96!==e.src.charCodeAt(n))return!1;let r=n;n++;let i=e.posMax;for(;n<i&&96===e.src.charCodeAt(n);)n++;let o=e.src.slice(r,n),s=o.length;if(e.backticksScanned&&(e.backticks[s]||0)<=r)return t||(e.pending+=o),e.pos+=s,!0;let a=n,l;for(;-1!==(l=e.src.indexOf("`",a));){for(a=l+1;a<i&&96===e.src.charCodeAt(a);)a++;let r=a-l;if(r===s){if(!t){let t=e.push("code_inline","code",0);t.markup=o,t.content=e.src.slice(n,l).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=a,!0}e.backticks[r]=l}return e.backticksScanned=!0,t||(e.pending+=o),e.pos+=s,!0}],["strikethrough",YF.tokenize],["emphasis",YV.tokenize],["link",function(e,t){let n,r,i,o,s="",a="",l=e.pos,c=!0;if(91!==e.src.charCodeAt(e.pos))return!1;let u=e.pos,h=e.posMax,d=e.pos+1,f=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(f<0)return!1;let p=f+1;if(p<h&&40===e.src.charCodeAt(p)){for(c=!1,p++;p<h&&!(!Yn(n=e.src.charCodeAt(p))&&10!==n);p++);if(p>=h)return!1;if(l=p,(i=e.md.helpers.parseLinkDestination(e.src,p,e.posMax)).ok){for(s=e.md.normalizeLink(i.str),e.md.validateLink(s)?p=i.pos:s="",l=p;p<h&&!(!Yn(n=e.src.charCodeAt(p))&&10!==n);p++);if(i=e.md.helpers.parseLinkTitle(e.src,p,e.posMax),p<h&&l!==p&&i.ok)for(a=i.str,p=i.pos;p<h&&!(!Yn(n=e.src.charCodeAt(p))&&10!==n);p++);}(p>=h||41!==e.src.charCodeAt(p))&&(c=!0),p++}if(c){if(typeof e.env.references>"u")return!1;if(p<h&&91===e.src.charCodeAt(p)?(l=p+1,(p=e.md.helpers.parseLinkLabel(e,p))>=0?r=e.src.slice(l,p++):p=f+1):p=f+1,r||(r=e.src.slice(d,f)),!(o=e.env.references[Ys(r)]))return e.pos=u,!1;s=o.href,a=o.title}if(!t){e.pos=d,e.posMax=f;let t=e.push("link_open","a",1),n=[["href",s]];t.attrs=n,a&&n.push(["title",a]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=p,e.posMax=h,!0}],["image",function(e,t){let n,r,i,o,s,a,l,c,u="",h=e.pos,d=e.posMax;if(33!==e.src.charCodeAt(e.pos)||91!==e.src.charCodeAt(e.pos+1))return!1;let f=e.pos+2,p=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(p<0)return!1;if((o=p+1)<d&&40===e.src.charCodeAt(o)){for(o++;o<d&&!(!Yn(n=e.src.charCodeAt(o))&&10!==n);o++);if(o>=d)return!1;for(c=o,(a=e.md.helpers.parseLinkDestination(e.src,o,e.posMax)).ok&&(u=e.md.normalizeLink(a.str),e.md.validateLink(u)?o=a.pos:u=""),c=o;o<d&&!(!Yn(n=e.src.charCodeAt(o))&&10!==n);o++);if(a=e.md.helpers.parseLinkTitle(e.src,o,e.posMax),o<d&&c!==o&&a.ok)for(l=a.str,o=a.pos;o<d&&!(!Yn(n=e.src.charCodeAt(o))&&10!==n);o++);else l="";if(o>=d||41!==e.src.charCodeAt(o))return e.pos=h,!1;o++}else{if(typeof e.env.references>"u")return!1;if(o<d&&91===e.src.charCodeAt(o)?(c=o+1,(o=e.md.helpers.parseLinkLabel(e,o))>=0?i=e.src.slice(c,o++):o=p+1):o=p+1,i||(i=e.src.slice(f,p)),!(s=e.env.references[Ys(i)]))return e.pos=h,!1;u=s.href,l=s.title}if(!t){r=e.src.slice(f,p);let t=[];e.md.inline.parse(r,e.md,e.env,t);let n=e.push("image","img",0),i=[["src",u],["alt",""]];n.attrs=i,n.children=t,n.content=r,l&&i.push(["title",l])}return e.pos=o,e.posMax=d,!0}],["autolink",function(e,t){let n=e.pos;if(60!==e.src.charCodeAt(n))return!1;let r=e.pos,i=e.posMax;for(;;){if(++n>=i)return!1;let t=e.src.charCodeAt(n);if(60===t)return!1;if(62===t)break}let o=e.src.slice(r+1,n);if(YU.test(o)){let n=e.md.normalizeLink(o);if(!e.md.validateLink(n))return!1;if(!t){let t=e.push("link_open","a",1);t.attrs=[["href",n]],t.markup="autolink",t.info="auto",e.push("text","",0).content=e.md.normalizeLinkText(o);let r=e.push("link_close","a",-1);r.markup="autolink",r.info="auto"}return e.pos+=o.length+2,!0}if(YH.test(o)){let n=e.md.normalizeLink("mailto:"+o);if(!e.md.validateLink(n))return!1;if(!t){let t=e.push("link_open","a",1);t.attrs=[["href",n]],t.markup="autolink",t.info="auto",e.push("text","",0).content=e.md.normalizeLinkText(o);let r=e.push("link_close","a",-1);r.markup="autolink",r.info="auto"}return e.pos+=o.length+2,!0}return!1}],["html_inline",function(e,t){if(!e.md.options.html)return!1;let n=e.posMax,r=e.pos;if(60!==e.src.charCodeAt(r)||r+2>=n)return!1;let i=e.src.charCodeAt(r+1);if(33!==i&&63!==i&&47!==i&&!function(e){let t=32|e;return t>=97&&t<=122}(i))return!1;let o=e.src.slice(r).match(YD);if(!o)return!1;if(!t){var s,a;let t=e.push("html_inline","",0);t.content=o[0],s=t.content,/^<a[>\s]/i.test(s)&&e.linkLevel++,a=t.content,/^<\/a\s*>/i.test(a)&&e.linkLevel--}return e.pos+=o[0].length,!0}],["entity",function(e,t){let n=e.pos,r=e.posMax;if(38!==e.src.charCodeAt(n)||n+1>=r)return!1;if(35===e.src.charCodeAt(n+1)){let r=e.src.slice(n).match(YW);if(r){if(!t){let t="x"===r[1][0].toLowerCase()?parseInt(r[1].slice(1),16):parseInt(r[1],10),n=e.push("text_special","",0);n.content=X0(t)?X1(t):X1(65533),n.markup=r[0],n.info="entity"}return e.pos+=r[0].length,!0}}else{let r=e.src.slice(n).match(YG);if(r){let n=XX(r[0]);if(n!==r[0]){if(!t){let t=e.push("text_special","",0);t.content=n,t.markup=r[0],t.info="entity"}return e.pos+=r[0].length,!0}}}return!1}]],YZ=[["balance_pairs",function(e){let t=e.tokens_meta,n=e.tokens_meta.length;YX(e.delimiters);for(let e=0;e<n;e++)t[e]&&t[e].delimiters&&YX(t[e].delimiters)}],["strikethrough",YF.postProcess],["emphasis",YV.postProcess],["fragments_join",function(e){let t,n,r=0,i=e.tokens,o=e.tokens.length;for(t=n=0;t<o;t++)i[t].nesting<0&&r--,i[t].level=r,i[t].nesting>0&&r++,"text"===i[t].type&&t+1<o&&"text"===i[t+1].type?i[t+1].content=i[t].content+i[t+1].content:(t!==n&&(i[n]=i[t]),n++);t!==n&&(i.length=n)}]];function YK(){this.ruler=new Yh;for(let e=0;e<YY.length;e++)this.ruler.push(YY[e][0],YY[e][1]);this.ruler2=new Yh;for(let e=0;e<YZ.length;e++)this.ruler2.push(YZ[e][0],YZ[e][1])}function YJ(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){t&&Object.keys(t).forEach(function(n){e[n]=t[n]})}),e}function Y0(e){return Object.prototype.toString.call(e)}function Y1(e){return"[object Function]"===Y0(e)}function Y2(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}YK.prototype.skipToken=function(e){let t=e.pos,n=this.ruler.getRules(""),r=n.length,i=e.md.options.maxNesting,o=e.cache;if("u">typeof o[t]){e.pos=o[t];return}let s=!1;if(e.level<i){for(let i=0;i<r;i++)if(e.level++,s=n[i](e,!0),e.level--,s){if(t>=e.pos)throw Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;s||e.pos++,o[t]=e.pos},YK.prototype.tokenize=function(e){let t=this.ruler.getRules(""),n=t.length,r=e.posMax,i=e.md.options.maxNesting;for(;e.pos<r;){let o=e.pos,s=!1;if(e.level<i){for(let r=0;r<n;r++)if(s=t[r](e,!1)){if(o>=e.pos)throw Error("inline rule didn't increment state.pos");break}}if(s){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()},YK.prototype.parse=function(e,t,n,r){let i=new this.State(e,t,n,r);this.tokenize(i);let o=this.ruler2.getRules(""),s=o.length;for(let e=0;e<s;e++)o[e](i)},YK.prototype.State=YL;let Y4={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1},Y5={"http:":{validate:function(e,t,n){let r=e.slice(t);return n.re.http||(n.re.http=RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){let r=e.slice(t);return n.re.no_http||(n.re.no_http=RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&":"===e[t-3]||t>=3&&"/"===e[t-3]?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){let r=e.slice(t);return n.re.mailto||(n.re.mailto=RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},Y3="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function Y6(){return function(e,t){t.normalize(e)}}function Y7(e){let t=e.re=function(e){let t={};e=e||{},t.src_Any=XR.source,t.src_Cc=XI.source,t.src_Z=Xq.source,t.src_P=Xz.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");let n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+"|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}(e.__opts__),n=e.__tlds__.slice();function r(e){return e.replace("%TLDS%",t.src_tlds)}e.onCompile(),e.__tlds_replaced__||n.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),n.push(t.src_xn),t.src_tlds=n.join("|"),t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");let i=[];function o(e,t){throw Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}e.__compiled__={},Object.keys(e.__schemas__).forEach(function(t){let n=e.__schemas__[t];if(null===n)return;let r={validate:null,link:null};if(e.__compiled__[t]=r,"[object Object]"===Y0(n)){var s;"[object RegExp]"===Y0(n.validate)?(s=n.validate,r.validate=function(e,t){let n=e.slice(t);return s.test(n)?n.match(s)[0].length:0}):Y1(n.validate)?r.validate=n.validate:o(t,n),Y1(n.normalize)?r.normalize=n.normalize:n.normalize?o(t,n):r.normalize=Y6();return}if("[object String]"===Y0(n)){i.push(t);return}o(t,n)}),i.forEach(function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)}),e.__compiled__[""]={validate:null,normalize:Y6()};let s=Object.keys(e.__compiled__).filter(function(t){return t.length>0&&e.__compiled__[t]}).map(Y2).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+s+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+s+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),e.__index__=-1,e.__text_cache__=""}function Y8(e,t){let n=e.__index__,r=e.__last_index__,i=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=i,this.text=i,this.url=i}function Y9(e,t){let n=new Y8(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function Ze(e,t){if(!(this instanceof Ze))return new Ze(e,t);t||Object.keys(e||{}).reduce(function(e,t){return e||Y4.hasOwnProperty(t)},!1)&&(t=e,e={}),this.__opts__=YJ({},Y4,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=YJ({},Y5,e),this.__compiled__={},this.__tlds__=Y3,this.__tlds_replaced__=!1,this.re={},Y7(this)}Ze.prototype.add=function(e,t){return this.__schemas__[e]=t,Y7(this),this},Ze.prototype.set=function(e){return this.__opts__=YJ(this.__opts__,e),this},Ze.prototype.test=function(e){let t,n,r,i,o,s,a,l;if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;if(this.re.schema_test.test(e)){for((a=this.re.schema_search).lastIndex=0;null!==(t=a.exec(e));)if(i=this.testSchemaAt(e,t[2],a.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||l<this.__index__)&&null!==(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(o=n.index+n[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=n.index+n[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&e.indexOf("@")>=0&&null!==(r=e.match(this.re.email_fuzzy))&&(o=r.index+r[1].length,s=r.index+r[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=s)),this.__index__>=0},Ze.prototype.pretest=function(e){return this.re.pretest.test(e)},Ze.prototype.testSchemaAt=function(e,t,n){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,n,this):0},Ze.prototype.match=function(e){let t=[],n=0;this.__index__>=0&&this.__text_cache__===e&&(t.push(Y9(this,n)),n=this.__last_index__);let r=n?e.slice(n):e;for(;this.test(r);)t.push(Y9(this,n)),r=r.slice(this.__last_index__),n+=this.__last_index__;return t.length?t:null},Ze.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;let t=this.re.schema_at_start.exec(e);if(!t)return null;let n=this.testSchemaAt(e,t[2],t[0].length);return n?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+n,Y9(this,0)):null},Ze.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?this.__tlds__=this.__tlds__.concat(e).sort().filter(function(e,t,n){return e!==n[t-1]}).reverse():(this.__tlds__=e.slice(),this.__tlds_replaced__=!0),Y7(this),this},Ze.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},Ze.prototype.onCompile=function(){};let Zt=/^xn--/,Zn=/[^\0-\x7F]/,Zr=/[\x2E\u3002\uFF0E\uFF61]/g,Zi={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Zo=Math.floor,Zs=String.fromCharCode;function Za(e){throw RangeError(Zi[e])}function Zl(e,t){let n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+(function(e,t){let n=[],r=e.length;for(;r--;)n[r]=t(e[r]);return n})((e=e.replace(Zr,".")).split("."),t).join(".")}let Zc=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},Zu=function(e,t,n){let r=0;for(e=n?Zo(e/700):e>>1,e+=Zo(e/t);e>455;r+=36)e=Zo(e/35);return Zo(r+36*e/(e+38))},Zh=function(e){let t=[],n=e.length,r=0,i=128,o=72,s=e.lastIndexOf("-");s<0&&(s=0);for(let n=0;n<s;++n)e.charCodeAt(n)>=128&&Za("not-basic"),t.push(e.charCodeAt(n));for(let l=s>0?s+1:0;l<n;){let s=r;for(let t=1,i=36;;i+=36){var a;l>=n&&Za("invalid-input");let s=(a=e.charCodeAt(l++))>=48&&a<58?26+(a-48):a>=65&&a<91?a-65:a>=97&&a<123?a-97:36;s>=36&&Za("invalid-input"),s>Zo((0x7fffffff-r)/t)&&Za("overflow"),r+=s*t;let c=i<=o?1:i>=o+26?26:i-o;if(s<c)break;let u=36-c;t>Zo(0x7fffffff/u)&&Za("overflow"),t*=u}let c=t.length+1;o=Zu(r-s,c,0==s),Zo(r/c)>0x7fffffff-i&&Za("overflow"),i+=Zo(r/c),r%=c,t.splice(r++,0,i)}return String.fromCodePoint(...t)},Zd=function(e){let t=[],n=(e=function(e){let t=[],n=0,r=e.length;for(;n<r;){let i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){let r=e.charCodeAt(n++);(64512&r)==56320?t.push(((1023&i)<<10)+(1023&r)+65536):(t.push(i),n--)}else t.push(i)}return t}(e)).length,r=128,i=0,o=72;for(let n of e)n<128&&t.push(Zs(n));let s=t.length,a=s;for(s&&t.push("-");a<n;){let n=0x7fffffff;for(let t of e)t>=r&&t<n&&(n=t);let l=a+1;for(let c of(n-r>Zo((0x7fffffff-i)/l)&&Za("overflow"),i+=(n-r)*l,r=n,e))if(c<r&&++i>0x7fffffff&&Za("overflow"),c===r){let e=i;for(let n=36;;n+=36){let r=n<=o?1:n>=o+26?26:n-o;if(e<r)break;let i=e-r,s=36-r;t.push(Zs(Zc(r+i%s,0))),e=Zo(i/s)}t.push(Zs(Zc(e,0))),o=Zu(i,l,a===s),i=0,++a}++i,++r}return t.join("")},Zf={toASCII:function(e){return Zl(e,function(e){return Zn.test(e)?"xn--"+Zd(e):e})},toUnicode:function(e){return Zl(e,function(e){return Zt.test(e)?Zh(e.slice(4).toLowerCase()):e})}},Zp={default:{options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},zero:{options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},commonmark:{options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}}},Zm=/^(vbscript|javascript|file|data):/,Zg=/^data:image\/(gif|png|jpeg|webp);/;function Zy(e){let t=e.trim().toLowerCase();return!Zm.test(t)||Zg.test(t)}let Zb=["http:","https:","mailto:"];function Zv(e){let t=XD(e,!0);if(t.hostname&&(!t.protocol||Zb.indexOf(t.protocol)>=0))try{t.hostname=Zf.toASCII(t.hostname)}catch{}return Xw(Xk(t))}function Zx(e){let t=XD(e,!0);if(t.hostname&&(!t.protocol||Zb.indexOf(t.protocol)>=0))try{t.hostname=Zf.toUnicode(t.hostname)}catch{}return Xv(Xk(t),Xv.defaultChars+"%")}function Zw(e,t){if(!(this instanceof Zw))return new Zw(e,t);t||XY(e)||(t=e||{},e="default"),this.inline=new YK,this.block=new Yz,this.core=new YC,this.renderer=new Yu,this.linkify=new Ze,this.validateLink=Zy,this.normalizeLink=Zv,this.normalizeLinkText=Zx,this.utils=Ya,this.helpers=XK({},Yl),this.options={},this.configure(e),t&&this.set(t)}Zw.prototype.set=function(e){return XK(this.options,e),this},Zw.prototype.configure=function(e){let t=this;if(XY(e)){let t=e;if(!(e=Zp[t]))throw Error('Wrong `markdown-it` preset "'+t+'", check name')}if(!e)throw Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this},Zw.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(t){n=n.concat(this[t].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));let r=e.filter(function(e){return 0>n.indexOf(e)});if(r.length&&!t)throw Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this},Zw.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(t){n=n.concat(this[t].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));let r=e.filter(function(e){return 0>n.indexOf(e)});if(r.length&&!t)throw Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this},Zw.prototype.use=function(e){let t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this},Zw.prototype.parse=function(e,t){if("string"!=typeof e)throw Error("Input data should be a String");let n=new this.core.State(e,this,t);return this.core.process(n),n.tokens},Zw.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)},Zw.prototype.parseInline=function(e,t){let n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens},Zw.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};let Zk=new Il({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:()=>["p",0]},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["div",["hr"]]},heading:{attrs:{level:{default:1}},content:"(text | image)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:e=>["h"+e.attrs.level,0]},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>({params:e.getAttribute("data-params")||""})}],toDOM:e=>["pre",e.attrs.params?{"data-params":e.attrs.params}:{},["code",0]]},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs:e=>({order:e.hasAttribute("start")?+e.getAttribute("start"):1,tight:e.hasAttribute("data-tight")})}],toDOM:e=>["ol",{start:1==e.attrs.order?null:e.attrs.order,"data-tight":e.attrs.tight?"true":null},0]},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:e=>({tight:e.hasAttribute("data-tight")})}],toDOM:e=>["ul",{"data-tight":e.attrs.tight?"true":null},0]},list_item:{content:"block+",defining:!0,parseDOM:[{tag:"li"}],toDOM:()=>["li",0]},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:e=>({src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt")})}],toDOM:e=>["img",e.attrs]},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:e=>"em"==e.type.name}],toDOM:()=>["em"]},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!=e.style.fontWeight&&null},{style:"font-weight=400",clearMark:e=>"strong"==e.type.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM:()=>["strong"]},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:e=>({href:e.getAttribute("href"),title:e.getAttribute("title")})}],toDOM:e=>["a",e.attrs]},code:{parseDOM:[{tag:"code"}],toDOM:()=>["code"]}}});class ZO{constructor(e,t){this.schema=e,this.tokenHandlers=t,this.stack=[{type:e.topNodeType,attrs:null,content:[],marks:RF.none}]}top(){return this.stack[this.stack.length-1]}push(e){this.stack.length&&this.top().content.push(e)}addText(e){if(!e)return;let t=this.top(),n=t.content,r=n[n.length-1],i=this.schema.text(e,t.marks),o;r&&(o=function(e,t){if(e.isText&&t.isText&&RF.sameSet(e.marks,t.marks))return e.withText(e.text+t.text)}(r,i))?n[n.length-1]=o:n.push(i)}openMark(e){let t=this.top();t.marks=e.addToSet(t.marks)}closeMark(e){let t=this.top();t.marks=e.removeFromSet(t.marks)}parseTokens(e){for(let t=0;t<e.length;t++){let n=e[t],r=this.tokenHandlers[n.type];if(!r)throw Error("Token type `"+n.type+"` not supported by Markdown parser");r(this,n,e,t)}}addNode(e,t,n){let r=this.top(),i=e.createAndFill(t,n,r?r.marks:[]);return i?(this.push(i),i):null}openNode(e,t){this.stack.push({type:e,attrs:t,content:[],marks:RF.none})}closeNode(){let e=this.stack.pop();return this.addNode(e.type,e.attrs,e.content)}}function ZS(e,t,n,r){return e.getAttrs?e.getAttrs(t,n,r):e.attrs instanceof Function?e.attrs(t):e.attrs}function ZC(e,t){return e.noCloseToken||"code_inline"==t||"code_block"==t||"fence"==t}function ZT(e){return e[e.length-1]==`
`?e.slice(0,e.length-1):e}function ZA(){}function ZE(e,t){for(;++t<e.length;)if("list_item_open"!=e[t].type)return e[t].hidden;return!1}new class{constructor(e,t,n){this.schema=e,this.tokenizer=t,this.tokens=n,this.tokenHandlers=function(e,t){let n=Object.create(null);for(let r in t){let i=t[r];if(i.block){let t=e.nodeType(i.block);ZC(i,r)?n[r]=(e,n,r,o)=>{e.openNode(t,ZS(i,n,r,o)),e.addText(ZT(n.content)),e.closeNode()}:(n[r+"_open"]=(e,n,r,o)=>e.openNode(t,ZS(i,n,r,o)),n[r+"_close"]=e=>e.closeNode())}else if(i.node){let t=e.nodeType(i.node);n[r]=(e,n,r,o)=>e.addNode(t,ZS(i,n,r,o))}else if(i.mark){let t=e.marks[i.mark];ZC(i,r)?n[r]=(e,n,r,o)=>{e.openMark(t.create(ZS(i,n,r,o))),e.addText(ZT(n.content)),e.closeMark(t)}:(n[r+"_open"]=(e,n,r,o)=>e.openMark(t.create(ZS(i,n,r,o))),n[r+"_close"]=e=>e.closeMark(t))}else if(i.ignore)ZC(i,r)?n[r]=ZA:(n[r+"_open"]=ZA,n[r+"_close"]=ZA);else throw RangeError("Unrecognized parsing spec "+JSON.stringify(i))}return n.text=(e,t)=>e.addText(t.content),n.inline=(e,t)=>e.parseTokens(t.children),n.softbreak=n.softbreak||(e=>e.addText(" ")),n}(e,n)}parse(e,t={}){let n=new ZO(this.schema,this.tokenHandlers),r;n.parseTokens(this.tokenizer.parse(e,t));do r=n.closeNode();while(n.stack.length);return r||this.schema.topNodeType.createAndFill()}}(Zk,Zw("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list",getAttrs:(e,t,n)=>({tight:ZE(t,n)})},ordered_list:{block:"ordered_list",getAttrs:(e,t,n)=>({order:+e.attrGet("start")||1,tight:ZE(t,n)})},heading:{block:"heading",getAttrs:e=>({level:+e.tag.slice(1)})},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:e=>({params:e.info||""}),noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:e=>({src:e.attrGet("src"),title:e.attrGet("title")||null,alt:e.children[0]&&e.children[0].content||null})},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:e=>({href:e.attrGet("href"),title:e.attrGet("title")||null})},code_inline:{mark:"code",noCloseToken:!0}});let ZM={open:"",close:"",mixable:!0},ZN=new class{constructor(e,t,n={}){this.nodes=e,this.marks=t,this.options=n}serialize(e,t={}){t=Object.assign({},this.options,t);let n=new Zj(this.nodes,this.marks,t);return n.renderContent(e),n.out}}({blockquote(e,t){e.wrapBlock("> ",null,t,()=>e.renderContent(t))},code_block(e,t){let n=t.textContent.match(/`{3,}/gm),r=n?n.sort().slice(-1)[0]+"`":"```";e.write(r+(t.attrs.params||"")+`
`),e.text(t.textContent,!1),e.write(`
`),e.write(r),e.closeBlock(t)},heading(e,t){e.write(e.repeat("#",t.attrs.level)+" "),e.renderInline(t,!1),e.closeBlock(t)},horizontal_rule(e,t){e.write(t.attrs.markup||"---"),e.closeBlock(t)},bullet_list(e,t){e.renderList(t,"  ",()=>(t.attrs.bullet||"*")+" ")},ordered_list(e,t){let n=t.attrs.order||1,r=String(n+t.childCount-1).length,i=e.repeat(" ",r+2);e.renderList(t,i,t=>{let i=String(n+t);return e.repeat(" ",r-i.length)+i+". "})},list_item(e,t){e.renderContent(t)},paragraph(e,t){e.renderInline(t),e.closeBlock(t)},image(e,t){e.write("!["+e.esc(t.attrs.alt||"")+"]("+t.attrs.src.replace(/[\(\)]/g,"\\$&")+(t.attrs.title?' "'+t.attrs.title.replace(/"/g,'\\"')+'"':"")+")")},hard_break(e,t,n,r){for(let i=r+1;i<n.childCount;i++)if(n.child(i).type!=t.type){e.write(`\\
`);return}},text(e,t){e.text(t.text,!e.inAutolink)}},{em:{open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},strong:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},link:{open:(e,t,n,r)=>(e.inAutolink=function(e,t,n){if(e.attrs.title||!/^\w+:/.test(e.attrs.href))return!1;let r=t.child(n);return!!r.isText&&r.text==e.attrs.href&&r.marks[r.marks.length-1]==e&&(n==t.childCount-1||!e.isInSet(t.child(n+1).marks))}(t,n,r),e.inAutolink?"<":"["),close(e,t,n,r){let{inAutolink:i}=e;return e.inAutolink=void 0,i?">":"]("+t.attrs.href.replace(/[\(\)"]/g,"\\$&")+(t.attrs.title?` "${t.attrs.title.replace(/"/g,'\\"')}"`:"")+")"},mixable:!0},code:{open:(e,t,n,r)=>Z_(n.child(r),-1),close:(e,t,n,r)=>Z_(n.child(r-1),1),escape:!1}});function Z_(e,t){let n=/`+/g,r,i=0;if(e.isText)for(;r=n.exec(e.text);)i=Math.max(i,r[0].length);let o=i>0&&t>0?" `":"`";for(let e=0;e<i;e++)o+="`";return i>0&&t<0&&(o+=" "),o}let Zj=class{constructor(e,t,n){this.nodes=e,this.marks=t,this.options=n,this.delim="",this.out="",this.closed=null,this.inAutolink=void 0,this.atBlockStart=!1,this.inTightList=!1,typeof this.options.tightLists>"u"&&(this.options.tightLists=!1),typeof this.options.hardBreakNodeName>"u"&&(this.options.hardBreakNodeName="hard_break")}flushClose(e=2){if(this.closed){if(this.atBlank()||(this.out+=`
`),e>1){let t=this.delim,n=/\s+$/.exec(t);n&&(t=t.slice(0,t.length-n[0].length));for(let n=1;n<e;n++)this.out+=t+`
`}this.closed=null}}getMark(e){let t=this.marks[e];if(!t){if(!1!==this.options.strict)throw Error(`Mark type \`${e}\` not supported by Markdown renderer`);t=ZM}return t}wrapBlock(e,t,n,r){let i=this.delim;this.write(t??e),this.delim+=e,r(),this.delim=i,this.closeBlock(n)}atBlank(){return/(^|\n)$/.test(this.out)}ensureNewLine(){this.atBlank()||(this.out+=`
`)}write(e){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),e&&(this.out+=e)}closeBlock(e){this.closed=e}text(e,t=!0){let n=e.split(`
`);for(let e=0;e<n.length;e++)this.write(),!t&&"["==n[e][0]&&/(^|[^\\])\!$/.test(this.out)&&(this.out=this.out.slice(0,this.out.length-1)+"\\!"),this.out+=t?this.esc(n[e],this.atBlockStart):n[e],e!=n.length-1&&(this.out+=`
`)}render(e,t,n){if(this.nodes[e.type.name])this.nodes[e.type.name](this,e,t,n);else{if(!1!==this.options.strict)throw Error("Token type `"+e.type.name+"` not supported by Markdown renderer");e.type.isLeaf||(e.type.inlineContent?this.renderInline(e):this.renderContent(e),e.isBlock&&this.closeBlock(e))}}renderContent(e){e.forEach((t,n,r)=>this.render(t,e,r))}renderInline(e,t=!0){this.atBlockStart=t;let n=[],r="",i=(t,i,o)=>{let s=t?t.marks:[];t&&t.type.name===this.options.hardBreakNodeName&&(s=s.filter(t=>{if(o+1==e.childCount)return!1;let n=e.child(o+1);return t.isInSet(n.marks)&&(!n.isText||/\S/.test(n.text))}));let a=r;if(r="",t&&t.isText&&s.some(e=>{let t=this.getMark(e.type.name);return t&&t.expelEnclosingWhitespace&&!e.isInSet(n)})){let[e,r,i]=/^(\s*)(.*)$/m.exec(t.text);r&&(a+=r,(t=i?t.withText(i):null)||(s=n))}if(t&&t.isText&&s.some(t=>{let n=this.getMark(t.type.name);return n&&n.expelEnclosingWhitespace&&(o==e.childCount-1||!t.isInSet(e.child(o+1).marks))})){let[e,i,o]=/^(.*?)(\s*)$/m.exec(t.text);o&&(r=o,(t=i?t.withText(i):null)||(s=n))}let l=s.length?s[s.length-1]:null,c=l&&!1===this.getMark(l.type.name).escape,u=s.length-+!!c;e:for(let e=0;e<u;e++){let t=s[e];if(!this.getMark(t.type.name).mixable)break;for(let r=0;r<n.length;r++){let i=n[r];if(!this.getMark(i.type.name).mixable)break;if(t.eq(i)){e>r?s=s.slice(0,r).concat(t).concat(s.slice(r,e)).concat(s.slice(e+1,u)):r>e&&(s=s.slice(0,e).concat(s.slice(e+1,r)).concat(t).concat(s.slice(r,u)));continue e}}}let h=0;for(;h<Math.min(n.length,u)&&s[h].eq(n[h]);)++h;for(;h<n.length;)this.text(this.markString(n.pop(),!1,e,o),!1);if(a&&this.text(a),t){for(;n.length<u;){let t=s[n.length];n.push(t),this.text(this.markString(t,!0,e,o),!1),this.atBlockStart=!1}c&&t.isText?this.text(this.markString(l,!0,e,o)+t.text+this.markString(l,!1,e,o+1),!1):this.render(t,e,o),this.atBlockStart=!1}null!=t&&t.isText&&t.nodeSize>0&&(this.atBlockStart=!1)};e.forEach(i),i(null,0,e.childCount),this.atBlockStart=!1}renderList(e,t,n){this.closed&&this.closed.type==e.type?this.flushClose(3):this.inTightList&&this.flushClose(1);let r="u">typeof e.attrs.tight?e.attrs.tight:this.options.tightLists,i=this.inTightList;this.inTightList=r,e.forEach((i,o,s)=>{s&&r&&this.flushClose(1),this.wrapBlock(t,n(s),e,()=>this.render(i,e,s))}),this.inTightList=i}esc(e,t=!1){return e=e.replace(/[`*\\~\[\]_]/g,(t,n)=>"_"==t&&n>0&&n+1<e.length&&e[n-1].match(/\w/)&&e[n+1].match(/\w/)?t:"\\"+t),t&&(e=e.replace(/^(\+[ ]|[\-*>])/,"\\$&").replace(/^(\s*)(#{1,6})(\s|$)/,"$1\\$2$3").replace(/^(\s*\d+)\.\s/,"$1\\. ")),this.options.escapeExtraCharacters&&(e=e.replace(this.options.escapeExtraCharacters,"\\$&")),e}quote(e){let t=-1==e.indexOf('"')?'""':-1==e.indexOf("'")?"''":"()";return t[0]+e+t[1]}repeat(e,t){let n="";for(let r=0;r<t;r++)n+=e;return n}markString(e,t,n,r){let i=this.getMark(e.type.name),o=t?i.open:i.close;return"string"==typeof o?o:o(this,e,n,r)}getEnclosingWhitespace(e){return{leading:(e.match(/^(\s+)/)||[void 0])[0],trailing:(e.match(/(\s+)$/)||[void 0])[0]}}};var ZD=!0,ZP=!1,ZR=!1;function ZI(e,t,n){var r=e.attrIndex(t),i=[t,n];r<0?e.attrPush(i):e.attrs[r]=i}let Zz=(0,_.y)(function(e,t){t&&(ZD=!t.enabled,ZP=!!t.label,ZR=!!t.labelAfter),e.core.ruler.after("inline","github-task-lists",function(e){for(var t=e.tokens,n=2;n<t.length;n++)(function(e,t){var n;return"inline"===e[t].type&&"paragraph_open"===e[t-1].type&&"list_item_open"===e[t-2].type&&(0===(n=e[t]).content.indexOf("[ ] ")||0===n.content.indexOf("[x] ")||0===n.content.indexOf("[X] "))})(t,n)&&(function(e,t){if(e.children.unshift(function(e,t){var n=new t("html_inline","",0),r=ZD?' disabled="" ':"";return 0===e.content.indexOf("[ ] ")?n.content='<input class="task-list-item-checkbox"'+r+'type="checkbox">':(0===e.content.indexOf("[x] ")||0===e.content.indexOf("[X] "))&&(n.content='<input class="task-list-item-checkbox" checked=""'+r+'type="checkbox">'),n}(e,t)),e.children[1].content=e.children[1].content.slice(3),e.content=e.content.slice(3),ZP){if(ZR){e.children.pop();var n="task-item-"+Math.ceil(1e4*1e3*Math.random()-1e3);e.children[0].content=e.children[0].content.slice(0,-1)+' id="'+n+'">',e.children.push(function(e,t,n){var r=new n("html_inline","",0);return r.content='<label class="task-list-item-label" for="'+t+'">'+e+"</label>",r.attrs=[{for:t}],r}(e.content,n,t))}else e.children.unshift(function(e){var t=new e("html_inline","",0);return t.content="<label>",t}(t)),e.children.push(function(e){var t=new e("html_inline","",0);return t.content="</label>",t}(t))}}(t[n],e.Token),ZI(t[n-2],"class","task-list-item"+(ZD?"":" enabled")),ZI(t[function(e,t){for(var n=e[t].level-1,r=t-1;r>=0;r--)if(e[r].level===n)return r;return -1}(t,n-2)],"class","contains-task-list"))})});var ZL=Object.defineProperty,Zq=(e,t,n)=>t in e?ZL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Z$=(e,t,n)=>(Zq(e,"symbol"!=typeof t?t+"":t,n),n);let ZB=$W.create({name:"markdownTightLists",addOptions:()=>({tight:!0,tightClass:"tight",listTypes:["bulletList","orderedList"]}),addGlobalAttributes(){return[{types:this.options.listTypes,attributes:{tight:{default:this.options.tight,parseHTML:e=>"true"===e.getAttribute("data-tight")||!e.querySelector("p"),renderHTML:e=>({class:e.tight?this.options.tightClass:null,"data-tight":e.tight?"true":null})}}}]},addCommands(){var e=this;return{toggleTight:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return n=>{let{editor:r,commands:i}=n;return e.options.listTypes.some(e=>(function(e){if(!r.isActive(e))return!1;let n=r.getAttributes(e);return i.updateAttributes(e,{tight:t??!(null!=n&&n.tight)})})(e))}}}}}),ZF=Zw();function ZQ(e,t){return ZF.inline.State.prototype.scanDelims.call({src:e,posMax:e.length}),new ZF.inline.State(e,null,null,[]).scanDelims(t,!0)}function ZV(e,t,n,r){let i=e.substring(0,n)+e.substring(n+t.length);return i.substring(0,n+r)+t+i.substring(n+r)}class ZH extends Zj{constructor(e,t,n){super(e,t,n??{}),Z$(this,"inTable",!1),this.inlines=[]}render(e,t,n){super.render(e,t,n);let r=this.inlines[this.inlines.length-1];if(null!=r&&r.start&&null!=r&&r.end){let e;let{delimiter:t,start:n,end:i}=this.normalizeInline(r);this.out=((e=function(e,t,n,r){let i=r,o=e;for(;i>n&&!ZQ(o,i).can_close;)o=ZV(o,t,i,-1),i--;return{text:o,from:n,to:i}}((e=function(e,t,n,r){let i=n,o=e;for(;i<r&&!ZQ(o,i).can_open;)o=ZV(o,t,i,1),i++;return{text:o,from:i,to:r}}((e={text:this.out,from:n,to:i}).text,t,e.from,e.to)).text,t,e.from,e.to)).to-e.from<t.length+1&&(e.text=e.text.substring(0,e.from)+e.text.substring(e.to+t.length)),e.text),this.inlines.pop()}}markString(e,t,n,r){let i=this.marks[e.type.name];if(i.expelEnclosingWhitespace){if(t)this.inlines.push({start:this.out.length,delimiter:i.open});else{let e=this.inlines.pop();this.inlines.push({...e,end:this.out.length})}}return super.markString(e,t,n,r)}normalizeInline(e){let{start:t,end:n}=e;for(;this.out.charAt(t).match(/\s/);)t++;return{...e,start:t}}}let ZU=$B.create({name:"markdownHTMLMark",addStorage:()=>({markdown:{serialize:{open(e,t){var n,r;return this.editor.storage.markdown.options.html?null!==(n=null===(r=ZW(t))||void 0===r?void 0:r[0])&&void 0!==n?n:"":(console.warn(`Tiptap Markdown: "${t.type.name}" mark is only available in html mode`),"")},close(e,t){var n,r;return this.editor.storage.markdown.options.html&&null!==(n=null===(r=ZW(t))||void 0===r?void 0:r[1])&&void 0!==n?n:""}},parse:{}}})});function ZW(e){let t=e.type.schema,n=t.text(" ",[e]),r=$D(RL.from(n),t).match(/^(<.*?>) (<\/.*?>)$/);return r?[r[1],r[2]]:null}function ZG(e){let t=`<body>${e}</body>`;return new window.DOMParser().parseFromString(t,"text/html").body}let ZX=Bj.create({name:"markdownHTMLNode",addStorage:()=>({markdown:{serialize(e,t,n){this.editor.storage.markdown.options.html?e.write(function(e,t){let n=e.type.schema,r=$D(RL.from(e),n);return e.isBlock&&(t instanceof RL||t.type.name===n.topNodeType.name)?function(e){let t=ZG(e).firstElementChild;return t.innerHTML=t.innerHTML.trim()?`
${t.innerHTML}
`:`
`,t.outerHTML}(r):r}(t,n)):(console.warn(`Tiptap Markdown: "${t.type.name}" node is only available in html mode`),e.write(`[${t.type.name}]`)),t.isBlock&&e.closeBlock(t)},parse:{}}})}),ZY=Bj.create({name:"blockquote"}).extend({addStorage:()=>({markdown:{serialize:ZN.nodes.blockquote,parse:{}}})}),ZZ=Bj.create({name:"bulletList"}).extend({addStorage:()=>({markdown:{serialize(e,t){return e.renderList(t,"  ",()=>(this.editor.storage.markdown.options.bulletListMarker||"-")+" ")},parse:{}}})}),ZK=Bj.create({name:"codeBlock"}).extend({addStorage:()=>({markdown:{serialize(e,t){e.write("```"+(t.attrs.language||"")+`
`),e.text(t.textContent,!1),e.ensureNewLine(),e.write("```"),e.closeBlock(t)},parse:{setup(e){var t;e.set({langPrefix:null!==(t=this.options.languageClassPrefix)&&void 0!==t?t:"language-"})},updateDOM(e){e.innerHTML=e.innerHTML.replace(/\n<\/code><\/pre>/g,"</code></pre>")}}}})}),ZJ=Bj.create({name:"hardBreak"}).extend({addStorage:()=>({markdown:{serialize(e,t,n,r){for(let i=r+1;i<n.childCount;i++)if(n.child(i).type!=t.type){e.write(e.inTable?ZX.storage.markdown.serialize.call(this,e,t,n):`\\
`);return}},parse:{}}})}),Z0=Bj.create({name:"heading"}).extend({addStorage:()=>({markdown:{serialize:ZN.nodes.heading,parse:{}}})}),Z1=Bj.create({name:"horizontalRule"}).extend({addStorage:()=>({markdown:{serialize:ZN.nodes.horizontal_rule,parse:{}}})}),Z2=Bj.create({name:"image"}).extend({addStorage:()=>({markdown:{serialize:ZN.nodes.image,parse:{}}})}),Z4=Bj.create({name:"listItem"}).extend({addStorage:()=>({markdown:{serialize:ZN.nodes.list_item,parse:{}}})}),Z5=Bj.create({name:"orderedList"}).extend({addStorage:()=>({markdown:{serialize(e,t,n,r){let i=t.attrs.start||1,o=String(i+t.childCount-1).length,s=e.repeat(" ",o+2),a=function(e,t,n){let r=0;for(;n-r>0&&t.child(n-r-1).type.name===e.type.name;r++);return r}(t,n,r)%2?") ":". ";e.renderList(t,s,t=>{let n=String(i+t);return e.repeat(" ",o-n.length)+n+a})},parse:{}}})}),Z3=Bj.create({name:"paragraph"}).extend({addStorage:()=>({markdown:{serialize:ZN.nodes.paragraph,parse:{}}})});function Z6(e){var t,n;return null!==(t=null==e||null===(n=e.content)||void 0===n?void 0:n.content)&&void 0!==t?t:[]}let Z7=Bj.create({name:"table"}).extend({addStorage:()=>({markdown:{serialize(e,t,n){if(!function(e){let t=Z6(e),n=t[0],r=t.slice(1);return!(Z6(n).some(e=>"tableHeader"!==e.type.name||Z8(e)||e.childCount>1)||r.some(e=>Z6(e).some(e=>"tableHeader"===e.type.name||Z8(e)||e.childCount>1)))}(t)){ZX.storage.markdown.serialize.call(this,e,t,n);return}e.inTable=!0,t.forEach((t,n,r)=>{if(e.write("| "),t.forEach((t,n,r)=>{r&&e.write(" | ");let i=t.firstChild;i.textContent.trim()&&e.renderInline(i)}),e.write(" |"),e.ensureNewLine(),!r){let n=Array.from({length:t.childCount}).map(()=>"---").join(" | ");e.write(`| ${n} |`),e.ensureNewLine()}}),e.closeBlock(t),e.inTable=!1},parse:{}}})});function Z8(e){return e.attrs.colspan>1||e.attrs.rowspan>1}let Z9=Bj.create({name:"taskItem"}).extend({addStorage:()=>({markdown:{serialize(e,t){let n=t.attrs.checked?"[x]":"[ ]";e.write(`${n} `),e.renderContent(t)},parse:{updateDOM(e){[...e.querySelectorAll(".task-list-item")].forEach(e=>{let t=e.querySelector("input");e.setAttribute("data-type","taskItem"),t&&(e.setAttribute("data-checked",t.checked),t.remove())})}}}})}),Ke=Bj.create({name:"taskList"}).extend({addStorage:()=>({markdown:{serialize:ZZ.storage.markdown.serialize,parse:{setup(e){e.use(Zz)},updateDOM(e){[...e.querySelectorAll(".contains-task-list")].forEach(e=>{e.setAttribute("data-type","taskList")})}}}})}),Kt=Bj.create({name:"text"}).extend({addStorage:()=>({markdown:{serialize(e,t){var n;e.text(null==(n=t.text)?void 0:n.replace(/</g,"&lt;").replace(/>/g,"&gt;"))},parse:{}}})}),Kn=$B.create({name:"bold"}).extend({addStorage:()=>({markdown:{serialize:ZN.marks.strong,parse:{}}})}),Kr=$B.create({name:"code"}).extend({addStorage:()=>({markdown:{serialize:ZN.marks.code,parse:{}}})}),Ki=$B.create({name:"italic"}).extend({addStorage:()=>({markdown:{serialize:ZN.marks.em,parse:{}}})}),Ko=[ZY,ZZ,ZK,ZJ,Z0,Z1,ZX,Z2,Z4,Z5,Z3,Z7,Z9,Ke,Kt,Kn,Kr,ZU,Ki,$B.create({name:"link"}).extend({addStorage:()=>({markdown:{serialize:ZN.marks.link,parse:{}}})}),$B.create({name:"strike"}).extend({addStorage:()=>({markdown:{serialize:{open:"~~",close:"~~",expelEnclosingWhitespace:!0},parse:{}}})})];function Ks(e){var t,n;let r=null===(t=e.storage)||void 0===t?void 0:t.markdown,i=null===(n=Ko.find(t=>t.name===e.name))||void 0===n?void 0:n.storage.markdown;return r||i?{...i,...r}:null}class Ka{constructor(e){Z$(this,"editor",null),this.editor=e}serialize(e){let t=new ZH(this.nodes,this.marks,{hardBreakNodeName:ZJ.name});return t.renderContent(e),t.out}get nodes(){var e;return{...Object.fromEntries(Object.keys(this.editor.schema.nodes).map(e=>[e,this.serializeNode(ZX)])),...Object.fromEntries(null!==(e=this.editor.extensionManager.extensions.filter(e=>"node"===e.type&&this.serializeNode(e)).map(e=>[e.name,this.serializeNode(e)]))&&void 0!==e?e:[])}}get marks(){var e;return{...Object.fromEntries(Object.keys(this.editor.schema.marks).map(e=>[e,this.serializeMark(ZU)])),...Object.fromEntries(null!==(e=this.editor.extensionManager.extensions.filter(e=>"mark"===e.type&&this.serializeMark(e)).map(e=>[e.name,this.serializeMark(e)]))&&void 0!==e?e:[])}}serializeNode(e){var t;return null===(t=Ks(e))||void 0===t||null===(t=t.serialize)||void 0===t?void 0:t.bind({editor:this.editor,options:e.options})}serializeMark(e){var t;let n=null===(t=Ks(e))||void 0===t?void 0:t.serialize;return n?{...n,open:"function"==typeof n.open?n.open.bind({editor:this.editor,options:e.options}):n.open,close:"function"==typeof n.close?n.close.bind({editor:this.editor,options:e.options}):n.close}:null}}class Kl{constructor(e,t){Z$(this,"editor",null),Z$(this,"md",null);let{html:n,linkify:r,breaks:i}=t;this.editor=e,this.md=this.withPatchedRenderer(Zw({html:n,linkify:r,breaks:i}))}parse(e){let{inline:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){this.editor.extensionManager.extensions.forEach(e=>{var t;return null===(t=Ks(e))||void 0===t||null===(t=t.parse)||void 0===t||null===(t=t.setup)||void 0===t?void 0:t.call({editor:this.editor,options:e.options},this.md)});let n=ZG(this.md.render(e));return this.editor.extensionManager.extensions.forEach(e=>{var t;return null===(t=Ks(e))||void 0===t||null===(t=t.parse)||void 0===t||null===(t=t.updateDOM)||void 0===t?void 0:t.call({editor:this.editor,options:e.options},n)}),this.normalizeDOM(n,{inline:t,content:e}),n.innerHTML}return e}normalizeDOM(e,t){let{inline:n,content:r}=t;return this.normalizeBlocks(e),e.querySelectorAll("*").forEach(e=>{var t;(null===(t=e.nextSibling)||void 0===t?void 0:t.nodeType)!==Node.TEXT_NODE||e.closest("pre")||(e.nextSibling.textContent=e.nextSibling.textContent.replace(/^\n/,""))}),n&&this.normalizeInline(e,r),e}normalizeBlocks(e){let t=Object.values(this.editor.schema.nodes).filter(e=>e.isBlock).map(e=>{var t;return null===(t=e.spec.parseDOM)||void 0===t?void 0:t.map(e=>e.tag)}).flat().filter(Boolean).join(",");t&&[...e.querySelectorAll(t)].forEach(e=>{e.parentElement.matches("p")&&function(e){let t=e.parentElement,n=t.cloneNode();for(;t.firstChild&&t.firstChild!==e;)n.appendChild(t.firstChild);n.childNodes.length>0&&t.parentElement.insertBefore(n,t),t.parentElement.insertBefore(e,t),0===t.childNodes.length&&t.remove()}(e)})}normalizeInline(e,t){var n,r,i,o,s;if(null!==(n=e.firstElementChild)&&void 0!==n&&n.matches("p")){let n=e.firstElementChild,{nextElementSibling:a}=n,l=null!==(r=null===(i=t.match(/^\s+/))||void 0===i?void 0:i[0])&&void 0!==r?r:"",c=a?"":null!==(o=null===(s=t.match(/\s+$/))||void 0===s?void 0:s[0])&&void 0!==o?o:"";if(t.match(/^\n\n/)){n.innerHTML=`${n.innerHTML}${c}`;return}(function(e){let t=e.parentNode;for(;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)})(n),e.innerHTML=`${l}${e.innerHTML}${c}`}}withPatchedRenderer(e){let t=e=>function(){let t=e(...arguments);return t===`
`?t:t[t.length-1]===`
`?t.slice(0,-1):t};return e.renderer.rules.hardbreak=t(e.renderer.rules.hardbreak),e.renderer.rules.softbreak=t(e.renderer.rules.softbreak),e.renderer.rules.fence=t(e.renderer.rules.fence),e.renderer.rules.code_block=t(e.renderer.rules.code_block),e.renderer.renderToken=t(e.renderer.renderToken.bind(e.renderer)),e}}let Kc=$W.create({name:"markdownClipboard",addOptions:()=>({transformPastedText:!1,transformCopiedText:!1}),addProseMirrorPlugins(){return[new zg({key:new zv("markdownClipboard"),props:{clipboardTextParser:(e,t,n)=>{if(n||!this.options.transformPastedText)return null;let r=this.editor.storage.markdown.parser.parse(e,{inline:!0});return Iu.fromSchema(this.editor.schema).parseSlice(ZG(r),{preserveWhitespace:!0,context:t})},clipboardTextSerializer:e=>this.options.transformCopiedText?this.editor.storage.markdown.serializer.serialize(e.content):null}})]}}),Ku=$W.create({name:"markdown",priority:50,addOptions:()=>({html:!0,tightLists:!0,tightListClass:"tight",bulletListMarker:"-",linkify:!1,breaks:!1,transformPastedText:!1,transformCopiedText:!1}),addCommands(){let e=BC.Commands.config.addCommands();return{setContent:(t,n,r)=>i=>e.setContent(i.editor.storage.markdown.parser.parse(t),n,r)(i),insertContentAt:(t,n,r)=>i=>e.insertContentAt(t,i.editor.storage.markdown.parser.parse(n,{inline:!0}),r)(i)}},onBeforeCreate(){this.editor.storage.markdown={options:{...this.options},parser:new Kl(this.editor,this.options),serializer:new Ka(this.editor),getMarkdown:()=>this.editor.storage.markdown.serializer.serialize(this.editor.state.doc)},this.editor.options.initialContent=this.editor.options.content,this.editor.options.content=this.editor.storage.markdown.parser.parse(this.editor.options.content)},onCreate(){this.editor.options.content=this.editor.options.initialContent,delete this.editor.options.initialContent},addStorage:()=>({}),addExtensions(){return[ZB.configure({tight:this.options.tightLists,tightClass:this.options.tightListClass}),Kc.configure({transformPastedText:this.options.transformPastedText,transformCopiedText:this.options.transformCopiedText})]}}),Kh=$B.create({name:"comment",addOptions:()=>({HTMLAttributes:{},onCommentActivated:()=>{}}),addAttributes:()=>({commentId:{default:null,parseHTML:e=>e.getAttribute("data-comment-id"),renderHTML:e=>({"data-comment-id":e.commentId})}}),parseHTML:()=>[{tag:"span[data-comment-id]",getAttrs:e=>{var t;return!!(null!==(t=e.getAttribute("data-comment-id"))&&void 0!==t&&t.trim())&&null}}],renderHTML({HTMLAttributes:e}){return["span",$C(this.options.HTMLAttributes,e),0]},onSelectionUpdate(){let{$from:e}=this.editor.state.selection,t=e.marks();if(!t.length){this.storage.activeCommentId=null,this.options.onCommentActivated(this.storage.activeCommentId);return}let n=this.editor.schema.marks.comment,r=t.find(e=>e.type===n);this.storage.activeCommentId=(null==r?void 0:r.attrs.commentId)||null,this.options.onCommentActivated(this.storage.activeCommentId)},addStorage:()=>({activeCommentId:null}),addCommands:()=>({setComment:e=>({commands:t})=>{if(!e)return!1;t.setMark("comment",{commentId:e})},unsetComment:e=>({tr:t,dispatch:n})=>{if(!e)return!1;let r=[];return t.doc.descendants((t,n)=>{let i=t.marks.find(t=>"comment"===t.type.name&&t.attrs.commentId===e);i&&r.push({mark:i,range:{from:n,to:n+t.nodeSize}})}),r.forEach(({mark:e,range:n})=>{t.removeMark(n.from,n.to,e)}),null==n?void 0:n(t)}})});function Kd({node:e}){let{multiTables:t,tables:n}=(0,N.useContext)(Um),r=t[e.attrs.id],i=Array.isArray(null==r?void 0:r.tableIds)?r.tableIds:[],[o,s]=(0,N.useState)(i.length>0?i[0]:null),a=(0,N.useMemo)(()=>{let e={};return i.forEach(t=>{let{columns:r,data:i,attributes:o}=n[t]||{};e[t]=[{name:"Table",content:M.j.jsx(M.T,{columns:r,rows:i,columnHeaderClassNames:"py-2",skipColumns:["index"]})},{name:"Chart",content:M.j.jsx(kf,{children:M.j.jsx(P5,{rows:i,columns:r,initialQuestion:null==o?void 0:o.generated_qn,initialOptionsExpanded:!1})})},o.sql?{name:"SQL",content:M.j.jsx("pre",{className:"whitespace-pre-wrap px-2 py-4 bg-gray-800",children:M.j.jsx("code",{children:o.sql})})}:null]}),e},[n]);return M.j.jsxs(B5,{as:"div",className:"react-component react-multitable-container not-prose lg:-mx-40 my-10","data-id":e.attrs.id,children:[i&&i.length>1&&M.j.jsx("div",{className:"table-selection flex flex-row gap-2 w-100 overflow-auto mb-4",children:i.map(e=>{var t,r;return M.j.jsx("div",{className:`p-2 bg-gray-200 border border-gray-300 rounded-full cursor-pointer whitespace-nowrap text-xs ${o===e?"bg-gray-600 border-transparent text-white":"text-gray-500 hover:bg-gray-300"}`,onClick:()=>s(e),children:KC[null==(t=n[e])?void 0:t.type]||(null==(r=n[e])?void 0:r.type)||"Table"},e)})}),o&&a[o]&&M.j.jsx(M.c,{tabs:a[o].filter(Boolean),size:"small",contentClassNames:"border dark:border-gray-600",defaultSelected:o})]})}let Kf=Bj.create({name:"oracle-multi-table",group:"block",content:"text*",addAttributes:()=>({id:{default:null,isRequired:!0}}),parseHTML:()=>[{tag:"oracle-multi-table"}],renderHTML:({HTMLAttributes:e})=>["oracle-multi-table",$C(e)],addNodeView:()=>B7(Kd)});function Kp({node:e}){let{apiEndpoint:t,images:n,projectName:r,reportId:i,token:o}=(0,N.useContext)(Um),{src:s,alt:a}=n[e.attrs.id]||{},[l,c]=(0,N.useState)(null),[u,h]=(0,N.useState)(null);return(0,N.useEffect)(()=>{(async function(){try{let e=await Wm(t,i,r,o,s);h(null),c("data:image/png;base64,"+e)}catch(e){console.error(e),h("Error fetching image")}})()},[]),M.j.jsx(B5,{className:"react-component not-prose",children:u?M.j.jsx("div",{className:"bg-rose-100 text-red text-center rounded-md p-2",children:u}):l?M.j.jsx("img",{src:l,alt:a}):M.j.jsx(M.d,{})})}let Km=Bj.create({name:"oracle-image",group:"block",addAttributes:()=>({id:{default:null,isRequired:!0}}),parseHTML:()=>[{tag:"oracle-image"}],renderHTML:({HTMLAttributes:e})=>["oracle-image",$C(e)],addNodeView:()=>B7(Kp)});function Kg({comment:e,onUpdate:t,onDelete:n,anchorEl:r,isEditing:i}){let o=(0,N.useRef)(null),s=(0,N.useRef)(null);(0,N.useEffect)(()=>{if(s.current&&r){let e=r.getBoundingClientRect(),t=s.current;t.style.position="fixed",t.style.left=`${e.left+e.width/2-t.offsetWidth/2}px`,t.style.top=`${e.top-t.offsetHeight-8}px`,e.top<t.offsetHeight+16&&(t.style.top=`${e.bottom+8}px`)}},[r]);let[a,l]=(0,N.useState)(!1);return(0,N.useEffect)(()=>{i&&o.current&&o.current.focus()},[i]),r?M.j.jsxs("div",{ref:s,className:"fixed z-50 p-2 border rounded-lg bg-white shadow-custom comment-popover not-prose border-gray-300 overflow-hidden dark:bg-gray-700 dark:border-gray-600 w-80",onClick:e=>e.stopPropagation(),children:[M.j.jsxs("div",{className:"text-xs flex flex-row mb-1 items-center",children:[M.j.jsx("p",{className:"text-gray-400",children:i?a?"Commenting":"Posted":"Click to edit comment"}),M.j.jsx("div",{className:"flex gap-2 ml-auto",children:i&&M.j.jsxs(M.j.Fragment,{children:[M.j.jsx("button",{onClick:()=>{if(o.current){let n={...e,content:o.current.value};null==t||t(n),o.current.blur()}},className:`cursor-pointer ${a?"text-blue-500 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300":"text-gray-400 hover:text-gray-500 dark:text-gray-500 dark:hover:text-gray-400"}`,children:"Submit"}),M.j.jsx("div",{className:"text-gray-400 hover:text-rose-500 dark:hover:text-rose-300 cursor-pointer",onClick:n,children:"Delete"})]})})]}),M.j.jsx(M.V,{ref:o,defaultValue:e.content,defaultRows:2,textAreaHtmlProps:{onBlur:n=>{l(!1);let r={...e,content:n.target.value};null==t||t(r)},onFocus:()=>{l(!0)},onKeyDown:n=>{if("Enter"===n.key&&!n.shiftKey){n.preventDefault();let r={...e,content:n.currentTarget.value};null==t||t(r),n.currentTarget.blur()}},onClick:e=>e.stopPropagation()},textAreaClassNames:(0,M.t)("w-full bg-transparent text-sm border-none focus:outline-none focus:ring-1 focus:ring-blue-500 rounded px-1 resize-none overflow-hidden dark:bg-gray-800 dark:text-gray-400 dark:border-none",i?"cursor-text dark:text-gray-200":"cursor-default text-gray-500 dark:text-gray-400"),disabled:!i,autoResize:!0,placeholder:"Type your comment here"})]}):null}function Ky({editor:e,commentManager:t}){let n=(0,N.useSyncExternalStore)(t.subscribeToCommentUpdates,t.getComments),{interactionState:r,setInteractionState:i}=function(e){let[t,n]=(0,N.useState)({hoveredId:null,hoveredElement:null,editingId:null,relativeTop:null,pmPos:null,pmNode:null});return(0,N.useEffect)(()=>{if(!e)return;let r=r=>{let i=r.target,o=i.getAttribute("data-comment-id"),s=i.classList.contains("oracle-report-tiptap"),a=i.closest(".oracle-comment-handler"),l=i.closest(".oracle-report-tiptap");if(!t.editingId&&!s&&!a&&l){let t=e.view.dom.getBoundingClientRect().top,s=i.getBoundingClientRect().top-t,a=e.view.posAtCoords({left:r.clientX,top:r.clientY});if(!a)return;let l=e.view.nodeDOM(a.inside);n(e=>({...e,hoveredId:o,hoveredElement:i,relativeTop:s,pmPos:a,pmNode:l}))}},i=e=>{let t=e.target,r=t.getAttribute("data-comment-id");"svg"===t.tagName||"path"===t.tagName||t.closest(".comment-icon")||r&&(e.stopPropagation(),n(e=>({...e,editingId:r,hoveredId:r,hoveredElement:t})))};return e.view.dom.addEventListener("mousemove",r,!0),e.view.dom.addEventListener("click",i,!0),()=>{e.view.dom.removeEventListener("mousemove",r,!0),e.view.dom.removeEventListener("click",i,!0)}},[e,t.editingId]),{interactionState:t,setInteractionState:n}}(e);(0,N.useEffect)(()=>{let e=e=>{let t=e.target;"svg"===t.tagName||"path"===t.tagName||t.closest(".comment-icon")||t.closest(".comment-popover")||t.getAttribute("data-comment-id")||i(()=>({hoveredId:null,hoveredElement:null,editingId:null,relativeTop:null,pmPos:null,pmNode:null}))};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[i]),(0,N.useEffect)(()=>(e.on("commentCreated",r=>{t.updateComments(e,[...n,r]),i(e=>({...e,editingId:r.id,hoveredElement:document.querySelector(`[data-comment-id="${r.id}"]`)}))}),()=>{e.off("commentCreated")}),[e,n,t,i]);let o=n.find(e=>e.id===r.hoveredId||e.id===r.editingId);return M.j.jsxs(B5,{className:"h-full w-0 absolute top-0 right-0 oracle-comment-handler",children:[o&&M.j.jsx(Kg,{onDelete:()=>{e.commands.unsetComment(o.id);let r=n.filter(e=>e.id!==o.id);t.updateComments(e,r),i(e=>({...e,editingId:null}))},comment:o,anchorEl:r.hoveredElement,isEditing:r.editingId===o.id,onUpdate:r=>{t.updateComments(e,n.map(e=>e.id===r.id?r:e))}}),M.j.jsx("div",{className:"comment-ramp h-full absolute -right-2 top-0",children:r.hoveredElement&&!r.editingId&&!r.hoveredId&&M.j.jsx(en,{className:"comment-icon absolute w-5 left-2 cursor-pointer text-gray-400 hover:scale-110 hover:text-gray-500 transition-none",style:{top:`${r.relativeTop}px`},onClick:()=>{r.pmPos&&r.pmNode&&e.chain().setNodeSelection(r.pmPos.inside).addComment({id:(0,_.g)(),content:"",user:localStorage.getItem("user")}).run()}})})]})}function Kb(){let{editor:e}=B0(),{commentManager:t}=(0,N.useContext)(Um);return e&&t?M.j.jsx(Ky,{editor:e,commentManager:t}):null}let Kv=Bj.create({name:"oracle-comment-handler",group:"block",parseHTML:()=>[{tag:"oracle-comment-handler"}],renderHTML:({HTMLAttributes:e})=>["oracle-comment-handler",$C(e)],addNodeView:()=>B7(Kb),addOptions:()=>({HTMLAttributes:{class:"oracle-comment-handler"}}),addStorage:()=>({comments:[]}),addCommands:()=>({addComment:e=>({tr:t,chain:n})=>{let{$from:r,$to:i}=t.selection,o=t.mapping.map(r.pos);if(o!==t.mapping.map(i.pos))return n().setComment(e.id).run(),n().setTextSelection(o).command(({editor:t})=>(t.emit("commentCreated",e),!0)).run(),!0}})}),Kx=[GO,Xp.configure({resizable:!0}),Xm,Xg,Xy,Kv,Kh.configure({HTMLAttributes:{class:"oracle-report-comment"}}),Ku],Kw=[GO,Xp.configure({resizable:!0}),Xm,Xg,Xy,Kf,Km,Kh.configure({HTMLAttributes:{class:"oracle-report-comment"}}),Ku],Kk=TK(async(e,t,n,r,i,o)=>{if(!(!n||!r))try{await Promise.all([Wy(e,n,r,i,o),Wp(e,n,r,i,null==t?void 0:t.storage.markdown.getMarkdown())])}catch(e){console.error("Error updating comments:",e)}},500),KO=(e,t,n,r,i,o)=>{t.storage["oracle-comment-handler"].comments=o,Kk(e,t,n,r,i,o)},KS=({apiEndpoint:e,reportId:t,projectName:n,token:r,initialComments:i})=>{let o=i,s=[];return{subscribeToCommentUpdates:e=>(s.push(e),function(){s=s.filter(t=>t!==e)}),getComments:()=>o,updateComments:(i,a)=>{KO(e,i,t,n,r,o=a),s.forEach(e=>e())}}},KC={table_csv:"Aggregated data",fetched_table_csv:"Fetched data",anomalies_csv:"Anomalies data"},KT=(e,t,n)=>{let r=new Blob([e],{type:n}),i=URL.createObjectURL(r),o=document.createElement("a");o.href=i,o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)},KA=async(e,t,n,r,i,o)=>{try{null==o||o(!0);let e=await fetch(`${n}/oracle/export_podcast`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({db_name:r,report_id:parseInt(t),token:i})});if(!e.ok)throw Error(`Error exporting podcast: ${e.statusText}`);let s=await e.json();KT(s.transcript,`podcast-transcript-${t}.txt`,"text/plain")}catch(e){throw console.error("Error exporting podcast:",e),e}finally{null==o||o(!1)}},KE=(e,t="report.md")=>{KT(Wd(e),t,"text/markdown")},KM=async(e,t="report.pdf")=>{let n=Wd(e),r=await Of.parse(n),i=document.createElement("div");i.innerHTML=r,i.style.position="absolute",i.style.left="-9999px",i.style.top="-9999px",i.style.width="800px",i.classList.add("prose","prose-base"),document.body.appendChild(i);try{let e=window.open("","_blank");if(!e)throw Error("Could not open print window");let n=e.document;n.write(`
      <html>
        <head>
          <title>${t}</title>
          <style>
            body {
              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
              line-height: 1.6;
              color: #333;
              max-width: 800px;
              margin: 0 auto;
              padding: 20px;
            }
            h1, h2, h3, h4, h5, h6 {
              margin-top: 1.5em;
              margin-bottom: 0.5em;
              font-weight: 600;
            }
            h1 { font-size: 2em; }
            h2 { font-size: 1.5em; }
            h3 { font-size: 1.25em; }
            p { margin: 1em 0; }
            ul, ol { padding-left: 2em; }
            blockquote {
              border-left: 4px solid #ddd;
              padding-left: 1em;
              color: #666;
              margin: 1em 0;
            }
            code {
              font-family: Menlo, Monaco, 'Courier New', monospace;
              background-color: #f5f5f5;
              padding: 0.2em 0.4em;
              border-radius: 3px;
              font-size: 0.9em;
            }
            pre {
              background-color: #f5f5f5;
              padding: 1em;
              border-radius: 5px;
              overflow-x: auto;
            }
            pre code {
              background-color: transparent;
              padding: 0;
            }
            table {
              border-collapse: collapse;
              width: 100%;
              margin: 1em 0;
            }
            th, td {
              text-align: left;
              padding: 8px;
              border-bottom: 1px solid #ddd;
            }
            th {
              background-color: #f5f5f5;
              font-weight: 600;
            }
            img {
              max-width: 100%;
              height: auto;
            }
            a {
              color: #0366d6;
              text-decoration: none;
            }
            /* Print-specific styles */
            @media print {
              /* General print settings */
              body {
                padding: 0;
                margin: 0;
              }
              
              /* Hide URL, date, and page numbers */
              @page {
                margin: 1cm;
                size: auto;
              }
              
              /* Chrome, Safari, Edge */
              @page {
                size: auto;
                margin: 5mm 10mm;
                margin-header: 0;
                margin-footer: 0;
              }
              
              /* Hide header and footer completely */
              html {
                -webkit-print-color-adjust: exact !important;
              }
              
              /* Hide any browser-specific headers and footers */
              body {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
              }
            }
          </style>
        </head>
        <body>
          ${r}
          
          <script>
            // This script runs in the print window to assist with print settings
            document.addEventListener('DOMContentLoaded', function() {
              // Add a small delay for browsers to process the content
              setTimeout(function() {
                // Some additional print settings via script
                const style = document.createElement('style');
                style.textContent = 
                  "@media print {" +
                    "/* More specific fixes for different browsers */" +
                    "body::before, body::after { display: none !important; }" +
                    "header, footer { display: none !important; }" +
                    
                    "/* Ensure our content is visible */" +
                    "body { -webkit-print-color-adjust: exact !important; }" +
                  "}";
                document.head.appendChild(style);
              }, 100);
            });
          </script>
        </body>
      </html>
    `),n.close(),setTimeout(()=>{e.matchMedia&&e.matchMedia("print").addEventListener("change",function(t){t.matches||setTimeout(()=>e.close(),100)}),e.print()},500)}finally{document.body.removeChild(i)}},KN=(e=new Date)=>e.toISOString().replace("Z","");function K_({onClose:e}){let{commentManager:t}=(0,N.useContext)(Um),n=(0,N.useSyncExternalStore)((null==t?void 0:t.subscribeToCommentUpdates)||(()=>()=>{}),(null==t?void 0:t.getComments)||(()=>[]));return M.j.jsxs("div",{className:"w-64 h-full flex flex-col",children:[M.j.jsx("div",{className:"h-[3.5rem] invisible"}),M.j.jsxs("div",{className:"flex-1 border-l border-gray-200 dark:border-gray-700 overflow-y-auto bg-white dark:bg-gray-800 shadow-lg",children:[M.j.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:M.j.jsxs("div",{className:"flex items-center justify-between",children:[M.j.jsxs("div",{className:"flex items-center gap-2",children:[M.j.jsx(er,{className:"w-5 h-5"}),M.j.jsx("h2",{className:"text-lg font-semibold",children:"Comments"}),M.j.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",n.length,")"]})]}),M.j.jsx(M.D,{variant:"secondary",onClick:e,className:"hover:bg-gray-100 dark:hover:bg-gray-700 p-1",children:M.j.jsx(M.X,{className:"w-5 h-5"})})]})}),M.j.jsx("div",{className:"p-4",children:0===n.length?M.j.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No comments yet"}):M.j.jsx("div",{className:"space-y-4",children:n.map(e=>M.j.jsxs("div",{className:"p-3 rounded-lg bg-gray-50 dark:bg-gray-700",children:[e.user&&M.j.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e.user}),M.j.jsx("div",{className:(0,M.t)("text-sm text-gray-600 dark:text-gray-300",!e.content&&"text-gray-300"),children:e.content||"Blank comment"})]},e.id))})})]})]})}let Kj=({onDelete:e=()=>{}})=>{let[t,n]=(0,N.useState)(!1),[r,i]=(0,N.useState)(!1),o=(0,N.useContext)(M.a),{apiEndpoint:s,reportId:a,projectName:l,token:c,commentManager:u,isLoading:h,setIsLoading:d}=(0,N.useContext)(Um),f=(0,N.useRef)(null),[p,m]=(0,N.useState)(null),g=(0,N.useSyncExternalStore)((null==u?void 0:u.subscribeToCommentUpdates)||(()=>()=>{}),(null==u?void 0:u.getComments)||(()=>[])),{editor:y}=B0(),b=(0,N.useRef)({});(0,N.useEffect)(()=>{if(g&&g.length>0){let e={};g.forEach(t=>{e[t.id]={id:t.id,commentContent:t.content,user:t.user,htmlSnippet:"",commentRelevantText:t.content}}),b.current=e}},[g]);let v=null==p?void 0:p.startsWith("Revision in progress"),x=()=>{b.current={};let e=null==y?void 0:y.state.doc;e&&(e.nodesBetween(0,e.content.size,(e,t,n)=>{var r;for(let n of e.marks)if("comment"===n.type.name){let i=t+e.textContent.length,o=n.attrs.commentId,s=g.find(e=>e.id===o);if(!s)continue;let a=!1,l=0,c=e,u=t;for(;!a&&l<10&&c;){y.commands.setNodeSelection(u);let e=y.state.selection.$from.parent;"doc"===e.type.name?a=!0:(c=e,u=null==(r=y.state.selection)?void 0:r.from),y.commands.selectParentNode(),l++}b.current[o]?(b.current[o].topParent=c,b.current[o].topParentPos=u,t<b.current[o].startPos&&(b.current[o].startPos=t),i>b.current[o].endPos&&(b.current[o].endPos=i)):b.current[o]={id:o,topParent:c,topParentPos:u,htmlSnippet:"",commentContent:s.content,commentRelevantText:"",startPos:t,endPos:i,user:s.user}}return!0}),Object.values(b.current).forEach(e=>{let t="",n=(t="text"===e.topParent.type.name?"<span class='oracle-report-comment' data-comment-id='temp'>"+e.topParent.textContent+"</span>":"recommendationTitle"===e.topParent.type.name?"## <span class='oracle-report-comment' data-comment-id='temp'>"+e.topParent.textContent+"</span>":'<span class="oracle-report-comment" data-comment-id="temp">'+y.storage.markdown.serializer.serialize(e.topParent)+"</span>").replace(/<span[^>]*>/g,"").replace(/<\/span>/g,"");e.commentRelevantText=n,e.htmlSnippet=t}))},[w,k]=(0,N.useState)(!1);if(!y)return null;let[O,S]=(0,N.useState)(!1),C=(0,N.useRef)(null);return(0,N.useEffect)(()=>{let e=e=>{C.current&&!C.current.contains(e.target)&&S(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),M.j.jsxs("div",{className:"flex flex-col",children:[h&&M.j.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:M.j.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-5 flex flex-col items-center shadow-lg",children:[M.j.jsx("div",{className:"w-12 h-12 border-t-4 border-blue-500 border-solid rounded-full animate-spin mb-4"}),M.j.jsx("p",{className:"text-gray-800 dark:text-gray-200 font-medium",children:"Generating podcast transcript..."}),M.j.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-2",children:"This may take a minute, please wait."})]})}),M.j.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b dark:border-gray-700",children:[M.j.jsx(M.D,{variant:"danger",onClick:()=>k(!0),children:"Delete"}),M.j.jsxs("div",{className:"relative flex gap-2",children:[M.j.jsxs("div",{className:"relative",children:[M.j.jsx(M.D,{variant:"secondary",onClick:()=>{x(),i(!r)},className:r?"bg-gray-100 dark:bg-gray-700":"",children:M.j.jsx(er,{className:"w-5 h-5"})}),g.length>0&&M.j.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center",children:g.length})]}),M.j.jsxs("div",{className:"relative",ref:C,children:[M.j.jsx(M.D,{variant:"secondary",onClick:()=>S(!O),className:O?"bg-gray-100 dark:bg-gray-700":"",children:M.j.jsx(M.ad,{className:"w-5 h-5"})}),O&&M.j.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg z-50 border dark:border-gray-700",children:M.j.jsxs("div",{className:"py-1",children:[M.j.jsxs("button",{onClick:()=>{y&&(KE(y.storage.markdown.getMarkdown(),`report-${a}.md`),S(!1))},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center",children:[M.j.jsx(J,{className:"w-4 h-4 mr-2"}),"Export as Markdown"]}),M.j.jsxs("button",{onClick:()=>{y&&(KM(y.storage.markdown.getMarkdown(),`report-${a}.pdf`),S(!1))},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center",children:[M.j.jsx(J,{className:"w-4 h-4 mr-2"}),"Export as PDF"]}),M.j.jsxs("button",{onClick:()=>{if(y)try{let e=y.storage.markdown.getMarkdown();S(!1),KA(e,a,s,l,c,d).catch(e=>{o.error("Failed to export podcast. Please try again."),console.error(e)})}catch(e){o.error("Failed to export podcast. Please try again."),console.error(e)}},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center",children:[M.j.jsx(ei,{className:"w-4 h-4 mr-2"}),"Export as Podcast"]})]})})]})]}),M.j.jsx(M.e,{open:w,onOk:()=>{e(a,l),k(!1)},onCancel:()=>k(!1),okText:"Yes",okVariant:"danger",children:"Are you sure?"})]}),v&&M.j.jsxs("div",{className:"w-96 my-4 rounded-full border dark:border-none mx-auto bg-gray-50 dark:bg-gray-600 text-sm text-gray-600 dark:text-gray-300 p-4 flex flex-row shadow-md items-center",children:[M.j.jsx(M.ah,{className:"min-w-6 mr-2 text-blue-500 dark:text-blue-400"}),M.j.jsx("p",{children:"This report is currently being revised. This page will refresh when the revision completes."})]}),r&&M.j.jsx("div",{className:"fixed right-0 top-0 bottom-0 z-[100]",children:M.j.jsx(K_,{onClose:()=>i(!1)})}),p&&M.j.jsx("div",{className:`fixed bottom-6 ${r?"right-72":"right-6"} z-[110] transition-all duration-200`,children:M.j.jsx(M.D,{variant:"primary",onClick:()=>{x(),n(!0)},disabled:!p||v,className:"shadow-lg hover:shadow-xl transition-shadow",children:"Submit for revision"})}),M.j.jsx(M.e,{rootClassNames:"w-full z-10",open:t,onCancel:()=>n(!1),onOk:()=>{var e;try{Wb(s,a,l,c,null==(e=f.current)?void 0:e.value,g.map(e=>({relevant_text:e.content,comment_text:e.content}))).then(e=>{n(!1)}).catch(e=>{console.error(e),o.error(e.message)})}catch(e){o.error(e.message)}},title:"Revise report",okText:"Submit",className:"dark:bg-gray-800 dark:text-gray-200",contentClassNames:"overflow-auto",children:M.j.jsxs("div",{className:"flex flex-row flex-wrap gap-4",children:[Object.values(b.current).map((e,t)=>M.j.jsxs("div",{className:"revise-modal-comment-container w-full",children:[M.j.jsx("div",{className:"revise-modal-header",children:"Highlighted text"}),M.j.jsx(B1,{content:e.htmlSnippet,extensions:Kw,immediatelyRender:!1,editable:!1,editorProps:{attributes:{class:"revise-modal-highlight prose prose-sm dark:prose-invert focus:outline-none *:cursor-default"}}}),M.j.jsx("div",{className:"revise-modal-header",children:"Your comment"}),M.j.jsx("textarea",{className:"text-sm revise-modal-comment-text w-full h-full focus:ring-0 border-none outline-none",defaultValue:e.commentContent,placeholder:"Type your comment here",onChange:t=>{b.current[e.id].commentContent=t.target.value,null==u||u.updateComments(y,Object.values(b.current).map(e=>({id:e.id,content:e.commentContent,user:e.user})))}})]},e.id)),M.j.jsxs("div",{className:"w-full revise-modal-comment-container overflow-hidden",children:[M.j.jsx("div",{className:"revise-modal-header",children:"General comments"}),M.j.jsx(M.V,{autoResize:!0,placeholder:"Add general comments here",rootClassNames:"border-none",textAreaClassNames:"rounded-none ring-0",ref:f,textAreaHtmlProps:{resize:"none"}})]})]})})]})}}}]);