"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[233],{6661:(e,t,r)=>{let n,i,s,o,a,l;r.d(t,{C:()=>hc,N:()=>ks,O:()=>PT,P:()=>TV,Q:()=>RX,R:()=>Pc,S:()=>TH});var c,h,u,d,f,p,m,g,y,b,v,x,w,k,O,S,C,T=r(5985),A=r(4109),M=r(5044),E=r(5775),N=r(7015),_=r(4115).Buffer,j=Object.defineProperty,D=(e,t,r)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,R=(e,t,r)=>D(e,"symbol"!=typeof t?t+"":t,r);let P=(0,T.f)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),I=(0,T.f)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),z=(0,T.f)("CaseSensitive",[["path",{d:"m3 15 4-8 4 8",key:"1vwr6u"}],["path",{d:"M4 13h6",key:"1r9ots"}],["circle",{cx:"18",cy:"12",r:"3",key:"1kchzo"}],["path",{d:"M21 9v6",key:"anns31"}]]),L=(0,T.f)("ChartBar",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 16h8",key:"srdodz"}],["path",{d:"M7 11h12",key:"127s9w"}],["path",{d:"M7 6h3",key:"w9rmul"}]]),q=(0,T.f)("ChartColumnIncreasing",[["path",{d:"M13 17V9",key:"1fwyjl"}],["path",{d:"M18 17V5",key:"sfb6ij"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),$=(0,T.f)("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),B=(0,T.f)("ChartNoAxesCombined",[["path",{d:"M12 16v5",key:"zza2cw"}],["path",{d:"M16 14v7",key:"1g90b9"}],["path",{d:"M20 10v11",key:"1iqoj0"}],["path",{d:"m22 3-8.646 8.646a.5.5 0 0 1-.708 0L9.354 8.354a.5.5 0 0 0-.707 0L2 15",key:"1fw8x9"}],["path",{d:"M4 18v3",key:"1yp0dc"}],["path",{d:"M8 14v7",key:"n3cwzv"}]]),F=(0,T.f)("ChartScatter",[["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}],["circle",{cx:"18.5",cy:"5.5",r:".5",fill:"currentColor",key:"lysivs"}],["circle",{cx:"11.5",cy:"11.5",r:".5",fill:"currentColor",key:"byv1b8"}],["circle",{cx:"7.5",cy:"16.5",r:".5",fill:"currentColor",key:"nkw3mc"}],["circle",{cx:"17.5",cy:"14.5",r:".5",fill:"currentColor",key:"1gjh6j"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}]]),Q=(0,T.f)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),V=(0,T.f)("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]),W=(0,T.f)("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]),U=(0,T.f)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),G=(0,T.f)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),X=(0,T.f)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Y=(0,T.f)("MessageSquarePlus",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]]),Z=(0,T.f)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),J=(0,T.f)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),K=(0,T.f)("Move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]),ee=(0,T.f)("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),et=(0,T.f)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),er=(0,T.f)("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),en=(0,T.f)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),ei=(0,T.f)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),es=(0,T.f)("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),eo=(0,T.f)("Telescope",[["path",{d:"m10.065 12.493-6.18 1.318a.934.934 0 0 1-1.108-.702l-.537-2.15a1.07 1.07 0 0 1 .691-1.265l13.504-4.44",key:"k4qptu"}],["path",{d:"m13.56 11.747 4.332-.924",key:"19l80z"}],["path",{d:"m16 21-3.105-6.21",key:"7oh9d"}],["path",{d:"M16.485 5.94a2 2 0 0 1 1.455-2.425l1.09-.272a1 1 0 0 1 1.212.727l1.515 6.06a1 1 0 0 1-.727 1.213l-1.09.272a2 2 0 0 1-2.425-1.455z",key:"m7xp4m"}],["path",{d:"m6.158 8.633 1.114 4.456",key:"74o979"}],["path",{d:"m8 21 3.105-6.21",key:"1fvxut"}],["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}]]),ea=(0,T.f)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),el=(0,T.f)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),ec=[],eh=[];function eu(e){return e>=127462&&e<=127487}function ed(e,t,r){if(t==e.length)return t;t&&ep(e.charCodeAt(t))&&em(e.charCodeAt(t-1))&&t--;let n=ef(e,t);for(t+=eg(n);t<e.length;){let i=ef(e,t);if(8205==n||8205==i||r&&function(e){if(e<768)return!1;for(let t=0,r=ec.length;;){let n=t+r>>1;if(e<ec[n])r=n;else{if(!(e>=eh[n]))return!0;t=n+1}if(t==r)return!1}}(i))t+=eg(i),n=i;else if(eu(i)){let r=0,n=t-2;for(;n>=0&&eu(ef(e,n));)r++,n-=2;if(r%2==0)break;t+=2}else break}return t}function ef(e,t){let r=e.charCodeAt(t);if(!em(r)||t+1==e.length)return r;let n=e.charCodeAt(t+1);return ep(n)?(r-55296<<10)+(n-56320)+65536:r}function ep(e){return e>=56320&&e<57344}function em(e){return e>=55296&&e<56320}function eg(e){return e<65536?1:2}(()=>{let e="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let t=0,r=0;t<e.length;t++)(t%2?eh:ec).push(r+=e[t])})();let ey=class e{lineAt(e){if(e<0||e>this.length)throw RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){[e,t]=eC(this,e,t);let n=[];return this.decompose(0,e,n,2),r.length&&r.decompose(0,r.length,n,3),this.decompose(t,this.length,n,1),ev.from(n,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=eC(this,e,t);let r=[];return this.decompose(e,t,r,0),ev.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),n=new ew(this),i=new ew(e);for(let e=t,s=t;;){if(n.next(e),i.next(e),e=0,n.lineBreak!=i.lineBreak||n.done!=i.done||n.value!=i.value)return!1;if(s+=n.value.length,n.done||s>=r)return!0}}iter(e=1){return new ew(this,e)}iterRange(e,t=this.length){return new ek(this,e,t)}iterLines(e,t){let r;if(null==e)r=this.iter();else{null==t&&(t=this.lines+1);let n=this.line(e).from;r=this.iterRange(n,Math.max(n,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new eO(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(t){if(0==t.length)throw RangeError("A document must have at least one line");return 1!=t.length||t[0]?t.length<=32?new eb(t):ev.from(eb.split(t,[])):e.empty}};class eb extends ey{constructor(e,t=function(e){let t=-1;for(let r of e)t+=r.length+1;return t}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,n){for(let i=0;;i++){let s=this.text[i],o=n+s.length;if((t?r:o)>=e)return new eS(n,o,r,s);n=o+1,r++}}decompose(e,t,r,n){var i;let s=e<=0&&t>=this.length?this:new eb((i=this.text,ex(i,[""],e,t)),Math.min(t,this.length)-Math.max(0,e));if(1&n){let e=r.pop(),t=ex(s.text,e.text.slice(),0,s.length);if(t.length<=32)r.push(new eb(t,e.length+s.length));else{let e=t.length>>1;r.push(new eb(t.slice(0,e)),new eb(t.slice(e)))}}else r.push(s)}replace(e,t,r){var n,i;if(!(r instanceof eb))return super.replace(e,t,r);[e,t]=eC(this,e,t);let s=ex(this.text,ex(r.text,(n=this.text,i=0,ex(n,[""],0,e))),t),o=this.length+r.length-(t-e);return s.length<=32?new eb(s,o):ev.from(eb.split(s,[]),o)}sliceString(e,t=this.length,r=`
`){[e,t]=eC(this,e,t);let n="";for(let i=0,s=0;i<=t&&s<this.text.length;s++){let o=this.text[s],a=i+o.length;i>e&&s&&(n+=r),e<a&&t>i&&(n+=o.slice(Math.max(0,e-i),t-i)),i=a+1}return n}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],n=-1;for(let i of e)r.push(i),n+=i.length+1,32==r.length&&(t.push(new eb(r,n)),r=[],n=-1);return n>-1&&t.push(new eb(r,n)),t}}let ev=class e extends ey{constructor(e,t){for(let r of(super(),this.children=e,this.length=t,this.lines=0,e))this.lines+=r.lines}lineInner(e,t,r,n){for(let i=0;;i++){let s=this.children[i],o=n+s.length,a=r+s.lines-1;if((t?a:o)>=e)return s.lineInner(e,t,r,n);n=o+1,r=a+1}}decompose(e,t,r,n){for(let i=0,s=0;s<=t&&i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e<=a&&t>=s){let i=n&(+(s<=e)|2*(a>=t));s>=e&&a<=t&&!i?r.push(o):o.decompose(e-s,t-s,r,i)}s=a+1}}replace(t,r,n){if([t,r]=eC(this,t,r),n.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(t>=s&&r<=a){let l=o.replace(t-s,r-s,n),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let s=this.children.slice();return s[i]=l,new e(s,this.length-(r-t)+n.length)}return super.replace(s,a,l)}s=a+1}return super.replace(t,r,n)}sliceString(e,t=this.length,r=`
`){[e,t]=eC(this,e,t);let n="";for(let i=0,s=0;i<this.children.length&&s<=t;i++){let o=this.children[i],a=s+o.length;s>e&&i&&(n+=r),e<a&&t>s&&(n+=o.sliceString(e-s,t-s,r)),s=a+1}return n}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(t,r){if(!(t instanceof e))return 0;let n=0,[i,s,o,a]=r>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;i+=r,s+=r){if(i==o||s==a)return n;let e=this.children[i],l=t.children[s];if(e!=l)return n+e.scanIdentical(l,r);n+=e.length+1}}static from(t,r=t.reduce((e,t)=>e+t.length+1,-1)){let n=0;for(let e of t)n+=e.lines;if(n<32){let e=[];for(let r of t)r.flatten(e);return new eb(e,r)}let i=Math.max(32,n>>5),s=i<<1,o=i>>1,a=[],l=0,c=-1,h=[];function u(){0!=l&&(a.push(1==h.length?h[0]:e.from(h,c)),c=-1,l=h.length=0)}for(let r of t)!function t(r){let n;if(r.lines>s&&r instanceof e)for(let e of r.children)t(e);else r.lines>o&&(l>o||!l)?(u(),a.push(r)):r instanceof eb&&l&&(n=h[h.length-1])instanceof eb&&r.lines+n.lines<=32?(l+=r.lines,c+=r.length+1,h[h.length-1]=new eb(n.text.concat(r.text),n.length+1+r.length)):(l+r.lines>i&&u(),l+=r.lines,c+=r.length+1,h.push(r))}(r);return u(),1==a.length?a[0]:new e(a,r)}};function ex(e,t,r=0,n=1e9){for(let i=0,s=0,o=!0;s<e.length&&i<=n;s++){let a=e[s],l=i+a.length;l>=r&&(l>n&&(a=a.slice(0,n-i)),i<r&&(a=a.slice(r-i)),o?(t[t.length-1]+=a,o=!1):t.push(a)),i=l+1}return t}ey.empty=new eb([""],0);class ew{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof eb?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,n=this.nodes[r],i=this.offsets[r],s=i>>1,o=n instanceof eb?n.text.length:n.children.length;if(s==(t>0?o:0)){if(0==r)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&i)==(t>0?0:1)){if(this.offsets[r]+=t,0==e)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof eb){let i=n.text[s+(t<0?-1:0)];if(this.offsets[r]+=t,i.length>Math.max(0,e))return this.value=0==e?i:t>0?i.slice(e):i.slice(0,i.length-e),this;e-=i.length}else{let i=n.children[s+(t<0?-1:0)];e>i.length?(e-=i.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(i),this.offsets.push(t>0?1:(i instanceof eb?i.text.length:i.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class ek{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new ew(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*t,this.value=n.length<=r?n:t<0?n.slice(n.length-r):n.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class eO{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:n}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}"u">typeof Symbol&&(ey.prototype[Symbol.iterator]=function(){return this.iter()},ew.prototype[Symbol.iterator]=ek.prototype[Symbol.iterator]=eO.prototype[Symbol.iterator]=function(){return this});let eS=class{constructor(e,t,r,n){this.from=e,this.to=t,this.number=r,this.text=n}get length(){return this.to-this.from}};function eC(e,t,r){return[t=Math.max(0,Math.min(e.length,t)),Math.max(t,Math.min(e.length,r))]}function eT(e,t,r=!0,n=!0){return function(e,t,r=!0,n=!0){return(r?ed:function(e,t,r){for(;t>0;){let n=ed(e,t-2,r);if(n<t)return n;t--}return 0})(e,t,n)}(e,t,r,n)}function eA(e,t){let r=e.charCodeAt(t);if(!(r>=55296&&r<56320)||t+1==e.length)return r;let n=e.charCodeAt(t+1);return n>=56320&&n<57344?(r-55296<<10)+(n-56320)+65536:r}function eM(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(((e-=65536)>>10)+55296,(1023&e)+56320)}function eE(e){return e<65536?1:2}let eN=/\r\n?|\n/;var e_=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(e_||(e_={}));class ej{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,n=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];s<0?(e(r,n,i),n+=i):n+=s,r+=i}}iterChangedRanges(e,t=!1){eI(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],n=this.sections[t++];n<0?e.push(r,n):e.push(n,r)}return new ej(e)}composeDesc(e){return this.empty?e:e.empty?this:eL(this,e)}mapDesc(e,t=!1){return e.empty?this:ez(this,e,t)}mapPos(e,t=-1,r=e_.Simple){let n=0,i=0;for(let s=0;s<this.sections.length;){let o=this.sections[s++],a=this.sections[s++],l=n+o;if(a<0){if(l>e)return i+(e-n);i+=o}else{if(r!=e_.Simple&&l>=e&&(r==e_.TrackDel&&n<e&&l>e||r==e_.TrackBefore&&n<e||r==e_.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!o)return e==n||t<0?i:i+a;i+=a}n=l}if(e>n)throw RangeError(`Position ${e} is out of range for changeset of length ${n}`);return i}touchesRange(e,t=e){for(let r=0,n=0;r<this.sections.length&&n<=t;){let i=this.sections[r++],s=this.sections[r++],o=n+i;if(s>=0&&n<=t&&o>=e)return!(n<e)||!(o>t)||"cover";n=o}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+r+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(e=>"number"!=typeof e))throw RangeError("Invalid JSON representation of ChangeDesc");return new ej(e)}static create(e){return new ej(e)}}class eD extends ej{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw RangeError("Applying change set to a document with the wrong length");return eI(this,(t,r,n,i,s)=>e=e.replace(n,n+(r-t),s),!1),e}mapDesc(e,t=!1){return ez(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let n=0,i=0;n<t.length;n+=2){let s=t[n],o=t[n+1];if(o>=0){t[n]=o,t[n+1]=s;let a=n>>1;for(;r.length<a;)r.push(ey.empty);r.push(s?e.slice(i,i+s):ey.empty)}i+=s}return new eD(t,r)}compose(e){return this.empty?e:e.empty?this:eL(this,e,!0)}map(e,t=!1){return e.empty?this:ez(this,e,t,!0)}iterChanges(e,t=!1){eI(this,e,t)}get desc(){return ej.create(this.sections)}filter(e){let t=[],r=[],n=[],i=new eq(this);e:for(let s=0,o=0;;){let a=s==e.length?1e9:e[s++];for(;o<a||o==a&&0==i.len;){if(i.done)break e;let e=Math.min(i.len,a-o);eR(n,e,-1);let s=-1==i.ins?-1:0==i.off?i.ins:0;eR(t,e,s),s>0&&eP(r,t,i.text),i.forward(e),o+=e}let l=e[s++];for(;o<l;){if(i.done)break e;let e=Math.min(i.len,l-o);eR(t,e,-1),eR(n,e,-1==i.ins?-1:0==i.off?i.ins:0),i.forward(e),o+=e}}return{changes:new eD(t,r),filtered:ej.create(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],n=this.sections[t+1];n<0?e.push(r):0==n?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let n=[],i=[],s=0,o=null;function a(e=!1){if(!e&&!n.length)return;s<t&&eR(n,t-s,-1);let r=new eD(n,i);o=o?o.compose(r.map(o)):r,n=[],i=[],s=0}return function e(l){if(Array.isArray(l))for(let t of l)e(t);else if(l instanceof eD){if(l.length!=t)throw RangeError(`Mismatched change set length (got ${l.length}, expected ${t})`);a(),o=o?o.compose(l.map(o)):l}else{let{from:e,to:o=e,insert:c}=l;if(e>o||e<0||o>t)throw RangeError(`Invalid change range ${e} to ${o} (in doc of length ${t})`);let h=c?"string"==typeof c?ey.of(c.split(r||eN)):c:ey.empty,u=h.length;if(e==o&&0==u)return;e<s&&a(),e>s&&eR(n,e-s,-1),eR(n,o-e,u),eP(i,n,h),s=o}}(e),a(!o),o}static empty(e){return new eD(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let n=0;n<e.length;n++){let i=e[n];if("number"==typeof i)t.push(i,-1);else{if(!Array.isArray(i)||"number"!=typeof i[0]||i.some((e,t)=>t&&"string"!=typeof e))throw RangeError("Invalid JSON representation of ChangeSet");if(1==i.length)t.push(i[0],0);else{for(;r.length<n;)r.push(ey.empty);r[n]=ey.of(i.slice(1)),t.push(i[0],r[n].length)}}}return new eD(t,r)}static createSet(e,t){return new eD(e,t)}}function eR(e,t,r,n=!1){if(0==t&&r<=0)return;let i=e.length-2;i>=0&&r<=0&&r==e[i+1]?e[i]+=t:i>=0&&0==t&&0==e[i]?e[i+1]+=r:n?(e[i]+=t,e[i+1]+=r):e.push(t,r)}function eP(e,t,r){if(0==r.length)return;let n=t.length-2>>1;if(n<e.length)e[e.length-1]=e[e.length-1].append(r);else{for(;e.length<n;)e.push(ey.empty);e.push(r)}}function eI(e,t,r){let n=e.inserted;for(let i=0,s=0,o=0;o<e.sections.length;){let a=e.sections[o++],l=e.sections[o++];if(l<0)i+=a,s+=a;else{let c=i,h=s,u=ey.empty;for(;c+=a,h+=l,l&&n&&(u=u.append(n[o-2>>1])),!(r||o==e.sections.length||e.sections[o+1]<0);)a=e.sections[o++],l=e.sections[o++];t(i,c,s,h,u),i=c,s=h}}}function ez(e,t,r,n=!1){let i=[],s=n?[]:null,o=new eq(e),a=new eq(t);for(let e=-1;;){if(o.done&&a.len||a.done&&o.len)throw Error("Mismatched change set lengths");if(-1==o.ins&&-1==a.ins){let e=Math.min(o.len,a.len);eR(i,e,-1),o.forward(e),a.forward(e)}else if(a.ins>=0&&(o.ins<0||e==o.i||0==o.off&&(a.len<o.len||a.len==o.len&&!r))){let t=a.len;for(eR(i,a.ins,-1);t;){let r=Math.min(o.len,t);o.ins>=0&&e<o.i&&o.len<=r&&(eR(i,0,o.ins),s&&eP(s,i,o.text),e=o.i),o.forward(r),t-=r}a.next()}else if(o.ins>=0){let t=0,r=o.len;for(;r;)if(-1==a.ins){let e=Math.min(r,a.len);t+=e,r-=e,a.forward(e)}else if(0==a.ins&&a.len<r)r-=a.len,a.next();else break;eR(i,t,e<o.i?o.ins:0),s&&e<o.i&&eP(s,i,o.text),e=o.i,o.forward(o.len-r)}else{if(o.done&&a.done)return s?eD.createSet(i,s):ej.create(i);throw Error("Mismatched change set lengths")}}}function eL(e,t,r=!1){let n=[],i=r?[]:null,s=new eq(e),o=new eq(t);for(let e=!1;;){if(s.done&&o.done)return i?eD.createSet(n,i):ej.create(n);if(0==s.ins)eR(n,s.len,0,e),s.next();else if(0!=o.len||o.done){if(s.done||o.done)throw Error("Mismatched change set lengths");{let t=Math.min(s.len2,o.len),r=n.length;if(-1==s.ins){let r=-1==o.ins?-1:o.off?0:o.ins;eR(n,t,r,e),i&&r&&eP(i,n,o.text)}else -1==o.ins?(eR(n,s.off?0:s.len,t,e),i&&eP(i,n,s.textBit(t))):(eR(n,s.off?0:s.len,o.off?0:o.ins,e),i&&!o.off&&eP(i,n,o.text));e=(s.ins>t||o.ins>=0&&o.len>t)&&(e||n.length>r),s.forward2(t),o.forward(t)}}else eR(n,0,o.ins,e),i&&eP(i,n,o.text),o.next()}}class eq{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return -2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?ey.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?ey.empty:t[r].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}let e$=class e{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let e=7&this.flags;return 7==e?null:e}get goalColumn(){let e=this.flags>>6;return 0xffffff==e?void 0:e}map(t,r=-1){let n,i;return this.empty?n=i=t.mapPos(this.from,r):(n=t.mapPos(this.from,1),i=t.mapPos(this.to,-1)),n==this.from&&i==this.to?this:new e(n,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return eB.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return eB.range(this.anchor,r)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw RangeError("Invalid JSON representation for SelectionRange");return eB.range(e.anchor,e.head)}static create(t,r,n){return new e(t,r,n)}};class eB{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:eB.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new eB([this.main],0)}addRange(e,t=!0){return eB.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,eB.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw RangeError("Invalid JSON representation for EditorSelection");return new eB(e.ranges.map(e=>e$.fromJSON(e)),e.main)}static single(e,t=e){return new eB([eB.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw RangeError("A selection needs at least one range");for(let r=0,n=0;n<e.length;n++){let i=e[n];if(i.empty?i.from<=r:i.from<r)return eB.normalized(e.slice(),t);r=i.to}return new eB(e,t)}static cursor(e,t=0,r,n){return e$.create(e,e,(0==t?0:t<0?8:16)|(null==r?7:Math.min(6,r))|(n??0xffffff)<<6)}static range(e,t,r,n){let i=(r??0xffffff)<<6|(null==n?7:Math.min(6,n));return t<e?e$.create(t,e,48|i):e$.create(e,t,8*(t>e)|i)}static normalized(e,t=0){let r=e[t];e.sort((e,t)=>e.from-t.from),t=e.indexOf(r);for(let r=1;r<e.length;r++){let n=e[r],i=e[r-1];if(n.empty?n.from<=i.to:n.from<i.to){let s=i.from,o=Math.max(n.to,i.to);r<=t&&t--,e.splice(--r,2,n.anchor>n.head?eB.range(o,s):eB.range(s,o))}}return new eB(e,t)}}function eF(e,t){for(let r of e.ranges)if(r.to>t)throw RangeError("Selection points outside of document")}let eQ=0;class eV{constructor(e,t,r,n,i){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=n,this.id=eQ++,this.default=e([]),this.extensions="function"==typeof i?i(this):i}get reader(){return this}static define(e={}){return new eV(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:eH),!!e.static,e.enables)}of(e){return new eW([],this,0,e)}compute(e,t){if(this.isStatic)throw Error("Can't compute a static facet");return new eW(e,this,1,t)}computeN(e,t){if(this.isStatic)throw Error("Can't compute a static facet");return new eW(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],r=>t(r.field(e)))}}function eH(e,t){return e==t||e.length==t.length&&e.every((e,r)=>e===t[r])}class eW{constructor(e,t,r,n){this.dependencies=e,this.facet=t,this.type=r,this.value=n,this.id=eQ++}dynamicSlot(e){var t;let r=this.value,n=this.facet.compareInput,i=this.id,s=e[i]>>1,o=2==this.type,a=!1,l=!1,c=[];for(let r of this.dependencies)"doc"==r?a=!0:"selection"==r?l=!0:(null!==(t=e[r.id])&&void 0!==t?t:1)&1||c.push(e[r.id]);return{create:e=>(e.values[s]=r(e),1),update(e,t){if(a&&t.docChanged||l&&(t.docChanged||t.selection)||eG(e,c)){let t=r(e);if(o?!eU(t,e.values[s],n):!n(t,e.values[s]))return e.values[s]=t,1}return 0},reconfigure:(e,t)=>{let a,l=t.config.address[i];if(null!=l){let i=e3(t,l);if(this.dependencies.every(r=>r instanceof eV?t.facet(r)===e.facet(r):!(r instanceof eY)||t.field(r,!1)==e.field(r,!1))||(o?eU(a=r(e),i,n):n(a=r(e),i)))return e.values[s]=i,0}else a=r(e);return e.values[s]=a,1}}}}function eU(e,t,r){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1;return!0}function eG(e,t){let r=!1;for(let n of t)1&e5(e,n)&&(r=!0);return r}let eX=eV.define({static:!0});class eY{constructor(e,t,r,n,i){this.id=e,this.createF=t,this.updateF=r,this.compareF=n,this.spec=i,this.provides=void 0}static define(e){let t=new eY(eQ++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(eX).find(e=>e.field==this);return((null==t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,r)=>{let n=e.values[t],i=this.updateF(n,r);return this.compareF(n,i)?0:(e.values[t]=i,1)},reconfigure:(e,r)=>{let n=e.facet(eX),i=r.facet(eX),s;return(s=n.find(e=>e.field==this))&&s!=i.find(e=>e.field==this)?(e.values[t]=s.create(e),1):null!=r.config.address[this.id]?(e.values[t]=r.field(this),0):(e.values[t]=this.create(e),1)}}}init(e){return[this,eX.of({field:this,create:e})]}get extension(){return this}}let eZ={lowest:4,low:3,default:2,high:1,highest:0};function eJ(e){return t=>new e0(t,e)}let eK={highest:eJ(eZ.highest),high:eJ(eZ.high),default:eJ(eZ.default),low:eJ(eZ.low),lowest:eJ(eZ.lowest)};class e0{constructor(e,t){this.inner=e,this.prec=t}}class e1{of(e){return new e2(this,e)}reconfigure(e){return e1.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class e2{constructor(e,t){this.compartment=e,this.inner=t}}let e4=class e{constructor(e,t,r,n,i,s){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=n,this.staticValues=i,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(t,r,n){var i,s,o;let a,l,c=[],h=Object.create(null),u=new Map;for(let e of(i=t,s=r,o=u,a=[[],[],[],[],[]],l=new Map,function e(t,r){let n=l.get(t);if(null!=n){if(n<=r)return;let e=a[n].indexOf(t);e>-1&&a[n].splice(e,1),t instanceof e2&&o.delete(t.compartment)}if(l.set(t,r),Array.isArray(t))for(let n of t)e(n,r);else if(t instanceof e2){if(o.has(t.compartment))throw RangeError("Duplicate use of compartment in extensions");let n=s.get(t.compartment)||t.inner;o.set(t.compartment,n),e(n,r)}else if(t instanceof e0)e(t.inner,t.prec);else if(t instanceof eY)a[r].push(t),t.provides&&e(t.provides,r);else if(t instanceof eW)a[r].push(t),t.facet.extensions&&e(t.facet.extensions,eZ.default);else{let n=t.extension;if(!n)throw Error(`Unrecognized extension value in extension set (${t}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);e(n,r)}}(i,eZ.default),a.reduce((e,t)=>e.concat(t))))e instanceof eY?c.push(e):(h[e.facet.id]||(h[e.facet.id]=[])).push(e);let d=Object.create(null),f=[],p=[];for(let e of c)d[e.id]=p.length<<1,p.push(t=>e.slot(t));let m=null==n?void 0:n.config.facets;for(let e in h){let t=h[e],r=t[0].facet,i=m&&m[e]||[];if(t.every(e=>0==e.type)){if(d[r.id]=f.length<<1|1,eH(i,t))f.push(n.facet(r));else{let e=r.combine(t.map(e=>e.value));f.push(n&&r.compare(e,n.facet(r))?n.facet(r):e)}}else{for(let e of t)0==e.type?(d[e.id]=f.length<<1|1,f.push(e.value)):(d[e.id]=p.length<<1,p.push(t=>e.dynamicSlot(t)));d[r.id]=p.length<<1,p.push(e=>(function(e,t,r){let n=r.map(t=>e[t.id]),i=r.map(e=>e.type),s=n.filter(e=>!(1&e)),o=e[t.id]>>1;function a(e){let r=[];for(let t=0;t<n.length;t++){let s=e3(e,n[t]);if(2==i[t])for(let e of s)r.push(e);else r.push(s)}return t.combine(r)}return{create(e){for(let t of n)e5(e,t);return e.values[o]=a(e),1},update(e,r){if(!eG(e,s))return 0;let n=a(e);return t.compare(n,e.values[o])?0:(e.values[o]=n,1)},reconfigure(e,i){let s=eG(e,n),l=i.config.facets[t.id],c=i.facet(t);if(l&&!s&&eH(r,l))return e.values[o]=c,0;let h=a(e);return t.compare(h,c)?(e.values[o]=c,0):(e.values[o]=h,1)}}})(e,r,t))}}return new e(t,u,p.map(e=>e(d)),d,f,h)}};function e5(e,t){if(1&t)return 2;let r=t>>1,n=e.status[r];if(4==n)throw Error("Cyclic dependency between fields and/or facets");if(2&n)return n;e.status[r]=4;let i=e.computeSlot(e,e.config.dynamicSlots[r]);return e.status[r]=2|i}function e3(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}let e6=eV.define(),e7=eV.define({combine:e=>e.some(e=>e),static:!0}),e8=eV.define({combine:e=>e.length?e[0]:void 0,static:!0}),e9=eV.define(),te=eV.define(),tt=eV.define(),tr=eV.define({combine:e=>!!e.length&&e[0]});class tn{constructor(e,t){this.type=e,this.value=t}static define(){return new ti}}class ti{of(e){return new tn(this,e)}}class ts{constructor(e){this.map=e}of(e){return new to(this,e)}}class to{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new to(this.type,t)}is(e){return this.type==e}static define(e={}){return new ts(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let n of e){let e=n.map(t);e&&r.push(e)}return r}}to.reconfigure=to.define(),to.appendConfig=to.define();let ta=class e{constructor(t,r,n,i,s,o){this.startState=t,this.changes=r,this.selection=n,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,n&&eF(n,r.newLength),s.some(t=>t.type==e.time)||(this.annotations=s.concat(e.time.of(Date.now())))}static create(t,r,n,i,s,o){return new e(t,r,n,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let r=this.annotation(e.userEvent);return!!(r&&(r==t||r.length>t.length&&r.slice(0,t.length)==t&&"."==r[t.length]))}};function tl(e,t,r){var n;let i,s,o;return r?(i=t.changes,s=eD.empty(t.changes.length),o=e.changes.compose(t.changes)):(i=t.changes.map(e.changes),s=e.changes.mapDesc(t.changes,!0),o=e.changes.compose(i)),{changes:o,selection:t.selection?t.selection.map(s):null===(n=e.selection)||void 0===n?void 0:n.map(i),effects:to.mapEffects(e.effects,i).concat(to.mapEffects(t.effects,s)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function tc(e,t,r){let n=t.selection,i=tu(t.annotations);return t.userEvent&&(i=i.concat(ta.userEvent.of(t.userEvent))),{changes:t.changes instanceof eD?t.changes:eD.of(t.changes||[],r,e.facet(e8)),selection:n&&(n instanceof eB?n:eB.single(n.anchor,n.head)),effects:tu(t.effects),annotations:i,scrollIntoView:!!t.scrollIntoView}}ta.time=tn.define(),ta.userEvent=tn.define(),ta.addToHistory=tn.define(),ta.remote=tn.define();let th=[];function tu(e){return null==e?th:Array.isArray(e)?e:[e]}var td=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(td||(td={}));let tf=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;try{n=RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}let tp=class e{constructor(e,t,r,n,i,s){this.config=e,this.doc=t,this.selection=r,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=i,s&&(s._state=this);for(let e=0;e<this.config.dynamicSlots.length;e++)e5(this,e<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(null==r){if(t)throw RangeError("Field is not present in this state");return}return e5(this,r),e3(this,r)}update(...e){return function e(t,r,n){let i=tc(t,r.length?r[0]:{},t.doc.length);r.length&&!1===r[0].filter&&(n=!1);for(let e=1;e<r.length;e++){!1===r[e].filter&&(n=!1);let s=!!r[e].sequential;i=tl(i,tc(t,r[e],s?i.changes.newLength:t.doc.length),s)}let s=ta.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return function(e){let t=e.startState,r=t.facet(tt),n=e;for(let i=r.length-1;i>=0;i--){let s=r[i](e);s&&Object.keys(s).length&&(n=tl(n,tc(t,s,e.changes.newLength),!0))}return n==e?e:ta.create(t,e.changes,e.selection,n.effects,n.annotations,n.scrollIntoView)}(n?function(t){let r=t.startState,n=!0;for(let e of r.facet(e9)){let r=e(t);if(!1===r){n=!1;break}Array.isArray(r)&&(n=!0===n?r:function(e,t){let r=[];for(let n=0,i=0;;){let s,o;if(n<e.length&&(i==t.length||t[i]>=e[n]))s=e[n++],o=e[n++];else{if(!(i<t.length))return r;s=t[i++],o=t[i++]}!r.length||r[r.length-1]<s?r.push(s,o):r[r.length-1]<o&&(r[r.length-1]=o)}}(n,r))}if(!0!==n){let e,i;if(!1===n)i=t.changes.invertedDesc,e=eD.empty(r.doc.length);else{let r=t.changes.filter(n);e=r.changes,i=r.filtered.mapDesc(r.changes).invertedDesc}t=ta.create(r,e,t.selection&&t.selection.map(i),to.mapEffects(t.effects,i),t.annotations,t.scrollIntoView)}let i=r.facet(te);for(let n=i.length-1;n>=0;n--){let s=i[n](t);t=s instanceof ta?s:Array.isArray(s)&&1==s.length&&s[0]instanceof ta?s[0]:e(r,tu(s),!1)}return t}(s):s)}(this,e,!0)}applyTransaction(t){let r,n=this.config,{base:i,compartments:s}=n;for(let e of t.effects)e.is(e1.reconfigure)?(n&&(s=new Map,n.compartments.forEach((e,t)=>s.set(t,e)),n=null),s.set(e.value.compartment,e.value.extension)):e.is(to.reconfigure)?(n=null,i=e.value):e.is(to.appendConfig)&&(n=null,i=tu(i).concat(e.value));r=n?t.startState.values.slice():new e(n=e4.resolve(i,s,this),this.doc,this.selection,n.dynamicSlots.map(()=>null),(e,t)=>t.reconfigure(e,this),null).values;let o=t.startState.facet(e7)?t.newSelection:t.newSelection.asSingle();new e(n,t.newDoc,o,r,(e,r)=>r.update(e,t),t)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:eB.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),n=this.changes(r.changes),i=[r.range],s=tu(r.effects);for(let r=1;r<t.ranges.length;r++){let o=e(t.ranges[r]),a=this.changes(o.changes),l=a.map(n);for(let e=0;e<r;e++)i[e]=i[e].map(l);let c=n.mapDesc(a,!0);i.push(o.range.map(c)),n=n.compose(l),s=to.mapEffects(s,l).concat(to.mapEffects(tu(o.effects),c))}return{changes:n,selection:eB.create(i,t.mainIndex),effects:s}}changes(t=[]){return t instanceof eD?t:eD.of(t,this.doc.length,this.facet(e.lineSeparator))}toText(t){return ey.of(t.split(this.facet(e.lineSeparator)||eN))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(e5(this,t),e3(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let n=e[r];n instanceof eY&&null!=this.config.address[n.id]&&(t[r]=n.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(t,r={},n){if(!t||"string"!=typeof t.doc)throw RangeError("Invalid JSON representation for EditorState");let i=[];if(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(t,e)){let r=n[e],s=t[e];i.push(r.init(e=>r.spec.fromJSON(s,e)))}}return e.create({doc:t.doc,selection:eB.fromJSON(t.selection),extensions:r.extensions?i.concat([r.extensions]):i})}static create(t={}){let r=e4.resolve(t.extensions||[],new Map),n=t.doc instanceof ey?t.doc:ey.of((t.doc||"").split(r.staticFacet(e.lineSeparator)||eN)),i=t.selection?t.selection instanceof eB?t.selection:eB.single(t.selection.anchor,t.selection.head):eB.single(0);return eF(i,n.length),r.staticFacet(e7)||(i=i.asSingle()),new e(r,n,i,r.dynamicSlots.map(()=>null),(e,t)=>t.create(e),null)}get tabSize(){return this.facet(e.tabSize)}get lineBreak(){return this.facet(e.lineSeparator)||`
`}get readOnly(){return this.facet(tr)}phrase(t,...r){for(let r of this.facet(e.phrases))if(Object.prototype.hasOwnProperty.call(r,t)){t=r[t];break}return r.length&&(t=t.replace(/\$(\$|\d*)/g,(e,t)=>{if("$"==t)return"$";let n=+(t||1);return!n||n>r.length?e:r[n-1]})),t}languageDataAt(e,t,r=-1){let n=[];for(let i of this.facet(e6))for(let s of i(this,t,r))Object.prototype.hasOwnProperty.call(s,e)&&n.push(s[e]);return n}charCategorizer(e){var t;return t=this.languageDataAt("wordChars",e).join(""),e=>{if(!/\S/.test(e))return td.Space;if(function(e){if(n)return n.test(e);for(let t=0;t<e.length;t++){let r=e[t];if(/\w/.test(r)||r>"\x80"&&(r.toUpperCase()!=r.toLowerCase()||tf.test(r)))return!0}return!1}(e))return td.Word;for(let r=0;r<t.length;r++)if(e.indexOf(t[r])>-1)return td.Word;return td.Other}}wordAt(e){let{text:t,from:r,length:n}=this.doc.lineAt(e),i=this.charCategorizer(e),s=e-r,o=e-r;for(;s>0;){let e=eT(t,s,!1);if(i(t.slice(e,s))!=td.Word)break;s=e}for(;o<n;){let e=eT(t,o);if(i(t.slice(o,e))!=td.Word)break;o=e}return s==o?null:eB.range(s+r,o+r)}};function tm(e,t,r={}){let n={};for(let t of e)for(let e of Object.keys(t)){let i=t[e],s=n[e];if(void 0===s)n[e]=i;else if(s!==i&&void 0!==i){if(Object.hasOwnProperty.call(r,e))n[e]=r[e](s,i);else throw Error("Config merge conflict for field "+e)}}for(let e in t)void 0===n[e]&&(n[e]=t[e]);return n}tp.allowMultipleSelections=e7,tp.tabSize=eV.define({combine:e=>e.length?e[0]:4}),tp.lineSeparator=e8,tp.readOnly=tr,tp.phrases=eV.define({compare(e,t){let r=Object.keys(e),n=Object.keys(t);return r.length==n.length&&r.every(r=>e[r]==t[r])}}),tp.languageData=e6,tp.changeFilter=e9,tp.transactionFilter=te,tp.transactionExtender=tt,e1.reconfigure=to.define();class tg{eq(e){return this==e}range(e,t=e){return ty.create(e,t,this)}}tg.prototype.startSide=tg.prototype.endSide=0,tg.prototype.point=!1,tg.prototype.mapMode=e_.TrackDel;let ty=class e{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(t,r,n){return new e(t,r,n)}};function tb(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class tv{constructor(e,t,r,n){this.from=e,this.to=t,this.value=r,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,n=0){let i=r?this.to:this.from;for(let s=n,o=i.length;;){if(s==o)return s;let n=s+o>>1,a=i[n]-e||(r?this.value[n].endSide:this.value[n].startSide)-t;if(n==s)return a>=0?s:o;a>=0?o=n:s=n+1}}between(e,t,r,n){for(let i=this.findIndex(t,-1e9,!0),s=this.findIndex(r,1e9,!1,i);i<s;i++)if(!1===n(this.from[i]+e,this.to[i]+e,this.value[i]))return!1}map(e,t){let r=[],n=[],i=[],s=-1,o=-1;for(let a=0;a<this.value.length;a++){let l=this.value[a],c=this.from[a]+e,h=this.to[a]+e,u,d;if(c==h){let e=t.mapPos(c,l.startSide,l.mapMode);if(null==e||(u=d=e,l.startSide!=l.endSide&&(d=t.mapPos(c,l.endSide))<u))continue}else if((u=t.mapPos(c,l.startSide))>(d=t.mapPos(h,l.endSide))||u==d&&l.startSide>0&&l.endSide<=0)continue;0>(d-u||l.endSide-l.startSide)||(s<0&&(s=u),l.point&&(o=Math.max(o,d-u)),r.push(l),n.push(u-s),i.push(d-s))}return{mapped:r.length?new tv(n,i,r,o):null,pos:s}}}class tx{constructor(e,t,r,n){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=n}static create(e,t,r,n){return new tx(e,t,r,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:n=0,filterTo:i=this.length}=e,s=e.filter;if(0==t.length&&!s)return this;if(r&&(t=t.slice().sort(tb)),this.isEmpty)return t.length?tx.of(t):this;let o=new tO(this,null,-1).goto(0),a=0,l=[],c=new tw;for(;o.value||a<t.length;)if(a<t.length&&(o.from-t[a].from||o.startSide-t[a].value.startSide)>=0){let e=t[a++];c.addInner(e.from,e.to,e.value)||l.push(e)}else 1==o.rangeIndex&&o.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(o.chunkIndex)<t[a].from)&&(!s||n>this.chunkEnd(o.chunkIndex)||i<this.chunkPos[o.chunkIndex])&&c.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!s||n>o.to||i<o.from||s(o.from,o.to,o.value))&&(c.addInner(o.from,o.to,o.value)||l.push(ty.create(o.from,o.to,o.value))),o.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?tx.empty:this.nextLayer.update({add:l,filter:s,filterFrom:n,filterTo:i}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],n=-1;for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i],a=e.touchesRange(s,s+o.length);if(!1===a)n=Math.max(n,o.maxPoint),t.push(o),r.push(e.mapPos(s));else if(!0===a){let{mapped:i,pos:a}=o.map(s,e);i&&(n=Math.max(n,i.maxPoint),t.push(i),r.push(a))}}let i=this.nextLayer.map(e);return 0==t.length?i:new tx(r,t,i||tx.empty,n)}between(e,t,r){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let i=this.chunkPos[n],s=this.chunk[n];if(t>=i&&e<=i+s.length&&!1===s.between(i,e-i,t-i,r))return}this.nextLayer.between(e,t,r)}}iter(e=0){return tS.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return tS.from(e).goto(t)}static compare(e,t,r,n,i=-1){let s=e.filter(e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i),o=t.filter(e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i),a=tk(s,o,r),l=new tT(s,a,i),c=new tT(o,a,i);r.iterGaps((e,t,r)=>tA(l,e,c,t,r,n)),r.empty&&0==r.length&&tA(l,0,c,0,0,n)}static eq(e,t,r=0,n){null==n&&(n=0x3b9ac9ff);let i=e.filter(e=>!e.isEmpty&&0>t.indexOf(e)),s=t.filter(t=>!t.isEmpty&&0>e.indexOf(t));if(i.length!=s.length)return!1;if(!i.length)return!0;let o=tk(i,s),a=new tT(i,o,0).goto(r),l=new tT(s,o,0).goto(r);for(;;){if(a.to!=l.to||!tM(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>n)return!0;a.next(),l.next()}}static spans(e,t,r,n,i=-1){let s=new tT(e,null,i).goto(t),o=t,a=s.openStart;for(;;){let e=Math.min(s.to,r);if(s.point){let r=s.activeForPoint(s.to),i=s.pointFrom<t?r.length+1:s.point.startSide<0?r.length:Math.min(r.length,a);n.point(o,e,s.point,r,i,s.pointRank),a=Math.min(s.openEnd(e),r.length)}else e>o&&(n.span(o,e,s.active,a),a=s.openEnd(e));if(s.to>r)return a+(s.point&&s.to>r?1:0);o=s.to,s.next()}}static of(e,t=!1){let r=new tw;for(let n of e instanceof ty?[e]:t?function(e){if(e.length>1)for(let t=e[0],r=1;r<e.length;r++){let n=e[r];if(tb(t,n)>0)return e.slice().sort(tb);t=n}return e}(e):e)r.add(n.from,n.to,n.value);return r.finish()}static join(e){if(!e.length)return tx.empty;let t=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let n=e[r];n!=tx.empty;n=n.nextLayer)t=new tx(n.chunkPos,n.chunk,t,Math.max(n.maxPoint,t.maxPoint));return t}}tx.empty=new tx([],[],null,-1),tx.empty.nextLayer=tx.empty;class tw{finishChunk(e){this.chunks.push(new tv(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new tw)).add(e,t,r)}addInner(e,t,r){let n=e-this.lastTo||r.startSide-this.last.endSide;if(n<=0&&0>(e-this.lastFrom||r.startSide-this.last.startSide))throw Error("Ranges must be added sorted by `from` position and `startSide`");return!(n<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if(0>(e-this.lastTo||t.value[0].startSide-this.last.endSide))return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(tx.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=tx.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function tk(e,t,r){let n=new Map;for(let t of e)for(let e=0;e<t.chunk.length;e++)t.chunk[e].maxPoint<=0&&n.set(t.chunk[e],t.chunkPos[e]);let i=new Set;for(let e of t)for(let t=0;t<e.chunk.length;t++){let s=n.get(e.chunk[t]);null==s||(r?r.mapPos(s):s)!=e.chunkPos[t]||null!=r&&r.touchesRange(s,s+e.chunk[t].length)||i.add(e.chunk[t])}return i}class tO{constructor(e,t,r,n=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,t){0>(this.to-e||this.endSide-t)&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class tS{constructor(e){this.heap=e}static from(e,t=null,r=-1){let n=[];for(let i=0;i<e.length;i++)for(let s=e[i];!s.isEmpty;s=s.nextLayer)s.maxPoint>=r&&n.push(new tO(s,t,r,i));return 1==n.length?n[0]:new tS(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let e=this.heap.length>>1;e>=0;e--)tC(this.heap,e);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let e=this.heap.length>>1;e>=0;e--)tC(this.heap,e);0>(this.to-e||this.value.endSide-t)&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),tC(this.heap,0)}}}function tC(e,t){for(let r=e[t];;){let n=(t<<1)+1;if(n>=e.length)break;let i=e[n];if(n+1<e.length&&i.compare(e[n+1])>=0&&(i=e[n+1],n++),0>r.compare(i))break;e[n]=r,e[t]=i,t=n}}class tT{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=tS.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&0>(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t);)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){tE(this.active,e),tE(this.activeTo,e),tE(this.activeRank,e),this.minActive=t_(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:n,rank:i}=this.cursor;for(;t<this.activeRank.length&&(i-this.activeRank[t]||n-this.activeTo[t])>0;)t++;tN(this.active,t,r),tN(this.activeTo,t,n),tN(this.activeRank,t,i),e&&tN(e,t,this.cursor.from),this.minActive=t_(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let n=this.minActive;if(n>-1&&0>(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)){if(this.activeTo[n]>e){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),r&&tE(r,n)}else if(this.cursor.value){if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let e=this.cursor.value;if(e.point){if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=e,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else this.addActive(r),this.cursor.next()}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let t=r.length-1;t>=0&&r[t]<e;t--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function tA(e,t,r,n,i,s){e.goto(t),r.goto(n);let o=n+i,a=n,l=n-t;for(;;){let t=e.to+l-r.to,n=t||e.endSide-r.endSide,i=n<0?e.to+l:r.to,c=Math.min(i,o);if(e.point||r.point?e.point&&r.point&&(e.point==r.point||e.point.eq(r.point))&&tM(e.activeForPoint(e.to),r.activeForPoint(r.to))||s.comparePoint(a,c,e.point,r.point):c>a&&!tM(e.active,r.active)&&s.compareRange(a,c,e.active,r.active),i>o)break;(t||e.openEnd!=r.openEnd)&&s.boundChange&&s.boundChange(i),a=i,n<=0&&e.next(),n>=0&&r.next()}}function tM(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!=t[r]&&!e[r].eq(t[r]))return!1;return!0}function tE(e,t){for(let r=t,n=e.length-1;r<n;r++)e[r]=e[r+1];e.pop()}function tN(e,t,r){for(let r=e.length-1;r>=t;r--)e[r+1]=e[r];e[t]=r}function t_(e,t){let r=-1,n=1e9;for(let i=0;i<t.length;i++)0>(t[i]-n||e[i].endSide-e[r].endSide)&&(r=i,n=t[i]);return r}function tj(e,t,r=e.length){let n=0;for(let i=0;i<r&&i<e.length;)9==e.charCodeAt(i)?(n+=t-n%t,i++):(n++,i=eT(e,i));return n}function tD(e,t,r,n){for(let n=0,i=0;;){if(i>=t)return n;if(n==e.length)break;i+=9==e.charCodeAt(n)?r-i%r:1,n=eT(e,n)}return!0===n?-1:e.length}function tR(e,t){let r=0;for(let t of e)null!=t&&(t*=1)>=t&&++r;return r}function tP(e){return 0|e.length}function tI(e){return!(e>0)}function tz(e){return"object"!=typeof e||"length"in e?e:Array.from(e)}function tL(e,t){let r=0,n,i=0,s=0;if(void 0===t)for(let t of e)null!=t&&(t*=1)>=t&&(n=t-i,i+=n/++r,s+=n*(t-i));else{let o=-1;for(let a of e)null!=(a=t(a,++o,e))&&(a*=1)>=a&&(n=a-i,i+=n/++r,s+=n*(a-i))}if(r>1)return s/(r-1)}function tq(e,t){let r=tL(e,t);return r&&Math.sqrt(r)}function t$(e,t){let r,n;if(void 0===t)for(let t of e)null!=t&&(void 0===r?t>=t&&(r=n=t):(r>t&&(r=t),n<t&&(n=t)));else{let i=-1;for(let s of e)null!=(s=t(s,++i,e))&&(void 0===r?s>=s&&(r=n=s):(r>s&&(r=s),n<s&&(n=s)))}return[r,n]}class tB{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){let t=this._partials,r=0;for(let n=0;n<this._n&&n<32;n++){let i=t[n],s=e+i,o=Math.abs(e)<Math.abs(i)?e-(s-i):i-(s-e);o&&(t[r++]=o),e=s}return t[r]=e,this._n=r+1,this}valueOf(){let e=this._partials,t=this._n,r,n,i,s=0;if(t>0){for(s=e[--t];t>0&&(s=(r=s)+(n=e[--t]),!(i=n-(s-r))););t>0&&(i<0&&e[t-1]<0||i>0&&e[t-1]>0)&&(r=s+(n=2*i),n==r-s&&(s=r))}return s}}class tF extends Map{constructor(e,t=tU){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(let[t,r]of e)this.set(t,r)}get(e){return super.get(tV(this,e))}has(e){return super.has(tV(this,e))}set(e,t){return super.set(tH(this,e),t)}delete(e){return super.delete(tW(this,e))}}class tQ extends Set{constructor(e,t=tU){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(let t of e)this.add(t)}has(e){return super.has(tV(this,e))}add(e){return super.add(tH(this,e))}delete(e){return super.delete(tW(this,e))}}function tV({_intern:e,_key:t},r){let n=t(r);return e.has(n)?e.get(n):r}function tH({_intern:e,_key:t},r){let n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function tW({_intern:e,_key:t},r){let n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function tU(e){return null!==e&&"object"==typeof e?e.valueOf():e}function tG(e){return e}function tX(e,...t){return tZ(e,tG,tG,t)}function tY(e,t,...r){return tZ(e,tG,t,r)}function tZ(e,t,r,n){return function e(i,s){if(s>=n.length)return r(i);let o=new tF,a=n[s++],l=-1;for(let e of i){let t=a(e,++l,i),r=o.get(t);r?r.push(e):o.set(t,[e])}for(let[t,r]of o)o.set(t,e(r,s));return t(o)}(e,0)}function tJ(e,...t){if("function"!=typeof e[Symbol.iterator])throw TypeError("values is not iterable");e=Array.from(e);let[r]=t;if(r&&2!==r.length||t.length>1){var n;let i=Uint32Array.from(e,(e,t)=>t);return t.length>1?(t=t.map(t=>e.map(t)),i.sort((e,r)=>{for(let n of t){let t=t0(n[e],n[r]);if(t)return t}})):(r=e.map(r),i.sort((e,t)=>t0(r[e],r[t]))),n=e,Array.from(i,e=>n[e])}return e.sort(tK(r))}function tK(e=T.a2){if(e===T.a2)return t0;if("function"!=typeof e)throw TypeError("compare is not a function");return(t,r)=>{let n=e(t,r);return n||0===n?n:(0===e(r,r))-(0===e(t,t))}}function t0(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:+(e>t))}function t1(e,t,r){return(2!==t.length?tJ(tY(e,t,r),([e,t],[r,n])=>(0,T.a2)(t,n)||(0,T.a2)(e,r)):tJ(tX(e,r),([e,r],[n,i])=>t(r,i)||(0,T.a2)(e,n))).map(([e])=>e)}let t2=Math.sqrt(50),t4=Math.sqrt(10),t5=Math.sqrt(2);function t3(e,t,r){let n,i,s;let o=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(o)),l=o/Math.pow(10,a),c=l>=t2?10:l>=t4?5:l>=t5?2:1;return a<0?(n=Math.round(e*(s=Math.pow(10,-a)/c)),i=Math.round(t*s),n/s<e&&++n,i/s>t&&--i,s=-s):(n=Math.round(e/(s=Math.pow(10,a)*c)),i=Math.round(t/s),n*s<e&&++n,i*s>t&&--i),i<n&&.5<=r&&r<2?t3(e,t,2*r):[n,i,s]}function t6(e,t,r){if(t*=1,e*=1,!((r*=1)>0))return[];if(e===t)return[e];let n=t<e,[i,s,o]=n?t3(t,e,r):t3(e,t,r);if(!(s>=i))return[];let a=s-i+1,l=Array(a);if(n){if(o<0)for(let e=0;e<a;++e)l[e]=-((s-e)/o);else for(let e=0;e<a;++e)l[e]=(s-e)*o}else if(o<0)for(let e=0;e<a;++e)l[e]=-((i+e)/o);else for(let e=0;e<a;++e)l[e]=(i+e)*o;return l}function t7(e,t,r){return t3(e*=1,t*=1,r*=1)[2]}function t8(e,t,r){t*=1,e*=1,r*=1;let n=t<e,i=n?t7(t,e,r):t7(e,t,r);return(n?-1:1)*(i<0?-(1/i):i)}function t9(e){return Math.max(1,Math.ceil(Math.log(tR(e))/Math.LN2)+1)}function re(e,t){let r;if(void 0===t)for(let t of e)null!=t&&(r<t||void 0===r&&t>=t)&&(r=t);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(r<i||void 0===r&&i>=i)&&(r=i)}return r}function rt(e,t){let r,n=-1,i=-1;if(void 0===t)for(let t of e)++i,null!=t&&(r<t||void 0===r&&t>=t)&&(r=t,n=i);else for(let s of e)null!=(s=t(s,++i,e))&&(r<s||void 0===r&&s>=s)&&(r=s,n=i);return n}function rr(e,t){let r;if(void 0===t)for(let t of e)null!=t&&(r>t||void 0===r&&t>=t)&&(r=t);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(r>i||void 0===r&&i>=i)&&(r=i)}return r}function rn(e,t){let r,n=-1,i=-1;if(void 0===t)for(let t of e)++i,null!=t&&(r>t||void 0===r&&t>=t)&&(r=t,n=i);else for(let s of e)null!=(s=t(s,++i,e))&&(r>s||void 0===r&&s>=s)&&(r=s,n=i);return n}function ri(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function rs(e,t=T.a2){let r,n=!1;if(1===t.length){let i;for(let s of e){let e=t(s);(n?(0,T.a2)(e,i)>0:0===(0,T.a2)(e,e))&&(r=s,i=e,n=!0)}}else for(let i of e)(n?t(i,r)>0:0===t(i,i))&&(r=i,n=!0);return r}function ro(e,t,r){if(!(!(n=(e=Float64Array.from((0,T.a4)(e,r))).length)||isNaN(t*=1))){if(t<=0||n<2)return rr(e);if(t>=1)return re(e);var n,i=(n-1)*t,s=Math.floor(i),o=re((function e(t,r,n=0,i=1/0,s){if(r=Math.floor(r),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=r&&r<=i))return t;for(s=void 0===s?t0:tK(s);i>n;){if(i-n>600){let o=i-n+1,a=r-n+1,l=Math.log(o),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(o-c)/o)*(a-o/2<0?-1:1),u=Math.max(n,Math.floor(r-a*c/o+h)),d=Math.min(i,Math.floor(r+(o-a)*c/o+h));e(t,r,u,d,s)}let o=t[r],a=n,l=i;for(ri(t,n,r),s(t[i],o)>0&&ri(t,n,i);a<l;){for(ri(t,a,l),++a,--l;0>s(t[a],o);)++a;for(;s(t[l],o)>0;)--l}0===s(t[n],o)?ri(t,n,l):ri(t,++l,i),l<=r&&(n=l+1),r<=l&&(i=l-1)}return t})(e,s).subarray(0,s+1));return o+(rr(e.subarray(s+1))-o)*(i-s)}}function ra(e,t,r){let n=tR(e),i=ro(e,.75)-ro(e,.25);return n&&i?Math.ceil((r-t)/(2*i*Math.pow(n,-1/3))):1}function rl(e,t,r){let n=tR(e),i=tq(e);return n&&i?Math.ceil((r-t)*Math.cbrt(n)/(3.49*i)):1}function rc(e,t){return ro(e,.5,t)}function rh(e){return Array.from(function*(e){for(let t of e)yield*t}(e))}function ru(e,t){let r=new tF;if(void 0===t)for(let t of e)null!=t&&t>=t&&r.set(t,(r.get(t)||0)+1);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&i>=i&&r.set(i,(r.get(i)||0)+1)}let n,i=0;for(let[e,t]of r)t>i&&(i=t,n=e);return n}function rd(e,t){let r=0;if(void 0===t)for(let t of e)(t*=1)&&(r+=t);else{let n=-1;for(let i of e)(i=+t(i,++n,e))&&(r+=i)}return r}function rf(e){if("function"!=typeof e[Symbol.iterator])throw TypeError("values is not iterable");return Array.from(e).reverse()}function rp(e){return e}function rm(e){return"translate("+e+",0)"}function rg(){return!this.__axis}function ry(e){return"string"==typeof e?new M.S([[document.querySelector(e)]],[document.documentElement]):new M.S([[e]],M.r)}let rb=Math.PI/180,rv=180/Math.PI,rx=4/29,rw=6/29,rk=6/29*3*(6/29),rO=6/29*(6/29)*(6/29);function rS(e){if(e instanceof rT)return new rT(e.l,e.a,e.b,e.opacity);if(e instanceof rj)return rD(e);e instanceof M.R||(e=(0,M.b)(e));var t,r,n=rN(e.r),i=rN(e.g),s=rN(e.b),o=rA((.2225045*n+.7168786*i+.0606169*s)/1);return n===i&&i===s?t=r=o:(t=rA((.4360747*n+.3850649*i+.1430804*s)/.96422),r=rA((.0139322*n+.0971045*i+.7141733*s)/.82521)),new rT(116*o-16,500*(t-o),200*(o-r),e.opacity)}function rC(e,t,r,n){return 1==arguments.length?rS(e):new rT(e,t,r,n??1)}function rT(e,t,r,n){this.l=+e,this.a=+t,this.b=+r,this.opacity=+n}function rA(e){return e>rO?Math.pow(e,1/3):e/rk+rx}function rM(e){return e>rw?e*e*e:rk*(e-rx)}function rE(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function rN(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function r_(e,t,r,n){return 1==arguments.length?function(e){if(e instanceof rj)return new rj(e.h,e.c,e.l,e.opacity);if(e instanceof rT||(e=rS(e)),0===e.a&&0===e.b)return new rj(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*rv;return new rj(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}(e):new rj(e,t,r,n??1)}function rj(e,t,r,n){this.h=+e,this.c=+t,this.l=+r,this.opacity=+n}function rD(e){if(isNaN(e.h))return new rT(e.l,0,0,e.opacity);var t=e.h*rb;return new rT(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}(0,M.d)(rT,rC,(0,M.e)(M.C,{brighter(e){return new rT(this.l+18*(e??1),this.a,this.b,this.opacity)},darker(e){return new rT(this.l-18*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,r=isNaN(this.b)?e:e-this.b/200;return t=.96422*rM(t),e=+rM(e),r=.82521*rM(r),new M.R(rE(3.1338561*t-1.6168667*e-.4906146*r),rE(-.9787684*t+1.9161415*e+.033454*r),rE(.0719453*t-.2289914*e+1.4052427*r),this.opacity)}})),(0,M.d)(rj,r_,(0,M.e)(M.C,{brighter(e){return new rj(this.h,this.c,this.l+18*(e??1),this.opacity)},darker(e){return new rj(this.h,this.c,this.l-18*(e??1),this.opacity)},rgb(){return rD(this).rgb()}}));var rR=-1.78277*.29227-.1347134789;function rP(e,t,r,n){return 1==arguments.length?function(e){if(e instanceof rI)return new rI(e.h,e.s,e.l,e.opacity);e instanceof M.R||(e=(0,M.b)(e));var t=e.r/255,r=e.g/255,n=e.b/255,i=(rR*n+-1.7884503806*t-3.5172982438*r)/(rR+-1.7884503806-3.5172982438),s=n-i,o=-((1.97294*(r-i)- -.29227*s)/.90649),a=Math.sqrt(o*o+s*s)/(1.97294*i*(1-i)),l=a?Math.atan2(o,s)*rv-120:NaN;return new rI(l<0?l+360:l,a,i,e.opacity)}(e):new rI(e,t,r,n??1)}function rI(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function rz(e,t){var r,n,i=typeof t;return null==t||"boolean"===i?(0,M.j)(t):("number"===i?M.k:"string"===i?(n=(0,M.n)(t))?(t=n,M.l):M.m:t instanceof M.n?M.l:t instanceof Date?function(e,t){var r=new Date;return e*=1,t*=1,function(n){return r.setTime(e*(1-n)+t*n),r}}:!ArrayBuffer.isView(r=t)||r instanceof DataView?Array.isArray(t)?function(e,t){var r,n=t?t.length:0,i=e?Math.min(n,e.length):0,s=Array(i),o=Array(n);for(r=0;r<i;++r)s[r]=rz(e[r],t[r]);for(;r<n;++r)o[r]=t[r];return function(e){for(r=0;r<i;++r)o[r]=s[r](e);return o}}:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?function(e,t){var r,n={},i={};for(r in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)r in e?n[r]=rz(e[r],t[r]):i[r]=t[r];return function(e){for(r in n)i[r]=n[r](e);return i}}:M.k:function(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,i=t.slice();return function(s){for(r=0;r<n;++r)i[r]=e[r]*(1-s)+t[r]*s;return i}})(e,t)}function rL(e,t){return e*=1,t*=1,function(r){return Math.round(e*(1-r)+t*r)}}(0,M.d)(rI,rP,(0,M.e)(M.C,{brighter(e){return e=null==e?M.h:Math.pow(M.h,e),new rI(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?M.c:Math.pow(M.c,e),new rI(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*rb,t=+this.l,r=isNaN(this.s)?0:this.s*t*(1-t),n=Math.cos(e),i=Math.sin(e);return new M.R(255*(t+r*(-.14861*n+1.78277*i)),255*(t+r*(-.29227*n+-.90649*i)),255*(t+1.97294*n*r),this.opacity)}}));let rq=(nX=M.s,function(e,t){var r=nX((e=(0,M.o)(e)).h,(t=(0,M.o)(t)).h),n=(0,M.q)(e.s,t.s),i=(0,M.q)(e.l,t.l),s=(0,M.q)(e.opacity,t.opacity);return function(t){return e.h=r(t),e.s=n(t),e.l=i(t),e.opacity=s(t),e+""}}),r$=(nY=M.s,function(e,t){var r=nY((e=r_(e)).h,(t=r_(t)).h),n=(0,M.q)(e.c,t.c),i=(0,M.q)(e.l,t.l),s=(0,M.q)(e.opacity,t.opacity);return function(t){return e.h=r(t),e.c=n(t),e.l=i(t),e.opacity=s(t),e+""}});function rB(e){return function t(r){function n(t,n){var i=e((t=rP(t)).h,(n=rP(n)).h),s=(0,M.q)(t.s,n.s),o=(0,M.q)(t.l,n.l),a=(0,M.q)(t.opacity,n.opacity);return function(e){return t.h=i(e),t.s=s(e),t.l=o(Math.pow(e,r)),t.opacity=a(e),t+""}}return r*=1,n.gamma=t,n}(1)}rB(M.s);var rF=rB(M.q);function rQ(e,t){void 0===t&&(t=e,e=rz);for(var r=0,n=t.length-1,i=t[0],s=Array(n<0?0:n);r<n;)s[r]=e(i,i=t[++r]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return s[t](e-t)}}function rV(e,t){for(var r=Array(t),n=0;n<t;++n)r[n]=e(n/(t-1));return r}let rH=Math.PI,rW=2*rH,rU=rW-1e-6;function rG(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}class rX{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?rG:function(e){let t=Math.floor(e);if(!(t>=0))throw Error(`invalid digits: ${e}`);if(t>15)return rG;let r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,n){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(e,t,r,n,i,s){this._append`C${+e},${+t},${+r},${+n},${this._x1=+i},${this._y1=+s}`}arcTo(e,t,r,n,i){if(e*=1,t*=1,r*=1,n*=1,(i*=1)<0)throw Error(`negative radius: ${i}`);let s=this._x1,o=this._y1,a=r-e,l=n-t,c=s-e,h=o-t,u=c*c+h*h;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(u>1e-6){if(Math.abs(h*a-l*c)>1e-6&&i){let d=r-s,f=n-o,p=a*a+l*l,m=Math.sqrt(p),g=Math.sqrt(u),y=i*Math.tan((rH-Math.acos((p+u-(d*d+f*f))/(2*m*g)))/2),b=y/g,v=y/m;Math.abs(b-1)>1e-6&&this._append`L${e+b*c},${t+b*h}`,this._append`A${i},${i},0,0,${+(h*d>c*f)},${this._x1=e+v*a},${this._y1=t+v*l}`}else this._append`L${this._x1=e},${this._y1=t}`}}arc(e,t,r,n,i,s){if(e*=1,t*=1,r*=1,s=!!s,r<0)throw Error(`negative radius: ${r}`);let o=r*Math.cos(n),a=r*Math.sin(n),l=e+o,c=t+a,h=1^s,u=s?n-i:i-n;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-c)>1e-6)&&this._append`L${l},${c}`,r&&(u<0&&(u=u%rW+rW),u>rU?this._append`A${r},${r},0,1,${h},${e-o},${t-a}A${r},${r},0,1,${h},${this._x1=l},${this._y1=c}`:u>1e-6&&this._append`A${r},${r},0,${+(u>=rH)},${h},${this._x1=e+r*Math.cos(i)},${this._y1=t+r*Math.sin(i)}`)}rect(e,t,r,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r*=1}v${+n}h${-r}Z`}toString(){return this._}}function rY(e=3){return new rX(+e)}function rZ(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function rJ(e){return(e=rZ(Math.abs(e)))?e[1]:NaN}var rK=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function r0(e){var t;if(!(t=rK.exec(e)))throw Error("invalid format: "+e);return new r1({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function r1(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function r2(e,t){var r=rZ(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+Array(i-n.length+2).join("0")}r0.prototype=r1.prototype,r1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};let r4={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>r2(100*e,t),r:r2,s:function(e,t){var r=rZ(e,t);if(!r)return e+"";var n=r[0],i=r[1],s=i-(nZ=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=n.length;return s===o?n:s>o?n+Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+Array(1-s).join("0")+rZ(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function r5(e){return e}var r3=Array.prototype.map,r6=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];nK=(nJ=function(e){var t,r,n,i=void 0===e.grouping||void 0===e.thousands?r5:(t=r3.call(e.grouping,Number),r=e.thousands+"",function(e,n){for(var i=e.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),s.push(e.substring(i-=a,i+a)),!((l+=a+1)>n));)a=t[o=(o+1)%t.length];return s.reverse().join(r)}),s=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",l=void 0===e.numerals?r5:(n=r3.call(e.numerals,String),function(e){return e.replace(/[0-9]/g,function(e){return n[+e]})}),c=void 0===e.percent?"%":e.percent+"",h=void 0===e.minus?"":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=r0(e)).fill,r=e.align,n=e.sign,d=e.symbol,f=e.zero,p=e.width,m=e.comma,g=e.precision,y=e.trim,b=e.type;"n"===b?(m=!0,b="g"):r4[b]||(void 0===g&&(g=12),y=!0,b="g"),(f||"0"===t&&"="===r)&&(f=!0,t="0",r="=");var v="$"===d?s:"#"===d&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",x="$"===d?o:/[%p]/.test(b)?c:"",w=r4[b],k=/[defgprs%]/.test(b);function O(e){var s,o,c,d=v,O=x;if("c"===b)O=w(e)+O,e="";else{var S=(e*=1)<0||1/e<0;if(e=isNaN(e)?u:w(Math.abs(e),g),y&&(e=function(e){e:for(var t,r=e.length,n=1,i=-1;n<r;++n)switch(e[n]){case".":i=t=n;break;case"0":0===i&&(i=n),t=n;break;default:if(!+e[n])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),S&&0==+e&&"+"!==n&&(S=!1),d=(S?"("===n?n:h:"-"===n||"("===n?"":n)+d,O=("s"===b?r6[8+nZ/3]:"")+O+(S&&"("===n?")":""),k){for(s=-1,o=e.length;++s<o;)if(48>(c=e.charCodeAt(s))||c>57){O=(46===c?a+e.slice(s+1):e.slice(s))+O,e=e.slice(0,s);break}}}m&&!f&&(e=i(e,1/0));var C=d.length+e.length+O.length,T=C<p?Array(p-C+1).join(t):"";switch(m&&f&&(e=i(T+e,T.length?p-O.length:1/0),T=""),r){case"<":e=d+e+O+T;break;case"=":e=d+T+e+O;break;case"^":e=T.slice(0,C=T.length>>1)+d+e+O+T.slice(C);break;default:e=T+d+e+O}return l(e)}return g=void 0===g?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),O.toString=function(){return e+""},O}return{format:d,formatPrefix:function(e,t){var r=d(((e=r0(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(rJ(t)/3))),i=Math.pow(10,-n),s=r6[8+n/3];return function(e){return r(i*e)+s}}}}({thousands:",",grouping:[3],currency:["$",""]})).format,n0=nJ.formatPrefix;var r7=Math.PI,r8=r7/2,r9=r7/4,ne=2*r7,nt=180/r7,nr=r7/180,nn=Math.abs,ni=Math.atan,ns=Math.atan2,no=Math.cos,na=Math.exp,nl=Math.log,nc=Math.pow,nh=Math.sin,nu=Math.sign||function(e){return e>0?1:e<0?-1:0},nd=Math.sqrt,nf=Math.tan;function np(e){return e>1?0:e<-1?r7:Math.acos(e)}function nm(e){return e>1?r8:e<-1?-r8:Math.asin(e)}function ng(){}function ny(e,t){e&&nv.hasOwnProperty(e.type)&&nv[e.type](e,t)}var nb={Feature:function(e,t){ny(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,n=-1,i=r.length;++n<i;)ny(r[n].geometry,t)}},nv={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)e=r[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){nx(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)nx(r[n],t,0)},Polygon:function(e,t){nw(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)nw(r[n],t)},GeometryCollection:function(e,t){for(var r=e.geometries,n=-1,i=r.length;++n<i;)ny(r[n],t)}};function nx(e,t,r){var n,i=-1,s=e.length-r;for(t.lineStart();++i<s;)n=e[i],t.point(n[0],n[1],n[2]);t.lineEnd()}function nw(e,t){var r=-1,n=e.length;for(t.polygonStart();++r<n;)nx(e[r],t,1);t.polygonEnd()}function nk(e,t){e&&nb.hasOwnProperty(e.type)?nb[e.type](e,t):ny(e,t)}function nO(e){return[ns(e[1],e[0]),nm(e[2])]}function nS(e){var t=e[0],r=e[1],n=no(r);return[n*no(t),n*nh(t),nh(r)]}function nC(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function nT(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function nA(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function nM(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function nE(e){var t=nd(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function nN(e,t){function r(r,n){return t((r=e(r,n))[0],r[1])}return e.invert&&t.invert&&(r.invert=function(r,n){return(r=t.invert(r,n))&&e.invert(r[0],r[1])}),r}function n_(e,t){return nn(e)>r7&&(e-=Math.round(e/ne)*ne),[e,t]}function nj(e,t,r){return(e%=ne)?t||r?nN(nR(e),nP(t,r)):nR(e):t||r?nP(t,r):n_}function nD(e){return function(t,r){return nn(t+=e)>r7&&(t-=Math.round(t/ne)*ne),[t,r]}}function nR(e){var t=nD(e);return t.invert=nD(-e),t}function nP(e,t){var r=no(e),n=nh(e),i=no(t),s=nh(t);function o(e,t){var o=no(t),a=no(e)*o,l=nh(e)*o,c=nh(t),h=c*r+a*n;return[ns(l*i-h*s,a*r-c*n),nm(h*i+l*s)]}return o.invert=function(e,t){var o=no(t),a=no(e)*o,l=nh(e)*o,c=nh(t),h=c*i-l*s;return[ns(l*i+c*s,a*r+h*n),nm(h*r-a*n)]},o}function nI(e,t){t=nS(t),t[0]-=e,nE(t);var r=np(-t[1]);return((0>-t[2]?-r:r)+ne-1e-6)%ne}function nz(){var e,t=[];return{point:function(t,r,n){e.push([t,r,n])},lineStart:function(){t.push(e=[])},lineEnd:ng,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var r=t;return t=[],e=null,r}}}function nL(e,t){return 1e-6>nn(e[0]-t[0])&&1e-6>nn(e[1]-t[1])}function nq(e,t,r,n){this.x=e,this.z=t,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function n$(e,t,r,n,i){var s,o,a=[],l=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,r,n=e[0],o=e[t];if(nL(n,o)){if(!n[2]&&!o[2]){for(i.lineStart(),s=0;s<t;++s)i.point((n=e[s])[0],n[1]);i.lineEnd();return}o[0]+=2e-6}a.push(r=new nq(n,e,null,!0)),l.push(r.o=new nq(n,null,r,!1)),a.push(r=new nq(o,e,null,!1)),l.push(r.o=new nq(o,null,r,!0))}}),a.length){for(l.sort(t),nB(a),nB(l),s=0,o=l.length;s<o;++s)l[s].e=r=!r;for(var c,h,u=a[0];;){for(var d=u,f=!0;d.v;)if((d=d.n)===u)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(s=0,o=c.length;s<o;++s)i.point((h=c[s])[0],h[1]);else n(d.x,d.n.x,1,i);d=d.n}else{if(f)for(s=(c=d.p.z).length-1;s>=0;--s)i.point((h=c[s])[0],h[1]);else n(d.x,d.p.x,-1,i);d=d.p}c=(d=d.o).z,f=!f}while(!d.v);i.lineEnd()}}}function nB(e){if(t=e.length){for(var t,r,n=0,i=e[0];++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function nF(e){return nn(e[0])<=r7?e[0]:nu(e[0])*((nn(e[0])+r7)%ne-r7)}function nQ(e,t,r,n){return function(i){var s,o,a,l=t(i),c=nz(),h=t(c),u=!1,d={point:f,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=b,d.lineEnd=v,o=[],s=[]},polygonEnd:function(){d.point=f,d.lineStart=m,d.lineEnd=g,o=rh(o);var e=function(e,t){var r=nF(t),n=t[1],i=nh(n),s=[nh(r),-no(r),0],o=0,a=0,l=new tB;1===i?n=r8+1e-6:-1===i&&(n=-r8-1e-6);for(var c=0,h=e.length;c<h;++c)if(d=(u=e[c]).length)for(var u,d,f=u[d-1],p=nF(f),m=f[1]/2+r9,g=nh(m),y=no(m),b=0;b<d;++b,p=x,g=k,y=O,f=v){var v=u[b],x=nF(v),w=v[1]/2+r9,k=nh(w),O=no(w),S=x-p,C=S>=0?1:-1,T=C*S,A=T>r7,M=g*k;if(l.add(ns(M*C*nh(T),y*O+M*no(T))),o+=A?S+C*ne:S,A^p>=r^x>=r){var E=nT(nS(f),nS(v));nE(E);var N=nT(s,E);nE(N);var _=(A^S>=0?-1:1)*nm(N[2]);(n>_||n===_&&(E[0]||E[1]))&&(a+=A^S>=0?1:-1)}}return(o<-1e-6||o<1e-6&&l<-1e-12)^1&a}(s,n);o.length?(u||(i.polygonStart(),u=!0),n$(o,nH,e,r,i)):e&&(u||(i.polygonStart(),u=!0),i.lineStart(),r(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),o=s=null},sphere:function(){i.polygonStart(),i.lineStart(),r(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function f(t,r){e(t,r)&&i.point(t,r)}function p(e,t){l.point(e,t)}function m(){d.point=p,l.lineStart()}function g(){d.point=f,l.lineEnd()}function y(e,t){a.push([e,t]),h.point(e,t)}function b(){h.lineStart(),a=[]}function v(){y(a[0][0],a[0][1]),h.lineEnd();var e,t,r,n,l=h.clean(),d=c.result(),f=d.length;if(a.pop(),s.push(a),a=null,f){if(1&l){if((t=(r=d[0]).length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),e=0;e<t;++e)i.point((n=r[e])[0],n[1]);i.lineEnd()}return}f>1&&2&l&&d.push(d.pop().concat(d.shift())),o.push(d.filter(nV))}}return d}}function nV(e){return e.length>1}function nH(e,t){return((e=e.x)[0]<0?e[1]-r8-1e-6:r8-e[1])-((t=t.x)[0]<0?t[1]-r8-1e-6:r8-t[1])}n_.invert=n_;let nW=nQ(function(){return!0},function(e){var t,r=NaN,n=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(s,o){var a,l,c,h,u,d,f,p=s>0?r7:-r7,m=nn(s-r);1e-6>nn(m-r7)?(e.point(r,n=(n+o)/2>0?r8:-r8),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(p,n),e.point(s,n),t=0):i!==p&&m>=r7&&(1e-6>nn(r-i)&&(r-=1e-6*i),1e-6>nn(s-p)&&(s-=1e-6*p),a=r,l=n,c=s,h=o,n=nn(f=nh(a-c))>1e-6?ni((nh(l)*(d=no(h))*nh(c)-nh(h)*(u=no(l))*nh(a))/(u*d*f)):(l+h)/2,e.point(i,n),e.lineEnd(),e.lineStart(),e.point(p,n),t=0),e.point(r=s,n=o),i=p},lineEnd:function(){e.lineEnd(),r=n=NaN},clean:function(){return 2-t}}},function(e,t,r,n){var i;if(null==e)i=r*r8,n.point(-r7,i),n.point(0,i),n.point(r7,i),n.point(r7,0),n.point(r7,-i),n.point(0,-i),n.point(-r7,-i),n.point(-r7,0),n.point(-r7,i);else if(nn(e[0]-t[0])>1e-6){var s=e[0]<t[0]?r7:-r7;i=r*s/2,n.point(-s,i),n.point(0,i),n.point(s,i)}else n.point(t[0],t[1])},[-r7,-r8]);function nU(e,t,r,n){function i(i,s){return e<=i&&i<=r&&t<=s&&s<=n}function s(i,s,a,c){var h=0,u=0;if(null==i||(h=o(i,a))!==(u=o(s,a))||0>l(i,s)^a>0)do c.point(0===h||3===h?e:r,h>1?n:t);while((h=(h+a+4)%4)!==u);else c.point(s[0],s[1])}function o(n,i){return 1e-6>nn(n[0]-e)?i>0?0:3:1e-6>nn(n[0]-r)?i>0?2:1:1e-6>nn(n[1]-t)?+(i>0):i>0?3:2}function a(e,t){return l(e.x,t.x)}function l(e,t){var r=o(e,1),n=o(t,1);return r!==n?r-n:0===r?t[1]-e[1]:1===r?e[0]-t[0]:2===r?e[1]-t[1]:t[0]-e[0]}return function(o){var l,c,h,u,d,f,p,m,g,y,b,v=o,x=nz(),w={point:k,lineStart:function(){w.point=O,c&&c.push(h=[]),y=!0,g=!1,p=m=NaN},lineEnd:function(){l&&(O(u,d),f&&g&&x.rejoin(),l.push(x.result())),w.point=k,g&&v.lineEnd()},polygonStart:function(){v=x,l=[],c=[],b=!0},polygonEnd:function(){var t=function(){for(var t=0,r=0,i=c.length;r<i;++r)for(var s,o,a=c[r],l=1,h=a.length,u=a[0],d=u[0],f=u[1];l<h;++l)s=d,o=f,d=(u=a[l])[0],f=u[1],o<=n?f>n&&(d-s)*(n-o)>(f-o)*(e-s)&&++t:f<=n&&(d-s)*(n-o)<(f-o)*(e-s)&&--t;return t}(),r=b&&t,i=(l=rh(l)).length;(r||i)&&(o.polygonStart(),r&&(o.lineStart(),s(null,null,1,o),o.lineEnd()),i&&n$(l,a,t,s,o),o.polygonEnd()),v=o,l=c=h=null}};function k(e,t){i(e,t)&&v.point(e,t)}function O(s,o){var a=i(s,o);if(c&&h.push([s,o]),y)u=s,d=o,f=a,y=!1,a&&(v.lineStart(),v.point(s,o));else if(a&&g)v.point(s,o);else{var l=[p=Math.max(-1e9,Math.min(1e9,p)),m=Math.max(-1e9,Math.min(1e9,m))],x=[s=Math.max(-1e9,Math.min(1e9,s)),o=Math.max(-1e9,Math.min(1e9,o))];!function(e,t,r,n,i,s){var o,a=e[0],l=e[1],c=t[0],h=t[1],u=0,d=1,f=c-a,p=h-l;if(o=r-a,!(!f&&o>0)){if(o/=f,f<0){if(o<u)return;o<d&&(d=o)}else if(f>0){if(o>d)return;o>u&&(u=o)}if(o=i-a,!(!f&&o<0)){if(o/=f,f<0){if(o>d)return;o>u&&(u=o)}else if(f>0){if(o<u)return;o<d&&(d=o)}if(o=n-l,!(!p&&o>0)){if(o/=p,p<0){if(o<u)return;o<d&&(d=o)}else if(p>0){if(o>d)return;o>u&&(u=o)}if(o=s-l,!(!p&&o<0)){if(o/=p,p<0){if(o>d)return;o>u&&(u=o)}else if(p>0){if(o<u)return;o<d&&(d=o)}return u>0&&(e[0]=a+u*f,e[1]=l+u*p),d<1&&(t[0]=a+d*f,t[1]=l+d*p),!0}}}}}(l,x,e,t,r,n)?a&&(v.lineStart(),v.point(s,o),b=!1):(g||(v.lineStart(),v.point(l[0],l[1])),v.point(x[0],x[1]),a||v.lineEnd(),b=!1)}p=s,m=o,g=a}return w}}let nG=e=>e;var nX,nY,nZ,nJ,nK,n0,n1,n2,n4,n5,n3=new tB,n6=new tB,n7={point:ng,lineStart:ng,lineEnd:ng,polygonStart:function(){n7.lineStart=n8,n7.lineEnd=ir},polygonEnd:function(){n7.lineStart=n7.lineEnd=n7.point=ng,n3.add(nn(n6)),n6=new tB},result:function(){var e=n3/2;return n3=new tB,e}};function n8(){n7.point=n9}function n9(e,t){n7.point=ie,n1=n4=e,n2=n5=t}function ie(e,t){n6.add(n5*e-n4*t),n4=e,n5=t}function ir(){ie(n1,n2)}var ii,is,io,ia,il=1/0,ic=1/0,ih=-1/0,iu=ih,id={point:function(e,t){e<il&&(il=e),e>ih&&(ih=e),t<ic&&(ic=t),t>iu&&(iu=t)},lineStart:ng,lineEnd:ng,polygonStart:ng,polygonEnd:ng,result:function(){var e=[[il,ic],[ih,iu]];return ih=iu=-(ic=il=1/0),e}},ip=0,im=0,ig=0,iy=0,ib=0,iv=0,ix=0,iw=0,ik=0,iO={point:iS,lineStart:iC,lineEnd:iM,polygonStart:function(){iO.lineStart=iE,iO.lineEnd=iN},polygonEnd:function(){iO.point=iS,iO.lineStart=iC,iO.lineEnd=iM},result:function(){var e=ik?[ix/ik,iw/ik]:iv?[iy/iv,ib/iv]:ig?[ip/ig,im/ig]:[NaN,NaN];return ip=im=ig=iy=ib=iv=ix=iw=ik=0,e}};function iS(e,t){ip+=e,im+=t,++ig}function iC(){iO.point=iT}function iT(e,t){iO.point=iA,iS(io=e,ia=t)}function iA(e,t){var r=e-io,n=t-ia,i=nd(r*r+n*n);iy+=i*(io+e)/2,ib+=i*(ia+t)/2,iv+=i,iS(io=e,ia=t)}function iM(){iO.point=iS}function iE(){iO.point=i_}function iN(){ij(ii,is)}function i_(e,t){iO.point=ij,iS(ii=io=e,is=ia=t)}function ij(e,t){var r=e-io,n=t-ia,i=nd(r*r+n*n);iy+=i*(io+e)/2,ib+=i*(ia+t)/2,iv+=i,ix+=(i=ia*e-io*t)*(io+e),iw+=i*(ia+t),ik+=3*i,iS(io=e,ia=t)}function iD(e){this._context=e}iD.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ne)}},result:ng};var iR,iP,iI,iz,iL,iq=new tB,i$={point:ng,lineStart:function(){i$.point=iB},lineEnd:function(){iR&&iF(iP,iI),i$.point=ng},polygonStart:function(){iR=!0},polygonEnd:function(){iR=null},result:function(){var e=+iq;return iq=new tB,e}};function iB(e,t){i$.point=iF,iP=iz=e,iI=iL=t}function iF(e,t){iz-=e,iL-=t,iq.add(nd(iz*iz+iL*iL)),iz=e,iL=t}class iQ{constructor(e){this._append=null==e?iV:function(e){let t=Math.floor(e);if(!(t>=0))throw RangeError(`invalid digits: ${e}`);if(t>15)return iV;if(t!==i){let e=10**t;i=t,s=function(t){let r=1;this._+=t[0];for(let n=t.length;r<n;++r)this._+=Math.round(arguments[r]*e)/e+t[r]}}return s}(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(e,t){switch(this._point){case 0:this._append`M${e},${t}`,this._point=1;break;case 1:this._append`L${e},${t}`;break;default:if(this._append`M${e},${t}`,this._radius!==o||this._append!==s){let e=this._radius,t=this._;this._="",this._append`m0,${e}a${e},${e} 0 1,1 0,${-2*e}a${e},${e} 0 1,1 0,${2*e}z`,o=e,s=this._append,a=this._,this._=t}this._+=a}}result(){let e=this._;return this._="",e.length?e:null}}function iV(e){let t=1;this._+=e[0];for(let r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function iH(e,t){let r=3,n=4.5,i,s;function o(e){return e&&("function"==typeof n&&s.pointRadius(+n.apply(this,arguments)),nk(e,i(s))),s.result()}return o.area=function(e){return nk(e,i(n7)),n7.result()},o.measure=function(e){return nk(e,i(i$)),i$.result()},o.bounds=function(e){return nk(e,i(id)),id.result()},o.centroid=function(e){return nk(e,i(iO)),iO.result()},o.projection=function(t){return arguments.length?(i=null==t?(e=null,nG):(e=t).stream,o):e},o.context=function(e){return arguments.length?(s=null==e?(t=null,new iQ(r)):new iD(t=e),"function"!=typeof n&&s.pointRadius(n),o):t},o.pointRadius=function(e){return arguments.length?(n="function"==typeof e?e:(s.pointRadius(+e),+e),o):n},o.digits=function(e){if(!arguments.length)return r;if(null==e)r=null;else{let t=Math.floor(e);if(!(t>=0))throw RangeError(`invalid digits: ${e}`);r=t}return null===t&&(s=new iQ(r)),o},o.projection(e).digits(r).context(t)}function iW(e){return{stream:iU(e)}}function iU(e){return function(t){var r=new iG;for(var n in e)r[n]=e[n];return r.stream=t,r}}function iG(){}function iX(e,t,r){var n=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=n&&e.clipExtent(null),nk(r,e.stream(id)),t(id.result()),null!=n&&e.clipExtent(n),e}function iY(e,t,r){return iX(e,function(r){var n=t[1][0]-t[0][0],i=t[1][1]-t[0][1],s=Math.min(n/(r[1][0]-r[0][0]),i/(r[1][1]-r[0][1])),o=+t[0][0]+(n-s*(r[1][0]+r[0][0]))/2,a=+t[0][1]+(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},r)}function iZ(e,t,r){return iY(e,[[0,0],t],r)}function iJ(e,t,r){return iX(e,function(r){var n=+t,i=n/(r[1][0]-r[0][0]),s=(n-i*(r[1][0]+r[0][0]))/2,o=-i*r[0][1];e.scale(150*i).translate([s,o])},r)}function iK(e,t,r){return iX(e,function(r){var n=+t,i=n/(r[1][1]-r[0][1]),s=-i*r[0][0],o=(n-i*(r[1][1]+r[0][1]))/2;e.scale(150*i).translate([s,o])},r)}iG.prototype={constructor:iG,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var i0=no(30*nr);function i1(e,t){var r;return+t?function(e,t){function r(n,i,s,o,a,l,c,h,u,d,f,p,m,g){var y=c-n,b=h-i,v=y*y+b*b;if(v>4*t&&m--){var x=o+d,w=a+f,k=l+p,O=nd(x*x+w*w+k*k),S=nm(k/=O),C=1e-6>nn(nn(k)-1)||1e-6>nn(s-u)?(s+u)/2:ns(w,x),T=e(C,S),A=T[0],M=T[1],E=A-n,N=M-i,_=b*E-y*N;(_*_/v>t||nn((y*E+b*N)/v-.5)>.3||o*d+a*f+l*p<i0)&&(r(n,i,s,o,a,l,A,M,C,x/=O,w/=O,k,m,g),g.point(A,M),r(A,M,C,x,w,k,c,h,u,d,f,p,m,g))}}return function(t){var n,i,s,o,a,l,c,h,u,d,f,p,m={point:g,lineStart:y,lineEnd:v,polygonStart:function(){t.polygonStart(),m.lineStart=x},polygonEnd:function(){t.polygonEnd(),m.lineStart=y}};function g(r,n){r=e(r,n),t.point(r[0],r[1])}function y(){h=NaN,m.point=b,t.lineStart()}function b(n,i){var s=nS([n,i]),o=e(n,i);r(h,u,c,d,f,p,h=o[0],u=o[1],c=n,d=s[0],f=s[1],p=s[2],16,t),t.point(h,u)}function v(){m.point=g,t.lineEnd()}function x(){y(),m.point=w,m.lineEnd=k}function w(e,t){b(n=e,t),i=h,s=u,o=d,a=f,l=p,m.point=b}function k(){r(h,u,c,d,f,p,i,s,n,o,a,l,16,t),m.lineEnd=v,v()}return m}}(e,t):(r=e,iU({point:function(e,t){e=r(e,t),this.stream.point(e[0],e[1])}}))}var i2=iU({point:function(e,t){this.stream.point(e*nr,t*nr)}});function i4(e,t,r,n,i,s){if(!s)return function(e,t,r,n,i){function s(s,o){return[t+e*(s*=n),r-e*(o*=i)]}return s.invert=function(s,o){return[(s-t)/e*n,(r-o)/e*i]},s}(e,t,r,n,i);var o=no(s),a=nh(s),l=o*e,c=a*e,h=o/e,u=a/e,d=(a*r-o*t)/e,f=(a*t+o*r)/e;function p(e,s){return[l*(e*=n)-c*(s*=i)+t,r-c*e-l*s]}return p.invert=function(e,t){return[n*(h*e-u*t+d),i*(f-u*e-h*t)]},p}function i5(e){return i3(function(){return e})()}function i3(e){var t,r,n,i,s,o,a,l,c,h,u=150,d=480,f=250,p=0,m=0,g=0,y=0,b=0,v=0,x=1,w=1,k=null,O=nW,S=null,C=nG,T=.5;function A(e){return l(e[0]*nr,e[1]*nr)}function M(e){return(e=l.invert(e[0],e[1]))&&[e[0]*nt,e[1]*nt]}function E(){var e=i4(u,0,0,x,w,v).apply(null,t(p,m)),n=i4(u,d-e[0],f-e[1],x,w,v);return r=nj(g,y,b),a=nN(t,n),l=nN(r,a),o=i1(a,T),N()}function N(){return c=h=null,A}return A.stream=function(e){var t;return c&&h===e?c:c=i2((t=r,iU({point:function(e,r){var n=t(e,r);return this.stream.point(n[0],n[1])}}))(O(o(C(h=e)))))},A.preclip=function(e){return arguments.length?(O=e,k=void 0,N()):O},A.postclip=function(e){return arguments.length?(C=e,S=n=i=s=null,N()):C},A.clipAngle=function(e){return arguments.length?(O=+e?function(e){var t=no(e),r=2*nr,n=t>0,i=nn(t)>1e-6;function s(e,r){return no(e)*no(r)>t}function o(e,r,n){var i=nS(e),s=nS(r),o=[1,0,0],a=nT(i,s),l=nC(a,a),c=a[0],h=l-c*c;if(!h)return!n&&e;var u=nT(o,a),d=nM(o,t*l/h);nA(d,nM(a,-t*c/h));var f=nC(d,u),p=nC(u,u),m=f*f-p*(nC(d,d)-1);if(!(m<0)){var g=nd(m),y=nM(u,(-f-g)/p);if(nA(y,d),y=nO(y),!n)return y;var b,v=e[0],x=r[0],w=e[1],k=r[1];x<v&&(b=v,v=x,x=b);var O=x-v,S=1e-6>nn(O-r7);if(!S&&k<w&&(b=w,w=k,k=b),S||O<1e-6?S?w+k>0^y[1]<(1e-6>nn(y[0]-v)?w:k):w<=y[1]&&y[1]<=k:O>r7^(v<=y[0]&&y[0]<=x)){var C=nM(u,(-f+g)/p);return nA(C,d),[y,nO(C)]}}}function a(t,r){var i=n?e:r7-e,s=0;return t<-i?s|=1:t>i&&(s|=2),r<-i?s|=4:r>i&&(s|=8),s}return nQ(s,function(e){var t,r,l,c,h;return{lineStart:function(){c=l=!1,h=1},point:function(u,d){var f,p,m=[u,d],g=s(u,d),y=n?g?0:a(u,d):g?a(u+(u<0?r7:-r7),d):0;(!t&&(c=l=g)&&e.lineStart(),g!==l&&(!(p=o(t,m))||nL(t,p)||nL(m,p))&&(m[2]=1),g!==l)?(h=0,g?(e.lineStart(),p=o(m,t),e.point(p[0],p[1])):(p=o(t,m),e.point(p[0],p[1],2),e.lineEnd()),t=p):i&&t&&n^g&&!(y&r)&&(f=o(m,t,!0))&&(h=0,n?(e.lineStart(),e.point(f[0][0],f[0][1]),e.point(f[1][0],f[1][1]),e.lineEnd()):(e.point(f[1][0],f[1][1]),e.lineEnd(),e.lineStart(),e.point(f[0][0],f[0][1],3))),!g||t&&nL(t,m)||e.point(m[0],m[1]),t=m,l=g,r=y},lineEnd:function(){l&&e.lineEnd(),t=null},clean:function(){return h|(c&&l)<<1}}},function(t,n,i,s){!function(e,t,r,n,i,s){if(r){var o=no(t),a=nh(t),l=n*r;null==i?(i=t+n*ne,s=t-l/2):(i=nI(o,i),s=nI(o,s),(n>0?i<s:i>s)&&(i+=n*ne));for(var c,h=i;n>0?h>s:h<s;h-=l)c=nO([o,-a*no(h),-a*nh(h)]),e.point(c[0],c[1])}}(s,e,r,i,t,n)},n?[0,-e]:[-r7,e-r7])}(k=e*nr):(k=null,nW),N()):k*nt},A.clipExtent=function(e){return arguments.length?(C=null==e?(S=n=i=s=null,nG):nU(S=+e[0][0],n=+e[0][1],i=+e[1][0],s=+e[1][1]),N()):null==S?null:[[S,n],[i,s]]},A.scale=function(e){return arguments.length?(u=+e,E()):u},A.translate=function(e){return arguments.length?(d=+e[0],f=+e[1],E()):[d,f]},A.center=function(e){return arguments.length?(p=e[0]%360*nr,m=e[1]%360*nr,E()):[p*nt,m*nt]},A.rotate=function(e){return arguments.length?(g=e[0]%360*nr,y=e[1]%360*nr,b=e.length>2?e[2]%360*nr:0,E()):[g*nt,y*nt,b*nt]},A.angle=function(e){return arguments.length?(v=e%360*nr,E()):v*nt},A.reflectX=function(e){return arguments.length?(x=e?-1:1,E()):x<0},A.reflectY=function(e){return arguments.length?(w=e?-1:1,E()):w<0},A.precision=function(e){return arguments.length?(o=i1(a,T=e*e),N()):nd(T)},A.fitExtent=function(e,t){return iY(A,e,t)},A.fitSize=function(e,t){return iZ(A,e,t)},A.fitWidth=function(e,t){return iJ(A,e,t)},A.fitHeight=function(e,t){return iK(A,e,t)},function(){return t=e.apply(this,arguments),A.invert=t.invert&&M,E()}}function i6(e){var t=0,r=r7/3,n=i3(e),i=n(t,r);return i.parallels=function(e){return arguments.length?n(t=e[0]*nr,r=e[1]*nr):[t*nt,r*nt]},i}function i7(e,t){var r=nh(e),n=(r+nh(t))/2;if(1e-6>nn(n))return function(e){var t=no(e);function r(e,r){return[e*t,nh(r)/t]}return r.invert=function(e,r){return[e/t,nm(r*t)]},r}(e);var i=1+r*(2*n-r),s=nd(i)/n;function o(e,t){var r=nd(i-2*n*nh(t))/n;return[r*nh(e*=n),s-r*no(e)]}return o.invert=function(e,t){var r=s-t,o=ns(e,nn(r))*nu(r);return r*n<0&&(o-=r7*nu(e)*nu(r)),[o/n,nm((i-(e*e+r*r)*n*n)/(2*n))]},o}function i8(){return i6(i7).scale(155.424).center([0,33.6442])}function i9(){return i8().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function se(){var e,t,r,n,i,s,o=i9(),a=i8().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=i8().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){s=[e,t]}};function h(e){var t=e[0],o=e[1];return s=null,r.point(t,o),s||(n.point(t,o),s)||(i.point(t,o),s)}function u(){return e=t=null,h}return h.invert=function(e){var t=o.scale(),r=o.translate(),n=(e[0]-r[0])/t,i=(e[1]-r[1])/t;return(i>=.12&&i<.234&&n>=-.425&&n<-.214?a:i>=.166&&i<.234&&n>=-.214&&n<-.115?l:o).invert(e)},h.stream=function(r){var n,i;return e&&t===r?e:(i=(n=[o.stream(t=r),a.stream(r),l.stream(r)]).length,e={point:function(e,t){for(var r=-1;++r<i;)n[r].point(e,t)},sphere:function(){for(var e=-1;++e<i;)n[e].sphere()},lineStart:function(){for(var e=-1;++e<i;)n[e].lineStart()},lineEnd:function(){for(var e=-1;++e<i;)n[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<i;)n[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<i;)n[e].polygonEnd()}})},h.precision=function(e){return arguments.length?(o.precision(e),a.precision(e),l.precision(e),u()):o.precision()},h.scale=function(e){return arguments.length?(o.scale(e),a.scale(.35*e),l.scale(e),h.translate(o.translate())):o.scale()},h.translate=function(e){if(!arguments.length)return o.translate();var t=o.scale(),s=+e[0],h=+e[1];return r=o.translate(e).clipExtent([[s-.455*t,h-.238*t],[s+.455*t,h+.238*t]]).stream(c),n=a.translate([s-.307*t,h+.201*t]).clipExtent([[s-.425*t+1e-6,h+.12*t+1e-6],[s-.214*t-1e-6,h+.234*t-1e-6]]).stream(c),i=l.translate([s-.205*t,h+.212*t]).clipExtent([[s-.214*t+1e-6,h+.166*t+1e-6],[s-.115*t-1e-6,h+.234*t-1e-6]]).stream(c),u()},h.fitExtent=function(e,t){return iY(h,e,t)},h.fitSize=function(e,t){return iZ(h,e,t)},h.fitWidth=function(e,t){return iJ(h,e,t)},h.fitHeight=function(e,t){return iK(h,e,t)},h.scale(1070)}function st(e){return function(t,r){var n=no(t),i=no(r),s=e(n*i);return s===1/0?[2,0]:[s*i*nh(t),s*nh(r)]}}function sr(e){return function(t,r){var n=nd(t*t+r*r),i=e(n),s=nh(i);return[ns(t*s,n*no(i)),nm(n&&r*s/n)]}}var sn=st(function(e){return nd(2/(1+e))});function si(){return i5(sn).scale(124.75).clipAngle(179.999)}sn.invert=sr(function(e){return 2*nm(e/2)});var ss=st(function(e){return(e=np(e))&&e/nh(e)});function so(){return i5(ss).scale(79.4188).clipAngle(179.999)}function sa(e,t){return[e,nl(nf((r8+t)/2))]}function sl(){return sc(sa).scale(961/ne)}function sc(e){var t,r,n,i=i5(e),s=i.center,o=i.scale,a=i.translate,l=i.clipExtent,c=null;function h(){var s=r7*o(),a=i((function(e){function t(t){return t=e(t[0]*nr,t[1]*nr),t[0]*=nt,t[1]*=nt,t}return e=nj(e[0]*nr,e[1]*nr,e.length>2?e[2]*nr:0),t.invert=function(t){return t=e.invert(t[0]*nr,t[1]*nr),t[0]*=nt,t[1]*=nt,t},t})(i.rotate()).invert([0,0]));return l(null==c?[[a[0]-s,a[1]-s],[a[0]+s,a[1]+s]]:e===sa?[[Math.max(a[0]-s,c),t],[Math.min(a[0]+s,r),n]]:[[c,Math.max(a[1]-s,t)],[r,Math.min(a[1]+s,n)]])}return i.scale=function(e){return arguments.length?(o(e),h()):o()},i.translate=function(e){return arguments.length?(a(e),h()):a()},i.center=function(e){return arguments.length?(s(e),h()):s()},i.clipExtent=function(e){return arguments.length?(null==e?c=t=r=n=null:(c=+e[0][0],t=+e[0][1],r=+e[1][0],n=+e[1][1]),h()):null==c?null:[[c,t],[r,n]]},h()}function sh(e){return nf((r8+e)/2)}function su(e,t){var r=no(e),n=e===t?nh(e):nl(r/no(t))/nl(sh(t)/sh(e)),i=r*nc(sh(e),n)/n;if(!n)return sa;function s(e,t){i>0?t<-r8+1e-6&&(t=-r8+1e-6):t>r8-1e-6&&(t=r8-1e-6);var r=i/nc(sh(t),n);return[r*nh(n*e),i-r*no(n*e)]}return s.invert=function(e,t){var r=i-t,s=nu(n)*nd(e*e+r*r),o=ns(e,nn(r))*nu(r);return r*n<0&&(o-=r7*nu(e)*nu(r)),[o/n,2*ni(nc(i/s,1/n))-r8]},s}function sd(){return i6(su).scale(109.5).parallels([30,30])}function sf(e,t){return[e,t]}function sp(){return i5(sf).scale(152.63)}function sm(e,t){var r=no(e),n=e===t?nh(e):(r-no(t))/(t-e),i=r/n+e;if(1e-6>nn(n))return sf;function s(e,t){var r=i-t,s=n*e;return[r*nh(s),i-r*no(s)]}return s.invert=function(e,t){var r=i-t,s=ns(e,nn(r))*nu(r);return r*n<0&&(s-=r7*nu(e)*nu(r)),[s/n,i-nu(n)*nd(e*e+r*r)]},s}function sg(){return i6(sm).scale(131.154).center([0,13.9389])}ss.invert=sr(function(e){return e}),sa.invert=function(e,t){return[e,2*ni(na(t))-r8]},sf.invert=sf;var sy=nd(3)/2;function sb(e,t){var r=nm(sy*nh(t)),n=r*r,i=n*n*n;return[e*no(r)/(sy*(1.340264+-.24331799999999998*n+i*(.0062510000000000005+.034164*n))),r*(1.340264+-.081106*n+i*(893e-6+.003796*n))]}function sv(){return i5(sb).scale(177.158)}function sx(e,t){var r=no(t),n=no(e)*r;return[r*nh(e)/n,nh(t)/n]}function sw(){return i5(sx).scale(144.049).clipAngle(60)}function sk(e,t){return[no(t)*nh(e),nh(t)]}function sO(){return i5(sk).scale(249.5).clipAngle(90.000001)}function sS(e,t){var r=no(t),n=1+no(e)*r;return[r*nh(e)/n,nh(t)/n]}function sC(){return i5(sS).scale(250).clipAngle(142)}function sT(e,t){return[nl(nf((r8+t)/2)),-e]}function sA(){var e=sc(sT),t=e.center,r=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?r([e[0],e[1],e.length>2?e[2]+90:90]):[(e=r())[0],e[1],e[2]-90]},r([0,0,90]).scale(159.155)}function sM(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function sE(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}sb.invert=function(e,t){for(var r,n,i=t,s=i*i,o=s*s*s,a=0;a<12&&(n=i*(1.340264+-.081106*s+o*(893e-6+.003796*s))-t,i-=r=n/(1.340264+-.24331799999999998*s+o*(.0062510000000000005+.034164*s)),o=(s=i*i)*s*s,!(1e-12>nn(r)));++a);return[sy*e*(1.340264+-.24331799999999998*s+o*(.0062510000000000005+.034164*s))/no(i),nm(nh(i)/sy)]},sx.invert=sr(ni),sk.invert=sr(nm),sS.invert=sr(function(e){return 2*ni(e)}),sT.invert=function(e,t){return[-t,2*ni(na(e))-r8]};let sN=Symbol("implicit");function s_(){var e=new tF,t=[],r=[],n=sN;function i(i){let s=e.get(i);if(void 0===s){if(n!==sN)return n;e.set(i,s=t.push(i)-1)}return r[s%r.length]}return i.domain=function(r){if(!arguments.length)return t.slice();for(let n of(t=[],e=new tF,r))e.has(n)||e.set(n,t.push(n)-1);return i},i.range=function(e){return arguments.length?(r=Array.from(e),i):r.slice()},i.unknown=function(e){return arguments.length?(n=e,i):n},i.copy=function(){return s_(t,r).unknown(n)},sM.apply(i,arguments),i}function sj(){var e,t,r=s_().unknown(void 0),n=r.domain,i=r.range,s=0,o=1,a=!1,l=0,c=0,h=.5;function u(){var r=n().length,u=o<s,d=u?o:s,f=u?s:o;e=(f-d)/Math.max(1,r-l+2*c),a&&(e=Math.floor(e)),d+=(f-d-e*(r-l))*h,t=e*(1-l),a&&(d=Math.round(d),t=Math.round(t));var p=(0,T.A)(r).map(function(t){return d+e*t});return i(u?p.reverse():p)}return delete r.unknown,r.domain=function(e){return arguments.length?(n(e),u()):n()},r.range=function(e){return arguments.length?([s,o]=e,s*=1,o*=1,u()):[s,o]},r.rangeRound=function(e){return[s,o]=e,s*=1,o*=1,a=!0,u()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(a=!!e,u()):a},r.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),u()):l},r.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),u()):l},r.paddingOuter=function(e){return arguments.length?(c=+e,u()):c},r.align=function(e){return arguments.length?(h=Math.max(0,Math.min(1,e)),u()):h},r.copy=function(){return sj(n(),[s,o]).round(a).paddingInner(l).paddingOuter(c).align(h)},sM.apply(u(),arguments)}function sD(e){return+e}var sR=[0,1];function sP(e){return e}function sI(e,t){var r;return(t-=e*=1)?function(r){return(r-e)/t}:(r=isNaN(t)?NaN:.5,function(){return r})}function sz(e,t,r){var n=e[0],i=e[1],s=t[0],o=t[1];return i<n?(n=sI(i,n),s=r(o,s)):(n=sI(n,i),s=r(s,o)),function(e){return s(n(e))}}function sL(e,t,r){var n=Math.min(e.length,t.length)-1,i=Array(n),s=Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)i[o]=sI(e[o],e[o+1]),s[o]=r(t[o],t[o+1]);return function(t){var r=(0,T.a5)(e,t,1,n)-1;return s[r](i[r](t))}}function sq(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function s$(){var e,t,r,n,i,s,o=sR,a=sR,l=rz,c=sP;function h(){var e,t,r,l=Math.min(o.length,a.length);return c!==sP&&(e=o[0],t=o[l-1],e>t&&(r=e,e=t,t=r),c=function(r){return Math.max(e,Math.min(t,r))}),n=l>2?sL:sz,i=s=null,u}function u(t){return null==t||isNaN(t*=1)?r:(i||(i=n(o.map(e),a,l)))(e(c(t)))}return u.invert=function(r){return c(t((s||(s=n(a,o.map(e),M.k)))(r)))},u.domain=function(e){return arguments.length?(o=Array.from(e,sD),h()):o.slice()},u.range=function(e){return arguments.length?(a=Array.from(e),h()):a.slice()},u.rangeRound=function(e){return a=Array.from(e),l=rL,h()},u.clamp=function(e){return arguments.length?(c=!!e||sP,h()):c!==sP},u.interpolate=function(e){return arguments.length?(l=e,h()):l},u.unknown=function(e){return arguments.length?(r=e,u):r},function(r,n){return e=r,t=n,h()}}function sB(e){var t=e.domain;return e.ticks=function(e){var r=t();return t6(r[0],r[r.length-1],e??10)},e.tickFormat=function(e,r){var n=t();return function(e,t,r,n){var i,s,o,a=t8(e,t,r);switch((n=r0(n??",f")).type){case"s":var l=Math.max(Math.abs(e),Math.abs(t));return null!=n.precision||isNaN(o=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(rJ(l)/3)))-rJ(Math.abs(a))))||(n.precision=o),n0(n,l);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(o=Math.max(0,rJ(Math.abs(Math.max(Math.abs(e),Math.abs(t)))-(i=Math.abs(i=a)))-rJ(i))+1)||(n.precision=o-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(o=Math.max(0,-rJ(Math.abs(a))))||(n.precision=o-("%"===n.type)*2)}return nK(n)}(n[0],n[n.length-1],e??10,r)},e.nice=function(r){null==r&&(r=10);var n,i,s=t(),o=0,a=s.length-1,l=s[o],c=s[a],h=10;for(c<l&&(i=l,l=c,c=i,i=o,o=a,a=i);h-- >0;){if((i=t7(l,c,r))===n)return s[o]=l,s[a]=c,t(s);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else if(i<0)l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i;else break;n=i}return e},e}function sF(){var e=s$()(sP,sP);return e.copy=function(){return sq(e,sF())},sM.apply(e,arguments),sB(e)}function sQ(e,t){e=e.slice();var r,n=0,i=e.length-1,s=e[n],o=e[i];return o<s&&(r=n,n=i,i=r,r=s,s=o,o=r),e[n]=t.floor(s),e[i]=t.ceil(o),e}function sV(e){return Math.log(e)}function sH(e){return Math.exp(e)}function sW(e){return-Math.log(-e)}function sU(e){return-Math.exp(-e)}function sG(e){return isFinite(e)?+("1e"+e):e<0?0:e}function sX(e){return(t,r)=>-e(-t,r)}function sY(e){let t=e(sV,sH),r=t.domain,n=10,i,s;function o(){var o,a;return i=(o=n)===Math.E?Math.log:10===o&&Math.log10||2===o&&Math.log2||(o=Math.log(o),e=>Math.log(e)/o),s=10===(a=n)?sG:a===Math.E?Math.exp:e=>Math.pow(a,e),r()[0]<0?(i=sX(i),s=sX(s),e(sW,sU)):e(sV,sH),t}return t.base=function(e){return arguments.length?(n=+e,o()):n},t.domain=function(e){return arguments.length?(r(e),o()):r()},t.ticks=e=>{let t=r(),o=t[0],a=t[t.length-1],l=a<o;l&&([o,a]=[a,o]);let c=i(o),h=i(a),u,d,f=null==e?10:+e,p=[];if(!(n%1)&&h-c<f){if(c=Math.floor(c),h=Math.ceil(h),o>0){for(;c<=h;++c)for(u=1;u<n;++u)if(!((d=c<0?u/s(-c):u*s(c))<o)){if(d>a)break;p.push(d)}}else for(;c<=h;++c)for(u=n-1;u>=1;--u)if(!((d=c>0?u/s(-c):u*s(c))<o)){if(d>a)break;p.push(d)}2*p.length<f&&(p=t6(o,a,f))}else p=t6(c,h,Math.min(h-c,f)).map(s);return l?p.reverse():p},t.tickFormat=(e,r)=>{if(null==e&&(e=10),null==r&&(r=10===n?"s":","),"function"!=typeof r&&(n%1||null!=(r=r0(r)).precision||(r.trim=!0),r=nK(r)),e===1/0)return r;let o=Math.max(1,n*e/t.ticks().length);return e=>{let t=e/s(Math.round(i(e)));return t*n<n-.5&&(t*=n),t<=o?r(e):""}},t.nice=()=>r(sQ(r(),{floor:e=>s(Math.floor(i(e))),ceil:e=>s(Math.ceil(i(e)))})),t}function sZ(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function sJ(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function sK(e){var t=1,r=e(sZ(1),sJ(t));return r.constant=function(r){return arguments.length?e(sZ(t=+r),sJ(t)):t},sB(r)}function s0(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function s1(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function s2(e){return e<0?-e*e:e*e}function s4(e){var t=e(sP,sP),r=1;return t.exponent=function(t){return arguments.length?1==(r=+t)?e(sP,sP):.5===r?e(s1,s2):e(s0(r),s0(1/r)):r},sB(t)}let s5=new Date,s3=new Date;function s6(e,t,r,n){function i(t){return e(t=0==arguments.length?new Date:new Date(+t)),t}return i.floor=t=>(e(t=new Date(+t)),t),i.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),i.round=e=>{let t=i(e),r=i.ceil(e);return e-t<r-e?t:r},i.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),i.range=(r,n,s)=>{let o;let a=[];if(r=i.ceil(r),s=null==s?1:Math.floor(s),!(r<n)||!(s>0))return a;do a.push(o=new Date(+r)),t(r,s),e(r);while(o<r&&r<n);return a},i.filter=r=>s6(t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},(e,n)=>{if(e>=e){if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););}}),r&&(i.count=(t,n)=>(s5.setTime(+t),s3.setTime(+n),e(s5),e(s3),Math.floor(r(s5,s3))),i.every=e=>isFinite(e=Math.floor(e))&&e>0?e>1?i.filter(n?t=>n(t)%e==0:t=>i.count(0,t)%e==0):i:null),i}let s7=s6(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);s7.every=e=>isFinite(e=Math.floor(e))&&e>0?e>1?s6(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):s7:null,s7.range;let s8=s6(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+1e3*t)},(e,t)=>(t-e)/1e3,e=>e.getUTCSeconds());s8.range;let s9=s6(e=>{e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())},(e,t)=>{e.setTime(+e+6e4*t)},(e,t)=>(t-e)/6e4,e=>e.getMinutes());s9.range;let oe=s6(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+6e4*t)},(e,t)=>(t-e)/6e4,e=>e.getUTCMinutes());oe.range;let ot=s6(e=>{e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-6e4*e.getMinutes())},(e,t)=>{e.setTime(+e+36e5*t)},(e,t)=>(t-e)/36e5,e=>e.getHours());ot.range;let or=s6(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+36e5*t)},(e,t)=>(t-e)/36e5,e=>e.getUTCHours());or.range;let on=s6(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/864e5,e=>e.getDate()-1);on.range;let oi=s6(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>e.getUTCDate()-1);oi.range;let oo=s6(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>Math.floor(e/864e5));function oa(e){return s6(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/6048e5)}oo.range;let ol=oa(0),oc=oa(1),oh=oa(2),ou=oa(3),od=oa(4),of=oa(5),op=oa(6);function om(e){return s6(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/6048e5)}ol.range,oc.range,oh.range,ou.range,od.range,of.range,op.range;let og=om(0),oy=om(1),ob=om(2),ov=om(3),ox=om(4),ow=om(5),ok=om(6);og.range,oy.range,ob.range,ov.range,ox.range,ow.range,ok.range;let oO=s6(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());oO.range;let oS=s6(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());oS.range;let oC=s6(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());oC.every=e=>isFinite(e=Math.floor(e))&&e>0?s6(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)}):null,oC.range;let oT=s6(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());function oA(e,t,r,n,i,s){let o=[[s8,1,1e3],[s8,5,5e3],[s8,15,15e3],[s8,30,3e4],[s,1,6e4],[s,5,3e5],[s,15,9e5],[s,30,18e5],[i,1,36e5],[i,3,108e5],[i,6,216e5],[i,12,432e5],[n,1,864e5],[n,2,1728e5],[r,1,6048e5],[t,1,2592e6],[t,3,7776e6],[e,1,31536e6]];function a(t,r,n){let i=Math.abs(r-t)/n,s=(0,T.a6)(([,,e])=>e).right(o,i);if(s===o.length)return e.every(t8(t/31536e6,r/31536e6,n));if(0===s)return s7.every(Math.max(t8(t,r,n),1));let[a,l]=o[i/o[s-1][2]<o[s][2]/i?s-1:s];return a.every(l)}return[function(e,t,r){let n=t<e;n&&([e,t]=[t,e]);let i=r&&"function"==typeof r.range?r:a(e,t,r),s=i?i.range(e,+t+1):[];return n?s.reverse():s},a]}oT.every=e=>isFinite(e=Math.floor(e))&&e>0?s6(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)}):null,oT.range;let[oM,oE]=oA(oT,oS,og,oo,or,oe),[oN,o_]=oA(oC,oO,ol,on,ot,s9);function oj(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function oD(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function oR(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}var oP={"-":"",_:" ",0:"0"},oI=/^\s*\d+/,oz=/^%/,oL=/[\\^$*+?|[\]().{}]/g;function oq(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",s=i.length;return n+(s<r?Array(r-s+1).join(t)+i:i)}function o$(e){return e.replace(oL,"\\$&")}function oB(e){return RegExp("^(?:"+e.map(o$).join("|")+")","i")}function oF(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function oQ(e,t,r){var n=oI.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function oV(e,t,r){var n=oI.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function oH(e,t,r){var n=oI.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function oW(e,t,r){var n=oI.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function oU(e,t,r){var n=oI.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function oG(e,t,r){var n=oI.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function oX(e,t,r){var n=oI.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function oY(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function oZ(e,t,r){var n=oI.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function oJ(e,t,r){var n=oI.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function oK(e,t,r){var n=oI.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function o0(e,t,r){var n=oI.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function o1(e,t,r){var n=oI.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function o2(e,t,r){var n=oI.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function o4(e,t,r){var n=oI.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function o5(e,t,r){var n=oI.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function o3(e,t,r){var n=oI.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function o6(e,t,r){var n=oz.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function o7(e,t,r){var n=oI.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function o8(e,t,r){var n=oI.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function o9(e,t){return oq(e.getDate(),t,2)}function ae(e,t){return oq(e.getHours(),t,2)}function at(e,t){return oq(e.getHours()%12||12,t,2)}function ar(e,t){return oq(1+on.count(oC(e),e),t,3)}function an(e,t){return oq(e.getMilliseconds(),t,3)}function ai(e,t){return an(e,t)+"000"}function as(e,t){return oq(e.getMonth()+1,t,2)}function ao(e,t){return oq(e.getMinutes(),t,2)}function aa(e,t){return oq(e.getSeconds(),t,2)}function al(e){var t=e.getDay();return 0===t?7:t}function ac(e,t){return oq(ol.count(oC(e)-1,e),t,2)}function ah(e){var t=e.getDay();return t>=4||0===t?od(e):od.ceil(e)}function au(e,t){return e=ah(e),oq(od.count(oC(e),e)+(4===oC(e).getDay()),t,2)}function ad(e){return e.getDay()}function af(e,t){return oq(oc.count(oC(e)-1,e),t,2)}function ap(e,t){return oq(e.getFullYear()%100,t,2)}function am(e,t){return oq((e=ah(e)).getFullYear()%100,t,2)}function ag(e,t){return oq(e.getFullYear()%1e4,t,4)}function ay(e,t){var r=e.getDay();return oq((e=r>=4||0===r?od(e):od.ceil(e)).getFullYear()%1e4,t,4)}function ab(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+oq(t/60|0,"0",2)+oq(t%60,"0",2)}function av(e,t){return oq(e.getUTCDate(),t,2)}function ax(e,t){return oq(e.getUTCHours(),t,2)}function aw(e,t){return oq(e.getUTCHours()%12||12,t,2)}function ak(e,t){return oq(1+oi.count(oT(e),e),t,3)}function aO(e,t){return oq(e.getUTCMilliseconds(),t,3)}function aS(e,t){return aO(e,t)+"000"}function aC(e,t){return oq(e.getUTCMonth()+1,t,2)}function aT(e,t){return oq(e.getUTCMinutes(),t,2)}function aA(e,t){return oq(e.getUTCSeconds(),t,2)}function aM(e){var t=e.getUTCDay();return 0===t?7:t}function aE(e,t){return oq(og.count(oT(e)-1,e),t,2)}function aN(e){var t=e.getUTCDay();return t>=4||0===t?ox(e):ox.ceil(e)}function a_(e,t){return e=aN(e),oq(ox.count(oT(e),e)+(4===oT(e).getUTCDay()),t,2)}function aj(e){return e.getUTCDay()}function aD(e,t){return oq(oy.count(oT(e)-1,e),t,2)}function aR(e,t){return oq(e.getUTCFullYear()%100,t,2)}function aP(e,t){return oq((e=aN(e)).getUTCFullYear()%100,t,2)}function aI(e,t){return oq(e.getUTCFullYear()%1e4,t,4)}function az(e,t){var r=e.getUTCDay();return oq((e=r>=4||0===r?ox(e):ox.ceil(e)).getUTCFullYear()%1e4,t,4)}function aL(){return"+0000"}function aq(){return"%"}function a$(e){return+e}function aB(e){return Math.floor(+e/1e3)}function aF(e){return new Date(e)}function aQ(e){return e instanceof Date?+e:+new Date(+e)}function aV(e,t,r,n,i,s,o,a,l,c){var h=s$()(sP,sP),u=h.invert,d=h.domain,f=c(".%L"),p=c(":%S"),m=c("%I:%M"),g=c("%I %p"),y=c("%a %d"),b=c("%b %d"),v=c("%B"),x=c("%Y");function w(e){return(l(e)<e?f:a(e)<e?p:o(e)<e?m:s(e)<e?g:n(e)<e?i(e)<e?y:b:r(e)<e?v:x)(e)}return h.invert=function(e){return new Date(u(e))},h.domain=function(e){return arguments.length?d(Array.from(e,aQ)):d().map(aF)},h.ticks=function(t){var r=d();return e(r[0],r[r.length-1],t??10)},h.tickFormat=function(e,t){return null==t?w:c(t)},h.nice=function(e){var r=d();return e&&"function"==typeof e.range||(e=t(r[0],r[r.length-1],e??10)),e?d(sQ(r,e)):h},h.copy=function(){return sq(h,aV(e,t,r,n,i,s,o,a,l,c))},h}function aH(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function aW(){var e,t,r,n,i,s,o,a=0,l=.5,c=1,h=1,u=sP,d=!1;function f(e){return isNaN(e*=1)?o:(e=.5+((e=+s(e))-t)*(h*e<h*t?n:i),u(d?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var r,n,i;return arguments.length?([r,n,i]=t,u=rQ(e,[r,n,i]),f):[u(0),u(.5),u(1)]}}return f.domain=function(o){return arguments.length?([a,l,c]=o,e=s(a*=1),t=s(l*=1),r=s(c*=1),n=e===t?0:.5/(t-e),i=t===r?0:.5/(r-t),h=t<e?-1:1,f):[a,l,c]},f.clamp=function(e){return arguments.length?(d=!!e,f):d},f.interpolator=function(e){return arguments.length?(u=e,f):u},f.range=p(rz),f.rangeRound=p(rL),f.unknown=function(e){return arguments.length?(o=e,f):o},function(o){return s=o,e=o(a),t=o(l),r=o(c),n=e===t?0:.5/(t-e),i=t===r?0:.5/(r-t),h=t<e?-1:1,f}}function aU(e){for(var t=e.length/6|0,r=Array(t),n=0;n<t;)r[n]="#"+e.slice(6*n,6*++n);return r}d=(u=function(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,c=oB(i),h=oF(i),u=oB(s),d=oF(s),f=oB(o),p=oF(o),m=oB(a),g=oF(a),y=oB(l),b=oF(l),v={a:function(e){return o[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return a[e.getMonth()]},c:null,d:o9,e:o9,f:ai,g:am,G:ay,H:ae,I:at,j:ar,L:an,m:as,M:ao,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:a$,s:aB,S:aa,u:al,U:ac,V:au,w:ad,W:af,x:null,X:null,y:ap,Y:ag,Z:ab,"%":aq},x={a:function(e){return o[e.getUTCDay()]},A:function(e){return s[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return a[e.getUTCMonth()]},c:null,d:av,e:av,f:aS,g:aP,G:az,H:ax,I:aw,j:ak,L:aO,m:aC,M:aT,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:a$,s:aB,S:aA,u:aM,U:aE,V:a_,w:aj,W:aD,x:null,X:null,y:aR,Y:aI,Z:aL,"%":aq},w={a:function(e,t,r){var n=f.exec(t.slice(r));return n?(e.w=p.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(e,t,r){var n=u.exec(t.slice(r));return n?(e.w=d.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(e,t,r){var n=y.exec(t.slice(r));return n?(e.m=b.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(e,t,r){var n=m.exec(t.slice(r));return n?(e.m=g.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(e,r,n){return S(e,t,r,n)},d:oK,e:oK,f:o3,g:oX,G:oG,H:o1,I:o1,j:o0,L:o5,m:oJ,M:o2,p:function(e,t,r){var n=c.exec(t.slice(r));return n?(e.p=h.get(n[0].toLowerCase()),r+n[0].length):-1},q:oZ,Q:o7,s:o8,S:o4,u:oV,U:oH,V:oW,w:oQ,W:oU,x:function(e,t,n){return S(e,r,t,n)},X:function(e,t,r){return S(e,n,t,r)},y:oX,Y:oG,Z:oY,"%":o6};function k(e,t){return function(r){var n,i,s,o=[],a=-1,l=0,c=e.length;for(r instanceof Date||(r=new Date(+r));++a<c;)37===e.charCodeAt(a)&&(o.push(e.slice(l,a)),null!=(i=oP[n=e.charAt(++a)])?n=e.charAt(++a):i="e"===n?" ":"0",(s=t[n])&&(n=s(r,i)),o.push(n),l=a+1);return o.push(e.slice(l,a)),o.join("")}}function O(e,t){return function(r){var n,i,s=oR(1900,void 0,1);if(S(s,e,r+="",0)!=r.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(!t||"Z"in s||(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(n=(i=(n=oD(oR(s.y,0,1))).getUTCDay())>4||0===i?oy.ceil(n):oy(n),n=oi.offset(n,(s.V-1)*7),s.y=n.getUTCFullYear(),s.m=n.getUTCMonth(),s.d=n.getUTCDate()+(s.w+6)%7):(n=(i=(n=oj(oR(s.y,0,1))).getDay())>4||0===i?oc.ceil(n):oc(n),n=on.offset(n,(s.V-1)*7),s.y=n.getFullYear(),s.m=n.getMonth(),s.d=n.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:+("W"in s)),i="Z"in s?oD(oR(s.y,0,1)).getUTCDay():oj(oR(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(i+5)%7:s.w+7*s.U-(i+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,oD(s)):oj(s)}}function S(e,t,r,n){for(var i,s,o=0,a=t.length,l=r.length;o<a;){if(n>=l)return -1;if(37===(i=t.charCodeAt(o++))){if(!(s=w[(i=t.charAt(o++))in oP?t.charAt(o++):i])||(n=s(e,r,n))<0)return -1}else if(i!=r.charCodeAt(n++))return -1}return n}return v.x=k(r,v),v.X=k(n,v),v.c=k(t,v),x.x=k(r,x),x.X=k(n,x),x.c=k(t,x),{format:function(e){var t=k(e+="",v);return t.toString=function(){return e},t},parse:function(e){var t=O(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=k(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=O(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})).format,u.parse,f=u.utcFormat,u.utcParse;let aG=aU("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),aX=aU("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),aY=aU("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),aZ=aU("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),aJ=aU("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),aK=aU("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),a0=aU("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),a1=aU("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),a2=aU("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),a4=aU("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),a5=aU("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),a3=e=>(0,M.t)(e[e.length-1]);var a6=[,,,].concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(aU);let a7=a3(a6);var a8=[,,,].concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(aU);let a9=a3(a8);var le=[,,,].concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(aU);let lt=a3(le);var lr=[,,,].concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(aU);let ln=a3(lr);var li=[,,,].concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(aU);let ls=a3(li);var lo=[,,,].concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(aU);let la=a3(lo);var ll=[,,,].concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(aU);let lc=a3(ll);var lh=[,,,].concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(aU);let lu=a3(lh);var ld=[,,,].concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(aU);let lf=a3(ld);var lp=[,,,].concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(aU);let lm=a3(lp);var lg=[,,,].concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(aU);let ly=a3(lg);var lb=[,,,].concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(aU);let lv=a3(lb);var lx=[,,,].concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(aU);let lw=a3(lx);var lk=[,,,].concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(aU);let lO=a3(lk);var lS=[,,,].concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(aU);let lC=a3(lS);var lT=[,,,].concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(aU);let lA=a3(lT);var lM=[,,,].concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(aU);let lE=a3(lM);var lN=[,,,].concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(aU);let l_=a3(lN);var lj=[,,,].concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(aU);let lD=a3(lj);var lR=[,,,].concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(aU);let lP=a3(lR);var lI=[,,,].concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(aU);let lz=a3(lI);var lL=[,,,].concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(aU);let lq=a3(lL);var l$=[,,,].concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(aU);let lB=a3(l$);var lF=[,,,].concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(aU);let lQ=a3(lF);var lV=[,,,].concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(aU);let lH=a3(lV);var lW=[,,,].concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(aU);let lU=a3(lW);var lG=[,,,].concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(aU);let lX=a3(lG);function lY(e){return"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-(e=Math.max(0,Math.min(1,e)))*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-2710.57*e)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-67.37*e)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-2475.67*e)))))))+")"}let lZ=rF(rP(300,.5,0),rP(-240,.5,1));var lJ=rF(rP(-100,.75,.35),rP(80,1.5,.8)),lK=rF(rP(260,.75,.35),rP(80,1.5,.8)),l0=rP();function l1(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return l0.h=360*e-100,l0.s=1.5-1.5*t,l0.l=.8-.9*t,l0+""}var l2=(0,M.u)(),l4=Math.PI/3,l5=2*Math.PI/3;function l3(e){var t;return l2.r=255*(t=Math.sin(e=(.5-e)*Math.PI))*t,l2.g=255*(t=Math.sin(e+l4))*t,l2.b=255*(t=Math.sin(e+l5))*t,l2+""}function l6(e){return"rgb("+Math.max(0,Math.min(255,Math.round(34.61+(e=Math.max(0,Math.min(1,e)))*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-14825.05*e)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+707.56*e)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-6838.66*e)))))))+")"}function l7(e){var t=e.length;return function(r){return e[Math.max(0,Math.min(t-1,Math.floor(r*t)))]}}let l8=l7(aU("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var l9=l7(aU("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),ce=l7(aU("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),ct=l7(aU("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));let cr=Object.freeze(Object.defineProperty({__proto__:null,interpolateBlues:lq,interpolateBrBG:a7,interpolateBuGn:lm,interpolateBuPu:ly,interpolateCividis:lY,interpolateCool:lK,interpolateCubehelixDefault:lZ,interpolateGnBu:lv,interpolateGreens:lB,interpolateGreys:lQ,interpolateInferno:ce,interpolateMagma:l9,interpolateOrRd:lw,interpolateOranges:lX,interpolatePRGn:a9,interpolatePiYG:lt,interpolatePlasma:ct,interpolatePuBu:lC,interpolatePuBuGn:lO,interpolatePuOr:ln,interpolatePuRd:lA,interpolatePurples:lH,interpolateRainbow:l1,interpolateRdBu:ls,interpolateRdGy:la,interpolateRdPu:lE,interpolateRdYlBu:lc,interpolateRdYlGn:lu,interpolateReds:lU,interpolateSinebow:l3,interpolateSpectral:lf,interpolateTurbo:l6,interpolateViridis:l8,interpolateWarm:lJ,interpolateYlGn:lD,interpolateYlGnBu:l_,interpolateYlOrBr:lP,interpolateYlOrRd:lz,schemeAccent:aX,schemeBlues:lL,schemeBrBG:a6,schemeBuGn:lp,schemeBuPu:lg,schemeCategory10:aG,schemeDark2:aY,schemeGnBu:lb,schemeGreens:l$,schemeGreys:lF,schemeObservable10:aZ,schemeOrRd:lx,schemeOranges:lG,schemePRGn:a8,schemePaired:aJ,schemePastel1:aK,schemePastel2:a0,schemePiYG:le,schemePuBu:lS,schemePuBuGn:lk,schemePuOr:lr,schemePuRd:lT,schemePurples:lV,schemeRdBu:li,schemeRdGy:lo,schemeRdPu:lM,schemeRdYlBu:ll,schemeRdYlGn:lh,schemeReds:lW,schemeSet1:a1,schemeSet2:a2,schemeSet3:a4,schemeSpectral:ld,schemeTableau10:a5,schemeYlGn:lj,schemeYlGnBu:lN,schemeYlOrBr:lR,schemeYlOrRd:lI},Symbol.toStringTag,{value:"Module"}));function cn(e){return function(){return e}}let ci=Math.cos,cs=Math.min,co=Math.sin,ca=Math.sqrt,cl=Math.PI,cc=2*cl;function ch(e){this._context=e}function cu(e){return new ch(e)}function cd(e){return e[0]}function cf(e){return e[1]}ch.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};class cp{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}let cm=ca(3),cg={draw(e,t){let r=.59436*ca(t+cs(t/28,.75)),n=r/2,i=n*cm;e.moveTo(0,r),e.lineTo(0,-r),e.moveTo(-i,-n),e.lineTo(i,n),e.moveTo(-i,n),e.lineTo(i,-n)}},cy={draw(e,t){let r=ca(t/cl);e.moveTo(r,0),e.arc(0,0,r,0,cc)}},cb={draw(e,t){let r=ca(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},cv=ca(1/3),cx=2*cv,cw={draw(e,t){let r=ca(t/cx),n=r*cv;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},ck={draw(e,t){let r=.62625*ca(t);e.moveTo(0,-r),e.lineTo(r,0),e.lineTo(0,r),e.lineTo(-r,0),e.closePath()}},cO={draw(e,t){let r=.87559*ca(t-cs(t/7,2));e.moveTo(-r,0),e.lineTo(r,0),e.moveTo(0,r),e.lineTo(0,-r)}},cS={draw(e,t){let r=ca(t),n=-r/2;e.rect(n,n,r,r)}},cC={draw(e,t){let r=.4431*ca(t);e.moveTo(r,r),e.lineTo(r,-r),e.lineTo(-r,-r),e.lineTo(-r,r),e.closePath()}},cT=co(cl/10)/co(7*cl/10),cA=co(cc/10)*cT,cM=-ci(cc/10)*cT,cE={draw(e,t){let r=ca(.8908130915292852*t),n=cA*r,i=cM*r;e.moveTo(0,-r),e.lineTo(n,i);for(let t=1;t<5;++t){let s=cc*t/5,o=ci(s),a=co(s);e.lineTo(a*r,-o*r),e.lineTo(o*n-a*i,a*n+o*i)}e.closePath()}},cN=ca(3),c_={draw(e,t){let r=-ca(t/(3*cN));e.moveTo(0,2*r),e.lineTo(-cN*r,-r),e.lineTo(cN*r,-r),e.closePath()}},cj=ca(3),cD={draw(e,t){let r=.6824*ca(t),n=r/2,i=r*cj/2;e.moveTo(0,-r),e.lineTo(i,n),e.lineTo(-i,n),e.closePath()}},cR=ca(3)/2,cP=1/ca(12),cI=(cP/2+1)*3,cz={draw(e,t){let r=ca(t/cI),n=r/2,i=r*cP,s=r*cP+r,o=-n;e.moveTo(n,i),e.lineTo(n,s),e.lineTo(o,s),e.lineTo(-.5*n-cR*i,cR*n+-.5*i),e.lineTo(-.5*n-cR*s,cR*n+-.5*s),e.lineTo(-.5*o-cR*s,cR*o+-.5*s),e.lineTo(-.5*n+cR*i,-.5*i-cR*n),e.lineTo(-.5*n+cR*s,-.5*s-cR*n),e.lineTo(-.5*o+cR*s,-.5*s-cR*o),e.closePath()}},cL={draw(e,t){let r=.6189*ca(t-cs(t/6,1.7));e.moveTo(-r,-r),e.lineTo(r,r),e.moveTo(-r,r),e.lineTo(r,-r)}},cq=[cy,cb,cw,cS,cE,c_,cz],c$=[cy,cO,cL,cD,cg,cC,ck];function cB(){}function cF(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function cQ(e){this._context=e}function cV(e){this._context=e}function cH(e){this._context=e}function cW(e,t){this._basis=new cQ(e),this._beta=t}cQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:cF(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:cF(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},cV.prototype={areaStart:cB,areaEnd:cB,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:cF(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},cH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:cF(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},cW.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,r=e.length-1;if(r>0)for(var n,i=e[0],s=t[0],o=e[r]-i,a=t[r]-s,l=-1;++l<=r;)n=l/r,this._basis.point(this._beta*e[l]+(1-this._beta)*(i+n*o),this._beta*t[l]+(1-this._beta)*(s+n*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};let cU=function e(t){function r(e){return 1===t?new cQ(e):new cW(e,t)}return r.beta=function(t){return e(+t)},r}(.85);function cG(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function cX(e,t){this._context=e,this._k=(1-t)/6}cX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:cG(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:cG(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};let cY=function e(t){function r(e){return new cX(e,t)}return r.tension=function(t){return e(+t)},r}(0);function cZ(e,t){this._context=e,this._k=(1-t)/6}cZ.prototype={areaStart:cB,areaEnd:cB,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:cG(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};let cJ=function e(t){function r(e){return new cZ(e,t)}return r.tension=function(t){return e(+t)},r}(0);function cK(e,t){this._context=e,this._k=(1-t)/6}cK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:cG(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};let c0=function e(t){function r(e){return new cK(e,t)}return r.tension=function(t){return e(+t)},r}(0);function c1(e,t,r){var n=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>1e-12){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);n=(n*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>1e-12){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,h=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*c+e._x1*e._l23_2a-t*e._l12_2a)/h,o=(o*c+e._y1*e._l23_2a-r*e._l12_2a)/h}e._context.bezierCurveTo(n,i,s,o,e._x2,e._y2)}function c2(e,t){this._context=e,this._alpha=t}c2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e*=1,t*=1,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:c1(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};let c4=function e(t){function r(e){return t?new c2(e,t):new cX(e,0)}return r.alpha=function(t){return e(+t)},r}(.5);function c5(e,t){this._context=e,this._alpha=t}c5.prototype={areaStart:cB,areaEnd:cB,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e*=1,t*=1,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:c1(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};let c3=function e(t){function r(e){return t?new c5(e,t):new cZ(e,0)}return r.alpha=function(t){return e(+t)},r}(.5);function c6(e,t){this._context=e,this._alpha=t}c6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e*=1,t*=1,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:c1(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};let c7=function e(t){function r(e){return t?new c6(e,t):new cK(e,0)}return r.alpha=function(t){return e(+t)},r}(.5);function c8(e){this._context=e}c8.prototype={areaStart:cB,areaEnd:cB,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e*=1,t*=1,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function c9(e,t,r){var n=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(n||i<0&&-0),o=(r-e._y1)/(i||n<0&&-0);return((s<0?-1:1)+(o<0?-1:1))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs((s*i+o*n)/(n+i)))||0}function he(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function ht(e,t,r){var n=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-n)/3;e._context.bezierCurveTo(n+a,i+a*t,s-a,o-a*r,s,o)}function hr(e){this._context=e}function hn(e){this._context=new hi(e)}function hi(e){this._context=e}function hs(e){this._context=e}function ho(e){var t,r,n=e.length-1,i=Array(n),s=Array(n),o=Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function ha(e,t){this._context=e,this._t=t}hr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ht(this,this._t0,he(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t*=1,(e*=1)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ht(this,he(this,r=c9(this,e,t)),r);break;default:ht(this,this._t0,r=c9(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(hn.prototype=Object.create(hr.prototype)).point=function(e,t){hr.prototype.point.call(this,t,e)},hi.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,s){this._context.bezierCurveTo(t,e,n,r,s,i)}},hs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r){if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=ho(e),i=ho(t),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],e[o],t[o])}(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},ha.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}};let hl=[{message:"Checking format...",time:4e3},{message:"Cleaning formatting niggles...",time:1e4}],hc=({apiEndpoint:e,token:t,onClick:r=null,onProjectCreated:n=(...e)=>{},children:i=null})=>{let s=(0,A.useContext)(T.a),[o,a]=(0,A.useState)(!1),[l,c]=(0,A.useState)([]),[h,u]=(0,A.useState)("Uploading");return T.j.jsxs("div",{className:"w-full h-full",children:[T.j.jsx(T.W,{disabled:o,acceptedFileTypes:[".csv",".xls",".xlsx",".pdf"],showIcon:!0,allowMultiple:!0,selectedFiles:l,onRemoveFile:e=>{console.time("CreateNewProject:onRemoveFile"),c(l.filter((t,r)=>r!==e)),console.timeEnd("CreateNewProject:onRemoveFile")},onFileSelect:async(e,t)=>{console.time("CreateNewProject:onFileSelect");try{c([...l,...t])}catch(e){console.error(e),s.error("Failed to process the files")}console.timeEnd("CreateNewProject:onFileSelect")},onDrop:async(e,t)=>{console.time("CreateNewProject:onDrop");try{c([...l,...t])}catch(e){s.error(e.message||"Failed to process the files"),console.log(e.stack)}console.timeEnd("CreateNewProject:onDrop")},onInvalidFiles:(e,t,r)=>{console.warn("Invalid files:",r,t),s.error("Only CSV or Excel files are accepted")}}),T.j.jsx(T.D,{className:(0,T.t)("absolute bottom-1/4 p-4 left-0 right-0 mx-auto w-fit rounded-full z-[10] shadow-md",o||!l.length?"pointer-events-none":""),disabled:o||0===l.length,variant:"primary",onClick:async()=>{try{if(r){await r(l);return}console.time("CreateNewProject:uploadFiles"),a(!0);let i=hl.map(({message:e,time:t})=>setTimeout(()=>{u(e)},t));u("Sending to servers");let{projectName:o,dbInfo:c}=await (0,M.v)(e,t,l);i.forEach(clearTimeout),s.success(`Project ${o} created successfully`),n(o,c)}catch(e){console.error("Error during file upload:",e),s.error(e.message||"Failed to upload files")}finally{a(!1),u(""),console.timeEnd("CreateNewProject:uploadFiles")}},children:i||(l.length?o?T.j.jsxs(T.j.Fragment,{children:[T.j.jsx(T.d,{}),h]}):"Click to upload":"Select some files")})]})},hh=A.memo(({oracleHistory:e,selectedProjectName:t,uploadNewProjectOption:r,selectedItemId:n,updateUrlWithItemId:i,projectSelector:s,setSelectedItem:o})=>T.j.jsx(T.Q,{open:!0,beforeTitle:s,location:"left",rootClassNames:"absolute left-0 h-full shadow-lg lg:shadow-none lg:sticky top-0 bg-gray-50 dark:bg-gray-800 z-20 border-r border-gray-100 dark:border-gray-700",title:T.j.jsxs("h2",{className:"font-bold text-gray-800 dark:text-gray-200 mb-3 text-lg flex items-center",children:[T.j.jsx("span",{className:"mr-2",children:"\uD83D\uDCDA"})," History"]}),contentClassNames:"w-72 p-5 rounded-tl-lg relative sm:block min-h-96 max-h-full overflow-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600 scrollbar-track-transparent",children:T.j.jsxs("div",{className:"space-y-4",children:[t!==r?T.j.jsx("div",{className:(0,T.t)("title hover:cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 history-item p-3 text-sm rounded-md transition-colors duration-200 mb-3 flex items-center border border-transparent",n?"text-gray-700 dark:text-gray-300 hover:border-gray-200 dark:hover:border-gray-700":"font-medium bg-blue-50 dark:bg-gray-700 border-blue-200 dark:border-blue-800 shadow-sm text-blue-700 dark:text-blue-300"),onClick:()=>{i(null),o(null)},children:T.j.jsxs("div",{className:"flex flex-row items-center gap-2",children:[T.j.jsx(ei,{size:18}),T.j.jsx("span",{className:"font-medium",children:"New Report"}),T.j.jsx(T.a1,{keyValue:T.a7.NEW_QUESTION,meta:!0})]})}):T.j.jsx("p",{className:"text-xs",children:"Upload a new CSV/Excel file on the right"}),t!==r&&e[t]&&Object.entries(e[t]).map(([e,t])=>t&&0!==Object.keys(t).length?T.j.jsxs("div",{className:"mb-6",children:[T.j.jsxs("div",{className:"px-2 mb-3 text-xs font-medium tracking-wide text-blue-600 dark:text-blue-400 uppercase flex items-center",children:[T.j.jsx("div",{className:"h-px bg-blue-100 dark:bg-blue-800 flex-grow mr-2"}),e,T.j.jsx("div",{className:"h-px bg-blue-100 dark:bg-blue-800 flex-grow ml-2"})]}),t.map(e=>{var t,r,s;let a="report"===e.itemType,l=e.itemId,c=a?e.report_name||(null==(t=e.inputs)?void 0:t.user_question)||"Untitled report":e.analysisTree&&(null==(s=null==(r=Object.values(e.analysisTree)[0])?void 0:r.root)?void 0:s.user_question)||"Untitled analysis";return T.j.jsxs("div",{onClick:()=>{i(l),o(e)},className:(0,T.t)("title hover:cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 history-item p-3 text-sm rounded-md transition-colors duration-200 mb-2 border border-transparent",String(l)===String(n)?"font-medium bg-blue-50 dark:bg-gray-700 border-blue-200 dark:border-blue-800 shadow-sm text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:border-gray-200 dark:hover:border-gray-700"),children:[T.j.jsx("div",{className:"overflow-hidden transition-all duration-300 hover:max-h-[500px]",children:T.j.jsx("p",{className:"font-medium hover:line-clamp-none line-clamp-2",children:c})}),T.j.jsxs("div",{className:"flex items-center text-xs mt-1.5 text-gray-500 dark:text-gray-400",children:[T.j.jsx("span",{className:`inline-block w-3 h-3 mr-1.5 rounded-full ${a?e.status===Wl.DONE?"bg-blue-200 dark:bg-blue-800":e.status===Wl.THINKING?"bg-green-300 dark:bg-green-600":e.status===Wl.ERRORED?"bg-red-200 dark:bg-red-800":"bg-blue-200 dark:bg-blue-800":"bg-yellow-200 dark:bg-yellow-800"}`,title:`Type: ${a?"Report":"Analysis"}`}),new Date(e.date_created+"Z").toLocaleString(void 0,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})]})]},l)})]},e):null)]})}));function hu(){return{reportId:"",status:"blank",loading:!1,mode:"query-data",userQuestion:"",useWebsearch:!0,uploadedFiles:[]}}let hd={blank:"Add a spreadsheet or select a database, and start asking your questions!",getting_clarifications:"Analyzing database and thinking if I need to ask clarifying questions. This can take 15-20 seconds...",clarifications_received:"Please answer these clarifying questions...",submitting:"Submitting for generation..."};function hf(){let e=hu(),t=[];function r(r){e="function"==typeof r?r(e):r,t.forEach(e=>e())}return{getDraft:function(){return e},setDraft:r,resetDraft:function(){r(hu())},subscribeToDraftChanges:function(e){return t.push(e),function(){t=t.filter(t=>t!==e)}},setMode:function(e){r(t=>({...t,mode:e}))},setReportId:function(e){r(t=>({...t,reportId:e}))},setStatus:function(e){r(t=>({...t,status:e}))},setQuestion:function(e){r(t=>({...t,userQuestion:e}))}}}let hp=(0,A.createContext)({apiEndpoint:"",token:"",searchBarManager:hf()}),hm=({key:e,ctrl:t=!1,meta:r=!1,shift:n=!1,alt:i=!1,target:s,callback:o=()=>{}},a=[])=>{(0,A.useEffect)(()=>{let a=s??document,l=s=>{let a=window.navigator.platform.includes("Mac");s.key.toLowerCase()===e.toLowerCase()&&(r&&(a?s.metaKey:s.ctrlKey)||!r&&!(a?s.metaKey:s.ctrlKey))&&(t&&s.ctrlKey||!t&&!s.ctrlKey)&&(n&&s.shiftKey||!n&&!s.shiftKey)&&(i&&s.altKey||!i&&!s.altKey)&&(s.stopPropagation(),s.preventDefault(),o(s))};return a.addEventListener("keydown",l),()=>{a.removeEventListener("keydown",l)}},[e,o,...a])},hg=({clarification:e,options:t,input_type:r,onAnswerChange:n,onDismiss:i})=>{let s=(0,A.useMemo)(()=>{switch(r){case"single_choice":return T.j.jsx(T.S,{label:e,options:t.map(e=>({label:e,value:e})),onChange:n});case"multiple_choice":return T.j.jsx(T.P,{label:e,options:t.map(e=>({label:e,value:e})),onChange:n});default:return T.j.jsx(T.U,{label:e,onChange:e=>n(e.target.value)})}},[]);return T.j.jsxs("div",{className:"relative antialiased will-change-auto",children:[i&&T.j.jsx("button",{onClick:i,className:"absolute -right-2 -top-2 p-1 rounded-full bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 transition-colors will-change-auto z-[26]",title:"Dismiss",children:T.j.jsx(T.X,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),T.j.jsx("div",{className:"text-base font-medium will-change-auto",children:s})]})};function hy(){let{searchBarManager:e}=(0,A.useContext)(hp),t=(0,A.useSyncExternalStore)(e.subscribeToDraftChanges,e.getDraft);return T.j.jsx("div",{className:"w-full flex flex-col items-start relative justify-center m-auto antialiased",children:t.clarifications&&T.j.jsx("div",{className:"w-full max-w-4xl",children:T.j.jsx("div",{className:"space-y-4",children:t.clarifications.map((t,r)=>(0,A.createElement)(hg,{...t,key:r+t.clarification,onAnswerChange:t=>{e.setDraft(e=>({...e,clarifications:e.clarifications.map((e,n)=>n===r?{...e,answer:t,is_answered:!!t&&("string"==typeof t?!!t:t.length>0)}:e)}))},onDismiss:()=>{e.setDraft(e=>({...e,clarifications:e.clarifications.filter((e,t)=>t!==r)}))}}))})})})}let hb=(0,A.memo)(({selectedItem:e})=>{let{searchBarManager:t}=(0,A.useContext)(hp),[r,n]=(0,A.useState)(!1);(0,A.useEffect)(()=>{n(navigator.userAgent.toLowerCase().includes("mac"))},[]);let i=(0,A.useSyncExternalStore)(t.subscribeToDraftChanges,t.getDraft);return T.j.jsx("div",{className:(0,T.t)("text-lg dark:text-gray-200 font-light mb-0 flex items-center justify-between"),children:T.j.jsx("div",{children:(null==e?void 0:e.itemType)==="query-data"?"Ask a follow on question":hd[i.status]})})}),hv={"query-data":T.j.jsx(el,{className:"w-5 stroke-yellow-500"}),report:T.j.jsx(eo,{className:"w-5 stroke-fuchsia-300"})},hx={default:"absolute bottom-1/2 left-1/2 -translate-x-1/2 translate-y-1/2 w-full px-4 py-2","query-data":"absolute bottom-2 left-1/2 -translate-x-1/2 w-full px-4",report:"absolute -bottom-48 left-1/2 -translate-x-1/2 w-full px-4 opacity-0 h-0 overflow-hidden","new-project":"absolute -bottom-48 left-1/2 -translate-x-1/2 w-full px-4 opacity-0 h-0 overflow-hidden"},hw=A.memo(function({projectName:e,uploadNewProjectOption:t,onReportGenerated:r,onNewProjectCreated:n,createNewFastAnalysis:i,rootClassNames:s="",selectedItem:o=null,setSelectedItemId:a}){let[l,c]=(0,A.useState)(""),[h,u]=(0,A.useState)(!1),{searchBarManager:d,apiEndpoint:f,token:p}=(0,A.useContext)(hp),m=(0,A.useContext)(T.a),[g,y]=(0,A.useState)(!1),[b,v]=(0,A.useState)(!1),[x,w]=(0,A.useState)([]),[k,O]=(0,A.useState)([]),[S,C]=(0,A.useState)(!1),[E,N]=(0,A.useState)(!1),[_,j]=(0,A.useState)(!1),D=(0,A.useRef)(null),R=(0,A.useSyncExternalStore)(d.subscribeToDraftChanges,d.getDraft),P=(0,A.useRef)(null),I=(0,A.useCallback)(async()=>{var t,n;try{if(!R.reportId)throw Error("No report ID");if(!P.current.value&&!R.userQuestion)throw Error("No question!");let i=R.reportId,s=R.userQuestion||(null==(t=P.current)?void 0:t.value);d.setDraft(e=>({...e,status:"submitting"})),v(!0),c("");try{r({userQuestion:s,reportId:i,status:Wl.THINKING}),a(i),m.success("Report submitted for generation");try{await Wk(f,p,e,i,s,(null==(n=R.clarifications)?void 0:n.filter(e=>e.answer&&e.is_answered))||[],R.useWebsearch)}catch{console.log("Expected timeout for report generation")}}catch(e){console.error("Error handling report generation:",e)}d.resetDraft(),P.current.value=""}catch(e){c(`Error generating report: ${e}`),m.error(`Error generating report: ${e}`)}finally{v(!1)}},[R,f,p,e,r,m]);(0,A.useEffect)(()=>{y(navigator.userAgent.toLowerCase().includes("mac"))},[]),(0,A.useEffect)(()=>{(async()=>{if(!e||e===t||!p){w([]),O([]);return}try{C(!0);let t=await WS(f,p,e);w(t.tables),O(t.pdf_files)}catch(e){console.error("Error fetching tables and files:",e)}finally{C(!1)}})()},[e,f,p,t]);let[z,L]=(0,A.useState)(!1);(0,A.useEffect)(()=>{var e,t;R.userQuestion!==(null==(e=P.current)?void 0:e.value)&&(P.current.value=R.userQuestion,null==(t=P.current)||t.focus())},[R]),hm({key:T.a7.FOCUS_ORACLE_SEARCH,callback:r=>{var n;e===t||(null==o?void 0:o.itemType)==="report"||null==(n=P.current)||n.focus()}},[P]),hm({key:T.a7.NEW_QUESTION,meta:!0,callback:()=>{o&&window.dispatchEvent(new CustomEvent("oracle:new-report")),d.resetDraft(),P.current&&(P.current.value="",P.current.focus())}},[d,o,P]),hm({key:T.a7.TOGGLE_MODE,meta:!0,callback:()=>{if(!o){let e="query-data"===R.mode?"report":"query-data";P.current&&(P.current.style.transition="height 0.3s ease-in-out, opacity 0.3s ease-in-out"),d.setMode(e)}}},[R.mode,d,o,P]);let q=(0,A.useMemo)(()=>null,[]),$=(0,A.useCallback)(async()=>{var t,r;if(!(null!=(t=P.current)&&t.value)){c("Please enter a question");return}try{if(L(!0),v(!0),d.setDraft(e=>({...e,userQuestion:P.current.value,status:"getting_clarifications"})),c(""),(null==(r=R.uploadedFiles)?void 0:r.length)>0)try{await (0,M.v)(f,p,R.uploadedFiles,e);let t=await WS(f,p,e);w(t.tables),O(t.pdf_files)}catch(e){throw Error(`Failed to upload files: ${e.message}`)}let t=D.current||e;if("query-data"===R.mode||(null==o?void 0:o.itemType)==="query-data")d.resetDraft(),i(P.current.value,t),P.current&&(P.current.value="");else{let e=await WO(f,p,t,P.current.value);d.setDraft(t=>({...t,loading:!1,userQuestion:P.current.value,status:"clarifications_received",clarifications:e.clarifications,reportId:e.report_id,uploadedFiles:[]}))}}catch(e){console.log(e),c(e.toString()),d.resetDraft()}finally{v(!1),L(!1),D.current=null}},[f,p,R,o,e,P,L,v,d,c,w,O,D,i]),B=(0,A.useCallback)(async t=>{var r;if("/"===t.key&&t.stopPropagation(),"Enter"!==t.key||t.metaKey||t.ctrlKey||t.shiftKey||_||(t.stopPropagation(),N(!0),j(!0),setTimeout(()=>{N(!1)},3e3)),"Enter"===t.key&&(t.metaKey||t.ctrlKey)){let n=t.currentTarget.value;if(!n){c("Please enter a question");return}try{if(L(!0),v(!0),d.setDraft(e=>({...e,userQuestion:n,status:"getting_clarifications"})),c(""),(null==(r=R.uploadedFiles)?void 0:r.length)>0)try{await (0,M.v)(f,p,R.uploadedFiles,e);let t=await WS(f,p,e);w(t.tables),O(t.pdf_files)}catch(e){throw Error(`Failed to upload files: ${e.message}`)}let t=D.current||e;if("query-data"===R.mode||(null==o?void 0:o.itemType)==="query-data")d.resetDraft(),i(n,t),P.current&&(P.current.value="");else{let e=await WO(f,p,t,n);d.setDraft(t=>({...t,loading:!1,userQuestion:n,status:"clarifications_received",clarifications:e.clarifications,reportId:e.report_id,uploadedFiles:[]}))}}catch(e){console.log(e),c(e.toString()),d.resetDraft()}finally{v(!1),L(!1),D.current=null}}},[f,p,R,o,e,P,L,v,d,N,j,c,_,D,i]),F=(0,A.useMemo)(()=>0===x.length&&0===k.length||(null==o?void 0:o.itemType)==="query-data"||(null==o?void 0:o.itemType)==="report"?null:T.j.jsx("div",{className:"mb-3",children:T.j.jsx("div",{className:"p-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm max-h-96 overflow-y-auto custom-scrollbar",children:T.j.jsxs("div",{className:"flex flex-col gap-2",children:[x.length>0&&T.j.jsxs("div",{children:[T.j.jsxs("div",{className:"font-medium mb-1 flex items-center",children:[T.j.jsx(W,{className:"w-4 h-4 mr-2 text-blue-500 dark:text-blue-400"}),T.j.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:"Available Tables"})]}),T.j.jsx("div",{className:"flex flex-wrap gap-2 max-h-32 overflow-y-auto pr-1 custom-scrollbar",children:x.map(e=>T.j.jsx("div",{className:"bg-white dark:bg-gray-700 px-2 py-1 rounded border border-gray-200 dark:border-gray-600 text-xs text-gray-900 dark:text-gray-200 flex items-center",children:e},e))})]}),k.length>0&&T.j.jsxs("div",{children:[T.j.jsxs("div",{className:"font-medium mb-1 flex items-center",children:[T.j.jsx(T.a8,{className:"w-4 h-4 mr-2 text-blue-500 dark:text-blue-400"}),T.j.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:"Available PDF Files"})]}),T.j.jsx("div",{className:"flex flex-wrap gap-2 max-h-32 overflow-y-auto pr-1 custom-scrollbar",children:k.map(e=>T.j.jsx("div",{className:"bg-white dark:bg-gray-700 px-2 py-1 rounded border border-gray-200 dark:border-gray-600 text-xs text-gray-900 dark:text-gray-200 flex items-center",title:e.file_id,children:e.file_name},e.file_id))})]}),S&&T.j.jsxs("div",{className:"flex items-center justify-center p-1",children:[T.j.jsx(T.d,{classNames:"w-4 h-4 mr-2"}),T.j.jsx("span",{className:"text-xs text-gray-500",children:"Loading resources..."})]})]})})}),[x.length,k.length,S,null==o?void 0:o.itemType]);return T.j.jsxs("div",{className:(0,T.t)("oracle-search max-h-full transition-all duration-700 ease-in-out z-[30] *:transition-all *:duration-700 *:ease-in-out",hx[(null==o?void 0:o.itemType)||(e===t?"new-project":"default")]),children:[l&&T.j.jsx("div",{className:"mb-4 absolute -top-16",children:T.j.jsx(T.J,{type:"error",message:l,dismissable:!0,onDismiss:()=>c("")})}),F,T.j.jsxs(T.Y,{rootClassNames:(0,T.t)("min-h-0 relative z-[2] rounded-2xl p-2 border bg-white dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700 overflow-visible",(null==o?void 0:o.itemType)==="query-data"?"shadow-custom border-gray-300 dark:border-gray-600":"",s),acceptedFileTypes:[".csv",".pdf",".xlsx",".xls"],fileSelection:!1,allowMultiple:!0,onDragOver:e=>{e.preventDefault(),e.stopPropagation(),u(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),u(!1)},onInvalidFiles:(e,t,r)=>{m.error(r)},onDrop:async(t,r)=>{try{if(t.preventDefault(),t.stopPropagation(),(null==o?void 0:o.itemType)==="query-data")return;if(u(!1),!t.dataTransfer){console.error("No dataTransfer in drop event");return}if(0===r.length)throw console.error("No valid files found"),Error("Only CSV, Excel or PDF files are accepted.");v(!0),m.info("Uploading files...");try{let t=await (0,M.v)(f,p,r,e);if(t.projectName!==e){console.log("New project created from file upload:",t.projectName),m.success("New project created from file upload: "+t.projectName),D.current=t.projectName,n(D.current);let e=await WS(f,p,D.current);w(e.tables),O(e.pdf_files)}else{let t=await WS(f,p,e);w(t.tables),O(t.pdf_files)}}catch(e){throw console.error("Error uploading files:",e),Error(`Failed to upload files: ${e.message}`)}finally{v(!1)}}catch(e){console.error("Error processing files:",e),m.error(e.message),v(!1)}},children:[T.j.jsx(hb,{selectedItem:o}),T.j.jsx(T.U,{onChange:e=>{d.setQuestion(e.target.value)},prefix:q,ref:P,rootClassNames:(0,T.t)("w-full py-2 transition-all duration-300 ease-in-out","report"===R.mode?"min-h-[8rem]":"min-h-[5rem]"),textAreaClassNames:"border-0 outline-0 ring-0 focus:ring-0 bg-gray-50 w-full max-h-60",suffix:T.j.jsxs("div",{className:(0,T.t)("flex flex-col"),children:[T.j.jsxs("div",{className:(0,T.t)("dark:text-gray-400"),children:[T.j.jsxs("div",{className:"flex items-center justify-between",children:[T.j.jsxs("div",{children:["Press"," ",g?T.j.jsxs(T.j.Fragment,{children:[T.j.jsx(T.a9,{className:"inline align-middle w-2.5"}),"+ Enter"]}):"Ctrl + Enter",null!=o&&o.itemType?" to submit. ":" to start. Drop CSV or Excel files to analyse them. Drop PDFs to add context to the report. "]}),T.j.jsxs("div",{className:"relative",children:[T.j.jsx("button",{onClick:$,disabled:b,className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-lg text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Submit"}),E&&T.j.jsxs("div",{className:"absolute -top-10 right-0 z-40 px-3 py-2 text-sm font-medium bg-white text-gray-800 dark:bg-gray-800 dark:text-gray-200 rounded-md border border-gray-300 dark:border-gray-700 shadow-md whitespace-nowrap",children:["Press ",g?"+Enter":"Ctrl+Enter"," to submit",T.j.jsx("div",{className:"absolute w-3 h-3 bg-white dark:bg-gray-800 border-r border-b border-gray-300 dark:border-gray-700 transform rotate-45 -bottom-1.5 right-4"})]})]})]}),T.j.jsxs("div",{className:"flex gap-2 mt-1 text-xs text-gray-500 dark:text-gray-400",children:[T.j.jsx("span",{className:"flex items-center",children:T.j.jsx(T.a1,{keyValue:T.a7.FOCUS_ORACLE_SEARCH,className:"mr-1",text:"Focus search"})}),o&&T.j.jsx("span",{className:"flex items-center",children:T.j.jsx(T.a1,{keyValue:T.a7.NEW_QUESTION,className:"mr-1",meta:!0,text:"New question"})}),!(null!=o&&o.itemType)&&T.j.jsx("span",{className:"flex items-center",children:T.j.jsx(T.a1,{keyValue:T.a7.TOGGLE_MODE,className:"mr-1",meta:!0,text:"Toggle mode"})})]})]}),T.j.jsxs("div",{className:(0,T.t)("flex flex-row mt-8 gap-4 items-center",(null==o?void 0:o.itemType)==="query-data"&&"h-0 mt-0 overflow-hidden opacity-0"),children:[T.j.jsx("div",{className:"flex items-center gap-3",children:T.j.jsx(T.V,{disabled:(null==o?void 0:o.itemType)==="query-data"||z||!!(R.clarifications&&R.clarifications.length),onToggle:e=>{P.current&&(P.current.style.transition="height 0.3s ease-in-out, opacity 0.3s ease-in-out"),d.setMode(e?"report":"query-data"),L(!1)},checked:"report"===R.mode,showBothLabels:!0,onLabel:T.j.jsxs("span",{className:"flex items-center gap-1 transition-all duration-300 ease-in-out",children:[hv.report,T.j.jsx("span",{className:"whitespace-nowrap",children:"Deep Research"})]}),offLabel:T.j.jsxs("span",{className:"flex items-center gap-1 transition-all duration-300 ease-in-out",children:[hv["query-data"],T.j.jsx("span",{className:"whitespace-nowrap",children:"Fast Analysis"})]})})}),"report"===R.mode&&(null==o?void 0:o.itemType)!=="query-data"?T.j.jsx(T.V,{onLabel:"Use web search to enhance report",offLabel:"Use web search to enhance report",defaultOn:R.useWebsearch,disabled:z||!!(R.clarifications&&R.clarifications.length),onToggle:e=>{d.setDraft(t=>({...t,useWebsearch:e}))}}):null]})]}),disabled:b,placeholder:(null==o?void 0:o.itemType)==="query-data"?"Type here":h?"Release to drop":"report"===R.mode?`I will start a Deep Research process on your data tables, any PDF files you have uploaded, and the web. For best results:
- include the kind of analysis you want done
- your desired areas of focus
- any concrete sources you want me to look at`:"Type your question here or drop PDF, CSV or Excel files",autoResize:!0,defaultRows:1,textAreaHtmlProps:{style:{resize:"none"}},onKeyDown:B})]}),!b&&R.clarifications&&R.clarifications.length>0&&!o&&"query-data"!==R.mode&&T.j.jsxs("div",{className:"w-11/12 mx-auto my-0 flex flex-col z-[20] relative",children:[T.j.jsx("div",{className:"border border-blue-500 dark:border-sky-600 rounded-t-xl bg-sky-200 dark:bg-sky-900 border-b-0 mt-4",children:T.j.jsx("div",{className:"h-96 overflow-y-auto py-2 px-4",children:T.j.jsx(hy,{})})}),T.j.jsx("div",{className:"border border-blue-500 dark:border-sky-600 rounded-b-xl bg-sky-200 dark:bg-sky-900 py-3 px-4 border-t-0",children:T.j.jsx("button",{className:"bg-gray-600 text-white border-0 hover:bg-gray-700 dark:bg-gray-600 dark:hover:bg-gray-600 text-base py-2 px-4 rounded",onClick:I,children:"Generate"})})]}),b&&T.j.jsx("div",{className:"w-11/12 mx-auto border border-blue-500 dark:border-sky-600 rounded-xl bg-sky-200 dark:bg-sky-900 overflow-hidden mt-4",children:T.j.jsx("div",{className:"flex flex-col gap-2 py-2 px-4",children:T.j.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-300 flex items-center",children:[T.j.jsx(T.d,{classNames:"w-4 mr-1"}),hd[R.status]]})})})]})}),hk=({selectedProjectName:e,projectNames:t,uploadNewProjectOption:r,hasUploadedFiles:n,onProjectChange:i})=>T.j.jsx("div",{children:T.j.jsx(T.S,{disabled:n,label:"Select project",rootClassNames:"mb-2",value:e,allowClear:!1,allowCreateNewOption:!1,options:[{value:r,label:"Upload new"}].concat(t.map(e=>({value:e,label:e}))),onChange:e=>i(e)})});async function hO({question:e,projectName:t,analysisId:r,selectedItem:n,createNewFastAnalysis:i,setOracleHistory:s,updateUrlWithItemId:o,setSelectedItemId:a,setSelectedProjectName:l,messageManager:c}){try{let{rootAnalysisId:h,analysisTree:u,treeManager:d}=await i({question:e,projectName:t,analysisId:r,rootAnalysisId:r,treeManager:(null==n?void 0:n.itemType)==="query-data"?n.treeManager:void 0}),f={date_created:ZN(),itemId:h,analysisTree:u,treeManager:d,itemType:"query-data"};return s(e=>{var r,n,i,s,o;let a={...e};return{...e,[t]:{...e[t],Today:[f,...(null==(r=null==e?void 0:e[t])?void 0:r.Today)||[]],Yesterday:(null==(n=null==e?void 0:e[t])?void 0:n.Yesterday)||[],"Past week":(null==(i=null==e?void 0:e[t])?void 0:i["Past week"])||[],"Past month":(null==(s=null==e?void 0:e[t])?void 0:s["Past month"])||[],Earlier:(null==(o=null==e?void 0:e[t])?void 0:o.Earlier)||[]}}}),o(h),a(h),l(t),c.success("New analysis created"),{rootAnalysisId:h,analysisTree:u,treeManager:d}}catch(e){throw console.error("Error in OracleCreateNewAnalysis:",e),c.error("Failed to create analysis: "+e.message),e}}function hS(){return(hS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}let hC=typeof Symbol>"u"?"__":Symbol.for(""),hT=typeof Symbol>"u"?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),hA="u">typeof globalThis?globalThis:"u">typeof window?window:{};class hM{constructor(e,t){this.rules=[];let{finish:r}=t||{};function n(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}for(let t in e)!function e(t,i,s,o){let a=[],l=/^@(\w+)\b/.exec(t[0]),c=l&&"keyframes"==l[1];if(l&&null==i)return s.push(t[0]+";");for(let r in i){let o=i[r];if(/&/.test(r))e(r.split(/,\s*/).map(e=>t.map(t=>e.replace(/&/,t))).reduce((e,t)=>e.concat(t)),o,s);else if(o&&"object"==typeof o){if(!l)throw RangeError("The value of a property ("+r+") should be a primitive value.");e(n(r),o,a,c)}else null!=o&&a.push(r.replace(/_.*/,"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())+": "+o+";")}(a.length||c)&&s.push((!r||l||o?t:t.map(r)).join(", ")+" {"+a.join(" ")+"}")}(n(t),e[t],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=hA[hC]||1;return hA[hC]=e+1,""+e.toString(36)}static mount(e,t,r){let n=e[hT],i=r&&r.nonce;n?i&&n.setNonce(i):n=new hN(e,i),n.mount(Array.isArray(t)?t:[t],e)}}let hE=new Map;class hN{constructor(e,t){let r=e.ownerDocument||e,n=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let t=hE.get(r);if(t)return e[hT]=t;this.sheet=new n.CSSStyleSheet,hE.set(r,this)}else this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[hT]=this}mount(e,t){let r=this.sheet,n=0,i=0;for(let t=0;t<e.length;t++){let s=e[t],o=this.modules.indexOf(s);if(o<i&&o>-1&&(this.modules.splice(o,1),i--,o=-1),-1==o){if(this.modules.splice(i++,0,s),r)for(let e=0;e<s.rules.length;e++)r.insertRule(s.rules[e],n++)}else{for(;i<o;)n+=this.modules[i++].rules.length;n+=s.rules.length,i++}}if(r)0>t.adoptedStyleSheets.indexOf(this.sheet)&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+`
`;this.styleTag.textContent=e;let r=t.head||t;this.styleTag.parentNode!=r&&r.insertBefore(this.styleTag,r.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}for(var h_={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},hj={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},hD="u">typeof navigator&&/Mac/.test(navigator.platform),hR="u">typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),hP=0;hP<10;hP++)h_[48+hP]=h_[96+hP]=String(hP);for(var hP=1;hP<=24;hP++)h_[hP+111]="F"+hP;for(var hP=65;hP<=90;hP++)h_[hP]=String.fromCharCode(hP+32),hj[hP]=String.fromCharCode(hP);for(var hI in h_)hj.hasOwnProperty(hI)||(hj[hI]=h_[hI]);function hz(e){var t=!(hD&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||hR&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?hj:h_)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}function hL(e){let t;return(11==e.nodeType?e.getSelection?e:e.ownerDocument:e).getSelection()}function hq(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function h$(e,t){if(!t.anchorNode)return!1;try{return hq(e,t.anchorNode)}catch{return!1}}function hB(e){return 3==e.nodeType?hJ(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function hF(e,t,r,n){return!!r&&(hH(e,t,r,n,-1)||hH(e,t,r,n,1))}function hQ(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function hV(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}function hH(e,t,r,n,i){for(;;){if(e==r&&t==n)return!0;if(t==(i<0?0:hW(e))){if("DIV"==e.nodeName)return!1;let r=e.parentNode;if(!r||1!=r.nodeType)return!1;t=hQ(e)+(i<0?0:1),e=r}else{if(1!=e.nodeType||1==(e=e.childNodes[t+(i<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=i<0?hW(e):0}}}function hW(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function hU(e,t){let r=t?e.left:e.right;return{left:r,right:r,top:e.top,bottom:e.bottom}}function hG(e,t){let r=t.width/e.offsetWidth,n=t.height/e.offsetHeight;return(r>.995&&r<1.005||!isFinite(r)||1>Math.abs(t.width-e.offsetWidth))&&(r=1),(n>.995&&n<1.005||!isFinite(n)||1>Math.abs(t.height-e.offsetHeight))&&(n=1),{scaleX:r,scaleY:n}}class hX{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?hW(t):0),r,Math.min(e.focusOffset,r?hW(r):0))}set(e,t,r,n){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=n}}let hY=null;function hZ(e){if(e.setActive)return e.setActive();if(hY)return e.focus(hY);let t=[];for(let r=e;r&&(t.push(r,r.scrollTop,r.scrollLeft),r!=r.ownerDocument);r=r.parentNode);if(e.focus(null==hY?{get preventScroll(){return hY={preventScroll:!0},!0}}:void 0),!hY){hY=!1;for(let e=0;e<t.length;){let r=t[e++],n=t[e++],i=t[e++];r.scrollTop!=n&&(r.scrollTop=n),r.scrollLeft!=i&&(r.scrollLeft=i)}}}function hJ(e,t,r=t){let n=l||(l=document.createRange());return n.setEnd(e,r),n.setStart(e,t),n}function hK(e,t,r,n){let i={key:t,code:t,keyCode:r,which:r,cancelable:!0};n&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=n);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,e.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,e.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function h0(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}function h1(e){return e.scrollTop>Math.max(1,e.scrollHeight-e.clientHeight-4)}function h2(e,t){for(let r=e,n=t;;){if(3==r.nodeType&&n>0)return{node:r,offset:n};if(1==r.nodeType&&n>0){if("false"==r.contentEditable)return null;n=hW(r=r.childNodes[n-1])}else{if(!r.parentNode||hV(r))return null;n=hQ(r),r=r.parentNode}}}function h4(e,t){for(let r=e,n=t;;){if(3==r.nodeType&&n<r.nodeValue.length)return{node:r,offset:n};if(1==r.nodeType&&n<r.childNodes.length){if("false"==r.contentEditable)return null;r=r.childNodes[n],n=0}else{if(!r.parentNode||hV(r))return null;n=hQ(r)+1,r=r.parentNode}}}class h5{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new h5(e.parentNode,hQ(e),t)}static after(e,t){return new h5(e.parentNode,hQ(e)+1,t)}}let h3=[];class h6{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(2&this.flags){let r=this.dom,n=null,i;for(let s of this.children){if(7&s.flags){if(!s.dom&&(i=n?n.nextSibling:r.firstChild)){let e=h6.get(i);(!e||!e.parent&&e.canReuseDOM(s))&&s.reuseDOM(i)}s.sync(e,t),s.flags&=-8}if(i=n?n.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&i!=s.dom&&(t.written=!0),s.dom.parentNode==r)for(;i&&i!=s.dom;)i=h7(i);else r.insertBefore(s.dom,i);n=s.dom}for((i=n?n.nextSibling:r.firstChild)&&t&&t.node==r&&(t.written=!0);i;)i=h7(i)}else if(1&this.flags)for(let r of this.children)7&r.flags&&(r.sync(e,t),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let n=0==hW(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==n&&t.firstChild!=t.lastChild&&(n=e==t.firstChild?-1:1),e=t}r=n<0?e:e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!h6.get(r);)r=r.nextSibling;if(!r)return this.length;for(let e=0,t=0;;e++){let n=this.children[e];if(n.dom==r)return t;t+=n.length+n.breakAfter}}domBoundsAround(e,t,r=0){let n=-1,i=-1,s=-1,o=-1;for(let a=0,l=r,c=r;a<this.children.length;a++){let r=this.children[a],h=l+r.length;if(l<e&&h>t)return r.domBoundsAround(e,t,l);if(h>=e&&-1==n&&(n=a,i=l),l>t&&r.dom.parentNode==this.dom){s=a,o=c;break}c=h,l=h+r.breakAfter}return{from:i,to:o<0?r+this.length:o,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),1&t.flags)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,7&this.flags&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=h3){this.markDirty();for(let n=e;n<t;n++){let e=this.children[n];e.parent==this&&0>r.indexOf(e)&&e.destroy()}r.length<250?this.children.splice(e,t-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(t));for(let e=0;e<r.length;e++)r[e].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new h8(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,n,i,s){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}function h7(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}h6.prototype.breakAfter=0;class h8{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function h9(e,t,r,n,i,s,o,a,l){let{children:c}=e,h=c.length?c[t]:null,u=s.length?s[s.length-1]:null,d=u?u.breakAfter:o;if(!(t==n&&h&&!o&&!d&&s.length<2&&h.merge(r,i,s.length?u:null,0==r,a,l))){if(n<c.length){let e=c[n];e&&(i<e.length||e.breakAfter&&null!=u&&u.breakAfter)?(t==n&&(e=e.split(i),i=0),!d&&u&&e.merge(0,i,u,!0,0,l)?s[s.length-1]=e:((i||e.children.length&&!e.children[0].length)&&e.merge(0,i,null,!1,0,l),s.push(e))):null!=e&&e.breakAfter&&(u?u.breakAfter=1:o=1),n++}for(h&&(h.breakAfter=o,r>0&&(!o&&s.length&&h.merge(r,h.length,s[0],!1,a,0)?h.breakAfter=s.shift().breakAfter:(r<h.length||h.children.length&&0==h.children[h.children.length-1].length)&&h.merge(r,h.length,null,!1,a,0),t++));t<n&&s.length;)if(c[n-1].become(s[s.length-1]))n--,s.pop(),l=s.length?0:a;else if(c[t].become(s[0]))t++,s.shift(),a=s.length?0:l;else break;!s.length&&t&&n<c.length&&!c[t-1].breakAfter&&c[n].merge(0,0,c[t-1],!1,a,l)&&t--,(t<n||s.length)&&e.replaceChildren(t,n,s)}}function ue(e,t,r,n,i,s){let o=e.childCursor(),{i:a,off:l}=o.findPos(r,1),{i:c,off:h}=o.findPos(t,-1),u=t-r;for(let e of n)u+=e.length;e.length+=u,h9(e,c,h,a,l,n,0,i,s)}let ut="u">typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},ur="u">typeof document?document:{documentElement:{style:{}}},un=/Edge\/(\d+)/.exec(ut.userAgent),ui=/MSIE \d/.test(ut.userAgent),us=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ut.userAgent),uo=!!(ui||us||un),ua=!uo&&/gecko\/(\d+)/i.test(ut.userAgent),ul=!uo&&/Chrome\/(\d+)/.exec(ut.userAgent),uc="webkitFontSmoothing"in ur.documentElement.style,uh=!uo&&/Apple Computer/.test(ut.vendor),uu=uh&&(/Mobile\/\w+/.test(ut.userAgent)||ut.maxTouchPoints>2);var ud={mac:uu||/Mac/.test(ut.platform),windows:/Win/.test(ut.platform),linux:/Linux|X11/.test(ut.platform),ie:uo,ie_version:ui?ur.documentMode||6:us?+us[1]:un?+un[1]:0,gecko:ua,gecko_version:ua?+(/Firefox\/(\d+)/.exec(ut.userAgent)||[0,0])[1]:0,chrome:!!ul,chrome_version:ul?+ul[1]:0,ios:uu,android:/Android\b/.test(ut.userAgent),webkit:uc,safari:uh,webkit_version:uc?+(/\bAppleWebKit\/(\d+)/.exec(ut.userAgent)||[0,0])[1]:0,tabSize:null!=ur.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class uf extends h6{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,r){return!(8&this.flags)&&(!r||r instanceof uf&&!(this.length-(t-e)+r.length>256)&&!(8&r.flags))&&(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new uf(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=8&this.flags,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new h5(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return function(e,t,r){let n=e.nodeValue.length;t>n&&(t=n);let i=t,s=t,o=0;0==t&&r<0||t==n&&r>=0?ud.chrome||ud.gecko||(t?(i--,o=1):s<n&&(s++,o=-1)):r<0?i--:s<n&&s++;let a=hJ(e,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:r>=0)?0:a.length-1];return ud.safari&&!o&&0==l.width&&(l=Array.prototype.find.call(a,e=>e.width)||l),o?hU(l,o<0):l||null}(this.dom,e,t)}}class up extends h6{constructor(e,t=[],r=0){for(let n of(super(),this.mark=e,this.children=t,this.length=r,t))n.setParent(this)}setAttrs(e){if(h0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,n,i,s){return(!r||!!(r instanceof up&&r.mark.eq(this.mark))&&(!e||!(i<=0))&&(!(t<this.length)||!(s<=0)))&&(ue(this,e,t,r?r.children.slice():[],i-1,s-1),this.markDirty(),!0)}split(e){let t=[],r=0,n=-1,i=0;for(let s of this.children){let o=r+s.length;o>e&&t.push(r<e?s.split(e-r):s),n<0&&r>=e&&(n=i),r=o,i++}let s=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new up(this.mark,t,s)}domAtPos(e){return uy(this,e)}coordsAt(e,t){return ub(this,e,t)}}class um extends h6{static create(e,t,r){return new um(e,t,r)}constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}split(e){let t=um.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,r,n,i,s){return(!r||r instanceof um&&!!this.widget.compare(r.widget)&&(!(e>0)||!(i<=0))&&(!(t<this.length)||!(s<=0)))&&(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e instanceof um&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return ey.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,n=this.posAtStart;return r?r.slice(n,n+this.length):ey.empty}domAtPos(e){return(this.length?0==e:this.side>0)?h5.before(this.dom):h5.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;let n=this.dom.getClientRects(),i=null;if(!n.length)return null;let s=this.side?this.side<0:e>0;for(let t=s?n.length-1:0;i=n[t],!(e>0?0==t:t==n.length-1||i.top<i.bottom);t+=s?-1:1);return hU(i,!s)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ug extends h6{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ug&&e.side==this.side}split(){return new ug(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?h5.before(this.dom):h5.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ey.empty}get isHidden(){return!0}}function uy(e,t){let r=e.dom,{children:n}=e,i=0;for(let e=0;i<n.length;i++){let s=n[i],o=e+s.length;if(!(o==e&&0>=s.getSide())){if(t>e&&t<o&&s.dom.parentNode==r)return s.domAtPos(t-e);if(t<=e)break;e=o}}for(let e=i;e>0;e--){let t=n[e-1];if(t.dom.parentNode==r)return t.domAtPos(t.length)}for(let e=i;e<n.length;e++){let t=n[e];if(t.dom.parentNode==r)return t.domAtPos(0)}return new h5(r,0)}function ub(e,t,r){let n=null,i=-1,s=null,o=-1;!function e(t,a){for(let l=0,c=0;l<t.children.length&&c<=a;l++){let h=t.children[l],u=c+h.length;u>=a&&(h.children.length?e(h,a-c):(!s||s.isHidden&&r>0)&&(u>a||c==u&&h.getSide()>0)?(s=h,o=a-c):(c<a||c==u&&0>h.getSide()&&!h.isHidden)&&(n=h,i=a-c)),c=u}}(e,t);let a=(r<0?n:s)||n||s;return a?a.coordsAt(Math.max(0,a==n?i:o),r):function(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let r=hB(t);return r[r.length-1]||null}(e)}function uv(e,t){for(let r in e)"class"==r&&t.class?t.class+=" "+e.class:"style"==r&&t.style?t.style+=";"+e.style:t[r]=e[r];return t}uf.prototype.children=um.prototype.children=ug.prototype.children=h3;let ux=Object.create(null);function uw(e,t,r){if(e==t)return!0;e||(e=ux),t||(t=ux);let n=Object.keys(e),i=Object.keys(t);if(n.length-(r&&n.indexOf(r)>-1?1:0)!=i.length-(r&&i.indexOf(r)>-1?1:0))return!1;for(let s of n)if(s!=r&&(-1==i.indexOf(s)||e[s]!==t[s]))return!1;return!0}function uk(e,t,r){let n=!1;if(t)for(let i in t)r&&i in r||(n=!0,"style"==i?e.style.cssText="":e.removeAttribute(i));if(r)for(let i in r)t&&t[i]==r[i]||(n=!0,"style"==i?e.style.cssText=r[i]:e.setAttribute(i,r[i]));return n}let uO=class{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return -1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}};var uS=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(uS||(uS={}));let uC=class extends tg{constructor(e,t,r,n){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=n}get heightRelevant(){return!1}static mark(e){return new uT(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new uM(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,n;if(e.isBlockGap)r=-5e8,n=4e8;else{let{start:i,end:s}=uE(e,t);r=(i?t?-3e8:-1:5e8)-1,n=(s?t?2e8:1:-6e8)+1}return new uM(e,r,n,t,e.widget||null,!0)}static line(e){return new uA(e)}static set(e,t=!1){return tx.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}};uC.none=tx.empty;class uT extends uC{constructor(e){let{start:t,end:r}=uE(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,r;return this==e||e instanceof uT&&this.tagName==e.tagName&&(this.class||(null===(t=this.attrs)||void 0===t?void 0:t.class))==(e.class||(null===(r=e.attrs)||void 0===r?void 0:r.class))&&uw(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw RangeError("Mark decorations may not be empty");return super.range(e,t)}}uT.prototype.point=!1;class uA extends uC{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof uA&&this.spec.class==e.spec.class&&uw(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}uA.prototype.mapMode=e_.TrackBefore,uA.prototype.point=!0;class uM extends uC{constructor(e,t,r,n,i,s){super(t,r,i,e),this.block=n,this.isReplace=s,this.mapMode=n?t<=0?e_.TrackBefore:e_.TrackAfter:e_.TrackDel}get type(){return this.startSide!=this.endSide?uS.WidgetRange:this.startSide<=0?uS.WidgetBefore:uS.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){var t,r;return e instanceof uM&&(t=this.widget,t==(r=e.widget)||!!(t&&r&&t.compare(r)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function uE(e,t=!1){let{inclusiveStart:r,inclusiveEnd:n}=e;return null==r&&(r=e.inclusive),null==n&&(n=e.inclusive),{start:r??t,end:n??t}}function uN(e,t,r,n=0){let i=r.length-1;i>=0&&r[i]+n>=e?r[i]=Math.max(r[i],t):r.push(e,t)}uM.prototype.point=!0;class u_ extends h6{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,n,i,s){if(r){if(!(r instanceof u_))return!1;this.dom||r.transferDOM(this)}return n&&this.setDeco(r?r.attrs:null),ue(this,e,t,r?r.children.slice():[],i,s),!0}split(e){let t=new u_;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:r,off:n}=this.childPos(e);n&&(t.append(this.children[r].split(n),0),this.children[r].merge(n,this.children[r].length,null,!1,0,0),r++);for(let e=r;e<this.children.length;e++)t.append(this.children[e],0);for(;r>0&&0==this.children[r-1].length;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){uw(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){!function e(t,r,n){let i,{children:s}=t;n>0&&r instanceof up&&s.length&&(i=s[s.length-1])instanceof up&&i.mark.eq(r.mark)?e(i,r.children[0],n-1):(s.push(r),r.setParent(t)),t.length+=r.length}(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=uv(t,this.attrs||{})),r&&(this.attrs=uv({class:r},this.attrs||{}))}domAtPos(e){return uy(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.flags|=6)}sync(e,t){var r;this.dom?4&this.flags&&(h0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(uk(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let n=this.dom.lastChild;for(;n&&h6.get(n)instanceof up;)n=n.lastChild;if(!n||!this.length||"BR"!=n.nodeName&&(null===(r=h6.get(n))||void 0===r?void 0:r.isEditable)==!1&&(!ud.ios||!this.children.some(e=>e instanceof uf))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e=0,t;for(let r of this.children){if(!(r instanceof uf)||/[^ -~]/.test(r.text))return null;let n=hB(r.dom);if(1!=n.length)return null;e+=n[0].width,t=n[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=ub(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:e}=this.parent.view.viewState,t=r.bottom-r.top;if(2>Math.abs(t-e.lineHeight)&&e.textHeight<t){let n=(t-e.textHeight)/2;return{top:r.top+n,bottom:r.bottom-n,left:r.left,right:r.left}}}return r}become(e){return e instanceof u_&&0==this.children.length&&0==e.children.length&&uw(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let r=0,n=0;r<e.children.length;r++){let i=e.children[r],s=n+i.length;if(s>=t){if(i instanceof u_)return i;if(s>t)break}n=s+i.breakAfter}return null}}class uj extends h6{constructor(e,t,r){super(),this.widget=e,this.length=t,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,n,i,s){return(!r||r instanceof uj&&!!this.widget.compare(r.widget)&&(!(e>0)||!(i<=0))&&(!(t<this.length)||!(s<=0)))&&(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return 0==e?h5.before(this.dom):h5.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new uj(this.widget,t,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return h3}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ey.empty}domBoundsAround(){return null}become(e){return e instanceof uj&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)||(this.widget instanceof uD?null:hU(this.dom.getBoundingClientRect(),this.length?0==e:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:r}=this.deco;return t!=r&&(e<0?t<0:r>0)}}class uD extends uO{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class uR{constructor(e,t,r,n){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof uj&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new u_),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(uP(new ug(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||e&&this.content.length&&this.content[this.content.length-1]instanceof uj||this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:r,done:n}=this.cursor.next(this.skip);if(this.skip=0,n)throw Error("Ran out of text content when drawing inline views");if(r){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=t,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(uP(new uf(this.text.slice(this.textOff,this.textOff+n)),t),r),this.atCursorPos=!0,this.textOff+=n,e-=n,r=0}}span(e,t,r,n){this.buildText(t-e,r,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,r,n,i,s){if(this.disallowBlockEffectsFor[s]&&r instanceof uM){if(r.block)throw RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=t-e;if(r instanceof uM){if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new uj(r.widget||uI.block,o,r));else{let s=um.create(r.widget||uI.inline,o,o?0:r.startSide),a=this.atCursorPos&&!s.isEditable&&i<=n.length&&(e<t||r.startSide>0),l=!s.isEditable&&(e<t||i>n.length||r.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||s.isEditable||(this.pendingBuffer=0),this.flushBuffer(n),a&&(c.append(uP(new ug(1),n),i),i=n.length+Math.max(0,i-n.length)),c.append(uP(s,n),i),this.atCursorPos=l,this.pendingBuffer=l?e<t||i>n.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=n.slice())}}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=i)}static build(e,t,r,n,i){let s=new uR(e,t,r,i);return s.openEnd=tx.spans(n,t,r,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function uP(e,t){for(let r of t)e=new up(r,[e],e.length);return e}class uI extends uO{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}uI.inline=new uI("span"),uI.block=new uI("div");var uz=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(uz||(uz={}));let uL=uz.LTR,uq=uz.RTL;function u$(e){let t=[];for(let r=0;r<e.length;r++)t.push(1<<+e[r]);return t}let uB=u$("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),uF=u$("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),uQ=Object.create(null),uV=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),r=e.charCodeAt(1);uQ[t]=r,uQ[r]=-t}function uH(e){return e<=247?uB[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?uF[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8204?256:64336<=e&&e<=65023?4:1}let uW=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class uU{get dir(){return this.level%2?uq:uL}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,r,n){let i=-1;for(let s=0;s<e.length;s++){let o=e[s];if(o.from<=t&&o.to>=t){if(o.level==r)return s;(i<0||(0!=n?n<0?o.from<t:o.to>t:e[i].level>o.level))&&(i=s)}}if(i<0)throw RangeError("Index out of range");return i}}let uG=[];function uX(e){return[new uU(0,e,0)]}let uY="",uZ=eV.define(),uJ=eV.define(),uK=eV.define(),u0=eV.define(),u1=eV.define(),u2=eV.define(),u4=eV.define(),u5=eV.define(),u3=eV.define(),u6=eV.define({combine:e=>e.some(e=>e)}),u7=eV.define({combine:e=>e.some(e=>e)}),u8=eV.define();class u9{constructor(e,t="nearest",r="nearest",n=5,i=5,s=!1){this.range=e,this.y=t,this.x=r,this.yMargin=n,this.xMargin=i,this.isSnapshot=s}map(e){return e.empty?this:new u9(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new u9(eB.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}let de=to.define({map:(e,t)=>e.map(t)}),dt=to.define();function dr(e,t,r){let n=e.facet(u0);n.length?n[0](t):window.onerror?window.onerror(String(t),r,void 0,void 0,t):r?console.error(r+":",t):console.error(t)}let dn=eV.define({combine:e=>!e.length||e[0]}),di=0,ds=eV.define();class da{constructor(e,t,r,n,i){this.id=e,this.create=t,this.domEventHandlers=r,this.domEventObservers=n,this.extension=i(this)}static define(e,t){let{eventHandlers:r,eventObservers:n,provide:i,decorations:s}=t||{};return new da(di++,e,r,n,e=>{let t=[ds.of(e)];return s&&t.push(du.of(t=>{let r=t.plugin(e);return r?s(r):uC.none})),i&&t.push(i(e)),t})}static fromClass(e,t){return da.define(t=>new e(t),t)}}class dl{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(dr(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){dr(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null!==(t=this.value)&&void 0!==t&&t.destroy)try{this.value.destroy()}catch(t){dr(e.state,t,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}let dc=eV.define(),dh=eV.define(),du=eV.define(),dd=eV.define(),df=eV.define(),dp=eV.define();function dm(e,t){let r=e.state.facet(dp);if(!r.length)return r;let n=r.map(t=>t instanceof Function?t(e):t),i=[];return tx.spans(n,t.from,t.to,{point(){},span(e,r,n,s){let o=e-t.from,a=r-t.from,l=i;for(let e=n.length-1;e>=0;e--,s--){let r=n[e].spec.bidiIsolate,i;if(null==r&&(r=function(e,t,r){for(let n=t;n<r;n++){let t=uH(e.charCodeAt(n));if(1==t)break;if(2==t||4==t)return uq}return uL}(t.text,o,a)),s>0&&l.length&&(i=l[l.length-1]).to==o&&i.direction==r)i.to=a,l=i.inner;else{let e={from:o,to:a,direction:r,inner:[]};l.push(e),l=e.inner}}}}),i}let dg=eV.define();function dy(e){let t=0,r=0,n=0,i=0;for(let s of e.state.facet(dg)){let o=s(e);o&&(null!=o.left&&(t=Math.max(t,o.left)),null!=o.right&&(r=Math.max(r,o.right)),null!=o.top&&(n=Math.max(n,o.top)),null!=o.bottom&&(i=Math.max(i,o.bottom)))}return{left:t,right:r,top:n,bottom:i}}let db=eV.define();class dv{constructor(e,t,r,n){this.fromA=e,this.toA=t,this.fromB=r,this.toB=n}join(e){return new dv(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>r.toA)){if(n.toA<r.fromA)break;r=r.join(n),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(0==t.length)return e;let r=[];for(let n=0,i=0,s=0,o=0;;n++){let a=n==e.length?null:e[n],l=s-o,c=a?a.fromB:1e9;for(;i<t.length&&t[i]<c;){let e=t[i],n=t[i+1],s=Math.max(o,e),a=Math.min(c,n);if(s<=a&&new dv(s+l,a+l,s,a).addToSet(r),n>c)break;i+=2}if(!a)return r;new dv(a.fromA,a.toA,a.fromB,a.toB).addToSet(r),s=a.toA,o=a.toB}}}class dx{constructor(e,t,r){for(let n of(this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=eD.empty(this.startState.doc.length),r))this.changes=this.changes.compose(n.changes);let n=[];this.changes.iterChangedRanges((e,t,r,i)=>n.push(new dv(e,t,r,i))),this.changedRanges=n}static create(e,t,r){return new dx(e,t,r)}get viewportChanged(){return(4&this.flags)>0}get viewportMoved(){return(8&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(18&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return 0==this.flags&&0==this.transactions.length}}class dw extends h6{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=uC.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new u_],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new dv(0,0,0,e.state.doc.length)],0,null)}update(e){var t,r,n,i,s,o;let a,l;let c=e.changedRanges;this.minWidth>0&&c.length&&(c.every(({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let h=-1;!(this.view.inputState.composing>=0)||this.view.observer.editContext||(null!==(t=this.domChanged)&&void 0!==t&&t.newSel?h=this.domChanged.newSel.head:(r=e.changes,n=this.hasComposition,a=!1,n&&r.iterChangedRanges((e,t)=>{e<n.to&&t>n.from&&(a=!0)}),a||e.selectionSet||(h=e.state.selection.main.head)));let u=h>-1?function(e,t,r){let n=dk(e,r);if(!n)return null;let{node:i,from:s,to:o}=n,a=i.nodeValue;if(/[\n\r]/.test(a)||e.state.doc.sliceString(n.from,n.to)!=a)return null;let l=t.invertedDesc,c=new dv(l.mapPos(s),l.mapPos(o),s,o),h=[];for(let t=i.parentNode;;t=t.parentNode){let r=h6.get(t);if(r instanceof up)h.push({node:t,deco:r.mark});else{if(r instanceof u_||"DIV"==t.nodeName&&t.parentNode==e.contentDOM)return{range:c,text:i,marks:h,line:t};if(t==e.contentDOM)return null;h.push({node:t,deco:new uT({inclusive:!0,attributes:function(e){let t=Object.create(null);for(let r=0;r<e.attributes.length;r++){let n=e.attributes[r];t[n.name]=n.value}return t}(t),tagName:t.tagName.toLowerCase()})})}}}(this.view,e.changes,h):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:t,to:r}=this.hasComposition;c=new dv(t,r,e.changes.mapPos(t,-1),e.changes.mapPos(r,1)).addToSet(c.slice())}this.hasComposition=u?{from:u.range.fromB,to:u.range.toB}:null,(ud.ie||ud.chrome)&&!u&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let d=(i=this.decorations,s=this.updateDeco(),o=e.changes,l=new dO,tx.compare(i,s,o,l),l.changes);return c=dv.extendWithRanges(c,d),(!!(7&this.flags)||0!=c.length)&&(this.updateInner(c,e.startState.doc.length,u),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,r);let{observer:n}=this.view;n.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=ud.chrome||ud.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,e),this.flags&=-8,e&&(e.written||n.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(e=>e.flags&=-9);let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let e of this.children)e instanceof uj&&e.widget instanceof uD&&i.push(e.dom);n.updateGaps(i)}updateChildren(e,t,r){let n=r?r.range.addToSet(e.slice()):e,i=this.childCursor(t);for(let e=n.length-1;;e--){let t=e>=0?n[e]:null;if(!t)break;let{fromA:s,toA:o,fromB:a,toB:l}=t,c,h,u,d;if(r&&r.range.fromB<l&&r.range.toB>a){let e=uR.build(this.view.state.doc,a,r.range.fromB,this.decorations,this.dynamicDecorationMap),t=uR.build(this.view.state.doc,r.range.toB,l,this.decorations,this.dynamicDecorationMap);h=e.breakAtStart,u=e.openStart,d=t.openEnd;let n=this.compositionView(r);t.breakAtStart?n.breakAfter=1:t.content.length&&n.merge(n.length,n.length,t.content[0],!1,t.openStart,0)&&(n.breakAfter=t.content[0].breakAfter,t.content.shift()),e.content.length&&n.merge(0,0,e.content[e.content.length-1],!0,0,e.openEnd)&&e.content.pop(),c=e.content.concat(n).concat(t.content)}else({content:c,breakAtStart:h,openStart:u,openEnd:d}=uR.build(this.view.state.doc,a,l,this.decorations,this.dynamicDecorationMap));let{i:f,off:p}=i.findPos(o,1),{i:m,off:g}=i.findPos(s,-1);h9(this,m,g,f,p,c,h,u,d)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){for(let t of(this.editContextFormatting=this.editContextFormatting.map(e.changes),e.transactions))for(let e of t.effects)e.is(dt)&&(this.editContextFormatting=e.value)}compositionView(e){let t=new uf(e.text.nodeValue);for(let{deco:r}of(t.flags|=8,e.marks))t=new up(r,[t],t.length);let r=new u_;return r.append(t,0),r}fixCompositionDOM(e){let t=(e,t)=>{t.flags|=8|+!!t.children.some(e=>7&e.flags),this.markedForComposition.add(t);let r=h6.get(e);r&&r!=t&&(r.dom=null),t.setDOM(e)},r=this.childPos(e.range.fromB,1),n=this.children[r.i];t(e.line,n);for(let i=e.marks.length-1;i>=-1;i--)r=n.childPos(r.off,1),n=n.children[r.i],t(i>=0?e.marks[i].node:e.text,n)}updateSelection(e=!1,t=!1){var r;(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,i=n==this.dom,s=!i&&!(this.view.state.facet(dn)||this.dom.tabIndex>-1)&&h$(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(i||t||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(ud.gecko&&a.empty&&!this.hasComposition&&1==(r=l).node.nodeType&&r.node.firstChild&&(0==r.offset||"false"==r.node.childNodes[r.offset-1].contentEditable)&&(r.offset==r.node.childNodes.length||"false"==r.node.childNodes[r.offset].contentEditable)){let e=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(e,l.node.childNodes[l.offset]||null)),l=c=new h5(e,0),o=!0}let h=this.view.observer.selectionRange;!o&&h.focusNode&&(hF(l.node,l.offset,h.anchorNode,h.anchorOffset)&&hF(c.node,c.offset,h.focusNode,h.focusOffset)||this.suppressWidgetCursorChange(h,a))||(this.view.observer.ignore(()=>{ud.android&&ud.chrome&&this.dom.contains(h.focusNode)&&function(e,t){for(let r=e;r&&r!=t;r=r.assignedSlot||r.parentNode)if(1==r.nodeType&&"false"==r.contentEditable)return!0;return!1}(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=hL(this.view.root);if(e){if(a.empty){if(ud.gecko){var t,r;let e=(t=l.node,r=l.offset,1!=t.nodeType?0:(r&&"false"==t.childNodes[r-1].contentEditable?1:0)|2*(r<t.childNodes.length&&"false"==t.childNodes[r].contentEditable));if(e&&3!=e){let t=(1==e?h2:h4)(l.node,l.offset);t&&(l=new h5(t.node,t.offset))}}e.collapse(l.node,l.offset),null!=a.bidiLevel&&void 0!==e.caretBidiLevel&&(e.caretBidiLevel=a.bidiLevel)}else if(e.extend){e.collapse(l.node,l.offset);try{e.extend(c.node,c.offset)}catch{}}else{let t=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),t.setEnd(c.node,c.offset),t.setStart(l.node,l.offset),e.removeAllRanges(),e.addRange(t)}}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new h5(h.anchorNode,h.anchorOffset),this.impreciseHead=c.precise?null:new h5(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&hF(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=hL(e.root),{anchorNode:n,anchorOffset:i}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let s=u_.find(this,t.head);if(!s)return;let o=s.posAtStart;if(t.head==o||t.head==o+s.length)return;let a=this.coordsAt(t.head,-1),l=this.coordsAt(t.head,1);if(!a||!l||a.bottom>l.top)return;let c=this.domAtPos(t.head+t.assoc);r.collapse(c.node,c.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=t.from&&r.collapse(n,i)}moveToLine(e){let t=this.dom,r;if(e.node!=t)return e;for(let n=e.offset;!r&&n<t.childNodes.length;n++){let e=h6.get(t.childNodes[n]);e instanceof u_&&(r=e.domAtPos(0))}for(let n=e.offset-1;!r&&n>=0;n--){let e=h6.get(t.childNodes[n]);e instanceof u_&&(r=e.domAtPos(e.length))}return r?new h5(r.node,r.offset,!0):e}nearest(e){for(let t=e;t;){let e=h6.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(r<e.length||e instanceof u_)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){let r=null,n=0;for(let i=this.length,s=this.children.length-1;s>=0;s--){let o=this.children[s],a=i-o.breakAfter,l=a-o.length;if(a<e)break;if(l<=e&&(l<e||o.covers(-1))&&(a>e||o.covers(1))&&(!r||o instanceof u_&&!(r instanceof u_&&t>=0)))r=o,n=l;else if(r&&l==e&&a==e&&o instanceof uj&&2>Math.abs(t)){if(o.deco.startSide<0)break;s&&(r=null)}i=l}return r?r.coordsAt(e-n,t):null}coordsForChar(e){let{i:t,off:r}=this.childPos(e,1),n=this.children[t];if(!(n instanceof u_))return null;for(;n.children.length;){let{i:e,off:t}=n.childPos(r,1);for(;;e++){if(e==n.children.length)return null;if((n=n.children[e]).length)break}r=t}if(!(n instanceof uf))return null;let i=eT(n.text,r);if(i==r)return null;let s=hJ(n.dom,r,i).getClientRects();for(let e=0;e<s.length;e++){let t=s[e];if(e==s.length-1||t.top<t.bottom&&t.left<t.right)return t}return null}measureVisibleLineHeights(e){let t=[],{from:r,to:n}=e,i=this.view.contentDOM.clientWidth,s=i>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,a=this.view.textDirection==uz.LTR;for(let e=0,l=0;l<this.children.length;l++){let c=this.children[l],h=e+c.length;if(h>n)break;if(e>=r){let r=c.dom.getBoundingClientRect();if(t.push(r.height),s){let t=c.dom.lastChild,n=t?hB(t):[];if(n.length){let t=n[n.length-1],s=a?t.right-r.left:r.right-t.left;s>o&&(o=s,this.minWidth=i,this.minWidthFrom=e,this.minWidthTo=h)}}}e=h+c.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?uz.RTL:uz.LTR}measureTextSize(){for(let e of this.children)if(e instanceof u_){let t=e.measureTextSize();if(t)return t}let e=document.createElement("div"),t,r,n;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let i=hB(e.firstChild)[0];t=e.getBoundingClientRect().height,r=i?i.width/27:7,n=i?i.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:n}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new h8(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,n=0;;n++){let i=n==t.viewports.length?null:t.viewports[n],s=i?i.from-1:this.length;if(s>r){let n=(t.lineBlockAt(s).bottom-t.lineBlockAt(r).top)/this.view.scaleY;e.push(uC.replace({widget:new uD(n),block:!0,inclusive:!0,isBlockGap:!0}).range(r,s))}if(!i)break;r=i.to+1}return uC.set(e)}updateDeco(){let e=1,t=this.view.state.facet(du).map(t=>(this.dynamicDecorationMap[e++]="function"==typeof t)?t(this.view):t),r=!1,n=this.view.state.facet(dd).map((e,t)=>{let n="function"==typeof e;return n&&(r=!0),n?e(this.view):e});for(n.length&&(this.dynamicDecorationMap[e++]=r,t.push(tx.join(n))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let t=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=t.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let t of this.view.state.facet(u8))try{if(t(this.view,e.range,e))return!0}catch(e){dr(this.view.state,e,"scroll handler")}let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),n;if(!r)return;!t.empty&&(n=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,n.left),top:Math.min(r.top,n.top),right:Math.max(r.right,n.right),bottom:Math.max(r.bottom,n.bottom)});let i=dy(this.view),s={left:r.left-i.left,top:r.top-i.top,right:r.right+i.right,bottom:r.bottom+i.bottom},{offsetWidth:o,offsetHeight:a}=this.view.scrollDOM;!function(e,t,r,n,i,s,o,a){let l=e.ownerDocument,c=l.defaultView||window;for(let h=e,u=!1;h&&!u;)if(1==h.nodeType){let e,d=h==l.body,f=1,p=1;if(d)e=function(e){let t=e.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(u=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let t=h.getBoundingClientRect();({scaleX:f,scaleY:p}=hG(h,t)),e={left:t.left,right:t.left+h.clientWidth*f,top:t.top,bottom:t.top+h.clientHeight*p}}let m=0,g=0;if("nearest"==i)t.top<e.top?(g=-(e.top-t.top+o),r>0&&t.bottom>e.bottom+g&&(g=t.bottom-e.bottom+g+o)):t.bottom>e.bottom&&(g=t.bottom-e.bottom+o,r<0&&t.top-g<e.top&&(g=-(e.top+g-t.top+o)));else{let n=t.bottom-t.top,s=e.bottom-e.top;g=("center"==i&&n<=s?t.top+n/2-s/2:"start"==i||"center"==i&&r<0?t.top-o:t.bottom-s+o)-e.top}if("nearest"==n?t.left<e.left?(m=-(e.left-t.left+s),r>0&&t.right>e.right+m&&(m=t.right-e.right+m+s)):t.right>e.right&&(m=t.right-e.right+s,r<0&&t.left<e.left+m&&(m=-(e.left+m-t.left+s))):m=("center"==n?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==n==a?t.left-s:t.right-(e.right-e.left)+s)-e.left,m||g){if(d)c.scrollBy(m,g);else{let e=0,r=0;if(g){let e=h.scrollTop;h.scrollTop+=g/p,r=(h.scrollTop-e)*p}if(m){let t=h.scrollLeft;h.scrollLeft+=m/f,e=(h.scrollLeft-t)*f}t={left:t.left-e,top:t.top-r,right:t.right-e,bottom:t.bottom-r},e&&1>Math.abs(e-m)&&(n="nearest"),r&&1>Math.abs(r-g)&&(i="nearest")}}if(d)break;h=h.assignedSlot||h.parentNode}else if(11==h.nodeType)h=h.host;else break}(this.view.scrollDOM,s,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==uz.LTR)}}function dk(e,t){let r=e.observer.selectionRange;if(!r.focusNode)return null;let n=h2(r.focusNode,r.focusOffset),i=h4(r.focusNode,r.focusOffset),s=n||i;if(i&&n&&i.node!=n.node){let t=h6.get(i.node);if(!t||t instanceof uf&&t.text!=i.node.nodeValue)s=i;else if(e.docView.lastCompositionAfterCursor){let e=h6.get(n.node);!e||e instanceof uf&&e.text!=n.node.nodeValue||(s=i)}}if(e.docView.lastCompositionAfterCursor=s!=n,!s)return null;let o=t-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}let dO=class{constructor(){this.changes=[]}compareRange(e,t){uN(e,t,this.changes)}comparePoint(e,t){uN(e,t,this.changes)}boundChange(e){uN(e,e,this.changes)}};function dS(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function dC(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function dT(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function dA(e,t,r){let n=e.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<n;a++){let n=hJ(e,a,a+1).getClientRects();for(let l=0;l<n.length;l++){let c=n[l];if(c.top==c.bottom)continue;o||(o=t-c.left);let h=(c.top>r?c.top-r:r-c.bottom)-1;if(c.left-1<=t&&c.right+1>=t&&h<s){let r=t>=(c.left+c.right)/2,n=r;if((ud.chrome||ud.gecko)&&hJ(e,a).getBoundingClientRect().left==c.right&&(n=!r),h<=0)return{node:e,offset:a+ +!!n};i=a+ +!!n,s=h}}}return{node:e,offset:i>-1?i:o>0?e.nodeValue.length:0}}function dM(e,t,r,n=-1){var i,s;let o=e.contentDOM.getBoundingClientRect(),a=o.top+e.viewState.paddingTop,l,{docHeight:c}=e.viewState,{x:h,y:u}=t,d=u-a;if(d<0)return 0;if(d>c)return e.state.doc.length;for(let t=e.viewState.heightOracle.textHeight/2,i=!1;(l=e.elementAtHeight(d)).type!=uS.Text;)for(;!((d=n>0?l.bottom+t:l.top-t)>=0&&d<=c);){if(i)return r?null:0;i=!0,n=-n}u=a+d;let f=l.from;if(f<e.viewport.from)return 0==e.viewport.from?0:r?null:dE(e,o,l,h,u);if(f>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:r?null:dE(e,o,l,h,u);let p=e.dom.ownerDocument,m=e.root.elementFromPoint?e.root:p,g=m.elementFromPoint(h,u);g&&!e.contentDOM.contains(g)&&(g=null),g||(h=Math.max(o.left+1,Math.min(o.right-1,h)),(g=m.elementFromPoint(h,u))&&!e.contentDOM.contains(g)&&(g=null));let y,b=-1;if(g&&(null===(i=e.docView.nearest(g))||void 0===i?void 0:i.isEditable)!=!1){if(p.caretPositionFromPoint){let e=p.caretPositionFromPoint(h,u);e&&({offsetNode:y,offset:b}=e)}else if(p.caretRangeFromPoint){let t=p.caretRangeFromPoint(h,u);t&&({startContainer:y,startOffset:b}=t,(!e.contentDOM.contains(y)||ud.safari&&function(e,t,r){let n;if(3!=e.nodeType||t!=(n=e.nodeValue.length))return!1;for(let t=e.nextSibling;t;t=t.nextSibling)if(1!=t.nodeType||"BR"!=t.nodeName)return!1;return hJ(e,n-1,n).getBoundingClientRect().left>r}(y,b,h)||ud.chrome&&function(e,t,r){if(0!=t)return!1;for(let t=e;;){let e=t.parentNode;if(!e||1!=e.nodeType||e.firstChild!=t)return!1;if(e.classList.contains("cm-line"))break;t=e}return r-(1==e.nodeType?e.getBoundingClientRect():hJ(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect()).left>5}(y,b,h))&&(y=void 0))}y&&(b=Math.min(hW(y),b))}if(!y||!e.docView.dom.contains(y)){let t=u_.find(e.docView,f);if(!t)return d>l.top+l.height/2?l.to:l.from;({node:y,offset:b}=function e(t,r,n){let i,s,o,a,l=!1,c,h,u,d;for(let m=t.firstChild;m;m=m.nextSibling){let t=hB(m);for(let g=0;g<t.length;g++){var f,p;let y=t[g];s&&dS(s,y)&&(y=dC(dT(y,s.bottom),s.top));let b=(f=y).left>r?f.left-r:Math.max(0,r-f.right),v=(p=y).top>n?p.top-n:Math.max(0,n-p.bottom);if(0==b&&0==v)return 3==m.nodeType?dA(m,r,n):e(m,r,n);if(!i||a>v||a==v&&o>b){i=m,s=y,o=b,a=v;let e=v?n<y.top?-1:1:b?r<y.left?-1:1:0;l=!e||(e>0?g<t.length-1:g>0)}0==b?n>y.bottom&&(!u||u.bottom<y.bottom)?(c=m,u=y):n<y.top&&(!d||d.top>y.top)&&(h=m,d=y):u&&dS(u,y)?u=dT(u,y.bottom):d&&dS(d,y)&&(d=dC(d,y.top))}}if(u&&u.bottom>=n?(i=c,s=u):d&&d.top<=n&&(i=h,s=d),!i)return{node:t,offset:0};let m=Math.max(s.left,Math.min(s.right,r));if(3==i.nodeType)return dA(i,m,n);if(l&&"false"!=i.contentEditable)return e(i,m,n);let g=Array.prototype.indexOf.call(t.childNodes,i)+ +(r>=(s.left+s.right)/2);return{node:t,offset:g}}(t.dom,h,u))}let v=e.docView.nearest(y);if(!v)return null;if(!v.isWidget||(null===(s=v.dom)||void 0===s?void 0:s.nodeType)!=1)return v.localPosFromDOM(y,b)+v.posAtStart;{let e=v.dom.getBoundingClientRect();return t.y<e.top||t.y<=e.bottom&&t.x<=(e.left+e.right)/2?v.posAtStart:v.posAtEnd}}function dE(e,t,r,n,i){let s=Math.round((n-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&r.height>1.5*e.defaultLineHeight){let t=e.viewState.heightOracle.textHeight;s+=Math.floor((i-r.top-(e.defaultLineHeight-t)*.5)/t)*e.viewState.heightOracle.lineLength}let o=e.state.sliceDoc(r.from,r.to);return r.from+tD(o,s,e.state.tabSize)}function dN(e,t){let r=e.lineBlockAt(t);if(Array.isArray(r.type)){for(let e of r.type)if(e.to>t||e.to==t&&(e.to==r.to||e.type==uS.Text))return e}return r}function d_(e,t,r,n){let i=e.state.doc.lineAt(t.head),s=e.bidiSpans(i),o=e.textDirectionAt(i.from);for(let a=t,l=null;;){let t=function(e,t,r,n,i){var s;let o=n.head-e.from,a=uU.find(t,o,null!==(s=n.bidiLevel)&&void 0!==s?s:-1,n.assoc),l=t[a],c=l.side(i,r);if(o==c){let e=a+=i?1:-1;if(e<0||e>=t.length)return null;o=(l=t[a=e]).side(!i,r),c=l.side(i,r)}let h=eT(e.text,o,l.forward(i,r));(h<l.from||h>l.to)&&(h=c),uY=e.text.slice(Math.min(o,h),Math.max(o,h));let u=a==(i?t.length-1:0)?null:t[a+(i?1:-1)];return u&&h==c&&u.level+ +!i<l.level?eB.cursor(u.side(!i,r)+e.from,u.forward(i,r)?1:-1,u.level):eB.cursor(h+e.from,l.forward(i,r)?-1:1,l.level)}(i,s,o,a,r),c=uY;if(!t){if(i.number==(r?e.state.doc.lines:1))return a;c=`
`,i=e.state.doc.line(i.number+(r?1:-1)),s=e.bidiSpans(i),t=e.visualLineSide(i,!r)}if(l){if(!l(c))return a}else{if(!n)return t;l=n(c)}a=t}}function dj(e,t,r){for(;;){let n=0;for(let i of e)i.between(t-1,t+1,(e,i,s)=>{if(t>e&&t<i){let s=n||r||(t-e<i-t?-1:1);t=s<0?e:i,n=s}});if(!n)return t}}function dD(e,t,r){let n=dj(e.state.facet(df).map(t=>t(e)),r.from,t.head>r.from?-1:1);return n==r.from?r:eB.cursor(n,n<r.from?1:-1)}class dR{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(tp.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=""}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let n=e;;){this.findPointBefore(r,n);let e=this.text.length;this.readNode(n);let i=n.nextSibling;if(i==t)break;let s=h6.get(n),o=h6.get(i);(s&&o?s.breakAfter:(s?s.breakAfter:hV(n))||hV(i)&&("BR"!=n.nodeName||n.cmIgnore)&&this.text.length>e)&&this.lineBreak(),n=i}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let i=-1,s=1,o;if(this.lineSeparator?(i=t.indexOf(this.lineSeparator,r),s=this.lineSeparator.length):(o=n.exec(t))&&(i=o.index,s=o[0].length),this.append(t.slice(r,i<0?t.length:i)),i<0)break;if(this.lineBreak(),s>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=s-1);r=i+s}}readNode(e){if(e.cmIgnore)return;let t=h6.get(e),r=t&&t.overrideDOMText;if(null!=r){this.findPointInside(e,r.length);for(let e=r.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(3==e.nodeType?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(!function(e,t,r){for(;;){if(!t||r<hW(t))return!1;if(t==e)return!0;r=hQ(t)+1,t=t.parentNode}}(e,r.node,r.offset)?0:t))}}class dP{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class dI{constructor(e,t,r,n){this.typeOver=n,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:i,impreciseAnchor:s}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let t=i||s?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}=e.observer.selectionRange;return r&&(t.push(new dP(r,n)),(i!=r||s!=n)&&t.push(new dP(i,s))),t}(e),r=new dR(t,e.state);r.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=r.text,this.newSel=function(e,t){if(0==e.length)return null;let r=e[0].pos,n=2==e.length?e[1].pos:r;return r>-1&&n>-1?eB.single(r+t,n+t):null}(t,this.bounds.from)}else{let t=e.observer.selectionRange,r=i&&i.node==t.focusNode&&i.offset==t.focusOffset||!hq(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),n=s&&s.node==t.anchorNode&&s.offset==t.anchorOffset||!hq(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset),o=e.viewport;if((ud.ios||ud.chrome)&&e.state.selection.main.empty&&r!=n&&(o.from>0||o.to<e.state.doc.length)){let t=Math.min(r,n),i=Math.max(r,n),s=o.from-t,a=o.to-i;(0==s||1==s||0==t)&&(0==a||-1==a||i==e.state.doc.length)&&(r=0,n=e.state.doc.length)}this.newSel=eB.single(n,r)}}}function dz(e,t){let r,{newSel:n}=t,i=e.state.selection.main,s=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(t.bounds){let{from:n,to:o}=t.bounds,a=i.from,l=null;(8===s||ud.android&&t.text.length<o-n)&&(a=i.to,l="end");let c=function(e,t,r,n){let i=Math.min(e.length,t.length),s=0;for(;s<i&&e.charCodeAt(s)==t.charCodeAt(s);)s++;if(s==i&&e.length==t.length)return null;let o=e.length,a=t.length;for(;o>0&&a>0&&e.charCodeAt(o-1)==t.charCodeAt(a-1);)o--,a--;if("end"==n){let e=Math.max(0,s-Math.min(o,a));r-=o+e-s}if(o<s&&e.length<t.length){let e=r<=s&&r>=o?s-r:0;s-=e,a=s+(a-o),o=s}else if(a<s){let e=r<=s&&r>=a?s-r:0;s-=e,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}(e.state.doc.sliceString(n,o,""),t.text,a-n,l);c&&(ud.chrome&&13==s&&c.toB==c.from+2&&""==t.text.slice(c.from,c.toB)&&c.toB--,r={from:n+c.from,to:n+c.toA,insert:ey.of(t.text.slice(c.from,c.toB).split(""))})}else n&&(!e.hasFocus&&e.state.facet(dn)||n.main.eq(i))&&(n=null);if(!r&&!n)return!1;if(!r&&t.typeOver&&!i.empty&&n&&n.main.empty?r={from:i.from,to:i.to,insert:e.state.doc.slice(i.from,i.to)}:(ud.mac||ud.android)&&r&&r.from==r.to&&r.from==i.head-1&&/^\. ?$/.test(r.insert.toString())&&"off"==e.contentDOM.getAttribute("autocorrect")?(n&&2==r.insert.length&&(n=eB.single(n.main.anchor-1,n.main.head-1)),r={from:r.from,to:r.to,insert:ey.of([r.insert.toString().replace("."," ")])}):r&&r.from>=i.from&&r.to<=i.to&&(r.from!=i.from||r.to!=i.to)&&i.to-i.from-(r.to-r.from)<=4?r={from:i.from,to:i.to,insert:e.state.doc.slice(i.from,r.from).append(r.insert).append(e.state.doc.slice(r.to,i.to))}:ud.chrome&&r&&r.from==r.to&&r.from==i.head&&r.insert.toString()==`
 `&&e.lineWrapping&&(n&&(n=eB.single(n.main.anchor-1,n.main.head-1)),r={from:i.from,to:i.to,insert:ey.of([" "])}),r)return dL(e,r,n,s);if(!n||n.main.eq(i))return!1;{let t=!1,r="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),r=e.inputState.lastSelectionOrigin),e.dispatch({selection:n,scrollIntoView:t,userEvent:r}),!0}}function dL(e,t,r,n=-1){if(ud.ios&&e.inputState.flushIOSKey(t))return!0;let i=e.state.selection.main;if(ud.android&&(t.to==i.to&&(t.from==i.from||t.from==i.from-1&&" "==e.state.sliceDoc(t.from,i.from))&&1==t.insert.length&&2==t.insert.lines&&hK(e.contentDOM,"Enter",13)||(t.from==i.from-1&&t.to==i.to&&0==t.insert.length||8==n&&t.insert.length<t.to-t.from&&t.to>i.head)&&hK(e.contentDOM,"Backspace",8)||t.from==i.from&&t.to==i.to+1&&0==t.insert.length&&hK(e.contentDOM,"Delete",46)))return!0;let s=t.insert.toString();e.inputState.composing>=0&&e.inputState.composing++;let o,a=()=>o||(o=function(e,t,r){let n,i=e.state,s=i.selection.main;if(t.from>=s.from&&t.to<=s.to&&t.to-t.from>=(s.to-s.from)/3&&(!r||r.main.empty&&r.main.from==t.from+t.insert.length)&&e.inputState.composing<0){let r=s.from<t.from?i.sliceDoc(s.from,t.from):"",o=s.to>t.to?i.sliceDoc(t.to,s.to):"";n=i.replaceSelection(e.state.toText(r+t.insert.sliceString(0,void 0,e.state.lineBreak)+o))}else{let o=i.changes(t),a=r&&r.main.to<=o.newLength?r.main:void 0;if(i.selection.ranges.length>1&&e.inputState.composing>=0&&t.to<=s.to&&t.to>=s.to-10){let l=e.state.sliceDoc(t.from,t.to),c,h=r&&dk(e,r.main.head);if(h){let e=t.insert.length-(t.to-t.from);c={from:h.from,to:h.to-e}}else c=e.state.doc.lineAt(s.head);let u=s.to-t.to,d=s.to-s.from;n=i.changeByRange(r=>{if(r.from==s.from&&r.to==s.to)return{changes:o,range:a||r.map(o)};let n=r.to-u,h=n-l.length;if(r.to-r.from!=d||e.state.sliceDoc(h,n)!=l||r.to>=c.from&&r.from<=c.to)return{range:r};let f=i.changes({from:h,to:n,insert:t.insert}),p=r.to-s.to;return{changes:f,range:a?eB.range(Math.max(0,a.anchor+p),Math.max(0,a.head+p)):r.map(f)}})}else n={changes:o,selection:a&&i.selection.replaceRange(a)}}let o="input.type";return(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,o+=".compose",e.inputState.compositionFirstChange&&(o+=".start",e.inputState.compositionFirstChange=!1)),i.update(n,{userEvent:o,scrollIntoView:!0})}(e,t,r));return e.state.facet(u2).some(r=>r(e,t.from,t.to,s,a))||e.dispatch(a()),!0}let dq=class{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,ud.safari&&e.contentDOM.addEventListener("input",()=>null),ud.gecko&&function(e){fe.has(e)||(fe.add(e),e.addEventListener("copy",()=>{}),e.addEventListener("cut",()=>{}))}(e.contentDOM.ownerDocument)}handleEvent(e){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let r=t.target,n;r!=e.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(n=h6.get(r))&&n.ignoreEvent(t))return!1;return!0}(this.view,e)||this.ignoreDuringComposition(e)||"keydown"==e.type&&this.keydown(e)||(0!=this.view.updateState?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let r=this.handlers[e];if(r){for(let e of r.observers)e(this.view,t);for(let e of r.handlers){if(t.defaultPrevented)break;if(e(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=function(e){let t=Object.create(null);function r(e){return t[e]||(t[e]={observers:[],handlers:[]})}for(let t of e){let e=t.spec;if(e&&e.domEventHandlers)for(let n in e.domEventHandlers){let i=e.domEventHandlers[n];i&&r(n).handlers.push(d$(t.value,i))}if(e&&e.domEventObservers)for(let n in e.domEventObservers){let i=e.domEventObservers[n];i&&r(n).observers.push(d$(t.value,i))}}for(let e in dW)r(e).handlers.push(dW[e]);for(let e in dU)r(e).observers.push(dU[e]);return t}(e),r=this.handlers,n=this.view.contentDOM;for(let e in t)if("scroll"!=e){let i=!t[e].handlers.length,s=r[e];s&&!s.handlers.length!=i&&(n.removeEventListener(e,this.handleEvent),s=null),s||n.addEventListener(e,this.handleEvent,{passive:i})}for(let e in r)"scroll"==e||t[e]||n.removeEventListener(e,this.handleEvent);this.handlers=t}keydown(e){let t;return this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),!!(9==e.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))||((this.tabFocusMode>0&&27!=e.keyCode&&0>dQ.indexOf(e.keyCode)&&(this.tabFocusMode=-1),ud.android&&ud.chrome&&!e.synthetic&&(13==e.keyCode||8==e.keyCode))?(this.view.observer.delayAndroidKey(e.key,e.keyCode),!0):ud.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=dB.find(t=>t.keyCode==e.keyCode))&&!e.ctrlKey||dF.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(229!=e.keyCode&&this.view.observer.forceFlush(),!1))}flushIOSKey(e){let t=this.pendingIOSKey;return!(!t||"Enter"==t.key&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString()))&&(this.pendingIOSKey=void 0,hK(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(ud.safari&&!ud.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}};function d$(e,t){return(r,n)=>{try{return t.call(e,n,r)}catch(e){dr(r.state,e)}}}let dB=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],dF="dthko",dQ=[16,17,18,20,91,92,224,225];function dV(e){return .7*Math.max(0,e)+8}class dH{constructor(e,t,r,n){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=n,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=function(e){let t=e.ownerDocument,r,n;for(let i=e.parentNode;i&&!(i==t.body||r&&n);)if(1==i.nodeType)!n&&i.scrollHeight>i.clientHeight&&(n=i),!r&&i.scrollWidth>i.clientWidth&&(r=i),i=i.assignedSlot||i.parentNode;else if(11==i.nodeType)i=i.host;else break;return{x:r,y:n}}(e.contentDOM),this.atoms=e.state.facet(df).map(t=>t(e));let i=e.contentDOM.ownerDocument;i.addEventListener("mousemove",this.move=this.move.bind(this)),i.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(tp.allowMultipleSelections)&&function(e,t){let r=e.state.facet(uZ);return r.length?r[0](t):ud.mac?t.metaKey:t.ctrlKey}(e,t),this.dragging=!!function(e,t){let{main:r}=e.state.selection;if(r.empty)return!1;let n=hL(e.root);if(!n||0==n.rangeCount)return!0;let i=n.getRangeAt(0).getClientRects();for(let e=0;e<i.length;e++){let r=i[e];if(r.left<=t.clientX&&r.right>=t.clientX&&r.top<=t.clientY&&r.bottom>=t.clientY)return!0}return!1}(e,t)&&1==d5(t)&&null}start(e){!1===this.dragging&&this.select(e)}move(e){var t;if(0==e.buttons)return this.destroy();if(this.dragging||null==this.dragging&&10>Math.max(Math.abs((t=this.startEvent).clientX-e.clientX),Math.abs(t.clientY-e.clientY)))return;this.select(this.lastEvent=e);let r=0,n=0,i=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=dy(this.view);e.clientX-l.left<=i+6?r=-dV(i-e.clientX):e.clientX+l.right>=o-6&&(r=dV(e.clientX-o)),e.clientY-l.top<=s+6?n=-dV(s-e.clientY):e.clientY+l.bottom>=a-6&&(n=dV(e.clientY-a)),this.setScrollSpeed(r,n)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let r=0;r<e.ranges.length;r++){let n=e.ranges[r],i=null;if(n.empty){let e=dj(this.atoms,n.from,0);e!=n.from&&(i=eB.cursor(e,-1))}else{let e=dj(this.atoms,n.from,-1),t=dj(this.atoms,n.to,1);(e!=n.from||t!=n.to)&&(i=eB.range(n.from==n.anchor?e:t,n.from==n.head?e:t))}i&&(t||(t=e.ranges.slice()),t[r]=i)}return t?eB.create(t,e.mainIndex):e}select(e){let{view:t}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection,!1===this.dragging))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(e=>e.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}let dW=Object.create(null),dU=Object.create(null),dG=ud.ie&&ud.ie_version<15||ud.ios&&ud.webkit_version<604;function dX(e,t,r){for(let n of e.facet(t))r=n(r,e);return r}function dY(e,t){t=dX(e.state,u5,t);let{state:r}=e,n,i=1,s=r.toText(t),o=s.lines==r.selection.ranges.length;if(null!=d6&&r.selection.ranges.every(e=>e.empty)&&d6==s.toString()){let e=-1;n=r.changeByRange(n=>{let a=r.doc.lineAt(n.from);if(a.from==e)return{range:n};e=a.from;let l=r.toText((o?s.line(i++).text:t)+r.lineBreak);return{changes:{from:a.from,insert:l},range:eB.cursor(n.from+l.length)}})}else n=o?r.changeByRange(e=>{let t=s.line(i++);return{changes:{from:e.from,to:e.to,insert:t.text},range:eB.cursor(e.from+t.length)}}):r.replaceSelection(s);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function dZ(e,t,r,n){if(1==n)return eB.cursor(t,r);if(2==n)return function(e,t,r=1){let n=e.charCategorizer(t),i=e.doc.lineAt(t),s=t-i.from;if(0==i.length)return eB.cursor(t);0==s?r=1:s==i.length&&(r=-1);let o=s,a=s;r<0?o=eT(i.text,s,!1):a=eT(i.text,s);let l=n(i.text.slice(o,a));for(;o>0;){let e=eT(i.text,o,!1);if(n(i.text.slice(e,o))!=l)break;o=e}for(;a<i.length;){let e=eT(i.text,a);if(n(i.text.slice(a,e))!=l)break;a=e}return eB.range(o+i.from,a+i.from)}(e.state,t,r);{let r=u_.find(e.docView,t),n=e.state.doc.lineAt(r?r.posAtEnd:t),i=r?r.posAtStart:n.from,s=r?r.posAtEnd:n.to;return s<e.state.doc.length&&s==n.to&&s++,eB.range(i,s)}}dU.scroll=e=>{e.inputState.lastScrollTop=e.scrollDOM.scrollTop,e.inputState.lastScrollLeft=e.scrollDOM.scrollLeft},dW.keydown=(e,t)=>(e.inputState.setSelectionOrigin("select"),27==t.keyCode&&0!=e.inputState.tabFocusMode&&(e.inputState.tabFocusMode=Date.now()+2e3),!1),dU.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},dU.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},dW.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return!1;let r=null;for(let n of e.state.facet(uK))if(r=n(e,t))break;if(r||0!=t.button||(r=function(e,t){let r=dK(e,t),n=d5(t),i=e.state.selection;return{update(e){e.docChanged&&(r.pos=e.changes.mapPos(r.pos),i=i.map(e.changes))},get(t,s,o){let a=dK(e,t),l,c=dZ(e,a.pos,a.bias,n);if(r.pos!=a.pos&&!s){let t=dZ(e,r.pos,r.bias,n),i=Math.min(t.from,c.from),s=Math.max(t.to,c.to);c=i<c.from?eB.range(i,s):eB.range(s,i)}return s?i.replaceRange(i.main.extend(c.from,c.to)):o&&1==n&&i.ranges.length>1&&(l=function(e,t){for(let r=0;r<e.ranges.length;r++){let{from:n,to:i}=e.ranges[r];if(n<=t&&i>=t)return eB.create(e.ranges.slice(0,r).concat(e.ranges.slice(r+1)),e.mainIndex==r?0:e.mainIndex-+(e.mainIndex>r))}return null}(i,a.pos))?l:o?i.addRange(c):eB.create([c])}}}(e,t)),r){let n=!e.hasFocus;e.inputState.startMouseSelection(new dH(e,t,r,n)),n&&e.observer.ignore(()=>{hZ(e.contentDOM);let t=e.root.activeElement;t&&!t.contains(e.contentDOM)&&t.blur()});let i=e.inputState.mouseSelection;if(i)return i.start(t),!1===i.dragging}return!1};let dJ=(e,t,r)=>t>=r.top&&t<=r.bottom&&e>=r.left&&e<=r.right;function dK(e,t){let r=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:r,bias:function(e,t,r,n){let i=u_.find(e.docView,t);if(!i)return 1;let s=t-i.posAtStart;if(0==s)return 1;if(s==i.length)return -1;let o=i.coordsAt(s,-1);if(o&&dJ(r,n,o))return -1;let a=i.coordsAt(s,1);return a&&dJ(r,n,a)?1:o&&o.bottom>=n?-1:1}(e,r,t.clientX,t.clientY)}}let d0=ud.ie&&ud.ie_version<=11,d1=null,d2=0,d4=0;function d5(e){if(!d0)return e.detail;let t=d1,r=d4;return d1=e,d4=Date.now(),d2=!t||r>Date.now()-400&&2>Math.abs(t.clientX-e.clientX)&&2>Math.abs(t.clientY-e.clientY)?(d2+1)%3:1}function d3(e,t,r,n){let i;if(!(r=dX(e.state,u5,r)))return;let s=e.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:o}=e.inputState,a=n&&o&&((i=e.state.facet(uJ)).length?i[0](t):ud.mac?!t.altKey:!t.ctrlKey)?{from:o.from,to:o.to}:null,l={from:s,insert:r},c=e.state.changes(a?[a,l]:l);e.focus(),e.dispatch({changes:c,selection:{anchor:c.mapPos(s,-1),head:c.mapPos(s,1)},userEvent:a?"move.drop":"input.drop"}),e.inputState.draggedContent=null}dW.dragstart=(e,t)=>{let{selection:{main:r}}=e.state;if(t.target.draggable){let n=e.docView.nearest(t.target);if(n&&n.isWidget){let e=n.posAtStart,t=e+n.length;(e>=r.to||t<=r.from)&&(r=eB.range(e,t))}}let{inputState:n}=e;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=r,t.dataTransfer&&(t.dataTransfer.setData("Text",dX(e.state,u3,e.state.sliceDoc(r.from,r.to))),t.dataTransfer.effectAllowed="copyMove"),!1},dW.dragend=e=>(e.inputState.draggedContent=null,!1),dW.drop=(e,t)=>{if(!t.dataTransfer)return!1;if(e.state.readOnly)return!0;let r=t.dataTransfer.files;if(r&&r.length){let n=Array(r.length),i=0,s=()=>{++i==r.length&&d3(e,t,n.filter(e=>null!=e).join(e.state.lineBreak),!1)};for(let e=0;e<r.length;e++){let t=new FileReader;t.onerror=s,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(n[e]=t.result),s()},t.readAsText(r[e])}return!0}{let r=t.dataTransfer.getData("Text");if(r)return d3(e,t,r,!0),!0}return!1},dW.paste=(e,t)=>{if(e.state.readOnly)return!0;e.observer.flush();let r=dG?null:t.clipboardData;return r?(dY(e,r.getData("text/plain")||r.getData("text/uri-list")),!0):(function(e){let t=e.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{e.focus(),r.remove(),dY(e,r.value)},50)}(e),!1)};let d6=null;dW.copy=dW.cut=(e,t)=>{let{text:r,ranges:n,linewise:i}=function(e){let t=[],r=[],n=!1;for(let n of e.selection.ranges)n.empty||(t.push(e.sliceDoc(n.from,n.to)),r.push(n));if(!t.length){let i=-1;for(let{from:n}of e.selection.ranges){let s=e.doc.lineAt(n);s.number>i&&(t.push(s.text),r.push({from:s.from,to:Math.min(e.doc.length,s.to+1)})),i=s.number}n=!0}return{text:dX(e,u3,t.join(e.lineBreak)),ranges:r,linewise:n}}(e.state);if(!r&&!i)return!1;d6=i?r:null,"cut"!=t.type||e.state.readOnly||e.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let s=dG?null:t.clipboardData;return s?(s.clearData(),s.setData("text/plain",r),!0):(function(e,t){let r=e.dom.parentNode;if(!r)return;let n=r.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=t,n.focus(),n.selectionEnd=t.length,n.selectionStart=0,setTimeout(()=>{n.remove(),e.focus()},50)}(e,r),!1)};let d7=tn.define();function d8(e,t){let r=[];for(let n of e.facet(u4)){let i=n(e,t);i&&r.push(i)}return r?e.update({effects:r,annotations:d7.of(!0)}):null}function d9(e){setTimeout(()=>{let t=e.hasFocus;if(t!=e.inputState.notifiedFocused){let r=d8(e.state,t);r?e.dispatch(r):e.update([])}},10)}dU.focus=e=>{e.inputState.lastFocusTime=Date.now(),!e.scrollDOM.scrollTop&&(e.inputState.lastScrollTop||e.inputState.lastScrollLeft)&&(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),d9(e)},dU.blur=e=>{e.observer.clearSelectionRange(),d9(e)},dU.compositionstart=dU.compositionupdate=e=>{e.observer.editContext||(null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0))},dU.compositionend=e=>{e.observer.editContext||(e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,ud.chrome&&ud.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then(()=>e.observer.flush()):setTimeout(()=>{e.inputState.composing<0&&e.docView.hasComposition&&e.update([])},50))},dU.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},dW.beforeinput=(e,t)=>{var r,n;let i;if("insertReplacementText"==t.inputType&&e.observer.editContext){let n=null===(r=t.dataTransfer)||void 0===r?void 0:r.getData("text/plain"),i=t.getTargetRanges();if(n&&i.length){let t=i[0],r=e.posAtDOM(t.startContainer,t.startOffset),s=e.posAtDOM(t.endContainer,t.endOffset);return dL(e,{from:r,to:s,insert:e.state.toText(n)},null),!0}}if(ud.chrome&&ud.android&&(i=dB.find(e=>e.inputType==t.inputType))&&(e.observer.delayAndroidKey(i.key,i.keyCode),"Backspace"==i.key||"Delete"==i.key)){let t=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout(()=>{var r;((null===(r=window.visualViewport)||void 0===r?void 0:r.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())},100)}return ud.ios&&"deleteContentForward"==t.inputType&&e.observer.flushSoon(),ud.safari&&"insertText"==t.inputType&&e.inputState.composing>=0&&setTimeout(()=>dU.compositionend(e,t),20),!1};let fe=new Set,ft=["pre-wrap","normal","pre-line","break-spaces"],fr=!1;class fn{constructor(e){this.lineWrapping=e,this.doc=ey.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return ft.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let n=e[r];n<0?r++:this.heightSamples[Math.floor(10*n)]||(t=!0,this.heightSamples[Math.floor(10*n)]=!0)}return t}refresh(e,t,r,n,i,s){let o=ft.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=r,this.textHeight=n,this.lineLength=i,a){this.heightSamples={};for(let e=0;e<s.length;e++){let t=s[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return a}}class fi{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class fs{constructor(e,t,r,n,i){this.from=e,this.length=t,this.top=r,this.height=n,this._content=i}get type(){return"number"==typeof this._content?uS.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof uM?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new fs(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var fo=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(fo||(fo={}));class fa{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=2*!!e|-3&this.flags}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>.001&&(fr=!0),this.height=e)}replace(e,t,r){return fa.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,n){let i=this,s=r.doc;for(let o=n.length-1;o>=0;o--){let{fromA:a,toA:l,fromB:c,toB:h}=n[o],u=i.lineAt(a,fo.ByPosNoHeight,r.setDoc(t),0,0),d=u.to>=l?u:i.lineAt(l,fo.ByPosNoHeight,r,0,0);for(h+=d.to-l,l=d.to;o>0&&u.from<=n[o-1].toA;)a=n[o-1].fromA,c=n[o-1].fromB,o--,a<u.from&&(u=i.lineAt(a,fo.ByPosNoHeight,r,0,0));c+=u.from-a,a=u.from;let f=fp.build(r.setDoc(s),e,c,h);i=fl(i,i.replace(a,l,f))}return i.updateHeight(r,0)}static empty(){return new fh(0,0)}static of(e){if(1==e.length)return e[0];let t=0,r=e.length,n=0,i=0;for(;;)if(t==r){if(n>2*i){let i=e[t-1];i.break?e.splice(--t,1,i.left,null,i.right):e.splice(--t,1,i.left,i.right),r+=1+i.break,n-=i.size}else if(i>2*n){let t=e[r];t.break?e.splice(r,1,t.left,null,t.right):e.splice(r,1,t.left,t.right),r+=2+t.break,i-=t.size}else break}else if(n<i){let r=e[t++];r&&(n+=r.size)}else{let t=e[--r];t&&(i+=t.size)}let s=0;return null==e[t-1]?(s=1,t--):null==e[t]&&(s=1,r++),new fd(fa.of(e.slice(0,t)),s,fa.of(e.slice(r)))}}function fl(e,t){return e==t?e:(e.constructor!=t.constructor&&(fr=!0),t)}fa.prototype.size=1;class fc extends fa{constructor(e,t,r){super(e,t),this.deco=r}blockAt(e,t,r,n){return new fs(n,this.length,r,this.height,this.deco||0)}lineAt(e,t,r,n,i){return this.blockAt(0,r,n,i)}forEachLine(e,t,r,n,i,s){e<=i+this.length&&t>=i&&s(this.blockAt(0,r,n,i))}updateHeight(e,t=0,r=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class fh extends fc{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,r,n){return new fs(n,this.length,r,this.height,this.breaks)}replace(e,t,r){let n=r[0];return 1==r.length&&(n instanceof fh||n instanceof fu&&4&n.flags)&&10>Math.abs(this.length-n.length)?(n instanceof fu?n=new fh(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):fa.of(r)}updateHeight(e,t=0,r=!1,n){return n&&n.from<=t&&n.more?this.setHeight(n.heights[n.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class fu extends fa{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,n=e.doc.lineAt(t+this.length).number,i=n-r+1,s,o=0;if(e.lineWrapping){let t=Math.min(this.height,e.lineHeight*i);s=t/i,this.length>i+1&&(o=(this.height-t)/(this.length-i-1))}else s=this.height/i;return{firstLine:r,lastLine:n,perLine:s,perChar:o}}blockAt(e,t,r,n){let{firstLine:i,lastLine:s,perLine:o,perChar:a}=this.heightMetrics(t,n);if(t.lineWrapping){let i=n+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),s=t.doc.lineAt(i),l=o+s.length*a,c=Math.max(r,e-l/2);return new fs(s.from,s.length,c,l,0)}{let n=Math.max(0,Math.min(s-i,Math.floor((e-r)/o))),{from:a,length:l}=t.doc.line(i+n);return new fs(a,l,r+o*n,o,0)}}lineAt(e,t,r,n,i){if(t==fo.ByHeight)return this.blockAt(e,r,n,i);if(t==fo.ByPosNoHeight){let{from:t,to:n}=r.doc.lineAt(e);return new fs(t,n-t,0,0,0)}let{firstLine:s,perLine:o,perChar:a}=this.heightMetrics(r,i),l=r.doc.lineAt(e),c=o+l.length*a,h=l.number-s,u=n+o*h+a*(l.from-i-h);return new fs(l.from,l.length,Math.max(n,Math.min(u,n+this.height-c)),c,0)}forEachLine(e,t,r,n,i,s){e=Math.max(e,i),t=Math.min(t,i+this.length);let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,i);for(let c=e,h=n;c<=t;){let t=r.doc.lineAt(c);if(c==e){let r=t.number-o;h+=a*r+l*(e-i-r)}let n=a+l*t.length;s(new fs(t.from,t.length,h,n,0)),h+=n,c=t.to+1}}replace(e,t,r){let n=this.length-t;if(n>0){let e=r[r.length-1];e instanceof fu?r[r.length-1]=new fu(e.length+n):r.push(null,new fu(n-1))}if(e>0){let t=r[0];t instanceof fu?r[0]=new fu(e+t.length):r.unshift(new fu(e-1),null)}return fa.of(r)}decomposeLeft(e,t){t.push(new fu(e-1),null)}decomposeRight(e,t){t.push(null,new fu(this.length-e-1))}updateHeight(e,t=0,r=!1,n){let i=t+this.length;if(n&&n.from<=t+this.length&&n.more){let r=[],s=Math.max(t,n.from),o=-1;for(n.from>t&&r.push(new fu(n.from-t-1).updateHeight(e,t));s<=i&&n.more;){let t=e.doc.lineAt(s).length;r.length&&r.push(null);let i=n.heights[n.index++];-1==o?o=i:Math.abs(i-o)>=.001&&(o=-2);let a=new fh(t,i);a.outdated=!1,r.push(a),s+=t+1}s<=i&&r.push(null,new fu(i-s).updateHeight(e,s));let a=fa.of(r);return(o<0||Math.abs(a.height-this.height)>=.001||Math.abs(o-this.heightMetrics(e,t).perLine)>=.001)&&(fr=!0),fl(this,a)}return(r||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class fd extends fa{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return 1&this.flags}blockAt(e,t,r,n){let i=r+this.left.height;return e<i?this.left.blockAt(e,t,r,n):this.right.blockAt(e,t,i,n+this.left.length+this.break)}lineAt(e,t,r,n,i){let s=n+this.left.height,o=i+this.left.length+this.break,a=t==fo.ByHeight?e<s:e<o,l=a?this.left.lineAt(e,t,r,n,i):this.right.lineAt(e,t,r,s,o);if(this.break||(a?l.to<o:l.from>o))return l;let c=t==fo.ByPosNoHeight?fo.ByPosNoHeight:fo.ByPos;return a?l.join(this.right.lineAt(o,c,r,s,o)):this.left.lineAt(o,c,r,n,i).join(l)}forEachLine(e,t,r,n,i,s){let o=n+this.left.height,a=i+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,r,n,i,s),t>=a&&this.right.forEachLine(e,t,r,o,a,s);else{let l=this.lineAt(a,fo.ByPos,r,n,i);e<l.from&&this.left.forEachLine(e,l.from-1,r,n,i,s),l.to>=e&&l.from<=t&&s(l),t>l.to&&this.right.forEachLine(l.to+1,t,r,o,a,s)}}replace(e,t,r){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,r));let i=[];e>0&&this.decomposeLeft(e,i);let s=i.length;for(let e of r)i.push(e);if(e>0&&ff(i,s-1),t<this.length){let e=i.length;this.decomposeRight(t,i),ff(i,e)}return fa.of(i)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&e>=++r&&t.push(null),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,n=r+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?fa.of(this.break?[e,null,t]:[e,t]):(this.left=fl(this.left,e),this.right=fl(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,n){let{left:i,right:s}=this,o=t+i.length+this.break,a=null;return n&&n.from<=t+i.length&&n.more?a=i=i.updateHeight(e,t,r,n):i.updateHeight(e,t,r),n&&n.from<=o+s.length&&n.more?a=s=s.updateHeight(e,o,r,n):s.updateHeight(e,o,r),a?this.balanced(i,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function ff(e,t){let r,n;null==e[t]&&(r=e[t-1])instanceof fu&&(n=e[t+1])instanceof fu&&e.splice(t-1,3,new fu(r.length+1+n.length))}class fp{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof fh?r.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new fh(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let n=r.widget?r.widget.estimatedHeight:0,i=r.widget?r.widget.lineBreaks:0;n<0&&(n=this.oracle.lineHeight);let s=t-e;r.block?this.addBlock(new fc(s,n,r)):(s||i||n>=5)&&this.addLineDeco(n,i,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new fh(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new fu(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof fh)return e;let t=new fh(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,r){let n=this.ensureLine();n.length+=r,n.collapsed+=r,n.widgetHeight=Math.max(n.widgetHeight,e),n.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof fh||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new fh(0,-1));let r=e;for(let e of this.nodes)e instanceof fh&&e.updateHeight(this.oracle,r),r+=e?e.length:1;return this.nodes}static build(e,t,r,n){let i=new fp(r,e);return tx.spans(t,r,n,i,0),i.finish(r)}}class fm{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,n){(e<t||r&&r.heightRelevant||n&&n.heightRelevant)&&uN(e,t,this.changes,5)}}class fg{constructor(e,t,r,n){this.from=e,this.to=t,this.size=r,this.displaySize=n}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let n=e[r],i=t[r];if(n.from!=i.from||n.to!=i.to||n.size!=i.size)return!1}return!0}draw(e,t){return uC.replace({widget:new fy(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class fy extends uO{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class fb{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=fk,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=uz.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(dh).some(e=>"function"!=typeof e&&"cm-lineWrapping"==e.class);this.heightOracle=new fn(t),this.stateDeco=e.facet(du).filter(e=>"function"!=typeof e),this.heightMap=fa.empty().applyChanges(this.stateDeco,ey.empty,this.heightOracle.setDoc(e.doc),[new dv(0,0,0,e.doc.length)]);for(let e=0;e<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());e++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=uC.set(this.lineGaps.map(e=>e.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let n=r?t.head:t.anchor;if(!e.some(({from:e,to:t})=>n>=e&&n<=t)){let{from:t,to:r}=this.lineBlockAt(n);e.push(new fv(t,r))}}return this.viewports=e.sort((e,t)=>e.from-t.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?fk:new fO(this.heightOracle,this.heightMap,this.viewports),2*!e.eq(this.scaler)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(fS(e,this.scaler))})}update(e,t=null){var r,n;let i;this.state=e.state;let s=this.stateDeco;this.stateDeco=this.state.facet(du).filter(e=>"function"!=typeof e);let o=e.changedRanges,a=dv.extendWithRanges(o,(r=this.stateDeco,n=e?e.changes:eD.empty(this.state.doc.length),i=new fm,tx.compare(s,r,n,i,0),i.changes)),l=this.heightMap.height,c=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);fr=!1,this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),a),(this.heightMap.height!=l||fr)&&(e.flags|=2),c?(this.scrollAnchorPos=e.changes.mapPos(c.from,-1),this.scrollAnchorHeight=c.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let h=a.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<h.from||t.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,t));let u=h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,e.flags|=this.updateForViewport(),(u||!e.changes.empty||2&e.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(u7)&&(this.mustEnforceCursorAssoc=!0)}measure(e){var t;let r,n,i=e.contentDOM,s=window.getComputedStyle(i),o=this.heightOracle,a=s.whiteSpace;this.defaultTextDirection="rtl"==s.direction?uz.RTL:uz.LTR;let l=this.heightOracle.mustRefreshForWrapping(a),c=i.getBoundingClientRect(),h=l||this.mustMeasureContent||this.contentDOMHeight!=c.height;this.contentDOMHeight=c.height,this.mustMeasureContent=!1;let u=0,d=0;if(c.width&&c.height){let{scaleX:e,scaleY:t}=hG(i,c);(e>.005&&Math.abs(this.scaleX-e)>.005||t>.005&&Math.abs(this.scaleY-t)>.005)&&(this.scaleX=e,this.scaleY=t,u|=16,l=h=!0)}let f=(parseInt(s.paddingTop)||0)*this.scaleY,p=(parseInt(s.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=p)&&(this.paddingTop=f,this.paddingBottom=p,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(o.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let m=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=m&&(this.scrollAnchorHeight=-1,this.scrollTop=m),this.scrolledToBottom=h1(e.scrollDOM);let g=(this.printing?function(e,t){let r=e.getBoundingClientRect();return{left:0,right:r.right-r.left,top:t,bottom:r.bottom-(r.top+t)}}:function(e,t){let r=e.getBoundingClientRect(),n=e.ownerDocument,i=n.defaultView||window,s=Math.max(0,r.left),o=Math.min(i.innerWidth,r.right),a=Math.max(0,r.top),l=Math.min(i.innerHeight,r.bottom);for(let t=e.parentNode;t&&t!=n.body;)if(1==t.nodeType){let r=t,n=window.getComputedStyle(r);if((r.scrollHeight>r.clientHeight||r.scrollWidth>r.clientWidth)&&"visible"!=n.overflow){let n=r.getBoundingClientRect();s=Math.max(s,n.left),o=Math.min(o,n.right),a=Math.max(a,n.top),l=Math.min(t==e.parentNode?i.innerHeight:l,n.bottom)}t="absolute"==n.position||"fixed"==n.position?r.offsetParent:r.parentNode}else if(11==t.nodeType)t=t.host;else break;return{left:s-r.left,right:Math.max(s,o)-r.left,top:a-(r.top+t),bottom:Math.max(a,l)-(r.top+t)}})(i,this.paddingTop),y=g.top-this.pixelViewport.top,b=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(h=!0)),!this.inView&&!this.scrollTarget&&(r=(t=e.dom).getBoundingClientRect(),n=t.ownerDocument.defaultView||window,!(r.left<n.innerWidth)||!(r.right>0)||!(r.top<n.innerHeight)||!(r.bottom>0)))return 0;let x=c.width;if((this.contentDOMWidth!=x||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=c.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),h){let t=e.docView.measureVisibleLineHeights(this.viewport);if(o.mustRefreshForHeights(t)&&(l=!0),l||o.lineWrapping&&Math.abs(x-this.contentDOMWidth)>o.charWidth){let{lineHeight:r,charWidth:n,textHeight:i}=e.docView.measureTextSize();(l=r>0&&o.refresh(a,r,n,i,x/n,t))&&(e.docView.minWidth=0,u|=16)}for(let r of(y>0&&b>0?d=Math.max(y,b):y<0&&b<0&&(d=Math.min(y,b)),fr=!1,this.viewports)){let n=r.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(r);this.heightMap=(l?fa.empty().applyChanges(this.stateDeco,ey.empty,this.heightOracle,[new dv(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(o,0,l,new fi(r.from,n))}fr&&(u|=2)}let w=!this.viewportIsAppropriate(this.viewport,d)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(2&u&&(u|=this.updateScaler()),this.viewport=this.getViewport(d,this.scrollTarget),u|=this.updateForViewport()),(2&u||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,i=this.heightOracle,{visibleTop:s,visibleBottom:o}=this,a=new fv(n.lineAt(s-1e3*r,fo.ByHeight,i,0,0).from,n.lineAt(o+(1-r)*1e3,fo.ByHeight,i,0,0).to);if(t){let{head:e}=t.range;if(e<a.from||e>a.to){let r=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=n.lineAt(e,fo.ByPos,i,0,0),o;o="center"==t.y?(s.top+s.bottom)/2-r/2:"start"==t.y||"nearest"==t.y&&e<a.from?s.top:s.bottom-r,a=new fv(n.lineAt(o-500,fo.ByHeight,i,0,0).from,n.lineAt(o+r+500,fo.ByHeight,i,0,0).to)}}return a}mapViewport(e,t){let r=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new fv(this.heightMap.lineAt(r,fo.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(n,fo.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,fo.ByPos,this.heightOracle,0,0),{bottom:i}=this.heightMap.lineAt(t,fo.ByPos,this.heightOracle,0,0),{visibleTop:s,visibleBottom:o}=this;return(0==e||n<=s-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||i>=o+Math.max(10,Math.min(r,250)))&&n>s-2e3&&i<o+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let n of e)t.touchesRange(n.from,n.to)||r.push(new fg(t.mapPos(n.from),t.mapPos(n.to),n.size,n.displaySize));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,n=r?1e4:2e3,i=n>>1,s=n<<1;if(this.defaultTextDirection!=uz.LTR&&!r)return[];let o=[],a=(n,s,l,c)=>{if(s-n<i)return;let h=this.state.selection.main,u=[h.from];for(let e of(h.empty||u.push(h.to),u))if(e>n&&e<s){a(n,e-10,l,c),a(e+10,s,l,c);return}let d=function(e,t){for(let r of e)if(t(r))return r}(e,e=>e.from>=l.from&&e.to<=l.to&&Math.abs(e.from-n)<i&&Math.abs(e.to-s)<i&&!u.some(t=>e.from<t&&e.to>t));if(!d){if(s<l.to&&t&&r&&t.visibleRanges.some(e=>e.from<=s&&e.to>=s)){let e=t.moveToLineBoundary(eB.cursor(s),!1,!0).head;e>n&&(s=e)}let e=this.gapSize(l,n,s,c),i=r||e<2e6?e:2e6;d=new fg(n,s,e,i)}o.push(d)},l=t=>{var i,o,l;let c,h,u;if(t.length<s||t.type!=uS.Text)return;let d=(i=t.from,o=t.to,l=this.stateDeco,c=[],h=i,u=0,tx.spans(l,i,o,{span(){},point(e,t){e>h&&(c.push({from:h,to:e}),u+=e-h),h=t}},20),h<o&&(c.push({from:h,to:o}),u+=o-h),{total:u,ranges:c});if(d.total<s)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,p,m;if(r){let e=n/this.heightOracle.lineLength*this.heightOracle.lineHeight,r,i;if(null!=f){let n=fw(d,f),s=((this.visibleBottom-this.visibleTop)/2+e)/t.height;r=n-s,i=n+s}else r=(this.visibleTop-t.top-e)/t.height,i=(this.visibleBottom-t.top+e)/t.height;p=fx(d,r),m=fx(d,i)}else{let r=d.total*this.heightOracle.charWidth,i=n*this.heightOracle.charWidth,s=0;if(r>2e6)for(let r of e)r.from>=t.from&&r.from<t.to&&r.size!=r.displaySize&&r.from*this.heightOracle.charWidth+s<this.pixelViewport.left&&(s=r.size-r.displaySize);let o=this.pixelViewport.left+s,a=this.pixelViewport.right+s,l,c;if(null!=f){let e=fw(d,f),t=((a-o)/2+i)/r;l=e-t,c=e+t}else l=(o-i)/r,c=(a+i)/r;p=fx(d,l),m=fx(d,c)}p>t.from&&a(t.from,p,t,d),m<t.to&&a(m,t.to,t,d)};for(let e of this.viewportLines)Array.isArray(e.type)?e.type.forEach(l):l(e);return o}gapSize(e,t,r,n){let i=fw(n,r)-fw(n,t);return this.heightOracle.lineWrapping?e.height*i:n.total*this.heightOracle.charWidth*i}updateLineGaps(e){fg.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=uC.set(e.map(e=>e.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let r=[];tx.spans(t,this.viewport.from,this.viewport.to,{span(e,t){r.push({from:e,to:t})},point(){}},20);let n=0;if(r.length!=this.visibleRanges.length)n=12;else for(let t=0;t<r.length&&!(8&n);t++){let i=this.visibleRanges[t],s=r[t];(i.from!=s.from||i.to!=s.to)&&(n|=4,e&&e.mapPos(i.from,-1)==s.from&&e.mapPos(i.to,1)==s.to||(n|=8))}return this.visibleRanges=r,n}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||fS(this.heightMap.lineAt(e,fo.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||fS(this.heightMap.lineAt(this.scaler.fromDOM(e),fo.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return fS(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class fv{constructor(e,t){this.from=e,this.to=t}}function fx({total:e,ranges:t},r){if(r<=0)return t[0].from;if(r>=1)return t[t.length-1].to;let n=Math.floor(e*r);for(let e=0;;e++){let{from:r,to:i}=t[e],s=i-r;if(n<=s)return r+n;n-=s}}function fw(e,t){let r=0;for(let{from:n,to:i}of e.ranges){if(t<=i){r+=t-n;break}r+=i-n}return r/e.total}let fk={toDOM:e=>e,fromDOM:e=>e,scale:1,eq(e){return e==this}};class fO{constructor(e,t,r){let n=0,i=0,s=0;for(let o of(this.viewports=r.map(({from:r,to:i})=>{let s=t.lineAt(r,fo.ByPos,e,0,0).top,o=t.lineAt(i,fo.ByPos,e,0,0).bottom;return n+=o-s,{from:r,to:i,top:s,bottom:o,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(t.height-n),this.viewports))o.domTop=s+(o.top-i)*this.scale,s=o.domBottom=o.domTop+(o.bottom-o.top),i=o.bottom}toDOM(e){for(let t=0,r=0,n=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.top)return n+(e-r)*this.scale;if(e<=i.bottom)return i.domTop+(e-i.top);r=i.bottom,n=i.domBottom}}fromDOM(e){for(let t=0,r=0,n=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.domTop)return r+(e-n)/this.scale;if(e<=i.domBottom)return i.top+(e-i.domTop);r=i.bottom,n=i.domBottom}}eq(e){return e instanceof fO&&this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,r)=>t.from==e.viewports[r].from&&t.to==e.viewports[r].to)}}function fS(e,t){if(1==t.scale)return e;let r=t.toDOM(e.top),n=t.toDOM(e.bottom);return new fs(e.from,e.length,r,n-r,Array.isArray(e._content)?e._content.map(e=>fS(e,t)):e._content)}let fC=eV.define({combine:e=>e.join(" ")}),fT=eV.define({combine:e=>e.indexOf(!0)>-1}),fA=hM.newName(),fM=hM.newName(),fE=hM.newName(),fN={"&light":"."+fM,"&dark":"."+fE};function f_(e,t,r){return new hM(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,t=>{if("&"==t)return e;if(!r||!r[t])throw RangeError(`Unsupported selector: ${t}`);return r[t]}):e+" "+t})}let fj=f_("."+fA,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},fN),fD={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},fR=ud.ie&&ud.ie_version<=11,fP=class{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new hX,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let e of t)this.queue.push(e);(ud.ie&&ud.ie_version<=11||ud.ios&&e.composing)&&t.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&!1!==e.constructor.EDIT_CONTEXT&&!(ud.chrome&&ud.chrome_version<126)&&(this.editContext=new fL(e),e.state.facet(dn)&&(e.contentDOM.editContext=this.editContext.editContext)),fR&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver(()=>{var e;(null===(e=this.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){("change"!=e.type&&e.type||e.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){for(let t of(this.gapIntersection.disconnect(),e))this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,n=this.selectionRange;if(r.state.facet(dn)?r.root.activeElement!=this.dom:!h$(this.dom,n))return;let i=n.anchorNode&&r.docView.nearest(n.anchorNode);if(i&&i.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(ud.ie&&ud.ie_version<=11||ud.android&&ud.chrome)&&!r.state.selection.main.empty&&n.focusNode&&hF(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=hL(e.root);if(!t)return!1;let r=ud.safari&&11==e.root.nodeType&&e.root.activeElement==this.dom&&function(e,t){if(t.getComposedRanges){let r=t.getComposedRanges(e.root)[0];if(r)return fz(e,r)}let r=null;function n(e){e.preventDefault(),e.stopImmediatePropagation(),r=e.getTargetRanges()[0]}return e.contentDOM.addEventListener("beforeinput",n,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",n,!0),r?fz(e,r):null}(this.view,t)||t;if(!r||this.selectionRange.eq(r))return!1;let n=h$(this.dom,r);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,t){let r=t.focusNode,n=t.focusOffset;if(!r||t.anchorNode!=r||t.anchorOffset!=n)return!1;for(n=Math.min(n,hW(r));;)if(n){if(1!=r.nodeType)return!1;let e=r.childNodes[n-1];"false"==e.contentEditable?n--:n=hW(r=e)}else{if(r==e)return!0;n=hQ(r),r=r.parentNode}}(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(1==r.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(11==r.nodeType)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,fD),fR&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),fR&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;this.delayedAndroidKey||(this.flushingAndroidKey=this.view.win.requestAnimationFrame(()=>{let e=this.delayedAndroidKey;e&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=e.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&e.force&&hK(this.dom,e.key,e.keyCode))})),this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null!==(r=this.delayedAndroidKey)&&void 0!==r&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,n=!1;for(let i of e){let e=this.readMutation(i);e&&(e.typeOver&&(n=!0),-1==t?{from:t,to:r}=e:(t=Math.min(e.from,t),r=Math.max(e.to,r)))}return{from:t,to:r,typeOver:n}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),n=this.selectionChanged&&h$(this.dom,this.selectionRange);if(e<0&&!n)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let i=new dI(this.view,e,t,r);return this.view.docView.domChanged={newSel:i.newSel?i.newSel.main:null},i}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let r=this.view.state,n=dz(this.view,t);return this.view.state==r&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),n}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.flags|=4),"childList"!=e.type)return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null;{let r=fI(t,e.previousSibling||e.target.previousSibling,-1),n=fI(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(dn)!=e.state.facet(dn)&&(e.view.contentDOM.editContext=e.state.facet(dn)?this.editContext.editContext:null))}destroy(){var e,t,r;for(let n of(this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(r=this.resizeScroll)||void 0===r||r.disconnect(),this.scrollTargets))n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}};function fI(e,t,r){for(;t;){let n=h6.get(t);if(n&&n.parent==e)return n;let i=t.parentNode;t=i!=e.dom?i:r>0?t.nextSibling:t.previousSibling}return null}function fz(e,t){let r=t.startContainer,n=t.startOffset,i=t.endContainer,s=t.endOffset,o=e.docView.domAtPos(e.state.selection.main.anchor);return hF(o.node,o.offset,i,s)&&([r,n,i,s]=[i,s,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}}class fL{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});for(let r in this.handlers.textupdate=t=>{let r=e.state.selection.main,{anchor:n,head:i}=r,s=this.toEditorPos(t.updateRangeStart),o=this.toEditorPos(t.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:t.updateRangeStart,editorBase:s,drifted:!1});let a={from:s,to:o,insert:ey.of(t.text.split(`
`))};if(a.from==this.from&&n<this.from?a.from=n:a.to==this.to&&n>this.to&&(a.to=n),a.from==a.to&&!a.insert.length){let n=eB.single(this.toEditorPos(t.selectionStart),this.toEditorPos(t.selectionEnd));n.main.eq(r)||e.dispatch({selection:n,userEvent:"select"});return}if((ud.mac||ud.android)&&a.from==i-1&&/^\. ?$/.test(t.text)&&"off"==e.contentDOM.getAttribute("autocorrect")&&(a={from:s,to:o,insert:ey.of([t.text.replace("."," ")])}),this.pendingContextChange=a,!e.state.readOnly){let r=this.to-this.from+(a.to-a.from+a.insert.length);dL(e,a,eB.single(this.toEditorPos(t.selectionStart,r),this.toEditorPos(t.selectionEnd,r)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=r=>{let n=[],i=null;for(let t=this.toEditorPos(r.rangeStart),s=this.toEditorPos(r.rangeEnd);t<s;t++){let r=e.coordsForChar(t);i=r&&new DOMRect(r.left,r.top,r.right-r.left,r.bottom-r.top)||i||new DOMRect,n.push(i)}t.updateCharacterBounds(r.rangeStart,n)},this.handlers.textformatupdate=t=>{let r=[];for(let e of t.getTextFormats()){let t=e.underlineStyle,n=e.underlineThickness;if("None"!=t&&"None"!=n){let i=this.toEditorPos(e.rangeStart),s=this.toEditorPos(e.rangeEnd);if(i<s){let e=`text-decoration: underline ${"Dashed"==t?"dashed ":"Squiggle"==t?"wavy ":""}${"Thin"==n?1:2}px`;r.push(uC.mark({attributes:{style:e}}).range(i,s))}}}e.dispatch({effects:dt.of(uC.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:t}=this.composing;this.composing=null,t&&this.reset(e.state)}},this.handlers)t.addEventListener(r,this.handlers[r]);this.measureReq={read:e=>{this.editContext.updateControlBounds(e.contentDOM.getBoundingClientRect());let t=hL(e.root);t&&t.rangeCount&&this.editContext.updateSelectionBounds(t.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,r=!1,n=this.pendingContextChange;return e.changes.iterChanges((i,s,o,a,l)=>{if(r)return;let c=l.length-(s-i);if(n&&s>=n.to){if(n.from==i&&n.to==s&&n.insert.eq(l)){n=this.pendingContextChange=null,t+=c,this.to+=c;return}n=null,this.revertPending(e.state)}if(i+=t,(s+=t)<=this.from)this.from+=c,this.to+=c;else if(i<this.to){if(i<this.from||s>this.to||this.to-this.from+l.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(i),this.toContextPos(s),l.toString()),this.to+=c}t+=c}),n&&!r&&this.revertPending(e.state),!r}update(e){let t=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(e=>!e.isUserEvent("input.type")&&e.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):this.applyEdits(e)&&this.rangeIsValid(e.state)?(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state):(this.pendingContextChange=null,this.reset(e.state)),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),n=this.toContextPos(t.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=n)&&this.editContext.updateSelection(r,n)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>3e4)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}let fq=class e{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;for(let t of(this.dispatchTransactions=e.dispatchTransactions||r&&(e=>e.forEach(e=>r(e,this)))||(e=>this.update(e)),this.dispatch=this.dispatch.bind(this),this._root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new fb(e.state||tp.create(e)),e.scrollTo&&e.scrollTo.is(de)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(ds).map(e=>new dl(e)),this.plugins))t.update(this);this.observer=new fP(this),this.inputState=new dq(this),this.inputState.ensureHandlers(this.plugins),this.docView=new dw(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),null!==(t=document.fonts)&&void 0!==t&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=1==e.length&&e[0]instanceof ta?e:1==e.length&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(0!=this.updateState)throw Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,n,i=this.state;for(let t of e){if(t.startState!=i)throw RangeError("Trying to update state with a transaction that doesn't start from the previous state.");i=t.state}if(this.destroyed){this.viewState.state=i;return}let s=this.hasFocus,o=0,a=null;e.some(e=>e.annotation(d7))?(this.inputState.notifiedFocused=s,o=1):s!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=s,(a=d8(i,s))||(o=1));let l=this.observer.delayedAndroidKey,c=null;if(l?(this.observer.clearDelayedAndroidKey(),((c=this.observer.readChange())&&!this.state.doc.eq(i.doc)||!this.state.selection.eq(i.selection))&&(c=null)):this.observer.clear(),i.facet(tp.phrases)!=this.state.facet(tp.phrases))return this.setState(i);n=dx.create(this,i,e),n.flags|=o;let h=this.viewState.scrollTarget;try{for(let t of(this.updateState=2,e)){if(h&&(h=h.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;h=new u9(e.empty?e:eB.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(de)&&(h=e.value.clip(this.state))}this.viewState.update(n,h),this.bidiCache=fF.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),t=this.docView.update(n),this.state.facet(db)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(e=>e.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(fC)!=n.state.facet(fC)&&(this.viewState.mustMeasureContent=!0),(t||r||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!n.empty)for(let e of this.state.facet(u1))try{e(n)}catch(e){dr(this.state,e,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!dz(this,c)&&l.force&&hK(this.contentDOM,l.key,l.keyCode)})}setState(e){if(0!=this.updateState)throw Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);for(let t of(this.viewState=new fb(e),this.plugins=e.facet(ds).map(e=>new dl(e)),this.pluginMap.clear(),this.plugins))t.update(this);this.docView.destroy(),this.docView=new dw(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(ds),r=e.state.facet(ds);if(t!=r){let n=[];for(let i of r){let r=t.indexOf(i);if(r<0)n.push(new dl(i));else{let t=this.plugins[r];t.mustUpdate=e,n.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=n,this.pluginMap.clear()}else for(let t of this.plugins)t.mustUpdate=e;for(let e=0;e<this.plugins.length;e++)this.plugins[e].update(this);t!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(e){dr(this.state,e,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,n=r.scrollTop*this.scaleY,{scrollAnchorPos:i,scrollAnchorHeight:s}=this.viewState;Math.abs(n-this.viewState.scrollTop)>1&&(s=-1),this.viewState.scrollAnchorHeight=-1;try{for(let e=0;;e++){if(s<0){if(h1(r))i=-1,s=this.viewState.heightMap.height;else{let e=this.viewState.scrollAnchorAt(n);i=e.from,s=e.top}}this.updateState=1;let o=this.viewState.measure(this);if(!o&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];4&o||([this.measureRequests,a]=[a,this.measureRequests]);let l=a.map(e=>{try{return e.read(this)}catch(e){return dr(this.state,e),fB}}),c=dx.create(this,this.state,[]),h=!1;c.flags|=o,t?t.flags|=o:t=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),(h=this.docView.update(c))&&this.docViewUpdate());for(let e=0;e<a.length;e++)if(l[e]!=fB)try{let t=a[e];t.write&&t.write(l[e],this)}catch(e){dr(this.state,e)}if(h&&this.docView.updateSelection(!0),!c.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,s=-1;continue}{let e=(i<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(i).top)-s;if(e>1||e<-1){r.scrollTop=(n+=e)/this.scaleY,s=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let e of this.state.facet(u1))e(t)}get themeClasses(){return fA+" "+(this.state.facet(fT)?fE:fM)+" "+this.state.facet(fC)}updateAttrs(){let e=fQ(this,dc,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(dn)?"true":"false",class:"cm-content",style:`${ud.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),fQ(this,dh,t);let r=this.observer.ignore(()=>{let r=uk(this.contentDOM,this.contentAttrs,t),n=uk(this.dom,this.editorAttrs,e);return r||n});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(t){let r=!0;for(let n of t)for(let t of n.effects)t.is(e.announce)&&(r&&(this.announceDOM.textContent=""),r=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=t.value)}mountStyles(){this.styleModules=this.state.facet(db);let t=this.state.facet(e.cspNonce);hM.mount(this.root,this.styleModules.concat(fj).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(2==this.updateState)throw Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e&&!(this.measureRequests.indexOf(e)>-1)){if(null!=e.key){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(t=>t.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return dD(this,e,d_(this,e,t,r))}moveByGroup(e,t){return dD(this,e,d_(this,e,t,t=>{var r;let n,i;return r=e.head,i=(n=this.state.charCategorizer(r))(t),e=>{let t=n(e);return i==td.Space&&(i=t),i==t}}))}visualLineSide(e,t){let r=this.bidiSpans(e),n=this.textDirectionAt(e.from),i=r[t?r.length-1:0];return eB.cursor(i.side(t,n)+e.from,i.forward(!t,n)?1:-1)}moveToLineBoundary(e,t,r=!0){return function(e,t,r,n){let i=dN(e,t.head),s=n&&i.type==uS.Text&&(e.lineWrapping||i.widgetLineBreaks)?e.coordsAtPos(t.assoc<0&&t.head>i.from?t.head-1:t.head):null;if(s){let t=e.dom.getBoundingClientRect(),n=e.textDirectionAt(i.from),o=e.posAtCoords({x:r==(n==uz.LTR)?t.right-1:t.left+1,y:(s.top+s.bottom)/2});if(null!=o)return eB.cursor(o,r?-1:1)}return eB.cursor(r?i.to:i.from,r?-1:1)}(this,e,t,r)}moveVertically(e,t,r){return dD(this,e,function(e,t,r,n){let i=t.head,s=r?1:-1;if(i==(r?e.state.doc.length:0))return eB.cursor(i,t.assoc);let o=t.goalColumn,a,l=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(i,t.assoc||-1),h=e.documentTop;if(c)null==o&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let t=e.viewState.lineBlockAt(i);null==o&&(o=Math.min(l.right-l.left,e.defaultCharacterWidth*(i-t.from))),a=(s<0?t.top:t.bottom)+h}let u=l.left+o,d=n??e.viewState.heightOracle.textHeight>>1;for(let t=0;;t+=10){let r=a+(d+t)*s,n=dM(e,{x:u,y:r},!1,s);if(r<l.top||r>l.bottom||(s<0?n<i:n>i)){let t=e.docView.coordsForChar(n),i=!t||r<t.top?-1:1;return eB.cursor(n,i,void 0,o)}}}(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),dM(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let n=this.state.doc.lineAt(e),i=this.bidiSpans(n);return hU(r,i[uU.find(i,e-n.from,-1,t)].dir==uz.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(u6)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>f$)return uX(e.length);let t=this.textDirectionAt(e.from),r;for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t&&(n.fresh||function e(t,r){if(t.length!=r.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],s=r[n];if(i.from!=s.from||i.to!=s.to||i.direction!=s.direction||!e(i.inner,s.inner))return!1}return!0}(n.isolates,r=dm(this,e))))return n.order;r||(r=dm(this,e));let n=function(e,t,r){if(!e)return[new uU(0,0,+(t==uq))];if(t==uL&&!r.length&&!uW.test(e))return uX(e.length);if(r.length)for(;e.length>uG.length;)uG[uG.length]=256;let n=[],i=+(t!=uL);return function e(t,r,n,i,s,o,a){let l=r%2?2:1;(function(e,t,r,n,i){for(let s=0;s<=n.length;s++){let o=s?n[s-1].to:t,a=s<n.length?n[s].from:r,l=s?256:i;for(let t=o,r=l,n=l;t<a;t++){let i=uH(e.charCodeAt(t));512==i?i=r:8==i&&4==n&&(i=16),uG[t]=4==i?2:i,7&i&&(n=i),r=i}for(let e=o,t=l,n=l;e<a;e++){let i=uG[e];if(128==i)e<a-1&&t==uG[e+1]&&24&t?i=uG[e]=t:uG[e]=256;else if(64==i){let i=e+1;for(;i<a&&64==uG[i];)i++;let s=e&&8==t||i<r&&8==uG[i]?1==n?1:8:256;for(let t=e;t<i;t++)uG[t]=s;e=i-1}else 8==i&&1==n&&(uG[e]=1);t=i,7&i&&(n=i)}}})(t,s,o,i,l),function(e,t,r,n,i){let s=1==i?2:1;for(let o=0,a=0,l=0;o<=n.length;o++){let c=o?n[o-1].to:t,h=o<n.length?n[o].from:r;for(let t=c,r,n,o;t<h;t++)if(n=uQ[r=e.charCodeAt(t)]){if(n<0){for(let e=a-3;e>=0;e-=3)if(uV[e+1]==-n){let r=uV[e+2],n=2&r?i:4&r?1&r?s:i:0;n&&(uG[t]=uG[uV[e]]=n),a=e;break}}else{if(189==uV.length)break;uV[a++]=t,uV[a++]=r,uV[a++]=l}}else if(2==(o=uG[t])||1==o){let e=o==i;l=+!e;for(let t=a-3;t>=0;t-=3){let r=uV[t+2];if(2&r)break;if(e)uV[t+2]|=2;else{if(4&r)break;uV[t+2]|=4}}}}}(t,s,o,i,l),function(e,t,r,n){for(let i=0,s=n;i<=r.length;i++){let o=i?r[i-1].to:e,a=i<r.length?r[i].from:t;for(let l=o;l<a;){let o=uG[l];if(256==o){let o=l+1;for(;;)if(o==a){if(i==r.length)break;o=r[i++].to,a=i<r.length?r[i].from:t}else if(256==uG[o])o++;else break;let c=1==s,h=c==((o<t?uG[o]:n)==1)?c?1:2:n;for(let t=o,n=i,s=n?r[n-1].to:e;t>l;)t==s&&(t=r[--n].from,s=n?r[n-1].to:e),uG[--t]=h;l=o}else s=o,l++}}}(s,o,i,l),function t(r,n,i,s,o,a,l){let c=s%2?2:1;if(s%2==o%2)for(let h=n,u=0;h<i;){let n=!0,d=!1;if(u==a.length||h<a[u].from){let e=uG[h];e!=c&&(n=!1,d=16==e)}let f=n||1!=c?null:[],p=n?s:s+1,m=h;e:for(;;)if(u<a.length&&m==a[u].from){if(d)break;let t=a[u];if(!n)for(let e=t.to,r=u+1;;){if(e==i)break e;if(r<a.length&&a[r].from==e)e=a[r++].to;else{if(uG[e]==c)break e;break}}(u++,f)?f.push(t):(t.from>h&&l.push(new uU(h,t.from,p)),e(r,t.direction==uL!=!(p%2)?s+1:s,o,t.inner,t.from,t.to,l),h=t.to),m=t.to}else{if(m==i||(n?uG[m]!=c:uG[m]==c))break;m++}f?t(r,h,m,s+1,o,f,l):h<m&&l.push(new uU(h,m,p)),h=m}else for(let h=i,u=a.length;h>n;){let i=!0,d=!1;if(!u||h>a[u-1].to){let e=uG[h-1];e!=c&&(i=!1,d=16==e)}let f=i||1!=c?null:[],p=i?s:s+1,m=h;e:for(;;)if(u&&m==a[u-1].to){if(d)break;let t=a[--u];if(!i)for(let e=t.from,r=u;;){if(e==n)break e;if(r&&a[r-1].to==e)e=a[--r].from;else{if(uG[e-1]==c)break e;break}}f?f.push(t):(t.to<h&&l.push(new uU(t.to,h,p)),e(r,t.direction==uL!=!(p%2)?s+1:s,o,t.inner,t.from,t.to,l),h=t.from),m=t.from}else{if(m==n||(i?uG[m-1]!=c:uG[m-1]==c))break;m--}f?t(r,m,h,s+1,o,f,l):m<h&&l.push(new uU(m,h,p)),h=m}}(t,s,o,r,n,i,a)}(e,i,i,r,0,e.length,n),n}(e.text,t,r);return this.bidiCache.push(new fF(e.from,e.to,t,r,!0,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||ud.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{hZ(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of(this.root.activeElement==this.contentDOM&&this.contentDOM.blur(),this.plugins))e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return de.of(new u9("number"==typeof e?eB.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return de.of(new u9(eB.cursor(r.from),"start","start",r.top-e,t,!0))}setTabFocusMode(e){null==e?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof e?this.inputState.tabFocusMode=e?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return da.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return da.define(()=>({}),{eventObservers:e})}static theme(e,t){let r=hM.newName(),n=[fC.of(r),db.of(f_(`.${r}`,e))];return t&&t.dark&&n.push(fT.of(!0)),n}static baseTheme(e){return eK.lowest(db.of(f_("."+fA,e,fN)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),n=r&&h6.get(r)||h6.get(e);return(null===(t=null==n?void 0:n.rootView)||void 0===t?void 0:t.view)||null}};fq.styleModule=db,fq.inputHandler=u2,fq.clipboardInputFilter=u5,fq.clipboardOutputFilter=u3,fq.scrollHandler=u8,fq.focusChangeEffect=u4,fq.perLineTextDirection=u6,fq.exceptionSink=u0,fq.updateListener=u1,fq.editable=dn,fq.mouseSelectionStyle=uK,fq.dragMovesSelection=uJ,fq.clickAddsSelectionRange=uZ,fq.decorations=du,fq.outerDecorations=dd,fq.atomicRanges=df,fq.bidiIsolatedRanges=dp,fq.scrollMargins=dg,fq.darkTheme=fT,fq.cspNonce=eV.define({combine:e=>e.length?e[0]:""}),fq.contentAttributes=dh,fq.editorAttributes=dc,fq.lineWrapping=fq.contentAttributes.of({class:"cm-lineWrapping"}),fq.announce=to.define();let f$=4096,fB={};class fF{constructor(e,t,r,n,i,s){this.from=e,this.to=t,this.dir=r,this.isolates=n,this.fresh=i,this.order=s}static update(e,t){if(t.empty&&!e.some(e=>e.fresh))return e;let r=[],n=e.length?e[e.length-1].dir:uz.LTR;for(let i=Math.max(0,e.length-10);i<e.length;i++){let s=e[i];s.dir!=n||t.touchesRange(s.from,s.to)||r.push(new fF(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.isolates,!1,s.order))}return r}}function fQ(e,t,r){for(let n=e.state.facet(t),i=n.length-1;i>=0;i--){let t=n[i],s="function"==typeof t?t(e):t;s&&uv(s,r)}return r}let fV=ud.mac?"mac":ud.windows?"win":ud.linux?"linux":"key";function fH(e,t,r){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==r&&t.shiftKey&&(e="Shift-"+e),e}let fW=eK.default(fq.domEventHandlers({keydown:(e,t)=>fJ(fX(t.state),e,t,"editor")})),fU=eV.define({enables:fW}),fG=new WeakMap;function fX(e){let t=e.facet(fU),r=fG.get(t);return r||fG.set(t,r=function(e,t=fV){let r=Object.create(null),n=Object.create(null),i=(e,t)=>{let r=n[e];if(null==r)n[e]=t;else if(r!=t)throw Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},s=(e,n,s,o,a)=>{var l,c;let h=r[e]||(r[e]=Object.create(null)),u=n.split(/ (?!$)/).map(e=>(function(e,t){let r,n,i,s;let o=e.split(/-(?!$)/),a=o[o.length-1];"Space"==a&&(a=" ");for(let e=0;e<o.length-1;++e){let a=o[e];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else if(/^s(hift)?$/i.test(a))i=!0;else if(/^mod$/i.test(a))"mac"==t?s=!0:n=!0;else throw Error("Unrecognized modifier name: "+a)}return r&&(a="Alt-"+a),n&&(a="Ctrl-"+a),s&&(a="Meta-"+a),i&&(a="Shift-"+a),a})(e,t));for(let t=1;t<u.length;t++){let r=u.slice(0,t).join(" ");i(r,!0),h[r]||(h[r]={preventDefault:!0,stopPropagation:!1,run:[t=>{let n=fY={view:t,prefix:r,scope:e};return setTimeout(()=>{fY==n&&(fY=null)},4e3),!0}]})}let d=u.join(" ");i(d,!1);let f=h[d]||(h[d]={preventDefault:!1,stopPropagation:!1,run:(null===(c=null===(l=h._any)||void 0===l?void 0:l.run)||void 0===c?void 0:c.slice())||[]});s&&f.run.push(s),o&&(f.preventDefault=!0),a&&(f.stopPropagation=!0)};for(let n of e){let e=n.scope?n.scope.split(" "):["editor"];if(n.any)for(let t of e){let e=r[t]||(r[t]=Object.create(null));e._any||(e._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:i}=n;for(let t in e)e[t].run.push(e=>i(e,fZ))}let i=n[t]||n.key;if(i)for(let t of e)s(t,i,n.run,n.preventDefault,n.stopPropagation),n.shift&&s(t,"Shift-"+i,n.shift,n.preventDefault,n.stopPropagation)}return r}(t.reduce((e,t)=>e.concat(t),[]))),r}let fY=null,fZ=null;function fJ(e,t,r,n){fZ=t;let i=hz(t),s=eE(eA(i,0))==i.length&&" "!=i,o="",a=!1,l=!1,c=!1;fY&&fY.view==r&&fY.scope==n&&(o=fY.prefix+" ",0>dQ.indexOf(t.keyCode)&&(l=!0,fY=null));let h=new Set,u=e=>{if(e){for(let t of e.run)if(!h.has(t)&&(h.add(t),t(r)))return e.stopPropagation&&(c=!0),!0;e.preventDefault&&(e.stopPropagation&&(c=!0),l=!0)}return!1},d=e[n],f,p;return d&&(u(d[o+fH(i,t,!s)])?a=!0:s&&(t.altKey||t.metaKey||t.ctrlKey)&&!(ud.windows&&t.ctrlKey&&t.altKey)&&(f=h_[t.keyCode])&&f!=i?(u(d[o+fH(f,t,!0)])||t.shiftKey&&(p=hj[t.keyCode])!=i&&p!=f&&u(d[o+fH(p,t,!1)]))&&(a=!0):s&&t.shiftKey&&u(d[o+fH(i,t,!0)])&&(a=!0),!a&&u(d._any)&&(a=!0)),l&&(a=!0),a&&c&&t.stopPropagation(),fZ=null,a}class fK{constructor(e,t,r,n,i){this.className=e,this.left=t,this.top=r,this.width=n,this.height=i}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className==this.className&&(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(!r.empty)return function(e,t,r){if(r.to<=e.viewport.from||r.from>=e.viewport.to)return[];let n=Math.max(r.from,e.viewport.from),i=Math.min(r.to,e.viewport.to),s=e.textDirection==uz.LTR,o=e.contentDOM,a=o.getBoundingClientRect(),l=f0(e),c=o.querySelector(".cm-line"),h=c&&window.getComputedStyle(c),u=a.left+(h?parseInt(h.paddingLeft)+Math.min(0,parseInt(h.textIndent)):0),d=a.right-(h?parseInt(h.paddingRight):0),f=dN(e,n),p=dN(e,i),m=f.type==uS.Text?f:null,g=p.type==uS.Text?p:null;if(m&&(e.lineWrapping||f.widgetLineBreaks)&&(m=f1(e,n,1,m)),g&&(e.lineWrapping||p.widgetLineBreaks)&&(g=f1(e,i,-1,g)),m&&g&&m.from==g.from&&m.to==g.to)return b(v(r.from,r.to,m));{let t=m?v(r.from,null,m):x(f,!1),n=g?v(null,r.to,g):x(p,!0),i=[];return(m||f).to<(g||p).from-(m&&g?1:0)||f.widgetLineBreaks>1&&t.bottom+e.defaultLineHeight/2<n.top?i.push(y(u,t.bottom,d,n.top)):t.bottom<n.top&&e.elementAtHeight((t.bottom+n.top)/2).type==uS.Text&&(t.bottom=n.top=(t.bottom+n.top)/2),b(t).concat(i).concat(b(n))}function y(e,r,n,i){return new fK(t,e-l.left,r-l.top,n-e,i-r)}function b({top:e,bottom:t,horizontal:r}){let n=[];for(let i=0;i<r.length;i+=2)n.push(y(r[i],e,r[i+1],t));return n}function v(t,r,n){let i=1e9,o=-1e9,a=[];function l(t,r,l,c,h){let f=e.coordsAtPos(t,t==n.to?-2:2),p=e.coordsAtPos(l,l==n.from?2:-2);f&&p&&(i=Math.min(f.top,p.top,i),o=Math.max(f.bottom,p.bottom,o),h==uz.LTR?a.push(s&&r?u:f.left,s&&c?d:p.right):a.push(!s&&c?u:p.left,!s&&r?d:f.right))}let c=t??n.from,h=r??n.to;for(let n of e.visibleRanges)if(n.to>c&&n.from<h)for(let i=Math.max(n.from,c),s=Math.min(n.to,h);;){let n=e.state.doc.lineAt(i);for(let o of e.bidiSpans(n)){let e=o.from+n.from,a=o.to+n.from;if(e>=s)break;a>i&&l(Math.max(e,i),null==t&&e<=c,Math.min(a,s),null==r&&a>=h,o.dir)}if((i=n.to+1)>=s)break}return 0==a.length&&l(c,null==t,h,null==r,e.textDirection),{top:i,bottom:o,horizontal:a}}function x(e,t){let r=a.top+(t?e.top:e.bottom);return{top:r,bottom:r,horizontal:[]}}}(e,t,r);{let n=e.coordsAtPos(r.head,r.assoc||1);if(!n)return[];let i=f0(e);return[new fK(t,n.left-i.left,n.top-i.top,null,n.bottom-n.top)]}}}function f0(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==uz.LTR?t.left:t.right-e.scrollDOM.clientWidth*e.scaleX)-e.scrollDOM.scrollLeft*e.scaleX,top:t.top-e.scrollDOM.scrollTop*e.scaleY}}function f1(e,t,r,n){let i=e.coordsAtPos(t,2*r);if(!i)return n;let s=e.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,a=e.posAtCoords({x:s.left+1,y:o}),l=e.posAtCoords({x:s.right-1,y:o});return null==a||null==l?n:{from:Math.max(n.from,Math.min(a,l)),to:Math.min(n.to,Math.max(a,l))}}class f2{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(f4)!=e.state.facet(f4)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){!1!==this.layer.updateOnDocViewUpdate&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(f4);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((e,t)=>{var r;return r=this.drawn[t],!(e.constructor==r.constructor&&e.eq(r))})){let t=this.dom.firstChild,r=0;for(let n of e)n.update&&t&&n.constructor&&this.drawn[r].constructor&&n.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(n.draw(),t);for(;t;){let e=t.nextSibling;t.remove(),t=e}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}let f4=eV.define();function f5(e){return[da.define(t=>new f2(t,e)),f4.of(e)]}let f3=!(ud.ios&&ud.webkit&&ud.webkit_version<534),f6=eV.define({combine:e=>tm(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function f7(e){return e.startState.facet(f6)!=e.state.facet(f6)}let f8=f5({above:!0,markers(e){let{state:t}=e,r=t.facet(f6),n=[];for(let i of t.selection.ranges){let s=i==t.selection.main;if(i.empty?!s||f3:r.drawRangeCursor){let t=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",r=i.empty?i:eB.cursor(i.head,i.head>i.anchor?-1:1);for(let i of fK.forRange(e,t,r))n.push(i)}}return n},update(e,t){e.transactions.some(e=>e.selection)&&(t.style.animationName="cm-blink"==t.style.animationName?"cm-blink2":"cm-blink");let r=f7(e);return r&&f9(e.state,t),e.docChanged||e.selectionSet||r},mount(e,t){f9(t.state,e)},class:"cm-cursorLayer"});function f9(e,t){t.style.animationDuration=e.facet(f6).cursorBlinkRate+"ms"}let pe=f5({above:!1,markers:e=>e.state.selection.ranges.map(t=>t.empty?[]:fK.forRange(e,"cm-selectionBackground",t)).reduce((e,t)=>e.concat(t)),update:(e,t)=>e.docChanged||e.selectionSet||e.viewportChanged||f7(e),class:"cm-selectionLayer"}),pt={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};f3&&(pt[".cm-line"].caretColor=pt[".cm-content"].caretColor="transparent !important");let pr=eK.highest(fq.theme(pt)),pn=to.define({map:(e,t)=>null==e?null:t.mapPos(e)}),pi=eY.define({create:()=>null,update:(e,t)=>(null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce((e,t)=>t.is(pn)?t.value:e,e))}),ps=da.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let r=e.state.field(pi);null==r?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(pi)!=r||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:e}=this,t=e.state.field(pi),r=null!=t&&e.coordsAtPos(t);if(!r)return null;let n=e.scrollDOM.getBoundingClientRect();return{left:r.left-n.left+e.scrollDOM.scrollLeft*e.scaleX,top:r.top-n.top+e.scrollDOM.scrollTop*e.scaleY,height:r.bottom-r.top}}drawCursor(e){if(this.cursor){let{scaleX:t,scaleY:r}=this.view;e?(this.cursor.style.left=e.left/t+"px",this.cursor.style.top=e.top/r+"px",this.cursor.style.height=e.height/r+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(pi)!=e&&this.view.dispatch({effects:pn.of(e)})}},{eventObservers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function po(e,t,r,n,i){t.lastIndex=0;for(let s=e.iterRange(r,n),o=r,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=t.exec(s.value);)i(o+a.index,a)}class pa{constructor(e){let{regexp:t,decoration:r,decorate:n,boundary:i,maxLength:s=1e3}=e;if(!t.global)throw RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,n)this.addMatch=(e,t,r,i)=>n(i,r,r+e[0].length,e,t);else if("function"==typeof r)this.addMatch=(e,t,n,i)=>{let s=r(e,t,n);s&&i(n,n+e[0].length,s)};else if(r)this.addMatch=(e,t,n,i)=>i(n,n+e[0].length,r);else throw RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=i,this.maxLength=s}createDeco(e){let t=new tw,r=t.add.bind(t);for(let{from:t,to:n}of function(e,t){let r=e.visibleRanges;if(1==r.length&&r[0].from==e.viewport.from&&r[0].to==e.viewport.to)return r;let n=[];for(let{from:i,to:s}of r)i=Math.max(e.state.doc.lineAt(i).from,i-t),s=Math.min(e.state.doc.lineAt(s).to,s+t),n.length&&n[n.length-1].to>=i?n[n.length-1].to=s:n.push({from:i,to:s});return n}(e,this.maxLength))po(e.state.doc,this.regexp,t,n,(t,n)=>this.addMatch(n,e,t,r));return t.finish()}updateDeco(e,t){let r=1e9,n=-1;return e.docChanged&&e.changes.iterChanges((t,i,s,o)=>{o>=e.view.viewport.from&&s<=e.view.viewport.to&&(r=Math.min(s,r),n=Math.max(o,n))}),e.viewportMoved||n-r>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,t.map(e.changes),r,n):t}updateRange(e,t,r,n){for(let i of e.visibleRanges){let s=Math.max(i.from,r),o=Math.min(i.to,n);if(o>s){let r=e.state.doc.lineAt(s),n=r.to<o?e.state.doc.lineAt(o):r,a=Math.max(i.from,r.from),l=Math.min(i.to,n.to);if(this.boundary){for(;s>r.from;s--)if(this.boundary.test(r.text[s-1-r.from])){a=s;break}for(;o<n.to;o++)if(this.boundary.test(n.text[o-n.from])){l=o;break}}let c=[],h,u=(e,t,r)=>c.push(r.range(e,t));if(r==n)for(this.regexp.lastIndex=a-r.from;(h=this.regexp.exec(r.text))&&h.index<l-r.from;)this.addMatch(h,e,h.index+r.from,u);else po(e.state.doc,this.regexp,a,l,(t,r)=>this.addMatch(r,e,t,u));t=t.update({filterFrom:a,filterTo:l,filter:(e,t)=>e<a||t>l,add:c})}}return t}}let pl=null!=/x/.unicode?"gu":"g",pc=RegExp(`[\0-\b
-\x7f-\x9f\xad\u2028\u2029\uFEFF-]`,pl),ph={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},pu=null,pd=eV.define({combine(e){let t=tm(e,{render:null,specialChars:pc,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==pu&&"u">typeof document&&document.body){let t=document.body.style;pu=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)!=null}return pu||!1}())&&(t.specialChars=RegExp("	|"+t.specialChars.source,pl)),t.addSpecialChars&&(t.specialChars=RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,pl)),t}}),pf=null;class pp extends uO{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){var t;let r=(t=this.code)>=32?"":10==t?"":String.fromCharCode(9216+t),n=e.state.phrase("Control character")+" "+(ph[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,n,r);if(i)return i;let s=document.createElement("span");return s.textContent=r,s.title=n,s.setAttribute("aria-label",n),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class pm extends uO{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}let pg=uC.line({class:"cm-activeLine"}),py=da.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,r=[];for(let n of e.state.selection.ranges){let i=e.lineBlockAt(n.head);i.from>t&&(r.push(pg.range(i.from)),t=i.from)}return uC.set(r)}},{decorations:e=>e.decorations});class pb extends uO{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild("string"==typeof this.content?document.createTextNode(this.content):"function"==typeof this.content?this.content(e):this.content.cloneNode(!0)),"string"==typeof this.content?t.setAttribute("aria-label","placeholder "+this.content):t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?hB(e.firstChild):[];if(!t.length)return null;let r=window.getComputedStyle(e.parentNode),n=hU(t[0],"rtl"!=r.direction),i=parseInt(r.lineHeight);return n.bottom-n.top>1.5*i?{left:n.left,right:n.right,top:n.top,bottom:n.top+i}:n}ignoreEvent(){return!1}}function pv(e,t){var r;let n;let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1),s=e.state.doc.lineAt(i),o=i-s.from,a=o>2e3?-1:o==s.length?(r=t.clientX,(n=e.coordsAtPos(e.viewport.from))?Math.round(Math.abs((n.left-r)/e.defaultCharacterWidth)):-1):tj(s.text,e.state.tabSize,i-s.from);return{line:s.number,col:a,off:o}}let px={Alt:[18,e=>!!e.altKey],Control:[17,e=>!!e.ctrlKey],Shift:[16,e=>!!e.shiftKey],Meta:[91,e=>!!e.metaKey]},pw={style:"cursor: crosshair"},pk="-10000px";class pO{constructor(e,t,r,n){this.facet=t,this.createTooltipView=r,this.removeTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter(e=>e);let i=null;this.tooltipViews=this.tooltips.map(e=>i=r(e,i))}update(e,t){var r;let n=e.state.facet(this.facet),i=n.filter(e=>e);if(n===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let s=[],o=t?[]:null;for(let r=0;r<i.length;r++){let n=i[r],a=-1;if(n){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==n.create&&(a=e)}if(a<0)s[r]=this.createTooltipView(n,r?s[r-1]:null),o&&(o[r]=!!n.above);else{let n=s[r]=this.tooltipViews[a];o&&(o[r]=t[a]),n.update&&n.update(e)}}}for(let e of this.tooltipViews)0>s.indexOf(e)&&(this.removeTooltipView(e),null===(r=e.destroy)||void 0===r||r.call(e));return t&&(o.forEach((e,r)=>t[r]=e),t.length=o.length),this.input=n,this.tooltips=i,this.tooltipViews=s,!0}}function pS(e){let t=e.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:t.clientHeight,right:t.clientWidth}}let pC=eV.define({combine:e=>{var t,r,n;return{position:ud.ios?"absolute":(null===(t=e.find(e=>e.position))||void 0===t?void 0:t.position)||"fixed",parent:(null===(r=e.find(e=>e.parent))||void 0===r?void 0:r.parent)||null,tooltipSpace:(null===(n=e.find(e=>e.tooltipSpace))||void 0===n?void 0:n.tooltipSpace)||pS}}}),pT=new WeakMap,pA=da.fromClass(class{constructor(e){this.view=e,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(pC);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver="function"==typeof ResizeObserver?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new pO(e,p_,(e,t)=>this.createTooltip(e,t),e=>{this.resizeObserver&&this.resizeObserver.unobserve(e.dom),e.dom.remove()}),this.above=this.manager.tooltips.map(e=>!!e.above),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver(e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver)for(let e of(this.intersectionObserver.disconnect(),this.manager.tooltipViews))this.intersectionObserver.observe(e.dom)}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e,this.above);t&&this.observeIntersection();let r=t||e.geometryChanged,n=e.state.facet(pC);if(n.position!=this.position&&!this.madeAbsolute){for(let e of(this.position=n.position,this.manager.tooltipViews))e.dom.style.position=this.position;r=!0}if(n.parent!=this.parent){for(let e of(this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer(),this.manager.tooltipViews))this.container.appendChild(e.dom);r=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);r&&this.maybeMeasure()}createTooltip(e,t){let r=e.create(this.view),n=t?t.dom:null;if(r.dom.classList.add("cm-tooltip"),e.arrow&&!r.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",r.dom.appendChild(e)}return r.dom.style.position=this.position,r.dom.style.top=pk,r.dom.style.left="0px",this.container.insertBefore(r.dom,n),r.mount&&r.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(r.dom),r}destroy(){var e,t,r;for(let t of(this.view.win.removeEventListener("resize",this.measureSoon),this.manager.tooltipViews))t.dom.remove(),null===(e=t.destroy)||void 0===e||e.call(t);this.parent&&this.container.remove(),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),null===(r=this.intersectionObserver)||void 0===r||r.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=1,t=1,r=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){let{dom:e}=this.manager.tooltipViews[0];if(ud.gecko)r=e.offsetParent!=this.container.ownerDocument.body;else if(e.style.top==pk&&"0px"==e.style.left){let t=e.getBoundingClientRect();r=Math.abs(t.top+1e4)>1||Math.abs(t.left)>1}}if(r||"absolute"==this.position){if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(e=r.width/this.parent.offsetWidth,t=r.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState)}let n=this.view.scrollDOM.getBoundingClientRect(),i=dy(this.view);return{visible:{left:n.left+i.left,top:n.top+i.top,right:n.right-i.right,bottom:n.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((e,t)=>{let r=this.manager.tooltipViews[t];return r.getCoords?r.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(pC).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:r}}writeMeasure(e){var t;if(e.makeAbsolute)for(let e of(this.madeAbsolute=!0,this.position="absolute",this.manager.tooltipViews))e.dom.style.position="absolute";let{visible:r,space:n,scaleX:i,scaleY:s}=e,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:h}=c,u=e.pos[a],d=e.size[a];if(!u||!1!==l.clip&&(u.bottom<=Math.max(r.top,n.top)||u.top>=Math.min(r.bottom,n.bottom)||u.right<Math.max(r.left,n.left)-.1||u.left>Math.min(r.right,n.right)+.1)){h.style.top=pk;continue}let f=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,p=7*!!f,m=d.right-d.left,g=null!==(t=pT.get(c))&&void 0!==t?t:d.bottom-d.top,y=c.offset||pN,b=this.view.textDirection==uz.LTR,v=d.width>n.right-n.left?b?n.left:n.right-d.width:b?Math.max(n.left,Math.min(u.left-14*!!f+y.x,n.right-m)):Math.min(Math.max(n.left,u.left-m+14*!!f-y.x),n.right-m),x=this.above[a];!l.strictSide&&(x?u.top-g-p-y.y<n.top:u.bottom+g+p+y.y>n.bottom)&&x==n.bottom-u.bottom>u.top-n.top&&(x=this.above[a]=!x);let w=(x?u.top-n.top:n.bottom-u.bottom)-p;if(w<g&&!1!==c.resize){if(w<this.view.defaultLineHeight){h.style.top=pk;continue}pT.set(c,g),h.style.height=(g=w)/s+"px"}else h.style.height&&(h.style.height="");let k=x?u.top-g-p-y.y:u.bottom+p+y.y,O=v+m;if(!0!==c.overlap)for(let e of o)e.left<O&&e.right>v&&e.top<k+g&&e.bottom>k&&(k=x?e.top-g-2-p:e.bottom+p+2);if("absolute"==this.position?(h.style.top=(k-e.parent.top)/s+"px",pM(h,(v-e.parent.left)/i)):(h.style.top=k/s+"px",pM(h,v/i)),f){let e=u.left+(b?y.x:-y.x)-(v+14-7);f.style.left=e/i+"px"}!0!==c.overlap&&o.push({left:v,top:k,right:O,bottom:k+g}),h.classList.toggle("cm-tooltip-above",x),h.classList.toggle("cm-tooltip-below",!x),c.positioned&&c.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=pk}},{eventObservers:{scroll(){this.maybeMeasure()}}});function pM(e,t){let r=parseInt(e.style.left,10);(isNaN(r)||Math.abs(t-r)>1)&&(e.style.left=t+"px")}let pE=fq.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),pN={x:0,y:0},p_=eV.define({enables:[pA,pE]}),pj=eV.define({combine:e=>e.reduce((e,t)=>e.concat(t),[])});class pD{static create(e){return new pD(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new pO(e,pj,(e,t)=>this.createHostedView(e,t),e=>e.dom.remove())}createHostedView(e,t){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)null===(e=t.destroy)||void 0===e||e.call(t)}passProp(e){let t;for(let r of this.manager.tooltipViews){let n=r[e];if(void 0!==n){if(void 0===t)t=n;else if(t!==n)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}let pR=p_.compute([pj],e=>{let t=e.facet(pj);return 0===t.length?null:{pos:Math.min(...t.map(e=>e.pos)),end:Math.max(...t.map(e=>{var t;return null!==(t=e.end)&&void 0!==t?t:e.pos})),create:pD.create,above:t[0].above,arrow:t.some(e=>e.arrow)}});class pP{constructor(e,t,r,n,i){this.view=e,this.source=t,this.field=r,this.setHover=n,this.hoverTime=i,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,r=e.docView.nearest(t.target);if(!r)return;let n,i=1;if(r instanceof um)n=r.posAtStart;else{if(null==(n=e.posAtCoords(t)))return;let r=e.coordsAtPos(n);if(!r||t.y<r.top||t.y>r.bottom||t.x<r.left-e.defaultCharacterWidth||t.x>r.right+e.defaultCharacterWidth)return;let s=e.bidiSpans(e.state.doc.lineAt(n)).find(e=>e.from<=n&&e.to>=n),o=s&&s.dir==uz.RTL?-1:1;i=t.x<r.left?-o:o}let s=this.source(e,n,i);if(null!=s&&s.then){let t=this.pending={pos:n};s.then(r=>{this.pending==t&&(this.pending=null,r&&!(Array.isArray(r)&&!r.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(r)?r:[r])}))},t=>dr(e.state,t,"hover tooltip"))}else s&&!(Array.isArray(s)&&!s.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(s)?s:[s])})}get tooltip(){let e=this.view.plugin(pA),t=e?e.manager.tooltips.findIndex(e=>e.create==pD.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:n,tooltip:i}=this;if(n.length&&i&&!function(e,t){let{left:r,right:n,top:i,bottom:s}=e.getBoundingClientRect(),o;if(o=e.querySelector(".cm-tooltip-arrow")){let e=o.getBoundingClientRect();i=Math.min(e.top,i),s=Math.max(e.bottom,s)}return t.clientX>=r-4&&t.clientX<=n+4&&t.clientY>=i-4&&t.clientY<=s+4}(i.dom,e)||this.pending){let{pos:i}=n[0]||this.pending,s=null!==(r=null===(t=n[0])||void 0===t?void 0:t.end)&&void 0!==r?r:i;(i==s?this.view.posAtCoords(this.lastMove)==i:function(e,t,r,n,i,s){let o=e.scrollDOM.getBoundingClientRect(),a=e.documentTop+e.documentPadding.top+e.contentHeight;if(o.left>n||o.right<n||o.top>i||Math.min(o.bottom,a)<i)return!1;let l=e.posAtCoords({x:n,y:i},!1);return l>=t&&l<=r}(this.view,i,s,e.clientX,e.clientY))||(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:t}=this;t&&t.dom.contains(e.relatedTarget)?this.watchTooltipLeave(t.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=r=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function pI(e,t){let r=e.plugin(pA);if(!r)return null;let n=r.manager.tooltips.indexOf(t);return n<0?null:r.manager.tooltipViews[n]}let pz=to.define(),pL=eV.define({combine(e){let t,r;for(let n of e)t=t||n.topContainer,r=r||n.bottomContainer;return{topContainer:t,bottomContainer:r}}});function pq(e,t){let r=e.plugin(p$),n=r?r.specs.indexOf(t):-1;return n>-1?r.panels[n]:null}let p$=da.fromClass(class{constructor(e){this.input=e.state.facet(pQ),this.specs=this.input.filter(e=>e),this.panels=this.specs.map(t=>t(e));let t=e.state.facet(pL);for(let r of(this.top=new pB(e,!0,t.topContainer),this.bottom=new pB(e,!1,t.bottomContainer),this.top.sync(this.panels.filter(e=>e.top)),this.bottom.sync(this.panels.filter(e=>!e.top)),this.panels))r.dom.classList.add("cm-panel"),r.mount&&r.mount()}update(e){let t=e.state.facet(pL);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new pB(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new pB(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let r=e.state.facet(pQ);if(r!=this.input){let t=r.filter(e=>e),n=[],i=[],s=[],o=[];for(let r of t){let t=this.specs.indexOf(r),a;t<0?(a=r(e.view),o.push(a)):(a=this.panels[t]).update&&a.update(e),n.push(a),(a.top?i:s).push(a)}for(let e of(this.specs=t,this.panels=n,this.top.sync(i),this.bottom.sync(s),o))e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let t of this.panels)t.update&&t.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>fq.scrollMargins.of(t=>{let r=t.plugin(e);return r&&{top:r.top.scrollMargin(),bottom:r.bottom.scrollMargin()}})});class pB{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&0>e.indexOf(t)&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=pF(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=pF(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function pF(e){let t=e.nextSibling;return e.remove(),t}let pQ=eV.define({enables:p$});class pV extends tg{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}pV.prototype.elementClass="",pV.prototype.toDOM=void 0,pV.prototype.mapMode=e_.TrackBefore,pV.prototype.startSide=pV.prototype.endSide=-1,pV.prototype.point=!0;let pH=eV.define(),pW=eV.define(),pU={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>tx.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},pG=eV.define(),pX=eV.define({combine:e=>e.some(e=>e)}),pY=da.fromClass(class{constructor(e){for(let t of(this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=e.state.facet(pG).map(t=>new p0(e,t)),this.gutters))this.dom.appendChild(t.dom);this.fixed=!e.state.facet(pX),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let t=this.prevViewport,r=e.view.viewport,n=Math.min(t.to,r.to)-Math.max(t.from,r.from);this.syncGutters(n<(r.to-r.from)*.8)}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(pX)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&this.dom.remove();let r=tx.iter(this.view.state.facet(pH),this.view.viewport.from),n=[],i=this.gutters.map(e=>new pK(e,this.view.viewport,-this.view.documentPadding.top));for(let e of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(e.type)){let t=!0;for(let s of e.type)if(s.type==uS.Text&&t){for(let e of(pJ(r,n,s.from),i))e.line(this.view,s,n);t=!1}else if(s.widget)for(let e of i)e.widget(this.view,s)}else if(e.type==uS.Text)for(let t of(pJ(r,n,e.from),i))t.line(this.view,e,n);else if(e.widget)for(let t of i)t.widget(this.view,e);for(let e of i)e.finish();e&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(e){let t=e.startState.facet(pG),r=e.state.facet(pG),n=e.docChanged||e.heightChanged||e.viewportChanged||!tx.eq(e.startState.facet(pH),e.state.facet(pH),e.view.viewport.from,e.view.viewport.to);if(t==r)for(let t of this.gutters)t.update(e)&&(n=!0);else{n=!0;let i=[];for(let n of r){let r=t.indexOf(n);r<0?i.push(new p0(this.view,n)):(this.gutters[r].update(e),i.push(this.gutters[r]))}for(let e of this.gutters)e.dom.remove(),0>i.indexOf(e)&&e.destroy();for(let e of i)this.dom.appendChild(e.dom);this.gutters=i}return n}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>fq.scrollMargins.of(t=>{let r=t.plugin(e);return r&&0!=r.gutters.length&&r.fixed?t.textDirection==uz.LTR?{left:r.dom.offsetWidth*t.scaleX}:{right:r.dom.offsetWidth*t.scaleX}:null})});function pZ(e){return Array.isArray(e)?e:[e]}function pJ(e,t,r){for(;e.value&&e.from<=r;)e.from==r&&t.push(e.value),e.next()}class pK{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=tx.iter(e.markers,t.from)}addElement(e,t,r){let{gutter:n}=this,i=(t.top-this.height)/e.scaleY,s=t.height/e.scaleY;if(this.i==n.elements.length){let t=new p1(e,s,i,r);n.elements.push(t),n.dom.appendChild(t.dom)}else n.elements[this.i].update(e,s,i,r);this.height=t.bottom,this.i++}line(e,t,r){let n=[];pJ(this.cursor,n,t.from),r.length&&(n=n.concat(r));let i=this.gutter.config.lineMarker(e,t,n);i&&n.unshift(i);let s=this.gutter;(0!=n.length||s.config.renderEmptyElements)&&this.addElement(e,t,n)}widget(e,t){let r=this.gutter.config.widgetMarker(e,t.widget,t),n=r?[r]:null;for(let r of e.state.facet(pW)){let i=r(e,t.widget,t);i&&(n||(n=[])).push(i)}n&&this.addElement(e,t,n)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class p0{constructor(e,t){for(let r in this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:""),t.domEventHandlers)this.dom.addEventListener(r,n=>{let i=n.target,s;if(i!=this.dom&&this.dom.contains(i)){for(;i.parentNode!=this.dom;)i=i.parentNode;let e=i.getBoundingClientRect();s=(e.top+e.bottom)/2}else s=n.clientY;let o=e.lineBlockAtHeight(s-e.documentTop);t.domEventHandlers[r](e,o,n)&&n.preventDefault()});this.markers=pZ(t.markers(e)),t.initialSpacer&&(this.spacer=new p1(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=pZ(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let r=e.view.viewport;return!tx.eq(this.markers,t,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class p1{constructor(e,t,r,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,n)}update(e,t,r,n){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),function(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].compare(t[r]))return!1;return!0}(this.markers,n)||this.setMarkers(e,n)}setMarkers(e,t){let r="cm-gutterElement",n=this.dom.firstChild;for(let i=0,s=0;;){let o=s,a=i<t.length?t[i++]:null,l=!1;if(a){let e=a.elementClass;e&&(r+=" "+e);for(let e=s;e<this.markers.length;e++)if(this.markers[e].compare(a)){o=e,l=!0;break}}else o=this.markers.length;for(;s<o;){let e=this.markers[s++];if(e.toDOM){e.destroy(n);let t=n.nextSibling;n.remove(),n=t}}if(!a)break;a.toDOM&&(l?n=n.nextSibling:this.dom.insertBefore(a.toDOM(e),n)),l&&s++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}let p2=eV.define(),p4=eV.define(),p5=eV.define({combine:e=>tm(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let e in t){let n=r[e],i=t[e];r[e]=n?(e,t,r)=>n(e,t,r)||i(e,t,r):i}return r}})});class p3 extends pV{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function p6(e,t){return e.state.facet(p5).formatNumber(t,e.state)}let p7=pG.compute([p5],e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(p2),lineMarker:(e,t,r)=>r.some(e=>e.toDOM)?null:new p3(p6(e,e.state.doc.lineAt(t.from).number)),widgetMarker:(e,t,r)=>{for(let n of e.state.facet(p4)){let i=n(e,t,r);if(i)return i}return null},lineMarkerChange:e=>e.startState.facet(p5)!=e.state.facet(p5),initialSpacer:e=>new p3(p6(e,p8(e.state.doc.lines))),updateSpacer(e,t){let r=p6(t.view,p8(t.view.state.doc.lines));return r==e.number?e:new p3(r)},domEventHandlers:e.facet(p5).domEventHandlers}));function p8(e){let t=9;for(;t<e;)t=10*t+9;return t}let p9=new class extends pV{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},me=pH.compute(["selection"],e=>{let t=[],r=-1;for(let n of e.selection.ranges){let i=e.doc.lineAt(n.head).from;i>r&&(r=i,t.push(p9.range(i)))}return tx.of(t)}),mt=0;class mr{constructor(e,t){this.from=e,this.to=t}}class mn{constructor(e={}){this.id=mt++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=mo.match(e)),t=>{let r=e(t);return void 0===r?null:[this,r]}}}mn.closedBy=new mn({deserialize:e=>e.split(" ")}),mn.openedBy=new mn({deserialize:e=>e.split(" ")}),mn.group=new mn({deserialize:e=>e.split(" ")}),mn.isolate=new mn({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw RangeError("Invalid value for isolate: "+e);return e||"auto"}}),mn.contextHash=new mn({perNode:!0}),mn.lookAhead=new mn({perNode:!0}),mn.mounted=new mn({perNode:!0});class mi{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[mn.mounted.id]}}let ms=Object.create(null),mo=class e{constructor(e,t,r,n=0){this.name=e,this.props=t,this.id=r,this.flags=n}static define(t){let r=t.props&&t.props.length?Object.create(null):ms,n=+!!t.top|2*!!t.skipped|4*!!t.error|8*(null==t.name),i=new e(t.name||"",r,t.id,n);if(t.props){for(let e of t.props)if(Array.isArray(e)||(e=e(i)),e){if(e[0].perNode)throw RangeError("Can't store a per-node prop on a node type");r[e[0].id]=e[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(mn.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let n of r.split(" "))t[n]=e[r];return e=>{for(let r=e.prop(mn.group),n=-1;n<(r?r.length:0);n++){let i=t[n<0?e.name:r[n]];if(i)return i}}}};mo.none=new mo("",Object.create(null),0,8);class ma{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let n=null;for(let t of e){let e=t(r);e&&(n||(n=Object.assign({},r.props)),n[e[0].id]=e[1])}t.push(n?new mo(r.name,n,r.id,r.flags):r)}return new ma(t)}}let ml=new WeakMap,mc=new WeakMap;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(p||(p={}));class mh{constructor(e,t,r,n,i){if(this.type=e,this.children=t,this.positions=r,this.length=n,this.props=null,i&&i.length)for(let[e,t]of(this.props=Object.create(null),i))this.props["number"==typeof e?e:e.id]=t}toString(){let e=mi.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){let r=e.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new mO(this.topNode,e)}cursorAt(e,t=0,r=0){let n=new mO(ml.get(this)||this.topNode);return n.moveTo(e,t),ml.set(this,n._tree),n}get topNode(){return new mg(this,0,0,null)}resolve(e,t=0){let r=mp(ml.get(this)||this.topNode,e,t,!1);return ml.set(this,r),r}resolveInner(e,t=0){let r=mp(mc.get(this)||this.topNode,e,t,!0);return mc.set(this,r),r}resolveStack(e,t=0){return function(e,t,r){let n=e.resolveInner(t,r),i=null;for(let e=n instanceof mg?n:n.context.parent;e;e=e.parent)if(e.index<0){let s=e.parent;(i||(i=[n])).push(s.resolve(t,r)),e=s}else{let s=mi.get(e.tree);if(s&&s.overlay&&s.overlay[0].from<=t&&s.overlay[s.overlay.length-1].to>=t){let o=new mg(s.tree,s.overlay[0].from+e.from,-1,e);(i||(i=[n])).push(mp(o,t,r,!1))}}return i?mw(i):n}(this,e,t)}iterate(e){let{enter:t,leave:r,from:n=0,to:i=this.length}=e,s=e.mode||0,o=(s&p.IncludeAnonymous)>0;for(let e=this.cursor(s|p.IncludeAnonymous);;){let s=!1;if(e.from<=i&&e.to>=n&&(!o&&e.type.isAnonymous||!1!==t(e))){if(e.firstChild())continue;s=!0}for(;s&&r&&(o||!e.type.isAnonymous)&&r(e),!e.nextSibling();){if(!e.parent())return;s=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:mA(mo.none,this.children,this.positions,0,this.children.length,0,this.length,(e,t,r)=>new mh(this.type,e,t,r,this.propValues),e.makeTree||((e,t,r)=>new mh(mo.none,e,t,r)))}static build(e){return function(e){var t;let{buffer:r,nodeSet:n,maxBufferLength:i=1024,reused:s=[],minRepeatType:o=n.types.length}=e,a=Array.isArray(r)?new mu(r,r.length):r,l=n.types,c=0,h=0;function u(e,t,r,i,s,o,a,l,c){let h=[],u=[];for(;e.length>i;)h.push(e.pop()),u.push(t.pop()+r-s);e.push(d(n.types[a],h,u,o-s,l-o,c)),t.push(s-r)}function d(e,t,r,n,i,s,o){if(s){let e=[mn.contextHash,s];o=o?[e].concat(o):[e]}if(i>25){let e=[mn.lookAhead,i];o=o?[e].concat(o):[e]}return new mh(e,t,r,n,o)}let f=[],p=[];for(;a.pos>0;)!function e(t,r,f,p,m,g){let{id:y,start:b,end:v,size:x}=a,w=h,k=c;for(;x<0;)if(a.next(),-1==x){let e=s[y];f.push(e),p.push(b-t);return}else if(-3==x){c=y;return}else if(-4==x){h=y;return}else throw RangeError(`Unrecognized record size: ${x}`);let O=l[y],S,C,T=b-t;if(v-b<=i&&(C=function(e,t){let r=a.fork(),n=0,s=0,l=0,c=r.end-i,h={size:0,start:0,skip:0};e:for(let i=r.pos-e;r.pos>i;){let e=r.size;if(r.id==t&&e>=0){h.size=n,h.start=s,h.skip=l,l+=4,n+=4,r.next();continue}let a=r.pos-e;if(e<0||a<i||r.start<c)break;let u=4*(r.id>=o),d=r.start;for(r.next();r.pos>a;){if(r.size<0){if(-3==r.size)u+=4;else break e}else r.id>=o&&(u+=4);r.next()}s=d,n+=e,l+=u}return(t<0||n==e)&&(h.size=n,h.start=s,h.skip=l),h.size>4?h:void 0}(a.pos-r,m))){let e=new Uint16Array(C.size-C.skip),r=a.pos-C.size,i=e.length;for(;a.pos>r;)i=function e(t,r,n){let{id:i,start:s,end:l,size:u}=a;if(a.next(),u>=0&&i<o){let o=n;if(u>4){let i=a.pos-(u-4);for(;a.pos>i;)n=e(t,r,n)}r[--n]=o,r[--n]=l-t,r[--n]=s-t,r[--n]=i}else -3==u?c=i:-4==u&&(h=i);return n}(C.start,e,i);S=new md(e,v-C.start,n),T=C.start-t}else{let t=a.pos-x;a.next();let r=[],s=[],l=y>=o?y:-1,c=0,h=v;for(;a.pos>t;)l>=0&&a.id==l&&a.size>=0?(a.end<=h-i&&(u(r,s,b,c,a.end,h,l,w,k),c=r.length,h=a.end),a.next()):g>2500?function(e,t,r,s){let o=[],l=0,c=-1;for(;a.pos>t;){let{id:e,start:t,end:r,size:n}=a;if(n>4)a.next();else{if(c>-1&&t<c)break;c<0&&(c=r-i),o.push(e,t,r),l++,a.next()}}if(l){let t=new Uint16Array(4*l),i=o[o.length-2];for(let e=o.length-3,r=0;e>=0;e-=3)t[r++]=o[e],t[r++]=o[e+1]-i,t[r++]=o[e+2]-i,t[r++]=r;r.push(new md(t,o[2]-i,n)),s.push(i-e)}}(b,t,r,s):e(b,t,r,s,l,g+1);if(l>=0&&c>0&&c<r.length&&u(r,s,b,c,b,h,l,w,k),r.reverse(),s.reverse(),l>-1&&c>0){let e=function(e,t){return(r,n,i)=>{let s=0,o=r.length-1,a,l;if(o>=0&&(a=r[o])instanceof mh){if(!o&&a.type==e&&a.length==i)return a;(l=a.prop(mn.lookAhead))&&(s=n[o]+a.length+l)}return d(e,r,n,i,s,t)}}(O,k);S=mA(O,r,s,0,r.length,0,v-b,e,e)}else S=d(O,r,s,v-b,w-v,k)}f.push(S),p.push(T)}(e.start||0,e.bufferStart||0,f,p,-1,0);let m=null!==(t=e.length)&&void 0!==t?t:f.length?p[0]+f[0].length:0;return new mh(l[e.topID],f.reverse(),p.reverse(),m)}(e)}}mh.empty=new mh(mo.none,[],[],0);class mu{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new mu(this.buffer,this.index)}}class md{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return mo.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],n=this.set.types[t],i=n.name;if(/\W/.test(i)&&!n.isError&&(i=JSON.stringify(i)),r==(e+=4))return i;let s=[];for(;e<r;)s.push(this.childString(e)),e=this.buffer[e+3];return i+"("+s.join(",")+")"}findChild(e,t,r,n,i){let{buffer:s}=this,o=-1;for(let a=e;a!=t&&!(mf(i,n,s[a+1],s[a+2])&&(o=a,r>0));a=s[a+3]);return o}slice(e,t,r){let n=this.buffer,i=new Uint16Array(t-e),s=0;for(let o=e,a=0;o<t;){i[a++]=n[o++],i[a++]=n[o++]-r;let t=i[a++]=n[o++]-r;i[a++]=n[o++]-e,s=Math.max(s,t)}return new md(i,s,this.set)}}function mf(e,t,r,n){switch(e){case -2:return r<t;case -1:return n>=t&&r<t;case 0:return r<t&&n>t;case 1:return r<=t&&n>t;case 2:return n>t;case 4:return!0}}function mp(e,t,r,n){for(var i;e.from==e.to||(r<1?e.from>=t:e.from>t)||(r>-1?e.to<=t:e.to<t);){let t=!n&&e instanceof mg&&e.index<0?null:e.parent;if(!t)return e;e=t}let s=n?0:p.IgnoreOverlays;if(n)for(let n=e,o=n.parent;o;o=(n=o).parent)n instanceof mg&&n.index<0&&(null===(i=o.enter(t,r,s))||void 0===i?void 0:i.from)!=n.from&&(e=o);for(;;){let n=e.enter(t,r,s);if(!n)return e;e=n}}class mm{cursor(e=0){return new mO(this,e)}getChild(e,t=null,r=null){let n=my(this,e,t,r);return n.length?n[0]:null}getChildren(e,t=null,r=null){return my(this,e,t,r)}resolve(e,t=0){return mp(this,e,t,!1)}resolveInner(e,t=0){return mp(this,e,t,!0)}matchContext(e){return mb(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(r=t,t=e.prevSibling):t=e}return r}get node(){return this}get next(){return this.parent}}class mg extends mm{constructor(e,t,r,n){super(),this._tree=e,this.from=t,this.index=r,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,n,i=0){for(let s=this;;){for(let{children:o,positions:a}=s._tree,l=t>0?o.length:-1;e!=l;e+=t){let l=o[e],c=a[e]+s.from;if(mf(n,r,c,c+l.length)){if(l instanceof md){if(i&p.ExcludeBuffers)continue;let o=l.findChild(0,l.buffer.length,t,r-c,n);if(o>-1)return new mx(new mv(s,l,e,c),null,o)}else if(i&p.IncludeAnonymous||!l.type.isAnonymous||mS(l)){let o;if(!(i&p.IgnoreMounts)&&(o=mi.get(l))&&!o.overlay)return new mg(o.tree,c,e,s);let a=new mg(l,c,e,s);return i&p.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,r,n)}}}if(i&p.IncludeAnonymous||!s.type.isAnonymous||(e=s.index>=0?s.index+t:t<0?-1:s._parent._tree.children.length,!(s=s._parent)))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let n;if(!(r&p.IgnoreOverlays)&&(n=mi.get(this._tree))&&n.overlay){let r=e-this.from;for(let{from:e,to:i}of n.overlay)if((t>0?e<=r:e<r)&&(t<0?i>=r:i>r))return new mg(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function my(e,t,r,n){let i=e.cursor(),s=[];if(!i.firstChild())return s;if(null!=r){for(let e=!1;!e;)if(e=i.type.is(r),!i.nextSibling())return s}for(;;){if(null!=n&&i.type.is(n))return s;if(i.type.is(t)&&s.push(i.node),!i.nextSibling())return null==n?s:[]}}function mb(e,t,r=t.length-1){for(let n=e;r>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(t[r]&&t[r]!=n.name)return!1;r--}}return!0}class mv{constructor(e,t,r,n){this.parent=e,this.buffer=t,this.index=r,this.start=n}}class mx extends mm{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:n}=this.context,i=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,r);return i<0?null:new mx(this.context,this,i)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&p.ExcludeBuffers)return null;let{buffer:n}=this.context,i=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return i<0?null:new mx(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new mx(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new mx(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,n=this.index+4,i=r.buffer[this.index+3];if(i>n){let s=r.buffer[this.index+1];e.push(r.slice(n,i,s)),t.push(0)}return new mh(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function mw(e){if(!e.length)return null;let t=0,r=e[0];for(let n=1;n<e.length;n++){let i=e[n];(i.from>r.from||i.to<r.to)&&(r=i,t=n)}let n=r instanceof mg&&r.index<0?null:r.parent,i=e.slice();return n?i[t]=n:i.splice(t,1),new mk(i,r)}class mk{constructor(e,t){this.heads=e,this.node=t}get next(){return mw(this.heads)}}class mO{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof mg)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:r,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=r+n.buffer[e+1],this.to=r+n.buffer[e+2],!0}yield(e){return!!e&&(e instanceof mg?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:n}=this.buffer,i=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,r);return!(i<0)&&(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?!(r&p.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&p.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&p.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let e=r<0?0:this.stack[r]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(e)}return r<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(n.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:r}=n)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let n=t+e,i=e<0?-1:r._tree.children.length;n!=i;n+=e){let e=r._tree.children[n];if(this.mode&p.IncludeAnonymous||e instanceof md||!e.type.isAnonymous||mS(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let n=this.index,i=this.stack.length;i>=0;){for(let s=e;s;s=s._parent)if(s.index==n){if(n==this.index)return s;t=s,r=i+1;break e}n=this.stack[--i]}for(let e=r;e<this.stack.length;e++)t=new mx(this.buffer,t,this.stack[e]);return this.bufferNode=new mx(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let n=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){r++;continue}this.type.isAnonymous||(n=!0)}for(;;){if(n&&t&&t(this),n=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,n=!0}}}matchContext(e){if(!this.buffer)return mb(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let n=e.length-1,i=this.stack.length-1;n>=0;i--){if(i<0)return mb(this._tree,e,n);let s=r[t.buffer[this.stack[i]]];if(!s.isAnonymous){if(e[n]&&e[n]!=s.name)return!1;n--}}return!0}}function mS(e){return e.children.some(e=>e instanceof md||!e.type.isAnonymous||mS(e))}let mC=new WeakMap;function mT(e,t){if(!e.isAnonymous||t instanceof md||t.type!=e)return 1;let r=mC.get(t);if(null==r){for(let n of(r=1,t.children)){if(n.type!=e||!(n instanceof mh)){r=1;break}r+=mT(e,n)}mC.set(t,r)}return r}function mA(e,t,r,n,i,s,o,a,l){let c=0;for(let r=n;r<i;r++)c+=mT(e,t[r]);let h=Math.ceil(1.5*c/8),u=[],d=[];return function t(r,n,i,o,a){for(let c=i;c<o;){let i=c,f=n[c],p=mT(e,r[c]);for(c++;c<o;c++){let t=mT(e,r[c]);if(p+t>=h)break;p+=t}if(c==i+1){if(p>h){let e=r[i];t(e.children,e.positions,0,e.children.length,n[i]+a);continue}u.push(r[i])}else{let t=n[c-1]+r[c-1].length-f;u.push(mA(e,r,n,i,c,f,t,null,l))}d.push(f+a-s)}}(t,r,n,i,0),(a||l)(u,d,o)}class mM{constructor(){this.map=new WeakMap}setBuffer(e,t,r){let n=this.map.get(e);n||this.map.set(e,n=new Map),n.set(t,r)}getBuffer(e,t){let r=this.map.get(e);return r&&r.get(t)}set(e,t){e instanceof mx?this.setBuffer(e.context.buffer,e.index,t):e instanceof mg&&this.map.set(e.tree,t)}get(e){return e instanceof mx?this.getBuffer(e.context.buffer,e.index):e instanceof mg?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class mE{constructor(e,t,r,n,i=!1,s=!1){this.from=e,this.to=t,this.tree=r,this.offset=n,this.open=+!!i|2*!!s}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],r=!1){let n=[new mE(0,e.length,e,0,!1,r)];for(let r of t)r.to>e.length&&n.push(r);return n}static applyChanges(e,t,r=128){if(!t.length)return e;let n=[],i=1,s=e.length?e[0]:null;for(let o=0,a=0,l=0;;o++){let c=o<t.length?t[o]:null,h=c?c.fromA:1e9;if(h-a>=r)for(;s&&s.from<h;){let t=s;if(a>=t.from||h<=t.to||l){let e=Math.max(t.from,a)-l,r=Math.min(t.to,h)-l;t=e>=r?null:new mE(e,r,t.tree,t.offset+l,o>0,!!c)}if(t&&n.push(t),s.to>h)break;s=i<e.length?e[i++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return n}}let mN=class{startParse(e,t,r){return"string"==typeof e&&(e=new m_(e)),r=r?r.length?r.map(e=>new mr(e.from,e.to)):[new mr(0,0)]:[new mr(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let n=this.startParse(e,t,r);for(;;){let e=n.advance();if(e)return e}}};class m_{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new mn({perNode:!0});let mj=0;class mD{constructor(e,t,r,n){this.name=e,this.set=t,this.base=r,this.modified=n,this.id=mj++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){if(e instanceof mD&&(t=e),null!=t&&t.base)throw Error("Can not derive from a modified tag");let r=new mD("string"==typeof e?e:"?",[],null,[]);if(r.set.push(r),t)for(let e of t.set)r.set.push(e);return r}static defineModifier(e){let t=new mP(e);return e=>e.modified.indexOf(t)>-1?e:mP.get(e.base||e,e.modified.concat(t).sort((e,t)=>e.id-t.id))}}let mR=0;class mP{constructor(e){this.name=e,this.instances=[],this.id=mR++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(r=>{var n,i;return r.base==e&&(n=t,i=r.modified,n.length==i.length&&n.every((e,t)=>e==i[t]))});if(r)return r;let n=[],i=new mD(e.name,n,e,t);for(let e of t)e.instances.push(i);let s=function(e){let t=[[]];for(let r=0;r<e.length;r++)for(let n=0,i=t.length;n<i;n++)t.push(t[n].concat(e[r]));return t.sort((e,t)=>t.length-e.length)}(t);for(let t of e.set)if(!t.modified.length)for(let e of s)n.push(mP.get(t,e));return i}}function mI(e){let t=Object.create(null);for(let r in e){let n=e[r];for(let e of(Array.isArray(n)||(n=[n]),r.split(" ")))if(e){let r=[],i=2,s=e;for(let t=0;;){if("..."==s&&t>0&&t+3==e.length){i=1;break}let n=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!n)throw RangeError("Invalid path: "+e);if(r.push("*"==n[0]?"":'"'==n[0][0]?JSON.parse(n[0]):n[0]),(t+=n[0].length)==e.length)break;let o=e[t++];if(t==e.length&&"!"==o){i=0;break}if("/"!=o)throw RangeError("Invalid path: "+e);s=e.slice(t)}let o=r.length-1,a=r[o];if(!a)throw RangeError("Invalid path: "+e);let l=new mL(n,i,o>0?r.slice(0,o):null);t[a]=l.sort(t[a])}}return mz.add(t)}let mz=new mn,mL=class{constructor(e,t,r,n){this.tags=e,this.mode=t,this.context=r,this.next=n}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};function mq(e,t){let r=Object.create(null);for(let t of e)if(Array.isArray(t.tag))for(let e of t.tag)r[e.id]=t.class;else r[t.tag.id]=t.class;let{scope:n,all:i=null}=t||{};return{style:e=>{let t=i;for(let n of e)for(let e of n.set){let n=r[e.id];if(n){t=t?t+" "+n:n;break}}return t},scope:n}}mL.empty=new mL([],2,null);class m${constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,n,i){let{type:s,from:o,to:a}=e;if(o>=r||a<=t)return;s.isTop&&(i=this.highlighters.filter(e=>!e.scope||e.scope(s)));let l=n,c=function(e){let t=e.type.prop(mz);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}(e)||mL.empty,h=function(e,t){let r=null;for(let n of e){let e=n.style(t);e&&(r=r?r+" "+e:e)}return r}(i,c.tags);if(h&&(l&&(l+=" "),l+=h,1==c.mode&&(n+=(n?" ":"")+h)),this.startSpan(Math.max(t,o),l),c.opaque)return;let u=e.tree&&e.tree.prop(mn.mounted);if(u&&u.overlay){let s=e.node.enter(u.overlay[0].from+o,1),c=this.highlighters.filter(e=>!e.scope||e.scope(u.tree.type)),h=e.firstChild();for(let d=0,f=o;;d++){let p=d<u.overlay.length?u.overlay[d]:null,m=p?p.from+o:a,g=Math.max(t,f),y=Math.min(r,m);if(g<y&&h)for(;e.from<y&&(this.highlightRange(e,g,y,n,i),this.startSpan(Math.min(y,e.to),l),!(e.to>=m||!e.nextSibling())););if(!p||m>r)break;(f=p.to+o)>t&&(this.highlightRange(s.cursor(),Math.max(t,p.from+o),Math.min(r,f),"",c),this.startSpan(Math.min(r,f),l))}h&&e.parent()}else if(e.firstChild()){u&&(n="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,n,i),this.startSpan(Math.min(r,e.to),l)}while(e.nextSibling());e.parent()}}}let mB=mD.define,mF=mB(),mQ=mB(),mV=mB(mQ),mH=mB(mQ),mW=mB(),mU=mB(mW),mG=mB(mW),mX=mB(),mY=mB(mX),mZ=mB(),mJ=mB(),mK=mB(),m0=mB(mK),m1=mB(),m2={comment:mF,lineComment:mB(mF),blockComment:mB(mF),docComment:mB(mF),name:mQ,variableName:mB(mQ),typeName:mV,tagName:mB(mV),propertyName:mH,attributeName:mB(mH),className:mB(mQ),labelName:mB(mQ),namespace:mB(mQ),macroName:mB(mQ),literal:mW,string:mU,docString:mB(mU),character:mB(mU),attributeValue:mB(mU),number:mG,integer:mB(mG),float:mB(mG),bool:mB(mW),regexp:mB(mW),escape:mB(mW),color:mB(mW),url:mB(mW),keyword:mZ,self:mB(mZ),null:mB(mZ),atom:mB(mZ),unit:mB(mZ),modifier:mB(mZ),operatorKeyword:mB(mZ),controlKeyword:mB(mZ),definitionKeyword:mB(mZ),moduleKeyword:mB(mZ),operator:mJ,derefOperator:mB(mJ),arithmeticOperator:mB(mJ),logicOperator:mB(mJ),bitwiseOperator:mB(mJ),compareOperator:mB(mJ),updateOperator:mB(mJ),definitionOperator:mB(mJ),typeOperator:mB(mJ),controlOperator:mB(mJ),punctuation:mK,separator:mB(mK),bracket:m0,angleBracket:mB(m0),squareBracket:mB(m0),paren:mB(m0),brace:mB(m0),content:mX,heading:mY,heading1:mB(mY),heading2:mB(mY),heading3:mB(mY),heading4:mB(mY),heading5:mB(mY),heading6:mB(mY),contentSeparator:mB(mX),list:mB(mX),quote:mB(mX),emphasis:mB(mX),strong:mB(mX),link:mB(mX),monospace:mB(mX),strikethrough:mB(mX),inserted:mB(),deleted:mB(),changed:mB(),invalid:mB(),meta:m1,documentMeta:mB(m1),annotation:mB(m1),processingInstruction:mB(m1),definition:mD.defineModifier("definition"),constant:mD.defineModifier("constant"),function:mD.defineModifier("function"),standard:mD.defineModifier("standard"),local:mD.defineModifier("local"),special:mD.defineModifier("special")};for(let e in m2){let t=m2[e];t instanceof mD&&(t.name=e)}mq([{tag:m2.link,class:"tok-link"},{tag:m2.heading,class:"tok-heading"},{tag:m2.emphasis,class:"tok-emphasis"},{tag:m2.strong,class:"tok-strong"},{tag:m2.keyword,class:"tok-keyword"},{tag:m2.atom,class:"tok-atom"},{tag:m2.bool,class:"tok-bool"},{tag:m2.url,class:"tok-url"},{tag:m2.labelName,class:"tok-labelName"},{tag:m2.inserted,class:"tok-inserted"},{tag:m2.deleted,class:"tok-deleted"},{tag:m2.literal,class:"tok-literal"},{tag:m2.string,class:"tok-string"},{tag:m2.number,class:"tok-number"},{tag:[m2.regexp,m2.escape,m2.special(m2.string)],class:"tok-string2"},{tag:m2.variableName,class:"tok-variableName"},{tag:m2.local(m2.variableName),class:"tok-variableName tok-local"},{tag:m2.definition(m2.variableName),class:"tok-variableName tok-definition"},{tag:m2.special(m2.variableName),class:"tok-variableName2"},{tag:m2.definition(m2.propertyName),class:"tok-propertyName tok-definition"},{tag:m2.typeName,class:"tok-typeName"},{tag:m2.namespace,class:"tok-namespace"},{tag:m2.className,class:"tok-className"},{tag:m2.macroName,class:"tok-macroName"},{tag:m2.propertyName,class:"tok-propertyName"},{tag:m2.operator,class:"tok-operator"},{tag:m2.comment,class:"tok-comment"},{tag:m2.meta,class:"tok-meta"},{tag:m2.invalid,class:"tok-invalid"},{tag:m2.punctuation,class:"tok-punctuation"}]);let m4=new mn,m5=new mn;class m3{constructor(e,t,r=[],n=""){this.data=e,this.name=n,tp.prototype.hasOwnProperty("tree")||Object.defineProperty(tp.prototype,"tree",{get(){return m8(this)}}),this.parser=t,this.extension=[ga.of(this),tp.languageData.of((e,t,r)=>{let n=m6(e,t,r),i=n.type.prop(m4);if(!i)return[];let s=e.facet(i),o=n.type.prop(m5);if(o){let i=n.resolve(t-n.from,r);for(let t of o)if(t.test(i,e)){let r=e.facet(t.facet);return"replace"==t.type?r:r.concat(s)}}return s})].concat(r)}isActiveAt(e,t,r=-1){return m6(e,t,r).type.prop(m4)==this.data}findRegions(e){let t=e.facet(ga);if((null==t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],n=(e,t)=>{if(e.prop(m4)==this.data){r.push({from:t,to:t+e.length});return}let i=e.prop(mn.mounted);if(i){if(i.tree.prop(m4)==this.data){if(i.overlay)for(let e of i.overlay)r.push({from:e.from+t,to:e.to+t});else r.push({from:t,to:t+e.length});return}if(i.overlay){let e=r.length;if(n(i.tree,i.overlay[0].from+t),r.length>e)return}}for(let r=0;r<e.children.length;r++){let i=e.children[r];i instanceof mh&&n(i,e.positions[r]+t)}};return n(m8(e),0),r}get allowsNesting(){return!0}}function m6(e,t,r){let n=e.facet(ga),i=m8(e).topNode;if(!n||n.allowsNesting)for(let e=i;e;e=e.enter(t,r,p.ExcludeBuffers))e.type.isTop&&(i=e);return i}m3.setState=to.define();class m7 extends m3{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){var t;let r=(t=e.languageData,eV.define({combine:t?e=>e.concat(t):void 0}));return new m7(r,e.parser.configure({props:[m4.add(e=>e.isTop?r:void 0)]}),e.name)}configure(e,t){return new m7(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function m8(e){let t=e.field(m3.state,!1);return t?t.tree:mh.empty}class m9{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let ge=null,gt=class e{constructor(e,t,r=[],n,i,s,o,a){this.parser=e,this.state=t,this.fragments=r,this.tree=n,this.treeLen=i,this.viewport=s,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(t,r,n){return new e(t,r,[],mh.empty,0,n,[],null)}startParse(){return this.parser.startParse(new m9(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=mh.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let n=this.parse.advance();if(n){if(this.fragments=this.withoutTempSkipped(mE.addTree(n,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(r=this.parse.stoppedAt)&&void 0!==r?r:this.state.doc.length,this.tree=n,this.parse=null,!(this.treeLen<(t??this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(mE.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=ge;ge=this;try{return e()}finally{ge=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=gr(e,t.from,t.to);return e}changes(t,r){let{fragments:n,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!t.empty){let e=[];if(t.iterChangedRanges((t,r,n,i)=>e.push({fromA:t,toA:r,fromB:n,toB:i})),n=mE.applyChanges(n,e),i=mh.empty,s=0,o={from:t.mapPos(o.from,-1),to:t.mapPos(o.to,1)},this.skipped.length)for(let e of(a=[],this.skipped)){let r=t.mapPos(e.from,1),n=t.mapPos(e.to,-1);r<n&&a.push({from:r,to:n})}}return new e(this.parser,r,n,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let t=0;t<this.skipped.length;t++){let{from:r,to:n}=this.skipped[t];r<e.to&&n>e.from&&(this.fragments=gr(this.fragments,r,n),this.skipped.splice(t--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends mN{createParse(t,r,n){let i=n[0].from,s=n[n.length-1].to;return{parsedPos:i,advance(){let t=ge;if(t){for(let e of n)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=s,new mh(mo.none,[],[],s-i)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return ge}};function gr(e,t,r){return mE.applyChanges(e,[{fromA:t,toA:r,fromB:t,toB:r}])}class gn{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new gn(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=gt.create(e.facet(ga).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new gn(r)}}m3.state=eY.define({create:gn.init,update(e,t){for(let e of t.effects)if(e.is(m3.setState))return e.value;return t.startState.facet(ga)!=t.state.facet(ga)?gn.init(t.state):e.apply(t)}});let gi=e=>{let t=setTimeout(()=>e(),500);return()=>clearTimeout(t)};"u">typeof requestIdleCallback&&(gi=e=>{let t=-1,r=setTimeout(()=>{t=requestIdleCallback(e,{timeout:400})},100);return()=>t<0?clearTimeout(r):cancelIdleCallback(t)});let gs="u">typeof navigator&&null!==(m=navigator.scheduling)&&void 0!==m&&m.isInputPending?()=>navigator.scheduling.isInputPending():null,go=da.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(m3.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(m3.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=gi(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:n}}=this.view,i=r.field(m3.state);if(i.tree==i.context.tree&&i.context.isDone(n+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!gs?Math.max(25,e.timeRemaining()-5):1e9),o=i.context.treeLen<n&&r.doc.length>n+1e3,a=i.context.work(()=>gs&&gs()||Date.now()>s,n+1e5*!o);this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:m3.setState.of(new gn(i.context))})),this.chunkBudget>0&&!(a&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(e=>dr(this.view.state,e)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),ga=eV.define({combine:e=>e.length?e[0]:null,enables:e=>[m3.state,go,fq.contentAttributes.compute([e],t=>{let r=t.facet(e);return r&&r.name?{"data-language":r.name}:{}})]});class gl{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}let gc=eV.define(),gh=eV.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some(e=>e!=t[0]))throw Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function gu(e){let t=e.facet(gh);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function gd(e,t){let r="",n=e.tabSize,i=e.facet(gh)[0];if("	"==i){for(;t>=n;)r+="	",t-=n;i=" "}for(let e=0;e<t;e++)r+=i;return r}function gf(e,t){for(let r of(e instanceof tp&&(e=new gp(e)),e.state.facet(gc))){let n=r(e,t);if(void 0!==n)return n}let r=m8(e.state);return r.length>=t?function(e,t,r){let n=t.resolveStack(r),i=t.resolveInner(r,-1).resolve(r,0).enterUnfinishedNodesBefore(r);if(i!=n.node){let e=[];for(let t=i;t&&(t.from!=n.node.from||t.type!=n.node.type);t=t.parent)e.push(t);for(let t=e.length-1;t>=0;t--)n={node:e[t],next:n}}return gg(n,e,r)}(e,r,t):null}class gp{constructor(e,t={}){this.state=e,this.options=t,this.unit=gu(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:i}=this.options;return null!=n&&n>=r.from&&n<=r.to?i&&n==e?{text:"",from:e}:(t<0?n<e:n<=e)?{text:r.text.slice(n-r.from),from:n}:{text:r.text.slice(0,n-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:n}=this.lineAt(e,t);return r.slice(e-n,Math.min(r.length,e+100-n))}column(e,t=1){let{text:r,from:n}=this.lineAt(e,t),i=this.countColumn(r,e-n),s=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return s>-1&&(i+=s-this.countColumn(r,r.search(/\S|$/))),i}countColumn(e,t=e.length){return tj(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:n}=this.lineAt(e,t),i=this.options.overrideIndentation;if(i){let e=i(n);if(e>-1)return e}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}let gm=new mn;function gg(e,t,r){for(let n=e;n;n=n.next){let e=function(e){let t=e.type.prop(gm);if(t)return t;let r=e.firstChild,n;if(r&&(n=r.type.prop(mn.closedBy))){let t=e.lastChild,r=t&&n.indexOf(t.name)>-1;return e=>gx(e,!0,1,void 0,r&&!(e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak)?t.from:void 0)}return null==e.parent?gy:null}(n.node);if(e)return e(gb.create(t,r,n))}return 0}function gy(){return 0}class gb extends gp{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new gb(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(function(e,t){for(let r=t;r;r=r.parent)if(e==r)return!0;return!1}(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return gg(this.context.next,this.base,this.pos)}}function gv({closing:e,align:t=!0,units:r=1}){return n=>gx(n,t,r,e)}function gx(e,t,r,n,i){let s=e.textAfter,o=s.match(/^\s*/)[0].length,a=n&&s.slice(o,o+n.length)==n||i==e.pos+o,l=t?function(e){let t=e.node,r=t.childAfter(t.from),n=t.lastChild;if(!r)return null;let i=e.options.simulateBreak,s=e.state.doc.lineAt(r.from),o=null==i||i<=s.from?s.to:Math.min(s.to,i);for(let e=r.to;;){let i=t.childAfter(e);if(!i||i==n)return null;if(!i.type.isSkipped){if(i.from>=o)return null;let e=/^ */.exec(s.text.slice(r.to-s.from))[0].length;return{from:r.from,to:r.to+e}}e=i.to}}(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*r)}let gw=eV.define(),gk=new mn;function gO(e,t,r){for(let n of e.facet(gw)){let i=n(e,t,r);if(i)return i}return function(e,t,r){let n=m8(e);if(n.length<r)return null;let i=n.resolveStack(r,1),s=null;for(let o=i;o;o=o.next){let i=o.node;if(i.to<=r||i.from>r)continue;if(s&&i.from<t)break;let a=i.type.prop(gk);if(a&&(i.to<n.length-50||n.length==e.doc.length||!function(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}(i))){let n=a(i,e);n&&n.from<=r&&n.from>=t&&n.to>r&&(s=n)}}return s}(e,t,r)}function gS(e,t){let r=t.mapPos(e.from,1),n=t.mapPos(e.to,-1);return r>=n?void 0:{from:r,to:n}}let gC=to.define({map:gS}),gT=to.define({map:gS});function gA(e){let t=[];for(let{head:r}of e.state.selection.ranges)t.some(e=>e.from<=r&&e.to>=r)||t.push(e.lineBlockAt(r));return t}let gM=eY.define({create:()=>uC.none,update(e,t){for(let r of(e=e.map(t.changes),t.effects))if(r.is(gC)&&!function(e,t,r){let n=!1;return e.between(t,t,(e,i)=>{e==t&&i==r&&(n=!0)}),n}(e,r.value.from,r.value.to)){let{preparePlaceholder:n}=t.state.facet(gR),i=n?uC.replace({widget:new gz(n(t.state,r.value))}):gI;e=e.update({add:[i.range(r.value.from,r.value.to)]})}else r.is(gT)&&(e=e.update({filter:(e,t)=>r.value.from!=e||r.value.to!=t,filterFrom:r.value.from,filterTo:r.value.to}));if(t.selection){let r=!1,{head:n}=t.selection.main;e.between(n,n,(e,t)=>{e<n&&t>n&&(r=!0)}),r&&(e=e.update({filterFrom:n,filterTo:n,filter:(e,t)=>t<=n||e>=n}))}return e},provide:e=>fq.decorations.from(e),toJSON(e,t){let r=[];return e.between(0,t.doc.length,(e,t)=>{r.push(e,t)}),r},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw RangeError("Invalid JSON for fold state");let t=[];for(let r=0;r<e.length;){let n=e[r++],i=e[r++];if("number"!=typeof n||"number"!=typeof i)throw RangeError("Invalid JSON for fold state");t.push(gI.range(n,i))}return uC.set(t,!0)}});function gE(e,t,r){var n;let i=null;return null===(n=e.field(gM,!1))||void 0===n||n.between(t,r,(e,t)=>{(!i||i.from>e)&&(i={from:e,to:t})}),i}function gN(e,t){var r;return e.field(gM,!1)?t:t.concat(to.appendConfig.of([gM,g$]))}function g_(e,t,r=!0){let n=e.state.doc.lineAt(t.from).number,i=e.state.doc.lineAt(t.to).number;return fq.announce.of(`${e.state.phrase(r?"Folded lines":"Unfolded lines")} ${n} ${e.state.phrase("to")} ${i}.`)}let gj=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:e=>{for(let t of gA(e)){let r=gO(e.state,t.from,t.to);if(r)return e.dispatch({effects:gN(e.state,[gC.of(r),g_(e,r)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:e=>{if(!e.state.field(gM,!1))return!1;let t=[];for(let r of gA(e)){let n=gE(e.state,r.from,r.to);n&&t.push(gT.of(n),g_(e,n,!1))}return t.length&&e.dispatch({effects:t}),t.length>0}},{key:"Ctrl-Alt-[",run:e=>{let{state:t}=e,r=[];for(let n=0;n<t.doc.length;){let i=e.lineBlockAt(n),s=gO(t,i.from,i.to);s&&r.push(gC.of(s)),n=(s?e.lineBlockAt(s.to):i).to+1}return r.length&&e.dispatch({effects:gN(e.state,r)}),!!r.length}},{key:"Ctrl-Alt-]",run:e=>{let t=e.state.field(gM,!1);if(!t||!t.size)return!1;let r=[];return t.between(0,e.state.doc.length,(e,t)=>{r.push(gT.of({from:e,to:t}))}),e.dispatch({effects:r}),!0}}],gD={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},gR=eV.define({combine:e=>tm(e,gD)});function gP(e,t){let{state:r}=e,n=r.facet(gR),i=t=>{let r=e.lineBlockAt(e.posAtDOM(t.target)),n=gE(e.state,r.from,r.to);n&&e.dispatch({effects:gT.of(n)}),t.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(e,i,t);let s=document.createElement("span");return s.textContent=n.placeholderText,s.setAttribute("aria-label",r.phrase("folded code")),s.title=r.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}let gI=uC.replace({widget:new class extends uO{toDOM(e){return gP(e,null)}}});class gz extends uO{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return gP(e,this.value)}}let gL={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class gq extends pV{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}let g$=fq.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class gB{constructor(e,t){let r;function n(e){let t=hM.newName();return(r||(r=Object.create(null)))["."+t]=e,t}this.specs=e;let i="string"==typeof t.all?t.all:t.all?n(t.all):void 0,s=t.scope;this.scope=s instanceof m3?e=>e.prop(m4)==s.data:s?e=>e==s:void 0,this.style=mq(e.map(e=>({tag:e.tag,class:e.class||n(Object.assign({},e,{tag:null}))})),{all:i}).style,this.module=r?new hM(r):null,this.themeType=t.themeType}static define(e,t){return new gB(e,t||{})}}let gF=eV.define(),gQ=eV.define({combine:e=>e.length?[e[0]]:null});function gV(e){let t=e.facet(gF);return t.length?t:e.facet(gQ)}function gH(e,t){let r=[gU],n;return e instanceof gB&&(e.module&&r.push(fq.styleModule.of(e.module)),n=e.themeType),null!=t&&t.fallback?r.push(gQ.of(e)):n?r.push(gF.computeN([fq.darkTheme],t=>t.facet(fq.darkTheme)==("dark"==n)?[e]:[])):r.push(gF.of(e)),r}class gW{constructor(e){this.markCache=Object.create(null),this.tree=m8(e.state),this.decorations=this.buildDeco(e,gV(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=m8(e.state),r=gV(e.state),n=r!=gV(e.startState),{viewport:i}=e.view,s=e.changes.mapPos(this.decoratedTo,1);t.length<i.to&&!n&&t.type==this.tree.type&&s>=i.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=s):(t!=this.tree||e.viewportChanged||n)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=i.to)}buildDeco(e,t){if(!t||!this.tree.length)return uC.none;let r=new tw;for(let{from:n,to:i}of e.visibleRanges)!function(e,t,r,n=0,i=e.length){let s=new m$(n,Array.isArray(t)?t:[t],r);s.highlightRange(e.cursor(),n,i,"",s.highlighters),s.flush(i)}(this.tree,t,(e,t,n)=>{r.add(e,t,this.markCache[n]||(this.markCache[n]=uC.mark({class:n})))},n,i);return r.finish()}}let gU=eK.high(da.fromClass(gW,{decorations:e=>e.decorations})),gG=gB.define([{tag:m2.meta,color:"#404740"},{tag:m2.link,textDecoration:"underline"},{tag:m2.heading,textDecoration:"underline",fontWeight:"bold"},{tag:m2.emphasis,fontStyle:"italic"},{tag:m2.strong,fontWeight:"bold"},{tag:m2.strikethrough,textDecoration:"line-through"},{tag:m2.keyword,color:"#708"},{tag:[m2.atom,m2.bool,m2.url,m2.contentSeparator,m2.labelName],color:"#219"},{tag:[m2.literal,m2.inserted],color:"#164"},{tag:[m2.string,m2.deleted],color:"#a11"},{tag:[m2.regexp,m2.escape,m2.special(m2.string)],color:"#e40"},{tag:m2.definition(m2.variableName),color:"#00f"},{tag:m2.local(m2.variableName),color:"#30a"},{tag:[m2.typeName,m2.namespace],color:"#085"},{tag:m2.className,color:"#167"},{tag:[m2.special(m2.variableName),m2.macroName],color:"#256"},{tag:m2.definition(m2.propertyName),color:"#00c"},{tag:m2.comment,color:"#940"},{tag:m2.invalid,color:"#f00"}]),gX=fq.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),gY="()[]{}",gZ=eV.define({combine:e=>tm(e,{afterCursor:!0,brackets:gY,maxScanDistance:1e4,renderMatch:g0})}),gJ=uC.mark({class:"cm-matchingBracket"}),gK=uC.mark({class:"cm-nonmatchingBracket"});function g0(e){let t=[],r=e.matched?gJ:gK;return t.push(r.range(e.start.from,e.start.to)),e.end&&t.push(r.range(e.end.from,e.end.to)),t}let g1=[eY.define({create:()=>uC.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let r=[],n=t.state.facet(gZ);for(let e of t.state.selection.ranges){if(!e.empty)continue;let i=g3(t.state,e.head,-1,n)||e.head>0&&g3(t.state,e.head-1,1,n)||n.afterCursor&&(g3(t.state,e.head,1,n)||e.head<t.state.doc.length&&g3(t.state,e.head+1,-1,n));i&&(r=r.concat(n.renderMatch(i,t.state)))}return uC.set(r,!0)},provide:e=>fq.decorations.from(e)}),gX],g2=new mn;function g4(e,t,r){let n=e.prop(t<0?mn.openedBy:mn.closedBy);if(n)return n;if(1==e.name.length){let n=r.indexOf(e.name);if(n>-1&&n%2==+(t<0))return[r[n+t]]}return null}function g5(e){let t=e.type.prop(g2);return t?t(e.node):e}function g3(e,t,r,n={}){let i=n.maxScanDistance||1e4,s=n.brackets||gY,o=m8(e),a=o.resolveInner(t,r);for(let e=a;e;e=e.parent){let n=g4(e.type,r,s);if(n&&e.from<e.to){let i=g5(e);if(i&&(r>0?t>=i.from&&t<i.to:t>i.from&&t<=i.to))return function(e,t,r,n,i,s,o){let a=n.parent,l={from:i.from,to:i.to},c=0,h=null==a?void 0:a.cursor();if(h&&(r<0?h.childBefore(n.from):h.childAfter(n.to)))do if(r<0?h.to<=n.from:h.from>=n.to){if(0==c&&s.indexOf(h.type.name)>-1&&h.from<h.to){let e=g5(h);return{start:l,end:e?{from:e.from,to:e.to}:void 0,matched:!0}}if(g4(h.type,r,o))c++;else if(g4(h.type,-r,o)){if(0==c){let e=g5(h);return{start:l,end:e&&e.from<e.to?{from:e.from,to:e.to}:void 0,matched:!1}}c--}}while(r<0?h.prevSibling():h.nextSibling());return{start:l,matched:!1}}(0,0,r,e,i,n,s)}}return function(e,t,r,n,i,s,o){let a=r<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=o.indexOf(a);if(l<0||l%2==0!=r>0)return null;let c={from:r<0?t-1:t,to:r>0?t+1:t},h=e.doc.iterRange(t,r>0?e.doc.length:0),u=0;for(let e=0;!h.next().done&&e<=s;){let s=h.value;r<0&&(e+=s.length);let a=t+e*r;for(let e=r>0?0:s.length-1,t=r>0?s.length:-1;e!=t;e+=r){let t=o.indexOf(s[e]);if(!(t<0||n.resolveInner(a+e,1).type!=i)){if(t%2==0==r>0)u++;else{if(1==u)return{start:c,end:{from:a+e,to:a+e+1},matched:t>>1==l>>1};u--}}}r>0&&(e+=s.length)}return h.done?{start:c,matched:!1}:null}(e,t,r,o,a.type,i,s)}let g6=Object.create(null),g7=[mo.none],g8=[],g9=Object.create(null),ye=Object.create(null);for(let[e,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])ye[e]=function(e,t){let r=[];for(let n of t.split(" ")){let t=[];for(let r of n.split(".")){let n=e[r]||m2[r];n?"function"==typeof n?t.length?t=t.map(n):yt(r,`Modifier ${r} used at start of tag`):t.length?yt(r,`Tag ${r} used as modifier`):t=Array.isArray(n)?n:[n]:yt(r,`Unknown highlighting tag ${r}`)}for(let e of t)r.push(e)}if(!r.length)return 0;let n=t.replace(/ /g,"_"),i=n+" "+r.map(e=>e.id),s=g9[i];if(s)return s.id;let o=g9[i]=mo.define({id:g7.length,name:n,props:[mI({[n]:r})]});return g7.push(o),o.id}(g6,t);function yt(e,t){g8.indexOf(e)>-1||(g8.push(e),console.warn(t))}function yr(e,t){return({state:r,dispatch:n})=>{if(r.readOnly)return!1;let i=e(t,r);return!!i&&(n(r.update(i)),!0)}}uz.RTL,uz.LTR;let yn=yr(function(e,t,r=t.selection.ranges){let n=[],i=-1;for(let{from:e,to:s}of r){let r=n.length,o=1e9,a=yo(t,e).line;if(a){for(let r=e;r<=s;){let l=t.doc.lineAt(r);if(l.from>i&&(e==s||s>l.from)){i=l.from;let e=/^\s*/.exec(l.text)[0].length,t=e==l.length,r=l.text.slice(e,e+a.length)==a?e:-1;e<l.text.length&&e<o&&(o=e),n.push({line:l,comment:r,token:a,indent:e,empty:t,single:!1})}r=l.to+1}if(o<1e9)for(let e=r;e<n.length;e++)n[e].indent<n[e].line.text.length&&(n[e].indent=o);n.length==r+1&&(n[r].single=!0)}}if(2!=e&&n.some(e=>e.comment<0&&(!e.empty||e.single))){let e=[];for(let{line:t,token:r,indent:i,empty:s,single:o}of n)(o||!s)&&e.push({from:t.from+i,insert:r+" "});let r=t.changes(e);return{changes:r,selection:t.selection.map(r,1)}}if(1!=e&&n.some(e=>e.comment>=0)){let e=[];for(let{line:t,comment:r,token:i}of n)if(r>=0){let n=t.from+r,s=n+i.length;" "==t.text[s-t.from]&&s++,e.push({from:n,to:s})}return{changes:e}}return null},0),yi=yr(ya,0),ys=yr((e,t)=>ya(e,t,function(e){let t=[];for(let r of e.selection.ranges){let n=e.doc.lineAt(r.from),i=r.to<=n.to?n:e.doc.lineAt(r.to);i.from>n.from&&i.from==r.to&&(i=r.to==n.to+1?n:e.doc.lineAt(r.to-1));let s=t.length-1;s>=0&&t[s].to>n.from?t[s].to=i.to:t.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:i.to})}return t}(t)),0);function yo(e,t){let r=e.languageDataAt("commentTokens",t);return r.length?r[0]:{}}function ya(e,t,r=t.selection.ranges){let n=r.map(e=>yo(t,e.from).block);if(!n.every(e=>e))return null;let i=r.map((e,r)=>(function(e,{open:t,close:r},n,i){let s,o,a=e.sliceDoc(n-50,n),l=e.sliceDoc(i,i+50),c=/\s*$/.exec(a)[0].length,h=/^\s*/.exec(l)[0].length,u=a.length-c;if(a.slice(u-t.length,u)==t&&l.slice(h,h+r.length)==r)return{open:{pos:n-c,margin:c&&1},close:{pos:i+h,margin:h&&1}};i-n<=100?s=o=e.sliceDoc(n,i):(s=e.sliceDoc(n,n+50),o=e.sliceDoc(i-50,i));let d=/^\s*/.exec(s)[0].length,f=/\s*$/.exec(o)[0].length,p=o.length-f-r.length;return s.slice(d,d+t.length)==t&&o.slice(p,p+r.length)==r?{open:{pos:n+d+t.length,margin:+!!/\s/.test(s.charAt(d+t.length))},close:{pos:i-f-r.length,margin:+!!/\s/.test(o.charAt(p-1))}}:null})(t,n[r],e.from,e.to));if(2!=e&&!i.every(e=>e))return{changes:t.changes(r.map((e,t)=>i[t]?[]:[{from:e.from,insert:n[t].open+" "},{from:e.to,insert:" "+n[t].close}]))};if(1!=e&&i.some(e=>e)){let e=[];for(let t=0,r;t<i.length;t++)if(r=i[t]){let i=n[t],{open:s,close:o}=r;e.push({from:s.pos-i.open.length,to:s.pos+s.margin},{from:o.pos-o.margin,to:o.pos+i.close.length})}return{changes:e}}return null}let yl=tn.define(),yc=tn.define(),yh=eV.define(),yu=eV.define({combine:e=>tm(e,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(r,n)=>e(r,n)||t(r,n)})}),yd=eY.define({create:()=>yC.empty,update(e,t){let r=t.state.facet(yu),n=t.annotation(yl);if(n){let i=yb.fromTransaction(t,n.selection),s=n.side,o=0==s?e.undone:e.done;return o=i?yv(o,o.length,r.minDepth,i):yk(o,t.startState.selection),new yC(0==s?n.rest:o,0==s?o:n.rest)}let i=t.annotation(yc);if(("full"==i||"before"==i)&&(e=e.isolate()),!1===t.annotation(ta.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let s=yb.fromTransaction(t),o=t.annotation(ta.time),a=t.annotation(ta.userEvent);return s?e=e.addChanges(s,o,a,r,t):t.selection&&(e=e.addSelection(t.startState.selection,o,a,r.newGroupDelay)),("full"==i||"after"==i)&&(e=e.isolate()),e},toJSON:e=>({done:e.done.map(e=>e.toJSON()),undone:e.undone.map(e=>e.toJSON())}),fromJSON:e=>new yC(e.done.map(yb.fromJSON),e.undone.map(yb.fromJSON))});function yf(e,t){return function({state:r,dispatch:n}){if(!t&&r.readOnly)return!1;let i=r.field(yd,!1);if(!i)return!1;let s=i.pop(e,r,t);return!!s&&(n(s),!0)}}let yp=yf(0,!1),ym=yf(1,!1),yg=yf(0,!0),yy=yf(1,!0);class yb{constructor(e,t,r,n,i){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=n,this.selectionsAfter=i}setSelAfter(e){return new yb(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(r=this.startSelection)||void 0===r?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(e=>e.toJSON())}}static fromJSON(e){return new yb(e.changes&&eD.fromJSON(e.changes),[],e.mapped&&ej.fromJSON(e.mapped),e.startSelection&&eB.fromJSON(e.startSelection),e.selectionsAfter.map(eB.fromJSON))}static fromTransaction(e,t){let r=yw;for(let t of e.startState.facet(yh)){let n=t(e);n.length&&(r=r.concat(n))}return!r.length&&e.changes.empty?null:new yb(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,yw)}static selection(e){return new yb(void 0,yw,void 0,void 0,e)}}function yv(e,t,r,n){let i=e.slice(t+1>r+20?t-r-1:0,t);return i.push(n),i}function yx(e,t){return e.length?t.length?e.concat(t):e:t}let yw=[];function yk(e,t){if(!e.length)return[yb.selection([t])];{let r=e[e.length-1],n=r.selectionsAfter.slice(Math.max(0,r.selectionsAfter.length-200));return n.length&&n[n.length-1].eq(t)?e:(n.push(t),yv(e,e.length-1,1e9,r.setSelAfter(n)))}}function yO(e,t){if(!e.length)return e;let r=e.length,n=yw;for(;r;){let i=function(e,t,r){let n=yx(e.selectionsAfter.length?e.selectionsAfter.map(e=>e.map(t)):yw,r);if(!e.changes)return yb.selection(n);let i=e.changes.map(t),s=t.mapDesc(e.changes,!0),o=e.mapped?e.mapped.composeDesc(s):s;return new yb(i,to.mapEffects(e.effects,t),o,e.startSelection.map(s),n)}(e[r-1],t,n);if(i.changes&&!i.changes.empty||i.effects.length){let t=e.slice(0,r);return t[r-1]=i,t}t=i.mapped,r--,n=i.selectionsAfter}return n.length?[yb.selection(n)]:yw}let yS=/^(input\.type|delete)($|\.)/,yC=class e{constructor(e,t,r=0,n){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=n}isolate(){return this.prevTime?new e(this.done,this.undone):this}addChanges(t,r,n,i,s){var o,a;let l,c,h=this.done,u=h[h.length-1];return new e(h=u&&u.changes&&!u.changes.empty&&t.changes&&(!n||yS.test(n))&&(!u.selectionsAfter.length&&r-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,(o=u.changes,a=t.changes,l=[],c=!1,o.iterChangedRanges((e,t)=>l.push(e,t)),a.iterChangedRanges((e,t,r,n)=>{for(let e=0;e<l.length;){let t=l[e++],i=l[e++];n>=t&&r<=i&&(c=!0)}}),c))||"input.type.compose"==n)?yv(h,h.length-1,i.minDepth,new yb(t.changes.compose(u.changes),yx(to.mapEffects(t.effects,u.changes),u.effects),u.mapped,u.startSelection,yw)):yv(h,h.length,i.minDepth,t),yw,r,n)}addSelection(t,r,n,i){var s;let o=this.done.length?this.done[this.done.length-1].selectionsAfter:yw;return o.length>0&&r-this.prevTime<i&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&(s=o[o.length-1]).ranges.length==t.ranges.length&&0===s.ranges.filter((e,r)=>e.empty!=t.ranges[r].empty).length?this:new e(yk(this.done,t),this.undone,r,n)}addMapping(t){return new e(yO(this.done,t),yO(this.undone,t),this.prevTime,this.prevUserEvent)}pop(e,t,r){let n=0==e?this.done:this.undone;if(0==n.length)return null;let i=n[n.length-1],s=i.selectionsAfter[0]||t.selection;if(r&&i.selectionsAfter.length){let r,o;return t.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:yl.of({side:e,rest:(r=n[n.length-1],(o=n.slice())[n.length-1]=r.setSelAfter(r.selectionsAfter.slice(0,r.selectionsAfter.length-1)),o),selection:s}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0})}if(!i.changes)return null;{let r=1==n.length?yw:n.slice(0,n.length-1);return i.mapped&&(r=yO(r,i.mapped)),t.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:yl.of({side:e,rest:r,selection:s}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}}};yC.empty=new yC(yw,yw);let yT=[{key:"Mod-z",run:yp,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:ym,preventDefault:!0},{linux:"Ctrl-Shift-z",run:ym,preventDefault:!0},{key:"Mod-u",run:yg,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:yy,preventDefault:!0}];function yA(e,t){return eB.create(e.ranges.map(t),e.mainIndex)}function yM(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function yE({state:e,dispatch:t},r){let n=yA(e.selection,r);return!n.eq(e.selection,!0)&&(t(yM(e,n)),!0)}function yN(e,t){return eB.cursor(t?e.to:e.from)}function y_(e,t){return yE(e,r=>r.empty?e.moveByChar(r,t):yN(r,t))}function yj(e){return e.textDirectionAt(e.state.selection.main.head)==uz.LTR}let yD=e=>y_(e,!yj(e)),yR=e=>y_(e,yj(e));function yP(e,t){return yE(e,r=>r.empty?e.moveByGroup(r,t):yN(r,t))}function yI(e,t,r){let n,i,s=m8(e).resolveInner(t.head),o=r?mn.closedBy:mn.openedBy;for(let n=t.head;;){let t=r?s.childAfter(n):s.childBefore(n);if(!t)break;!function(e,t,r){if(t.type.prop(r))return!0;let n=t.to-t.from;return n&&(n>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}(e,t,o)?n=r?t.to:t.from:s=t}return i=s.type.prop(o)&&(n=r?g3(e,s.from,1):g3(e,s.to,-1))&&n.matched?r?n.end.to:n.end.from:r?s.to:s.from,eB.cursor(i,r?-1:1)}function yz(e,t){return yE(e,r=>{if(!r.empty)return yN(r,t);let n=e.moveVertically(r,t);return n.head!=r.head?n:e.moveToLineBoundary(r,t)})}let yL=e=>yz(e,!1),yq=e=>yz(e,!0);function y$(e){let t=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,r=0,n=0,i;if(t){for(let t of e.state.facet(fq.scrollMargins)){let i=t(e);null!=i&&i.top&&(r=Math.max(null==i?void 0:i.top,r)),null!=i&&i.bottom&&(n=Math.max(null==i?void 0:i.bottom,n))}i=e.scrollDOM.clientHeight-r-n}else i=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:n,selfScroll:t,height:Math.max(e.defaultLineHeight,i-5)}}function yB(e,t){let r,n=y$(e),{state:i}=e,s=yA(i.selection,r=>r.empty?e.moveVertically(r,t,n.height):yN(r,t));if(s.eq(i.selection))return!1;if(n.selfScroll){let t=e.coordsAtPos(i.selection.main.head),o=e.scrollDOM.getBoundingClientRect(),a=o.top+n.marginTop,l=o.bottom-n.marginBottom;t&&t.top>a&&t.bottom<l&&(r=fq.scrollIntoView(s.main.head,{y:"start",yMargin:t.top-a}))}return e.dispatch(yM(i,s),{effects:r}),!0}let yF=e=>yB(e,!1),yQ=e=>yB(e,!0);function yV(e,t,r){let n=e.lineBlockAt(t.head),i=e.moveToLineBoundary(t,r);if(i.head==t.head&&i.head!=(r?n.to:n.from)&&(i=e.moveToLineBoundary(t,r,!1)),!r&&i.head==n.from&&n.length){let r=/^\s*/.exec(e.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;r&&t.head!=n.from+r&&(i=eB.cursor(n.from+r))}return i}function yH(e,t){let r=yA(e.state.selection,e=>{let r=t(e);return eB.range(e.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return!r.eq(e.state.selection)&&(e.dispatch(yM(e.state,r)),!0)}function yW(e,t){return yH(e,r=>e.moveByChar(r,t))}let yU=e=>yW(e,!yj(e)),yG=e=>yW(e,yj(e));function yX(e,t){return yH(e,r=>e.moveByGroup(r,t))}function yY(e,t){return yH(e,r=>e.moveVertically(r,t))}let yZ=e=>yY(e,!1),yJ=e=>yY(e,!0);function yK(e,t){return yH(e,r=>e.moveVertically(r,t,y$(e).height))}let y0=e=>yK(e,!1),y1=e=>yK(e,!0),y2=({state:e,dispatch:t})=>(t(yM(e,{anchor:0})),!0),y4=({state:e,dispatch:t})=>(t(yM(e,{anchor:e.doc.length})),!0),y5=({state:e,dispatch:t})=>(t(yM(e,{anchor:e.selection.main.anchor,head:0})),!0),y3=({state:e,dispatch:t})=>(t(yM(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0);function y6(e,t){if(e.state.readOnly)return!1;let r="delete.selection",{state:n}=e,i=n.changeByRange(n=>{let{from:i,to:s}=n;if(i==s){let o=t(n);o<i?(r="delete.backward",o=y7(e,o,!1)):o>i&&(r="delete.forward",o=y7(e,o,!0)),i=Math.min(i,o),s=Math.max(s,o)}else i=y7(e,i,!1),s=y7(e,s,!0);return i==s?{range:n}:{changes:{from:i,to:s},range:eB.cursor(i,i<n.head?-1:1)}});return!i.changes.empty&&(e.dispatch(n.update(i,{scrollIntoView:!0,userEvent:r,effects:"delete.selection"==r?fq.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function y7(e,t,r){if(e instanceof fq)for(let n of e.state.facet(fq.atomicRanges).map(t=>t(e)))n.between(t,t,(e,n)=>{e<t&&n>t&&(t=r?n:e)});return t}let y8=(e,t,r)=>y6(e,n=>{let i=n.from,{state:s}=e,o=s.doc.lineAt(i),a,l;if(r&&!t&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,i-o.from))){if("	"==a[a.length-1])return i-1;let e=tj(a,s.tabSize)%gu(s)||gu(s);for(let t=0;t<e&&" "==a[a.length-1-t];t++)i--;l=i}else(l=eT(o.text,i-o.from,t,t)+o.from)==i&&o.number!=(t?s.doc.lines:1)?l+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,i-o.from))&&(l=eT(o.text,l-o.from,!1,!1)+o.from);return l}),y9=e=>y8(e,!1,!0),be=e=>y8(e,!0,!1),bt=(e,t)=>y6(e,r=>{let n=r.head,{state:i}=e,s=i.doc.lineAt(n),o=i.charCategorizer(n);for(let e=null;;){if(n==(t?s.to:s.from)){n==r.head&&s.number!=(t?i.doc.lines:1)&&(n+=t?1:-1);break}let a=eT(s.text,n-s.from,t)+s.from,l=s.text.slice(Math.min(n,a)-s.from,Math.max(n,a)-s.from),c=o(l);if(null!=e&&c!=e)break;(" "!=l||n!=r.head)&&(e=c),n=a}return n}),br=e=>bt(e,!1);function bn(e){let t=[],r=-1;for(let n of e.selection.ranges){let i=e.doc.lineAt(n.from),s=e.doc.lineAt(n.to);if(n.empty||n.to!=s.from||(s=e.doc.lineAt(n.to-1)),r>=i.number){let e=t[t.length-1];e.to=s.to,e.ranges.push(n)}else t.push({from:i.from,to:s.to,ranges:[n]});r=s.number+1}return t}function bi(e,t,r){if(e.readOnly)return!1;let n=[],i=[];for(let t of bn(e)){if(r?t.to==e.doc.length:0==t.from)continue;let s=e.doc.lineAt(r?t.to+1:t.from-1),o=s.length+1;if(r)for(let r of(n.push({from:t.to,to:s.to},{from:t.from,insert:s.text+e.lineBreak}),t.ranges))i.push(eB.range(Math.min(e.doc.length,r.anchor+o),Math.min(e.doc.length,r.head+o)));else for(let r of(n.push({from:s.from,to:t.from},{from:t.to,insert:e.lineBreak+s.text}),t.ranges))i.push(eB.range(r.anchor-o,r.head-o))}return!!n.length&&(t(e.update({changes:n,scrollIntoView:!0,selection:eB.create(i,e.selection.mainIndex),userEvent:"move.line"})),!0)}function bs(e,t,r){if(e.readOnly)return!1;let n=[];for(let t of bn(e))r?n.push({from:t.from,insert:e.doc.slice(t.from,t.to)+e.lineBreak}):n.push({from:t.to,insert:e.lineBreak+e.doc.slice(t.from,t.to)});return t(e.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}let bo=bl(!1),ba=bl(!0);function bl(e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{let{from:n,to:i}=r,s=t.doc.lineAt(n),o=!e&&n==i&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let r=m8(e).resolveInner(t),n=r.childBefore(t),i=r.childAfter(t),s;return n&&i&&n.to<=t&&i.from>=t&&(s=n.type.prop(mn.closedBy))&&s.indexOf(i.name)>-1&&e.doc.lineAt(n.to).from==e.doc.lineAt(i.from).from&&!/\S/.test(e.sliceDoc(n.to,i.from))?{from:n.to,to:i.from}:null}(t,n);e&&(n=i=(i<=s.to?s:t.doc.lineAt(i)).to);let a=new gp(t,{simulateBreak:n,simulateDoubleBreak:!!o}),l=gf(a,n);for(null==l&&(l=tj(/^\s*/.exec(t.doc.lineAt(n).text)[0],t.tabSize));i<s.to&&/\s/.test(s.text[i-s.from]);)i++;o?{from:n,to:i}=o:n>s.from&&n<s.from+100&&!/\S/.test(s.text.slice(0,n))&&(n=s.from);let c=["",gd(t,l)];return o&&c.push(gd(t,a.lineIndent(s.from,-1))),{changes:{from:n,to:i,insert:ey.of(c)},range:eB.cursor(n+1+c[1].length)}});return r(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function bc(e,t){let r=-1;return e.changeByRange(n=>{let i=[];for(let s=n.from;s<=n.to;){let o=e.doc.lineAt(s);o.number>r&&(n.empty||n.to>o.from)&&(t(o,i,n),r=o.number),s=o.to+1}let s=e.changes(i);return{changes:i,range:eB.range(s.mapPos(n.anchor,1),s.mapPos(n.head,1))}})}let bh=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(bc(e,(t,r)=>{r.push({from:t.from,insert:e.facet(gh)})}),{userEvent:"input.indent"})),!0),bu=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(bc(e,(t,r)=>{let n=/^\s*/.exec(t.text)[0];if(!n)return;let i=tj(n,e.tabSize),s=0,o=gd(e,Math.max(0,i-gu(e)));for(;s<n.length&&s<o.length&&n.charCodeAt(s)==o.charCodeAt(s);)s++;r.push({from:t.from+s,to:t.from+n.length,insert:o.slice(s)})}),{userEvent:"delete.dedent"})),!0),bd=[{key:"Ctrl-b",run:yD,shift:yU,preventDefault:!0},{key:"Ctrl-f",run:yR,shift:yG},{key:"Ctrl-p",run:yL,shift:yZ},{key:"Ctrl-n",run:yq,shift:yJ},{key:"Ctrl-a",run:e=>yE(e,t=>eB.cursor(e.lineBlockAt(t.head).from,1)),shift:e=>yH(e,t=>eB.cursor(e.lineBlockAt(t.head).from))},{key:"Ctrl-e",run:e=>yE(e,t=>eB.cursor(e.lineBlockAt(t.head).to,-1)),shift:e=>yH(e,t=>eB.cursor(e.lineBlockAt(t.head).to))},{key:"Ctrl-d",run:be},{key:"Ctrl-h",run:y9},{key:"Ctrl-k",run:e=>y6(e,t=>{let r=e.lineBlockAt(t.head).to;return t.head<r?r:Math.min(e.state.doc.length,t.head+1)})},{key:"Ctrl-Alt-h",run:br},{key:"Ctrl-o",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:ey.of(["",""])},range:eB.cursor(e.from)}));return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let r=t.from,n=e.doc.lineAt(r),i=r==n.from?r-1:eT(n.text,r-n.from,!1)+n.from,s=r==n.to?r+1:eT(n.text,r-n.from,!0)+n.from;return{changes:{from:i,to:s,insert:e.doc.slice(r,s).append(e.doc.slice(i,r))},range:eB.cursor(s)}});return!r.changes.empty&&(t(e.update(r,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:yQ}],bf=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>yE(e,t=>yI(e.state,t,!yj(e))),shift:e=>yH(e,t=>yI(e.state,t,!yj(e)))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>yE(e,t=>yI(e.state,t,yj(e))),shift:e=>yH(e,t=>yI(e.state,t,yj(e)))},{key:"Alt-ArrowUp",run:({state:e,dispatch:t})=>bi(e,t,!1)},{key:"Shift-Alt-ArrowUp",run:({state:e,dispatch:t})=>bs(e,t,!1)},{key:"Alt-ArrowDown",run:({state:e,dispatch:t})=>bi(e,t,!0)},{key:"Shift-Alt-ArrowDown",run:({state:e,dispatch:t})=>bs(e,t,!0)},{key:"Escape",run:({state:e,dispatch:t})=>{let r=e.selection,n=null;return r.ranges.length>1?n=eB.create([r.main]):r.main.empty||(n=eB.create([eB.cursor(r.main.head)])),!!n&&(t(yM(e,n)),!0)}},{key:"Mod-Enter",run:ba},{key:"Alt-l",mac:"Ctrl-l",run:({state:e,dispatch:t})=>{let r=bn(e).map(({from:t,to:r})=>eB.range(t,Math.min(r+1,e.doc.length)));return t(e.update({selection:eB.create(r),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:e,dispatch:t})=>{let r=yA(e.selection,t=>{let r=m8(e),n=r.resolveStack(t.from,1);if(t.empty){let e=r.resolveStack(t.from,-1);e.node.from>=n.node.from&&e.node.to<=n.node.to&&(n=e)}for(let e=n;e;e=e.next){let{node:r}=e;if((r.from<t.from&&r.to>=t.to||r.to>t.to&&r.from<=t.from)&&e.next)return eB.range(r.to,r.from)}return t});return!r.eq(e.selection)&&(t(yM(e,r)),!0)},preventDefault:!0},{key:"Mod-[",run:bu},{key:"Mod-]",run:bh},{key:"Mod-Alt-\\",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=Object.create(null),n=new gp(e,{overrideIndentation:e=>r[e]??-1}),i=bc(e,(t,i,s)=>{let o=gf(n,t.from);if(null==o)return;/\S/.test(t.text)||(o=0);let a=/^\s*/.exec(t.text)[0],l=gd(e,o);(a!=l||s.from<t.from+a.length)&&(r[t.from]=o,i.push({from:t.from,to:t.from+a.length,insert:l}))});return i.changes.empty||t(e.update(i,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,r=t.changes(bn(t).map(({from:e,to:r})=>(e>0?e--:r<t.doc.length&&r++,{from:e,to:r}))),n=yA(t.selection,t=>{let r;if(e.lineWrapping){let n=e.lineBlockAt(t.head),i=e.coordsAtPos(t.head,t.assoc||1);i&&(r=n.bottom+e.documentTop-i.bottom+e.defaultLineHeight/2)}return e.moveVertically(t,!0,r)}).map(r);return e.dispatch({changes:r,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:e,dispatch:t})=>(function(e,t,r){let n=!1,i=yA(e.selection,t=>{let r=g3(e,t.head,-1)||g3(e,t.head,1)||t.head>0&&g3(e,t.head-1,1)||t.head<e.doc.length&&g3(e,t.head+1,-1);if(!r||!r.end)return t;n=!0;let i=r.start.from==t.head?r.end.to:r.end.from;return eB.cursor(i)});return!!n&&(t(yM(e,i)),!0)})(e,t)},{key:"Mod-/",run:e=>{let{state:t}=e,r=t.doc.lineAt(t.selection.main.from),n=yo(e.state,r.from);return n.line?yn(e):!!n.block&&ys(e)}},{key:"Alt-A",run:yi},{key:"Ctrl-m",mac:"Shift-Alt-m",run:e=>(e.setTabFocusMode(),!0)}].concat([{key:"ArrowLeft",run:yD,shift:yU,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>yP(e,!yj(e)),shift:e=>yX(e,!yj(e)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:e=>yE(e,t=>yV(e,t,!yj(e))),shift:e=>yH(e,t=>yV(e,t,!yj(e))),preventDefault:!0},{key:"ArrowRight",run:yR,shift:yG,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>yP(e,yj(e)),shift:e=>yX(e,yj(e)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:e=>yE(e,t=>yV(e,t,yj(e))),shift:e=>yH(e,t=>yV(e,t,yj(e))),preventDefault:!0},{key:"ArrowUp",run:yL,shift:yZ,preventDefault:!0},{mac:"Cmd-ArrowUp",run:y2,shift:y5},{mac:"Ctrl-ArrowUp",run:yF,shift:y0},{key:"ArrowDown",run:yq,shift:yJ,preventDefault:!0},{mac:"Cmd-ArrowDown",run:y4,shift:y3},{mac:"Ctrl-ArrowDown",run:yQ,shift:y1},{key:"PageUp",run:yF,shift:y0},{key:"PageDown",run:yQ,shift:y1},{key:"Home",run:e=>yE(e,t=>yV(e,t,!1)),shift:e=>yH(e,t=>yV(e,t,!1)),preventDefault:!0},{key:"Mod-Home",run:y2,shift:y5},{key:"End",run:e=>yE(e,t=>yV(e,t,!0)),shift:e=>yH(e,t=>yV(e,t,!0)),preventDefault:!0},{key:"Mod-End",run:y4,shift:y3},{key:"Enter",run:bo,shift:bo},{key:"Mod-a",run:({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:y9,shift:y9},{key:"Delete",run:be},{key:"Mod-Backspace",mac:"Alt-Backspace",run:br},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>bt(e,!0)},{mac:"Mod-Backspace",run:e=>y6(e,t=>{let r=e.moveToLineBoundary(t,!1).head;return t.head>r?r:Math.max(0,t.head-1)})},{mac:"Mod-Delete",run:e=>y6(e,t=>{let r=e.moveToLineBoundary(t,!0).head;return t.head<r?r:Math.min(e.state.doc.length,t.head+1)})}].concat(bd.map(e=>({mac:e.key,run:e.run,shift:e.shift})))),bp={key:"Tab",run:bh,shift:bu};function bm(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,r=arguments[1];if(r&&"object"==typeof r&&null==r.nodeType&&!Array.isArray(r)){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var i=r[n];"string"==typeof i?e.setAttribute(n,i):null!=i&&(e[n]=i)}t++}for(;t<arguments.length;t++)!function e(t,r){if("string"==typeof r)t.appendChild(document.createTextNode(r));else if(null!=r){if(null!=r.nodeType)t.appendChild(r);else if(Array.isArray(r))for(var n=0;n<r.length;n++)e(t,r[n]);else throw RangeError("Unsupported child node: "+r)}}(e,arguments[t]);return e}let bg="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class by{constructor(e,t,r=0,n=e.length,i,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,n),this.bufferStart=r,this.normalize=i?e=>i(bg(e)):bg,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return -1;this.bufferPos=0,this.buffer=this.iter.value}return eA(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=eM(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=eE(e);let n=this.normalize(t);if(n.length)for(let e=0,i=r;;e++){let s=n.charCodeAt(e),o=this.match(s,i,this.bufferPos+this.bufferStart);if(e==n.length-1){if(o)return this.value=o,this;break}i==r&&e<t.length&&t.charCodeAt(e)==s&&i++}}}match(e,t,r){let n=null;for(let t=0;t<this.matches.length;t+=2){let i=this.matches[t],s=!1;this.query.charCodeAt(i)==e&&(i==this.query.length-1?n={from:this.matches[t+1],to:r}:(this.matches[t]++,s=!0)),s||(this.matches.splice(t,2),t-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?n={from:t,to:r}:this.matches.push(1,t)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}}"u">typeof Symbol&&(by.prototype[Symbol.iterator]=function(){return this});let bb={from:-1,to:-1,match:/.*/.exec("")},bv="gm"+(null==/x/.unicode?"":"u");class bx{constructor(e,t,r,n=0,i=e.length){if(this.text=e,this.to=i,this.curLine="",this.done=!1,this.value=bb,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new bO(e,t,r,n,i);this.re=new RegExp(t,bv+(null!=r&&r.ignoreCase?"i":"")),this.test=null==r?void 0:r.test,this.iter=e.iter();let s=e.lineAt(n);this.curLineStart=s.from,this.matchPos=bS(e,n),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,n=r+t[0].length;if(this.matchPos=bS(this.text,n+ +(r==n)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<n||r>this.value.to)&&(!this.test||this.test(r,n,t)))return this.value={from:r,to:n,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}let bw=new WeakMap;class bk{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,r){let n=bw.get(e);if(!n||n.from>=r||n.to<=t){let n=new bk(t,e.sliceString(t,r));return bw.set(e,n),n}if(n.from==t&&n.to==r)return n;let{text:i,from:s}=n;return s>t&&(i=e.sliceString(t,s)+i,s=t),n.to<r&&(i+=e.sliceString(n.to,r)),bw.set(e,new bk(s,i)),new bk(t,i.slice(t-s,r-s))}}class bO{constructor(e,t,r,n,i){this.text=e,this.to=i,this.done=!1,this.value=bb,this.matchPos=bS(e,n),this.re=new RegExp(t,bv+(null!=r&&r.ignoreCase?"i":"")),this.test=null==r?void 0:r.test,this.flat=bk.get(e,n,this.chunkEnd(n+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let e=this.flat.from+t.index,r=e+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(e,r,t)))return this.value={from:e,to:r,match:t},this.matchPos=bS(this.text,r+ +(e==r)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=bk.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function bS(e,t){if(t>=e.length)return t;let r=e.lineAt(t),n;for(;t<r.to&&(n=r.text.charCodeAt(t-r.from))>=56320&&n<57344;)t++;return t}function bC(e){let t=bm("input",{class:"cm-textfield",name:"line",value:String(e.state.doc.lineAt(e.state.selection.main.head).number)});function r(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!r)return;let{state:n}=e,i=n.doc.lineAt(n.selection.main.head),[,s,o,a,l]=r,c=a?+a.slice(1):0,h=o?+o:i.number;if(o&&l){let e=h/100;s&&(e=e*("-"==s?-1:1)+i.number/n.doc.lines),h=Math.round(n.doc.lines*e)}else o&&s&&(h=h*("-"==s?-1:1)+i.number);let u=n.doc.line(Math.max(1,Math.min(n.doc.lines,h))),d=eB.cursor(u.from+Math.max(0,Math.min(c,u.length)));e.dispatch({effects:[bT.of(!1),fq.scrollIntoView(d.from,{y:"center"})],selection:d}),e.focus()}return{dom:bm("form",{class:"cm-gotoLine",onkeydown:t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({effects:bT.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),r())},onsubmit:e=>{e.preventDefault(),r()}},bm("label",e.state.phrase("Go to line"),": ",t)," ",bm("button",{class:"cm-button",type:"submit"},e.state.phrase("go")),bm("button",{name:"close",onclick:()=>{e.dispatch({effects:bT.of(!1)}),e.focus()},"aria-label":e.state.phrase("close"),type:"button"},["\xd7"]))}}"u">typeof Symbol&&(bx.prototype[Symbol.iterator]=bO.prototype[Symbol.iterator]=function(){return this});let bT=to.define(),bA=eY.define({create:()=>!0,update(e,t){for(let r of t.effects)r.is(bT)&&(e=r.value);return e},provide:e=>pQ.from(e,e=>e?bC:null)}),bM=fq.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),bE={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},bN=eV.define({combine:e=>tm(e,bE,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}),b_=uC.mark({class:"cm-selectionMatch"}),bj=uC.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function bD(e,t,r,n){return(0==r||e(t.sliceDoc(r-1,r))!=td.Word)&&(n==t.doc.length||e(t.sliceDoc(n,n+1))!=td.Word)}let bR=da.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(bN),{state:r}=e,n=r.selection;if(n.ranges.length>1)return uC.none;let i=n.main,s,o=null;if(i.empty){if(!t.highlightWordAroundCursor)return uC.none;let e=r.wordAt(i.head);if(!e)return uC.none;o=r.charCategorizer(i.head),s=r.sliceDoc(e.from,e.to)}else{let e=i.to-i.from;if(e<t.minSelectionLength||e>200)return uC.none;if(t.wholeWords){var a,l,c;if(s=r.sliceDoc(i.from,i.to),!(bD(o=r.charCategorizer(i.head),r,i.from,i.to)&&(a=o,l=i.from,c=i.to,a(r.sliceDoc(l,l+1))==td.Word&&a(r.sliceDoc(c-1,c))==td.Word)))return uC.none}else if(!(s=r.sliceDoc(i.from,i.to)))return uC.none}let h=[];for(let n of e.visibleRanges){let e=new by(r.doc,s,n.from,n.to);for(;!e.next().done;){let{from:n,to:s}=e.value;if((!o||bD(o,r,n,s))&&(i.empty&&n<=i.from&&s>=i.to?h.push(bj.range(n,s)):(n>=i.to||s<=i.from)&&h.push(b_.range(n,s)),h.length>t.maxMatches))return uC.none}}return uC.set(h)}},{decorations:e=>e.decorations}),bP=fq.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),bI=({state:e,dispatch:t})=>{let{selection:r}=e,n=eB.create(r.ranges.map(t=>e.wordAt(t.head)||eB.cursor(t.head)),r.mainIndex);return!n.eq(r)&&(t(e.update({selection:n})),!0)},bz=eV.define({combine:e=>tm(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new vr(e),scrollToMatch:e=>fq.scrollIntoView(e)})});class bL{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,bv),!0}catch{return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(e,t)=>"n"==t?`
`:"r"==t?"\r":"t"==t?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new bH(this):new bB(this)}getCursor(e,t=0,r){let n=e.doc?e:tp.create({doc:e});return null==r&&(r=n.doc.length),this.regexp?bF(this,n,t,r):b$(this,n,t,r)}}class bq{constructor(e){this.spec=e}}function b$(e,t,r,n){var i,s;return new by(t.doc,e.unquoted,r,n,e.caseSensitive?void 0:e=>e.toLowerCase(),e.wholeWord?(i=t.doc,s=t.charCategorizer(t.selection.main.head),(e,t,r,n)=>((n>e||n+r.length<t)&&(n=Math.max(0,e-2),r=i.sliceString(n,Math.min(i.length,t+2))),(s(bQ(r,e-n))!=td.Word||s(bV(r,e-n))!=td.Word)&&(s(bV(r,t-n))!=td.Word||s(bQ(r,t-n))!=td.Word))):void 0)}class bB extends bq{constructor(e){super(e)}nextMatch(e,t,r){let n=b$(this.spec,e,r,e.doc.length).nextOverlapping();if(n.done){let r=Math.min(e.doc.length,t+this.spec.unquoted.length);n=b$(this.spec,e,0,r).nextOverlapping()}return n.done||n.value.from==t&&n.value.to==r?null:n.value}prevMatchInRange(e,t,r){for(let n=r;;){let r=Math.max(t,n-1e4-this.spec.unquoted.length),i=b$(this.spec,e,r,n),s=null;for(;!i.nextOverlapping().done;)s=i.value;if(s)return s;if(r==t)return null;n-=1e4}}prevMatch(e,t,r){let n=this.prevMatchInRange(e,0,t);return n||(n=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),n&&(n.from!=t||n.to!=r)?n:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let r=b$(this.spec,e,0,e.doc.length),n=[];for(;!r.next().done;){if(n.length>=t)return null;n.push(r.value)}return n}highlight(e,t,r,n){let i=b$(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!i.next().done;)n(i.value.from,i.value.to)}}function bF(e,t,r,n){var i;return new bx(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?(i=t.charCategorizer(t.selection.main.head),(e,t,r)=>!r[0].length||(i(bQ(r.input,r.index))!=td.Word||i(bV(r.input,r.index))!=td.Word)&&(i(bV(r.input,r.index+r[0].length))!=td.Word||i(bQ(r.input,r.index+r[0].length))!=td.Word)):void 0},r,n)}function bQ(e,t){return e.slice(eT(e,t,!1),t)}function bV(e,t){return e.slice(t,eT(e,t))}class bH extends bq{nextMatch(e,t,r){let n=bF(this.spec,e,r,e.doc.length).next();return n.done&&(n=bF(this.spec,e,0,t).next()),n.done?null:n.value}prevMatchInRange(e,t,r){for(let n=1;;n++){let i=Math.max(t,r-1e4*n),s=bF(this.spec,e,i,r),o=null;for(;!s.next().done;)o=s.value;if(o&&(i==t||o.from>i+10))return o;if(i==t)return null}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,r)=>{if("&"==r)return e.match[0];if("$"==r)return"$";for(let t=r.length;t>0;t--){let n=+r.slice(0,t);if(n>0&&n<e.match.length)return e.match[n]+r.slice(t)}return t})}matchAll(e,t){let r=bF(this.spec,e,0,e.doc.length),n=[];for(;!r.next().done;){if(n.length>=t)return null;n.push(r.value)}return n}highlight(e,t,r,n){let i=bF(this.spec,e,Math.max(0,t-250),Math.min(r+250,e.doc.length));for(;!i.next().done;)n(i.value.from,i.value.to)}}let bW=to.define(),bU=to.define(),bG=eY.define({create:e=>new bX(b6(e).create(),null),update(e,t){for(let r of t.effects)r.is(bW)?e=new bX(r.value.create(),e.panel):r.is(bU)&&(e=new bX(e.query,r.value?b3:null));return e},provide:e=>pQ.from(e,e=>e.panel)});class bX{constructor(e,t){this.query=e,this.panel=t}}let bY=uC.mark({class:"cm-searchMatch"}),bZ=uC.mark({class:"cm-searchMatch cm-searchMatch-selected"}),bJ=da.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(bG))}update(e){let t=e.state.field(bG);(t!=e.startState.field(bG)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return uC.none;let{view:r}=this,n=new tw;for(let t=0,i=r.visibleRanges,s=i.length;t<s;t++){let{from:o,to:a}=i[t];for(;t<s-1&&a>i[t+1].from-500;)a=i[++t].to;e.highlight(r.state,o,a,(e,t)=>{let i=r.state.selection.ranges.some(r=>r.from==e&&r.to==t);n.add(e,t,i?bZ:bY)})}return n.finish()}},{decorations:e=>e.decorations});function bK(e){return t=>{let r=t.state.field(bG,!1);return r&&r.query.spec.valid?e(t,r):b9(t)}}let b0=bK((e,{query:t})=>{let{to:r}=e.state.selection.main,n=t.nextMatch(e.state,r,r);if(!n)return!1;let i=eB.single(n.from,n.to),s=e.state.facet(bz);return e.dispatch({selection:i,effects:[vs(e,n),s.scrollToMatch(i.main,e)],userEvent:"select.search"}),b8(e),!0}),b1=bK((e,{query:t})=>{let{state:r}=e,{from:n}=r.selection.main,i=t.prevMatch(r,n,n);if(!i)return!1;let s=eB.single(i.from,i.to),o=e.state.facet(bz);return e.dispatch({selection:s,effects:[vs(e,i),o.scrollToMatch(s.main,e)],userEvent:"select.search"}),b8(e),!0}),b2=bK((e,{query:t})=>{let r=t.matchAll(e.state,1e3);return!!r&&!!r.length&&(e.dispatch({selection:eB.create(r.map(e=>eB.range(e.from,e.to))),userEvent:"select.search.matches"}),!0)}),b4=bK((e,{query:t})=>{let{state:r}=e,{from:n,to:i}=r.selection.main;if(r.readOnly)return!1;let s=t.nextMatch(r,n,n);if(!s)return!1;let o=s,a=[],l,c,h=[];if(o.from==n&&o.to==i&&(c=r.toText(t.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=t.nextMatch(r,o.from,o.to),h.push(fq.announce.of(r.phrase("replaced match on line $",r.doc.lineAt(n).number)+"."))),o){let t=0==a.length||a[0].from>=s.to?0:s.to-s.from-c.length;l=eB.single(o.from-t,o.to-t),h.push(vs(e,o)),h.push(r.facet(bz).scrollToMatch(l.main,e))}return e.dispatch({changes:a,selection:l,effects:h,userEvent:"input.replace"}),!0}),b5=bK((e,{query:t})=>{if(e.state.readOnly)return!1;let r=t.matchAll(e.state,1e9).map(e=>{let{from:r,to:n}=e;return{from:r,to:n,insert:t.getReplacement(e)}});if(!r.length)return!1;let n=e.state.phrase("replaced $ matches",r.length)+".";return e.dispatch({changes:r,effects:fq.announce.of(n),userEvent:"input.replace.all"}),!0});function b3(e){return e.state.facet(bz).createPanel(e)}function b6(e,t){var r,n,i,s,o;let a=e.selection.main,l=a.empty||a.to>a.from+100?"":e.sliceDoc(a.from,a.to);if(t&&!l)return t;let c=e.facet(bz);return new bL({search:(null!==(r=null==t?void 0:t.literal)&&void 0!==r?r:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:null!==(n=null==t?void 0:t.caseSensitive)&&void 0!==n?n:c.caseSensitive,literal:null!==(i=null==t?void 0:t.literal)&&void 0!==i?i:c.literal,regexp:null!==(s=null==t?void 0:t.regexp)&&void 0!==s?s:c.regexp,wholeWord:null!==(o=null==t?void 0:t.wholeWord)&&void 0!==o?o:c.wholeWord})}function b7(e){let t=pq(e,b3);return t&&t.dom.querySelector("[main-field]")}function b8(e){let t=b7(e);t&&t==e.root.activeElement&&t.select()}let b9=e=>{let t=e.state.field(bG,!1);if(t&&t.panel){let r=b7(e);if(r&&r!=e.root.activeElement){let n=b6(e.state,t.query.spec);n.valid&&e.dispatch({effects:bW.of(n)}),r.focus(),r.select()}}else e.dispatch({effects:[bU.of(!0),t?bW.of(b6(e.state,t.query.spec)):to.appendConfig.of(va)]});return!0},ve=e=>{let t=e.state.field(bG,!1);if(!t||!t.panel)return!1;let r=pq(e,b3);return r&&r.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:bU.of(!1)}),!0},vt=[{key:"Mod-f",run:b9,scope:"editor search-panel"},{key:"F3",run:b0,shift:b1,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:b0,shift:b1,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:ve,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:e,dispatch:t})=>{let r=e.selection;if(r.ranges.length>1||r.main.empty)return!1;let{from:n,to:i}=r.main,s=[],o=0;for(let t=new by(e.doc,e.sliceDoc(n,i));!t.next().done;){if(s.length>1e3)return!1;t.value.from==n&&(o=s.length),s.push(eB.range(t.value.from,t.value.to))}return t(e.update({selection:eB.create(s,o),userEvent:"select.search.matches"})),!0}},{key:"Mod-Alt-g",run:e=>{let t=pq(e,bC);if(!t){let r=[bT.of(!0)];null==e.state.field(bA,!1)&&r.push(to.appendConfig.of([bA,bM])),e.dispatch({effects:r}),t=pq(e,bC)}return t&&t.dom.querySelector("input").select(),!0}},{key:"Mod-d",run:({state:e,dispatch:t})=>{let{ranges:r}=e.selection;if(r.some(e=>e.from===e.to))return bI({state:e,dispatch:t});let n=e.sliceDoc(r[0].from,r[0].to);if(e.selection.ranges.some(t=>e.sliceDoc(t.from,t.to)!=n))return!1;let i=function(e,t){let{main:r,ranges:n}=e.selection,i=e.wordAt(r.head),s=i&&i.from==r.from&&i.to==r.to;for(let r=!1,i=new by(e.doc,t,n[n.length-1].to);;)if(i.next(),i.done){if(r)return null;i=new by(e.doc,t,0,Math.max(0,n[n.length-1].from-1)),r=!0}else{if(r&&n.some(e=>e.from==i.value.from))continue;if(s){let t=e.wordAt(i.value.from);if(!t||t.from!=i.value.from||t.to!=i.value.to)continue}return i.value}}(e,n);return!!i&&(t(e.update({selection:e.selection.addRange(eB.range(i.from,i.to),!1),effects:fq.scrollIntoView(i.to)})),!0)},preventDefault:!0}];class vr{constructor(e){this.view=e;let t=this.query=e.state.field(bG).query.spec;function r(e,t,r){return bm("button",{class:"cm-button",name:e,onclick:t,type:"button"},r)}this.commit=this.commit.bind(this),this.searchField=bm("input",{value:t.search,placeholder:vn(e,"Find"),"aria-label":vn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=bm("input",{value:t.replace,placeholder:vn(e,"Replace"),"aria-label":vn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=bm("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=bm("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=bm("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit}),this.dom=bm("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,r("next",()=>b0(e),[vn(e,"next")]),r("prev",()=>b1(e),[vn(e,"previous")]),r("select",()=>b2(e),[vn(e,"all")]),bm("label",null,[this.caseField,vn(e,"match case")]),bm("label",null,[this.reField,vn(e,"regexp")]),bm("label",null,[this.wordField,vn(e,"by word")]),...e.state.readOnly?[]:[bm("br"),this.replaceField,r("replace",()=>b4(e),[vn(e,"replace")]),r("replaceAll",()=>b5(e),[vn(e,"replace all")])],bm("button",{name:"close",onclick:()=>ve(e),"aria-label":vn(e,"close"),type:"button"},["\xd7"])])}commit(){let e=new bL({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:bW.of(e)}))}keydown(e){var t;fJ(fX((t=this.view).state),e,t,"search-panel")?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?b1:b0)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),b4(this.view))}update(e){for(let t of e.transactions)for(let e of t.effects)e.is(bW)&&!e.value.eq(this.query)&&this.setQuery(e.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(bz).top}}function vn(e,t){return e.state.phrase(t)}let vi=/[\s\.,:;?!]/;function vs(e,{from:t,to:r}){let n=e.state.doc.lineAt(t),i=e.state.doc.lineAt(r).to,s=Math.max(n.from,t-30),o=Math.min(i,r+30),a=e.state.sliceDoc(s,o);if(s!=n.from){for(let e=0;e<30;e++)if(!vi.test(a[e+1])&&vi.test(a[e])){a=a.slice(e);break}}if(o!=i){for(let e=a.length-1;e>a.length-30;e--)if(!vi.test(a[e-1])&&vi.test(a[e])){a=a.slice(0,e);break}}return fq.announce.of(`${e.state.phrase("current match")}. ${a} ${e.state.phrase("on line")} ${n.number}.`)}let vo=fq.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),va=[bG,eK.low(bJ),vo];class vl{constructor(e,t,r,n){this.state=e,this.pos=t,this.explicit=r,this.view=n,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=m8(this.state).resolveInner(this.pos,-1);for(;t&&0>e.indexOf(t.name);)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),n=t.text.slice(r-t.from,this.pos-t.from),i=n.search(vp(e,!1));return i<0?null:{from:r+i,to:this.pos,text:n.slice(i)}}get aborted(){return null==this.abortListeners}addEventListener(e,t,r){"abort"==e&&this.abortListeners&&(this.abortListeners.push(t),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function vc(e){let t=Object.keys(e).join(""),r=/\w/.test(t);return r&&(t=t.replace(/\w/g,"")),`[${r?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function vh(e){let t=e.map(e=>"string"==typeof e?{label:e}:e),[r,n]=t.every(e=>/^\w+$/.test(e.label))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),r=Object.create(null);for(let{label:n}of e){t[n[0]]=!0;for(let e=1;e<n.length;e++)r[n[e]]=!0}let n=vc(t)+vc(r)+"*$";return[RegExp("^"+n),new RegExp(n)]}(t);return e=>{let i=e.matchBefore(n);return i||e.explicit?{from:i?i.from:e.pos,options:t,validFor:r}:null}}function vu(e,t){return r=>{for(let t=m8(r.state).resolveInner(r.pos,-1);t;t=t.parent){if(e.indexOf(t.name)>-1)return null;if(t.type.isTop)break}return t(r)}}class vd{constructor(e,t,r,n){this.completion=e,this.source=t,this.match=r,this.score=n}}function vf(e){return e.selection.main.from}function vp(e,t){var r;let{source:n}=e,i=t&&"^"!=n[0],s="$"!=n[n.length-1];return i||s?RegExp(`${i?"^":""}(?:${n})${s?"$":""}`,null!==(r=e.flags)&&void 0!==r?r:e.ignoreCase?"i":""):e}let vm=tn.define(),vg=new WeakMap;function vy(e){if(!Array.isArray(e))return e;let t=vg.get(e);return t||vg.set(e,t=vh(e)),t}let vb=to.define(),vv=to.define();class vx{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let r=eA(e,t),n=eE(r);this.chars.push(r);let i=e.slice(t,t+n),s=i.toUpperCase();this.folded.push(eA(s==i?i.toLowerCase():s,0)),t+=n}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(0==this.pattern.length)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:n,precise:i,byWord:s}=this;if(1==t.length){let n=eA(e,0),i=eE(n),s=i==e.length?0:-100;if(n!=t[0]){if(n!=r[0])return null;s+=-200}return this.ret(s,[0,i])}let o=e.indexOf(this.pattern);if(0==o)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,l=0;if(o<0){for(let i=0,s=Math.min(e.length,200);i<s&&l<a;){let s=eA(e,i);(s==t[l]||s==r[l])&&(n[l++]=i),i+=eE(s)}if(l<a)return null}let c=0,h=0,u=!1,d=0,f=-1,p=-1,m=/[a-z]/.test(e),g=!0;for(let n=0,l=Math.min(e.length,200),y=0;n<l&&h<a;){let l=eA(e,n);o<0&&(c<a&&l==t[c]&&(i[c++]=n),d<a&&(l==t[d]||l==r[d]?(0==d&&(f=n),p=n+1,d++):d=0));let b,v=l<255?l>=48&&l<=57||l>=97&&l<=122?2:+(l>=65&&l<=90):(b=eM(l))!=b.toLowerCase()?1:2*(b!=b.toUpperCase());(!n||1==v&&m||0==y&&0!=v)&&(t[h]==l||r[h]==l&&(u=!0)?s[h++]=n:s.length&&(g=!1)),y=v,n+=eE(l)}return h==a&&0==s[0]&&g?this.result(-100+(u?-200:0),s,e):d==a&&0==f?this.ret(-200-e.length+(p==e.length?0:-100),[0,p]):o>-1?this.ret(-700-e.length,[o,o+this.pattern.length]):d==a?this.ret(-900-e.length,[f,p]):h==a?this.result(-100+(u?-200:0)+-700+(g?0:-1100),s,e):2==t.length?null:this.result((n[0]?-700:0)+-200+-1100,n,e)}result(e,t,r){let n=[],i=0;for(let e of t){let t=e+(this.astral?eE(eA(r,e)):1);i&&n[i-1]==e?n[i-1]=t:(n[i++]=e,n[i++]=t)}return this.ret(e-r.length,n)}}class vw{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),r=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return null==r?null:(this.matched=[0,t.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}let vk=eV.define({combine:e=>tm(e,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:vS,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>r=>vO(e(r),t(r)),optionClass:(e,t)=>r=>vO(e(r),t(r)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})});function vO(e,t){return e?t?e+" "+t:e:t}function vS(e,t,r,n,i,s){let o=e.textDirection==uz.RTL,a=o,l=!1,c="top",h,u,d=t.left-i.left,f=i.right-t.right,p=n.right-n.left,m=n.bottom-n.top;if(a&&d<Math.min(p,f)?a=!1:!a&&f<Math.min(p,d)&&(a=!0),p<=(a?d:f))h=Math.max(i.top,Math.min(r.top,i.bottom-m))-t.top,u=Math.min(400,a?d:f);else{l=!0,u=Math.min(400,(o?t.right:i.right-t.left)-30);let e=i.bottom-t.bottom;e>=m||e>t.top?h=r.bottom-t.top:(c="bottom",h=t.bottom-r.top)}let g=(t.bottom-t.top)/s.offsetHeight,y=(t.right-t.left)/s.offsetWidth;return{style:`${c}: ${h/g}px; max-width: ${u/y}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function vC(e,t,r){if(e<=r)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let e=Math.floor(t/r);return{from:e*r,to:(e+1)*r}}let n=Math.floor((e-t)/r);return{from:e-(n+1)*r,to:e-n*r}}class vT{constructor(e,t,r){this.view=e,this.stateField=t,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:e=>this.placeInfo(e),key:this},this.space=null,this.currentClass="";let n=e.state.field(t),{options:i,selected:s}=n.open,o=e.state.facet(vk);this.optionContent=function(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map(e=>"cm-completionIcon-"+e)),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,r,n){let i=document.createElement("span");i.className="cm-completionLabel";let s=e.displayLabel||e.label,o=0;for(let e=0;e<n.length;){let t=n[e++],r=n[e++];t>o&&i.appendChild(document.createTextNode(s.slice(o,t)));let a=i.appendChild(document.createElement("span"));a.appendChild(document.createTextNode(s.slice(t,r))),a.className="cm-completionMatchedText",o=r}return o<s.length&&i.appendChild(document.createTextNode(s.slice(o))),i},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort((e,t)=>e.position-t.position).map(e=>e.render)}(o),this.optionClass=o.optionClass,this.tooltipClass=o.tooltipClass,this.range=vC(i.length,s,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",r=>{let{options:n}=e.state.field(t).open;for(let t=r.target,i;t&&t!=this.dom;t=t.parentNode)if("LI"==t.nodeName&&(i=/-(\d+)$/.exec(t.id))&&+i[1]<n.length){this.applyCompletion(e,n[+i[1]]),r.preventDefault();return}}),this.dom.addEventListener("focusout",t=>{let r=e.state.field(this.stateField,!1);r&&r.tooltip&&e.state.facet(vk).closeOnBlur&&t.relatedTarget!=e.contentDOM&&e.dispatch({effects:vv.of(null)})}),this.showOptions(i,n.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let r=e.state.field(this.stateField),n=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=n){let{options:i,selected:s,disabled:o}=r.open;n.open&&n.open.options==i||(this.range=vC(i.length,s,e.state.facet(vk).maxRenderedOptions),this.showOptions(i,r.id)),this.updateSel(),o!=(null===(t=n.open)||void 0===t?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!o)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let e of this.currentClass.split(" "))e&&this.dom.classList.remove(e);for(let e of t.split(" "))e&&this.dom.classList.add(e);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=vC(t.options.length,t.selected,this.view.state.facet(vk).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:n}=r;if(!n)return;let i="string"==typeof n?document.createTextNode(n):n(r);if(!i)return;"then"in i?i.then(t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t,r)}).catch(e=>dr(this.view.state,e,"completion info")):this.addInfoPane(i,r)}}addInfoPane(e,t){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",null!=e.nodeType)r.appendChild(e),this.infoDestroy=null;else{let{dom:t,destroy:n}=e;r.appendChild(t),this.infoDestroy=n||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){var t,r;let n,i,s,o=null;for(let t=this.list.firstChild,r=this.range.from;t;t=t.nextSibling,r++)"LI"==t.nodeName&&t.id?r==e?t.hasAttribute("aria-selected")||(t.setAttribute("aria-selected","true"),o=t):t.hasAttribute("aria-selected")&&t.removeAttribute("aria-selected"):r--;return o&&(t=this.list,r=o,n=t.getBoundingClientRect(),i=r.getBoundingClientRect(),s=n.height/t.offsetHeight,i.top<n.top?t.scrollTop-=(n.top-i.top)/s:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/s)),o}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),n=e.getBoundingClientRect(),i=this.space;if(!i){let e=this.dom.ownerDocument.documentElement;i={left:0,top:0,right:e.clientWidth,bottom:e.clientHeight}}return n.top>Math.min(i.bottom,t.bottom)-10||n.bottom<Math.max(i.top,t.top)+10?null:this.view.state.facet(vk).positionInfo(this.view,t,n,r,i,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,r){let n=document.createElement("ul");n.id=t,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions")),n.addEventListener("mousedown",e=>{e.target==n&&e.preventDefault()});let i=null;for(let s=r.from;s<r.to;s++){let{completion:o,match:a}=e[s],{section:l}=o;if(l){let e="string"==typeof l?l:l.name;e!=i&&(s>r.from||0==r.from)&&((i=e,"string"!=typeof l&&l.header)?n.appendChild(l.header(l)):n.appendChild(document.createElement("completion-section")).textContent=e)}let c=n.appendChild(document.createElement("li"));c.id=t+"-"+s,c.setAttribute("role","option");let h=this.optionClass(o);for(let e of(h&&(c.className=h),this.optionContent)){let t=e(o,this.view.state,this.view,a);t&&c.appendChild(t)}}return r.from&&n.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&n.classList.add("cm-completionListIncompleteBottom"),n}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function vA(e){return 100*(e.boost||0)+10*!!e.apply+5*!!e.info+ +!!e.type}class vM{constructor(e,t,r,n,i,s){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=n,this.selected=i,this.disabled=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new vM(this.options,vj(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,r,n,i,s){if(n&&!s&&e.some(e=>e.isPending))return n.setDisabled();let o=function(e,t){let r=[],n=null,i=e=>{r.push(e);let{section:t}=e.completion;if(t){n||(n=[]);let e="string"==typeof t?t:t.name;n.some(t=>t.name==e)||n.push("string"==typeof t?{name:e}:t)}},s=t.facet(vk);for(let n of e)if(n.hasResult()){let e=n.result.getMatch;if(!1===n.result.filter)for(let t of n.result.options)i(new vd(t,n.source,e?e(t):[],1e9-r.length));else{let r=t.sliceDoc(n.from,n.to),o,a=s.filterStrict?new vw(r):new vx(r);for(let t of n.result.options)if(o=a.match(t.label)){let r=t.displayLabel?e?e(t,o.matched):[]:o.matched;i(new vd(t,n.source,r,o.score+(t.boost||0)))}}}if(n){let e=Object.create(null),t=0;for(let r of n.sort((e,t)=>{var r,n;return(null!==(r=e.rank)&&void 0!==r?r:1e9)-(null!==(n=t.rank)&&void 0!==n?n:1e9)||(e.name<t.name?-1:1)}))t-=1e5,e[r.name]=t;for(let t of r){let{section:r}=t.completion;r&&(t.score+=e["string"==typeof r?r:r.name])}}let o=[],a=null,l=s.compareCompletions;for(let e of r.sort((e,t)=>t.score-e.score||l(e.completion,t.completion))){let t=e.completion;a&&a.label==t.label&&a.detail==t.detail&&(null==a.type||null==t.type||a.type==t.type)&&a.apply==t.apply&&a.boost==t.boost?vA(e.completion)>vA(a)&&(o[o.length-1]=e):o.push(e),a=e.completion}return o}(e,t);if(!o.length)return n&&e.some(e=>e.isPending)?n.setDisabled():null;let a=t.facet(vk).selectOnOpen?0:-1;if(n&&n.selected!=a&&-1!=n.selected){let e=n.options[n.selected].completion;for(let t=0;t<o.length;t++)if(o[t].completion==e){a=t;break}}return new vM(o,vj(r,a),{pos:e.reduce((e,t)=>t.hasResult()?Math.min(e,t.from):e,1e8),create:vB,above:i.aboveCursor},n?n.timestamp:Date.now(),a,!1)}map(e){return new vM(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new vM(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class vE{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new vE(vD,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,r=t.facet(vk),n=(r.override||t.languageDataAt("autocomplete",vf(t)).map(vy)).map(t=>(this.active.find(e=>e.source==t)||new vP(t,+!!this.active.some(e=>0!=e.state))).update(e,r));n.length==this.active.length&&n.every((e,t)=>e==this.active[t])&&(n=this.active);let i=this.open,s=e.effects.some(e=>e.is(vz));for(let o of(i&&e.docChanged&&(i=i.map(e.changes)),e.selection||n.some(t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to))||!function(e,t){if(e==t)return!0;for(let r=0,n=0;;){for(;r<e.length&&!e[r].hasResult();)r++;for(;n<t.length&&!t[n].hasResult();)n++;let i=r==e.length,s=n==t.length;if(i||s)return i==s;if(e[r++].result!=t[n++].result)return!1}}(n,this.active)||s?i=vM.build(n,t,this.id,i,r,s):i&&i.disabled&&!n.some(e=>e.isPending)&&(i=null),!i&&n.every(e=>!e.isPending)&&n.some(e=>e.hasResult())&&(n=n.map(e=>e.hasResult()?new vP(e.source,0):e)),e.effects))o.is(vL)&&(i=i&&i.setSelected(o.value,this.id));return n==this.active&&i==this.open?this:new vE(n,this.id,i)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?vN:v_}}let vN={"aria-autocomplete":"list"},v_={};function vj(e,t){let r={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(r["aria-activedescendant"]=e+"-"+t),r}let vD=[];function vR(e,t){if(e.isUserEvent("input.complete")){let r=e.annotation(vm);if(r&&t.activateOnCompletion(r))return 12}let r=e.isUserEvent("input.type");return r&&t.activateOnTyping?5:r?1:e.isUserEvent("delete.backward")?2:e.selection?8:16*!!e.docChanged}class vP{constructor(e,t,r=!1){this.source=e,this.state=t,this.explicit=r}hasResult(){return!1}get isPending(){return 1==this.state}update(e,t){let r=vR(e,t),n=this;for(let t of((8&r||16&r&&this.touches(e))&&(n=new vP(n.source,0)),4&r&&0==n.state&&(n=new vP(this.source,1)),n=n.updateFor(e,r),e.effects))if(t.is(vb))n=new vP(n.source,1,t.value);else if(t.is(vv))n=new vP(n.source,0);else if(t.is(vz))for(let e of t.value)e.source==n.source&&(n=e);return n}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(vf(e.state))}}class vI extends vP{constructor(e,t,r,n,i,s){super(e,3,t),this.limit=r,this.result=n,this.from=i,this.to=s}hasResult(){return!0}updateFor(e,t){var r;if(!(3&t))return this.map(e.changes);let n=this.result;n.map&&!e.changes.empty&&(n=n.map(n,e.changes));let i=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),o=vf(e.state);if(o>s||!n||2&t&&(vf(e.startState)==this.from||o<this.limit))return new vP(this.source,4&t?1:0);let a=e.changes.mapPos(this.limit);return!function(e,t,r,n){if(!e)return!1;let i=t.sliceDoc(r,n);return"function"==typeof e?e(i,r,n,t):vp(e,!0).test(i)}(n.validFor,e.state,i,s)?n.update&&(n=n.update(n,i,s,new vl(e.state,o,!1)))?new vI(this.source,this.explicit,a,n,n.from,null!==(r=n.to)&&void 0!==r?r:vf(e.state)):new vP(this.source,1,this.explicit):new vI(this.source,this.explicit,a,n,i,s)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new vI(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new vP(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}let vz=to.define({map:(e,t)=>e.map(e=>e.map(t))}),vL=to.define(),vq=eY.define({create:()=>vE.start(),update:(e,t)=>e.update(t),provide:e=>[p_.from(e,e=>e.tooltip),fq.contentAttributes.from(e,e=>e.attrs)]});function v$(e,t){let r=t.completion.apply||t.completion.label,n=e.state.field(vq).active.find(e=>e.source==t.source);return n instanceof vI&&("string"==typeof r?e.dispatch(Object.assign(Object.assign({},function(e,t,r,n){let{main:i}=e.selection,s=r-i.from,o=n-i.from;return Object.assign(Object.assign({},e.changeByRange(a=>{if(a!=i&&r!=n&&e.sliceDoc(a.from+s,a.from+o)!=e.sliceDoc(r,n))return{range:a};let l=e.toText(t);return{changes:{from:a.from+s,to:n==i.from?a.to:a.from+o,insert:l},range:eB.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}(e.state,r,n.from,n.to)),{annotations:vm.of(t.completion)})):r(e,t.completion,n.from,n.to),!0)}let vB=e=>new vT(e,vq,v$);function vF(e,t="option"){return r=>{let n=r.state.field(vq,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<r.state.facet(vk).interactionDelay)return!1;let i=1,s;"page"==t&&(s=pI(r,n.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=n.open.options,a=n.open.selected>-1?n.open.selected+i*(e?1:-1):e?0:o-1;return a<0?a="page"==t?0:o-1:a>=o&&(a="page"==t?o-1:0),r.dispatch({effects:vL.of(a)}),!0}}let vQ=e=>!!e.state.field(vq,!1)&&(e.dispatch({effects:vb.of(!0)}),!0);class vV{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}let vH=da.fromClass(class{constructor(e){for(let t of(this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0,e.state.field(vq).active))t.isPending&&this.startQuery(t)}update(e){let t=e.state.field(vq),r=e.state.facet(vk);if(!e.selectionSet&&!e.docChanged&&e.startState.field(vq)==t)return;let n=e.transactions.some(e=>{let t=vR(e,r);return 8&t||(e.selection||e.docChanged)&&!(3&t)});for(let t=0;t<this.running.length;t++){let r=this.running[t];if(n||r.context.abortOnDocChange&&e.docChanged||r.updates.length+e.transactions.length>50&&Date.now()-r.time>1e3){for(let e of r.context.abortListeners)try{e()}catch(e){dr(this.view.state,e)}r.context.abortListeners=null,this.running.splice(t--,1)}else r.updates.push(...e.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),e.transactions.some(e=>e.effects.some(e=>e.is(vb)))&&(this.pendingStart=!0);let i=this.pendingStart?50:r.activateOnTypingDelay;if(this.debounceUpdate=t.active.some(e=>e.isPending&&!this.running.some(t=>t.active.source==e.source))?setTimeout(()=>this.startUpdate(),i):-1,0!=this.composing)for(let t of e.transactions)t.isUserEvent("input.type")?this.composing=2:2==this.composing&&t.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:e}=this.view,t=e.field(vq);for(let e of t.active)e.isPending&&!this.running.some(t=>t.active.source==e.source)&&this.startQuery(e);this.running.length&&t.open&&t.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(vk).updateSyncTime))}startQuery(e){let{state:t}=this.view,r=vf(t),n=new vl(t,r,e.explicit,this.view),i=new vV(e,n);this.running.push(i),Promise.resolve(e.source(n)).then(e=>{i.context.aborted||(i.done=e||null,this.scheduleAccept())},e=>{this.view.dispatch({effects:vv.of(null)}),dr(this.view.state,e)})}scheduleAccept(){this.running.every(e=>void 0!==e.done)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(vk).updateSyncTime))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],r=this.view.state.facet(vk),n=this.view.state.field(vq);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(void 0===s.done)continue;if(this.running.splice(i--,1),s.done){let n=vf(s.updates.length?s.updates[0].startState:this.view.state),i=Math.min(n,s.done.from+ +!s.active.explicit),o=new vI(s.active.source,s.active.explicit,i,s.done,s.done.from,null!==(e=s.done.to)&&void 0!==e?e:n);for(let e of s.updates)o=o.update(e,r);if(o.hasResult()){t.push(o);continue}}let o=n.active.find(e=>e.source==s.active.source);if(o&&o.isPending){if(null==s.done){let e=new vP(s.active.source,0);for(let t of s.updates)e=e.update(t,r);e.isPending||t.push(e)}else this.startQuery(o)}}(t.length||n.open&&n.open.disabled)&&this.view.dispatch({effects:vz.of(t)})}},{eventHandlers:{blur(e){let t=this.view.state.field(vq,!1);if(t&&t.tooltip&&this.view.state.facet(vk).closeOnBlur){let r=t.open&&pI(this.view,t.open.tooltip);r&&r.dom.contains(e.relatedTarget)||setTimeout(()=>this.view.dispatch({effects:vv.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout(()=>this.view.dispatch({effects:vb.of(!1)}),20),this.composing=0}}}),vW="object"==typeof navigator&&/Win/.test(navigator.platform),vU=eK.highest(fq.domEventHandlers({keydown(e,t){let r=t.state.field(vq,!1);if(!r||!r.open||r.open.disabled||r.open.selected<0||e.key.length>1||e.ctrlKey&&!(vW&&e.altKey)||e.metaKey)return!1;let n=r.open.options[r.open.selected],i=r.active.find(e=>e.source==n.source),s=n.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(e.key)>-1&&v$(t,n),!1}})),vG=fq.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xb7\xb7\xb7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"'\uD835\uDC65'"}},".cm-completionIcon-constant":{"&:after":{content:"'\uD835\uDC36'"}},".cm-completionIcon-type":{"&:after":{content:"'\uD835\uDC61'"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"'\uD83D\uDD11'"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class vX{constructor(e,t,r,n){this.field=e,this.line=t,this.from=r,this.to=n}}class vY{constructor(e,t,r){this.field=e,this.from=t,this.to=r}map(e){let t=e.mapPos(this.from,-1,e_.TrackDel),r=e.mapPos(this.to,1,e_.TrackDel);return null==t||null==r?null:new vY(this.field,t,r)}}class vZ{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let r=[],n=[t],i=e.doc.lineAt(t),s=/^\s*/.exec(i.text)[0];for(let i of this.lines){if(r.length){let r=s,o=/^\t*/.exec(i)[0].length;for(let t=0;t<o;t++)r+=e.facet(gh);n.push(t+r.length-o),i=r+i.slice(o)}r.push(i),t+=i.length+1}return{text:r,ranges:this.fieldPositions.map(e=>new vY(e.field,n[e.line]+e.from,n[e.line]+e.to))}}static parse(e){let t=[],r=[],n=[],i;for(let s of e.split(/\r\n?|\n/)){for(;i=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(s);){let e=i[1]?+i[1]:null,o=i[2]||i[3]||"",a=-1,l=o.replace(/\\[{}]/g,e=>e[1]);for(let r=0;r<t.length;r++)(null!=e?t[r].seq==e:l&&t[r].name==l)&&(a=r);if(a<0){let r=0;for(;r<t.length&&(null==e||null!=t[r].seq&&t[r].seq<e);)r++;for(let i of(t.splice(r,0,{seq:e,name:l}),a=r,n))i.field>=a&&i.field++}n.push(new vX(a,r.length,i.index,i.index+l.length)),s=s.slice(0,i.index)+o+s.slice(i.index+i[0].length)}s=s.replace(/\\([{}])/g,(e,t,i)=>{for(let e of n)e.line==r.length&&e.from>i&&(e.from--,e.to--);return t}),r.push(s)}return new vZ(r,n)}}let vJ=uC.widget({widget:new class extends uO{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),vK=uC.mark({class:"cm-snippetField"});class v0{constructor(e,t){this.ranges=e,this.active=t,this.deco=uC.set(e.map(e=>(e.from==e.to?vJ:vK).range(e.from,e.to)))}map(e){let t=[];for(let r of this.ranges){let n=r.map(e);if(!n)return null;t.push(n)}return new v0(t,this.active)}selectionInsideField(e){return e.ranges.every(e=>this.ranges.some(t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))}}let v1=to.define({map:(e,t)=>e&&e.map(t)}),v2=to.define(),v4=eY.define({create:()=>null,update(e,t){for(let r of t.effects){if(r.is(v1))return r.value;if(r.is(v2)&&e)return new v0(e.ranges,r.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>fq.decorations.from(e,e=>e?e.deco:uC.none)});function v5(e,t){return eB.create(e.filter(e=>e.field==t).map(e=>eB.range(e.from,e.to)))}function v3(e){return({state:t,dispatch:r})=>{let n=t.field(v4,!1);if(!n||e<0&&0==n.active)return!1;let i=n.active+e,s=e>0&&!n.ranges.some(t=>t.field==i+e);return r(t.update({selection:v5(n.ranges,i),effects:v1.of(s?null:new v0(n.ranges,i)),scrollIntoView:!0})),!0}}let v6=[{key:"Tab",run:v3(1),shift:v3(-1)},{key:"Escape",run:({state:e,dispatch:t})=>!!e.field(v4,!1)&&(t(e.update({effects:v1.of(null)})),!0)}],v7=eV.define({combine:e=>e.length?e[0]:v6}),v8=eK.highest(fU.compute([v7],e=>e.facet(v7)));function v9(e,t){let r;return Object.assign(Object.assign({},t),{apply:(r=vZ.parse(e),(e,t,n,i)=>{let{text:s,ranges:o}=r.instantiate(e.state,n),{main:a}=e.state.selection,l={changes:{from:n,to:i==a.from?a.to:i,insert:ey.of(s)},scrollIntoView:!0,annotations:t?[vm.of(t),ta.userEvent.of("input.complete")]:void 0};if(o.length&&(l.selection=v5(o,0)),o.some(e=>e.field>0)){let t=new v0(o,0),r=l.effects=[v1.of(t)];void 0===e.state.field(v4,!1)&&r.push(to.appendConfig.of([v4,v8,xe,vG]))}e.dispatch(e.state.update(l))})})}let xe=fq.domEventHandlers({mousedown(e,t){let r=t.state.field(v4,!1),n;if(!r||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;let i=r.ranges.find(e=>e.from<=n&&e.to>=n);return!!i&&i.field!=r.active&&(t.dispatch({selection:v5(r.ranges,i.field),effects:v1.of(r.ranges.some(e=>e.field>i.field)?new v0(r.ranges,i.field):null),scrollIntoView:!0}),!0)}}),xt={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},xr=to.define({map:(e,t)=>t.mapPos(e,-1,e_.TrackAfter)??void 0}),xn=new class extends tg{};xn.startSide=1,xn.endSide=-1;let xi=eY.define({create:()=>tx.empty,update(e,t){if(e=e.map(t.changes),t.selection){let r=t.state.doc.lineAt(t.selection.main.head);e=e.update({filter:e=>e>=r.from&&e<=r.to})}for(let r of t.effects)r.is(xr)&&(e=e.update({add:[xn.range(r.value,r.value+1)]}));return e}}),xs="()[]{}<>\xab\xbb\xbb\xab";function xo(e){for(let t=0;t<xs.length;t+=2)if(xs.charCodeAt(t)==e)return xs.charAt(t+1);return eM(e<128?e:e+1)}function xa(e,t){return e.languageDataAt("closeBrackets",t)[0]||xt}let xl="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),xc=fq.inputHandler.of((e,t,r,n)=>{if((xl?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let i=e.state.selection.main;if(n.length>2||2==n.length&&1==eE(eA(n,0))||t!=i.from||r!=i.to)return!1;let s=function(e,t){let r=xa(e,e.selection.main.head),n=r.brackets||xt.brackets;for(let i of n){let s=xo(eA(i,0));if(t==i)return s==i?function(e,t,r,n){let i=n.stringPrefixes||xt.stringPrefixes,s=null,o=e.changeByRange(n=>{if(!n.empty)return{changes:[{insert:t,from:n.from},{insert:t,from:n.to}],effects:xr.of(n.to+t.length),range:eB.range(n.anchor+t.length,n.head+t.length)};let o=n.head,a=xd(e.doc,o),l;if(a==t){if(xf(e,o))return{changes:{insert:t+t,from:o},effects:xr.of(o+t.length),range:eB.cursor(o+t.length)};if(xu(e,o)){let n=r&&e.sliceDoc(o,o+3*t.length)==t+t+t?t+t+t:t;return{changes:{from:o,to:o+n.length,insert:n},range:eB.cursor(o+n.length)}}}else{if(r&&e.sliceDoc(o-2*t.length,o)==t+t&&(l=xp(e,o-2*t.length,i))>-1&&xf(e,l))return{changes:{insert:t+t+t+t,from:o},effects:xr.of(o+t.length),range:eB.cursor(o+t.length)};if(e.charCategorizer(o)(a)!=td.Word&&xp(e,o,i)>-1&&!function(e,t,r,n){let i=m8(e).resolveInner(t,-1),s=n.reduce((e,t)=>Math.max(e,t.length),0);for(let o=0;o<5;o++){let o=e.sliceDoc(i.from,Math.min(i.to,i.from+r.length+s)),a=o.indexOf(r);if(!a||a>-1&&n.indexOf(o.slice(0,a))>-1){let t=i.firstChild;for(;t&&t.from==i.from&&t.to-t.from>r.length+a;){if(e.sliceDoc(t.to-r.length,t.to)==r)return!1;t=t.firstChild}return!0}let l=i.to==t&&i.parent;if(!l)break;i=l}return!1}(e,o,t,i))return{changes:{insert:t+t,from:o},effects:xr.of(o+t.length),range:eB.cursor(o+t.length)}}return{range:s=n}});return s?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}(e,i,n.indexOf(i+i+i)>-1,r):function(e,t,r,n){let i=null,s=e.changeByRange(s=>{if(!s.empty)return{changes:[{insert:t,from:s.from},{insert:r,from:s.to}],effects:xr.of(s.to+t.length),range:eB.range(s.anchor+t.length,s.head+t.length)};let o=xd(e.doc,s.head);return!o||/\s/.test(o)||n.indexOf(o)>-1?{changes:{insert:t+r,from:s.head},effects:xr.of(s.head+t.length),range:eB.cursor(s.head+t.length)}:{range:i=s}});return i?null:e.update(s,{scrollIntoView:!0,userEvent:"input.type"})}(e,i,s,r.before||xt.before);if(t==s&&xu(e,e.selection.main.from))return function(e,t,r){let n=null,i=e.changeByRange(t=>t.empty&&xd(e.doc,t.head)==r?{changes:{from:t.head,to:t.head+r.length,insert:r},range:eB.cursor(t.head+r.length)}:n={range:t});return n?null:e.update(i,{scrollIntoView:!0,userEvent:"input.type"})}(e,0,s)}return null}(e.state,n);return!!s&&(e.dispatch(s),!0)}),xh=[{key:"Backspace",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=xa(e,e.selection.main.head).brackets||xt.brackets,n=null,i=e.changeByRange(t=>{if(t.empty){let n=function(e,t){let r=e.sliceString(t-2,t);return eE(eA(r,0))==r.length?r:r.slice(1)}(e.doc,t.head);for(let i of r)if(i==n&&xd(e.doc,t.head)==xo(eA(i,0)))return{changes:{from:t.head-i.length,to:t.head+i.length},range:eB.cursor(t.head-i.length)}}return{range:n=t}});return n||t(e.update(i,{scrollIntoView:!0,userEvent:"delete.backward"})),!n}}];function xu(e,t){let r=!1;return e.field(xi).between(0,e.doc.length,e=>{e==t&&(r=!0)}),r}function xd(e,t){let r=e.sliceString(t,t+2);return r.slice(0,eE(eA(r,0)))}function xf(e,t){let r=m8(e).resolveInner(t+1);return r.parent&&r.from==t}function xp(e,t,r){let n=e.charCategorizer(t);if(n(e.sliceDoc(t-1,t))!=td.Word)return t;for(let i of r){let r=t-i.length;if(e.sliceDoc(r,t)==i&&n(e.sliceDoc(r-1,r))!=td.Word)return r}return -1}let xm=[{key:"Ctrl-Space",run:vQ},{mac:"Alt-`",run:vQ},{key:"Escape",run:e=>{let t=e.state.field(vq,!1);return!!(t&&t.active.some(e=>0!=e.state))&&(e.dispatch({effects:vv.of(null)}),!0)}},{key:"ArrowDown",run:vF(!0)},{key:"ArrowUp",run:vF(!1)},{key:"PageDown",run:vF(!0,"page")},{key:"PageUp",run:vF(!1,"page")},{key:"Enter",run:e=>{let t=e.state.field(vq,!1);return!(e.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<e.state.facet(vk).interactionDelay)&&v$(e,t.open.options[t.open.selected])}}],xg=eK.highest(fU.computeN([vk],e=>e.facet(vk).defaultKeymap?[xm]:[]));class xy{constructor(e,t,r){this.from=e,this.to=t,this.diagnostic=r}}class xb{constructor(e,t,r){this.diagnostics=e,this.panel=t,this.selected=r}static init(e,t,r){let n=e,i=r.facet(xA).markerFilter;i&&(n=i(n,r));let s=e.slice().sort((e,t)=>e.from-t.from||e.to-t.to),o=new tw,a=[],l=0;for(let e=0;;){let t,n,i=e==s.length?null:s[e];if(!i&&!a.length)break;for(a.length?(t=l,n=a.reduce((e,t)=>Math.min(e,t.to),i&&i.from>t?i.from:1e8)):(t=i.from,n=i.to,a.push(i),e++);e<s.length;){let r=s[e];if(r.from==t&&(r.to>r.from||r.to==t))a.push(r),e++,n=Math.min(r.to,n);else{n=Math.min(r.from,n);break}}let c=function(e){let t="hint",r=1;for(let i of e){var n;let e="error"==(n=i.severity)?4:"warning"==n?3:"info"==n?2:1;e>r&&(r=e,t=i.severity)}return t}(a);if(a.some(e=>e.from==e.to||e.from==e.to-1&&r.doc.lineAt(e.from).to==e.from))o.add(t,t,uC.widget({widget:new xN(c),diagnostics:a.slice()}));else{let e=a.reduce((e,t)=>t.markClass?e+" "+t.markClass:e,"");o.add(t,n,uC.mark({class:"cm-lintRange cm-lintRange-"+c+e,diagnostics:a.slice(),inclusiveEnd:a.some(e=>e.to>n)}))}l=n;for(let e=0;e<a.length;e++)a[e].to<=l&&a.splice(e--,1)}let c=o.finish();return new xb(c,t,xv(c))}}function xv(e,t=null,r=0){let n=null;return e.between(r,1e9,(e,r,{spec:i})=>{if(!(t&&0>i.diagnostics.indexOf(t))){if(n){if(0>i.diagnostics.indexOf(n.diagnostic))return!1;n=new xy(n.from,r,n.diagnostic)}else n=new xy(e,r,t||i.diagnostics[0])}}),n}let xx=to.define(),xw=to.define(),xk=to.define(),xO=eY.define({create:()=>new xb(uC.none,null,null),update(e,t){if(t.docChanged&&e.diagnostics.size){let r=e.diagnostics.map(t.changes),n=null,i=e.panel;if(e.selected){let i=t.changes.mapPos(e.selected.from,1);n=xv(r,e.selected.diagnostic,i)||xv(r,null,i)}!r.size&&i&&t.state.facet(xA).autoPanel&&(i=null),e=new xb(r,i,n)}for(let r of t.effects)if(r.is(xx)){let n=t.state.facet(xA).autoPanel?r.value.length?xj.open:null:e.panel;e=xb.init(r.value,n,t.state)}else r.is(xw)?e=new xb(e.diagnostics,r.value?xj.open:null,e.selected):r.is(xk)&&(e=new xb(e.diagnostics,e.panel,r.value));return e},provide:e=>[pQ.from(e,e=>e.panel),fq.decorations.from(e,e=>e.diagnostics)]}),xS=uC.mark({class:"cm-lintRange cm-lintRange-active"}),xC=e=>{let t=e.state.field(xO,!1);return!!t&&!!t.panel&&(e.dispatch({effects:xw.of(!1)}),!0)},xT=[{key:"Mod-Shift-m",run:e=>{let t=e.state.field(xO,!1);t&&t.panel||e.dispatch({effects:function(e,t){return e.field(xO,!1)?t:t.concat(to.appendConfig.of(xP))}(e.state,[xw.of(!0)])});let r=pq(e,xj.open);return r&&r.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:e=>{let t=e.state.field(xO,!1);if(!t)return!1;let r=e.state.selection.main,n=t.diagnostics.iter(r.to+1);return(!!n.value||!!(n=t.diagnostics.iter(0)).value&&(n.from!=r.from||n.to!=r.to))&&(e.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)}}],xA=eV.define({combine:e=>Object.assign({sources:e.map(e=>e.source).filter(e=>null!=e)},tm(e.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?r=>e(r)||t(r):e:t}))});function xM(e){let t=[];if(e)e:for(let{name:r}of e){for(let e=0;e<r.length;e++){let n=r[e];if(/[a-zA-Z]/.test(n)&&!t.some(e=>e.toLowerCase()==n.toLowerCase())){t.push(n);continue e}}t.push("")}return t}function xE(e,t,r){var n;let i=r?xM(t.actions):[];return bm("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},bm("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage(e):t.message),null===(n=t.actions)||void 0===n?void 0:n.map((r,n)=>{let s=!1,o=n=>{if(n.preventDefault(),s)return;s=!0;let i=xv(e.state.field(xO).diagnostics,t);i&&r.apply(e,i.from,i.to)},{name:a}=r,l=i[n]?a.indexOf(i[n]):-1,c=l<0?a:[a.slice(0,l),bm("u",a.slice(l,l+1)),a.slice(l+1)];return bm("button",{type:"button",class:"cm-diagnosticAction",onclick:o,onmousedown:o,"aria-label":` Action: ${a}${l<0?"":` (access key "${i[n]})"`}.`},c)}),t.source&&bm("div",{class:"cm-diagnosticSource"},t.source))}class xN extends uO{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return bm("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class x_{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(0xffffffff*Math.random()).toString(16),this.dom=xE(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class xj{constructor(e){this.view=e,this.items=[],this.list=bm("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t=>{if(27==t.keyCode)xC(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65)||!(t.keyCode<=90)||!(this.selectedIndex>=0))return;let{diagnostic:r}=this.items[this.selectedIndex],n=xM(r.actions);for(let i=0;i<n.length;i++)if(n[i].toUpperCase().charCodeAt(0)==t.keyCode){let t=xv(this.view.state.field(xO).diagnostics,r);t&&r.actions[i].apply(e,t.from,t.to)}}t.preventDefault()},onclick:e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)}}),this.dom=bm("div",{class:"cm-panel-lint"},this.list,bm("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>xC(this.view)},"\xd7")),this.update()}get selectedIndex(){let e=this.view.state.field(xO).selected;if(!e)return -1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return -1}update(){let{diagnostics:e,selected:t}=this.view.state.field(xO),r=0,n=!1,i=null,s=new Set;for(e.between(0,this.view.state.doc.length,(e,o,{spec:a})=>{for(let e of a.diagnostics){if(s.has(e))continue;s.add(e);let o=-1,a;for(let t=r;t<this.items.length;t++)if(this.items[t].diagnostic==e){o=t;break}o<0?(a=new x_(this.view,e),this.items.splice(r,0,a),n=!0):(a=this.items[o],o>r&&(this.items.splice(r,o-r),n=!0)),t&&a.diagnostic==t.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),i=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();0==this.items.length&&(this.items.push(new x_(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),i?(this.list.setAttribute("aria-activedescendant",i.id),this.view.requestMeasure({key:this,read:()=>({sel:i.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:e,panel:t})=>{let r=t.height/this.list.offsetHeight;e.top<t.top?this.list.scrollTop-=(t.top-e.top)/r:e.bottom>t.bottom&&(this.list.scrollTop+=(e.bottom-t.bottom)/r)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=xv(this.view.state.field(xO).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:xk.of(t)})}static open(e){return new xj(e)}}function xD(e){return function(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}let xR=fq.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:xD("#d11")},".cm-lintRange-warning":{backgroundImage:xD("orange")},".cm-lintRange-info":{backgroundImage:xD("#999")},".cm-lintRange-hint":{backgroundImage:xD("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),xP=[xO,fq.decorations.compute([xO],e=>{let{selected:t,panel:r}=e.field(xO);return t&&r&&t.from!=t.to?uC.set([xS.range(t.from,t.to)]):uC.none}),function(e,t={}){let r=to.define(),n=eY.define({create:()=>[],update(e,n){if(e.length&&(t.hideOnChange&&(n.docChanged||n.selection)?e=[]:t.hideOn&&(e=e.filter(e=>!t.hideOn(n,e))),n.docChanged)){let t=[];for(let r of e){let e=n.changes.mapPos(r.pos,-1,e_.TrackDel);if(null!=e){let i=Object.assign(Object.create(null),r);i.pos=e,null!=i.end&&(i.end=n.changes.mapPos(i.end)),t.push(i)}}e=t}for(let t of n.effects)t.is(r)&&(e=t.value),t.is(pz)&&(e=[]);return e},provide:e=>pj.from(e)});return{active:n,extension:[n,da.define(i=>new pP(i,e,n,r,t.hoverTime||300)),pR]}}(function(e,t,r){let{diagnostics:n}=e.state.field(xO),i,s=-1,o=-1;n.between(t-+(r<0),t+ +(r>0),(e,n,{spec:a})=>{if(t>=e&&t<=n&&(e==n||(t>e||r>0)&&(t<n||r<0)))return i=a.diagnostics,s=e,o=n,!1});let a=e.state.facet(xA).tooltipFilter;return i&&a&&(i=a(i,e.state)),i?{pos:s,end:o,above:e.state.doc.lineAt(s).to<o,create:()=>{var t;return{dom:(t=e,bm("ul",{class:"cm-tooltip-lint"},i.map(e=>xE(t,e,!1))))}}}:null},{hideOn:function(e,t){let r=t.pos,n=t.end||r,i=e.state.facet(xA).hideOn(e,r,n);if(null!=i)return i;let s=e.startState.doc.lineAt(t.pos);return!!(e.effects.some(e=>e.is(xx))||e.changes.touchesRange(s.from,Math.max(s.to,n)))}}),xR];var xI=function(e){let t;void 0===e&&(e={});var{crosshairCursor:r=!1}=e,n=[];!1!==e.closeBracketsKeymap&&(n=n.concat(xh)),!1!==e.defaultKeymap&&(n=n.concat(bf)),!1!==e.searchKeymap&&(n=n.concat(vt)),!1!==e.historyKeymap&&(n=n.concat(yT)),!1!==e.foldKeymap&&(n=n.concat(gj)),!1!==e.completionKeymap&&(n=n.concat(xm)),!1!==e.lintKeymap&&(n=n.concat(xT));var i=[];return!1!==e.lineNumbers&&i.push(function(e={}){return[p5.of(e),[pY],p7]}()),!1!==e.highlightActiveLineGutter&&i.push(me),!1!==e.highlightSpecialChars&&i.push(function(e={}){return[pd.of(e),pf||(pf=da.fromClass(class{constructor(e){this.view=e,this.decorations=uC.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(pd)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new pa({regexp:e.specialChars,decoration:(t,r,n)=>{let{doc:i}=r.state,s=eA(t[0],0);if(9==s){let e=i.lineAt(n),t=r.state.tabSize,s=tj(e.text,t,n-e.from);return uC.replace({widget:new pm((t-s%t)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=uC.replace({widget:new pp(e,s)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(pd);e.startState.facet(pd)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}()),!1!==e.history&&i.push(function(e={}){return[yd,yu.of(e),fq.domEventHandlers({beforeinput(e,t){let r="historyUndo"==e.inputType?yp:"historyRedo"==e.inputType?ym:null;return!!r&&(e.preventDefault(),r(t))}})]}()),!1!==e.foldGutter&&i.push(function(e={}){var t,r;let n=Object.assign(Object.assign({},gL),e),i=new gq(n,!0),s=new gq(n,!1),o=da.fromClass(class{constructor(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}update(e){(e.docChanged||e.viewportChanged||e.startState.facet(ga)!=e.state.facet(ga)||e.startState.field(gM,!1)!=e.state.field(gM,!1)||m8(e.startState)!=m8(e.state)||n.foldingChanged(e))&&(this.markers=this.buildMarkers(e.view))}buildMarkers(e){let t=new tw;for(let r of e.viewportLineBlocks){let n=gE(e.state,r.from,r.to)?s:gO(e.state,r.from,r.to)?i:null;n&&t.add(r.from,r.from,n)}return t.finish()}}),{domEventHandlers:a}=n;return[o,(t={class:"cm-foldGutter",markers(e){var t;return(null===(t=e.plugin(o))||void 0===t?void 0:t.markers)||tx.empty},initialSpacer:()=>new gq(n,!1),domEventHandlers:Object.assign(Object.assign({},a),{click:(e,t,r)=>{if(a.click&&a.click(e,t,r))return!0;let n=gE(e.state,t.from,t.to);if(n)return e.dispatch({effects:gT.of(n)}),!0;let i=gO(e.state,t.from,t.to);return!!i&&(e.dispatch({effects:gC.of(i)}),!0)}})},[[pY],pG.of(Object.assign(Object.assign({},pU),t))]),[gM,g$]]}()),!1!==e.drawSelection&&i.push(function(e={}){return[f6.of(e),f8,pe,pr,u7.of(!0)]}()),!1!==e.dropCursor&&i.push([pi,ps]),!1!==e.allowMultipleSelections&&i.push(tp.allowMultipleSelections.of(!0)),!1!==e.indentOnInput&&i.push(tp.transactionFilter.of(e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let r=e.newDoc,{head:n}=e.newSelection.main,i=r.lineAt(n);if(n>i.from+200)return e;let s=r.sliceString(i.from,n);if(!t.some(e=>e.test(s)))return e;let{state:o}=e,a=-1,l=[];for(let{head:e}of o.selection.ranges){let t=o.doc.lineAt(e);if(t.from==a)continue;a=t.from;let r=gf(o,t.from);if(null==r)continue;let n=/^\s*/.exec(t.text)[0],i=gd(o,r);n!=i&&l.push({from:t.from,to:t.from+n.length,insert:i})}return l.length?[e,{changes:l,sequential:!0}]:e})),!1!==e.syntaxHighlighting&&i.push(gH(gG,{fallback:!0})),!1!==e.bracketMatching&&i.push(function(e={}){return[gZ.of(e),g1]}()),!1!==e.closeBrackets&&i.push([xc,xi]),!1!==e.autocompletion&&i.push(function(e={}){return[vU,vq,vk.of(e),vH,xg,vG]}()),!1!==e.rectangularSelection&&i.push((t=e=>e.altKey&&0==e.button,fq.mouseSelectionStyle.of((e,r)=>{let n,i;return t(r)?(n=pv(e,r),i=e.state.selection,n?{update(e){if(e.docChanged){let t=e.changes.mapPos(e.startState.doc.line(n.line).from),r=e.state.doc.lineAt(t);n={line:r.number,col:n.col,off:Math.min(n.off,r.length)},i=i.map(e.changes)}},get(t,r,s){let o=pv(e,t);if(!o)return i;let a=function(e,t,r){let n=Math.min(t.line,r.line),i=Math.max(t.line,r.line),s=[];if(t.off>2e3||r.off>2e3||t.col<0||r.col<0){let o=Math.min(t.off,r.off),a=Math.max(t.off,r.off);for(let t=n;t<=i;t++){let r=e.doc.line(t);r.length<=a&&s.push(eB.range(r.from+o,r.to+a))}}else{let o=Math.min(t.col,r.col),a=Math.max(t.col,r.col);for(let t=n;t<=i;t++){let r=e.doc.line(t),n=tD(r.text,o,e.tabSize,!0);if(n<0)s.push(eB.cursor(r.to));else{let t=tD(r.text,a,e.tabSize);s.push(eB.range(r.from+n,r.from+t))}}}return s}(e.state,n,o);return a.length?s?eB.create(a.concat(i.ranges)):eB.create(a):i}}:null):null}))),!1!==r&&i.push(function(e={}){let[t,r]=px[e.key||"Alt"],n=da.fromClass(class{constructor(e){this.view=e,this.isDown=!1}set(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))}},{eventObservers:{keydown(e){this.set(e.keyCode==t||r(e))},keyup(e){e.keyCode!=t&&r(e)||this.set(!1)},mousemove(e){this.set(r(e))}}});return[n,fq.contentAttributes.of(e=>{var t;return null!==(t=e.plugin(n))&&void 0!==t&&t.isDown?pw:null})]}()),!1!==e.highlightActiveLine&&i.push(py),!1!==e.highlightSelectionMatches&&i.push([bP,bR]),e.tabSize&&"number"==typeof e.tabSize&&i.push(gh.of(" ".repeat(e.tabSize))),i.concat([fU.of(n.flat())]).filter(Boolean)};let xz="#e06c75",xL="#abb2bf",xq="#7d8799",x$="#d19a66",xB="#2c313a",xF="#282c34",xQ="#353a42",xV="#528bff",xH=[fq.theme({"&":{color:xL,backgroundColor:xF},".cm-content":{caretColor:xV},".cm-cursor, .cm-dropCursor":{borderLeftColor:xV},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#3E4451"},".cm-panels":{backgroundColor:"#21252b",color:xL},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:xF,color:xq,border:"none"},".cm-activeLineGutter":{backgroundColor:xB},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:xQ},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:xQ,borderBottomColor:xQ},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:xB,color:xL}}},{dark:!0}),gH(gB.define([{tag:m2.keyword,color:"#c678dd"},{tag:[m2.name,m2.deleted,m2.character,m2.propertyName,m2.macroName],color:xz},{tag:[m2.function(m2.variableName),m2.labelName],color:"#61afef"},{tag:[m2.color,m2.constant(m2.name),m2.standard(m2.name)],color:x$},{tag:[m2.definition(m2.name),m2.separator],color:xL},{tag:[m2.typeName,m2.className,m2.number,m2.changed,m2.annotation,m2.modifier,m2.self,m2.namespace],color:"#e5c07b"},{tag:[m2.operator,m2.operatorKeyword,m2.url,m2.escape,m2.regexp,m2.link,m2.special(m2.string)],color:"#56b6c2"},{tag:[m2.meta,m2.comment],color:xq},{tag:m2.strong,fontWeight:"bold"},{tag:m2.emphasis,fontStyle:"italic"},{tag:m2.strikethrough,textDecoration:"line-through"},{tag:m2.link,color:xq,textDecoration:"underline"},{tag:m2.heading,fontWeight:"bold",color:xz},{tag:[m2.atom,m2.bool,m2.special(m2.variableName)],color:x$},{tag:[m2.processingInstruction,m2.string,m2.inserted],color:"#98c379"},{tag:m2.invalid,color:"#ffffff"}]))];var xW=fq.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),xU=function(e){void 0===e&&(e={});var{indentWithTab:t=!0,editable:r=!0,readOnly:n=!1,theme:i="light",placeholder:s="",basicSetup:o=!0}=e,a=[];switch(t&&a.unshift(fU.of([bp])),o&&("boolean"==typeof o?a.unshift(xI()):a.unshift(xI(o))),s&&a.unshift(da.fromClass(class{constructor(e){this.view=e,this.placeholder=s?uC.set([uC.widget({widget:new pb(s),side:1}).range(0)]):uC.none}get decorations(){return this.view.state.doc.length?uC.none:this.placeholder}},{decorations:e=>e.decorations})),i){case"light":a.push(xW);break;case"dark":a.push(xH);break;case"none":break;default:a.push(i)}return!1===r&&a.push(fq.editable.of(!1)),n&&a.push(tp.readOnly.of(!0)),[...a]},xG=e=>({line:e.state.doc.lineAt(e.state.selection.main.from),lineCount:e.state.doc.lines,lineBreak:e.state.lineBreak,length:e.state.doc.length,readOnly:e.state.readOnly,tabSize:e.state.tabSize,selection:e.state.selection,selectionAsSingle:e.state.selection.asSingle().main,ranges:e.state.selection.ranges,selectionCode:e.state.sliceDoc(e.state.selection.main.from,e.state.selection.main.to),selections:e.state.selection.ranges.map(t=>e.state.sliceDoc(t.from,t.to)),selectedText:e.state.selection.ranges.some(e=>!e.empty)}),xX=tn.define(),xY=[],xZ=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],xJ=(0,A.forwardRef)((e,t)=>{var{className:r,value:n="",selection:i,extensions:s=[],onChange:o,onStatistics:a,onCreateEditor:l,onUpdate:c,autoFocus:h,theme:u="light",height:d,minHeight:f,maxHeight:p,width:m,minWidth:g,maxWidth:y,basicSetup:b,placeholder:v,indentWithTab:x,editable:w,readOnly:k,root:O,initialState:S}=e,C=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,xZ),M=(0,A.useRef)(null),{state:E,view:N,container:_}=function(e){var{value:t,selection:r,onChange:n,onStatistics:i,onCreateEditor:s,onUpdate:o,extensions:a=xY,autoFocus:l,theme:c="light",height:h=null,minHeight:u=null,maxHeight:d=null,width:f=null,minWidth:p=null,maxWidth:m=null,placeholder:g="",editable:y=!0,readOnly:b=!1,indentWithTab:v=!0,basicSetup:x=!0,root:w,initialState:k}=e,[O,S]=(0,A.useState)(),[C,T]=(0,A.useState)(),[M,E]=(0,A.useState)(),N=fq.theme({"&":{height:h,minHeight:u,maxHeight:d,width:f,minWidth:p,maxWidth:m},"& .cm-scroller":{height:"100% !important"}}),_=[fq.updateListener.of(e=>{e.docChanged&&"function"==typeof n&&!e.transactions.some(e=>e.annotation(xX))&&n(e.state.doc.toString(),e),i&&i(xG(e))}),N,...xU({theme:c,editable:y,readOnly:b,placeholder:g,indentWithTab:v,basicSetup:x})];return o&&"function"==typeof o&&_.push(fq.updateListener.of(o)),_=_.concat(a),(0,A.useEffect)(()=>{if(O&&!M){var e={doc:t,selection:r,extensions:_},n=k?tp.fromJSON(k.json,e,k.fields):tp.create(e);if(E(n),!C){var i=new fq({state:n,parent:O,root:w});T(i),s&&s(i,n)}}return()=>{C&&(E(void 0),T(void 0))}},[O,M]),(0,A.useEffect)(()=>S(e.container),[e.container]),(0,A.useEffect)(()=>()=>{C&&(C.destroy(),T(void 0))},[C]),(0,A.useEffect)(()=>{l&&C&&C.focus()},[l,C]),(0,A.useEffect)(()=>{C&&C.dispatch({effects:to.reconfigure.of(_)})},[c,a,h,u,d,f,p,m,g,y,b,v,x,n,o]),(0,A.useEffect)(()=>{if(void 0!==t){var e=C?C.state.doc.toString():"";C&&t!==e&&C.dispatch({changes:{from:0,to:e.length,insert:t||""},annotations:[xX.of(!0)]})}},[t,C]),{state:M,setState:E,view:C,setView:T,container:O,setContainer:S}}({container:M.current,root:O,value:n,autoFocus:h,theme:u,height:d,minHeight:f,maxHeight:p,width:m,minWidth:g,maxWidth:y,basicSetup:b,placeholder:v,indentWithTab:x,editable:w,readOnly:k,selection:i,onChange:o,onStatistics:a,onCreateEditor:l,onUpdate:c,extensions:s,initialState:S});if((0,A.useImperativeHandle)(t,()=>({editor:M.current,state:E,view:N}),[M,_,E,N]),"string"!=typeof n)throw Error("value must be typeof string but got "+typeof n);var j="string"==typeof u?"cm-theme-"+u:"cm-theme";return T.j.jsx("div",hS({ref:M,className:""+j+(r?" "+r:"")},C))});xJ.displayName="CodeMirror";class xK{constructor(e,t,r,n,i,s,o,a,l,c=0,h){this.p=e,this.stack=t,this.state=r,this.reducePos=n,this.pos=i,this.score=s,this.buffer=o,this.bufferBase=a,this.curContext=l,this.lookAhead=c,this.parent=h}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let n=e.parser.context;return new xK(e,[],t,r,r,0,[],0,n?new x0(n,n.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let r=e>>19,n=65535&e,{parser:i}=this.p,s=this.reducePos<this.pos-25;s&&this.setLookAhead(this.pos);let o=i.dynamicPrecedence(n);if(o&&(this.score+=o),0==r){this.pushState(i.getGoto(this.state,n,!0),this.reducePos),n<i.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,s?8:4,!0),this.reduceContext(n,this.reducePos);return}let a=this.stack.length-(r-1)*3-(262144&e?6:0),l=a?this.stack[a-2]:this.p.ranges[0].from,c=this.reducePos-l;c>=2e3&&!(null!==(t=this.p.parser.nodeSet.types[n])&&void 0!==t&&t.isAnonymous)&&(l==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=l,this.p.lastBigReductionSize=c));let h=a?this.stack[a-1]:0,u=this.bufferBase+this.buffer.length-h;if(n<i.minRepeatTerm||131072&e){let e=i.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,l,e,u+4,!0)}if(262144&e)this.state=this.stack[a];else{let e=this.stack[a-3];this.state=i.getGoto(e,n,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(n,l)}storeNode(e,t,r,n=4,i=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,n=this.buffer.length;if(0==n&&e.parent&&(n=e.bufferBase-e.parent.bufferBase,e=e.parent),n>0&&0==e.buffer[n-4]&&e.buffer[n-1]>-1){if(t==r)return;if(e.buffer[n-2]>=t){e.buffer[n-2]=r;return}}}if(i&&this.pos!=r){let i=this.buffer.length;if(i>0&&0!=this.buffer[i-4]){let e=!1;for(let t=i;t>0&&this.buffer[t-2]>r;t-=4)if(this.buffer[t-1]>=0){e=!0;break}if(e)for(;i>0&&this.buffer[i-2]>r;)this.buffer[i]=this.buffer[i-4],this.buffer[i+1]=this.buffer[i-3],this.buffer[i+2]=this.buffer[i-2],this.buffer[i+3]=this.buffer[i-1],i-=4,n>4&&(n-=4)}this.buffer[i]=e,this.buffer[i+1]=t,this.buffer[i+2]=r,this.buffer[i+3]=n}else this.buffer.push(e,t,r,n)}shift(e,t,r,n){if(131072&e)this.pushState(65535&e,this.pos);else if(262144&e)this.pos=n,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,n,4);else{let{parser:i}=this.p;(n>this.pos||t<=i.maxNode)&&(this.pos=n,i.stateFlag(e,1)||(this.reducePos=n)),this.pushState(e,r),this.shiftContext(t,r),t<=i.maxNode&&this.buffer.push(t,r,n,4)}}apply(e,t,r,n){65536&e?this.reduce(e):this.shift(e,t,r,n)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let n=this.pos;this.reducePos=this.pos=n+e.length,this.pushState(t,n),this.buffer.push(r,n,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),n=e.bufferBase+t;for(;e&&n==e.bufferBase;)e=e.parent;return new xK(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,n,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new x1(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==r)return!1;if(!(65536&r))return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let r=[];for(let n=0,i;n<t.length;n+=2)(i=t[n+1])!=this.state&&this.p.parser.hasAction(i,e)&&r.push(t[n],i);if(this.stack.length<120)for(let e=0;r.length<8&&e<t.length;e+=2){let n=t[e+1];r.some((e,t)=>1&t&&e==n)||r.push(t[e],n)}t=r}let r=[];for(let e=0;e<t.length&&r.length<4;e+=2){let n=t[e+1];if(n==this.state)continue;let i=this.split();i.pushState(n,this.pos),i.storeNode(0,i.pos,i.pos,4,!0),i.shiftContext(t[e],this.pos),i.reducePos=this.pos,i.score-=200,r.push(i)}return r}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(65536&t))return!1;if(!e.validAction(this.state,t)){let r=t>>19,n=65535&t,i=this.stack.length-3*r;if(i<0||0>e.getGoto(this.stack[i],n,!1)){let e=this.findForcedReduction();if(null==e)return!1;t=e}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],r=(n,i)=>{if(!t.includes(n))return t.push(n),e.allActions(n,t=>{if(!(393216&t)){if(65536&t){let r=(t>>19)-i;if(r>1){let n=65535&t,i=this.stack.length-3*r;if(i>=0&&e.getGoto(this.stack[i],n,!1)>=0)return r<<19|65536|n}}else{let e=r(t,i+1);if(null!=e)return e}}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new x0(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class x0{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class x1{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e>>19;0==t?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(t-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],65535&e,!0);this.state=r}}class x2{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new x2(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new x2(this.stack,this.pos,this.index)}}function x4(e,t=Uint16Array){if("string"!=typeof e)return e;let r=null;for(let n=0,i=0;n<e.length;){let s=0;for(;;){let t=e.charCodeAt(n++),r=!1;if(126==t){s=65535;break}t>=92&&t--,t>=34&&t--;let i=t-32;if(i>=46&&(i-=46,r=!0),s+=i,r)break;s*=46}r?r[i++]=s:r=new t(s)}return r}class x5{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}let x3=new x5;class x6{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=x3,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,n=this.rangeIndex,i=this.pos+e;for(;i<r.from;){if(!n)return null;let e=this.ranges[--n];i-=r.from-e.to,r=e}for(;t<0?i>r.to:i>=r.to;){if(n==this.ranges.length-1)return null;let e=this.ranges[++n];i+=e.from-r.to,r=e}return i}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,r,n;if(t>=0&&t<this.chunk.length)r=this.pos+e,n=this.chunk.charCodeAt(t);else{let t=this.resolveOffset(e,1);if(null==t)return -1;if((r=t)>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let e=this.rangeIndex,t=this.range;for(;t.to<=r;)t=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>t.to&&(this.chunk2=this.chunk2.slice(0,t.to-r)),n=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),n}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(null==r||r<this.token.start)throw RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=x3,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let n of this.ranges){if(n.from>=t)break;n.to>e&&(r+=this.input.read(Math.max(n.from,e),Math.min(n.to,t)))}return r}}class x7{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:r}=t.p;!function(e,t,r,n,i,s){let o=0,a=1<<n,{dialect:l}=r.p.parser;e:for(;a&e[o];){let r=e[o+1];for(let n=o+3;n<r;n+=2)if((e[n+1]&a)>0){let r=e[n];if(l.allows(r)&&(-1==t.token.value||t.token.value==r||function(e,t,r,n){let i=x9(r,n,t);return i<0||x9(r,n,e)<i}(r,t.token.value,i,s))){t.acceptToken(r);break}}let n=t.next,c=0,h=e[o+2];if(t.next<0&&h>c&&65535==e[r+3*h-3]){o=e[r+3*h-1];continue}for(;c<h;){let i=c+h>>1,s=r+i+(i<<1),a=e[s],l=e[s+1]||65536;if(n<a)h=i;else if(n>=l)c=i+1;else{o=e[s+2],t.advance();continue e}}break}}(this.data,e,t,this.id,r.data,r.tokenPrecTable)}}x7.prototype.contextual=x7.prototype.fallback=x7.prototype.extend=!1,x7.prototype.fallback=x7.prototype.extend=!1;class x8{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function x9(e,t,r){for(let n=t,i;65535!=(i=e[n]);n++)if(i==r)return n-t;return -1}let we="u">typeof N&&N.env&&/\bparse\b/.test(N.env.LOG),wt=null;function wr(e,t,r){let n=e.cursor(p.IncludeAnonymous);for(n.moveTo(t);;)if(!(r<0?n.childBefore(t):n.childAfter(t)))for(;;){if((r<0?n.to<t:n.from>t)&&!n.type.isError)return r<0?Math.max(0,Math.min(n.to-1,t-25)):Math.min(e.length,Math.max(n.from+1,t+25));if(r<0?n.prevSibling():n.nextSibling())break;if(!n.parent())return r<0?0:e.length}}class wn{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?wr(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?wr(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],n=this.index[t];if(n==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let i=r.children[n],s=this.start[t]+r.positions[n];if(s>e)return this.nextStart=s,null;if(i instanceof mh){if(s==e){if(s<this.safeFrom)return null;let e=s+i.length;if(e<=this.safeTo){let t=i.prop(mn.lookAhead);if(!t||e+t<this.fragment.to)return i}}this.index[t]++,s+i.length>=Math.max(this.safeFrom,e)&&(this.trees.push(i),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+i.length}}}class wi{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(e=>new x5)}getActions(e){let t=0,r=null,{parser:n}=e.p,{tokenizers:i}=n,s=n.stateSlot(e.state,3),o=e.curContext?e.curContext.hash:0,a=0;for(let n=0;n<i.length;n++){if(!(1<<n&s))continue;let l=i[n],c=this.tokens[n];if(!(r&&!l.fallback)&&((l.contextual||c.start!=e.pos||c.mask!=s||c.context!=o)&&(this.updateCachedToken(c,l,e),c.mask=s,c.context=o),c.lookAhead>c.end+25&&(a=Math.max(c.lookAhead,a)),0!=c.value)){let n=t;if(c.extended>-1&&(t=this.addActions(e,c.extended,c.end,t)),t=this.addActions(e,c.value,c.end,t),!l.extend&&(r=c,t>n))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),r||e.pos!=this.stream.end||((r=new x5).value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new x5,{pos:r,p:n}=e;return t.start=r,t.end=Math.min(r+1,n.stream.end),t.value=r==n.stream.end?n.parser.eofTerm:0,t}updateCachedToken(e,t,r){let n=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(n,e),r),e.value>-1){let{parser:t}=r.p;for(let n=0;n<t.specialized.length;n++)if(t.specialized[n]==e.value){let i=t.specializers[n](this.stream.read(e.start,e.end),r);if(i>=0&&r.p.parser.dialect.allows(i>>1)){1&i?e.extended=i>>1:e.value=i>>1;break}}}else e.value=0,e.end=this.stream.clipPos(n+1)}putAction(e,t,r,n){for(let t=0;t<n;t+=3)if(this.actions[t]==e)return n;return this.actions[n++]=e,this.actions[n++]=t,this.actions[n++]=r,n}addActions(e,t,r,n){let{state:i}=e,{parser:s}=e.p,{data:o}=s;for(let e=0;e<2;e++)for(let a=s.stateSlot(i,e?2:1);;a+=3){if(65535==o[a]){if(1==o[a+1])a=wu(o,a+2);else{0==n&&2==o[a+1]&&(n=this.putAction(wu(o,a+2),t,r,n));break}}o[a]==t&&(n=this.putAction(wu(o,a+1),t,r,n))}return n}}class ws{constructor(e,t,r,n){this.parser=e,this.input=t,this.ranges=n,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new x6(t,n),this.tokens=new wi(e,this.stream),this.topTerm=e.top[1];let{from:i}=n[0];this.stacks=[xK.start(this,e.top[0],i)],this.fragments=r.length&&this.stream.end-i>4*e.bufferLength?new wn(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,r=this.stacks=[],n,i;if(this.bigReductionCount>300&&1==e.length){let[t]=e;for(;t.forceReduce()&&t.stack.length&&t.stack[t.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let s=0;s<e.length;s++){let o=e[s];for(;;){if(this.tokens.mainToken=null,o.pos>t)r.push(o);else{if(this.advanceStack(o,r,e))continue;{n||(n=[],i=[]),n.push(o);let e=this.tokens.getMainToken(o);i.push(e.value,e.end)}}break}}if(!r.length){let e=n&&function(e){let t=null;for(let r of e){let e=r.p.stoppedAt;(r.pos==r.p.stream.end||null!=e&&r.pos>e)&&r.p.parser.stateFlag(r.state,2)&&(!t||t.score<r.score)&&(t=r)}return t}(n);if(e)return we&&console.log("Finish with "+this.stackID(e)),this.stackToTree(e);if(this.parser.strict)throw we&&n&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&n){let e=null!=this.stoppedAt&&n[0].pos>this.stoppedAt?n[0]:this.runRecovery(n,i,r);if(e)return we&&console.log("Force-finish "+this.stackID(e)),this.stackToTree(e.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(r.length>e)for(r.sort((e,t)=>t.score-e.score);r.length>e;)r.pop();r.some(e=>e.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let e=0;e<r.length-1;e++){let t=r[e];for(let n=e+1;n<r.length;n++){let i=r[n];if(t.sameState(i)||t.buffer.length>500&&i.buffer.length>500){if((t.score-i.score||t.buffer.length-i.buffer.length)>0)r.splice(n--,1);else{r.splice(e--,1);continue e}}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let e=1;e<r.length;e++)r[e].pos<this.minStackPos&&(this.minStackPos=r[e].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let n=e.pos,{parser:i}=this,s=we?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&n>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,r=t?e.curContext.hash:0;for(let o=this.fragments.nodeAt(n);o;){let n=this.parser.nodeSet.types[o.type.id]==o.type?i.getGoto(e.state,o.type.id):-1;if(n>-1&&o.length&&(!t||(o.prop(mn.contextHash)||0)==r))return e.useNode(o,n),we&&console.log(s+this.stackID(e)+` (via reuse of ${i.getName(o.type.id)})`),!0;if(!(o instanceof mh)||0==o.children.length||o.positions[0]>0)break;let a=o.children[0];if(a instanceof mh&&0==o.positions[0])o=a;else break}}let o=i.stateSlot(e.state,4);if(o>0)return e.reduce(o),we&&console.log(s+this.stackID(e)+` (via always-reduce ${i.getName(65535&o)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let o=0;o<a.length;){let l=a[o++],c=a[o++],h=a[o++],u=o==a.length||!r,d=u?e:e.split(),f=this.tokens.mainToken;if(d.apply(l,c,f?f.start:d.pos,h),we&&console.log(s+this.stackID(d)+` (via ${65536&l?`reduce of ${i.getName(65535&l)}`:"shift"} for ${i.getName(c)} @ ${n}${d==e?"":", split"})`),u)return!0;d.pos>n?t.push(d):r.push(d)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return wo(e,t),!0}}runRecovery(e,t,r){let n=null,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=t[s<<1],l=t[(s<<1)+1],c=we?this.stackID(o)+" -> ":"";if(o.deadEnd&&(i||(i=!0,o.restart(),we&&console.log(c+this.stackID(o)+" (restarted)"),this.advanceFully(o,r))))continue;let h=o.split(),u=c;for(let e=0;h.forceReduce()&&e<10&&(we&&console.log(u+this.stackID(h)+" (via force-reduce)"),!this.advanceFully(h,r));e++)we&&(u=this.stackID(h)+" -> ");for(let e of o.recoverByInsert(a))we&&console.log(c+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,r);this.stream.end>o.pos?(l==o.pos&&(l++,a=0),o.recoverByDelete(a,l),we&&console.log(c+this.stackID(o)+` (via recover-delete ${this.parser.getName(a)})`),wo(o,r)):(!n||n.score<o.score)&&(n=o)}return n}stackToTree(e){return e.close(),mh.build({buffer:x2.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(wt||(wt=new WeakMap)).get(e);return t||wt.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function wo(e,t){for(let r=0;r<t.length;r++){let n=t[r];if(n.pos==e.pos&&n.sameState(e)){t[r].score<e.score&&(t[r]=e);return}}t.push(e)}class wa{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||0==this.disabled[e]}}let wl=e=>e;class wc{constructor(e){this.start=e.start,this.shift=e.shift||wl,this.reduce=e.reduce||wl,this.reuse=e.reuse||wl,this.hash=e.hash||(()=>0),this.strict=!1!==e.strict}}class wh extends mN{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let r=0;r<e.repeatNodeCount;r++)t.push("");let r=Object.keys(e.topRules).map(t=>e.topRules[t][1]),n=[];for(let e=0;e<t.length;e++)n.push([]);function i(e,t,r){n[e].push([t,t.deserialize(String(r))])}if(e.nodeProps)for(let t of e.nodeProps){let e=t[0];"string"==typeof e&&(e=mn[e]);for(let r=1;r<t.length;){let n=t[r++];if(n>=0)i(n,e,t[r++]);else{let s=t[r+-n];for(let o=-n;o>0;o--)i(t[r++],e,s);r++}}}this.nodeSet=new ma(t.map((t,i)=>mo.define({name:i>=this.minRepeatTerm?void 0:t,id:i,props:n[i],top:r.indexOf(i)>-1,error:0==i,skipped:e.skippedNodes&&e.skippedNodes.indexOf(i)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=1024;let s=x4(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let e=0;e<this.specializerSpecs.length;e++)this.specialized[e]=this.specializerSpecs[e].term;this.specializers=this.specializerSpecs.map(wd),this.states=x4(e.states,Uint32Array),this.data=x4(e.stateData),this.goto=x4(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(e=>"number"==typeof e?new x7(s,e):e),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let n=new ws(this,e,t,r);for(let i of this.wrappers)n=i(n,e,t,r);return n}getGoto(e,t,r=!1){let n=this.goto;if(t>=n[0])return -1;for(let i=n[t+1];;){let t=n[i++],s=1&t,o=n[i++];if(s&&r)return o;for(let r=i+(t>>1);i<r;i++)if(n[i]==e)return o;if(s)return -1}}hasAction(e,t){let r=this.data;for(let n=0;n<2;n++)for(let i=this.stateSlot(e,n?2:1),s;;i+=3){if(65535==(s=r[i])){if(1==r[i+1])s=r[i=wu(r,i+2)];else{if(2==r[i+1])return wu(r,i+2);break}}if(s==t||0==s)return wu(r,i+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,e=>e==t||null)}allActions(e,t){let r=this.stateSlot(e,4),n=r?t(r):void 0;for(let r=this.stateSlot(e,1);null==n;r+=3){if(65535==this.data[r]){if(1==this.data[r+1])r=wu(this.data,r+2);else break}n=t(wu(this.data,r+1))}return n}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(65535==this.data[r]){if(1==this.data[r+1])r=wu(this.data,r+2);else break}if(!(1&this.data[r+2])){let e=this.data[r+1];t.some((t,r)=>1&r&&t==e)||t.push(this.data[r],e)}}return t}configure(e){let t=Object.assign(Object.create(wh.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(t=>{let r=e.tokenizers.find(e=>e.from==t);return r?r.to:t})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((r,n)=>{let i=e.specializers.find(e=>e.from==r.external);if(!i)return r;let s=Object.assign(Object.assign({},r),{external:i.to});return t.specializers[n]=wd(s),s})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let n of e.split(" ")){let e=t.indexOf(n);e>=0&&(r[e]=!0)}let n=null;for(let e=0;e<t.length;e++)if(!r[e])for(let r=this.dialects[t[e]],i;65535!=(i=this.data[r++]);)(n||(n=new Uint8Array(this.maxTerm+1)))[i]=1;return new wa(e,r,n)}static deserialize(e){return new wh(e)}}function wu(e,t){return e[t]|e[t+1]<<16}function wd(e){if(e.external){let t=+!!e.extend;return(r,n)=>e.external(r,n)<<1|t}return e.get}let wf=new Set([25,49,50,263,65,130,56,57,238,62,63,72,73,77,60,61,151,152,155,112]);function wp(e){return 10==e||13==e}function wm(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}let wg=new x8((e,t)=>{let r;if(e.next<0)e.acceptToken(199);else if(t.context.flags&wb)wp(e.next)&&e.acceptToken(198,1);else if(((r=e.peek(-1))<0||wp(r))&&t.canShift(197)){let t=0;for(;32==e.next||9==e.next;)e.advance(),t++;(10==e.next||13==e.next||35==e.next)&&e.acceptToken(197,-t)}else wp(e.next)&&e.acceptToken(196,1)},{contextual:!0}),wy=new x8((e,t)=>{let r=t.context;if(r.flags)return;let n=e.peek(-1);if(10==n||13==n){let t=0,n=0;for(;;){if(32==e.next)t++;else if(9==e.next)t+=8-t%8;else break;e.advance(),n++}t!=r.indent&&10!=e.next&&13!=e.next&&35!=e.next&&(t<r.indent?e.acceptToken(195,-n):e.acceptToken(194))}}),wb=1;function wv(e,t,r){this.parent=e,this.indent=t,this.flags=r,this.hash=(e?e.hash+e.hash<<8:0)+t+(t<<4)+r+(r<<6)}let wx=new wv(null,0,0),ww=new Map([[241,0],[242,4],[243,8],[244,12],[245,16],[246,20],[247,24],[248,28],[249,32],[250,36],[251,40],[252,44],[253,48],[254,52],[255,56],[256,60]].map(([e,t])=>[e,2|t])),wk=new wc({start:wx,reduce:(e,t,r,n)=>e.flags&wb&&wf.has(t)||(71==t||72==t)&&2&e.flags?e.parent:e,shift:(e,t,r,n)=>194==t?new wv(e,function(e){let t=0;for(let r=0;r<e.length;r++)t+=9==e.charCodeAt(r)?8-t%8:1;return t}(n.read(n.pos,r.pos)),0):195==t?e.parent:24==t||55==t||59==t||3==t?new wv(e,0,wb):ww.has(t)?new wv(e,0,ww.get(t)|e.flags&wb):e,hash:e=>e.hash}),wO=new x8(e=>{for(let t=0;t<5;t++){if(e.next!="print".charCodeAt(t))return;e.advance()}if(!/\w/.test(String.fromCharCode(e.next)))for(let t=0;;t++){let r=e.peek(t);if(32!=r&&9!=r){40!=r&&46!=r&&10!=r&&13!=r&&35!=r&&e.acceptToken(1);return}}}),wS=new x8((e,t)=>{let{flags:r}=t.context,n=4&r?34:39,i=(8&r)>0,s=!(16&r),o=(32&r)>0,a=e.pos;for(;!(e.next<0);)if(o&&123==e.next){if(123==e.peek(1))e.advance(2);else{if(e.pos==a){e.acceptToken(3,1);return}break}}else if(s&&92==e.next){if(e.pos==a){e.advance();let t=e.next;t>=0&&(e.advance(),function(e,t){if(111==t)for(let t=0;t<2&&e.next>=48&&e.next<=55;t++)e.advance();else if(120==t)for(let t=0;t<2&&wm(e.next);t++)e.advance();else if(117==t)for(let t=0;t<4&&wm(e.next);t++)e.advance();else if(85==t)for(let t=0;t<8&&wm(e.next);t++)e.advance();else if(78==t&&123==e.next){for(e.advance();e.next>=0&&125!=e.next&&39!=e.next&&34!=e.next&&10!=e.next;)e.advance();125==e.next&&e.advance()}}(e,t)),e.acceptToken(2);return}break}else if(e.next!=n||i&&(e.peek(1)!=n||e.peek(2)!=n)){if(10==e.next){if(i)e.advance();else if(e.pos==a){e.acceptToken(201);return}break}e.advance()}else{if(e.pos==a){e.acceptToken(201,i?3:1);return}break}e.pos>a&&e.acceptToken(200)}),wC=mI({'async "*" "**" FormatConversion FormatSpec':m2.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield match case":m2.controlKeyword,"in not and or is del":m2.operatorKeyword,"from def class global nonlocal lambda":m2.definitionKeyword,import:m2.moduleKeyword,"with as print":m2.keyword,Boolean:m2.bool,None:m2.null,VariableName:m2.variableName,"CallExpression/VariableName":m2.function(m2.variableName),"FunctionDefinition/VariableName":m2.function(m2.definition(m2.variableName)),"ClassDefinition/VariableName":m2.definition(m2.className),PropertyName:m2.propertyName,"CallExpression/MemberExpression/PropertyName":m2.function(m2.propertyName),Comment:m2.lineComment,Number:m2.number,String:m2.string,FormatString:m2.special(m2.string),Escape:m2.escape,UpdateOp:m2.updateOperator,"ArithOp!":m2.arithmeticOperator,BitOp:m2.bitwiseOperator,CompareOp:m2.compareOperator,AssignOp:m2.definitionOperator,Ellipsis:m2.punctuation,At:m2.meta,"( )":m2.paren,"[ ]":m2.squareBracket,"{ }":m2.brace,".":m2.derefOperator,", ;":m2.separator}),wT={__proto__:null,await:44,or:54,and:56,in:60,not:62,is:64,if:70,else:72,lambda:76,yield:94,from:96,async:102,for:104,None:162,True:164,False:164,del:178,pass:182,break:186,continue:190,return:194,raise:202,import:206,as:208,global:212,nonlocal:214,assert:218,type:223,elif:236,while:240,try:246,except:248,finally:250,with:254,def:258,class:268,match:279,case:285},wA=wh.deserialize({version:14,states:"##jO`QeOOP$}OSOOO&WQtO'#HUOOQS'#Co'#CoOOQS'#Cp'#CpO'vQdO'#CnO*UQtO'#HTOOQS'#HU'#HUOOQS'#DU'#DUOOQS'#HT'#HTO*rQdO'#D_O+VQdO'#DfO+gQdO'#DjO+zOWO'#DuO,VOWO'#DvO.[QtO'#GuOOQS'#Gu'#GuO'vQdO'#GtO0ZQtO'#GtOOQS'#Eb'#EbO0rQdO'#EcOOQS'#Gs'#GsO0|QdO'#GrOOQV'#Gr'#GrO1XQdO'#FYOOQS'#G^'#G^O1^QdO'#FXOOQV'#IS'#ISOOQV'#Gq'#GqOOQV'#Fq'#FqQ`QeOOO'vQdO'#CqO1lQdO'#C}O1sQdO'#DRO2RQdO'#HYO2cQtO'#EVO'vQdO'#EWOOQS'#EY'#EYOOQS'#E['#E[OOQS'#E^'#E^O2wQdO'#E`O3_QdO'#EdO3rQdO'#EfO3zQtO'#EfO1XQdO'#EiO0rQdO'#ElO1XQdO'#EnO0rQdO'#EtO0rQdO'#EwO4VQdO'#EyO4^QdO'#FOO4iQdO'#EzO0rQdO'#FOO1XQdO'#FQO1XQdO'#FVO4nQdO'#F[P4uOdO'#GpPOOO)CBd)CBdOOQS'#Ce'#CeOOQS'#Cf'#CfOOQS'#Cg'#CgOOQS'#Ch'#ChOOQS'#Ci'#CiOOQS'#Cj'#CjOOQS'#Cl'#ClO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO5TQdO'#DoOOQS,5:Y,5:YO5hQdO'#HdOOQS,5:],5:]O5uQ!fO,5:]O5zQtO,59YO1lQdO,59bO1lQdO,59bO1lQdO,59bO8jQdO,59bO8oQdO,59bO8vQdO,59jO8}QdO'#HTO:TQdO'#HSOOQS'#HS'#HSOOQS'#D['#D[O:lQdO,59aO'vQdO,59aO:zQdO,59aOOQS,59y,59yO;PQdO,5:RO'vQdO,5:ROOQS,5:Q,5:QO;_QdO,5:QO;dQdO,5:XO'vQdO,5:XO'vQdO,5:VOOQS,5:U,5:UO;uQdO,5:UO;zQdO,5:WOOOW'#Fy'#FyO<POWO,5:aOOQS,5:a,5:aO<[QdO'#HwOOOW'#Dw'#DwOOOW'#Fz'#FzO<lOWO,5:bOOQS,5:b,5:bOOQS'#F}'#F}O<zQtO,5:iO?lQtO,5=`O@VQ#xO,5=`O@vQtO,5=`OOQS,5:},5:}OA_QeO'#GWOBqQdO,5;^OOQV,5=^,5=^OB|QtO'#IPOCkQdO,5;tOOQS-E:[-E:[OOQV,5;s,5;sO4dQdO'#FQOOQV-E9o-E9oOCsQtO,59]OEzQtO,59iOFeQdO'#HVOFpQdO'#HVO1XQdO'#HVOF{QdO'#DTOGTQdO,59mOGYQdO'#HZO'vQdO'#HZO0rQdO,5=tOOQS,5=t,5=tO0rQdO'#EROOQS'#ES'#ESOGwQdO'#GPOHXQdO,58|OHXQdO,58|O*xQdO,5:oOHgQtO'#H]OOQS,5:r,5:rOOQS,5:z,5:zOHzQdO,5;OOI]QdO'#IOO1XQdO'#H}OOQS,5;Q,5;QOOQS'#GT'#GTOIqQtO,5;QOJPQdO,5;QOJUQdO'#IQOOQS,5;T,5;TOJdQdO'#H|OOQS,5;W,5;WOJuQdO,5;YO4iQdO,5;`O4iQdO,5;cOJ}QtO'#ITO'vQdO'#ITOKXQdO,5;eO4VQdO,5;eO0rQdO,5;jO1XQdO,5;lOK^QeO'#EuOLjQgO,5;fO!!kQdO'#IUO4iQdO,5;jO!!vQdO,5;lO!#OQdO,5;qO!#ZQtO,5;vO'vQdO,5;vPOOO,5=[,5=[P!#bOSO,5=[P!#jOdO,5=[O!&bQtO1G.jO!&iQtO1G.jO!)YQtO1G.jO!)dQtO1G.jO!+}QtO1G.jO!,bQtO1G.jO!,uQdO'#HcO!-TQtO'#GuO0rQdO'#HcO!-_QdO'#HbOOQS,5:Z,5:ZO!-gQdO,5:ZO!-lQdO'#HeO!-wQdO'#HeO!.[QdO,5>OOOQS'#Ds'#DsOOQS1G/w1G/wOOQS1G.|1G.|O!/[QtO1G.|O!/cQtO1G.|O1lQdO1G.|O!0OQdO1G/UOOQS'#DZ'#DZO0rQdO,59tOOQS1G.{1G.{O!0VQdO1G/eO!0gQdO1G/eO!0oQdO1G/fO'vQdO'#H[O!0tQdO'#H[O!0yQtO1G.{O!1ZQdO,59iO!2aQdO,5=zO!2qQdO,5=zO!2yQdO1G/mO!3OQtO1G/mOOQS1G/l1G/lO!3`QdO,5=uO!4VQdO,5=uO0rQdO1G/qO!4tQdO1G/sO!4yQtO1G/sO!5ZQtO1G/qOOQS1G/p1G/pOOQS1G/r1G/rOOOW-E9w-E9wOOQS1G/{1G/{O!5kQdO'#HxO0rQdO'#HxO!5|QdO,5>cOOOW-E9x-E9xOOQS1G/|1G/|OOQS-E9{-E9{O!6[Q#xO1G2zO!6{QtO1G2zO'vQdO,5<jOOQS,5<j,5<jOOQS-E9|-E9|OOQS,5<r,5<rOOQS-E:U-E:UOOQV1G0x1G0xO1XQdO'#GRO!7dQtO,5>kOOQS1G1`1G1`O!8RQdO1G1`OOQS'#DV'#DVO0rQdO,5=qOOQS,5=q,5=qO!8WQdO'#FrO!8cQdO,59oO!8kQdO1G/XO!8uQtO,5=uOOQS1G3`1G3`OOQS,5:m,5:mO!9fQdO'#GtOOQS,5<k,5<kOOQS-E9}-E9}O!9wQdO1G.hOOQS1G0Z1G0ZO!:VQdO,5=wO!:gQdO,5=wO0rQdO1G0jO0rQdO1G0jO!:xQdO,5>jO!;ZQdO,5>jO1XQdO,5>jO!;lQdO,5>iOOQS-E:R-E:RO!;qQdO1G0lO!;|QdO1G0lO!<RQdO,5>lO!<aQdO,5>lO!<oQdO,5>hO!=VQdO,5>hO!=hQdO'#EpO0rQdO1G0tO!=sQdO1G0tO!=xQgO1G0zO!AvQgO1G0}O!EqQdO,5>oO!E{QdO,5>oO!FTQtO,5>oO0rQdO1G1PO!F_QdO1G1PO4iQdO1G1UO!!vQdO1G1WOOQV,5;a,5;aO!FdQfO,5;aO!FiQgO1G1QO!JjQdO'#GZO4iQdO1G1QO4iQdO1G1QO!JzQdO,5>pO!KXQdO,5>pO1XQdO,5>pOOQV1G1U1G1UO!KaQdO'#FSO!KrQ!fO1G1WO!KzQdO1G1WOOQV1G1]1G1]O4iQdO1G1]O!LPQdO1G1]O!LXQdO'#F^OOQV1G1b1G1bO!#ZQtO1G1bPOOO1G2v1G2vP!L^OSO1G2vOOQS,5=},5=}OOQS'#Dp'#DpO0rQdO,5=}O!LfQdO,5=|O!LyQdO,5=|OOQS1G/u1G/uO!MRQdO,5>PO!McQdO,5>PO!MkQdO,5>PO!NOQdO,5>PO!N`QdO,5>POOQS1G3j1G3jOOQS7+$h7+$hO!8kQdO7+$pO#!RQdO1G.|O#!YQdO1G.|OOQS1G/`1G/`OOQS,5<`,5<`O'vQdO,5<`OOQS7+%P7+%PO#!aQdO7+%POOQS-E9r-E9rOOQS7+%Q7+%QO#!qQdO,5=vO'vQdO,5=vOOQS7+$g7+$gO#!vQdO7+%PO##OQdO7+%QO##TQdO1G3fOOQS7+%X7+%XO##eQdO1G3fO##mQdO7+%XOOQS,5<_,5<_O'vQdO,5<_O##rQdO1G3aOOQS-E9q-E9qO#$iQdO7+%]OOQS7+%_7+%_O#$wQdO1G3aO#%fQdO7+%_O#%kQdO1G3gO#%{QdO1G3gO#&TQdO7+%]O#&YQdO,5>dO#&sQdO,5>dO#&sQdO,5>dOOQS'#Dx'#DxO#'UO&jO'#DzO#'aO`O'#HyOOOW1G3}1G3}O#'fQdO1G3}O#'nQdO1G3}O#'yQ#xO7+(fO#(jQtO1G2UP#)TQdO'#GOOOQS,5<m,5<mOOQS-E:P-E:POOQS7+&z7+&zOOQS1G3]1G3]OOQS,5<^,5<^OOQS-E9p-E9pOOQS7+$s7+$sO#)bQdO,5=`O#){QdO,5=`O#*^QtO,5<aO#*qQdO1G3cOOQS-E9s-E9sOOQS7+&U7+&UO#+RQdO7+&UO#+aQdO,5<nO#+uQdO1G4UOOQS-E:Q-E:QO#,WQdO1G4UOOQS1G4T1G4TOOQS7+&W7+&WO#,iQdO7+&WOOQS,5<p,5<pO#,tQdO1G4WOOQS-E:S-E:SOOQS,5<l,5<lO#-SQdO1G4SOOQS-E:O-E:OO1XQdO'#EqO#-jQdO'#EqO#-uQdO'#IRO#-}QdO,5;[OOQS7+&`7+&`O0rQdO7+&`O#.SQgO7+&fO!JmQdO'#GXO4iQdO7+&fO4iQdO7+&iO#2QQtO,5<tO'vQdO,5<tO#2[QdO1G4ZOOQS-E:W-E:WO#2fQdO1G4ZO4iQdO7+&kO0rQdO7+&kOOQV7+&p7+&pO!KrQ!fO7+&rO!KzQdO7+&rO`QeO1G0{OOQV-E:X-E:XO4iQdO7+&lO4iQdO7+&lOOQV,5<u,5<uO#2nQdO,5<uO!JmQdO,5<uOOQV7+&l7+&lO#2yQgO7+&lO#6tQdO,5<vO#7PQdO1G4[OOQS-E:Y-E:YO#7^QdO1G4[O#7fQdO'#IWO#7tQdO'#IWO1XQdO'#IWOOQS'#IW'#IWO#8PQdO'#IVOOQS,5;n,5;nO#8XQdO,5;nO0rQdO'#FUOOQV7+&r7+&rO4iQdO7+&rOOQV7+&w7+&wO4iQdO7+&wO#8^QfO,5;xOOQV7+&|7+&|POOO7+(b7+(bO#8cQdO1G3iOOQS,5<c,5<cO#8qQdO1G3hOOQS-E9u-E9uO#9UQdO,5<dO#9aQdO,5<dO#9tQdO1G3kOOQS-E9v-E9vO#:UQdO1G3kO#:^QdO1G3kO#:nQdO1G3kO#:UQdO1G3kOOQS<<H[<<H[O#:yQtO1G1zOOQS<<Hk<<HkP#;WQdO'#FtO8vQdO1G3bO#;eQdO1G3bO#;jQdO<<HkOOQS<<Hl<<HlO#;zQdO7+)QOOQS<<Hs<<HsO#<[QtO1G1yP#<{QdO'#FsO#=YQdO7+)RO#=jQdO7+)RO#=rQdO<<HwO#=wQdO7+({OOQS<<Hy<<HyO#>nQdO,5<bO'vQdO,5<bOOQS-E9t-E9tOOQS<<Hw<<HwOOQS,5<g,5<gO0rQdO,5<gO#>sQdO1G4OOOQS-E9y-E9yO#?^QdO1G4OO<[QdO'#H{OOOO'#D{'#D{OOOO'#F|'#F|O#?oO&jO,5:fOOOW,5>e,5>eOOOW7+)i7+)iO#?zQdO7+)iO#@SQdO1G2zO#@mQdO1G2zP'vQdO'#FuO0rQdO<<IpO1XQdO1G2YP1XQdO'#GSO#AOQdO7+)pO#AaQdO7+)pOOQS<<Ir<<IrP1XQdO'#GUP0rQdO'#GQOOQS,5;],5;]O#ArQdO,5>mO#BQQdO,5>mOOQS1G0v1G0vOOQS<<Iz<<IzOOQV-E:V-E:VO4iQdO<<JQOOQV,5<s,5<sO4iQdO,5<sOOQV<<JQ<<JQOOQV<<JT<<JTO#BYQtO1G2`P#BdQdO'#GYO#BkQdO7+)uO#BuQgO<<JVO4iQdO<<JVOOQV<<J^<<J^O4iQdO<<J^O!KrQ!fO<<J^O#FpQgO7+&gOOQV<<JW<<JWO#FzQgO<<JWOOQV1G2a1G2aO1XQdO1G2aO#JuQdO1G2aO4iQdO<<JWO1XQdO1G2bP0rQdO'#G[O#KQQdO7+)vO#K_QdO7+)vOOQS'#FT'#FTO0rQdO,5>rO#KgQdO,5>rOOQS,5>r,5>rO#KrQdO,5>qO#LTQdO,5>qOOQS1G1Y1G1YOOQS,5;p,5;pOOQV<<Jc<<JcO#L]QdO1G1dOOQS7+)T7+)TP#LbQdO'#FwO#LrQdO1G2OO#MVQdO1G2OO#MgQdO1G2OP#MrQdO'#FxO#NPQdO7+)VO#NaQdO7+)VO#NaQdO7+)VO#NiQdO7+)VO#NyQdO7+(|O8vQdO7+(|OOQSAN>VAN>VO$ dQdO<<LmOOQSAN>cAN>cO0rQdO1G1|O$ tQtO1G1|P$!OQdO'#FvOOQS1G2R1G2RP$!]QdO'#F{O$!jQdO7+)jO$#TQdO,5>gOOOO-E9z-E9zOOOW<<MT<<MTO$#cQdO7+(fOOQSAN?[AN?[OOQS7+'t7+'tO$#|QdO<<M[OOQS,5<q,5<qO$$_QdO1G4XOOQS-E:T-E:TOOQVAN?lAN?lOOQV1G2_1G2_O4iQdOAN?qO$$mQgOAN?qOOQVAN?xAN?xO4iQdOAN?xOOQV<<JR<<JRO4iQdOAN?rO4iQdO7+'{OOQV7+'{7+'{O1XQdO7+'{OOQVAN?rAN?rOOQS7+'|7+'|O$(hQdO<<MbOOQS1G4^1G4^O0rQdO1G4^OOQS,5<w,5<wO$(uQdO1G4]OOQS-E:Z-E:ZOOQU'#G_'#G_O$)WQfO7+'OO$)cQdO'#F_O$*jQdO7+'jO$*zQdO7+'jOOQS7+'j7+'jO$+VQdO<<LqO$+gQdO<<LqO$+gQdO<<LqO$+oQdO'#H^OOQS<<Lh<<LhO$+yQdO<<LhOOQS7+'h7+'hOOQS'#D|'#D|OOOO1G4R1G4RO$,dQdO1G4RO$,lQdO1G4RP!=hQdO'#GVOOQVG25]G25]O4iQdOG25]OOQVG25dG25dOOQVG25^G25^OOQV<<Kg<<KgO4iQdO<<KgOOQS7+)x7+)xP$,wQdO'#G]OOQU-E:]-E:]OOQV<<Jj<<JjO$-kQtO'#FaOOQS'#Fc'#FcO$-{QdO'#FbO$.mQdO'#FbOOQS'#Fb'#FbO$.rQdO'#IYO$)cQdO'#FiO$)cQdO'#FiO$/ZQdO'#FjO$)cQdO'#FkO$/bQdO'#IZOOQS'#IZ'#IZO$0PQdO,5;yOOQS<<KU<<KUO$0XQdO<<KUO$0iQdOANB]O$0yQdOANB]O$1RQdO'#H_OOQS'#H_'#H_O1sQdO'#DcO$1lQdO,5=xOOQSANBSANBSOOOO7+)m7+)mO$2TQdO7+)mOOQVLD*wLD*wOOQVANARANARO5uQ!fO'#GaO$2]QtO,5<SO$)cQdO'#FmOOQS,5<W,5<WOOQS'#Fd'#FdO$2}QdO,5;|O$3SQdO,5;|OOQS'#Fg'#FgO$)cQdO'#G`O$3tQdO,5<QO$4`QdO,5>tO$4pQdO,5>tO1XQdO,5<PO$5RQdO,5<TO$5WQdO,5<TO$)cQdO'#I[O$5]QdO'#I[O$5bQdO,5<UOOQS,5<V,5<VO'vQdO'#FpOOQU1G1e1G1eO4iQdO1G1eOOQSAN@pAN@pO$5gQdOG27wO$5wQdO,59}OOQS1G3d1G3dOOOO<<MX<<MXOOQS,5<{,5<{OOQS-E:_-E:_O$5|QtO'#FaO$6TQdO'#I]O$6cQdO'#I]O$6kQdO,5<XOOQS1G1h1G1hO$6pQdO1G1hO$6uQdO,5<zOOQS-E:^-E:^O$7aQdO,5=OO$7xQdO1G4`OOQS-E:b-E:bOOQS1G1k1G1kOOQS1G1o1G1oO$8YQdO,5>vO$)cQdO,5>vOOQS1G1p1G1pO$8hQtO,5<[OOQU7+'P7+'PO$+oQdO1G/iO$)cQdO,5<YO$8oQdO,5>wO$8vQdO,5>wOOQS1G1s1G1sOOQS7+'S7+'SP$)cQdO'#GdO$9OQdO1G4bO$9YQdO1G4bO$9bQdO1G4bOOQS7+%T7+%TO$9pQdO1G1tO$:OQtO'#FaO$:VQdO,5<}OOQS,5<},5<}O$:eQdO1G4cOOQS-E:a-E:aO$)cQdO,5<|O$:lQdO,5<|O$:qQdO7+)|OOQS-E:`-E:`O$:{QdO7+)|O$)cQdO,5<ZP$)cQdO'#GcO$;TQdO1G2hO$)cQdO1G2hP$;cQdO'#GbO$;jQdO<<MhO$;tQdO1G1uO$<SQdO7+(SO8vQdO'#C}O8vQdO,59bO8vQdO,59bO8vQdO,59bO$<bQtO,5=`O8vQdO1G.|O0rQdO1G/XO0rQdO7+$pP$<uQdO'#GOO'vQdO'#GtO$=SQdO,59bO$=XQdO,59bO$=`QdO,59mO$=eQdO1G/UO1sQdO'#DRO8vQdO,59j",stateData:"$>O~O%cOS%^OSSOS%]PQ~OPdOVaOfoOhYOopOs!POvqO!PrO!Q{O!T!SO!U!RO!XZO!][O!h`O!r`O!s`O!t`O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#l!QO#o!TO#s!UO#u!VO#z!WO#}hO$P!XO%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~O%]!YO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%j![O%k!]O%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aO~Ok%xXl%xXm%xXn%xXo%xXp%xXs%xXz%xX{%xX!x%xX#g%xX%[%xX%_%xX%z%xXg%xX!T%xX!U%xX%{%xX!W%xX![%xX!Q%xX#[%xXt%xX!m%xX~P%SOfoOhYO!XZO!][O!h`O!r`O!s`O!t`O%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~Oz%wX{%wX#g%wX%[%wX%_%wX%z%wX~Ok!pOl!qOm!oOn!oOo!rOp!sOs!tO!x%wX~P)pOV!zOg!|Oo0cOv0qO!PrO~P'vOV#OOo0cOv0qO!W#PO~P'vOV#SOa#TOo0cOv0qO![#UO~P'vOQ#XO%`#XO%a#ZO~OQ#^OR#[O%`#^O%a#`O~OV%iX_%iXa%iXh%iXk%iXl%iXm%iXn%iXo%iXp%iXs%iXz%iX!X%iX!f%iX%j%iX%k%iX%l%iX%m%iX%n%iX%o%iX%p%iX%q%iX%r%iX%s%iXg%iX!T%iX!U%iX~O&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O{%iX!x%iX#g%iX%[%iX%_%iX%z%iX%{%iX!W%iX![%iX!Q%iX#[%iXt%iX!m%iX~P,eOz#dO{%hX!x%hX#g%hX%[%hX%_%hX%z%hX~Oo0cOv0qO~P'vO#g#gO%[#iO%_#iO~O%uWO~O!T#nO#u!VO#z!WO#}hO~OopO~P'vOV#sOa#tO%uWO{wP~OV#xOo0cOv0qO!Q#yO~P'vO{#{O!x$QO%z#|O#g!yX%[!yX%_!yX~OV#xOo0cOv0qO#g#SX%[#SX%_#SX~P'vOo0cOv0qO#g#WX%[#WX%_#WX~P'vOh$WO%uWO~O!f$YO!r$YO%uWO~OV$eO~P'vO!U$gO#s$hO#u$iO~O{$jO~OV$qO~P'vOS$sO%[$rO%_$rO%c$tO~OV$}Oa$}Og%POo0cOv0qO~P'vOo0cOv0qO{%SO~P'vO&Y%UO~Oa!bOh!iO!X!kO!f!mOVba_bakbalbambanbaobapbasbazba{ba!xba#gba%[ba%_ba%jba%kba%lba%mba%nba%oba%pba%qba%rba%sba%zbagba!Tba!Uba%{ba!Wba![ba!Qba#[batba!mba~On%ZO~Oo%ZO~P'vOo0cO~P'vOk0eOl0fOm0dOn0dOo0mOp0nOs0rOg%wX!T%wX!U%wX%{%wX!W%wX![%wX!Q%wX#[%wX!m%wX~P)pO%{%]Og%vXz%vX!T%vX!U%vX!W%vX{%vX~Og%_Oz%`O!T%dO!U%cO~Og%_O~Oz%gO!T%dO!U%cO!W&SX~O!W%kO~Oz%lO{%nO!T%dO!U%cO![%}X~O![%rO~O![%sO~OQ#XO%`#XO%a%uO~OV%wOo0cOv0qO!PrO~P'vOQ#^OR#[O%`#^O%a%zO~OV!qa_!qaa!qah!qak!qal!qam!qan!qao!qap!qas!qaz!qa{!qa!X!qa!f!qa!x!qa#g!qa%[!qa%_!qa%j!qa%k!qa%l!qa%m!qa%n!qa%o!qa%p!qa%q!qa%r!qa%s!qa%z!qag!qa!T!qa!U!qa%{!qa!W!qa![!qa!Q!qa#[!qat!qa!m!qa~P#yOz%|O{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P%SOV&OOopOvqO{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P'vOz%|O{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#g$zX%[$zX%_$zX~P'vO#g#gO%[&TO%_&TO~O!f&UOh&sX%[&sXz&sX#[&sX#g&sX%_&sX#Z&sXg&sX~Oh!iO%[&WO~Okealeameaneaoeapeaseazea{ea!xea#gea%[ea%_ea%zeagea!Tea!Uea%{ea!Wea![ea!Qea#[eatea!mea~P%SOsqazqa{qa#gqa%[qa%_qa%zqa~Ok!pOl!qOm!oOn!oOo!rOp!sO!xqa~PEcO%z&YOz%yX{%yX~O%uWOz%yX{%yX~Oz&]O{wX~O{&_O~Oz%lO#g%}X%[%}X%_%}Xg%}X{%}X![%}X!m%}X%z%}X~OV0lOo0cOv0qO!PrO~P'vO%z#|O#gUa%[Ua%_Ua~Oz&hO#g&PX%[&PX%_&PXn&PX~P%SOz&kO!Q&jO#g#Wa%[#Wa%_#Wa~Oz&lO#[&nO#g&rX%[&rX%_&rXg&rX~O!f$YO!r$YO#Z&qO%uWO~O#Z&qO~Oz&sO#g&tX%[&tX%_&tX~Oz&uO#g&pX%[&pX%_&pX{&pX~O!X&wO%z&xO~Oz&|On&wX~P%SOn'PO~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO%['UO~P'vOt'YO#p'WO#q'XOP#naV#naf#nah#nao#nas#nav#na!P#na!Q#na!T#na!U#na!X#na!]#na!h#na!r#na!s#na!t#na!{#na!}#na#P#na#R#na#T#na#X#na#Z#na#^#na#_#na#a#na#c#na#l#na#o#na#s#na#u#na#z#na#}#na$P#na%X#na%o#na%p#na%t#na%u#na&Z#na&[#na&]#na&^#na&_#na&`#na&a#na&b#na&c#na&d#na&e#na&f#na&g#na&h#na&i#na&j#na%Z#na%_#na~Oz'ZO#[']O{&xX~Oh'_O!X&wO~Oh!iO{$jO!X&wO~O{'eO~P%SO%['hO%_'hO~OS'iO%['hO%_'hO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%k!]O~P!#uO%kWi~P!#uOV!aO_!aOa!bOh!iO!X!kO!f!mO%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%m!_O%n!_O~P!&pO%mWi%nWi~P!&pOa!bOh!iO!X!kO!f!mOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%mWi%nWi%oWi%pWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~OV!aO_!aO%q!aO%r!aO%s!aO~P!)nOVWi_Wi%qWi%rWi%sWi~P!)nO!T%dO!U%cOg&VXz&VX~O%z'kO%{'kO~P,eOz'mOg&UX~Og'oO~Oz'pO{'rO!W&XX~Oo0cOv0qOz'pO{'sO!W&XX~P'vO!W'uO~Om!oOn!oOo!rOp!sOkjisjizji{ji!xji#gji%[ji%_ji%zji~Ol!qO~P!.aOlji~P!.aOk0eOl0fOm0dOn0dOo0mOp0nO~Ot'wO~P!/jOV'|Og'}Oo0cOv0qO~P'vOg'}Oz(OO~Og(QO~O!U(SO~Og(TOz(OO!T%dO!U%cO~P%SOk0eOl0fOm0dOn0dOo0mOp0nOgqa!Tqa!Uqa%{qa!Wqa![qa!Qqa#[qatqa!mqa~PEcOV'|Oo0cOv0qO!W&Sa~P'vOz(WO!W&Sa~O!W(XO~Oz(WO!T%dO!U%cO!W&Sa~P%SOV(]Oo0cOv0qO![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~P'vOz(^O![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~O![(aO~Oz(^O!T%dO!U%cO![%}a~P%SOz(dO!T%dO!U%cO![&Ta~P%SOz(gO{&lX![&lX!m&lX%z&lX~O{(kO![(mO!m(nO%z(jO~OV&OOopOvqO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~P'vOz(pO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~O!f&UOh&sa%[&saz&sa#[&sa#g&sa%_&sa#Z&sag&sa~O%[(uO~OV#sOa#tO%uWO~Oz&]O{wa~OopOvqO~P'vOz(^O#g%}a%[%}a%_%}ag%}a{%}a![%}a!m%}a%z%}a~P%SOz(zO#g%hX%[%hX%_%hX%z%hX~O%z#|O#gUi%[Ui%_Ui~O#g&Pa%[&Pa%_&Pan&Pa~P'vOz(}O#g&Pa%[&Pa%_&Pan&Pa~O%uWO#g&ra%[&ra%_&rag&ra~Oz)SO#g&ra%[&ra%_&rag&ra~Og)VO~OV)WOh$WO%uWO~O#Z)XO~O%uWO#g&ta%[&ta%_&ta~Oz)ZO#g&ta%[&ta%_&ta~Oo0cOv0qO#g&pa%[&pa%_&pa{&pa~P'vOz)^O#g&pa%[&pa%_&pa{&pa~OV)`Oa)`O%uWO~O%z)eO~Ot)hO#j)gOP#hiV#hif#hih#hio#his#hiv#hi!P#hi!Q#hi!T#hi!U#hi!X#hi!]#hi!h#hi!r#hi!s#hi!t#hi!{#hi!}#hi#P#hi#R#hi#T#hi#X#hi#Z#hi#^#hi#_#hi#a#hi#c#hi#l#hi#o#hi#s#hi#u#hi#z#hi#}#hi$P#hi%X#hi%o#hi%p#hi%t#hi%u#hi&Z#hi&[#hi&]#hi&^#hi&_#hi&`#hi&a#hi&b#hi&c#hi&d#hi&e#hi&f#hi&g#hi&h#hi&i#hi&j#hi%Z#hi%_#hi~Ot)iOP#kiV#kif#kih#kio#kis#kiv#ki!P#ki!Q#ki!T#ki!U#ki!X#ki!]#ki!h#ki!r#ki!s#ki!t#ki!{#ki!}#ki#P#ki#R#ki#T#ki#X#ki#Z#ki#^#ki#_#ki#a#ki#c#ki#l#ki#o#ki#s#ki#u#ki#z#ki#}#ki$P#ki%X#ki%o#ki%p#ki%t#ki%u#ki&Z#ki&[#ki&]#ki&^#ki&_#ki&`#ki&a#ki&b#ki&c#ki&d#ki&e#ki&f#ki&g#ki&h#ki&i#ki&j#ki%Z#ki%_#ki~OV)kOn&wa~P'vOz)lOn&wa~Oz)lOn&wa~P%SOn)pO~O%Y)tO~Ot)wO#p'WO#q)vOP#niV#nif#nih#nio#nis#niv#ni!P#ni!Q#ni!T#ni!U#ni!X#ni!]#ni!h#ni!r#ni!s#ni!t#ni!{#ni!}#ni#P#ni#R#ni#T#ni#X#ni#Z#ni#^#ni#_#ni#a#ni#c#ni#l#ni#o#ni#s#ni#u#ni#z#ni#}#ni$P#ni%X#ni%o#ni%p#ni%t#ni%u#ni&Z#ni&[#ni&]#ni&^#ni&_#ni&`#ni&a#ni&b#ni&c#ni&d#ni&e#ni&f#ni&g#ni&h#ni&i#ni&j#ni%Z#ni%_#ni~OV)zOo0cOv0qO{$jO~P'vOo0cOv0qO{&xa~P'vOz*OO{&xa~OV*SOa*TOg*WO%q*UO%uWO~O{$jO&{*YO~Oh'_O~Oh!iO{$jO~O%[*_O~O%[*aO%_*aO~OV$}Oa$}Oo0cOv0qOg&Ua~P'vOz*dOg&Ua~Oo0cOv0qO{*gO!W&Xa~P'vOz*hO!W&Xa~Oo0cOv0qOz*hO{*kO!W&Xa~P'vOo0cOv0qOz*hO!W&Xa~P'vOz*hO{*kO!W&Xa~Om0dOn0dOo0mOp0nOgjikjisjizji!Tji!Uji%{ji!Wji{ji![ji#gji%[ji%_ji!Qji#[jitji!mji%zji~Ol0fO~P!NkOlji~P!NkOV'|Og*pOo0cOv0qO~P'vOn*rO~Og*pOz*tO~Og*uO~OV'|Oo0cOv0qO!W&Si~P'vOz*vO!W&Si~O!W*wO~OV(]Oo0cOv0qO![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~P'vOz*zO!T%dO!U%cO![&Ti~Oz*}O![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~O![+OO~Oa+QOo0cOv0qO![&Ti~P'vOz*zO![&Ti~O![+SO~OV+UOo0cOv0qO{&la![&la!m&la%z&la~P'vOz+VO{&la![&la!m&la%z&la~O!]+YO&n+[O![!nX~O![+^O~O{(kO![+_O~O{(kO![+_O!m+`O~OV&OOopOvqO{%hq!x%hq#g%hq%[%hq%_%hq%z%hq~P'vOz$ri{$ri!x$ri#g$ri%[$ri%_$ri%z$ri~P%SOV&OOopOvqO~P'vOV&OOo0cOv0qO#g%ha%[%ha%_%ha%z%ha~P'vOz+aO#g%ha%[%ha%_%ha%z%ha~Oz$ia#g$ia%[$ia%_$ian$ia~P%SO#g&Pi%[&Pi%_&Pin&Pi~P'vOz+dO#g#Wq%[#Wq%_#Wq~O#[+eOz$va#g$va%[$va%_$vag$va~O%uWO#g&ri%[&ri%_&rig&ri~Oz+gO#g&ri%[&ri%_&rig&ri~OV+iOh$WO%uWO~O%uWO#g&ti%[&ti%_&ti~Oo0cOv0qO#g&pi%[&pi%_&pi{&pi~P'vO{#{Oz#eX!W#eX~Oz+mO!W&uX~O!W+oO~Ot+rO#j)gOP#hqV#hqf#hqh#hqo#hqs#hqv#hq!P#hq!Q#hq!T#hq!U#hq!X#hq!]#hq!h#hq!r#hq!s#hq!t#hq!{#hq!}#hq#P#hq#R#hq#T#hq#X#hq#Z#hq#^#hq#_#hq#a#hq#c#hq#l#hq#o#hq#s#hq#u#hq#z#hq#}#hq$P#hq%X#hq%o#hq%p#hq%t#hq%u#hq&Z#hq&[#hq&]#hq&^#hq&_#hq&`#hq&a#hq&b#hq&c#hq&d#hq&e#hq&f#hq&g#hq&h#hq&i#hq&j#hq%Z#hq%_#hq~On$|az$|a~P%SOV)kOn&wi~P'vOz+yOn&wi~Oz,TO{$jO#[,TO~O#q,VOP#nqV#nqf#nqh#nqo#nqs#nqv#nq!P#nq!Q#nq!T#nq!U#nq!X#nq!]#nq!h#nq!r#nq!s#nq!t#nq!{#nq!}#nq#P#nq#R#nq#T#nq#X#nq#Z#nq#^#nq#_#nq#a#nq#c#nq#l#nq#o#nq#s#nq#u#nq#z#nq#}#nq$P#nq%X#nq%o#nq%p#nq%t#nq%u#nq&Z#nq&[#nq&]#nq&^#nq&_#nq&`#nq&a#nq&b#nq&c#nq&d#nq&e#nq&f#nq&g#nq&h#nq&i#nq&j#nq%Z#nq%_#nq~O#[,WOz%Oa{%Oa~Oo0cOv0qO{&xi~P'vOz,YO{&xi~O{#{O%z,[Og&zXz&zX~O%uWOg&zXz&zX~Oz,`Og&yX~Og,bO~O%Y,eO~O!T%dO!U%cOg&Viz&Vi~OV$}Oa$}Oo0cOv0qOg&Ui~P'vO{,hOz$la!W$la~Oo0cOv0qO{,iOz$la!W$la~P'vOo0cOv0qO{*gO!W&Xi~P'vOz,lO!W&Xi~Oo0cOv0qOz,lO!W&Xi~P'vOz,lO{,oO!W&Xi~Og$hiz$hi!W$hi~P%SOV'|Oo0cOv0qO~P'vOn,qO~OV'|Og,rOo0cOv0qO~P'vOV'|Oo0cOv0qO!W&Sq~P'vOz$gi![$gi#g$gi%[$gi%_$gig$gi{$gi!m$gi%z$gi~P%SOV(]Oo0cOv0qO~P'vOa+QOo0cOv0qO![&Tq~P'vOz,sO![&Tq~O![,tO~OV(]Oo0cOv0qO![%}q#g%}q%[%}q%_%}qg%}q{%}q!m%}q%z%}q~P'vO{,uO~OV+UOo0cOv0qO{&li![&li!m&li%z&li~P'vOz,zO{&li![&li!m&li%z&li~O!]+YO&n+[O![!na~O{(kO![,}O~OV&OOo0cOv0qO#g%hi%[%hi%_%hi%z%hi~P'vOz-OO#g%hi%[%hi%_%hi%z%hi~O%uWO#g&rq%[&rq%_&rqg&rq~Oz-RO#g&rq%[&rq%_&rqg&rq~OV)`Oa)`O%uWO!W&ua~Oz-TO!W&ua~On$|iz$|i~P%SOV)kO~P'vOV)kOn&wq~P'vOt-XOP#myV#myf#myh#myo#mys#myv#my!P#my!Q#my!T#my!U#my!X#my!]#my!h#my!r#my!s#my!t#my!{#my!}#my#P#my#R#my#T#my#X#my#Z#my#^#my#_#my#a#my#c#my#l#my#o#my#s#my#u#my#z#my#}#my$P#my%X#my%o#my%p#my%t#my%u#my&Z#my&[#my&]#my&^#my&_#my&`#my&a#my&b#my&c#my&d#my&e#my&f#my&g#my&h#my&i#my&j#my%Z#my%_#my~O%Z-]O%_-]O~P`O#q-^OP#nyV#nyf#nyh#nyo#nys#nyv#ny!P#ny!Q#ny!T#ny!U#ny!X#ny!]#ny!h#ny!r#ny!s#ny!t#ny!{#ny!}#ny#P#ny#R#ny#T#ny#X#ny#Z#ny#^#ny#_#ny#a#ny#c#ny#l#ny#o#ny#s#ny#u#ny#z#ny#}#ny$P#ny%X#ny%o#ny%p#ny%t#ny%u#ny&Z#ny&[#ny&]#ny&^#ny&_#ny&`#ny&a#ny&b#ny&c#ny&d#ny&e#ny&f#ny&g#ny&h#ny&i#ny&j#ny%Z#ny%_#ny~Oz-aO{$jO#[-aO~Oo0cOv0qO{&xq~P'vOz-dO{&xq~O%z,[Og&zaz&za~OV*SOa*TO%q*UO%uWOg&ya~Oz-hOg&ya~O$S-lO~OV$}Oa$}Oo0cOv0qO~P'vOo0cOv0qO{-mOz$li!W$li~P'vOo0cOv0qOz$li!W$li~P'vO{-mOz$li!W$li~Oo0cOv0qO{*gO~P'vOo0cOv0qO{*gO!W&Xq~P'vOz-pO!W&Xq~Oo0cOv0qOz-pO!W&Xq~P'vOs-sO!T%dO!U%cOg&Oq!W&Oq![&Oqz&Oq~P!/jOa+QOo0cOv0qO![&Ty~P'vOz$ji![$ji~P%SOa+QOo0cOv0qO~P'vOV+UOo0cOv0qO~P'vOV+UOo0cOv0qO{&lq![&lq!m&lq%z&lq~P'vO{(kO![-xO!m-yO%z-wO~OV&OOo0cOv0qO#g%hq%[%hq%_%hq%z%hq~P'vO%uWO#g&ry%[&ry%_&ryg&ry~OV)`Oa)`O%uWO!W&ui~Ot-}OP#m!RV#m!Rf#m!Rh#m!Ro#m!Rs#m!Rv#m!R!P#m!R!Q#m!R!T#m!R!U#m!R!X#m!R!]#m!R!h#m!R!r#m!R!s#m!R!t#m!R!{#m!R!}#m!R#P#m!R#R#m!R#T#m!R#X#m!R#Z#m!R#^#m!R#_#m!R#a#m!R#c#m!R#l#m!R#o#m!R#s#m!R#u#m!R#z#m!R#}#m!R$P#m!R%X#m!R%o#m!R%p#m!R%t#m!R%u#m!R&Z#m!R&[#m!R&]#m!R&^#m!R&_#m!R&`#m!R&a#m!R&b#m!R&c#m!R&d#m!R&e#m!R&f#m!R&g#m!R&h#m!R&i#m!R&j#m!R%Z#m!R%_#m!R~Oo0cOv0qO{&xy~P'vOV*SOa*TO%q*UO%uWOg&yi~O$S-lO%Z.VO%_.VO~OV.aOh._O!X.^O!].`O!h.YO!s.[O!t.[O%p.XO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O~Oo0cOv0qOz$lq!W$lq~P'vO{.fOz$lq!W$lq~Oo0cOv0qO{*gO!W&Xy~P'vOz.gO!W&Xy~Oo0cOv.kO~P'vOs-sO!T%dO!U%cOg&Oy!W&Oy![&Oyz&Oy~P!/jO{(kO![.nO~O{(kO![.nO!m.oO~OV*SOa*TO%q*UO%uWO~Oh.tO!f.rOz$TX#[$TX%j$TXg$TX~Os$TX{$TX!W$TX![$TX~P$-VO%o.vO%p.vOs$UXz$UX{$UX#[$UX%j$UX!W$UXg$UX![$UX~O!h.xO~Oz.|O#[/OO%j.yOs&|X{&|X!W&|Xg&|X~Oa/RO~P$)oOh.tOs&}Xz&}X{&}X#[&}X%j&}X!W&}Xg&}X![&}X~Os/VO{$jO~Oo0cOv0qOz$ly!W$ly~P'vOo0cOv0qO{*gO!W&X!R~P'vOz/ZO!W&X!R~Og&RXs&RX!T&RX!U&RX!W&RX![&RXz&RX~P!/jOs-sO!T%dO!U%cOg&Qa!W&Qa![&Qaz&Qa~O{(kO![/^O~O!f.rOh$[as$[az$[a{$[a#[$[a%j$[a!W$[ag$[a![$[a~O!h/eO~O%o.vO%p.vOs$Uaz$Ua{$Ua#[$Ua%j$Ua!W$Uag$Ua![$Ua~O%j.yOs$Yaz$Ya{$Ya#[$Ya!W$Yag$Ya![$Ya~Os&|a{&|a!W&|ag&|a~P$)cOz/jOs&|a{&|a!W&|ag&|a~O!W/mO~Og/mO~O{/oO~O![/pO~Oo0cOv0qO{*gO!W&X!Z~P'vO{/sO~O%z/tO~P$-VOz/uO#[/OO%j.yOg'PX~Oz/uOg'PX~Og/wO~O!h/xO~O#[/OOs%Saz%Sa{%Sa%j%Sa!W%Sag%Sa![%Sa~O#[/OO%j.yOs%Waz%Wa{%Wa!W%Wag%Wa~Os&|i{&|i!W&|ig&|i~P$)cOz/zO#[/OO%j.yO!['Oa~O{$da~P%SOg'Pa~P$)cOz0SOg'Pa~Oa0UO!['Oi~P$)oOz0WO!['Oi~Oz0WO#[/OO%j.yO!['Oi~O#[/OO%j.yOg$biz$bi~O%z0ZO~P$-VO#[/OO%j.yOg%Vaz%Va~Og'Pi~P$)cO{0^O~Oa0UO!['Oq~P$)oOz0`O!['Oq~O#[/OO%j.yOz%Ui![%Ui~Oa0UO~P$)oOa0UO!['Oy~P$)oO#[/OO%j.yOg$ciz$ci~O#[/OO%j.yOz%Uq![%Uq~Oz+aO#g%ha%[%ha%_%ha%z%ha~P%SOV&OOo0cOv0qO~P'vOn0hO~Oo0hO~P'vO{0iO~Ot0jO~P!/jO&]&Z&j&h&i&g&f&d&e&c&b&`&a&_&^&[%u~",goto:"!=l'QPPPPPP'RP'Z*s+]+v,b,}-kP.YP'Z.y.y'ZPPP'Z2cPPPPPP2c5VPP5VP7g7p=xPP={>m>pPP'Z'ZPP?PPP'Z'ZPP'Z'Z'Z'Z'Z?T?}'ZP@QP@WD_G{HPPHSH^Hb'ZPPPHeHn'RP'R'RP'RP'RP'RP'RP'R'R'RP'RPP'RPP'RP'RPHtIQIYPIaIgPIaPIaIaPPPIaPKuPLOLYL`KuPIaLiPIaPLpLvPLzM`M}NhLzLzNnN{LzLzLzLz! a! g! j! o! r! |!!S!!`!!r!!x!#S!#Y!#v!#|!$S!$^!$d!$j!$|!%W!%^!%d!%n!%t!%z!&Q!&W!&^!&h!&n!&x!'O!'X!'_!'n!'v!(Q!(XPPPPPPPPPPP!(_!(b!(h!(q!({!)WPPPPPPPPPPPP!-z!/`!3`!6pPP!6x!7X!7b!8Z!8Q!8d!8j!8m!8p!8s!8{!9lPPPPPPPPPPPPPPPPP!9o!9s!9yP!:_!:c!:o!:x!;U!;l!;o!;r!;x!<O!<U!<XP!<a!<j!=f!=i]eOn#g$j)t,P'}`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0r}!cQ#c#p$R$d$p%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g!P!dQ#c#p$R$d$p$u%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g!R!eQ#c#p$R$d$p$u$v%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g!T!fQ#c#p$R$d$p$u$v$w%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g!V!gQ#c#p$R$d$p$u$v$w$x%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g!X!hQ#c#p$R$d$p$u$v$w$x$y%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g!]!hQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g'}TOTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0r&cVOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$h$j$}%S%Z%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/Z/s0c0d0e0f0h0i0j0k0n0r%mXOYZ[dnrxy}!P!Q!U!i!k#[#d#g#y#{#}$Q$h$j$}%S%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,s,u,w,y,z-O-d-f-m-p.f.g/Z0i0j0kQ#vqQ/[.kR0o0q't`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rh#jhz{$W$Z&l&q)S)X+f+g-RW#rq&].k0qQ$]|Q$a!OQ$n!VQ$o!WW$|!i'm*d,gS&[#s#tQ'S$iQ(s&UQ)U&nU)Y&s)Z+jW)a&w+m-T-{Q*Q']W*R'_,`-h.TQ+l)`S,_*S*TQ-Q+eQ-_,TQ-c,WQ.R-al.W-l.^._.a.z.|/R/j/o/t/y0U0Z0^Q/S.`Q/a.tQ/l/OU0P/u0S0[X0V/z0W0_0`R&Z#r!_!wYZ!P!Q!k%S%`%g'p'r's(O(W)g*g*h*k*q*t*v,h,i,k,l,o-m-p.f.g/ZR%^!vQ!{YQ%x#[Q&d#}Q&g$QR,{+YT.j-s/s![!jQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0gQ&X#kQ'c$oR*^'dR'l$|Q%V!mR/_.r'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rS#a_#b!P.[-l.^._.`.a.t.z.|/R/j/o/t/u/y/z0S0U0W0Z0[0^0_0`'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rT#a_#bT#^^#_R(o%xa(l%x(n(o+`,{-y-z.oT+[(k+]R-z,{Q$PsQ+l)aR,^*RX#}s$O$P&fQ&y$aQ'a$nQ'd$oR)s'SQ)b&wV-S+m-T-{ZgOn$j)t,PXkOn)t,PQ$k!TQ&z$bQ&{$cQ'^$mQ'b$oQ)q'RQ)x'WQ){'XQ)|'YQ*Z'`S*]'c'dQ+s)gQ+u)hQ+v)iQ+z)oS+|)r*[Q,Q)vQ,R)wS,S)y)zQ,d*^Q-V+rQ-W+tQ-Y+{S-Z+},OQ-`,UQ-b,VQ-|-XQ.O-[Q.P-^Q.Q-_Q.p-}Q.q.RQ/W.dR/r/XWkOn)t,PR#mjQ'`$nS)r'S'aR,O)sQ,]*RR-f,^Q*['`Q+})rR-[,OZiOjn)t,PQ'f$pR*`'gT-j,e-ku.c-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^t.c-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^Q/S.`X0V/z0W0_0`!P.Z-l.^._.`.a.t.z.|/R/j/o/t/u/y/z0S0U0W0Z0[0^0_0`Q.w.YR/f.xg.z.].{/b/i/n/|0O0Q0]0a0bu.b-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^X.u.W.b/a0PR/c.tV0R/u0S0[R/X.dQnOS#on,PR,P)tQ&^#uR(x&^S%m#R#wS(_%m(bT(b%p&`Q%a!yQ%h!}W(P%a%h(U(YQ(U%eR(Y%jQ&i$RR)O&iQ(e%qQ*{(`T+R(e*{Q'n%OR*e'nS'q%R%SY*i'q*j,m-q.hU*j'r's'tU,m*k*l*mS-q,n,oR.h-rQ#Y]R%t#YQ#_^R%y#_Q(h%vS+W(h+XR+X(iQ+](kR,|+]Q#b_R%{#bQ#ebQ%}#cW&Q#e%}({+bQ({&cR+b0gQ$OsS&e$O&fR&f$PQ&v$_R)_&vQ&V#jR(t&VQ&m$VS)T&m+hR+h)UQ$Z{R&p$ZQ&t$]R)[&tQ+n)bR-U+nQ#hfR&S#hQ)f&zR+q)fQ&}$dS)m&})nR)n'OQ'V$kR)u'VQ'[$lS*P'[,ZR,Z*QQ,a*VR-i,aWjOn)t,PR#ljQ-k,eR.U-kd.{.]/b/i/n/|0O0Q0]0a0bR/h.{U.s.W/a0PR/`.sQ/{/nS0X/{0YR0Y/|S/v/b/cR0T/vQ.}.]R/k.}R!ZPXmOn)t,PWlOn)t,PR'T$jYfOn$j)t,PR&R#g[sOn#g$j)t,PR&d#}&bQOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$h$j$}%S%Z%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/Z/s0c0d0e0f0h0i0j0k0n0rQ!nTQ#caQ#poU$Rt%c(SS$d!R$gQ$p!XQ$u!cQ$v!dQ$w!eQ$x!fQ$y!gQ$z!hQ%e!zQ%j#OQ%p#SQ%q#TQ&`#xQ'O$eQ'g$qQ(q&OU(|&h(}+cW)j&|)l+x+yQ*o'|Q*x(]Q+w)kQ,v+QQ/q/VR0g0lQ!yYQ!}ZQ$b!PQ$c!QQ%R!kQ't%S^'{%`%g(O(W*q*t*v^*f'p*h,k,l-p.g/ZQ*l'rQ*m'sQ+t)gQ,j*gQ,n*kQ-n,hQ-o,iQ-r,oQ.e-mR/Y.f[bOn#g$j)t,P!^!vYZ!P!Q!k%S%`%g'p'r's(O(W)g*g*h*k*q*t*v,h,i,k,l,o-m-p.f.g/ZQ#R[Q#fdS#wrxQ$UyW$_}$Q'P)pS$l!U$hW${!i'm*d,gS%v#[+Y`&P#d%|(p(r(z+a-O0kQ&a#yQ&b#{Q&c#}Q'j$}Q'z%^W([%l(^*y*}Q(`%nQ(i%wQ(v&ZS(y&_0iQ)P&jQ)Q&kU)]&u)^+kQ)d&xQ)y'WY)}'Z*O,X,Y-dQ*b'lS*n'w0jW+P(d*z,s,wW+T(g+V,y,zQ+p)eQ,U)zQ,c*YQ,x+UQ-P+dQ-e,]Q-v,uR.S-fhUOn#d#g$j%|&_'w(p(r)t,P%S!uYZ[drxy}!P!Q!U!i!k#[#y#{#}$Q$h$}%S%^%`%g%l%n%w&Z&j&k&u&x'P'W'Z'l'm'p'r's(O(W(^(d(g(z)^)e)g)p)z*O*Y*d*g*h*k*q*t*v*y*z*}+U+V+Y+a+d+k,X,Y,],g,h,i,k,l,o,s,u,w,y,z-O-d-f-m-p.f.g/Z0i0j0kQ#qpW%W!o!s0d0nQ%X!pQ%Y!qQ%[!tQ%f0cS'v%Z0hQ'x0eQ'y0fQ,p*rQ-u,qS.i-s/sR0p0rU#uq.k0qR(w&][cOn#g$j)t,PZ!xY#[#}$Q+YQ#W[Q#zrR$TxQ%b!yQ%i!}Q%o#RQ'j${Q(V%eQ(Z%jQ(c%pQ(f%qQ*|(`Q,f*bQ-t,pQ.m-uR/].lQ$StQ(R%cR*s(SQ.l-sR/}/sR#QZR#V[R%Q!iQ%O!iV*c'm*d,g!]!lQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0gR%T!kT#]^#_Q%x#[R,{+YQ(m%xS+_(n(oQ,}+`Q-x,{S.n-y-zR/^.oT+Z(k+]Q$`}Q&g$QQ)o'PR+{)pQ$XzQ)W&qR+i)XQ$XzQ&o$WQ)W&qR+i)XQ#khW$Vz$W&q)XQ$[{Q&r$ZZ)R&l)S+f+g-RR$^|R)c&wXlOn)t,PQ$f!RR'Q$gQ$m!UR'R$hR*X'_Q*V'_V-g,`-h.TQ.d-lQ/P.^R/Q._U.]-l.^._Q/U.aQ/b.tQ/g.zU/i.|/j/yQ/n/RQ/|/oQ0O/tU0Q/u0S0[Q0]0UQ0a0ZR0b0^R/T.`R/d.t",nodeNames:" print Escape { Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ) ( ParenthesizedExpression BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from TupleExpression ComprehensionExpression async for LambdaExpression ] [ ArrayExpression ArrayComprehensionExpression } { DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatSelfDoc FormatConversion FormatSpec FormatReplacement FormatSelfDoc ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert TypeDefinition type TypeParamList TypeParam StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At MatchStatement match MatchBody MatchClause case CapturePattern LiteralPattern ArithOp ArithOp AsPattern OrPattern LogicOp AttributePattern SequencePattern MappingPattern StarPattern ClassPattern PatternArgList KeywordPattern KeywordPattern Guard",maxTerm:277,context:wk,nodeProps:[["isolate",-5,4,71,72,73,77,""],["group",-15,6,85,87,88,90,92,94,96,98,99,100,102,105,108,110,"Statement Statement",-22,8,18,21,25,40,49,50,56,57,60,61,62,63,64,67,70,71,72,79,80,81,82,"Expression",-10,114,116,119,121,122,126,128,133,135,138,"Statement",-9,143,144,147,148,150,151,152,153,154,"Pattern"],["openedBy",23,"(",54,"[",58,"{"],["closedBy",24,")",55,"]",59,"}"]],propSources:[wC],skippedNodes:[0,4],repeatNodeCount:34,tokenData:"!2|~R!`OX%TXY%oY[%T[]%o]p%Tpq%oqr'ars)Yst*xtu%Tuv,dvw-hwx.Uxy/tyz0[z{0r{|2S|}2p}!O3W!O!P4_!P!Q:Z!Q!R;k!R![>_![!]Do!]!^Es!^!_FZ!_!`Gk!`!aHX!a!b%T!b!cIf!c!dJU!d!eK^!e!hJU!h!i!#f!i!tJU!t!u!,|!u!wJU!w!x!.t!x!}JU!}#O!0S#O#P&o#P#Q!0j#Q#R!1Q#R#SJU#S#T%T#T#UJU#U#VK^#V#YJU#Y#Z!#f#Z#fJU#f#g!,|#g#iJU#i#j!.t#j#oJU#o#p!1n#p#q!1s#q#r!2a#r#s!2f#s$g%T$g;'SJU;'S;=`KW<%lOJU`%YT&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T`%lP;=`<%l%To%v]&n`%c_OX%TXY%oY[%T[]%o]p%Tpq%oq#O%T#O#P&o#P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To&tX&n`OY%TYZ%oZ]%T]^%o^#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc'f[&n`O!_%T!_!`([!`#T%T#T#U(r#U#f%T#f#g(r#g#h(r#h#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(cTmR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(yT!mR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk)aV&n`&[ZOr%Trs)vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk){V&n`Or%Trs*bs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk*iT&n`&^ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To+PZS_&n`OY*xYZ%TZ]*x]^%T^#o*x#o#p+r#p#q*x#q#r+r#r;'S*x;'S;=`,^<%lO*x_+wTS_OY+rZ]+r^;'S+r;'S;=`,W<%lO+r_,ZP;=`<%l+ro,aP;=`<%l*xj,kV%rQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-XT!xY&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-oV%lQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.]V&n`&ZZOw%Twx.rx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.wV&n`Ow%Twx/^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/eT&n`&]ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/{ThZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc0cTgR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk0yXVZ&n`Oz%Tz{1f{!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk1mVaR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk2ZV%oZ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc2wTzR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To3_W%pZ&n`O!_%T!_!`-Q!`!a3w!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Td4OT&{S&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk4fX!fQ&n`O!O%T!O!P5R!P!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5WV&n`O!O%T!O!P5m!P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5tT!rZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti6[a!hX&n`O!Q%T!Q![6T![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S6T#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti7fZ&n`O{%T{|8X|}%T}!O8X!O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8^V&n`O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8z]!hX&n`O!Q%T!Q![8s![!l%T!l!m9s!m#R%T#R#S8s#S#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti9zT!hX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk:bX%qR&n`O!P%T!P!Q:}!Q!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj;UV%sQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti;ro!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!d%T!d!e?q!e!g%T!g!h7a!h!l%T!l!m9s!m!q%T!q!rA]!r!z%T!z!{Bq!{#R%T#R#S>_#S#U%T#U#V?q#V#X%T#X#Y7a#Y#^%T#^#_9s#_#c%T#c#dA]#d#l%T#l#mBq#m#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti=xV&n`O!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti>fc!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S>_#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti?vY&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti@mY!hX&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiAbX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBUX!hX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBv]&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiCv]!hX&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToDvV{_&n`O!_%T!_!`E]!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TcEdT%{R&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkEzT#gZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkFbXmR&n`O!^%T!^!_F}!_!`([!`!a([!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjGUV%mQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkGrV%zZ&n`O!_%T!_!`([!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkH`WmR&n`O!_%T!_!`([!`!aHx!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjIPV%nQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkIoV_Q#}P&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToJ_]&n`&YS%uZO!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoKZP;=`<%lJUoKge&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!tJU!t!uLx!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#gLx#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoMRa&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUkN_V&n`&`ZOr%TrsNts#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkNyV&n`Or%Trs! `s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! gT&n`&bZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! }V&n`&_ZOw%Twx!!dx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!!iV&n`Ow%Twx!#Ox#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!#VT&n`&aZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!#oe&n`&YS%uZOr%Trs!%Qsw%Twx!&px!Q%T!Q![JU![!c%T!c!tJU!t!u!(`!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#g!(`#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!%XV&n`&dZOr%Trs!%ns#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!%sV&n`Or%Trs!&Ys#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&aT&n`&fZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&wV&n`&cZOw%Twx!'^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!'cV&n`Ow%Twx!'xx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!(PT&n`&eZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!(ia&n`&YS%uZOr%Trs!)nsw%Twx!+^x!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!)uV&n`&hZOr%Trs!*[s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*aV&n`Or%Trs!*vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*}T&n`&jZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!+eV&n`&gZOw%Twx!+zx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,PV&n`Ow%Twx!,fx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,mT&n`&iZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!-Vi&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!dJU!d!eLx!e!hJU!h!i!(`!i!}JU!}#R%T#R#SJU#S#T%T#T#UJU#U#VLx#V#YJU#Y#Z!(`#Z#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUo!.}a&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!0ZT!XZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc!0qT!WR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj!1XV%kQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!1sO!]~k!1zV%jR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!2fO![~i!2mT%tX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T",tokenizers:[wO,wy,wg,wS,0,1,2,3,4],topRules:{Script:[0,5]},specialized:[{term:221,get:e=>wT[e]||-1}],tokenPrec:7664}),wM=new mM,wE=new Set(["Script","Body","FunctionDefinition","ClassDefinition","LambdaExpression","ForStatement","MatchClause"]);function wN(e){return(t,r,n)=>{if(n)return!1;let i=t.node.getChild("VariableName");return i&&r(i,e),!0}}let w_={FunctionDefinition:wN("function"),ClassDefinition:wN("class"),ForStatement(e,t,r){if(r){for(let r=e.node.firstChild;r;r=r.nextSibling)if("VariableName"==r.name)t(r,"variable");else if("in"==r.name)break}},ImportStatement(e,t){var r,n;let{node:i}=e,s=(null===(r=i.firstChild)||void 0===r?void 0:r.name)=="from";for(let e=i.getChild("import");e;e=e.nextSibling)"VariableName"==e.name&&(null===(n=e.nextSibling)||void 0===n?void 0:n.name)!="as"&&t(e,s?"variable":"namespace")},AssignStatement(e,t){for(let r=e.node.firstChild;r;r=r.nextSibling)if("VariableName"==r.name)t(r,"variable");else if(":"==r.name||"AssignOp"==r.name)break},ParamList(e,t){for(let r=null,n=e.node.firstChild;n;n=n.nextSibling)"VariableName"!=n.name||r&&/\*|AssignOp/.test(r.name)||t(n,"variable"),r=n},CapturePattern:wN("variable"),AsPattern:wN("variable"),__proto__:null},wj=/^[\w\xa1-\uffff][\w\d\xa1-\uffff]*$/,wD=["String","FormatString","Comment","PropertyName"];function wR(e){let t=m8(e.state).resolveInner(e.pos,-1);if(wD.indexOf(t.name)>-1)return null;let r="VariableName"==t.name||t.to-t.from<20&&wj.test(e.state.sliceDoc(t.from,t.to));if(!r&&!e.explicit)return null;let n=[];for(let r=t;r;r=r.parent)wE.has(r.name)&&(n=n.concat(function e(t,r){let n=wM.get(r);if(n)return n;let i=[],s=!0;function o(e,r){let n=t.sliceString(e.from,e.to);i.push({label:n,type:r})}return r.cursor(p.IncludeAnonymous).iterate(r=>{if(r.name){let e=w_[r.name];if(e&&e(r,o,s)||!s&&wE.has(r.name))return!1;s=!1}else if(r.to-r.from>8192){for(let n of e(t,r.node))i.push(n);return!1}}),wM.set(r,i),i}(e.state.doc,r)));return{options:n,from:r?t.from:e.pos,validFor:wj}}let wP=["__annotations__","__builtins__","__debug__","__doc__","__import__","__name__","__loader__","__package__","__spec__","False","None","True"].map(e=>({label:e,type:"constant"})).concat(["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EncodingWarning","EnvironmentError","Exception","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","ModuleNotFoundError","NameError","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError"].map(e=>({label:e,type:"type"}))).concat(["bool","bytearray","bytes","classmethod","complex","float","frozenset","int","list","map","memoryview","object","range","set","staticmethod","str","super","tuple","type"].map(e=>({label:e,type:"class"}))).concat(["abs","aiter","all","anext","any","ascii","bin","breakpoint","callable","chr","compile","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","format","getattr","globals","hasattr","hash","help","hex","id","input","isinstance","issubclass","iter","len","license","locals","max","min","next","oct","open","ord","pow","print","property","quit","repr","reversed","round","setattr","slice","sorted","sum","vars","zip"].map(e=>({label:e,type:"function"}))),wI=[v9("def ${name}(${params}):\n	${}",{label:"def",detail:"function",type:"keyword"}),v9("for ${name} in ${collection}:\n	${}",{label:"for",detail:"loop",type:"keyword"}),v9("while ${}:\n	${}",{label:"while",detail:"loop",type:"keyword"}),v9("try:\n	${}\nexcept ${error}:\n	${}",{label:"try",detail:"/ except block",type:"keyword"}),v9(`if \${}:
	
`,{label:"if",detail:"block",type:"keyword"}),v9("if ${}:\n	${}\nelse:\n	${}",{label:"if",detail:"/ else block",type:"keyword"}),v9("class ${name}:\n	def __init__(self, ${params}):\n			${}",{label:"class",detail:"definition",type:"keyword"}),v9("import ${module}",{label:"import",detail:"statement",type:"keyword"}),v9("from ${module} import ${names}",{label:"from",detail:"import",type:"keyword"})],wz=vu(wD,vh(wP.concat(wI)));function wL(e){let{node:t,pos:r}=e,n=e.lineIndent(r,-1),i=null;for(;;){let s=t.childBefore(r);if(s){if("Comment"==s.name)r=s.from;else if("Body"==s.name||"MatchBody"==s.name)e.baseIndentFor(s)+e.unit<=n&&(i=s),t=s;else if("MatchClause"==s.name)t=s;else if(s.type.is("Statement"))t=s;else break}else break}return i}function wq(e,t){let r=e.baseIndentFor(t),n=e.lineAt(e.pos,-1),i=n.from+n.text.length;return/^\s*($|#)/.test(n.text)&&e.node.to<i+100&&!/\S/.test(e.state.sliceDoc(i,e.node.to))&&e.lineIndent(e.pos,-1)<=r||/^\s*(else:|elif |except |finally:|case\s+[^=:]+:)/.test(e.textAfter)&&e.lineIndent(e.pos,-1)>r?null:r+e.unit}let w$=m7.define({name:"python",parser:wA.configure({props:[gm.add({Body:e=>{var t;let r=wL(e);return null!==(t=wq(e,r||e.node))&&void 0!==t?t:e.continue()},MatchBody:e=>{var t;let r=wL(e);return null!==(t=wq(e,r||e.node))&&void 0!==t?t:e.continue()},IfStatement:e=>/^\s*(else:|elif )/.test(e.textAfter)?e.baseIndent:e.continue(),"ForStatement WhileStatement":e=>/^\s*else:/.test(e.textAfter)?e.baseIndent:e.continue(),TryStatement:e=>/^\s*(except |finally:|else:)/.test(e.textAfter)?e.baseIndent:e.continue(),MatchStatement:e=>/^\s*case /.test(e.textAfter)?e.baseIndent+e.unit:e.continue(),"TupleExpression ComprehensionExpression ParamList ArgList ParenthesizedExpression":gv({closing:")"}),"DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression":gv({closing:"}"}),"ArrayExpression ArrayComprehensionExpression":gv({closing:"]"}),"String FormatString":()=>null,Script:e=>{var t;let r=wL(e);return null!==(t=r&&wq(e,r))&&void 0!==t?t:e.continue()}}),gk.add({"ArrayExpression DictionaryExpression SetExpression TupleExpression":function(e){let t=e.firstChild,r=e.lastChild;return t&&t.to<r.from?{from:t.to,to:r.type.isError?e.to:r.from}:null},Body:(e,t)=>({from:e.from+1,to:e.to-+(e.to!=t.doc.length)})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""'],stringPrefixes:["f","fr","rf","r","u","b","br","rb","F","FR","RF","R","U","B","BR","RB"]},commentTokens:{line:"#"},indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:|case\s+[^:]*:?)$/}});function wB(e){return e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57}function wF(e,t,r){for(let n=!1;;){if(e.next<0)return;if(e.next==t&&!n){e.advance();return}n=r&&!n&&92==e.next,e.advance()}}function wQ(e,t){for(;!(95!=e.next&&!wB(e.next));)null!=t&&(t+=String.fromCharCode(e.next)),e.advance();return t}function wV(e,t){for(;48==e.next||49==e.next;)e.advance();t&&e.next==t&&e.advance()}function wH(e,t){for(;;){if(46==e.next){if(t)break;t=!0}else if(e.next<48||e.next>57)break;e.advance()}if(69==e.next||101==e.next)for(e.advance(),(43==e.next||45==e.next)&&e.advance();e.next>=48&&e.next<=57;)e.advance()}function wW(e){for(;!(e.next<0||10==e.next);)e.advance()}function wU(e,t){for(let r=0;r<t.length;r++)if(t.charCodeAt(r)==e)return!0;return!1}let wG=` 	\r
`;function wX(e,t,r){let n=Object.create(null);for(let t of(n.true=n.false=5,n.null=n.unknown=6,e.split(" ")))t&&(n[t]=20);for(let e of t.split(" "))e&&(n[e]=21);for(let e of(r||"").split(" "))e&&(n[e]=24);return n}let wY={backslashEscapes:!1,hashComments:!1,spaceAfterDashes:!1,slashComments:!1,doubleQuotedStrings:!1,doubleDollarQuotedStrings:!1,unquotedBitLiterals:!1,treatBitsAsBytes:!1,charSetCasts:!1,plsqlQuotingMechanism:!1,operatorChars:"*+-%<>!=&|~^/",specialVar:"?",identifierQuotes:'"',caseInsensitiveIdentifiers:!1,words:wX("absolute action add after all allocate alter and any are as asc assertion at authorization before begin between both breadth by call cascade cascaded case cast catalog check close collate collation column commit condition connect connection constraint constraints constructor continue corresponding count create cross cube current current_date current_default_transform_group current_transform_group_for_type current_path current_role current_time current_timestamp current_user cursor cycle data day deallocate declare default deferrable deferred delete depth deref desc describe descriptor deterministic diagnostics disconnect distinct do domain drop dynamic each else elseif end end-exec equals escape except exception exec execute exists exit external fetch first for foreign found from free full function general get global go goto grant group grouping handle having hold hour identity if immediate in indicator initially inner inout input insert intersect into is isolation join key language last lateral leading leave left level like limit local localtime localtimestamp locator loop map match method minute modifies module month names natural nesting new next no none not of old on only open option or order ordinality out outer output overlaps pad parameter partial path prepare preserve primary prior privileges procedure public read reads recursive redo ref references referencing relative release repeat resignal restrict result return returns revoke right role rollback rollup routine row rows savepoint schema scroll search second section select session session_user set sets signal similar size some space specific specifictype sql sqlexception sqlstate sqlwarning start state static system_user table temporary then timezone_hour timezone_minute to trailing transaction translation treat trigger under undo union unique unnest until update usage user using value values view when whenever where while with without work write year zone ","array binary bit boolean char character clob date decimal double float int integer interval large national nchar nclob numeric object precision real smallint time timestamp varchar varying ")};function wZ(e){return new x8(t=>{var r,n;let{next:i}=t;if(t.advance(),wU(i,wG)){for(;wU(t.next,wG);)t.advance();t.acceptToken(36)}else if(36==i&&e.doubleDollarQuotedStrings){let e=wQ(t,"");36==t.next&&(t.advance(),function(e,t){e:for(;;){if(e.next<0)return;if(36==e.next){e.advance();for(let r=0;r<t.length;r++){if(e.next!=t.charCodeAt(r))continue e;e.advance()}if(36==e.next){e.advance();return}}else e.advance()}}(t,e),t.acceptToken(3))}else if(39==i||34==i&&e.doubleQuotedStrings)wF(t,i,e.backslashEscapes),t.acceptToken(3);else if(35==i&&e.hashComments||47==i&&47==t.next&&e.slashComments)wW(t),t.acceptToken(1);else if(45!=i||45!=t.next||e.spaceAfterDashes&&32!=t.peek(1)){if(47==i&&42==t.next){t.advance();for(let e=1;;){let r=t.next;if(t.next<0)break;if(t.advance(),42==r&&47==t.next){if(e--,t.advance(),!e)break}else 47==r&&42==t.next&&(e++,t.advance())}t.acceptToken(2)}else if((101==i||69==i)&&39==t.next)t.advance(),wF(t,39,!0),t.acceptToken(3);else if((110==i||78==i)&&39==t.next&&e.charSetCasts)t.advance(),wF(t,39,e.backslashEscapes),t.acceptToken(3);else if(95==i&&e.charSetCasts)for(let r=0;;r++){if(39==t.next&&r>1){t.advance(),wF(t,39,e.backslashEscapes),t.acceptToken(3);break}if(!wB(t.next))break;t.advance()}else if(e.plsqlQuotingMechanism&&(113==i||81==i)&&39==t.next&&t.peek(1)>0&&!wU(t.peek(1),wG)){let e=t.peek(1);t.advance(2),function(e,t){let r="[{<(".indexOf(String.fromCharCode(t)),n=r<0?t:"]}>)".charCodeAt(r);for(;;){if(e.next<0)return;if(e.next==n&&39==e.peek(1)){e.advance(2);return}e.advance()}}(t,e),t.acceptToken(3)}else if(40==i)t.acceptToken(7);else if(41==i)t.acceptToken(8);else if(123==i)t.acceptToken(9);else if(125==i)t.acceptToken(10);else if(91==i)t.acceptToken(11);else if(93==i)t.acceptToken(12);else if(59==i)t.acceptToken(13);else if(e.unquotedBitLiterals&&48==i&&98==t.next)t.advance(),wV(t),t.acceptToken(22);else if((98==i||66==i)&&(39==t.next||34==t.next)){let r=t.next;t.advance(),e.treatBitsAsBytes?(wF(t,r,e.backslashEscapes),t.acceptToken(23)):(wV(t,r),t.acceptToken(22))}else if(48==i&&(120==t.next||88==t.next)||(120==i||88==i)&&39==t.next){let e=39==t.next;for(t.advance();(n=t.next)>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70;)t.advance();e&&39==t.next&&t.advance(),t.acceptToken(4)}else if(46==i&&t.next>=48&&t.next<=57)wH(t,!0),t.acceptToken(4);else if(46==i)t.acceptToken(14);else if(i>=48&&i<=57)wH(t,!1),t.acceptToken(4);else if(wU(i,e.operatorChars)){for(;wU(t.next,e.operatorChars);)t.advance();t.acceptToken(15)}else if(wU(i,e.specialVar))t.next==i&&t.advance(),function(e){if(39==e.next||34==e.next||96==e.next){let t=e.next;e.advance(),wF(e,t,!1)}else wQ(e)}(t),t.acceptToken(17);else if(wU(i,e.identifierQuotes))wF(t,i,!1),t.acceptToken(19);else if(58==i||44==i)t.acceptToken(16);else if(wB(i)){let n=wQ(t,String.fromCharCode(i));t.acceptToken(46==t.next||46==t.peek(-n.length-1)?18:null!==(r=e.words[n.toLowerCase()])&&void 0!==r?r:18)}}else wW(t),t.acceptToken(1)})}let wJ=wZ(wY),wK=wh.deserialize({version:14,states:"%vQ]QQOOO#wQRO'#DSO$OQQO'#CwO%eQQO'#CxO%lQQO'#CyO%sQQO'#CzOOQQ'#DS'#DSOOQQ'#C}'#C}O'UQRO'#C{OOQQ'#Cv'#CvOOQQ'#C|'#C|Q]QQOOQOQQOOO'`QQO'#DOO(xQRO,59cO)PQQO,59cO)UQQO'#DSOOQQ,59d,59dO)cQQO,59dOOQQ,59e,59eO)jQQO,59eOOQQ,59f,59fO)qQQO,59fOOQQ-E6{-E6{OOQQ,59b,59bOOQQ-E6z-E6zOOQQ,59j,59jOOQQ-E6|-E6|O+VQRO1G.}O+^QQO,59cOOQQ1G/O1G/OOOQQ1G/P1G/POOQQ1G/Q1G/QP+kQQO'#C}O+rQQO1G.}O)PQQO,59cO,PQQO'#Cw",stateData:",[~OtOSPOSQOS~ORUOSUOTUOUUOVROXSOZTO]XO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O^]ORvXSvXTvXUvXVvXXvXZvX]vX_vX`vXavXbvXcvXdvXevXfvXgvXhvX~OsvX~P!jOa_Ob_Oc_O~ORUOSUOTUOUUOVROXSOZTO^tO_UO`UOa`Ob`Oc`OdUOeUOfUOgUOhUO~OWaO~P$ZOYcO~P$ZO[eO~P$ZORUOSUOTUOUUOVROXSOZTO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O]hOsoX~P%zOajObjOcjO~O^]ORkaSkaTkaUkaVkaXkaZka]ka_ka`kaakabkackadkaekafkagkahka~Oska~P'kO^]O~OWvXYvX[vX~P!jOWnO~P$ZOYoO~P$ZO[pO~P$ZO^]ORkiSkiTkiUkiVkiXkiZki]ki_ki`kiakibkickidkiekifkigkihki~Oski~P)xOWkaYka[ka~P'kO]hO~P$ZOWkiYki[ki~P)xOasObsOcsO~O",goto:"#hwPPPPPPPPPPPPPPPPPPPPPPPPPPx||||!Y!^!d!xPPP#[TYOZeUORSTWZbdfqT[OZQZORiZSWOZQbRQdSQfTZgWbdfqQ^PWk^lmrQl_Qm`RrseVORSTWZbdfq",nodeNames:" LineComment BlockComment String Number Bool Null ( ) { } [ ] ; . Operator Punctuation SpecialVar Identifier QuotedIdentifier Keyword Type Bits Bytes Builtin Script Statement CompositeIdentifier Parens Braces Brackets Statement",maxTerm:38,nodeProps:[["isolate",-4,1,2,3,19,""]],skippedNodes:[0,1,2],repeatNodeCount:3,tokenData:"RORO",tokenizers:[0,wJ],topRules:{Script:[0,25]},tokenPrec:0});function w0(e){let t=e.cursor().moveTo(e.from,-1);for(;/Comment/.test(t.name);)t.moveTo(t.from,-1);return t.node}function w1(e,t){let r=e.sliceString(t.from,t.to),n=/^([`'"])(.*)\1$/.exec(r);return n?n[2]:r}function w2(e){return e&&("Identifier"==e.name||"QuotedIdentifier"==e.name)}function w4(e,t){for(let r=[];;){if(!t||"."!=t.name)return r;let n=w0(t);if(!w2(n))return r;r.unshift(w1(e,n)),t=w0(n)}}let w5=new Set("where group having order union intersect except all distinct limit offset fetch for".split(" ")),w3=/^\w*$/,w6=/^[`'"]?\w*[`'"]?$/;function w7(e){return e.self&&"string"==typeof e.self.label}class w8{constructor(e,t){this.idQuote=e,this.idCaseInsensitive=t,this.list=[],this.children=void 0}child(e){let t=this.children||(this.children=Object.create(null));return t[e]||(e&&!this.list.some(t=>t.label==e)&&this.list.push(w9(e,"type",this.idQuote,this.idCaseInsensitive)),t[e]=new w8(this.idQuote,this.idCaseInsensitive))}maybeChild(e){return this.children?this.children[e]:null}addCompletion(e){let t=this.list.findIndex(t=>t.label==e.label);t>-1?this.list[t]=e:this.list.push(e)}addCompletions(e){for(let t of e)this.addCompletion("string"==typeof t?w9(t,"property",this.idQuote,this.idCaseInsensitive):t)}addNamespace(e){Array.isArray(e)?this.addCompletions(e):w7(e)?this.addNamespace(e.children):this.addNamespaceObject(e)}addNamespaceObject(e){for(let t of Object.keys(e)){let r=e[t],n=null,i=t.replace(/\\?\./g,e=>"."==e?"\0":e).split("\0"),s=this;w7(r)&&(n=r.self,r=r.children);for(let e=0;e<i.length;e++)n&&e==i.length-1&&s.addCompletion(n),s=s.child(i[e].replace(/\\\./g,"."));s.addNamespace(r)}}}function w9(e,t,r,n){return RegExp("^[a-z_][a-z_\\d]*$",n?"i":"").test(e)?{label:e,type:t}:{label:e,type:t,apply:r+e+r}}let ke=wK.configure({props:[gm.add({Statement:function({except:e,units:t=1}={}){return r=>{let n=e&&e.test(r.textAfter);return r.baseIndent+(n?0:t*r.unit)}}()}),gk.add({Statement:(e,t)=>({from:Math.min(e.from+100,t.doc.lineAt(e.from).to),to:e.to}),BlockComment:e=>({from:e.from+2,to:e.to-2})}),mI({Keyword:m2.keyword,Type:m2.typeName,Builtin:m2.standard(m2.name),Bits:m2.number,Bytes:m2.string,Bool:m2.bool,Null:m2.null,Number:m2.number,String:m2.string,Identifier:m2.name,QuotedIdentifier:m2.special(m2.string),SpecialVar:m2.special(m2.name),LineComment:m2.lineComment,BlockComment:m2.blockComment,Operator:m2.operator,"Semi Punctuation":m2.punctuation,"( )":m2.paren,"{ }":m2.brace,"[ ]":m2.squareBracket})]});class kt{constructor(e,t,r){this.dialect=e,this.language=t,this.spec=r}get extension(){return this.language.extension}static define(e){let t=function(e,t,r,n){let i={};for(let t in wY)i[t]=(e.hasOwnProperty(t)?e:wY)[t];return t&&(i.words=wX(t,r||"",n)),i}(e,e.keywords,e.types,e.builtin),r=m7.define({name:"sql",parser:ke.configure({tokenizers:[{from:wJ,to:wZ(t)}]}),languageData:{commentTokens:{line:"--",block:{open:"/*",close:"*/"}},closeBrackets:{brackets:["(","[","{","'",'"',"`"]}}});return new kt(t,r,e)}}function kr(e,t){return{label:e,type:t,boost:-1}}function kn(e={}){var t,r,n,i,s,o,a;let l,c,h=e.dialect||ki;return new gl(h.language,[e.schema?(e.dialect||ki).language.data.of({autocomplete:e.schema?(t=e.schema,r=e.tables,n=e.schemas,i=e.defaultTable,s=e.defaultSchema,l=new w8((null===(a=null==(o=e.dialect||ki)?void 0:o.spec.identifierQuotes)||void 0===a?void 0:a[0])||'"',!!(null!=o&&o.spec.caseInsensitiveIdentifiers)),c=s?l.child(s):null,l.addNamespace(t),r&&(c||l).addCompletions(r),n&&l.addCompletions(n),c&&l.addCompletions(c.list),i&&l.addCompletions((c||l).child(i).list),e=>{var t,r,n;let s,o;let{parents:a,from:h,quoted:u,empty:d,aliases:f}=(t=e.state,r=e.pos,s=m8(t).resolveInner(r,-1),o=function(e,t){let r;for(let e=t;!r;e=e.parent){if(!e)return null;"Statement"==e.name&&(r=e)}let n=null;for(let t=r.firstChild,i=!1,s=null;t;t=t.nextSibling){let r="Keyword"==t.name?e.sliceString(t.from,t.to).toLowerCase():null,o=null;if(i){if("as"==r&&s&&w2(t.nextSibling))o=w1(e,t.nextSibling);else{if(r&&w5.has(r))break;s&&w2(t)&&(o=w1(e,t))}}else i="from"==r;o&&(n||(n=Object.create(null)),n[o]=function(e,t){if("CompositeIdentifier"==t.name){let r=[];for(let n=t.firstChild;n;n=n.nextSibling)w2(n)&&r.push(w1(e,n));return r}return[w1(e,t)]}(e,s)),s=/Identifier$/.test(t.name)?t:null}return n}(t.doc,s),"Identifier"==s.name||"QuotedIdentifier"==s.name||"Keyword"==s.name?{from:s.from,quoted:"QuotedIdentifier"==s.name?t.doc.sliceString(s.from,s.from+1):null,parents:w4(t.doc,w0(s)),aliases:o}:"."==s.name?{from:r,quoted:null,parents:w4(t.doc,s),aliases:o}:{from:r,quoted:null,parents:[],empty:!0,aliases:o});if(d&&!e.explicit)return null;f&&1==a.length&&(a=f[a[0]]||a);let p=l;for(let e of a){for(;!p.children||!p.children[e];)if(p==l&&c)p=c;else{if(p!=c||!i)return null;p=p.child(i)}let t=p.maybeChild(e);if(!t)return null;p=t}let m=u&&e.state.sliceDoc(e.pos,e.pos+1)==u,g=p.list;return p==l&&f&&(g=g.concat(Object.keys(f).map(e=>({label:e,type:"constant"})))),{from:h,to:m?e.pos+1:void 0,options:(n=g,u?n.map(e=>Object.assign(Object.assign({},e),{label:e.label[0]==u?e.label:u+e.label+u,apply:void 0})):n),validFor:u?w6:w3}}):()=>null}):[],h.language.data.of({autocomplete:function(e,t=!1,r){var n,i;return n=e.dialect.words,i=r||kr,vu(["QuotedIdentifier","SpecialVar","String","LineComment","BlockComment","."],vh(Object.keys(n).map(e=>{var r;return i(t?e.toUpperCase():e,21==(r=n[e])?"type":20==r?"keyword":"variable")})))}(h,e.upperCaseKeywords,e.keywordCompletion)})])}let ki=kt.define({});class ks extends A.Component{constructor(e){super(e),this.state={hasError:!1,errorInfo:null,error:null,maybeOldAnalysis:e.maybeOldAnalysis}}static getDerivedStateFromError(e){return console.log(e),{hasError:!0}}componentDidCatch(e,t){console.log(e,t),this.setState({hasError:!0,errorInfo:t,error:e})}render(){return this.state.hasError?T.j.jsx("div",{className:"error-boundary-ctr dark:bg-gray-800 dark:text-gray-300",children:this.props.maybeOldAnalysis?T.j.jsx("p",{className:"text-rose-500 dark:text-rose-400",children:"You might need to re run this analysis for the latest version of the UI."}):T.j.jsx("p",{className:"dark:text-gray-300",children:this.props.customErrorMessage||"Something went wrong."})}):this.props.children}}function ko({code:e=null,language:t="sql",updateProp:r=null,className:n="",handleEdit:i,editable:s=!0}){let[o,a]=(0,A.useState)(e||""),l=(0,A.useRef)(null),[c,h]=(0,A.useState)(!1);(0,A.useEffect)(()=>{let e=()=>{h(!!document.querySelector(".dark"))};e();let t=new MutationObserver(e);t.observe(document.documentElement,{attributes:!0,attributeFilter:["class"],subtree:!0,childList:!0}),window.addEventListener("storage",e);let r=window.matchMedia("(prefers-color-scheme: dark)");return r.addEventListener("change",e),()=>{t.disconnect(),window.removeEventListener("storage",e),r.removeEventListener("change",e)}},[]),(0,A.useEffect)(()=>{a(e||"")},[e]);let u=e=>{e&&(a(e),i(r,e))},d=e=>{u(e)};return T.j.jsx(ks,{children:T.j.jsx(T.j.Fragment,{children:T.j.jsx(xJ,{extensions:["python"===t?new gl(w$,[w$.data.of({autocomplete:wR}),w$.data.of({autocomplete:wz})]):kn(),fq.lineWrapping],basicSetup:{lineNumbers:!1},theme:c?"dark":"light",className:(0,T.t)("language-"+t,"dark:prose-invert [&_.cm-editor]:dark:!bg-gray-800 [&_.cm-scroller]:dark:!bg-gray-800 [&_.cm-gutters]:dark:!bg-gray-800 [&_.cm-tooltip]:dark:!bg-gray-700 [&_.cm-tooltip]:dark:!border-gray-600 [&_.cm-activeLine]:dark:!bg-gray-700/50 [&_.cm-activeLineGutter]:dark:!bg-gray-700/50",n),value:o,onChange:e=>{d(e)},editable:s,ref:l})})})}function ka({step:e}){var t;let{function_name:r,result:n}=e;n||(n={});let{question:i,sql:s,columns:o=[],rows:a="[]",error:l="",df_truncated:c=!1}=n,h=l||(o&&o.length?"":"No results"),u=[];if(a&&!l)try{u=JSON.parse(a)}catch(e){console.error("Failed to parse rows JSON:",e),h="Failed to parse rows JSON"}let d=u.length;return T.j.jsxs("div",{className:"border p-4 rounded-md shadow-sm bg-white dark:bg-dark-bg-secondary dark:border-dark-border max-h-full overflow-y-auto",children:[T.j.jsxs("h2",{className:"text-lg font-semibold mb-2 text-gray-800 dark:text-dark-text-primary flex items-center",children:[T.j.jsx("span",{className:"mr-2",children:"SQL Query"}),!h&&T.j.jsxs("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded dark:bg-blue-900/30 dark:text-blue-300",children:["Resulting data has ",d," ",1===d?"row":"rows"]})]}),i&&T.j.jsxs("div",{className:"mb-3 text-gray-700 dark:text-dark-text-secondary",children:[T.j.jsx("p",{className:"mb-1 font-medium text-gray-800 dark:text-dark-text-primary",children:"Question"}),T.j.jsx("p",{className:"bg-gray-50 dark:bg-gray-800 p-2 rounded-md border-l-2 border-blue-500 dark:border-blue-600 italic text-gray-700 dark:text-dark-text-secondary",children:i})]}),(null==(t=e.inputs)?void 0:t.db_name)&&T.j.jsx("div",{className:"mb-3",children:T.j.jsxs("span",{className:"inline-flex items-center gap-1 bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300 text-xs font-medium px-2.5 py-1 rounded",children:[T.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:[T.j.jsx("path",{d:"M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"}),T.j.jsx("path",{d:"M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"}),T.j.jsx("path",{d:"M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"})]}),e.inputs.db_name]})}),h?T.j.jsxs("div",{className:"text-red-600 bg-red-100 p-3 rounded-md dark:bg-red-900/20 dark:text-red-400 dark:border dark:border-red-800",children:[T.j.jsxs("div",{className:"flex items-center mb-1",children:[T.j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1.5",viewBox:"0 0 20 20",fill:"currentColor",children:T.j.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),T.j.jsx("strong",{children:"Query Error"})]}),T.j.jsx("p",{children:h})]}):T.j.jsx("div",{className:"mt-3 border border-gray-200 dark:border-gray-700 rounded-md overflow-hidden",children:T.j.jsx(T.c,{tabs:[{name:"Results",content:T.j.jsxs("div",{className:"relative p-3",children:[c&&T.j.jsxs("div",{className:"text-sm bg-yellow-50 p-2 rounded mb-3 border border-yellow-200 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400 dark:border-yellow-800 flex items-center",children:[T.j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1.5",viewBox:"0 0 20 20",fill:"currentColor",children:T.j.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Results have been truncated"]}),T.j.jsx(T.T,{columns:o.map(e=>({dataIndex:e,title:e})),rows:u,rootClassNames:"shadow-sm"})]})},{name:"SQL",content:T.j.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 p-3",children:T.j.jsx(ko,{code:s||"",language:"sql",editable:!1})})}],defaultSelected:"Results"})})]})}function kl(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let kc=kl(),kh=/[&<>"']/,ku=RegExp(kh.source,"g"),kd=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,kf=RegExp(kd.source,"g"),kp={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},km=e=>kp[e];function kg(e,t){if(t){if(kh.test(e))return e.replace(ku,km)}else if(kd.test(e))return e.replace(kf,km);return e}let ky=/(^|[^\[])\^/g;function kb(e,t){let r="string"==typeof e?e:e.source;t=t||"";let n={replace:(e,t)=>{let i="string"==typeof t?t:t.source;return i=i.replace(ky,"$1"),r=r.replace(e,i),n},getRegex:()=>new RegExp(r,t)};return n}function kv(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}let kx={exec:()=>null};function kw(e,t){let r=e.replace(/\|/g,(e,t,r)=>{let n=!1,i=t;for(;--i>=0&&"\\"===r[i];)n=!n;return n?"|":" |"}).split(/ \|/),n=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),t){if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("")}for(;n<r.length;n++)r[n]=r[n].trim().replace(/\\\|/g,"|");return r}function kk(e,t,r){let n=e.length;if(0===n)return"";let i=0;for(;i<n&&e.charAt(n-i-1)===t;)i++;return e.slice(0,n-i)}function kO(e,t,r,n){let i=t.href,s=t.title?kg(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){n.state.inLink=!0;let e={type:"link",raw:r,href:i,title:s,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,e}return{type:"image",raw:r,href:i,title:s,text:kg(o)}}class kS{constructor(e){R(this,"options"),R(this,"rules"),R(this,"lexer"),this.options=e||kc}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let e=t[0].replace(/^(?: {1,4}| {0,3}\t)/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:kk(e,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let e=t[0],r=function(e,t){let r=e.match(/^(\s+)(?:```)/);if(null===r)return t;let n=r[1];return t.split(`
`).map(e=>{let t=e.match(/^\s+/);if(null===t)return e;let[r]=t;return r.length>=n.length?e.slice(n.length):e}).join(`
`)}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){let t=kk(e,"#");(this.options.pedantic||!t||/ $/.test(t))&&(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:kk(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let e=kk(t[0],`
`).split(`
`),r="",n="",i=[];for(;e.length>0;){let t,s=!1,o=[];for(t=0;t<e.length;t++)if(/^ {0,3}>/.test(e[t]))o.push(e[t]),s=!0;else if(s)break;else o.push(e[t]);e=e.slice(t);let a=o.join(`
`),l=a.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");r=r?`${r}
${a}`:a,n=n?`${n}
${l}`:l;let c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,i,!0),this.lexer.state.top=c,0===e.length)break;let h=i[i.length-1];if((null==h?void 0:h.type)==="code")break;if((null==h?void 0:h.type)==="blockquote"){let t=h.raw+`
`+e.join(`
`),s=this.blockquote(t);i[i.length-1]=s,r=r.substring(0,r.length-h.raw.length)+s.raw,n=n.substring(0,n.length-h.text.length)+s.text;break}if((null==h?void 0:h.type)==="list"){let t=h.raw+`
`+e.join(`
`),s=this.list(t);i[i.length-1]=s,r=r.substring(0,r.length-h.raw.length)+s.raw,n=n.substring(0,n.length-h.raw.length)+s.raw,e=t.substring(i[i.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:i,text:n}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),n=r.length>1,i={type:"list",raw:"",ordered:n,start:n?+r.slice(0,-1):"",loose:!1,items:[]};r=n?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=n?r:"[*+-]");let s=RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),o=!1;for(;e;){let r=!1,n="",a="";if(!(t=s.exec(e))||this.rules.block.hr.test(e))break;n=t[0],e=e.substring(n.length);let l=t[2].split(`
`,1)[0].replace(/^\t+/,e=>" ".repeat(3*e.length)),c=e.split(`
`,1)[0],h=!l.trim(),u=0;if(this.options.pedantic?(u=2,a=l.trimStart()):h?u=t[1].length+1:(u=(u=t[2].search(/[^ ]/))>4?1:u,a=l.slice(u),u+=t[1].length),h&&/^[ \t]*$/.test(c)&&(n+=c+`
`,e=e.substring(c.length+1),r=!0),!r){let t=RegExp(`^ {0,${Math.min(3,u-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),r=RegExp(`^ {0,${Math.min(3,u-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),i=RegExp(`^ {0,${Math.min(3,u-1)}}(?:\`\`\`|~~~)`),s=RegExp(`^ {0,${Math.min(3,u-1)}}#`),o=RegExp(`^ {0,${Math.min(3,u-1)}}<(?:[a-z].*>|!--)`,"i");for(;e;){let d;let f=e.split(`
`,1)[0];if(c=f,d=this.options.pedantic?c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  "):c.replace(/\t/g,"    "),i.test(c)||s.test(c)||o.test(c)||t.test(c)||r.test(c))break;if(d.search(/[^ ]/)>=u||!c.trim())a+=`
`+d.slice(u);else{if(h||l.replace(/\t/g,"    ").search(/[^ ]/)>=4||i.test(l)||s.test(l)||r.test(l))break;a+=`
`+c}h||c.trim()||(h=!0),n+=f+`
`,e=e.substring(f.length+1),l=d.slice(u)}}i.loose||(o?i.loose=!0:/\n[ \t]*\n[ \t]*$/.test(n)&&(o=!0));let d=null,f;this.options.gfm&&(d=/^\[[ xX]\] /.exec(a))&&(f="[ ] "!==d[0],a=a.replace(/^\[[ xX]\] +/,"")),i.items.push({type:"list_item",raw:n,task:!!d,checked:f,loose:!1,text:a,tokens:[]}),i.raw+=n}i.items[i.items.length-1].raw=i.items[i.items.length-1].raw.trimEnd(),i.items[i.items.length-1].text=i.items[i.items.length-1].text.trimEnd(),i.raw=i.raw.trimEnd();for(let e=0;e<i.items.length;e++)if(this.lexer.state.top=!1,i.items[e].tokens=this.lexer.blockTokens(i.items[e].text,[]),!i.loose){let t=i.items[e].tokens.filter(e=>"space"===e.type);i.loose=t.length>0&&t.some(e=>/\n.*\n/.test(e.raw))}if(i.loose)for(let e=0;e<i.items.length;e++)i.items[e].loose=!0;return i}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let e=t[1].toLowerCase().replace(/\s+/g," "),r=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:r,title:n}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;let r=kw(t[1]),n=t[2].replace(/^\||\| *$/g,"").split("|"),i=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],s={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===n.length){for(let e of n)/^ *-+: *$/.test(e)?s.align.push("right"):/^ *:-+: *$/.test(e)?s.align.push("center"):/^ *:-+ *$/.test(e)?s.align.push("left"):s.align.push(null);for(let e=0;e<r.length;e++)s.header.push({text:r[e],tokens:this.lexer.inline(r[e]),header:!0,align:s.align[e]});for(let e of i)s.rows.push(kw(e,s.header.length).map((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:s.align[t]})));return s}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let e=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:kg(t[1])}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;let t=kk(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{let e=function(e,t){if(-1===e.indexOf(")"))return -1;let r=0;for(let n=0;n<e.length;n++)if("\\"===e[n])n++;else if("("===e[n])r++;else if(e[n]===t[1]&&--r<0)return n;return -1}(t[2],"()");if(e>-1){let r=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,r).trim(),t[3]=""}}let r=t[2],n="";if(this.options.pedantic){let e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);e&&(r=e[1],n=e[3])}else n=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(r=this.options.pedantic&&!/>$/.test(e)?r.slice(1):r.slice(1,-1)),kO(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let e=t[(r[2]||r[1]).replace(/\s+/g," ").toLowerCase()];if(!e){let e=r[0].charAt(0);return{type:"text",raw:e,text:e}}return kO(r,e,r[0],this.lexer)}}emStrong(e,t,r=""){let n=this.rules.inline.emStrongLDelim.exec(e);if(!(!n||n[3]&&r.match(/[\p{L}\p{N}]/u))&&(!(n[1]||n[2])||!r||this.rules.inline.punctuation.exec(r))){let r=[...n[0]].length-1,i,s,o=r,a=0,l="*"===n[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+r);null!=(n=l.exec(t));){if(!(i=n[1]||n[2]||n[3]||n[4]||n[5]||n[6]))continue;if(s=[...i].length,n[3]||n[4]){o+=s;continue}if((n[5]||n[6])&&r%3&&!((r+s)%3)){a+=s;continue}if((o-=s)>0)continue;s=Math.min(s,s+o+a);let t=[...n[0]][0].length,l=e.slice(0,r+n.index+t+s);if(Math.min(r,s)%2){let e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}let c=l.slice(2,-2);return{type:"strong",raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," "),r=/[^ ]/.test(e),n=/^ /.test(e)&&/ $/.test(e);return r&&n&&(e=e.substring(1,e.length-1)),e=kg(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let e,r;return r="@"===t[2]?"mailto:"+(e=kg(t[1])):e=kg(t[1]),{type:"link",raw:t[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}url(e){var t;let r;if(r=this.rules.inline.url.exec(e)){let e,n;if("@"===r[2])n="mailto:"+(e=kg(r[0]));else{let i;do i=r[0],r[0]=(null==(t=this.rules.inline._backpedal.exec(r[0]))?void 0:t[0])??"";while(i!==r[0]);e=kg(r[0]),n="www."===r[1]?"http://"+r[0]:r[0]}return{type:"link",raw:r[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let e;return e=this.lexer.state.inRawBlock?t[0]:kg(t[0]),{type:"text",raw:t[0],text:e}}}}let kC=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,kT=/(?:[*+-]|\d{1,9}[.)])/,kA=kb(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,kT).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),kM=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,kE=/(?!\s*\])(?:\\.|[^\[\]\\])+/,kN=kb(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",kE).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),k_=kb(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,kT).getRegex(),kj="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",kD=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,kR=kb("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",kD).replace("tag",kj).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),kP=kb(kM).replace("hr",kC).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",kj).getRegex(),kI={blockquote:kb(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",kP).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:kN,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:kC,html:kR,lheading:kA,list:k_,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:kP,table:kx,text:/^[^\n]+/},kz=kb("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",kC).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",kj).getRegex(),kL={...kI,table:kz,paragraph:kb(kM).replace("hr",kC).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",kz).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",kj).getRegex()},kq={...kI,html:kb(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",kD).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:kx,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:kb(kM).replace("hr",kC).replace("heading",` *#{1,6} *[^
]`).replace("lheading",kA).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},k$=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,kB=/^( {2,}|\\)\n(?!\s*$)/,kF="\\p{P}\\p{S}",kQ=kb(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,kF).getRegex(),kV=kb(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,kF).getRegex(),kH=kb("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,kF).getRegex(),kW=kb("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,kF).getRegex(),kU=kb(/\\([punct])/,"gu").replace(/punct/g,kF).getRegex(),kG=kb(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),kX=kb(kD).replace("(?:--\x3e|$)","--\x3e").getRegex(),kY=kb("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",kX).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),kZ=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,kJ=kb(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",kZ).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),kK=kb(/^!?\[(label)\]\[(ref)\]/).replace("label",kZ).replace("ref",kE).getRegex(),k0=kb(/^!?\[(ref)\](?:\[\])?/).replace("ref",kE).getRegex(),k1=kb("reflink|nolink(?!\\()","g").replace("reflink",kK).replace("nolink",k0).getRegex(),k2={_backpedal:kx,anyPunctuation:kU,autolink:kG,blockSkip:/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,br:kB,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:kx,emStrongLDelim:kV,emStrongRDelimAst:kH,emStrongRDelimUnd:kW,escape:k$,link:kJ,nolink:k0,punctuation:kQ,reflink:kK,reflinkSearch:k1,tag:kY,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:kx},k4={...k2,link:kb(/^!?\[(label)\]\((.*?)\)/).replace("label",kZ).getRegex(),reflink:kb(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",kZ).getRegex()},k5={...k2,escape:kb(k$).replace("])","~|])").getRegex(),url:kb(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},k3={...k5,br:kb(kB).replace("{2,}","*").getRegex(),text:kb(k5.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},k6={normal:kI,gfm:kL,pedantic:kq},k7={normal:k2,gfm:k5,breaks:k3,pedantic:k4};class k8{constructor(e){R(this,"tokens"),R(this,"options"),R(this,"state"),R(this,"tokenizer"),R(this,"inlineQueue"),this.tokens=[],this.tokens.links=Object.create(null),this.options=e||kc,this.options.tokenizer=this.options.tokenizer||new kS,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={block:k6.normal,inline:k7.normal};this.options.pedantic?(t.block=k6.pedantic,t.inline=k7.pedantic):this.options.gfm&&(t.block=k6.gfm,this.options.breaks?t.inline=k7.breaks:t.inline=k7.gfm),this.tokenizer.rules=t}static get rules(){return{block:k6,inline:k7}}static lex(e,t){return new k8(t).lex(e)}static lexInline(e,t){return new k8(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],r=!1){let n,i,s;for(this.options.pedantic&&(e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))){if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length),1===n.raw.length&&t.length>0?t[t.length-1].raw+=`
`:t.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length),(i=t[t.length-1])&&("paragraph"===i.type||"text"===i.type)?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n);continue}if((n=this.tokenizer.fences(e))||(n=this.tokenizer.heading(e))||(n=this.tokenizer.hr(e))||(n=this.tokenizer.blockquote(e))||(n=this.tokenizer.list(e))||(n=this.tokenizer.html(e))){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length),(i=t[t.length-1])&&("paragraph"===i.type||"text"===i.type)?(i.raw+=`
`+n.raw,i.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if((n=this.tokenizer.table(e))||(n=this.tokenizer.lheading(e))){e=e.substring(n.raw.length),t.push(n);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let t,r=1/0,n=e.slice(1);this.options.extensions.startBlock.forEach(e=>{"number"==typeof(t=e.call({lexer:this},n))&&t>=0&&(r=Math.min(r,t))}),r<1/0&&r>=0&&(s=e.substring(0,r+1))}if(this.state.top&&(n=this.tokenizer.paragraph(s))){i=t[t.length-1],r&&(null==i?void 0:i.type)==="paragraph"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n),r=s.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length),(i=t[t.length-1])&&"text"===i.type?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n);continue}if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,n,i,s=e,o,a,l;if(this.tokens.links){let e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(s));)e.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(o=this.tokenizer.rules.inline.blockSkip.exec(s));)s=s.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(o=this.tokenizer.rules.inline.anyPunctuation.exec(s));)s=s.slice(0,o.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(a||(l=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(n=>!!(r=n.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),(n=t[t.length-1])&&"text"===r.type&&"text"===n.type?(n.raw+=r.raw,n.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),(n=t[t.length-1])&&"text"===r.type&&"text"===n.type?(n.raw+=r.raw,n.text+=r.text):t.push(r);continue}if((r=this.tokenizer.emStrong(e,s,l))||(r=this.tokenizer.codespan(e))||(r=this.tokenizer.br(e))||(r=this.tokenizer.del(e))||(r=this.tokenizer.autolink(e))||!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),t.push(r);continue}if(i=e,this.options.extensions&&this.options.extensions.startInline){let t,r=1/0,n=e.slice(1);this.options.extensions.startInline.forEach(e=>{"number"==typeof(t=e.call({lexer:this},n))&&t>=0&&(r=Math.min(r,t))}),r<1/0&&r>=0&&(i=e.substring(0,r+1))}if(r=this.tokenizer.inlineText(i)){e=e.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(l=r.raw.slice(-1)),a=!0,(n=t[t.length-1])&&"text"===n.type?(n.raw+=r.raw,n.text+=r.text):t.push(r);continue}if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw Error(t)}}return t}}class k9{constructor(e){R(this,"options"),R(this,"parser"),this.options=e||kc}space(e){return""}code({text:e,lang:t,escaped:r}){var n;let i=null==(n=(t||"").match(/^\S*/))?void 0:n[0],s=e.replace(/\n$/,"")+`
`;return i?'<pre><code class="language-'+kg(i)+'">'+(r?s:kg(s,!0))+`</code></pre>
`:"<pre><code>"+(r?s:kg(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,r=e.start,n="";for(let t=0;t<e.items.length;t++){let r=e.items[t];n+=this.listitem(r)}let i=t?"ol":"ul";return"<"+i+(t&&1!==r?' start="'+r+'"':"")+`>
`+n+"</"+i+`>
`}listitem(e){let t="";if(e.task){let r=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&"paragraph"===e.tokens[0].type?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=r+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" "}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let t=0;t<e.header.length;t++)r+=this.tablecell(e.header[t]);t+=this.tablerow({text:r});let n="";for(let t=0;t<e.rows.length;t++){let i=e.rows[t];r="";for(let e=0;e<i.length;e++)r+=this.tablecell(i[e]);n+=this.tablerow({text:r})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+n+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){let n=this.parser.parseInline(r),i=kv(e);if(null===i)return n;let s='<a href="'+(e=i)+'"';return t&&(s+=' title="'+t+'"'),s+=">"+n+"</a>"}image({href:e,title:t,text:r}){let n=kv(e);if(null===n)return r;e=n;let i=`<img src="${e}" alt="${r}"`;return t&&(i+=` title="${t}"`),i+=">"}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}}class Oe{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class Ot{constructor(e){R(this,"options"),R(this,"renderer"),R(this,"textRenderer"),this.options=e||kc,this.options.renderer=this.options.renderer||new k9,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Oe}static parse(e,t){return new Ot(t).parse(e)}static parseInline(e,t){return new Ot(t).parseInline(e)}parse(e,t=!0){let r="";for(let n=0;n<e.length;n++){let i=e[n];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){let e=this.options.extensions.renderers[i.type].call({parser:this},i);if(!1!==e||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(i.type)){r+=e||"";continue}}switch(i.type){case"space":r+=this.renderer.space(i);continue;case"hr":r+=this.renderer.hr(i);continue;case"heading":r+=this.renderer.heading(i);continue;case"code":r+=this.renderer.code(i);continue;case"table":r+=this.renderer.table(i);continue;case"blockquote":r+=this.renderer.blockquote(i);continue;case"list":r+=this.renderer.list(i);continue;case"html":r+=this.renderer.html(i);continue;case"paragraph":r+=this.renderer.paragraph(i);continue;case"text":{let s=i,o=this.renderer.text(s);for(;n+1<e.length&&"text"===e[n+1].type;)s=e[++n],o+=`
`+this.renderer.text(s);t?r+=this.renderer.paragraph({type:"paragraph",raw:o,text:o,tokens:[{type:"text",raw:o,text:o}]}):r+=o;continue}default:{let e='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw Error(e)}}}return r}parseInline(e,t){t=t||this.renderer;let r="";for(let n=0;n<e.length;n++){let i=e[n];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){let e=this.options.extensions.renderers[i.type].call({parser:this},i);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){r+=e||"";continue}}switch(i.type){case"escape":case"text":r+=t.text(i);break;case"html":r+=t.html(i);break;case"link":r+=t.link(i);break;case"image":r+=t.image(i);break;case"strong":r+=t.strong(i);break;case"em":r+=t.em(i);break;case"codespan":r+=t.codespan(i);break;case"br":r+=t.br(i);break;case"del":r+=t.del(i);break;default:{let e='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw Error(e)}}}return r}}class Or{constructor(e){R(this,"options"),R(this,"block"),this.options=e||kc}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?k8.lex:k8.lexInline}provideParser(){return this.block?Ot.parse:Ot.parseInline}}R(Or,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class On{constructor(...e){R(this,"defaults",kl()),R(this,"options",this.setOptions),R(this,"parse",this.parseMarkdown(!0)),R(this,"parseInline",this.parseMarkdown(!1)),R(this,"Parser",Ot),R(this,"Renderer",k9),R(this,"TextRenderer",Oe),R(this,"Lexer",k8),R(this,"Tokenizer",kS),R(this,"Hooks",Or),this.use(...e)}walkTokens(e,t){var r,n;let i=[];for(let s of e)switch(i=i.concat(t.call(this,s)),s.type){case"table":for(let e of s.header)i=i.concat(this.walkTokens(e.tokens,t));for(let e of s.rows)for(let r of e)i=i.concat(this.walkTokens(r.tokens,t));break;case"list":i=i.concat(this.walkTokens(s.items,t));break;default:{let e=s;null!=(n=null==(r=this.defaults.extensions)?void 0:r.childTokens)&&n[e.type]?this.defaults.extensions.childTokens[e.type].forEach(r=>{let n=e[r].flat(1/0);i=i.concat(this.walkTokens(n,t))}):e.tokens&&(i=i.concat(this.walkTokens(e.tokens,t)))}}return i}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(e=>{let r={...e};if(r.async=this.defaults.async||r.async||!1,e.extensions&&(e.extensions.forEach(e=>{if(!e.name)throw Error("extension name required");if("renderer"in e){let r=t.renderers[e.name];r?t.renderers[e.name]=function(...t){let n=e.renderer.apply(this,t);return!1===n&&(n=r.apply(this,t)),n}:t.renderers[e.name]=e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw Error("extension level must be 'block' or 'inline'");let r=t[e.level];r?r.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)}),r.extensions=t),e.renderer){let t=this.defaults.renderer||new k9(this.defaults);for(let r in e.renderer){if(!(r in t))throw Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;let n=e.renderer[r],i=t[r];t[r]=(...e)=>{let r=n.apply(t,e);return!1===r&&(r=i.apply(t,e)),r||""}}r.renderer=t}if(e.tokenizer){let t=this.defaults.tokenizer||new kS(this.defaults);for(let r in e.tokenizer){if(!(r in t))throw Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;let n=e.tokenizer[r],i=t[r];t[r]=(...e)=>{let r=n.apply(t,e);return!1===r&&(r=i.apply(t,e)),r}}r.tokenizer=t}if(e.hooks){let t=this.defaults.hooks||new Or;for(let r in e.hooks){if(!(r in t))throw Error(`hook '${r}' does not exist`);if(["options","block"].includes(r))continue;let n=e.hooks[r],i=t[r];Or.passThroughHooks.has(r)?t[r]=e=>{if(this.defaults.async)return Promise.resolve(n.call(t,e)).then(e=>i.call(t,e));let r=n.call(t,e);return i.call(t,r)}:t[r]=(...e)=>{let r=n.apply(t,e);return!1===r&&(r=i.apply(t,e)),r}}r.hooks=t}if(e.walkTokens){let t=this.defaults.walkTokens,n=e.walkTokens;r.walkTokens=function(e){let r=[];return r.push(n.call(this,e)),t&&(r=r.concat(t.call(this,e))),r}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return k8.lex(e,t??this.defaults)}parser(e,t){return Ot.parse(e,t??this.defaults)}parseMarkdown(e){return(t,r)=>{let n={...r},i={...this.defaults,...n},s=this.onError(!!i.silent,!!i.async);if(!0===this.defaults.async&&!1===n.async)return s(Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||null===t)return s(Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return s(Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=e);let o=i.hooks?i.hooks.provideLexer():e?k8.lex:k8.lexInline,a=i.hooks?i.hooks.provideParser():e?Ot.parse:Ot.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(t):t).then(e=>o(e,i)).then(e=>i.hooks?i.hooks.processAllTokens(e):e).then(e=>i.walkTokens?Promise.all(this.walkTokens(e,i.walkTokens)).then(()=>e):e).then(e=>a(e,i)).then(e=>i.hooks?i.hooks.postprocess(e):e).catch(s);try{i.hooks&&(t=i.hooks.preprocess(t));let e=o(t,i);i.hooks&&(e=i.hooks.processAllTokens(e)),i.walkTokens&&this.walkTokens(e,i.walkTokens);let r=a(e,i);return i.hooks&&(r=i.hooks.postprocess(r)),r}catch(e){return s(e)}}}onError(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let e="<p>An error occurred:</p><pre>"+kg(r.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(r);throw r}}}let Oi=new On;function Os(e,t){return Oi.parse(e,t)}Os.options=Os.setOptions=function(e){return Oi.setOptions(e),Os.defaults=Oi.defaults,kc=Os.defaults,Os},Os.getDefaults=kl,Os.defaults=kc,Os.use=function(...e){return Oi.use(...e),Os.defaults=Oi.defaults,kc=Os.defaults,Os},Os.walkTokens=function(e,t){return Oi.walkTokens(e,t)},Os.parseInline=Oi.parseInline,Os.Parser=Ot,Os.parser=Ot.parse,Os.Renderer=k9,Os.TextRenderer=Oe,Os.Lexer=k8,Os.lexer=k8.lex,Os.Tokenizer=kS,Os.Hooks=Or,Os.parse=Os,Os.options,Os.setOptions,Os.use,Os.walkTokens,Os.parseInline,Ot.parse,k8.lex;var Oo={},Oa={},Ol={},Oc={},Oh={};Object.defineProperty(Oh,"__esModule",{value:!0}),Oh.default=new Uint16Array('<\xd5\0\0\0\0\0\0EMabcfglmnoprstu\\bfms\x7f\x84\x8b\x90\x95\x98\xa6\xb3\xb9\xc8\xcflig\xc6P&cute\xc1reve;iyx}rc\xc2;r;\uD835\uDD04rave\xc0pha;acr;d;gp\x9d\xa1on;f;\uD835\uDD38plyFunction;ing\xc5cs\xbe\xc3r;\uD835\uDC9Cign;ilde\xc3ml\xc4aceforsu\xe5\xfb\xfecr\xea\xf2kslash;\xf6\xf8;ed;y;crtause;noullis;a;r;\uD835\uDD05pf;\uD835\uDD39eve;c\xf2mpeq;HOacdefhilorsucy;PY\xa9cpyute;;italDifferentialD;leys;aeioron;dil\xc7rc;nint;ot;dnilla;terDot;\xf2i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;\uD835\uDC9Ep;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;\uD835\uDD07afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;\uD835\uDD3B;DEot;qual;bleCDLRUVontourIntegra\xeco\0\0\xbbnArrow;eoftARTrrow;ightArrow;e\xe5ngLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;\uD835\uDC9Frok;NTacdfglmopqstuxG;H\xd0cute\xc9aiyron;rc\xca;ot;r;\uD835\uDD08rave\xc8ement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;\uD835\uDD3Csilon;uail;Tilde;librium;cir;m;a;ml\xcbipsts;onentialE;cfiosy;r;\uD835\uDD09lled\0\0mallSquare;erySmallSquare;\0\0\0f;\uD835\uDD3DAll;riertrf;c\xf2JTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;\uD835\uDD0A;pf;\uD835\uDD3EeaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;\uD835\uDCA2;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ct\xf2rok;mpownHum\xf0qual;EJOacdfgmnostucy;lig;cy;cute\xcdiyrc\xce;ot;r;rave\xcc;apcgr;inaryI;lie\xf3\0;egrral;section;isibleCTomma;imes;gpton;f;\uD835\uDD40a;cr;ilde;\0cy;l\xcfcfosuiyrc;;r;\uD835\uDD0Dpf;\uD835\uDD41\0r;\uD835\uDCA5rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;\uD835\uDD0Epf;\uD835\uDD42cr;\uD835\uDCA6JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ight\xe1sEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;\uD835\uDD0F;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftaright\xe1ight\xe1f;\uD835\uDD43erLReftArrow;ightArrow;cht\xf2;rok;;acefiosup;y;dliumSpace;lintrf;r;\uD835\uDD10nusPlus;pf;\uD835\uDD44c\xf2;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicn\xeberyThi\xeetedGLreaterGreate\xf2essLes\xf3Line;r;\uD835\uDD11Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;\uD835\uDCA9ilde\xd1;Eacdfgmoprstuvlig;cute\xd3iyrc\xd4;blac;r;\uD835\uDD12rave\xd2aeicr;ga;cron;pf;\uD835\uDD46enCurlyDQoubleQuote;uote;;clr;\uD835\uDCAAash\xd8ide\xd5es;ml\xd6erBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;\uD835\uDD13i;;usMinus;ipncareplan\xe5f;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;\uD835\uDCAB;UfosOT"r;\uD835\uDD14pf;cr;\uD835\uDCACBEacefhiorsuarr;G\xaecnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;r\xbbo;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;\uD835\uDD16ortDLRUownArrow\xbbeftArrow\xbbightArrow\xbbpArrow;gma;allCircle;pf;\uD835\uDD4A\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;\uD835\uDCAEar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th\xe1;;esrset;Equal;et\xbbHRSacfhiorsORN\xdeADE;Hccy;y;bu;;aeyron;dil;;r;\uD835\uDD17ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;\uD835\uDD4BipleDot;ctr;\uD835\uDCAFrok;\0\0\0\0\0\0\0crute\xdar;ocir;r\0y;ve;iyrc\xdb;blac;r;\uD835\uDD18rave\xd9acr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;\uD835\uDD4CADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;own\xe1erLReftArrow;ightArrow;i;lon;ing;cr;\uD835\uDCB0ilde;ml\xdcDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;\uD835\uDD19pf;\uD835\uDD4Dcr;\uD835\uDCB1dash;cefosirc;dge;r;\uD835\uDD1Apf;\uD835\uDD4Ecr;\uD835\uDCB2fiosr;\uD835\uDD1B;pf;\uD835\uDD4Fcr;\uD835\uDCB3AIUacfosucy;cy;cy;cute\xddiyrc;;r;\uD835\uDD1Cpf;\uD835\uDD50cr;\uD835\uDCB4ml;Hacdefoscy;cute;ayron;;ot;\0oWidt\xe8a;r;pf;cr;\uD835\uDCB5\0\0\0\0\0\0\0cute\xe1reve;;Ediuy;;rc\xe2te\xb4;lig\xe6;r\xb2;\uD835\uDD1Erave\xe0epfpsym;\xe8ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;e\xbbsd;a;;;;;;;;t;vb;d;pth;\xbb\xb9arr;gpon;f;\uD835\uDD52;Eaeiop;cir;;d;s;rox;e\xf1ing\xe5ctyr;\uD835\uDCB6;mp;e\xf1ilde\xe3ml\xe4cionin\xf4nt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;ge\xbbrk;tbrk;oy;quo;cmprtaus;eptyv;s\xe9no\xf5ahw;;een;r;\uD835\uDD1Fgcostuvwaiu\xf0rc;p\xbbdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;e\xe5\xe5arow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;\uD835\uDD53;tom\xbbtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbar\xa6ceior;\uD835\uDCB7mi;m;el;bh;sub;l;et\xbbp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;\xeeaeiu\0s;on;dil\xe7rc;ps;sm;ot;dmnil\xb8ptyv;t\xa2;er\xe4r;\uD835\uDD20ceiy;ck;mark\xbb;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd\xbb;st;irc;ash;nint;id;cir;ubs;uit\xbb\0on;e;q\xc7\xc6\0\0a;t;;fl\xeeemxent\xbbe\xf3\0;dot;n\xf4fry;\uD835\uDD54o\xe4\xa9;sr;aorr;ss;cur;\uD835\uDCB8bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0re\xe3u\xe3ee;edge;en\xa4earrowlreft\xbbight\xbbe\xe4cionin\xf4nt;lcty;AHabcdefhijlorstuwzr\xf2ar;glrsger;eth;\xf2h;v\xbbarow;a\xe3ayron;;;aogrr;tseq;glm\xb0ta;ptyv;irsht;;\uD835\uDD21arlr\xbb\xbbaegsvm;osnd;suit;amma;in;;iode\xf7;ontimes;n\xf8cy;c\0\0rn;op;lptuwlar;f;\uD835\uDD55;empsq;dot;inus;lus;quare;blebarwedg\xe5\xfanadhownarrow\xf3arpoonlref\xf4igh\xf4karo\xf7\0\0rn;op;cotry;\uD835\uDCB9;l;rok;drot;i;fahr\xf2a\xf2angle;ciy;grarr;DacdefglmnopqrstuxDoo\xf4csute\xe9ter;aioyron;r;c\xealon;;ot;Drot;;\uD835\uDD22;rsave\xe8;dot;;ilsnters;;;dot;apscr;ty;svet\xbbp1;;;gs;p;gpon;f;\uD835\uDD56alsr;sl;us;i;lvon\xbb;csuviorc\xbb\0\0\xedantgltr\xbbess\xbbaeils;st;v;DD;parsl;Daot;rr;cdir;o\xf4ah;\xf0mrl\xebo;cipl;s\xf4eoctatio\xeenential\xe5\0\0\0\0\0\0\0llingdotse\xf1y;male;ilrlig;\0\0g;ig;;\uD835\uDD23lig;lig;fjaltt;ig;ns;of;\0f;\uD835\uDD57ak;v;artint;aocs\0\0\xbd;\xbc;;;\0;;\0\0\xbe;;5;\0;;8;l;wn;cr;\uD835\uDCBBEabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan\xf4;cdlc;ot;o;l;;es;r;\uD835\uDD24;gmel;cy;;Eaj;;;Eaes;p;prox\xbb;q;qim;pf;\uD835\uDD58cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pro\xf8r;qlqles\xf3i\xedenrtneqq;\xc5Aabcefkosyr\xf2ilmrrs\xf0f\xbbil\xf4drcy;;cwir;;ar;irc;alrrts;uit\xbblip;con;r;\uD835\uDD25sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;\uD835\uDD59bar;cltr;\uD835\uDCBDas\xe8rok;bpull;hen\xbb\0\0\0\0\0\0cute\xed;iyrc\xee;cxy;cl\xa1fr;\uD835\uDD26rave\xec;inoinnt;t;fin;ta;lig;aopcgtr;elpin\xe5ar\xf4h;f;ed;;cfotare;in;tie;do\xf4;celpal;grer\xf3\xe3arhk;rod;cgpty;on;f;\uD835\uDD5Aa;uest\xbfcir;\uD835\uDCBEn;Edsv;ot;;v;;ilde;\0cy;l\xefcfmosuiyrc;;r;\uD835\uDD27ath;pf;\uD835\uDD5B\0r;\uD835\uDCBFrcy;kcy;acfghjosppa;v;eydil;;r;\uD835\uDD28reen;cy;cy;pf;\uD835\uDD5Ccr;\uD835\uDCC0ABEHabcdefghjlmnoprstuvartr\xf2\xf2ail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;ra\xeebda;g;dl;\xe5;uo\xabr;bfhlpst;fs;s;\xebp;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;\xec\xe2;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;ta\xe9arpoonduown\xbbp\xbbeftarrows;ightahsrrow;sarpoon\xf3quigarro\xf7hreetimes;;qslan\xf4;cdgsc;ot;o;r;;es;adegsppro\xf8ot;qgq\xf4gt\xf2\xf4i\xedilrsht;;\uD835\uDD29;E;rdu;l;lk;cy;;achtr\xf2orne\xf2ard;ri;iodot;ust;ache\xbbEaes;p;prox\xbb;q;qim;abnoptwznrg;r;r\xebglmreftaright\xe1apsto;ight\xe1parrowlref\xf4ight;aflr;;\uD835\uDD5Dus;imes;st;\xe1;efnge\xbbar;lt;achmtr\xf2orne\xf2ar;d;;ri;achiqtquo;r;\uD835\uDCC1m;eg;;buo;r;rok;<;cdhilqrci;r;re\xe5mes;arr;uest;Piar;;efrdushar;har;enrtneqq;\xc5DacdefhilnopsuDot;clprr\xafet;;ese\xbb;sto;dluow\xeeef\xf4\xf0ker;oymma;;ash;asuredangle\xbbr;\uD835\uDD2Ao;cdnro\xb5;acds\xf4ir;ot\xb7us;bd;u;p;\xf2\xf0dpels;f;\uD835\uDD5Ectr;\uD835\uDCC2pos\xbb;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptla\xbbute;g;;Eiop;d;s;ro\xf8ur;al;s\0p\xa0mp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;ui\xf6eiar;\xedist;sr;\uD835\uDD2BEest;qs;qslan\xf4i\xed;r\xbbAapr\xf2rr;ar;;sv;d;cy;AEadestr\xf2;rr;r;;fqstarrro\xf7ightarro\xf7;qslan\xf4;s\xbbi\xed;ri;ei\xe4ptf;\uD835\uDD5F\xac;inn;Edv;ot;;;i;v;;aorr;astlle\xecl;;lint;;ceu\xe5;c;e\xf1Aaitr\xf2rr;cw;;ghtarrow\xbbri;echimpqu;ceru\xe5;\uD835\uDCC3ort\0\0ar\xe1m;e;qsubp\xe5\xe5bcp;Ees;et;eq;qc;e\xf1;Ees;et;eq;qgilr\xeclde\xf1\xe7ianglelreft;e\xf1ight;e\xf1;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csute\xf3iyr;c\xf4;abioslac;v;old;lig;crir;;\uD835\uDD2C\0\0\0n;ave\xf2;bmar;acitr\xf2irr;oss;n\xe5;aeicr;ga;cdnron;;pf;\uD835\uDD60aelr;rp;;adiosvr\xf2;efmr;of\xbb\xaa\xbagof;r;lope;;clo\xf2ash\xf8l;ide\xf5es;as;ml\xf6bar;\0\0\0\0\0\0\0\0\0r;ast\xb6;lle\xec\0\0m;;y;rcimptnt;od;il;enk;r;\uD835\uDD2Dimo;v;ma\xf4ne;;tvchfork\xbb;aunckk;h;\xf6s;abcdemstcir;ir;ou;;n\xb1im;wo;ipuntint;f;\uD835\uDD61nd\xa3;Eaceinosu;p;u\xe5;c;acensppro\xf8urlye\xf1\xf1aespprox;qq;im;i\xedme;sEas\xf0dfpalslar;ine;urf;;t\xefrel;cir;\uD835\uDCC5;ncsp;fiopsur;\uD835\uDD2Epf;\uD835\uDD62rime;cr;\uD835\uDCC6aeoteirnion\xf3nt;st;e\xf1\xf4ABHabcdefhilmnoprstuxartr\xf2\xf2ail;ar\xf2ar;cdenqrteu;te;i\xe3mptyv;g;del;;\xe5uo\xbbr;abcfhlpstwp;;fs;;s;\xeb\xf0l;im;l;;aiil;o;nal\xf3abrr\xf2rk;akcek;;es;ldu;;aeuyron;diil;\xec\xe2;clqsa;dhar;uo;rh;acgl;ipsn\xe5ar\xf4t;ilrsht;;\uD835\uDD2Faordu\xbb;l;;v;gnshtahlrstrrow;ta\xe9arpoonduow\xeep\xbbeftahrrow\xf3arpoon\xf3ightarrows;quigarro\xf7hreetimes;g;ingdotse\xf1ahmr\xf2a\xf2;oust;ache\xbbmid;abptnrg;r;r\xebaflr;;\uD835\uDD63us;imes;apr;gt;olint;ar\xf2achqquo;r;\uD835\uDCC7buo;rhirre\xe5mes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu\xef;Eaceinpsy;\0;on;u\xe5;dil;rc;Eas;p;im;olint;i\xed;ot;be;Aacmstxrr;rhr\xeb;ot\xa7i;war;min\xf0nu\xf3\xf1t;r;o\uD835\uDD30acoyrp;hycy;;rt\0\0i\xe4ara\xec\xadgmma;fv;;deglnprot;;q;E;;E;e;lus;arr;ar\xf2aeitlslsetm\xe9hp;parsl;dle;;e;s;flptcy;;b;ar;f;\uD835\uDD64adres;uit\xbbcsuaup;s;p;s;ubp;eset;e\xf1;eset;e\xf1;afr\xbbar\xf2cemtr;\uD835\uDCC8tm\xee\xf1i\xecar\xe6arr;fanighteppsilo\xeeh\xe9s\xbbbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acensppro\xf8urlye\xf1\xf1aesppro\xf8q\xf1g;123;Edehlmnps\xb9\xb2\xb3;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr\xeb;owar;lig\xdf\0\0\0\0\0\0\0\0\0\0\0\0get;;r\xebaeyron;dil;;lrec;r;\uD835\uDD31eiko\0e4fa;svym;cnkasppro\xf8im\xbbs\xf0as\xf0rn\xfees\xd7;bd;ar;;eps\xe1;bcfot;ir;;o\uD835\uDD65rk;\xe1rime;aipd\xe5adempstngle;dlqrown\xbbeft;e\xf1;ight;e\xf1ot;inus;lus;b;ime;ezium;chtry;\uD835\uDCC9;cy;rok;iox\xf4headlreftarro\xf7ightarrow\xbbAHabcdfghlmoprstuwr\xf2ar;crute\xfa\xf2r\0y;ve;iyrc\xfb;abhr\xf2lac;a\xf2irsht;;\uD835\uDD32rave\xf9rlr\xbb\xbblk;ct\0\0rn;er\xbbop;ri;alcr;\xa8gpon;f;\uD835\uDD66adhlsuown\xe1arpoonlref\xf4igh\xf4i;hl\xbbon\xbbparrows;cit\0\0rn;er\xbbop;ng;ri;cr;\uD835\uDCCAdirot;lde;i;f\xbbamr\xf2l\xfcangle;ABDacdeflnoprszr\xf2ar;v;as\xe8nrgrt;eknprstapp\xe1othin\xe7hirop\xf4;h\xefiugm\xe1bpsetneq;q;setneq;q;hret\xe1ianglelreft\xbbight\xbby;ash\xbbelr;bear;q;lip;bta\xf2r;\uD835\uDD33tr\xe9subp\xbb\xbbpf;\uD835\uDD67ro\xf0tr\xe9cur;\uD835\uDCCBbpnEe\xbbnEe\xbbigzag;cefoprsirc;dibgar;e;q;erp;r;\uD835\uDD34pf;\uD835\uDD68;eat\xe8cr;\uD835\uDCCC\0\0\0\0\0\0\0tr\xe9r;\uD835\uDD35Aar\xf2r\xf2;Aar\xf2r\xf2a\xf0is;dptfl;\uD835\uDD69im\xe5Aar\xf2r\xf2cqr;\uD835\uDCCDptr\xe9acefiosucuyte\xfd;iyrc;;n\xa5r;\uD835\uDD36cy;pf;\uD835\uDD6Acr;\uD835\uDCCEcmy;l\xffacdefhioswcute;ayron;;ot;ettr\xe6a;r;\uD835\uDD37cy;grarr;pf;\uD835\uDD6Bcr;\uD835\uDCCFjn;j;'.split("").map(function(e){return e.charCodeAt(0)}));var Ou={};Object.defineProperty(Ou,"__esModule",{value:!0}),Ou.default=new Uint16Array("aglq	\x15\x18\x1b\x0f\0\0\x12p;os;t;t;uot;".split("").map(function(e){return e.charCodeAt(0)}));var Od={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.replaceCodePoint=e.fromCodePoint=void 0;var t,r=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function n(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=r.get(e))&&void 0!==t?t:e}e.fromCodePoint=null!==(t=String.fromCodePoint)&&void 0!==t?t:function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)},e.replaceCodePoint=n,e.default=function(t){return(0,e.fromCodePoint)(n(t))}}(Od),function(e){var t,r,n,i,s,o,a,l,c=M.w&&M.w.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),h=M.w&&M.w.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=M.w&&M.w.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&c(t,e,r);return h(t,e),t},d=M.w&&M.w.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXML=e.decodeHTMLStrict=e.decodeHTMLAttribute=e.decodeHTML=e.determineBranch=e.EntityDecoder=e.DecodingMode=e.BinTrieFlags=e.fromCodePoint=e.replaceCodePoint=e.decodeCodePoint=e.xmlDecodeTree=e.htmlDecodeTree=void 0;var f=d(Oh);e.htmlDecodeTree=f.default;var p=d(Ou);e.xmlDecodeTree=p.default;var m=u(Od);function g(e){return e>=r.ZERO&&e<=r.NINE}e.decodeCodePoint=m.default,Object.defineProperty(e,"replaceCodePoint",{enumerable:!0,get:function(){return Od.replaceCodePoint}}),Object.defineProperty(e,"fromCodePoint",{enumerable:!0,get:function(){return Od.fromCodePoint}}),(t=r||(r={}))[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z",(i=n=e.BinTrieFlags||(e.BinTrieFlags={}))[i.VALUE_LENGTH=49152]="VALUE_LENGTH",i[i.BRANCH_LENGTH=16256]="BRANCH_LENGTH",i[i.JUMP_TABLE=127]="JUMP_TABLE",(s=a||(a={}))[s.EntityStart=0]="EntityStart",s[s.NumericStart=1]="NumericStart",s[s.NumericDecimal=2]="NumericDecimal",s[s.NumericHex=3]="NumericHex",s[s.NamedEntity=4]="NamedEntity",(o=l=e.DecodingMode||(e.DecodingMode={}))[o.Legacy=0]="Legacy",o[o.Strict=1]="Strict",o[o.Attribute=2]="Attribute";var y=function(){function e(e,t,r){this.decodeTree=e,this.emitCodePoint=t,this.errors=r,this.state=a.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=l.Strict}return e.prototype.startEntity=function(e){this.decodeMode=e,this.state=a.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},e.prototype.write=function(e,t){switch(this.state){case a.EntityStart:return e.charCodeAt(t)===r.NUM?(this.state=a.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=a.NamedEntity,this.stateNamedEntity(e,t));case a.NumericStart:return this.stateNumericStart(e,t);case a.NumericDecimal:return this.stateNumericDecimal(e,t);case a.NumericHex:return this.stateNumericHex(e,t);case a.NamedEntity:return this.stateNamedEntity(e,t)}},e.prototype.stateNumericStart=function(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===r.LOWER_X?(this.state=a.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=a.NumericDecimal,this.stateNumericDecimal(e,t))},e.prototype.addToNumericResult=function(e,t,r,n){if(t!==r){var i=r-t;this.result=this.result*Math.pow(n,i)+parseInt(e.substr(t,i),n),this.consumed+=i}},e.prototype.stateNumericHex=function(e,t){for(var n=t;t<e.length;){var i,s=e.charCodeAt(t);if(!g(s)&&(!((i=s)>=r.UPPER_A)||!(i<=r.UPPER_F))&&(!(i>=r.LOWER_A)||!(i<=r.LOWER_F)))return this.addToNumericResult(e,n,t,16),this.emitNumericEntity(s,3);t+=1}return this.addToNumericResult(e,n,t,16),-1},e.prototype.stateNumericDecimal=function(e,t){for(var r=t;t<e.length;){var n=e.charCodeAt(t);if(!g(n))return this.addToNumericResult(e,r,t,10),this.emitNumericEntity(n,2);t+=1}return this.addToNumericResult(e,r,t,10),-1},e.prototype.emitNumericEntity=function(e,t){var n;if(this.consumed<=t)return null===(n=this.errors)||void 0===n||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===r.SEMI)this.consumed+=1;else if(this.decodeMode===l.Strict)return 0;return this.emitCodePoint((0,m.replaceCodePoint)(this.result),this.consumed),this.errors&&(e!==r.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},e.prototype.stateNamedEntity=function(e,t){for(var i=this.decodeTree,s=i[this.treeIndex],o=(s&n.VALUE_LENGTH)>>14;t<e.length;t++,this.excess++){var a=e.charCodeAt(t);if(this.treeIndex=v(i,s,this.treeIndex+Math.max(1,o),a),this.treeIndex<0)return 0===this.result||this.decodeMode===l.Attribute&&(0===o||function(e){var t;return e===r.EQUALS||(t=e)>=r.UPPER_A&&t<=r.UPPER_Z||t>=r.LOWER_A&&t<=r.LOWER_Z||g(t)}(a))?0:this.emitNotTerminatedNamedEntity();if(0!=(o=((s=i[this.treeIndex])&n.VALUE_LENGTH)>>14)){if(a===r.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==l.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return -1},e.prototype.emitNotTerminatedNamedEntity=function(){var e,t=this.result,r=(this.decodeTree[t]&n.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,r,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed},e.prototype.emitNamedEntityData=function(e,t,r){var i=this.decodeTree;return this.emitCodePoint(1===t?i[e]&~n.VALUE_LENGTH:i[e+1],r),3===t&&this.emitCodePoint(i[e+2],r),r},e.prototype.end=function(){var e;switch(this.state){case a.NamedEntity:return 0!==this.result&&(this.decodeMode!==l.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case a.NumericDecimal:return this.emitNumericEntity(0,2);case a.NumericHex:return this.emitNumericEntity(0,3);case a.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case a.EntityStart:return 0}},e}();function b(e){var t="",r=new y(e,function(e){return t+=(0,m.fromCodePoint)(e)});return function(e,n){for(var i=0,s=0;(s=e.indexOf("&",s))>=0;){t+=e.slice(i,s),r.startEntity(n);var o=r.write(e,s+1);if(o<0){i=s+r.end();break}i=s+o,s=0===o?i+1:i}var a=t+e.slice(i);return t="",a}}function v(e,t,r,i){var s=(t&n.BRANCH_LENGTH)>>7,o=t&n.JUMP_TABLE;if(0===s)return 0!==o&&i===o?r:-1;if(o){var a=i-o;return a<0||a>=s?-1:e[r+a]-1}for(var l=r,c=l+s-1;l<=c;){var h=l+c>>>1,u=e[h];if(u<i)l=h+1;else{if(!(u>i))return e[h+s];c=h-1}}return -1}e.EntityDecoder=y,e.determineBranch=v;var x=b(f.default),w=b(p.default);e.decodeHTML=function(e,t){return void 0===t&&(t=l.Legacy),x(e,t)},e.decodeHTMLAttribute=function(e){return x(e,l.Attribute)},e.decodeHTMLStrict=function(e){return x(e,l.Strict)},e.decodeXML=function(e){return w(e,l.Strict)}}(Oc),function(e){function t(e){return e===o.Space||e===o.NewLine||e===o.Tab||e===o.FormFeed||e===o.CarriageReturn}function r(e){return e===o.Slash||e===o.Gt||t(e)}function n(e){return e>=o.Zero&&e<=o.Nine}Object.defineProperty(e,"__esModule",{value:!0}),e.QuoteType=void 0,(a=o||(o={}))[a.Tab=9]="Tab",a[a.NewLine=10]="NewLine",a[a.FormFeed=12]="FormFeed",a[a.CarriageReturn=13]="CarriageReturn",a[a.Space=32]="Space",a[a.ExclamationMark=33]="ExclamationMark",a[a.Number=35]="Number",a[a.Amp=38]="Amp",a[a.SingleQuote=39]="SingleQuote",a[a.DoubleQuote=34]="DoubleQuote",a[a.Dash=45]="Dash",a[a.Slash=47]="Slash",a[a.Zero=48]="Zero",a[a.Nine=57]="Nine",a[a.Semi=59]="Semi",a[a.Lt=60]="Lt",a[a.Eq=61]="Eq",a[a.Gt=62]="Gt",a[a.Questionmark=63]="Questionmark",a[a.UpperA=65]="UpperA",a[a.LowerA=97]="LowerA",a[a.UpperF=70]="UpperF",a[a.LowerF=102]="LowerF",a[a.UpperZ=90]="UpperZ",a[a.LowerZ=122]="LowerZ",a[a.LowerX=120]="LowerX",a[a.OpeningSquareBracket=91]="OpeningSquareBracket",(l=i||(i={}))[l.Text=1]="Text",l[l.BeforeTagName=2]="BeforeTagName",l[l.InTagName=3]="InTagName",l[l.InSelfClosingTag=4]="InSelfClosingTag",l[l.BeforeClosingTagName=5]="BeforeClosingTagName",l[l.InClosingTagName=6]="InClosingTagName",l[l.AfterClosingTagName=7]="AfterClosingTagName",l[l.BeforeAttributeName=8]="BeforeAttributeName",l[l.InAttributeName=9]="InAttributeName",l[l.AfterAttributeName=10]="AfterAttributeName",l[l.BeforeAttributeValue=11]="BeforeAttributeValue",l[l.InAttributeValueDq=12]="InAttributeValueDq",l[l.InAttributeValueSq=13]="InAttributeValueSq",l[l.InAttributeValueNq=14]="InAttributeValueNq",l[l.BeforeDeclaration=15]="BeforeDeclaration",l[l.InDeclaration=16]="InDeclaration",l[l.InProcessingInstruction=17]="InProcessingInstruction",l[l.BeforeComment=18]="BeforeComment",l[l.CDATASequence=19]="CDATASequence",l[l.InSpecialComment=20]="InSpecialComment",l[l.InCommentLike=21]="InCommentLike",l[l.BeforeSpecialS=22]="BeforeSpecialS",l[l.SpecialStartSequence=23]="SpecialStartSequence",l[l.InSpecialTag=24]="InSpecialTag",l[l.BeforeEntity=25]="BeforeEntity",l[l.BeforeNumericEntity=26]="BeforeNumericEntity",l[l.InNamedEntity=27]="InNamedEntity",l[l.InNumericEntity=28]="InNumericEntity",l[l.InHexEntity=29]="InHexEntity",(c=s=e.QuoteType||(e.QuoteType={}))[c.NoValue=0]="NoValue",c[c.Unquoted=1]="Unquoted",c[c.Single=2]="Single",c[c.Double=3]="Double";var i,s,o,a,l,c,h={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])};e.default=function(){function e(e,t){var r=e.xmlMode,n=void 0!==r&&r,s=e.decodeEntities;this.cbs=t,this.state=i.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=i.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=n,this.decodeEntities=void 0===s||s,this.entityTrie=n?Oc.xmlDecodeTree:Oc.htmlDecodeTree}return e.prototype.reset=function(){this.state=i.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=i.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},e.prototype.write=function(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()},e.prototype.end=function(){this.running&&this.finish()},e.prototype.pause=function(){this.running=!1},e.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},e.prototype.getIndex=function(){return this.index},e.prototype.getSectionStart=function(){return this.sectionStart},e.prototype.stateText=function(e){e===o.Lt||!this.decodeEntities&&this.fastForwardTo(o.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=i.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===o.Amp&&(this.state=i.BeforeEntity)},e.prototype.stateSpecialStartSequence=function(e){var t=this.sequenceIndex===this.currentSequence.length;if(t?r(e):(32|e)===this.currentSequence[this.sequenceIndex]){if(!t){this.sequenceIndex++;return}}else this.isSpecial=!1;this.sequenceIndex=0,this.state=i.InTagName,this.stateInTagName(e)},e.prototype.stateInSpecialTag=function(e){if(this.sequenceIndex===this.currentSequence.length){if(e===o.Gt||t(e)){var r=this.index-this.currentSequence.length;if(this.sectionStart<r){var n=this.index;this.index=r,this.cbs.ontext(this.sectionStart,r),this.index=n}this.isSpecial=!1,this.sectionStart=r+2,this.stateInClosingTagName(e);return}this.sequenceIndex=0}(32|e)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:0===this.sequenceIndex?this.currentSequence===h.TitleEnd?this.decodeEntities&&e===o.Amp&&(this.state=i.BeforeEntity):this.fastForwardTo(o.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(e===o.Lt)},e.prototype.stateCDATASequence=function(e){e===h.Cdata[this.sequenceIndex]?++this.sequenceIndex===h.Cdata.length&&(this.state=i.InCommentLike,this.currentSequence=h.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=i.InDeclaration,this.stateInDeclaration(e))},e.prototype.fastForwardTo=function(e){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1},e.prototype.stateInCommentLike=function(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===h.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=i.Text):0===this.sequenceIndex?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},e.prototype.isTagStartChar=function(e){return this.xmlMode?!r(e):e>=o.LowerA&&e<=o.LowerZ||e>=o.UpperA&&e<=o.UpperZ},e.prototype.startSpecial=function(e,t){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=t,this.state=i.SpecialStartSequence},e.prototype.stateBeforeTagName=function(e){if(e===o.ExclamationMark)this.state=i.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===o.Questionmark)this.state=i.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){var t=32|e;this.sectionStart=this.index,this.xmlMode||t!==h.TitleEnd[2]?this.state=this.xmlMode||t!==h.ScriptEnd[2]?i.InTagName:i.BeforeSpecialS:this.startSpecial(h.TitleEnd,3)}else e===o.Slash?this.state=i.BeforeClosingTagName:(this.state=i.Text,this.stateText(e))},e.prototype.stateInTagName=function(e){r(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(e))},e.prototype.stateBeforeClosingTagName=function(e){t(e)||(e===o.Gt?this.state=i.Text:(this.state=this.isTagStartChar(e)?i.InClosingTagName:i.InSpecialComment,this.sectionStart=this.index))},e.prototype.stateInClosingTagName=function(e){(e===o.Gt||t(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.AfterClosingTagName,this.stateAfterClosingTagName(e))},e.prototype.stateAfterClosingTagName=function(e){(e===o.Gt||this.fastForwardTo(o.Gt))&&(this.state=i.Text,this.baseState=i.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeAttributeName=function(e){e===o.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=i.InSpecialTag,this.sequenceIndex=0):this.state=i.Text,this.baseState=this.state,this.sectionStart=this.index+1):e===o.Slash?this.state=i.InSelfClosingTag:t(e)||(this.state=i.InAttributeName,this.sectionStart=this.index)},e.prototype.stateInSelfClosingTag=function(e){e===o.Gt?(this.cbs.onselfclosingtag(this.index),this.state=i.Text,this.baseState=i.Text,this.sectionStart=this.index+1,this.isSpecial=!1):t(e)||(this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(e))},e.prototype.stateInAttributeName=function(e){(e===o.Eq||r(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.AfterAttributeName,this.stateAfterAttributeName(e))},e.prototype.stateAfterAttributeName=function(e){e===o.Eq?this.state=i.BeforeAttributeValue:e===o.Slash||e===o.Gt?(this.cbs.onattribend(s.NoValue,this.index),this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(e)):t(e)||(this.cbs.onattribend(s.NoValue,this.index),this.state=i.InAttributeName,this.sectionStart=this.index)},e.prototype.stateBeforeAttributeValue=function(e){e===o.DoubleQuote?(this.state=i.InAttributeValueDq,this.sectionStart=this.index+1):e===o.SingleQuote?(this.state=i.InAttributeValueSq,this.sectionStart=this.index+1):t(e)||(this.sectionStart=this.index,this.state=i.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))},e.prototype.handleInAttributeValue=function(e,t){e===t||!this.decodeEntities&&this.fastForwardTo(t)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(t===o.DoubleQuote?s.Double:s.Single,this.index),this.state=i.BeforeAttributeName):this.decodeEntities&&e===o.Amp&&(this.baseState=this.state,this.state=i.BeforeEntity)},e.prototype.stateInAttributeValueDoubleQuotes=function(e){this.handleInAttributeValue(e,o.DoubleQuote)},e.prototype.stateInAttributeValueSingleQuotes=function(e){this.handleInAttributeValue(e,o.SingleQuote)},e.prototype.stateInAttributeValueNoQuotes=function(e){t(e)||e===o.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(s.Unquoted,this.index),this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===o.Amp&&(this.baseState=this.state,this.state=i.BeforeEntity)},e.prototype.stateBeforeDeclaration=function(e){e===o.OpeningSquareBracket?(this.state=i.CDATASequence,this.sequenceIndex=0):this.state=e===o.Dash?i.BeforeComment:i.InDeclaration},e.prototype.stateInDeclaration=function(e){(e===o.Gt||this.fastForwardTo(o.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=i.Text,this.sectionStart=this.index+1)},e.prototype.stateInProcessingInstruction=function(e){(e===o.Gt||this.fastForwardTo(o.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=i.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeComment=function(e){e===o.Dash?(this.state=i.InCommentLike,this.currentSequence=h.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=i.InDeclaration},e.prototype.stateInSpecialComment=function(e){(e===o.Gt||this.fastForwardTo(o.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=i.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeSpecialS=function(e){var t=32|e;t===h.ScriptEnd[3]?this.startSpecial(h.ScriptEnd,4):t===h.StyleEnd[3]?this.startSpecial(h.StyleEnd,4):(this.state=i.InTagName,this.stateInTagName(e))},e.prototype.stateBeforeEntity=function(e){this.entityExcess=1,this.entityResult=0,e===o.Number?this.state=i.BeforeNumericEntity:e===o.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=i.InNamedEntity,this.stateInNamedEntity(e))},e.prototype.stateInNamedEntity=function(e){if(this.entityExcess+=1,this.trieIndex=(0,Oc.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,e),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var t=this.trieCurrent&Oc.BinTrieFlags.VALUE_LENGTH;if(t){var r=(t>>14)-1;if(this.allowLegacyEntity()||e===o.Semi){var n=this.index-this.entityExcess+1;n>this.sectionStart&&this.emitPartial(this.sectionStart,n),this.entityResult=this.trieIndex,this.trieIndex+=r,this.entityExcess=0,this.sectionStart=this.index+1,0===r&&this.emitNamedEntity()}else this.trieIndex+=r}},e.prototype.emitNamedEntity=function(){if(this.state=this.baseState,0!==this.entityResult)switch((this.entityTrie[this.entityResult]&Oc.BinTrieFlags.VALUE_LENGTH)>>14){case 1:this.emitCodePoint(this.entityTrie[this.entityResult]&~Oc.BinTrieFlags.VALUE_LENGTH);break;case 2:this.emitCodePoint(this.entityTrie[this.entityResult+1]);break;case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}},e.prototype.stateBeforeNumericEntity=function(e){(32|e)===o.LowerX?(this.entityExcess++,this.state=i.InHexEntity):(this.state=i.InNumericEntity,this.stateInNumericEntity(e))},e.prototype.emitNumericEntity=function(e){var t=this.index-this.entityExcess-1;t+2+ +(this.state===i.InHexEntity)!==this.index&&(t>this.sectionStart&&this.emitPartial(this.sectionStart,t),this.sectionStart=this.index+Number(e),this.emitCodePoint((0,Oc.replaceCodePoint)(this.entityResult))),this.state=this.baseState},e.prototype.stateInNumericEntity=function(e){e===o.Semi?this.emitNumericEntity(!0):n(e)?(this.entityResult=10*this.entityResult+(e-o.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},e.prototype.stateInHexEntity=function(e){e===o.Semi?this.emitNumericEntity(!0):n(e)?(this.entityResult=16*this.entityResult+(e-o.Zero),this.entityExcess++):e>=o.UpperA&&e<=o.UpperF||e>=o.LowerA&&e<=o.LowerF?(this.entityResult=16*this.entityResult+((32|e)-o.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},e.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===i.Text||this.baseState===i.InSpecialTag)},e.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===i.Text||this.state===i.InSpecialTag&&0===this.sequenceIndex?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===i.InAttributeValueDq||this.state===i.InAttributeValueSq||this.state===i.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},e.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},e.prototype.parse=function(){for(;this.shouldContinue();){var e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case i.Text:this.stateText(e);break;case i.SpecialStartSequence:this.stateSpecialStartSequence(e);break;case i.InSpecialTag:this.stateInSpecialTag(e);break;case i.CDATASequence:this.stateCDATASequence(e);break;case i.InAttributeValueDq:this.stateInAttributeValueDoubleQuotes(e);break;case i.InAttributeName:this.stateInAttributeName(e);break;case i.InCommentLike:this.stateInCommentLike(e);break;case i.InSpecialComment:this.stateInSpecialComment(e);break;case i.BeforeAttributeName:this.stateBeforeAttributeName(e);break;case i.InTagName:this.stateInTagName(e);break;case i.InClosingTagName:this.stateInClosingTagName(e);break;case i.BeforeTagName:this.stateBeforeTagName(e);break;case i.AfterAttributeName:this.stateAfterAttributeName(e);break;case i.InAttributeValueSq:this.stateInAttributeValueSingleQuotes(e);break;case i.BeforeAttributeValue:this.stateBeforeAttributeValue(e);break;case i.BeforeClosingTagName:this.stateBeforeClosingTagName(e);break;case i.AfterClosingTagName:this.stateAfterClosingTagName(e);break;case i.BeforeSpecialS:this.stateBeforeSpecialS(e);break;case i.InAttributeValueNq:this.stateInAttributeValueNoQuotes(e);break;case i.InSelfClosingTag:this.stateInSelfClosingTag(e);break;case i.InDeclaration:this.stateInDeclaration(e);break;case i.BeforeDeclaration:this.stateBeforeDeclaration(e);break;case i.BeforeComment:this.stateBeforeComment(e);break;case i.InProcessingInstruction:this.stateInProcessingInstruction(e);break;case i.InNamedEntity:this.stateInNamedEntity(e);break;case i.BeforeEntity:this.stateBeforeEntity(e);break;case i.InHexEntity:this.stateInHexEntity(e);break;case i.InNumericEntity:this.stateInNumericEntity(e);break;default:this.stateBeforeNumericEntity(e)}this.index++}this.cleanup()},e.prototype.finish=function(){this.state===i.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},e.prototype.handleTrailingData=function(){var e=this.buffer.length+this.offset;this.state===i.InCommentLike?this.currentSequence===h.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===i.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===i.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===i.InTagName||this.state===i.BeforeAttributeName||this.state===i.BeforeAttributeValue||this.state===i.AfterAttributeName||this.state===i.InAttributeName||this.state===i.InAttributeValueSq||this.state===i.InAttributeValueDq||this.state===i.InAttributeValueNq||this.state===i.InClosingTagName||this.cbs.ontext(this.sectionStart,e)},e.prototype.emitPartial=function(e,t){this.baseState!==i.Text&&this.baseState!==i.InSpecialTag?this.cbs.onattribdata(e,t):this.cbs.ontext(e,t)},e.prototype.emitCodePoint=function(e){this.baseState!==i.Text&&this.baseState!==i.InSpecialTag?this.cbs.onattribentity(e):this.cbs.ontextentity(e)},e}()}(Ol);var Of=M.w&&M.w.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),Op=M.w&&M.w.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Om=M.w&&M.w.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&Of(t,e,r);return Op(t,e),t};Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.Parser=void 0;var Og=Om(Ol),Oy=new Set(["input","option","optgroup","select","button","datalist","textarea"]),Ob=new Set(["p"]),Ov=new Set(["thead","tbody"]),Ox=new Set(["dd","dt"]),Ow=new Set(["rt","rp"]),Ok=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",Ob],["h1",Ob],["h2",Ob],["h3",Ob],["h4",Ob],["h5",Ob],["h6",Ob],["select",Oy],["input",Oy],["output",Oy],["button",Oy],["datalist",Oy],["textarea",Oy],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",Ox],["dt",Ox],["address",Ob],["article",Ob],["aside",Ob],["blockquote",Ob],["details",Ob],["div",Ob],["dl",Ob],["fieldset",Ob],["figcaption",Ob],["figure",Ob],["footer",Ob],["form",Ob],["header",Ob],["hr",Ob],["main",Ob],["nav",Ob],["ol",Ob],["pre",Ob],["section",Ob],["table",Ob],["ul",Ob],["rt",Ow],["rp",Ow],["tbody",Ov],["tfoot",Ov]]),OO=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),OS=new Set(["math","svg"]),OC=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),OT=/\s|\//;Oa.Parser=function(){function e(e,t){var r,n,i,s,o;void 0===t&&(t={}),this.options=t,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=e??{},this.lowerCaseTagNames=null!==(r=t.lowerCaseTags)&&void 0!==r?r:!t.xmlMode,this.lowerCaseAttributeNames=null!==(n=t.lowerCaseAttributeNames)&&void 0!==n?n:!t.xmlMode,this.tokenizer=new(null!==(i=t.Tokenizer)&&void 0!==i?i:Og.default)(this.options,this),null===(o=(s=this.cbs).onparserinit)||void 0===o||o.call(s,this)}return e.prototype.ontext=function(e,t){var r,n,i=this.getSlice(e,t);this.endIndex=t-1,null===(n=(r=this.cbs).ontext)||void 0===n||n.call(r,i),this.startIndex=t},e.prototype.ontextentity=function(e){var t,r,n=this.tokenizer.getSectionStart();this.endIndex=n-1,null===(r=(t=this.cbs).ontext)||void 0===r||r.call(t,(0,Oc.fromCodePoint)(e)),this.startIndex=n},e.prototype.isVoidElement=function(e){return!this.options.xmlMode&&OO.has(e)},e.prototype.onopentagname=function(e,t){this.endIndex=t;var r=this.getSlice(e,t);this.lowerCaseTagNames&&(r=r.toLowerCase()),this.emitOpenTag(r)},e.prototype.emitOpenTag=function(e){this.openTagStart=this.startIndex,this.tagname=e;var t,r,n,i,s=!this.options.xmlMode&&Ok.get(e);if(s)for(;this.stack.length>0&&s.has(this.stack[this.stack.length-1]);){var o=this.stack.pop();null===(r=(t=this.cbs).onclosetag)||void 0===r||r.call(t,o,!0)}this.isVoidElement(e)||(this.stack.push(e),OS.has(e)?this.foreignContext.push(!0):OC.has(e)&&this.foreignContext.push(!1)),null===(i=(n=this.cbs).onopentagname)||void 0===i||i.call(n,e),this.cbs.onopentag&&(this.attribs={})},e.prototype.endOpenTag=function(e){var t,r;this.startIndex=this.openTagStart,this.attribs&&(null===(r=(t=this.cbs).onopentag)||void 0===r||r.call(t,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},e.prototype.onopentagend=function(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1},e.prototype.onclosetag=function(e,t){this.endIndex=t;var r,n,i,s,o,a,l=this.getSlice(e,t);if(this.lowerCaseTagNames&&(l=l.toLowerCase()),(OS.has(l)||OC.has(l))&&this.foreignContext.pop(),this.isVoidElement(l))this.options.xmlMode||"br"!==l||(null===(n=(r=this.cbs).onopentagname)||void 0===n||n.call(r,"br"),null===(s=(i=this.cbs).onopentag)||void 0===s||s.call(i,"br",{},!0),null===(a=(o=this.cbs).onclosetag)||void 0===a||a.call(o,"br",!1));else{var c=this.stack.lastIndexOf(l);if(-1!==c){if(this.cbs.onclosetag)for(var h=this.stack.length-c;h--;)this.cbs.onclosetag(this.stack.pop(),0!==h);else this.stack.length=c}else this.options.xmlMode||"p"!==l||(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=t+1},e.prototype.onselfclosingtag=function(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)},e.prototype.closeCurrentTag=function(e){var t,r,n=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===n&&(null===(r=(t=this.cbs).onclosetag)||void 0===r||r.call(t,n,!e),this.stack.pop())},e.prototype.onattribname=function(e,t){this.startIndex=e;var r=this.getSlice(e,t);this.attribname=this.lowerCaseAttributeNames?r.toLowerCase():r},e.prototype.onattribdata=function(e,t){this.attribvalue+=this.getSlice(e,t)},e.prototype.onattribentity=function(e){this.attribvalue+=(0,Oc.fromCodePoint)(e)},e.prototype.onattribend=function(e,t){var r,n;this.endIndex=t,null===(n=(r=this.cbs).onattribute)||void 0===n||n.call(r,this.attribname,this.attribvalue,e===Og.QuoteType.Double?'"':e===Og.QuoteType.Single?"'":e===Og.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},e.prototype.getInstructionName=function(e){var t=e.search(OT),r=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(r=r.toLowerCase()),r},e.prototype.ondeclaration=function(e,t){this.endIndex=t;var r=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){var n=this.getInstructionName(r);this.cbs.onprocessinginstruction("!".concat(n),"!".concat(r))}this.startIndex=t+1},e.prototype.onprocessinginstruction=function(e,t){this.endIndex=t;var r=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){var n=this.getInstructionName(r);this.cbs.onprocessinginstruction("?".concat(n),"?".concat(r))}this.startIndex=t+1},e.prototype.oncomment=function(e,t,r){var n,i,s,o;this.endIndex=t,null===(i=(n=this.cbs).oncomment)||void 0===i||i.call(n,this.getSlice(e,t-r)),null===(o=(s=this.cbs).oncommentend)||void 0===o||o.call(s),this.startIndex=t+1},e.prototype.oncdata=function(e,t,r){this.endIndex=t;var n,i,s,o,a,l,c,h,u,d,f=this.getSlice(e,t-r);this.options.xmlMode||this.options.recognizeCDATA?(null===(i=(n=this.cbs).oncdatastart)||void 0===i||i.call(n),null===(o=(s=this.cbs).ontext)||void 0===o||o.call(s,f),null===(l=(a=this.cbs).oncdataend)||void 0===l||l.call(a)):(null===(h=(c=this.cbs).oncomment)||void 0===h||h.call(c,"[CDATA[".concat(f,"]]")),null===(d=(u=this.cbs).oncommentend)||void 0===d||d.call(u)),this.startIndex=t+1},e.prototype.onend=function(){var e,t;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var r=this.stack.length;r>0;this.cbs.onclosetag(this.stack[--r],!0));}null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)},e.prototype.reset=function(){var e,t,r,n;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,null===(n=(r=this.cbs).onparserinit)||void 0===n||n.call(r,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},e.prototype.parseComplete=function(e){this.reset(),this.end(e)},e.prototype.getSlice=function(e,t){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var r=this.buffers[0].slice(e-this.bufferOffset,t-this.bufferOffset);t-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),r+=this.buffers[0].slice(0,t-this.bufferOffset);return r},e.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},e.prototype.write=function(e){var t,r;if(this.ended){null===(r=(t=this.cbs).onerror)||void 0===r||r.call(t,Error(".write() after done!"));return}this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++)},e.prototype.end=function(e){var t,r;if(this.ended){null===(r=(t=this.cbs).onerror)||void 0===r||r.call(t,Error(".end() after done!"));return}e&&this.write(e),this.ended=!0,this.tokenizer.end()},e.prototype.pause=function(){this.tokenizer.pause()},e.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},e.prototype.parseChunk=function(e){this.write(e)},e.prototype.done=function(e){this.end(e)},e}();var OA={},OM={};!function(e){var t,r;Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0,(r=t=e.ElementType||(e.ElementType={})).Root="root",r.Text="text",r.Directive="directive",r.Comment="comment",r.Script="script",r.Style="style",r.Tag="tag",r.CDATA="cdata",r.Doctype="doctype",e.isTag=function(e){return e.type===t.Tag||e.type===t.Script||e.type===t.Style},e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype}(OM);var OE={},ON=M.w&&M.w.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),O_=M.w&&M.w.__assign||function(){return(O_=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(OE,"__esModule",{value:!0}),OE.cloneNode=OE.hasChildren=OE.isDocument=OE.isDirective=OE.isComment=OE.isText=OE.isCDATA=OE.isTag=OE.Element=OE.Document=OE.CDATA=OE.NodeWithChildren=OE.ProcessingInstruction=OE.Comment=OE.Text=OE.DataNode=OE.Node=void 0;var Oj=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),OU(this,e)},e}();OE.Node=Oj;var OD=function(e){function t(t){var r=e.call(this)||this;return r.data=t,r}return ON(t,e),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),t}(Oj);OE.DataNode=OD;var OR=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=OM.ElementType.Text,t}return ON(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(OD);OE.Text=OR;var OP=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=OM.ElementType.Comment,t}return ON(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(OD);OE.Comment=OP;var OI=function(e){function t(t,r){var n=e.call(this,r)||this;return n.name=t,n.type=OM.ElementType.Directive,n}return ON(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(OD);OE.ProcessingInstruction=OI;var Oz=function(e){function t(t){var r=e.call(this)||this;return r.children=t,r}return ON(t,e),Object.defineProperty(t.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),t}(Oj);OE.NodeWithChildren=Oz;var OL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=OM.ElementType.CDATA,t}return ON(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(Oz);OE.CDATA=OL;var Oq=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=OM.ElementType.Root,t}return ON(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(Oz);OE.Document=Oq;var O$=function(e){function t(t,r,n,i){void 0===n&&(n=[]),void 0===i&&(i="script"===t?OM.ElementType.Script:"style"===t?OM.ElementType.Style:OM.ElementType.Tag);var s=e.call(this,n)||this;return s.name=t,s.attribs=r,s.type=i,s}return ON(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map(function(t){var r,n;return{name:t,value:e.attribs[t],namespace:null===(r=e["x-attribsNamespace"])||void 0===r?void 0:r[t],prefix:null===(n=e["x-attribsPrefix"])||void 0===n?void 0:n[t]}})},enumerable:!1,configurable:!0}),t}(Oz);function OB(e){return(0,OM.isTag)(e)}function OF(e){return e.type===OM.ElementType.CDATA}function OQ(e){return e.type===OM.ElementType.Text}function OV(e){return e.type===OM.ElementType.Comment}function OH(e){return e.type===OM.ElementType.Directive}function OW(e){return e.type===OM.ElementType.Root}function OU(e,t){if(void 0===t&&(t=!1),OQ(e))r=new OR(e.data);else if(OV(e))r=new OP(e.data);else if(OB(e)){var r,n=t?OG(e.children):[],i=new O$(e.name,O_({},e.attribs),n);n.forEach(function(e){return e.parent=i}),null!=e.namespace&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=O_({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=O_({},e["x-attribsPrefix"])),r=i}else if(OF(e)){var n=t?OG(e.children):[],s=new OL(n);n.forEach(function(e){return e.parent=s}),r=s}else if(OW(e)){var n=t?OG(e.children):[],o=new Oq(n);n.forEach(function(e){return e.parent=o}),e["x-mode"]&&(o["x-mode"]=e["x-mode"]),r=o}else if(OH(e)){var a=new OI(e.name,e.data);null!=e["x-name"]&&(a["x-name"]=e["x-name"],a["x-publicId"]=e["x-publicId"],a["x-systemId"]=e["x-systemId"]),r=a}else throw Error("Not implemented yet: ".concat(e.type));return r.startIndex=e.startIndex,r.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(r.sourceCodeLocation=e.sourceCodeLocation),r}function OG(e){for(var t=e.map(function(e){return OU(e,!0)}),r=1;r<t.length;r++)t[r].prev=t[r-1],t[r-1].next=t[r];return t}OE.Element=O$,OE.isTag=OB,OE.isCDATA=OF,OE.isText=OQ,OE.isComment=OV,OE.isDirective=OH,OE.isDocument=OW,OE.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")},OE.cloneNode=OU,function(e){var t=M.w&&M.w.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=M.w&&M.w.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0,r(OE,e);var n={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},i=function(){function e(e,t,r){this.dom=[],this.root=new OE.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof t&&(r=t,t=n),"object"==typeof e&&(t=e,e=void 0),this.callback=e??null,this.options=t??n,this.elementCB=r??null}return e.prototype.onparserinit=function(e){this.parser=e},e.prototype.onreset=function(){this.dom=[],this.root=new OE.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},e.prototype.onopentag=function(e,t){var r=this.options.xmlMode?OM.ElementType.Tag:void 0,n=new OE.Element(e,t,void 0,r);this.addNode(n),this.tagStack.push(n)},e.prototype.ontext=function(e){var t=this.lastNode;if(t&&t.type===OM.ElementType.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{var r=new OE.Text(e);this.addNode(r),this.lastNode=r}},e.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===OM.ElementType.Comment){this.lastNode.data+=e;return}var t=new OE.Comment(e);this.addNode(t),this.lastNode=t},e.prototype.oncommentend=function(){this.lastNode=null},e.prototype.oncdatastart=function(){var e=new OE.Text(""),t=new OE.CDATA([e]);this.addNode(t),e.parent=t,this.lastNode=e},e.prototype.oncdataend=function(){this.lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var r=new OE.ProcessingInstruction(e,t);this.addNode(r)},e.prototype.handleCallback=function(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this.tagStack[this.tagStack.length-1],r=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),r&&(e.prev=r,r.next=e),e.parent=t,this.lastNode=null},e}();e.DomHandler=i,e.default=i}(OA);var OX={},OY={},OZ={},OJ={},OK={},O0={};function O1(e){for(var t=1;t<e.length;t++)e[t][0]+=e[t-1][0]+1;return e}Object.defineProperty(O0,"__esModule",{value:!0}),O0.default=new Map(O1([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(O1([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(O1([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(O1([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]));var O2={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.escapeText=e.escapeAttribute=e.escapeUTF8=e.escape=e.encodeXML=e.getCodePoint=e.xmlReplacer=void 0,e.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var t=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);function r(r){for(var n,i="",s=0;null!==(n=e.xmlReplacer.exec(r));){var o=n.index,a=r.charCodeAt(o),l=t.get(a);void 0!==l?(i+=r.substring(s,o)+l,s=o+1):(i+="".concat(r.substring(s,o),"&#x").concat((0,e.getCodePoint)(r,o).toString(16),";"),s=e.xmlReplacer.lastIndex+=+((64512&a)==55296))}return i+r.substr(s)}function n(e,t){return function(r){for(var n,i=0,s="";n=e.exec(r);)i!==n.index&&(s+=r.substring(i,n.index)),s+=t.get(n[0].charCodeAt(0)),i=n.index+1;return s+r.substring(i)}}e.getCodePoint=null!=String.prototype.codePointAt?function(e,t){return e.codePointAt(t)}:function(e,t){return(64512&e.charCodeAt(t))==55296?(e.charCodeAt(t)-55296)*1024+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t)},e.encodeXML=r,e.escape=r,e.escapeUTF8=n(/[&<>'"]/g,t),e.escapeAttribute=n(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),e.escapeText=n(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))}(O2);var O4=M.w&&M.w.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(OK,"__esModule",{value:!0}),OK.encodeNonAsciiHTML=OK.encodeHTML=void 0;var O5=O4(O0),O3=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function O6(e,t){for(var r,n="",i=0;null!==(r=e.exec(t));){var s=r.index;n+=t.substring(i,s);var o=t.charCodeAt(s),a=O5.default.get(o);if("object"==typeof a){if(s+1<t.length){var l=t.charCodeAt(s+1),c="number"==typeof a.n?a.n===l?a.o:void 0:a.n.get(l);if(void 0!==c){n+=c,i=e.lastIndex+=1;continue}}a=a.v}if(void 0!==a)n+=a,i=s+1;else{var h=(0,O2.getCodePoint)(t,s);n+="&#x".concat(h.toString(16),";"),i=e.lastIndex+=+(h!==o)}}return n+t.substr(i)}OK.encodeHTML=function(e){return O6(O3,e)},OK.encodeNonAsciiHTML=function(e){return O6(O2.xmlReplacer,e)},function(e){var t,r,n,i;function s(e,t){if(void 0===t&&(t=r.XML),("number"==typeof t?t:t.level)===r.HTML){var n="object"==typeof t?t.mode:void 0;return(0,Oc.decodeHTML)(e,n)}return(0,Oc.decodeXML)(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXMLStrict=e.decodeHTML5Strict=e.decodeHTML4Strict=e.decodeHTML5=e.decodeHTML4=e.decodeHTMLAttribute=e.decodeHTMLStrict=e.decodeHTML=e.decodeXML=e.DecodingMode=e.EntityDecoder=e.encodeHTML5=e.encodeHTML4=e.encodeNonAsciiHTML=e.encodeHTML=e.escapeText=e.escapeAttribute=e.escapeUTF8=e.escape=e.encodeXML=e.encode=e.decodeStrict=e.decode=e.EncodingMode=e.EntityLevel=void 0,(n=r=e.EntityLevel||(e.EntityLevel={}))[n.XML=0]="XML",n[n.HTML=1]="HTML",(i=t=e.EncodingMode||(e.EncodingMode={}))[i.UTF8=0]="UTF8",i[i.ASCII=1]="ASCII",i[i.Extensive=2]="Extensive",i[i.Attribute=3]="Attribute",i[i.Text=4]="Text",e.decode=s,e.decodeStrict=function(e,t){void 0===t&&(t=r.XML);var n,i="number"==typeof t?{level:t}:t;return null!==(n=i.mode)&&void 0!==n||(i.mode=Oc.DecodingMode.Strict),s(e,i)},e.encode=function(e,n){void 0===n&&(n=r.XML);var i="number"==typeof n?{level:n}:n;return i.mode===t.UTF8?(0,O2.escapeUTF8)(e):i.mode===t.Attribute?(0,O2.escapeAttribute)(e):i.mode===t.Text?(0,O2.escapeText)(e):i.level===r.HTML?i.mode===t.ASCII?(0,OK.encodeNonAsciiHTML)(e):(0,OK.encodeHTML)(e):(0,O2.encodeXML)(e)},Object.defineProperty(e,"encodeXML",{enumerable:!0,get:function(){return O2.encodeXML}}),Object.defineProperty(e,"escape",{enumerable:!0,get:function(){return O2.escape}}),Object.defineProperty(e,"escapeUTF8",{enumerable:!0,get:function(){return O2.escapeUTF8}}),Object.defineProperty(e,"escapeAttribute",{enumerable:!0,get:function(){return O2.escapeAttribute}}),Object.defineProperty(e,"escapeText",{enumerable:!0,get:function(){return O2.escapeText}}),Object.defineProperty(e,"encodeHTML",{enumerable:!0,get:function(){return OK.encodeHTML}}),Object.defineProperty(e,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return OK.encodeNonAsciiHTML}}),Object.defineProperty(e,"encodeHTML4",{enumerable:!0,get:function(){return OK.encodeHTML}}),Object.defineProperty(e,"encodeHTML5",{enumerable:!0,get:function(){return OK.encodeHTML}}),Object.defineProperty(e,"EntityDecoder",{enumerable:!0,get:function(){return Oc.EntityDecoder}}),Object.defineProperty(e,"DecodingMode",{enumerable:!0,get:function(){return Oc.DecodingMode}}),Object.defineProperty(e,"decodeXML",{enumerable:!0,get:function(){return Oc.decodeXML}}),Object.defineProperty(e,"decodeHTML",{enumerable:!0,get:function(){return Oc.decodeHTML}}),Object.defineProperty(e,"decodeHTMLStrict",{enumerable:!0,get:function(){return Oc.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTMLAttribute",{enumerable:!0,get:function(){return Oc.decodeHTMLAttribute}}),Object.defineProperty(e,"decodeHTML4",{enumerable:!0,get:function(){return Oc.decodeHTML}}),Object.defineProperty(e,"decodeHTML5",{enumerable:!0,get:function(){return Oc.decodeHTML}}),Object.defineProperty(e,"decodeHTML4Strict",{enumerable:!0,get:function(){return Oc.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTML5Strict",{enumerable:!0,get:function(){return Oc.decodeHTMLStrict}}),Object.defineProperty(e,"decodeXMLStrict",{enumerable:!0,get:function(){return Oc.decodeXML}})}(OJ);var O7={};Object.defineProperty(O7,"__esModule",{value:!0}),O7.attributeNames=O7.elementNames=void 0,O7.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(e){return[e.toLowerCase(),e]})),O7.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(e){return[e.toLowerCase(),e]}));var O8=M.w&&M.w.__assign||function(){return(O8=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},O9=M.w&&M.w.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),Se=M.w&&M.w.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),St=M.w&&M.w.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&O9(t,e,r);return Se(t,e),t};Object.defineProperty(OZ,"__esModule",{value:!0}),OZ.render=void 0;var Sr=St(OM),Sn=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function Si(e){return e.replace(/"/g,"&quot;")}var Ss=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function So(e,t){void 0===t&&(t={});for(var r=("length"in e)?e:[e],n="",i=0;i<r.length;i++)n+=function(e,t){var r,n,i;switch(e.type){case Sr.Root:return So(e.children,t);case Sr.Doctype:case Sr.Directive:return r=e,"<".concat(r.data,">");case Sr.Comment:return n=e,"\x3c!--".concat(n.data,"--\x3e");case Sr.CDATA:return i=e,"<![CDATA[".concat(i.children[0].data,"]]>");case Sr.Script:case Sr.Style:case Sr.Tag:return function(e,t){"foreign"===t.xmlMode&&(e.name=null!==(r=O7.elementNames.get(e.name))&&void 0!==r?r:e.name,e.parent&&Sa.has(e.parent.name)&&(t=O8(O8({},t),{xmlMode:!1}))),!t.xmlMode&&Sl.has(e.name)&&(t=O8(O8({},t),{xmlMode:"foreign"}));var r,n="<".concat(e.name),i=function(e,t){var r;if(e){var n=(null!==(r=t.encodeEntities)&&void 0!==r?r:t.decodeEntities)===!1?Si:t.xmlMode||"utf8"!==t.encodeEntities?OJ.encodeXML:OJ.escapeAttribute;return Object.keys(e).map(function(r){var i,s,o=null!==(i=e[r])&&void 0!==i?i:"";return"foreign"===t.xmlMode&&(r=null!==(s=O7.attributeNames.get(r))&&void 0!==s?s:r),t.emptyAttrs||t.xmlMode||""!==o?"".concat(r,'="').concat(n(o),'"'):r}).join(" ")}}(e.attribs,t);return i&&(n+=" ".concat(i)),0===e.children.length&&(t.xmlMode?!1!==t.selfClosingTags:t.selfClosingTags&&Ss.has(e.name))?(t.xmlMode||(n+=" "),n+="/>"):(n+=">",e.children.length>0&&(n+=So(e.children,t)),(t.xmlMode||!Ss.has(e.name))&&(n+="</".concat(e.name,">"))),n}(e,t);case Sr.Text:return function(e,t){var r,n=e.data||"";return(null!==(r=t.encodeEntities)&&void 0!==r?r:t.decodeEntities)===!1||!t.xmlMode&&e.parent&&Sn.has(e.parent.name)||(n=t.xmlMode||"utf8"!==t.encodeEntities?(0,OJ.encodeXML)(n):(0,OJ.escapeText)(n)),n}(e,t)}}(r[i],t);return n}OZ.render=So,OZ.default=So;var Sa=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),Sl=new Set(["svg","math"]),Sc=M.w&&M.w.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(OY,"__esModule",{value:!0}),OY.getOuterHTML=Su,OY.getInnerHTML=function(e,t){return(0,OA.hasChildren)(e)?e.children.map(function(e){return Su(e,t)}).join(""):""},OY.getText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,OA.isTag)(t)?"br"===t.name?`
`:e(t.children):(0,OA.isCDATA)(t)?e(t.children):(0,OA.isText)(t)?t.data:""},OY.textContent=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,OA.hasChildren)(t)&&!(0,OA.isComment)(t)?e(t.children):(0,OA.isText)(t)?t.data:""},OY.innerText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,OA.hasChildren)(t)&&(t.type===OM.ElementType.Tag||(0,OA.isCDATA)(t))?e(t.children):(0,OA.isText)(t)?t.data:""};var Sh=Sc(OZ);function Su(e,t){return(0,Sh.default)(e,t)}var Sd={};function Sf(e){return(0,OA.hasChildren)(e)?e.children:[]}function Sp(e){return e.parent||null}Object.defineProperty(Sd,"__esModule",{value:!0}),Sd.getChildren=Sf,Sd.getParent=Sp,Sd.getSiblings=function(e){var t=Sp(e);if(null!=t)return Sf(t);for(var r=[e],n=e.prev,i=e.next;null!=n;)r.unshift(n),n=n.prev;for(;null!=i;)r.push(i),i=i.next;return r},Sd.getAttributeValue=function(e,t){var r;return null===(r=e.attribs)||void 0===r?void 0:r[t]},Sd.hasAttrib=function(e,t){return null!=e.attribs&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&null!=e.attribs[t]},Sd.getName=function(e){return e.name},Sd.nextElementSibling=function(e){for(var t=e.next;null!==t&&!(0,OA.isTag)(t);)t=t.next;return t},Sd.prevElementSibling=function(e){for(var t=e.prev;null!==t&&!(0,OA.isTag)(t);)t=t.prev;return t};var Sm={};function Sg(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children,r=t.lastIndexOf(e);r>=0&&t.splice(r,1)}e.next=null,e.prev=null,e.parent=null}Object.defineProperty(Sm,"__esModule",{value:!0}),Sm.removeElement=Sg,Sm.replaceElement=function(e,t){var r=t.prev=e.prev;r&&(r.next=t);var n=t.next=e.next;n&&(n.prev=t);var i=t.parent=e.parent;if(i){var s=i.children;s[s.lastIndexOf(e)]=t,e.parent=null}},Sm.appendChild=function(e,t){if(Sg(t),t.next=null,t.parent=e,e.children.push(t)>1){var r=e.children[e.children.length-2];r.next=t,t.prev=r}else t.prev=null},Sm.append=function(e,t){Sg(t);var r=e.parent,n=e.next;if(t.next=n,t.prev=e,e.next=t,t.parent=r,n){if(n.prev=t,r){var i=r.children;i.splice(i.lastIndexOf(n),0,t)}}else r&&r.children.push(t)},Sm.prependChild=function(e,t){if(Sg(t),t.parent=e,t.prev=null,1!==e.children.unshift(t)){var r=e.children[1];r.prev=t,t.next=r}else t.next=null},Sm.prepend=function(e,t){Sg(t);var r=e.parent;if(r){var n=r.children;n.splice(n.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=r,t.prev=e.prev,t.next=e,e.prev=t};var Sy={};function Sb(e,t,r,n){for(var i=[],s=[Array.isArray(t)?t:[t]],o=[0];;){if(o[0]>=s[0].length){if(1===o.length)return i;s.shift(),o.shift();continue}var a=s[0][o[0]++];if(e(a)&&(i.push(a),--n<=0))return i;r&&(0,OA.hasChildren)(a)&&a.children.length>0&&(o.unshift(0),s.unshift(a.children))}}Object.defineProperty(Sy,"__esModule",{value:!0}),Sy.filter=function(e,t,r,n){return void 0===r&&(r=!0),void 0===n&&(n=1/0),Sb(e,Array.isArray(t)?t:[t],r,n)},Sy.find=Sb,Sy.findOneChild=function(e,t){return t.find(e)},Sy.findOne=function e(t,r,n){void 0===n&&(n=!0);for(var i=Array.isArray(r)?r:[r],s=0;s<i.length;s++){var o=i[s];if((0,OA.isTag)(o)&&t(o))return o;if(n&&(0,OA.hasChildren)(o)&&o.children.length>0){var a=e(t,o.children,!0);if(a)return a}}return null},Sy.existsOne=function e(t,r){return(Array.isArray(r)?r:[r]).some(function(r){return(0,OA.isTag)(r)&&t(r)||(0,OA.hasChildren)(r)&&e(t,r.children)})},Sy.findAll=function(e,t){for(var r=[],n=[Array.isArray(t)?t:[t]],i=[0];;){if(i[0]>=n[0].length){if(1===n.length)return r;n.shift(),i.shift();continue}var s=n[0][i[0]++];(0,OA.isTag)(s)&&e(s)&&r.push(s),(0,OA.hasChildren)(s)&&s.children.length>0&&(i.unshift(0),n.unshift(s.children))}};var Sv={};Object.defineProperty(Sv,"__esModule",{value:!0}),Sv.testElement=function(e,t){var r=SO(e);return!r||r(t)},Sv.getElements=function(e,t,r,n){void 0===n&&(n=1/0);var i=SO(e);return i?(0,Sy.filter)(i,t,r,n):[]},Sv.getElementById=function(e,t,r){return void 0===r&&(r=!0),Array.isArray(t)||(t=[t]),(0,Sy.findOne)(Sw("id",e),t,r)},Sv.getElementsByTagName=function(e,t,r,n){return void 0===r&&(r=!0),void 0===n&&(n=1/0),(0,Sy.filter)(Sx.tag_name(e),t,r,n)},Sv.getElementsByClassName=function(e,t,r,n){return void 0===r&&(r=!0),void 0===n&&(n=1/0),(0,Sy.filter)(Sw("class",e),t,r,n)},Sv.getElementsByTagType=function(e,t,r,n){return void 0===r&&(r=!0),void 0===n&&(n=1/0),(0,Sy.filter)(Sx.tag_type(e),t,r,n)};var Sx={tag_name:function(e){return"function"==typeof e?function(t){return(0,OA.isTag)(t)&&e(t.name)}:"*"===e?OA.isTag:function(t){return(0,OA.isTag)(t)&&t.name===e}},tag_type:function(e){return"function"==typeof e?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return"function"==typeof e?function(t){return(0,OA.isText)(t)&&e(t.data)}:function(t){return(0,OA.isText)(t)&&t.data===e}}};function Sw(e,t){return"function"==typeof t?function(r){return(0,OA.isTag)(r)&&t(r.attribs[e])}:function(r){return(0,OA.isTag)(r)&&r.attribs[e]===t}}function Sk(e,t){return function(r){return e(r)||t(r)}}function SO(e){var t=Object.keys(e).map(function(t){var r=e[t];return Object.prototype.hasOwnProperty.call(Sx,t)?Sx[t](r):Sw(t,r)});return 0===t.length?null:t.reduce(Sk)}var SS={};function SC(e,t){var r=[],n=[];if(e===t)return 0;for(var i=(0,OA.hasChildren)(e)?e:e.parent;i;)r.unshift(i),i=i.parent;for(i=(0,OA.hasChildren)(t)?t:t.parent;i;)n.unshift(i),i=i.parent;for(var s=Math.min(r.length,n.length),o=0;o<s&&r[o]===n[o];)o++;if(0===o)return g.DISCONNECTED;var a=r[o-1],l=a.children,c=r[o],h=n[o];return l.indexOf(c)>l.indexOf(h)?a===t?g.FOLLOWING|g.CONTAINED_BY:g.FOLLOWING:a===e?g.PRECEDING|g.CONTAINS:g.PRECEDING}Object.defineProperty(SS,"__esModule",{value:!0}),SS.DocumentPosition=void 0,SS.removeSubsets=function(e){for(var t=e.length;--t>=0;){var r=e[t];if(t>0&&e.lastIndexOf(r,t-1)>=0){e.splice(t,1);continue}for(var n=r.parent;n;n=n.parent)if(e.includes(n)){e.splice(t,1);break}}return e},SS.compareDocumentPosition=SC,SS.uniqueSort=function(e){return(e=e.filter(function(e,t,r){return!r.includes(e,t+1)})).sort(function(e,t){var r=SC(e,t);return r&g.PRECEDING?-1:r&g.FOLLOWING?1:0}),e},!function(e){e[e.DISCONNECTED=1]="DISCONNECTED",e[e.PRECEDING=2]="PRECEDING",e[e.FOLLOWING=4]="FOLLOWING",e[e.CONTAINS=8]="CONTAINS",e[e.CONTAINED_BY=16]="CONTAINED_BY"}(g||(SS.DocumentPosition=g={}));var ST={};Object.defineProperty(ST,"__esModule",{value:!0}),ST.getFeed=function(e){var t,r,n,i,s,o,a,l,c,h,u,d=SN(SD,e);return d?"feed"===d.name?(r=d.children,n={type:"atom",items:(0,Sv.getElementsByTagName)("entry",r).map(function(e){var t,r=e.children,n={media:SE(r)};Sj(n,"id","id",r),Sj(n,"title","title",r);var i=null===(t=SN("link",r))||void 0===t?void 0:t.attribs.href;i&&(n.link=i);var s=S_("summary",r)||S_("content",r);s&&(n.description=s);var o=S_("updated",r);return o&&(n.pubDate=new Date(o)),n})},Sj(n,"id","id",r),Sj(n,"title","title",r),(i=null===(t=SN("link",r))||void 0===t?void 0:t.attribs.href)&&(n.link=i),Sj(n,"description","subtitle",r),(s=S_("updated",r))&&(n.updated=new Date(s)),Sj(n,"author","email",r,!0),n):(c=null!==(l=null===(a=SN("channel",(o=d).children))||void 0===a?void 0:a.children)&&void 0!==l?l:[],h={type:o.name.substr(0,3),id:"",items:(0,Sv.getElementsByTagName)("item",o.children).map(function(e){var t=e.children,r={media:SE(t)};Sj(r,"id","guid",t),Sj(r,"title","title",t),Sj(r,"link","link",t),Sj(r,"description","description",t);var n=S_("pubDate",t)||S_("dc:date",t);return n&&(r.pubDate=new Date(n)),r})},Sj(h,"title","title",c),Sj(h,"link","link",c),Sj(h,"description","description",c),(u=S_("lastBuildDate",c))&&(h.updated=new Date(u)),Sj(h,"author","managingEditor",c,!0),h):null};var SA=["url","type","lang"],SM=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function SE(e){return(0,Sv.getElementsByTagName)("media:content",e).map(function(e){for(var t=e.attribs,r={medium:t.medium,isDefault:!!t.isDefault},n=0;n<SA.length;n++){var i=SA[n];t[i]&&(r[i]=t[i])}for(var s=0;s<SM.length;s++){var i=SM[s];t[i]&&(r[i]=parseInt(t[i],10))}return t.expression&&(r.expression=t.expression),r})}function SN(e,t){return(0,Sv.getElementsByTagName)(e,t,!0,1)[0]}function S_(e,t,r){return void 0===r&&(r=!1),(0,OY.textContent)((0,Sv.getElementsByTagName)(e,t,r,1)).trim()}function Sj(e,t,r,n,i){void 0===i&&(i=!1);var s=S_(r,n,i);s&&(e[t]=s)}function SD(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}!function(e){var t=M.w&&M.w.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=M.w&&M.w.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.hasChildren=e.isDocument=e.isComment=e.isText=e.isCDATA=e.isTag=void 0,r(OY,e),r(Sd,e),r(Sm,e),r(Sy,e),r(Sv,e),r(SS,e),r(ST,e),Object.defineProperty(e,"isTag",{enumerable:!0,get:function(){return OA.isTag}}),Object.defineProperty(e,"isCDATA",{enumerable:!0,get:function(){return OA.isCDATA}}),Object.defineProperty(e,"isText",{enumerable:!0,get:function(){return OA.isText}}),Object.defineProperty(e,"isComment",{enumerable:!0,get:function(){return OA.isComment}}),Object.defineProperty(e,"isDocument",{enumerable:!0,get:function(){return OA.isDocument}}),Object.defineProperty(e,"hasChildren",{enumerable:!0,get:function(){return OA.hasChildren}})}(OX),function(e){var t=M.w&&M.w.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=M.w&&M.w.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=M.w&&M.w.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(n,e,i);return r(n,e),n},i=M.w&&M.w.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};function s(e,t){var r=new OA.DomHandler(void 0,t);return new Oa.Parser(r,t).end(e),r.root}function o(e,t){return s(e,t).children}Object.defineProperty(e,"__esModule",{value:!0}),e.DomUtils=e.parseFeed=e.getFeed=e.ElementType=e.Tokenizer=e.createDomStream=e.parseDOM=e.parseDocument=e.DefaultHandler=e.DomHandler=e.Parser=void 0,Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return Oa.Parser}}),Object.defineProperty(e,"DomHandler",{enumerable:!0,get:function(){return OA.DomHandler}}),Object.defineProperty(e,"DefaultHandler",{enumerable:!0,get:function(){return OA.DomHandler}}),e.parseDocument=s,e.parseDOM=o,e.createDomStream=function(e,t,r){var n=new OA.DomHandler(e,t,r);return new Oa.Parser(n,t)},Object.defineProperty(e,"Tokenizer",{enumerable:!0,get:function(){return i(Ol).default}}),e.ElementType=n(OM),Object.defineProperty(e,"getFeed",{enumerable:!0,get:function(){return OX.getFeed}});var a={xmlMode:!0};e.parseFeed=function(e,t){return void 0===t&&(t=a),(0,OX.getFeed)(o(e,t))},e.DomUtils=n(OX)}(Oo);var SR={};function SP(e){return"[object Object]"===Object.prototype.toString.call(e)}Object.defineProperty(SR,"__esModule",{value:!0}),SR.isPlainObject=function(e){var t,r;return!1!==SP(e)&&(void 0===(t=e.constructor)||!1!==SP(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf"))};var SI=function(e){var t,r,n;return!!(t=e)&&"object"==typeof t&&(r=e,"[object RegExp]"!==(n=Object.prototype.toString.call(r))&&"[object Date]"!==n&&r.$$typeof!==Sz)},Sz="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function SL(e,t){return!1!==t.clone&&t.isMergeableObject(e)?SF(Array.isArray(e)?[]:{},e,t):e}function Sq(e,t,r){return e.concat(t).map(function(e){return SL(e,r)})}function S$(e){return Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[])}function SB(e,t){try{return t in e}catch{return!1}}function SF(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||Sq,r.isMergeableObject=r.isMergeableObject||SI,r.cloneUnlessOtherwiseSpecified=SL;var n,i,s=Array.isArray(t);return s===Array.isArray(e)?s?r.arrayMerge(e,t,r):(i={},(n=r).isMergeableObject(e)&&S$(e).forEach(function(t){i[t]=SL(e[t],n)}),S$(t).forEach(function(r){SB(e,r)&&!(Object.hasOwnProperty.call(e,r)&&Object.propertyIsEnumerable.call(e,r))||(SB(e,r)&&n.isMergeableObject(t[r])?i[r]=(function(e,t){if(!t.customMerge)return SF;var r=t.customMerge(e);return"function"==typeof r?r:SF})(r,n)(e[r],t[r],n):i[r]=SL(t[r],n))}),i):SL(t,r)}SF.all=function(e,t){if(!Array.isArray(e))throw Error("first argument should be an array");return e.reduce(function(e,r){return SF(e,r,t)},{})};var SQ={exports:{}};!function(e){var t,r;t=M.w,r=function(){return function(e){function t(e){return" "===e||"	"===e||e===`
`||"\f"===e||"\r"===e}function r(t){var r,n=t.exec(e.substring(m));if(n)return r=n[0],m+=r.length,r}for(var n,i,s,o,a,l=e.length,c=/^[ \t\n\r\u000c]+/,h=/^[, \t\n\r\u000c]+/,u=/^[^ \t\n\r\u000c]+/,d=/[,]+$/,f=/^\d+$/,p=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,m=0,g=[];;){if(r(h),m>=l)return g;n=r(u),i=[],","===n.slice(-1)?(n=n.replace(d,""),y()):function(){for(r(c),s="",o="in descriptor";;){if(a=e.charAt(m),"in descriptor"===o){if(t(a))s&&(i.push(s),s="",o="after descriptor");else if(","===a){m+=1,s&&i.push(s),y();return}else if("("===a)s+=a,o="in parens";else if(""===a){s&&i.push(s),y();return}else s+=a}else if("in parens"===o){if(")"===a)s+=a,o="in descriptor";else if(""===a){i.push(s),y();return}else s+=a}else if("after descriptor"===o&&!t(a)){if(""===a){y();return}o="in descriptor",m-=1}m+=1}}()}function y(){var t,r,s,o,a,l,c,h,u,d=!1,m={};for(o=0;o<i.length;o++)l=(a=i[o])[a.length-1],h=parseInt(c=a.substring(0,a.length-1),10),u=parseFloat(c),f.test(c)&&"w"===l?((t||r)&&(d=!0),0===h?d=!0:t=h):p.test(c)&&"x"===l?((t||r||s)&&(d=!0),u<0?d=!0:r=u):f.test(c)&&"h"===l?((s||r)&&(d=!0),0===h?d=!0:s=h):d=!0;d?console&&console.log&&console.log("Invalid srcset descriptor found in '"+e+"' at '"+a+"'."):(m.url=n,t&&(m.w=t),r&&(m.d=r),s&&(m.h=s),g.push(m))}}},e.exports?e.exports=r():t.parseSrcset=r()}(SQ);var SV=SQ.exports,SH={exports:{}},SW=String,SU=function(){return{isColorSupported:!1,reset:SW,bold:SW,dim:SW,italic:SW,underline:SW,inverse:SW,hidden:SW,strikethrough:SW,black:SW,red:SW,green:SW,yellow:SW,blue:SW,magenta:SW,cyan:SW,white:SW,gray:SW,bgBlack:SW,bgRed:SW,bgGreen:SW,bgYellow:SW,bgBlue:SW,bgMagenta:SW,bgCyan:SW,bgWhite:SW,blackBright:SW,redBright:SW,greenBright:SW,yellowBright:SW,blueBright:SW,magentaBright:SW,cyanBright:SW,whiteBright:SW,bgBlackBright:SW,bgRedBright:SW,bgGreenBright:SW,bgYellowBright:SW,bgBlueBright:SW,bgMagentaBright:SW,bgCyanBright:SW,bgWhiteBright:SW}};SH.exports=SU(),SH.exports.createColors=SU;var SG=SH.exports;let SX=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})),SY=(0,M.x)(SX),SZ=class e extends Error{constructor(t,r,n,i,s,o){super(t),this.name="CssSyntaxError",this.reason=t,s&&(this.file=s),i&&(this.source=i),o&&(this.plugin=o),"u">typeof r&&"u">typeof n&&("number"==typeof r?(this.line=r,this.column=n):(this.line=r.line,this.column=r.column,this.endLine=n.line,this.endColumn=n.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,e)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>","u">typeof this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;null==e&&(e=SG.isColorSupported);let r=e=>e,n=e=>e,i=e=>e;if(e){let{bold:e,gray:t,red:s}=SG.createColors(!0);n=t=>e(s(t)),r=e=>t(e),SY&&(i=e=>SY(e))}let s=t.split(/\r?\n/),o=Math.max(this.line-3,0),a=Math.min(this.line+2,s.length),l=String(a).length;return s.slice(o,a).map((e,t)=>{let s=o+1+t,a=" "+(" "+s).slice(-l)+" | ";if(s===this.line){if(e.length>160){let t=Math.max(0,this.column-20),s=Math.max(this.column+20,this.endColumn+20),o=e.slice(t,s),l=r(a.replace(/\d/g," "))+e.slice(0,Math.min(this.column-1,19)).replace(/[^\t]/g," ");return n(">")+r(a)+i(o)+`
 `+l+n("^")}let t=r(a.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return n(">")+r(a)+i(e)+`
 `+t+n("^")}return" "+r(a)+i(e)}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}};SZ.default=SZ;let SJ={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1},SK=class{constructor(e){this.builder=e}atrule(e,t){let r="@"+e.name,n=e.params?this.rawValue(e,"params"):"";if("u">typeof e.raws.afterName?r+=e.raws.afterName:n&&(r+=" "),e.nodes)this.block(e,r+n);else{let i=(e.raws.between||"")+(t?";":"");this.builder(r+n+i,e)}}beforeAfter(e,t){let r;r="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let n=e.parent,i=0;for(;n&&"root"!==n.type;)i+=1,n=n.parent;if(r.includes(`
`)){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<i;e++)r+=t}return r}block(e,t){let r,n=this.raw(e,"between","beforeOpen");this.builder(t+n+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),r=this.raw(e,"after")):r=this.raw(e,"after","emptyBody"),r&&this.builder(r),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&"comment"===e.nodes[t].type;)t-=1;let r=this.raw(e,"semicolon");for(let n=0;n<e.nodes.length;n++){let i=e.nodes[n],s=this.raw(i,"before");s&&this.builder(s),this.stringify(i,t!==n||r)}}comment(e){let t=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+r+"*/",e)}decl(e,t){let r=this.raw(e,"between","colon"),n=e.prop+r+this.rawValue(e,"value");e.important&&(n+=e.raws.important||" !important"),t&&(n+=";"),this.builder(n,e)}document(e){this.body(e)}raw(e,t,r){let n;if(r||(r=t),t&&"u">typeof(n=e.raws[t]))return n;let i=e.parent;if("before"===r&&(!i||"root"===i.type&&i.first===e||i&&"document"===i.type))return"";if(!i)return SJ[r];let s=e.root();if(s.rawCache||(s.rawCache={}),"u">typeof s.rawCache[r])return s.rawCache[r];if("before"===r||"after"===r)return this.beforeAfter(e,r);{var o;let i="raw"+((o=r)[0].toUpperCase()+o.slice(1));this[i]?n=this[i](s,e):s.walk(e=>{if("u">typeof(n=e.raws[t]))return!1})}return typeof n>"u"&&(n=SJ[r]),s.rawCache[r]=n,n}rawBeforeClose(e){let t;return e.walk(e=>{if(e.nodes&&e.nodes.length>0&&"u">typeof e.raws.after)return(t=e.raws.after).includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let r;return e.walkComments(e=>{if("u">typeof e.raws.before)return(r=e.raws.before).includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(t,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(e,t){let r;return e.walkDecls(e=>{if("u">typeof e.raws.before)return(r=e.raws.before).includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(t,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeOpen(e){let t;return e.walk(e=>{if("decl"!==e.type&&"u">typeof(t=e.raws.between))return!1}),t}rawBeforeRule(e){let t;return e.walk(r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&"u">typeof r.raws.before)return(t=r.raws.before).includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(e=>{if("u">typeof e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(e=>{if(e.nodes&&0===e.nodes.length&&"u">typeof(t=e.raws.after))return!1}),t}rawIndent(e){let t;return e.raws.indent?e.raws.indent:(e.walk(r=>{let n=r.parent;if(n&&n!==e&&n.parent&&n.parent===e&&"u">typeof r.raws.before){let e=r.raws.before.split(`
`);return t=(t=e[e.length-1]).replace(/\S/g,""),!1}}),t)}rawSemicolon(e){let t;return e.walk(e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&"u">typeof(t=e.raws.semicolon))return!1}),t}rawValue(e,t){let r=e[t],n=e.raws[t];return n&&n.value===r?n.raw:r}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};function S0(e,t){new SK(t).stringify(e)}SK.default=SK,S0.default=S0;var S1={};S1.isClean=Symbol("isClean"),S1.my=Symbol("my");let{isClean:S2,my:S4}=S1;function S5(e,t){if(t&&"u">typeof t.offset)return t.offset;let r=1,n=1,i=0;for(let s=0;s<e.length;s++){if(n===t.line&&r===t.column){i=s;break}e[s]===`
`?(r=1,n+=1):r+=1}return i}let S3=class{get proxyOf(){return this}constructor(e={}){for(let t in this.raws={},this[S2]=!1,this[S4]=!0,e)if("nodes"===t)for(let r of(this.nodes=[],e[t]))"function"==typeof r.clone?this.append(r.clone()):this.append(r);else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=function e(t,r){let n=new t.constructor;for(let i in t){if(!Object.prototype.hasOwnProperty.call(t,i)||"proxyCache"===i)continue;let s=t[i],o=typeof s;"parent"===i&&"object"===o?r&&(n[i]=r):"source"===i?n[i]=s:Array.isArray(s)?n[i]=s.map(t=>e(t,n)):("object"===o&&null!==s&&(s=e(s)),n[i]=s)}return n}(this);for(let r in e)t[r]=e[r];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:r,start:n}=this.rangeBy(t);return this.source.input.error(e,{column:n.column,line:n.line},{column:r.column,line:r.line},t)}return new SZ(e)}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t],set:(e,t,r)=>(e[t]===r||(e[t]=r,("prop"===t||"value"===t||"name"===t||"params"===t||"important"===t||"text"===t)&&e.markDirty()),!0)}}markClean(){this[S2]=!0}markDirty(){if(this[S2]){this[S2]=!1;let e=this;for(;e=e.parent;)e[S2]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e){let t=this.source.start;if(e.index)t=this.positionInside(e.index);else if(e.word){let r="document"in this.source.input?this.source.input.document:this.source.input.css,n=r.slice(S5(r,this.source.start),S5(r,this.source.end)).indexOf(e.word);-1!==n&&(t=this.positionInside(n))}return t}positionInside(e){let t=this.source.start.column,r=this.source.start.line,n="document"in this.source.input?this.source.input.document:this.source.input.css,i=S5(n,this.source.start),s=i+e;for(let e=i;e<s;e++)n[e]===`
`?(t=1,r+=1):t+=1;return{column:t,line:r}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},r=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let n="document"in this.source.input?this.source.input.document:this.source.input.css,i=n.slice(S5(n,this.source.start),S5(n,this.source.end)).indexOf(e.word);-1!==i&&(t=this.positionInside(i),r=this.positionInside(i+e.word.length))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?r={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?r=this.positionInside(e.endIndex):e.index&&(r=this.positionInside(e.index+1));return(r.line<t.line||r.line===t.line&&r.column<=t.column)&&(r={column:t.column+1,line:t.line}),{end:r,start:t}}raw(e,t){return new SK().raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,r=!1;for(let n of e)n===this?r=!0:r?(this.parent.insertAfter(t,n),t=n):this.parent.insertBefore(t,n);r||this.remove()}return this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}toJSON(e,t){let r={},n=null==t;t=t||new Map;let i=0;for(let e in this){if(!Object.prototype.hasOwnProperty.call(this,e)||"parent"===e||"proxyCache"===e)continue;let n=this[e];if(Array.isArray(n))r[e]=n.map(e=>"object"==typeof e&&e.toJSON?e.toJSON(null,t):e);else if("object"==typeof n&&n.toJSON)r[e]=n.toJSON(null,t);else if("source"===e){let s=t.get(n.input);null==s&&(s=i,t.set(n.input,i),i++),r[e]={end:n.end,inputId:s,start:n.start}}else r[e]=n}return n&&(r.inputs=[...t.keys()].map(e=>e.toJSON())),r}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=S0){e.stringify&&(e=e.stringify);let t="";return e(this,e=>{t+=e}),t}warn(e,t,r){let n={node:this};for(let e in r)n[e]=r[e];return e.warn(t,n)}};S3.default=S3;let S6=S3,S7=class extends S6{constructor(e){super(e),this.type="comment"}};S7.default=S7;let S8=S3,S9=class extends S8{get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}constructor(e){e&&"u">typeof e.value&&"string"!=typeof e.value&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}};S9.default=S9;let Ce=S3,{isClean:Ct,my:Cr}=S1,Cn,Ci,Cs,Co,Ca=class e extends Ce{get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}append(...e){for(let t of e)for(let e of this.normalize(t,this.last))this.proxyOf.nodes.push(e);return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),r,n;for(;this.indexes[t]<this.proxyOf.nodes.length&&(r=this.indexes[t],!1!==(n=e(this.proxyOf.nodes[r],r)));)this.indexes[t]+=1;return delete this.indexes[t],n}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?(...r)=>e[t](...r.map(e=>"function"==typeof e?(t,r)=>e(t.toProxy(),r):e)):"every"===t||"some"===t?r=>e[t]((e,...t)=>r(e.toProxy(),...t)):"root"===t?()=>e.root().toProxy():"nodes"===t?e.nodes.map(e=>e.toProxy()):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t],set:(e,t,r)=>(e[t]===r||(e[t]=r,("name"===t||"params"===t||"selector"===t)&&e.markDirty()),!0)}}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let r,n=this.index(e),i=this.normalize(t,this.proxyOf.nodes[n]).reverse();for(let t of(n=this.index(e),i))this.proxyOf.nodes.splice(n+1,0,t);for(let e in this.indexes)n<(r=this.indexes[e])&&(this.indexes[e]=r+i.length);return this.markDirty(),this}insertBefore(e,t){let r,n=this.index(e),i=0===n&&"prepend",s=this.normalize(t,this.proxyOf.nodes[n],i).reverse();for(let t of(n=this.index(e),s))this.proxyOf.nodes.splice(n,0,t);for(let e in this.indexes)n<=(r=this.indexes[e])&&(this.indexes[e]=r+s.length);return this.markDirty(),this}normalize(t,r){if("string"==typeof t)t=function e(t){return t.map(t=>(t.nodes&&(t.nodes=e(t.nodes)),delete t.source,t))}(Ci(t).nodes);else if(typeof t>"u")t=[];else if(Array.isArray(t))for(let e of t=t.slice(0))e.parent&&e.parent.removeChild(e,"ignore");else if("root"===t.type&&"document"!==this.type)for(let e of t=t.nodes.slice(0))e.parent&&e.parent.removeChild(e,"ignore");else if(t.type)t=[t];else if(t.prop){if(typeof t.value>"u")throw Error("Value field is missed in node creation");"string"!=typeof t.value&&(t.value=String(t.value)),t=[new S9(t)]}else if(t.selector||t.selectors)t=[new Co(t)];else if(t.name)t=[new Cn(t)];else if(t.text)t=[new S7(t)];else throw Error("Unknown node type in node creation");return t.map(t=>(t[Cr]||e.rebuild(t),(t=t.proxyOf).parent&&t.parent.removeChild(t),t[Ct]&&function e(t){if(t[Ct]=!1,t.proxyOf.nodes)for(let r of t.proxyOf.nodes)e(r)}(t),t.raws||(t.raws={}),typeof t.raws.before>"u"&&r&&"u">typeof r.raws.before&&(t.raws.before=r.raws.before.replace(/\S/g,"")),t.parent=this.proxyOf,t))}prepend(...e){for(let t of e=e.reverse()){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){let t;for(let r in e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1),this.indexes)(t=this.indexes[r])>=e&&(this.indexes[r]=t-1);return this.markDirty(),this}replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls(n=>{t.props&&!t.props.includes(n.prop)||t.fast&&!n.value.includes(t.fast)||(n.value=n.value.replace(e,r))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,r)=>{let n;try{n=e(t,r)}catch(e){throw t.addToError(e)}return!1!==n&&t.walk&&(n=t.walk(e)),n})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((r,n)=>{if("atrule"===r.type&&e.test(r.name))return t(r,n)}):this.walk((r,n)=>{if("atrule"===r.type&&r.name===e)return t(r,n)}):(t=e,this.walk((e,r)=>{if("atrule"===e.type)return t(e,r)}))}walkComments(e){return this.walk((t,r)=>{if("comment"===t.type)return e(t,r)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((r,n)=>{if("decl"===r.type&&e.test(r.prop))return t(r,n)}):this.walk((r,n)=>{if("decl"===r.type&&r.prop===e)return t(r,n)}):(t=e,this.walk((e,r)=>{if("decl"===e.type)return t(e,r)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((r,n)=>{if("rule"===r.type&&e.test(r.selector))return t(r,n)}):this.walk((r,n)=>{if("rule"===r.type&&r.selector===e)return t(r,n)}):(t=e,this.walk((e,r)=>{if("rule"===e.type)return t(e,r)}))}};Ca.registerParse=e=>{Ci=e},Ca.registerRule=e=>{Co=e},Ca.registerAtRule=e=>{Cn=e},Ca.registerRoot=e=>{Cs=e},Ca.default=Ca,Ca.rebuild=e=>{"atrule"===e.type?Object.setPrototypeOf(e,Cn.prototype):"rule"===e.type?Object.setPrototypeOf(e,Co.prototype):"decl"===e.type?Object.setPrototypeOf(e,S9.prototype):"comment"===e.type?Object.setPrototypeOf(e,S7.prototype):"root"===e.type&&Object.setPrototypeOf(e,Cs.prototype),e[Cr]=!0,e.nodes&&e.nodes.forEach(e=>{Ca.rebuild(e)})};let Cl=Ca,Cc=class extends Cl{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};Cc.default=Cc,Cl.registerAtRule(Cc);let Ch=Ca,Cu,Cd,Cf=class extends Ch{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new Cu(new Cd,this,e).stringify()}};Cf.registerLazyResult=e=>{Cu=e},Cf.registerProcessor=e=>{Cd=e},Cf.default=Cf;let{existsSync:Cp,readFileSync:Cm}=SY,{dirname:Cg,join:Cy}=SY,{SourceMapConsumer:Cb,SourceMapGenerator:Cv}=SY,Cx=class{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let r=t.map?t.map.prev:void 0,n=this.loadMap(t.from,r);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=Cg(this.mapFile)),n&&(this.text=n)}consumer(){return this.consumerCache||(this.consumerCache=new Cb(this.text)),this.consumerCache}decodeInline(e){let t=e.match(/^data:application\/json;charset=utf-?8,/)||e.match(/^data:application\/json,/);if(t)return decodeURIComponent(e.substr(t[0].length));let r=e.match(/^data:application\/json;charset=utf-?8;base64,/)||e.match(/^data:application\/json;base64,/);if(r){var n;return n=e.substr(r[0].length),_?_.from(n,"base64").toString():window.atob(n)}throw Error("Unsupported source map encoding "+e.match(/data:application\/json;([^,]+),/)[1])}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return"object"==typeof e&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/g);if(!t)return;let r=e.lastIndexOf(t.pop()),n=e.indexOf("*/",r);r>-1&&n>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,n)))}loadFile(e){if(this.root=Cg(e),Cp(e))return this.mapFile=e,Cm(e,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"==typeof t){let r=t(e);if(r){let e=this.loadFile(r);if(!e)throw Error("Unable to load previous source map: "+r.toString());return e}}else{if(t instanceof Cb)return Cv.fromSourceMap(t).toString();if(t instanceof Cv)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw Error("Unsupported previous source map format: "+t.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return e&&(t=Cy(Cg(e),t)),this.loadFile(t)}}}startWith(e,t){return!!e&&e.substr(0,t.length)===t}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};Cx.default=Cx;let{nanoid:Cw}={nanoid:(e=21)=>{let t="",r=0|e;for(;r--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t}},{isAbsolute:Ck,resolve:CO}=SY,{SourceMapConsumer:CS,SourceMapGenerator:CC}=SY,{fileURLToPath:CT,pathToFileURL:CA}=SY,CM=Symbol("fromOffsetCache"),CE=!!(CS&&CC),CN=!!(CO&&Ck),C_=class{get from(){return this.file||this.id}constructor(e,t={}){if(null===e||typeof e>"u"||"object"==typeof e&&!e.toString)throw Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),"\uFEFF"===this.css[0]||""===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,this.document=this.css,t.document&&(this.document=t.document.toString()),t.from&&(!CN||/^\w+:\/\//.test(t.from)||Ck(t.from)?this.file=t.from:this.file=CO(t.from)),CN&&CE){let e=new Cx(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+Cw(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,r,n={}){let i,s,o;if(t&&"object"==typeof t){let e=t,n=r;if("number"==typeof e.offset){let n=this.fromOffset(e.offset);t=n.line,r=n.col}else t=e.line,r=e.column;if("number"==typeof n.offset){let e=this.fromOffset(n.offset);s=e.line,i=e.col}else s=n.line,i=n.column}else if(!r){let e=this.fromOffset(t);t=e.line,r=e.col}let a=this.origin(t,r,s,i);return(o=a?new SZ(e,void 0===a.endLine?a.line:{column:a.column,line:a.line},void 0===a.endLine?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,n.plugin):new SZ(e,void 0===s?t:{column:r,line:t},void 0===s?r:{column:i,line:s},this.css,this.file,n.plugin)).input={column:r,endColumn:i,endLine:s,line:t,source:this.css},this.file&&(CA&&(o.input.url=CA(this.file).toString()),o.input.file=this.file),o}fromOffset(e){let t,r;if(this[CM])r=this[CM];else{let e=this.css.split(`
`);r=Array(e.length);let t=0;for(let n=0,i=e.length;n<i;n++)r[n]=t,t+=e[n].length+1;this[CM]=r}t=r[r.length-1];let n=0;if(e>=t)n=r.length-1;else{let t=r.length-2,i;for(;n<t;)if(e<r[i=n+(t-n>>1)])t=i-1;else if(e>=r[i+1])n=i+1;else{n=i;break}}return{col:e-r[n]+1,line:n+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:CO(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,r,n){let i,s;if(!this.map)return!1;let o=this.map.consumer(),a=o.originalPositionFor({column:t,line:e});if(!a.source)return!1;"number"==typeof r&&(i=o.originalPositionFor({column:n,line:r})),s=Ck(a.source)?CA(a.source):new URL(a.source,this.map.consumer().sourceRoot||CA(this.map.mapFile));let l={column:a.column,endColumn:i&&i.column,endLine:i&&i.line,line:a.line,url:s.toString()};if("file:"===s.protocol){if(CT)l.file=CT(s);else throw Error("file: protocol is not available in this PostCSS build")}let c=o.sourceContentFor(a.source);return c&&(l.source=c),l}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}};C_.default=C_,SY&&SY.registerInput&&SY.registerInput(C_);let Cj=Ca,CD,CR,CP=class extends Cj{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,r){let n=super.normalize(e);if(t){if("prepend"===r)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let e of n)e.raws.before=t.raws.before}return n}removeChild(e,t){let r=this.index(e);return!t&&0===r&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}toResult(e={}){return new CD(new CR,this,e).stringify()}};CP.registerLazyResult=e=>{CD=e},CP.registerProcessor=e=>{CR=e},CP.default=CP,Cj.registerRoot(CP);let CI={comma:e=>CI.split(e,[","],!0),space(e){let t=[" ",`
`,"	"];return CI.split(e,t)},split(e,t,r){let n=[],i="",s=!1,o=0,a=!1,l="",c=!1;for(let r of e)c?c=!1:"\\"===r?c=!0:a?r===l&&(a=!1):'"'===r||"'"===r?(a=!0,l=r):"("===r?o+=1:")"===r?o>0&&(o-=1):0===o&&t.includes(r)&&(s=!0),s?(""!==i&&n.push(i.trim()),i="",s=!1):i+=r;return(r||""!==i)&&n.push(i.trim()),n}};CI.default=CI;let Cz=Ca,CL=class extends Cz{get selectors(){return CI.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}};function Cq(e,t){if(Array.isArray(e))return e.map(e=>Cq(e));let{inputs:r,...n}=e;if(r)for(let e of(t=[],r)){let r={...e,__proto__:C_.prototype};r.map&&(r.map={...r.map,__proto__:Cx.prototype}),t.push(r)}if(n.nodes&&(n.nodes=e.nodes.map(e=>Cq(e,t))),n.source){let{inputId:e,...r}=n.source;n.source=r,null!=e&&(n.source.input=t[e])}if("root"===n.type)return new CP(n);if("decl"===n.type)return new S9(n);if("rule"===n.type)return new CL(n);if("comment"===n.type)return new S7(n);if("atrule"===n.type)return new Cc(n);throw Error("Unknown node type: "+e.type)}CL.default=CL,Cz.registerRule(CL),Cq.default=Cq;let{dirname:C$,relative:CB,resolve:CF,sep:CQ}=SY,{SourceMapConsumer:CV,SourceMapGenerator:CH}=SY,{pathToFileURL:CW}=SY,CU=!!(CV&&CH),CG=!!(C$&&CF&&CB&&CQ),CX=class{constructor(e,t,r,n){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=n,this.originalCSS=n,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),r=e.root||C$(e.file),n;!1===this.mapOpts.sourcesContent?(n=new CV(e.text)).sourcesContent&&(n.sourcesContent=null):n=e.consumer(),this.map.applySourceMap(n,t,this.toUrl(this.path(r)))}}clearAnnotation(){if(!1!==this.mapOpts.annotation){if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)"comment"===(e=this.root.nodes[t]).type&&e.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}}generate(){if(this.clearAnnotation(),CG&&CU&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=CH.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new CH({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new CH({file:this.outputFile(),ignoreInvalidMapping:!0});let e=1,t=1,r="<no source>",n={generated:{column:0,line:0},original:{column:0,line:0},source:""},i,s;this.stringify(this.root,(o,a,l)=>{if(this.css+=o,a&&"end"!==l&&(n.generated.line=e,n.generated.column=t-1,a.source&&a.source.start?(n.source=this.sourcePath(a),n.original.line=a.source.start.line,n.original.column=a.source.start.column-1):(n.source=r,n.original.line=1,n.original.column=0),this.map.addMapping(n)),(s=o.match(/\n/g))?(e+=s.length,i=o.lastIndexOf(`
`),t=o.length-i):t+=o.length,a&&"start"!==l){let i=a.parent||{raws:{}};(!("decl"===a.type||"atrule"===a.type&&!a.nodes)||a!==i.last||i.raws.semicolon)&&(a.source&&a.source.end?(n.source=this.sourcePath(a),n.original.line=a.source.end.line,n.original.column=a.source.end.column-1,n.generated.line=e,n.generated.column=t-2):(n.source=r,n.original.line=1,n.original.column=0,n.generated.line=e,n.generated.column=t-1),this.map.addMapping(n))}})}isAnnotation(){return!!this.isInline()||("u">typeof this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(e=>e.annotation))}isInline(){if("u">typeof this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return(!("u">typeof e)||!0===e)&&(!this.previous().length||this.previous().some(e=>e.inline))}isMap(){return"u">typeof this.opts.map?!!this.opts.map:this.previous().length>0}isSourcesContent(){return"u">typeof this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(e=>e.withContent())}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute||60===e.charCodeAt(0)||/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let r=this.opts.to?C$(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(r=C$(CF(r,this.mapOpts.annotation)));let n=CB(r,e);return this.memoizedPaths.set(e,n),n}previous(){if(!this.previousMaps){if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new C_(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let r=t.source.input.from;if(r&&!e[r]){e[r]=!0;let n=this.usesFileUrls?this.toFileUrl(r):this.toUrl(this.path(r));this.map.setSourceContent(n,t.source.input.css)}}});else if(this.css){let e=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(e,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return _?_.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(CW){let t=CW(e).toString();return this.memoizedFileURLs.set(e,t),t}throw Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;"\\"===CQ&&(e=e.replace(/\\/g,"/"));let r=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,r),r}},CY=/[\t\n\f\r "#'()/;[\\\]{}]/g,CZ=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,CJ=/.[\r\n"'(/\\]/,CK=/[\da-f]/i,C0=function(e,t={}){let r=e.css.valueOf(),n=t.ignoreErrors,i,s,o,a,l,c,h,u,d,f,p=r.length,m=0,g=[],y=[];function b(t){throw e.error("Unclosed "+t,m)}return{back:function(e){y.push(e)},endOfFile:function(){return 0===y.length&&m>=p},nextToken:function(e){if(y.length)return y.pop();if(m>=p)return;let t=!!e&&e.ignoreUnclosed;switch(i=r.charCodeAt(m)){case 10:case 32:case 9:case 13:case 12:a=m;do a+=1,i=r.charCodeAt(a);while(32===i||10===i||9===i||13===i||12===i);c=["space",r.slice(m,a)],m=a-1;break;case 91:case 93:case 123:case 125:case 58:case 59:case 41:{let e=String.fromCharCode(i);c=[e,e,m];break}case 40:if(f=g.length?g.pop()[1]:"",d=r.charCodeAt(m+1),"url"===f&&39!==d&&34!==d&&32!==d&&10!==d&&9!==d&&12!==d&&13!==d){a=m;do{if(h=!1,-1===(a=r.indexOf(")",a+1))){if(n||t){a=m;break}b("bracket")}for(u=a;92===r.charCodeAt(u-1);)u-=1,h=!h}while(h);c=["brackets",r.slice(m,a+1),m,a],m=a}else a=r.indexOf(")",m+1),s=r.slice(m,a+1),-1===a||CJ.test(s)?c=["(","(",m]:(c=["brackets",s,m,a],m=a);break;case 39:case 34:l=39===i?"'":'"',a=m;do{if(h=!1,-1===(a=r.indexOf(l,a+1))){if(n||t){a=m+1;break}b("string")}for(u=a;92===r.charCodeAt(u-1);)u-=1,h=!h}while(h);c=["string",r.slice(m,a+1),m,a],m=a;break;case 64:CY.lastIndex=m+1,CY.test(r),a=0===CY.lastIndex?r.length-1:CY.lastIndex-2,c=["at-word",r.slice(m,a+1),m,a],m=a;break;case 92:for(a=m,o=!0;92===r.charCodeAt(a+1);)a+=1,o=!o;if(i=r.charCodeAt(a+1),o&&47!==i&&32!==i&&10!==i&&9!==i&&13!==i&&12!==i&&(a+=1,CK.test(r.charAt(a)))){for(;CK.test(r.charAt(a+1));)a+=1;32===r.charCodeAt(a+1)&&(a+=1)}c=["word",r.slice(m,a+1),m,a],m=a;break;default:47===i&&42===r.charCodeAt(m+1)?(0===(a=r.indexOf("*/",m+2)+1)&&(n||t?a=r.length:b("comment")),c=["comment",r.slice(m,a+1),m,a]):(CZ.lastIndex=m+1,CZ.test(r),a=0===CZ.lastIndex?r.length-1:CZ.lastIndex-2,c=["word",r.slice(m,a+1),m,a],g.push(c)),m=a}return m++,c},position:function(){return m}}},C1={empty:!0,space:!0},C2=class{constructor(e){this.input=e,this.root=new CP,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t=new Cc;t.name=e[1].slice(1),""===t.name&&this.unnamedAtrule(t,e),this.init(t,e[2]);let r,n,i,s=!1,o=!1,a=[],l=[];for(;!this.tokenizer.endOfFile();){if("("===(r=(e=this.tokenizer.nextToken())[0])||"["===r?l.push("("===r?")":"]"):"{"===r&&l.length>0?l.push("}"):r===l[l.length-1]&&l.pop(),0===l.length){if(";"===r){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}if("{"===r){o=!0;break}else if("}"===r){if(a.length>0){for(i=a.length-1,n=a[i];n&&"space"===n[0];)n=a[--i];n&&(t.source.end=this.getPosition(n[3]||n[2]),t.source.end.offset++)}this.end(e);break}else a.push(e)}else a.push(e);if(this.tokenizer.endOfFile()){s=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(t.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(t,"params",a),s&&(e=a[a.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),o&&(t.nodes=[],this.current=t)}checkMissedSemicolon(e){let t=this.colon(e);if(!1===t)return;let r=0,n;for(let i=t-1;i>=0&&("space"===(n=e[i])[0]||2!==(r+=1));i--);throw this.input.error("Missed semicolon","word"===n[0]?n[3]+1:n[2])}colon(e){let t=0,r,n;for(let[i,s]of e.entries()){if("("===(n=s[0])&&(t+=1),")"===n&&(t-=1),0===t&&":"===n){if(r){if("word"===r[0]&&"progid"===r[1])continue;return i}this.doubleColon(s)}r=s}return!1}comment(e){let t=new S7;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let r=e[1].slice(2,-2);if(/^\s*$/.test(r))t.text="",t.raws.left=r,t.raws.right="";else{let e=r.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}createTokenizer(){this.tokenizer=C0(this.input)}decl(e,t){let r,n=new S9;this.init(n,e[0][2]);let i=e[e.length-1];for(";"===i[0]&&(this.semicolon=!0,e.pop()),n.source.end=this.getPosition(i[3]||i[2]||function(e){for(let t=e.length-1;t>=0;t--){let r=e[t],n=r[3]||r[2];if(n)return n}}(e)),n.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),n.raws.before+=e.shift()[1];for(n.source.start=this.getPosition(e[0][2]),n.prop="";e.length;){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;n.prop+=e.shift()[1]}for(n.raws.between="";e.length;)if(":"===(r=e.shift())[0]){n.raws.between+=r[1];break}else"word"===r[0]&&/\w/.test(r[1])&&this.unknownWord([r]),n.raws.between+=r[1];("_"===n.prop[0]||"*"===n.prop[0])&&(n.raws.before+=n.prop[0],n.prop=n.prop.slice(1));let s=[],o;for(;e.length&&("space"===(o=e[0][0])||"comment"===o);)s.push(e.shift());this.precheckMissedSemicolon(e);for(let t=e.length-1;t>=0;t--){if("!important"===(r=e[t])[1].toLowerCase()){n.important=!0;let r=this.stringFrom(e,t);" !important"!==(r=this.spacesFromEnd(e)+r)&&(n.raws.important=r);break}if("important"===r[1].toLowerCase()){let r=e.slice(0),i="";for(let e=t;e>0;e--){let t=r[e][0];if(i.trim().startsWith("!")&&"space"!==t)break;i=r.pop()[1]+i}i.trim().startsWith("!")&&(n.important=!0,n.raws.important=i,e=r)}if("space"!==r[0]&&"comment"!==r[0])break}e.some(e=>"space"!==e[0]&&"comment"!==e[0])&&(n.raws.between+=s.map(e=>e[1]).join(""),s=[]),this.raw(n,"value",s.concat(e),t),n.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new CL;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&"rule"===t.type&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="",t.source.end=this.getPosition(e[2]),t.source.end.offset+=t.raws.ownSemicolon.length)}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}other(e){let t=!1,r=null,n=!1,i=null,s=[],o=e[1].startsWith("--"),a=[],l=e;for(;l;){if(r=l[0],a.push(l),"("===r||"["===r)i||(i=l),s.push("("===r?")":"]");else if(o&&n&&"{"===r)i||(i=l),s.push("}");else if(0===s.length){if(";"===r){if(n){this.decl(a,o);return}break}if("{"===r){this.rule(a);return}else if("}"===r){this.tokenizer.back(a.pop()),t=!0;break}else":"===r&&(n=!0)}else r===s[s.length-1]&&(s.pop(),0===s.length&&(i=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),s.length>0&&this.unclosedBracket(i),t&&n){if(!o)for(;a.length&&("space"===(l=a[a.length-1][0])||"comment"===l);)this.tokenizer.back(a.pop());this.decl(a,o)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch((e=this.tokenizer.nextToken())[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,t,r,n){let i,s,o=r.length,a="",l=!0,c,h;for(let e=0;e<o;e+=1)"space"!==(s=(i=r[e])[0])||e!==o-1||n?"comment"===s?(h=r[e-1]?r[e-1][0]:"empty",c=r[e+1]?r[e+1][0]:"empty",C1[h]||C1[c]?l=!1:","===a.slice(-1)?l=!1:a+=i[1]):a+=i[1]:l=!1;if(!l){let n=r.reduce((e,t)=>e+t[1],"");e.raws[t]={raw:n,value:a}}e[t]=a}rule(e){e.pop();let t=new CL;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,r="";for(;e.length&&("space"===(t=e[e.length-1][0])||"comment"===t);)r=e.pop()[1]+r;return r}spacesAndCommentsFromStart(e){let t,r="";for(;e.length&&("space"===(t=e[0][0])||"comment"===t);)r+=e.shift()[1];return r}spacesFromEnd(e){let t="";for(;e.length&&"space"===e[e.length-1][0];)t=e.pop()[1]+t;return t}stringFrom(e,t){let r="";for(let n=t;n<e.length;n++)r+=e[n][1];return e.splice(t,e.length-t),r}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word "+e[0][1],{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}};function C4(e,t){let r=new C2(new C_(e,t));try{r.parse()}catch(e){throw e}return r.root}C4.default=C4,Ca.registerParse(C4);let C5=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.rangeBy(t);this.line=e.start.line,this.column=e.start.column,this.endLine=e.end.line,this.endColumn=e.end.column}for(let e in t)this[e]=t[e]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};C5.default=C5;let C3=class{get content(){return this.css}constructor(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let r=new C5(e,t);return this.messages.push(r),r}warnings(){return this.messages.filter(e=>"warning"===e.type)}};C3.default=C3;let{isClean:C6,my:C7}=S1,C8={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},C9={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},Te={Once:!0,postcssPlugin:!0,prepare:!0};function Tt(e){return"object"==typeof e&&"function"==typeof e.then}function Tr(e){let t=!1,r=C8[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[r,r+"-"+t,0,r+"Exit",r+"Exit-"+t]:t?[r,r+"-"+t,r+"Exit",r+"Exit-"+t]:e.append?[r,0,r+"Exit"]:[r,r+"Exit"]}function Tn(e){let t;return{eventIndex:0,events:"document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:Tr(e),iterator:0,node:e,visitorIndex:0,visitors:[]}}function Ti(e){return e[C6]=!1,e.nodes&&e.nodes.forEach(e=>Ti(e)),e}let Ts={},To=class e{get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}constructor(t,r,n){let i;if(this.stringified=!1,this.processed=!1,"object"==typeof r&&null!==r&&("root"===r.type||"document"===r.type))i=Ti(r);else if(r instanceof e||r instanceof C3)i=Ti(r.root),r.map&&(typeof n.map>"u"&&(n.map={}),n.map.inline||(n.map.inline=!1),n.map.prev=r.map);else{let e=C4;n.syntax&&(e=n.syntax.parse),n.parser&&(e=n.parser),e.parse&&(e=e.parse);try{i=e(r,n)}catch(e){this.processed=!0,this.error=e}i&&!i[C7]&&Ca.rebuild(i)}this.result=new C3(t,i,n),this.helpers={...Ts,postcss:Ts,result:this.result},this.plugins=this.processor.plugins.map(e=>"object"==typeof e&&e.prepare?{...e,...e.prepare(this.result)}:e)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let r=this.result.lastPlugin;try{(t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin)?r.postcssVersion:(e.plugin=r.postcssPlugin,e.setMessage())}catch(e){console&&console.error&&console.error(e)}return e}prepareVisitors(){this.listeners={};let e=(e,t,r)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,r])};for(let t of this.plugins)if("object"==typeof t)for(let r in t){if(!C9[r]&&/^[A-Z]/.test(r))throw Error(`Unknown event ${r} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!Te[r]){if("object"==typeof t[r])for(let n in t[r])e(t,"*"===n?r:r+"-"+n.toLowerCase(),t[r][n]);else"function"==typeof t[r]&&e(t,r,t[r])}}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],r=this.runOnRoot(t);if(Tt(r))try{await r}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[C6];){e[C6]=!0;let t=[Tn(e)];for(;t.length>0;){let e=this.visitTick(t);if(Tt(e))try{await e}catch(r){let e=t[t.length-1].node;throw this.handleError(r,e)}}}if(this.listeners.OnceExit)for(let[t,r]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if("document"===e.type){let t=e.nodes.map(e=>r(e,this.helpers));await Promise.all(t)}else await r(e,this.helpers)}catch(e){throw this.handleError(e)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map(t=>e.Once(t,this.helpers));return Tt(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=S0;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let r=new CX(t,this.result.root,this.result.opts).generate();return this.result.css=r[0],this.result.map=r[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins)if(Tt(this.runOnRoot(e)))throw this.getAsyncError();if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[C6];)e[C6]=!0,this.walkSync(e);if(this.listeners.OnceExit){if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[r,n]of e){let e;this.result.lastPlugin=r;try{e=n(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(Tt(e))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:r,visitors:n}=t;if("root"!==r.type&&"document"!==r.type&&!r.parent){e.pop();return}if(n.length>0&&t.visitorIndex<n.length){let[e,i]=n[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===n.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return i(r.toProxy(),this.helpers)}catch(e){throw this.handleError(e,r)}}if(0!==t.iterator){let n=t.iterator,i;for(;i=r.nodes[r.indexes[n]];)if(r.indexes[n]+=1,!i[C6]){i[C6]=!0,e.push(Tn(i));return}t.iterator=0,delete r.indexes[n]}let i=t.events;for(;t.eventIndex<i.length;){let e=i[t.eventIndex];if(t.eventIndex+=1,0===e){r.nodes&&r.nodes.length&&(r[C6]=!0,t.iterator=r.getIterator());return}if(this.listeners[e]){t.visitors=this.listeners[e];return}}e.pop()}walkSync(e){for(let t of(e[C6]=!0,Tr(e)))if(0===t)e.nodes&&e.each(e=>{e[C6]||this.walkSync(e)});else{let r=this.listeners[t];if(r&&this.visitSync(r,e.toProxy()))return}}warnings(){return this.sync().warnings()}};To.registerPostcss=e=>{Ts=e},To.default=To,CP.registerLazyResult(To),Cf.registerLazyResult(To);let Ta=class{get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){let e;if(this._root)return this._root;try{e=C4(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}constructor(e,t,r){let n;t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=r,this._map=void 0,this.result=new C3(this._processor,n,this._opts),this.result.css=t;let i=this;Object.defineProperty(this.result,"root",{get:()=>i.root});let s=new CX(S0,n,this._opts,t);if(s.isMap()){let[e,t]=s.generate();e&&(this.result.css=e),t&&(this.result.map=t)}else s.clearAnnotation(),this.result.css=s.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}};Ta.default=Ta;let Tl=class{constructor(e=[]){this.version="8.5.3",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let r of e)if(!0===r.postcss?r=r():r.postcss&&(r=r.postcss),"object"==typeof r&&Array.isArray(r.plugins))t=t.concat(r.plugins);else if("object"==typeof r&&r.postcssPlugin)t.push(r);else if("function"==typeof r)t.push(r);else if("object"==typeof r&&(r.parse||r.stringify));else throw Error(r+" is not a PostCSS plugin");return t}process(e,t={}){return this.plugins.length||t.parser||t.stringifier||t.syntax?new To(this,e,t):new Ta(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};function Tc(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new Tl(e)}Tl.default=Tl,CP.registerProcessor(Tl),Cf.registerProcessor(Tl),Tc.plugin=function(e,t){let r,n=!1;function i(...r){console&&console.warn&&!n&&(n=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),N.env.LANG&&N.env.LANG.startsWith("cn")&&console.warn(e+`:  postcss.plugin . :
https://www.w3ctech.com/topic/2226`));let s=t(...r);return s.postcssPlugin=e,s.postcssVersion=new Tl().version,s}return Object.defineProperty(i,"postcss",{get:()=>(r||(r=i()),r)}),i.process=function(e,t,r){return Tc([i(r)]).process(e,t)},i},Tc.stringify=S0,Tc.parse=C4,Tc.fromJSON=Cq,Tc.list=CI,Tc.comment=e=>new S7(e),Tc.atRule=e=>new Cc(e),Tc.decl=e=>new S9(e),Tc.rule=e=>new CL(e),Tc.root=e=>new CP(e),Tc.document=e=>new Cf(e),Tc.CssSyntaxError=SZ,Tc.Declaration=S9,Tc.Container=Ca,Tc.Processor=Tl,Tc.Document=Cf,Tc.Comment=S7,Tc.Warning=C5,Tc.AtRule=Cc,Tc.Result=C3,Tc.Input=C_,Tc.Rule=CL,Tc.Root=CP,Tc.Node=S3,To.registerPostcss(Tc),Tc.default=Tc;let Th=e=>{if("string"!=typeof e)throw TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")},{isPlainObject:Tu}=SR,Td=SF,{parse:Tf}=Tc,Tp=["img","audio","video","picture","svg","object","map","iframe","embed"],Tm=["script","style"];function Tg(e,t){e&&Object.keys(e).forEach(function(r){t(e[r],r)})}function Ty(e,t){return({}).hasOwnProperty.call(e,t)}function Tb(e,t){let r=[];return Tg(e,function(e){t(e)&&r.push(e)}),r}let Tv=/^[^\0\t\n\f\r /<=>]+$/;function Tx(e,t,r){let n,i,s;if(null==e)return"";"number"==typeof e&&(e=e.toString());let o="",a="";function l(e,t){let r=this;this.tag=e,this.attribs=t||{},this.tagPosition=o.length,this.text="",this.mediaChildren=[],this.updateParentNodeText=function(){if(g.length){let e=g[g.length-1];e.text+=r.text}},this.updateParentNodeMediaChildren=function(){g.length&&Tp.includes(this.tag)&&g[g.length-1].mediaChildren.push(this.tag)}}(t=Object.assign({},Tx.defaults,t)).parser=Object.assign({},Tw,t.parser);let c=function(e){return!1===t.allowedTags||(t.allowedTags||[]).indexOf(e)>-1};Tm.forEach(function(e){c(e)&&!t.allowVulnerableTags&&console.warn(`

 Your \`allowedTags\` option includes, \`${e}\`, which is inherently
vulnerable to XSS attacks. Please remove it from \`allowedTags\`.
Or, to disable this warning, add the \`allowVulnerableTags\` option
and ensure you are accounting for this risk.

`)});let h=t.nonTextTags||["script","style","textarea","option"];t.allowedAttributes&&(n={},i={},Tg(t.allowedAttributes,function(e,t){n[t]=[];let r=[];e.forEach(function(e){"string"==typeof e&&e.indexOf("*")>=0?r.push(Th(e).replace(/\\\*/g,".*")):n[t].push(e)}),r.length&&(i[t]=RegExp("^("+r.join("|")+")$"))}));let u={},d={},f={};Tg(t.allowedClasses,function(e,t){if(n&&(Ty(n,t)||(n[t]=[]),n[t].push("class")),u[t]=e,Array.isArray(e)){let r=[];u[t]=[],f[t]=[],e.forEach(function(e){"string"==typeof e&&e.indexOf("*")>=0?r.push(Th(e).replace(/\\\*/g,".*")):e instanceof RegExp?f[t].push(e):u[t].push(e)}),r.length&&(d[t]=RegExp("^("+r.join("|")+")$"))}});let p={};Tg(t.transformTags,function(e,t){let r;"function"==typeof e?r=e:"string"==typeof e&&(r=Tx.simpleTransform(e)),"*"===t?s=r:p[t]=r});let m,g,y,b,v,x,w=!1;O();let k=new Oo.Parser({onopentag:function(e,r){let k;if(t.enforceHtmlBoundary&&"html"===e&&O(),v){x++;return}let M=new l(e,r);g.push(M);let E=!1,N=!!M.text;if(Ty(p,e)&&(M.attribs=r=(k=p[e](e,r)).attribs,void 0!==k.text&&(M.innerText=k.text),e!==k.tagName&&(M.name=e=k.tagName,b[m]=k.tagName)),s&&(M.attribs=r=(k=s(e,r)).attribs,e!==k.tagName&&(M.name=e=k.tagName,b[m]=k.tagName)),(!c(e)||"recursiveEscape"===t.disallowedTagsMode&&!function(e){for(let t in e)if(Ty(e,t))return!1;return!0}(y)||null!=t.nestingLimit&&m>=t.nestingLimit)&&(E=!0,y[m]=!0,("discard"===t.disallowedTagsMode||"completelyDiscard"===t.disallowedTagsMode)&&-1!==h.indexOf(e)&&(v=!0,x=1),y[m]=!0),m++,E){if("discard"===t.disallowedTagsMode||"completelyDiscard"===t.disallowedTagsMode){if(M.innerText&&!N){let r=S(M.innerText);t.textFilter?o+=t.textFilter(r,e):o+=S(M.innerText),w=!0}return}a=o,o=""}o+="<"+e,"script"===e&&(t.allowedScriptHostnames||t.allowedScriptDomains)&&(M.innerText=""),(!n||Ty(n,e)||n["*"])&&Tg(r,function(r,s){if(!Tv.test(s)||""===r&&!t.allowedEmptyAttributes.includes(s)&&(t.nonBooleanAttributes.includes(s)||t.nonBooleanAttributes.includes("*"))){delete M.attribs[s];return}let a=!1;if(!n||Ty(n,e)&&-1!==n[e].indexOf(s)||n["*"]&&-1!==n["*"].indexOf(s)||Ty(i,e)&&i[e].test(s)||i["*"]&&i["*"].test(s))a=!0;else if(n&&n[e]){for(let t of n[e])if(Tu(t)&&t.name&&t.name===s){a=!0;let e="";if(!0===t.multiple)for(let n of r.split(" "))-1!==t.values.indexOf(n)&&(""===e?e=n:e+=" "+n);else t.values.indexOf(r)>=0&&(e=r);r=e}}if(a){if(-1!==t.allowedSchemesAppliedToAttributes.indexOf(s)&&C(e,r)){delete M.attribs[s];return}if("script"===e&&"src"===s){let e=!0;try{let n=T(r);if(t.allowedScriptHostnames||t.allowedScriptDomains){let r=(t.allowedScriptHostnames||[]).find(function(e){return e===n.url.hostname}),i=(t.allowedScriptDomains||[]).find(function(e){return n.url.hostname===e||n.url.hostname.endsWith(`.${e}`)});e=r||i}}catch{e=!1}if(!e){delete M.attribs[s];return}}if("iframe"===e&&"src"===s){let e=!0;try{let n=T(r);if(n.isRelativeUrl)e=Ty(t,"allowIframeRelativeUrls")?t.allowIframeRelativeUrls:!t.allowedIframeHostnames&&!t.allowedIframeDomains;else if(t.allowedIframeHostnames||t.allowedIframeDomains){let r=(t.allowedIframeHostnames||[]).find(function(e){return e===n.url.hostname}),i=(t.allowedIframeDomains||[]).find(function(e){return n.url.hostname===e||n.url.hostname.endsWith(`.${e}`)});e=r||i}}catch{e=!1}if(!e){delete M.attribs[s];return}}if("srcset"===s)try{let e=SV(r);if(e.forEach(function(e){C("srcset",e.url)&&(e.evil=!0)}),(e=Tb(e,function(e){return!e.evil})).length)r=Tb(e,function(e){return!e.evil}).map(function(e){if(!e.url)throw Error("URL missing");return e.url+(e.w?` ${e.w}w`:"")+(e.h?` ${e.h}h`:"")+(e.d?` ${e.d}x`:"")}).join(", "),M.attribs[s]=r;else{delete M.attribs[s];return}}catch{delete M.attribs[s];return}if("class"===s){let t=u[e],n=u["*"],i=d[e],o=f[e],a=f["*"],l=[i,d["*"]].concat(o,a).filter(function(e){return e});if(!(r=t&&n?A(r,Td(t,n),l):A(r,t||n,l)).length){delete M.attribs[s];return}}if("style"===s){if(t.parseStyleAttributes)try{let n=Tf(e+" {"+r+"}",{map:!1});if(r=(function(e,t){var r;let n;if(!t)return e;let i=e.nodes[0];return(n=t[i.selector]&&t["*"]?Td(t[i.selector],t["*"]):t[i.selector]||t["*"])&&(e.nodes[0].nodes=i.nodes.reduce((r=n,function(e,t){return Ty(r,t.prop)&&r[t.prop].some(function(e){return e.test(t.value)})&&e.push(t),e}),[])),e})(n,t.allowedStyles).nodes[0].nodes.reduce(function(e,t){return e.push(`${t.prop}:${t.value}${t.important?" !important":""}`),e},[]).join(";"),0===r.length){delete M.attribs[s];return}}catch{"u">typeof window&&console.warn('Failed to parse "'+e+" {"+r+"}\", If you're running this in a browser, we recommend to disable style parsing: options.parseStyleAttributes: false, since this only works in a node environment due to a postcss dependency, More info: https://github.com/apostrophecms/sanitize-html/issues/547"),delete M.attribs[s];return}else if(t.allowedStyles)throw Error("allowedStyles option cannot be used together with parseStyleAttributes: false.")}o+=" "+s,r&&r.length?o+='="'+S(r,!0)+'"':t.allowedEmptyAttributes.includes(s)&&(o+='=""')}else delete M.attribs[s]}),-1!==t.selfClosing.indexOf(e)?o+=" />":(o+=">",!M.innerText||N||t.textFilter||(o+=S(M.innerText),w=!0)),E&&(o=a+S(o),a="")},ontext:function(e){let r;if(v)return;let n=g[g.length-1];if(n&&(r=n.tag,e=void 0!==n.innerText?n.innerText:e),"completelyDiscard"!==t.disallowedTagsMode||c(r)){if(("discard"===t.disallowedTagsMode||"completelyDiscard"===t.disallowedTagsMode)&&("script"===r||"style"===r))o+=e;else{let n=S(e,!1);t.textFilter&&!w?o+=t.textFilter(n,r):w||(o+=n)}}else e="";if(g.length){let t=g[g.length-1];t.text+=e}},onclosetag:function(e,r){if(v){if(--x)return;v=!1}let n=g.pop();if(!n)return;if(n.tag!==e){g.push(n);return}v=!!t.enforceHtmlBoundary&&"html"===e;let i=y[--m];if(i){if(delete y[m],"discard"===t.disallowedTagsMode||"completelyDiscard"===t.disallowedTagsMode){n.updateParentNodeText();return}a=o,o=""}if(b[m]&&(e=b[m],delete b[m]),t.exclusiveFilter&&t.exclusiveFilter(n)){o=o.substr(0,n.tagPosition);return}if(n.updateParentNodeMediaChildren(),n.updateParentNodeText(),-1!==t.selfClosing.indexOf(e)||r&&!c(e)&&["escape","recursiveEscape"].indexOf(t.disallowedTagsMode)>=0){i&&(o=a,a="");return}o+="</"+e+">",i&&(o=a+S(o),a=""),w=!1}},t.parser);return k.write(e),k.end(),o;function O(){o="",m=0,g=[],y={},b={},v=!1,x=0}function S(e,r){return"string"!=typeof e&&(e+=""),t.parser.decodeEntities&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r&&(e=e.replace(/"/g,"&quot;"))),e=e.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r&&(e=e.replace(/"/g,"&quot;")),e}function C(e,r){for(r=r.replace(/[\x00-\x20]+/g,"");;){let e=r.indexOf("\x3c!--");if(-1===e)break;let t=r.indexOf("--\x3e",e+4);if(-1===t)break;r=r.substring(0,e)+r.substring(t+3)}let n=r.match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!n)return!!r.match(/^[/\\]{2}/)&&!t.allowProtocolRelative;let i=n[1].toLowerCase();return Ty(t.allowedSchemesByTag,e)?-1===t.allowedSchemesByTag[e].indexOf(i):!t.allowedSchemes||-1===t.allowedSchemes.indexOf(i)}function T(e){if((e=e.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//")).startsWith("relative:"))throw Error("relative: exploit attempt");let t="relative://relative-site";for(let e=0;e<100;e++)t+=`/${e}`;let r=new URL(e,t);return{isRelativeUrl:r&&"relative-site"===r.hostname&&"relative:"===r.protocol,url:r}}function A(e,t,r){return t?(e=e.split(/\s+/)).filter(function(e){return -1!==t.indexOf(e)||r.some(function(t){return t.test(e)})}).join(" "):e}}let Tw={decodeEntities:!0};Tx.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],nonBooleanAttributes:["abbr","accept","accept-charset","accesskey","action","allow","alt","as","autocapitalize","autocomplete","blocking","charset","cite","class","color","cols","colspan","content","contenteditable","coords","crossorigin","data","datetime","decoding","dir","dirname","download","draggable","enctype","enterkeyhint","fetchpriority","for","form","formaction","formenctype","formmethod","formtarget","headers","height","hidden","high","href","hreflang","http-equiv","id","imagesizes","imagesrcset","inputmode","integrity","is","itemid","itemprop","itemref","itemtype","kind","label","lang","list","loading","low","max","maxlength","media","method","min","minlength","name","nonce","optimum","pattern","ping","placeholder","popover","popovertarget","popovertargetaction","poster","preload","referrerpolicy","rel","rows","rowspan","sandbox","scope","shape","size","sizes","slot","span","spellcheck","src","srcdoc","srclang","srcset","start","step","style","tabindex","target","title","translate","type","usemap","value","width","wrap","onauxclick","onafterprint","onbeforematch","onbeforeprint","onbeforeunload","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","onhashchange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onlanguagechange","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmessageerror","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onoffline","ononline","onpagehide","onpageshow","onpaste","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreset","onresize","onrejectionhandled","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onslotchange","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","ontoggle","onunhandledrejection","onunload","onvolumechange","onwaiting","onwheel"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src","srcset","alt","title","width","height","loading"]},allowedEmptyAttributes:["alt"],selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1,parseStyleAttributes:!0},Tx.simpleTransform=function(e,t,r){return r=void 0===r||r,t=t||{},function(n,i){let s;if(r)for(s in t)i[s]=t[s];else i=t;return{tagName:e,attribs:i}}};let Tk=(0,M.y)(Tx);function TO({step:e}){let{function_name:t,result:r,inputs:n}=e,i=Tk(Os.parse(r.answer),{allowedTags:Tk.defaults.allowedTags.concat(["img"]),allowedAttributes:{...Tk.defaults.allowedAttributes,img:["src","alt","title"]}});return T.j.jsxs("div",{className:"border p-4 rounded-md shadow-sm bg-white dark:bg-dark-bg-secondary dark:border-dark-border max-h-[600px] overflow-y-auto",children:[T.j.jsxs("h2",{className:"text-lg font-semibold mb-2 text-gray-800 dark:text-dark-text-primary",children:["Function: ",T.j.jsx("span",{className:"font-normal",children:t})]}),(null==n?void 0:n.question)&&T.j.jsxs("div",{className:"mb-3 text-gray-700 dark:text-dark-text-secondary",children:[T.j.jsx("p",{className:"mb-1 font-medium text-gray-800 dark:text-dark-text-primary",children:"Question"}),T.j.jsx("p",{className:"bg-gray-50 dark:bg-gray-800 p-2 rounded-md border-l-2 border-blue-500 dark:border-blue-600 italic text-gray-700 dark:text-dark-text-secondary",children:n.question})]}),T.j.jsx("div",{className:"text-gray-700 dark:text-dark-text-secondary prose dark:prose-invert prose-sm max-w-none",dangerouslySetInnerHTML:{__html:i}}),r.reference_sources&&T.j.jsxs("div",{children:[T.j.jsx("h3",{children:"Reference Sources"}),T.j.jsx("ul",{children:r.reference_sources.map((e,t)=>T.j.jsx("li",{children:T.j.jsx("a",{href:e.url,target:"_blank",children:e.source})},t))})]})]})}function TS({step:e}){let{function_name:t,result:r,inputs:n}=e,i=r.citations.map(e=>e.text).join(""),s=Tk(Os.parse(i),{allowedTags:Tk.defaults.allowedTags.concat(["img"]),allowedAttributes:{...Tk.defaults.allowedAttributes,img:["src","alt","title"]}});return T.j.jsxs("div",{className:"border p-4 rounded-md shadow-sm bg-white dark:bg-dark-bg-secondary dark:border-dark-border max-h-[600px] overflow-y-auto",children:[T.j.jsxs("h2",{className:"text-lg font-semibold mb-2 text-gray-800 dark:text-dark-text-primary",children:["Function: ",T.j.jsx("span",{className:"font-normal",children:t})]}),(null==n?void 0:n.question)&&T.j.jsxs("div",{className:"mb-3 text-gray-700 dark:text-dark-text-secondary",children:[T.j.jsx("p",{className:"mb-1 font-medium text-gray-800 dark:text-dark-text-primary",children:"Question"}),T.j.jsx("p",{className:"bg-gray-50 dark:bg-gray-800 p-2 rounded-md border-l-2 border-blue-500 dark:border-blue-600 italic text-gray-700 dark:text-dark-text-secondary",children:n.question})]}),T.j.jsx("div",{className:"text-gray-700 dark:text-dark-text-secondary prose dark:prose-invert prose-sm max-w-none",dangerouslySetInnerHTML:{__html:s}})]})}let TC=`

------

`;function TT({apiEndpoint:e,token:t,reportId:r,onStreamClosed:n=()=>{},onDelete:i=()=>{}}){let[s,o]=(0,A.useState)([]),[a,l]=(0,A.useState)(!1),c=(0,A.useRef)(s);c.current=s;let h=(0,A.useContext)(T.a);return(0,A.useEffect)(()=>{let i=!1,s=new AbortController,a=(e,t=!1)=>{s.abort(),null==e||e.releaseLock(),l(!0),n(c.current,t)};return async function(){var n;try{let i=await fetch(`${e}/oracle/get_report_thinking_status?report_id=${r}`,{headers:{"X-Auth-Token":t},signal:s.signal});if(!i.ok){console.error("Stream request failed:",i.status),l(!0);return}let c=null==(n=i.body)?void 0:n.getReader();if(!c){console.error("No reader found on response body."),l(!0);return}let u=new TextDecoder("utf-8"),d="";for(;;){let{done:e,value:t}=await c.read();if(e){console.log("Stream ended from server.");break}let r=[];for(let e of(d+=u.decode(t,{stream:!0})).split(TC)){let t=e.replace("data:","").trim();if(t){if("Stream closed without errors"===t){console.log("[Stream Event] 'Stream closed' received."),a(c);return}if("Stream closed with errors"===t){a(c,!0);return}try{let e=JSON.parse(t);if(e.error){h.error("Could not generate report. Error: "+e.error),a(c,!0);return}Array.isArray(e)?r.push(...e):r.push(e)}catch(e){console.warn("Failed to parse SSE data:",e)}}}o(r)}l(!0)}catch(e){i||console.error("[Stream Error]",e),l(!0)}}(),()=>{i=!0,s.abort()}},[e,t,r]),T.j.jsxs("div",{className:"relative p-2 overflow-auto",children:[T.j.jsxs("div",{className:"flex flex-row w-full items-center mb-4 mt-4",children:[T.j.jsx("h1",{className:"text-xl font-bold grow dark:text-dark-text-primary",children:"Details"}),T.j.jsx(T.D,{variant:"danger",className:"self-end",onClick:i,children:"Delete"})]}),!a&&T.j.jsxs("div",{className:"w-full h-40 bg-white dark:bg-gray-800 rounded-md border flex items-center justify-center gap-2",children:[T.j.jsx(T.d,{classNames:"w-5 h-5 text-blue-500 animate-spin"}),T.j.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Creating SQL queries and searching the web to answer your question. I will show my thinking below. The report will automatically load when I am done thinking."})]}),T.j.jsx("div",{className:"w-full",children:s.filter(e=>{var t;return!("object"==typeof e.result&&null!=(t=e.result)&&t.error)}).reverse().map(e=>T.j.jsx("div",{className:"w-full md:w-1/2 p-2 inline-block align-top transition-all duration-500 ease-in-out",children:"text_to_sql_tool"===e.function_name?T.j.jsx(ka,{step:e}):"web_search_tool"===e.function_name?T.j.jsx(TO,{step:e}):"pdf_citations_tool"===e.function_name?T.j.jsx(TS,{step:e}):null},e.id))})]})}var TA=NaN,TM=/^\s+|\s+$/g,TE=/^[-+]0x[0-9a-f]+$/i,TN=/^0b[01]+$/i,T_=/^0o[0-7]+$/i,Tj=parseInt,TD="object"==typeof M.w&&M.w&&M.w.Object===Object&&M.w,TR="object"==typeof self&&self&&self.Object===Object&&self,TP=TD||TR||Function("return this")(),TI=Object.prototype.toString,Tz=Math.max,TL=Math.min,Tq=function(){return TP.Date.now()};function T$(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function TB(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&"[object Symbol]"==TI.call(t))return TA;if(T$(e)){var t,r="function"==typeof e.valueOf?e.valueOf():e;e=T$(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(TM,"");var n=TN.test(e);return n||T_.test(e)?Tj(e.slice(2),n?2:8):TE.test(e)?TA:+e}let TF=(0,M.y)(function(e,t,r){var n,i,s,o,a,l,c=0,h=!1,u=!1,d=!0;if("function"!=typeof e)throw TypeError("Expected a function");function f(t){var r=n,s=i;return n=i=void 0,c=t,o=e.apply(s,r)}function p(e){var r=e-l,n=e-c;return void 0===l||r>=t||r<0||u&&n>=s}function m(){var e,r,n,i=Tq();if(p(i))return g(i);a=setTimeout(m,(e=i-l,r=i-c,n=t-e,u?TL(n,s-r):n))}function g(e){return a=void 0,d&&n?f(e):(n=i=void 0,o)}function y(){var e,r=Tq(),s=p(r);if(n=arguments,i=this,l=r,s){if(void 0===a)return c=e=l,a=setTimeout(m,t),h?f(e):o;if(u)return a=setTimeout(m,t),f(l)}return void 0===a&&(a=setTimeout(m,t)),o}return t=TB(t)||0,T$(r)&&(h=!!r.leading,s=(u="maxWait"in r)?Tz(TB(r.maxWait)||0,t):s,d="trailing"in r?!!r.trailing:d),y.cancel=function(){void 0!==a&&clearTimeout(a),c=0,n=l=i=a=void 0},y.flush=function(){return void 0===a?o:g(Tq())},y}),TQ={apiEndpoint:"https://demo.defog.ai",hiddenCharts:[],hideSqlTab:!1,hidePreviewTabs:!1,token:null,hideRawAnalysis:!0,analysisDataCache:{},updateConfig:()=>{}};function TV(e={}){let t=Object.assign({},TQ);return Object.keys(e).forEach(r=>{void 0!==e[r]&&(t[r]=e[r])}),t}let TH=(0,A.createContext)(Object.assign({},TQ)),TW=({type:e=null,message:t=null,svg:r=null,children:n=null,classNames:i})=>T.j.jsxs("div",{className:(0,T.t)("agent-loader",i),children:[r&&r,T.j.jsxs("div",{className:"w-full h-40 flex text-sm flex-col items-center justify-center dark:text-gray-300",children:[t,T.j.jsx(T.d,{classNames:"text-gray-400 dark:text-gray-500 mt-3 mx-0"})]}),"error"===e&&T.j.jsx("h2",{children:"ERROR"}),n&&T.j.jsx("div",{className:"searchState-child",children:n})]});function TU({questions:e,handleSubmit:t,globalLoading:r}){let n=(0,A.useRef)(e);return e?T.j.jsx("div",{className:"p-6 bg-transparent",children:T.j.jsxs("div",{className:"mb-4 text-sm text-gray-500 dark:text-gray-400",onKeyDown:e=>{"Enter"===e.key&&t({clarification_questions:n.current},"clarify")},children:[e.length?e.map((e,t)=>T.j.jsx("div",{className:"w-full",children:T.j.jsxs("div",{children:[T.j.jsx("p",{className:"q-desc m-0 mb-2 text-primary-text dark:text-gray-200",children:e.question}),T.j.jsx("div",{className:"w-full mb-4 min-w-64",children:T.j.jsx(T.N,{onChange:e=>{n.current[t].response=e.target.value},defaultValue:e.response,placeholder:"Your response. Leave blank if the question above is not relevant",inputClassNames:"ring-0 bg-transparent rounded-none border-b border-dotted border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:border-solid focus:ring-0 focus:border-b-primary-highlight shadow-none pl-0 w-full dark:text-gray-200"})})]})},e.question)):null,T.j.jsx("button",{className:"underline text-gray-400 dark:text-gray-500 text-sm mt-4 cursor-pointer hover:text-gray-600 dark:hover:text-gray-300",onClick:()=>t({clarification_questions:n.current},"clarify"),disabled:r,children:"Click here or press enter to submit"})]})}):T.j.jsx("div",{className:"agent-error",children:"Something went wrong, please retry or contact us if it fails again."})}let TG={config:{selectedChart:"bar",separator:"%%%%^^^%%%%",selectedColumns:{x:null,y:null,facet:null,fill:null,stroke:null,filter:null},chartStyle:{title:"",fontSize:12,backgroundColor:"transparent",xLabel:null,yLabel:null,xGrid:!1,yGrid:!0,xTicks:10,dateFormat:"%b %-d, %Y",yTicks:10,selectedScheme:"Tableau10",yAxisUnitLabel:""},chartSpecificOptions:{line:{lineWidth:3,curve:"linear",marker:!1,filter:null,groupBy:"",stroke:"",lineOptions:{},showLabels:!1,aggregateFunction:"sum",colorBy:null,colorByIsDate:!1},bar:{barWidth:.8,aggregateFunction:"sum",fill:null,barOptions:{},colorBy:null,colorByIsDate:!1},scatter:{pointColor:"#f54242",pointSize:3}},loading:!1,data:[],availableColumns:[]},mergeConfigUpdates:function(e){let t;return(e.selectedChart?"line"===e.selectedChart||"bar"===e.selectedChart:"line"===this.config.selectedChart||"bar"===this.config.selectedChart)?e.selectedColumns&&e.selectedColumns.y&&(Array.isArray(e.selectedColumns.y)||(e.selectedColumns.y=[e.selectedColumns.y])):e.selectedColumns&&e.selectedColumns.y&&Array.isArray(e.selectedColumns.y)&&e.selectedColumns.y.length>0&&(e.selectedColumns.y=e.selectedColumns.y[0]),e.selectedColumns&&this.setSelectedColumns(e.selectedColumns),this.config=function e(t,r){let n={...t};for(let i in r)"object"!=typeof r[i]||null===r[i]||Array.isArray(r[i])||void 0===t[i]?Array.isArray(r[i])?n[i]=r[i].slice():n[i]=r[i]:n[i]=e(t[i],r[i]);return n}(JSON.parse(JSON.stringify(this.config)),e),this},setConfigCallback:()=>{},clone:function(e=[]){let t={};for(let r in this.config)"function"!=typeof this.config[r]&&-1===e.indexOf(r)&&(t[r]=this.config[r]);return t},render:function(){this.setConfigCallback(this.config)},setSelectedChart:function(e){let t=this.config.selectedColumns;return this.config={...this.config,selectedChart:e,selectedColumns:{x:t.x,y:"line"===e||"bar"===e?Array.isArray(t.y)?t.y:t.y?[t.y]:[]:Array.isArray(t.y)&&t.y.length>0?t.y[0]:t.y,facet:t.facet,fill:t.fill,stroke:t.stroke,filter:t.filter},chartStyle:{...TG.config.chartStyle,xLabel:this.config.chartStyle.xLabel,yLabel:this.config.chartStyle.yLabel}},this},setSelectedColumns:function(e){let t,r;return e.x&&Array.isArray(e.x)&&(t=e.x,r=e.x.join(this.config.separator),e.x.length>1&&this.config.data.forEach(e=>(e[r]=t.map(t=>e[t]??"").join("-"),e)),e.x=r),this.config={...this.config,selectedColumns:{...this.config.selectedColumns,...e}},this},updateChartStyle:function(e){return this.config={...this.config,chartStyle:{...this.config.chartStyle,...e}},this},updateChartSpecificOptions:function(e){return this.config={...this.config,chartSpecificOptions:{...this.config.chartSpecificOptions,[this.config.selectedChart]:{...this.config.chartSpecificOptions[this.config.selectedChart],...e}}},this},setData:function(e){return this.config.data=e,this},setAvailableColumns:function(e){return this.config.availableColumns=e,this},autoSelectVariables:function(){var e,t,r,n,i,s;let{selectedChart:o,availableColumns:a}=this.config,l=a.find(e=>{let t=!0===e.isDate||"date"===e.colType,r=e.title&&/date|year|month|week|time/gi.test(e.title);return t||r}),c=a.filter(e=>"quantitative"===e.variableType),h=a.filter(e=>"quantitative"!==e.variableType&&!e.isDate),u=(null==(e=c[0])?void 0:e.key)||(null==(t=h[0])?void 0:t.key)||(null==(r=a[0])?void 0:r.key)||null,d=a.filter(e=>e.key!==u),f=d.filter(e=>"quantitative"!==e.variableType),p=d.filter(e=>"quantitative"===e.variableType),m=(null==l?void 0:l.key)||(null==(n=p[0])?void 0:n.key)||(null==(i=f[0])?void 0:i.key)||(null==(s=a[0])?void 0:s.key)||null;return this.config={...this.config,loading:!1,selectedColumns:{x:m,y:null===u?null:"line"===o||"bar"==o?[u]:u}},this},editChart:async function(e,t,r,n){var i,s,o;try{e&&t&&r&&null!=(i=this.config.availableColumns)&&i.length||(console.warn("Chart edit skipped - missing required fields:",{hasToken:!!e,hasQuestion:!!t,hasUrl:!!r,columnsLength:(null==(s=this.config.availableColumns)?void 0:s.length)||0}),this.autoSelectVariables()),this.mergeConfigUpdates({loading:!0}).render(),this.config.selectedColumns.x&&this.config.selectedColumns.y||this.autoSelectVariables();let n=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,user_request:t,current_chart_state:this.clone(["data","availableColumns"]),columns:this.config.availableColumns.map(e=>({title:e.title,col_type:e.colType||"string"}))})});if(!n.ok){console.warn("Chart edit request failed - continuing with auto-selection"),this.mergeConfigUpdates({loading:!1}).render();return}let o=await n.json();if(o.error||!o.success){console.warn("Chart edit response error:",o.error),this.mergeConfigUpdates({loading:!1}).render();return}let a=o.chart_state_edits;this.mergeConfigUpdates({...a,loading:!1}).render()}catch(e){console.error("Chart edit error:",e),this.mergeConfigUpdates({loading:!1}).render(),null==(o=null==n?void 0:n.onError)||o.call(n,e)}}};function TX(e={},t=()=>{}){let r=Object.assign({},TG);for(let t in e)void 0!==e[t]&&(r.config[t]=e[t]);return{...r,config:r.config,setConfigCallback:t}}let TY=(0,A.createContext)(TX()),TZ={line:["date","quantitative","categorical"],bar:["categorical","quantitative","date"],scatter:["quantitative","date","categorical"]},TJ=e=>e.isDate?"date":e.variableType,TK=(e,t)=>{let r=TZ[t],n=TJ(e),i=r.indexOf(n);return -1===i?r.length:i},T0=(e,t)=>[...e].sort((e,r)=>TK(e,t)-TK(r,t)),T1=[{value:"line",label:"Line",Icon:$},{value:"bar",label:"Bar",Icon:q},{value:"scatter",label:"Scatter",Icon:F}];function T2({selectedChart:e,onChartChange:t,hiddenCharts:r=[]}){let n=T1.filter(e=>!r.includes(e.value));return T.j.jsxs("div",{children:[T.j.jsx("h3",{className:"mb-2 font-bold input-label",children:"Chart Type"}),T.j.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(({value:r,label:n,Icon:i})=>T.j.jsxs("button",{onClick:()=>t(r),className:`
                dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 
                hover:text-gray-800 dark:hover:text-gray-100 active:text-gray-800 dark:active:text-gray-100 
                agui-item agui-btn flex-row gap-1 active:brightness-[90%] p-2 rounded-sm min-w-20 border-[1px] 
                flex items-center justify-center font-semibold transition-colors duration-200 text-[11px] 
                font-sans ease-in-out
                ${e===r?"bg-blue-500/95 text-white border-0 shadow-sm hover:bg-blue-600":" bg-blue-100 text-blue-600/50 border-blue-200 hover:bg-blue-300"}
              `,children:[T.j.jsx(i,{size:16}),T.j.jsx("span",{children:n})]},r))})]})}function T4({axis:e,columns:t,selectedValue:r,onAxisChange:n}){let i=t=>{if(document.activeElement===document.body&&!t.metaKey&&!t.ctrlKey&&!t.altKey&&!t.shiftKey){if("x"===e&&(0,T.aa)(t.key,T.a7.SET_X_AXIS)){t.preventDefault();let e=document.querySelector('div[data-axis="x"] input');null==e||e.focus()}if("y"===e&&(0,T.aa)(t.key,T.a7.SET_Y_AXIS)){t.preventDefault();let e=document.querySelector('div[data-axis="y"] input');null==e||e.focus()}}};return(0,A.useEffect)(()=>(window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)),[e]),T.j.jsx("div",{"data-axis":e,className:"dark:text-gray-200",children:T.j.jsx(T.P,{style:{width:"100%",minWidth:"100px"},value:Array.isArray(r)?r:(null==r?void 0:r.split("%%%%^^^%%%%"))??[],onChange:n,placeholder:`Select ${e.toUpperCase()} axis`,options:Array.isArray(t)?t.map(e=>({label:e.title,value:e.key})):null})})}let T5=[{value:"count",label:"Count"},{value:"sum",label:"Sum"},{value:"mean",label:"Mean"}];function T3({selectedChart:e,aggregateFunction:t,onAggregateChange:r,rootClassNames:n=""}){let i=T5.filter(t=>"none"!==t.value||"line"!==e);return T.j.jsx(T.j.Fragment,{children:T.j.jsx("div",{className:"dark:text-gray-200",children:T.j.jsx(T.S,{allowClear:!1,rootClassNames:(0,T.t)("w-24",n),value:t||"sum",onChange:r,options:i.map(e=>({value:e.value,label:e.label}))})})})}let T6=({columns:e})=>{let[t,r]=(0,A.useState)([]),n=(0,A.useContext)(TY),i=(0,A.useRef)(null),s=(0,A.useCallback)(t=>{let r=t.length?r=>t.every(({column:t,operator:n,value:i,isValid:s})=>{if(!s||!t||!n||""===i)return!0;let o=e.find(e=>e.dataIndex===t),a=r[t];return({"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,">":(e,t)=>e>t,"<":(e,t)=>e<t,">=":(e,t)=>e>=t,"<=":(e,t)=>e<=t,in:(e,t)=>t.split(",").map(e=>e.trim().toLowerCase()).includes(e),"not in":(e,t)=>!t.split(",").map(e=>e.trim().toLowerCase()).includes(e),contains:(e,t)=>e.includes(t),"starts with":(e,t)=>e.startsWith(t),"ends with":(e,t)=>e.endsWith(t),between:(e,t)=>{let[r,n]=t.split(",").map(Number);return e>=r&&e<=n}})[n]("categorical"===o.variableType&&"string"==typeof a?a.toLowerCase():a,"categorical"===o.variableType&&"string"==typeof i?i.toLowerCase():i)}):null;n.updateChartSpecificOptions({filter:r}).render()},[n.config,e]),o=(0,A.useCallback)((...e)=>{i.current&&clearTimeout(i.current),i.current=setTimeout(()=>s(...e),200)},[s]);(0,A.useEffect)(()=>{let e=Object.values(n.config.selectedColumns||{}).flat(),i=t.map(t=>({...t,isValid:t.column&&(e.includes(t.column)||""===t.column)}));JSON.stringify(i)!==JSON.stringify(t)&&(r(i),o(i))},[n.config.selectedColumns,t,o]);let a=e=>{let n=t.filter((t,r)=>r!==e);r(n),s(n)},l=(n,i,a)=>{let l=[...t];if("column"===i){let t=e.find(e=>e.dataIndex===a);l[n][i]=t?a:""}else l[n][i]=a;r(l),"column"===i||"operator"===i?s(l):o(l)},c=e=>{let t=["==","!="];return"categorical"===e.variableType?[...t,"in","not in","contains","starts with","ends with"]:"quantitative"===e.variableType||"integer"===e.variableType?[...t,">","<",">=","<=","between"]:t},h={quantitative:G,categorical:z},u=e=>{let t=h[e.variableType];return{label:T.j.jsxs("div",{className:"flex items-center gap-2",children:[t&&T.j.jsx(t,{className:"opacity-50",size:14}),T.j.jsx("span",{children:e.title})]}),value:e.dataIndex}},d=(e,t,r)=>{let n={className:"w-full",placeholder:"Value",value:e.value,onChange:e=>l(t,"value",e.target.value)};if("between"===e.operator){let[r,i]=e.value.split(",");return T.j.jsxs("div",{className:"flex gap-2",children:[T.j.jsx(T.U,{...n,type:"number",className:"w-1/2",placeholder:"From",value:r||"",onChange:e=>l(t,"value",`${e.target.value},${i||""}`)}),T.j.jsx(T.U,{...n,type:"number",className:"w-1/2",placeholder:"To",value:i||"",onChange:e=>l(t,"value",`${r||""},${e.target.value}`)})]})}return T.j.jsx(T.U,{...n,size:"small",autoResize:"quantitative"!==r.variableType,type:"quantitative"===r.variableType?"number":"text",placeholder:["in","not in"].includes(e.operator)?"Comma-separated values":"Value"})};return T.j.jsxs("div",{className:"space-y-4",children:[T.j.jsxs("div",{className:"space-y-1.5",children:[T.j.jsx("label",{className:"flex items-center gap-2 text-xs font-medium text-gray-700",children:T.j.jsx("span",{className:"flex items-center gap-2",children:"Filters"})}),T.j.jsx("p",{className:"text-xs text-gray-500",children:"Filter data based on selected columns"})]}),T.j.jsx("div",{className:"space-y-2",children:t.map((t,r)=>{let n=e.find(e=>e.dataIndex===t.column),i=n?h[n.variableType]:null;return T.j.jsxs("div",{className:"p-2 space-y-2 border border-gray-200 rounded-md bg-gray-50",children:[T.j.jsxs("div",{className:"flex items-center justify-between",children:[T.j.jsxs("div",{className:"flex items-center gap-2",children:[i&&T.j.jsx(i,{className:"text-gray-400",size:13}),T.j.jsxs("span",{className:"text-xs font-medium text-gray-700",children:["Filter ",r+1]})]}),T.j.jsx(T.D,{variant:"ghost",size:"xs",icon:T.j.jsx(ea,{className:"w-3 h-3"}),onClick:()=>a(r)})]}),T.j.jsxs("div",{className:"space-y-2",children:[T.j.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[T.j.jsx(T.S,{value:t.column,onChange:e=>l(r,"column",e),placeholder:"Select column",options:e.filter(e=>e.dataIndex===t.column||"date"!==e.colType).map(u),allowClear:!0}),T.j.jsx(T.S,{value:t.operator,disabled:!t.isValid||!t.column,onChange:e=>l(r,"operator",e),placeholder:"Select operator",options:n?c(n).map(e=>({label:e,value:e})):[]})]}),n&&d(t,r,n)]}),!t.isValid&&T.j.jsx("div",{className:"text-xs text-red-500",children:"Filter may be outdated and not apply to the chart."})]},r)})}),T.j.jsx(T.D,{onClick:()=>{r([...t,{column:"",operator:"==",value:"",isValid:!0}])},type:"default",className:"flex items-center justify-center w-full gap-2 mt-4 text-sm font-medium text-gray-700 border-gray-200 h-9 bg-gray-50 hover:bg-gray-100",icon:T.j.jsx(Q,{className:"w-4 h-4"}),children:"Add Filter"})]})},T7={date:I,quantitative:G,categorical:z};function T8({columns:e,showChartTypeOnly:t=!1}){let r=(0,A.useContext)(TY),{selectedChart:n,selectedColumns:i,chartSpecificOptions:s}=r.config,[o,a]=(0,A.useState)(e),{hiddenCharts:l=[]}=(0,A.useContext)(TH),[c,h]=(0,A.useState)(!1);(0,A.useEffect)(()=>{r.setAvailableColumns(e).render(),a(T0(e,n))},[e,n]);let u=(0,A.useCallback)(t=>s=>{if(r.setSelectedColumns({...i,[t]:s}),("bar"===n||"line"==n)&&"y"===t){let t=e.find(e=>e.key===s);t&&"categorical"===t.variableType?r.updateChartSpecificOptions({useCount:!0}):r.updateChartSpecificOptions({useCount:!1})}"y"===t&&r.updateChartSpecificOptions({colorBy:null,colorByIsDate:!1}),r.render()},[r,i,n,e]),d=({key:e,isDate:t,variableType:r})=>{let n=T7[t?"date":r];return{label:T.j.jsxs("span",{children:[n&&T.j.jsx(T.j.Fragment,{children:T.j.jsx(n,{className:"inline-block mr-1 text-gray-400",size:13})}),e]}),value:e}};return t?T.j.jsx("div",{className:"flex mr-4 gap-1.5",children:T.j.jsx(T2,{selectedChart:n,onChartChange:e=>{r.setSelectedChart(e).updateChartStyle({xLabel:null,yLabel:null}).autoSelectVariables().render()},hiddenCharts:l})}):T.j.jsxs("div",{className:"grid grid-rows-[auto_1fr_auto] max-h-[550px] overflow-y-auto h-full",children:[T.j.jsxs("div",{className:"space-y-6",children:[T.j.jsxs("div",{className:"space-y-4",children:[T.j.jsxs("div",{className:"space-y-1.5",children:[T.j.jsxs("div",{className:"flex items-center justify-between",children:[T.j.jsxs("label",{className:"flex items-center gap-2 text-xs font-medium text-gray-700 dark:text-gray-300",children:[T.j.jsx(T.a1,{keyValue:T.a7.SET_X_AXIS,className:"px-1 py-0.5 text-xs font-bold text-gray-500"}),T.j.jsx("span",{className:"flex items-center gap-2",children:"Horizontal Axis"})]}),T.j.jsx(T3,{selectedChart:n,aggregateFunction:s[n].aggregateFunction||"sum",onAggregateChange:t=>{let o=null,a=!1;"bar"===n&&"none"===t&&e.length>0&&i.y.length<=1?(o=s[n].colorBy||e[0].dataIndex,a=e.find(e=>e.key===o).isDate):(o=null,a=!1),r.updateChartSpecificOptions({aggregateFunction:t||"sum",colorBy:o,colorByIsDate:a}).render()},className:"w-12"})]}),T.j.jsx(T4,{axis:"x",columns:o,selectedValue:i.x,onAxisChange:u("x")})]}),T.j.jsxs("div",{className:"space-y-1.5",children:[T.j.jsxs("label",{className:"flex items-center gap-2 text-xs font-medium text-gray-700 dark:text-gray-300",children:[T.j.jsx(T.a1,{keyValue:T.a7.SET_Y_AXIS,className:"px-1 py-0.5 text-xs font-bold text-gray-500"}),T.j.jsx("span",{className:"flex items-center gap-2",children:"Vertical Axis"})]}),T.j.jsx(T4,{axis:"y",columns:o,selectedValue:i.y,onAxisChange:u("y")})]})]}),"bar"!==n&&T.j.jsx("div",{className:"pt-4 space-y-2 border-t border-gray-100 dark:border-gray-700",children:T.j.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[T.j.jsxs("div",{className:"space-y-1.5",children:[T.j.jsx("h3",{className:"mb-2 font-medium input-label dark:text-gray-300",children:"Facet by"}),T.j.jsx(T.S,{style:{width:"100%"},placeholder:"Select Facet Column",onChange:e=>u("facet")(e),value:i.facet,allowClear:!0,options:o.map(d)})]}),T.j.jsxs("div",{className:"space-y-1.5",children:[T.j.jsx("h3",{className:"mb-2 font-medium input-label dark:text-gray-300",children:"Color By"}),T.j.jsx(T.S,{placeholder:"Color Column",value:i.fill,style:{width:"100%"},onChange:t=>{let n=(e.find(e=>e.key===t)||{}).isDate||!1;r.updateChartSpecificOptions({colorBy:t,colorByIsDate:n}).render()},disabled:i.y.length>1&&"line"===n,allowClear:!0,options:o.map(d)})]})]})})]}),T.j.jsxs(T.D,{block:!0,type:"default",onClick:()=>h(!c),className:"flex items-center justify-center gap-2 mt-4 text-sm font-medium text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-700 h-9 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700",children:[T.j.jsx(ee,{className:"w-4 h-4"}),"Advanced Options"]}),c&&T.j.jsx("div",{className:"pt-4 mt-4 border-t border-gray-100 dark:border-gray-700",children:T.j.jsx(T6,{columns:e})})]})}let T9=()=>{let e=(0,A.useContext)(TY),{selectedColumns:t,chartSpecificOptions:r}=e.config,n=(t,r)=>{e.updateChartSpecificOptions({[t]:r}).render()},i=(t,n,i)=>{let s={...r.line.lineOptions||{}};s[t]={...s[t],[n]:i},e.updateChartSpecificOptions({lineOptions:s}).render()};return T.j.jsxs("div",{className:"space-y-6",children:[T.j.jsx("div",{className:"space-y-4",children:T.j.jsx("div",{children:T.j.jsx("div",{className:"mt-2 space-y-4",children:T.j.jsxs("div",{children:[T.j.jsx("h3",{className:"mb-2 input-label dark:text-gray-300",children:"Line Width"}),T.j.jsx(T.R,{min:1,max:10,value:r.line.lineWidth||2,onChange:e=>n("lineWidth",e),rootClassNames:"w-full h-2"})]})})})}),Array.isArray(t.y)&&t.y.length>0&&T.j.jsx("div",{className:"space-y-4",children:T.j.jsx("div",{className:"grid gap-3",children:t.y.map(e=>{var t,n,s,o;return T.j.jsxs("div",{className:"flex items-center justify-between w-full gap-3 border-gray-100 dark:border-gray-700 rounded-sm bg-gray-50/20 dark:bg-gray-700/20",children:[T.j.jsx("h4",{className:"mb-2 font-mono text-xs font-bold text-gray-600 dark:text-gray-300",children:e}),T.j.jsx("div",{className:"w-full space-y-3",children:T.j.jsx(T.Z,{allowClear:!0,value:(null==(s=null==(n=null==(t=r.line)?void 0:t.lineOptions)?void 0:n[e])?void 0:s.stroke)||(null==(o=r.line)?void 0:o.pointColor)||"#4e79a7",onChange:t=>i(e,"stroke",t.cleared?null:t.toHexString())})})]},e)})})})]})},Ae=()=>{var e;let t=(0,A.useContext)(TY),{chartSpecificOptions:r}=t.config,n=(e,r)=>{t.updateChartSpecificOptions({[e]:r}).render()};return T.j.jsxs("div",{className:"flex flex-col gap-4 text-xs",children:[!t.config.selectedColumns.fill&&T.j.jsxs("div",{children:[T.j.jsx("h3",{className:"mb-2 dark:text-gray-300",children:"Override dot color"}),T.j.jsx(T.Z,{value:(null==(e=r.scatter)?void 0:e.pointColor)||"#4e79a7",onChange:e=>n("pointColor",e.cleared?null:e.toHexString())})]}),T.j.jsxs("div",{children:[T.j.jsx("h3",{className:"mb-2 dark:text-gray-300",children:"Point Size"}),T.j.jsx(T.R,{min:1,max:20,value:r.scatter.pointSize,onChange:e=>n("pointSize",e)})]})]})},At=()=>{let e=(0,A.useContext)(TY),{chartSpecificOptions:t,selectedColumns:r}=e.config,n=(r,n,i)=>{let s={...t.bar.barOptions||{}};s[r]={...s[r],[n]:i},e.updateChartSpecificOptions({barOptions:s}).render()};return T.j.jsx("div",{className:"flex flex-col gap-4 text-xs",children:T.j.jsxs("div",{className:"flex flex-col gap-2",children:[T.j.jsx("span",{className:"block mb-1 dark:text-gray-300",children:"Bar color"}),T.j.jsx("div",{className:"flex flex-row flex-wrap gap-4",children:Array.isArray(r.y)&&r.y.map(e=>{var r,i,s;return T.j.jsxs("div",{className:"",children:[T.j.jsx("h4",{className:"mb-2 font-bold dark:text-gray-300",children:`${e}`}),T.j.jsx("div",{className:"mb-2",children:T.j.jsx(T.Z,{allowClear:!0,value:(null==(s=null==(i=null==(r=t.bar)?void 0:r.barOptions)?void 0:i[e])?void 0:s.fill)||"#4e79a7",onChange:t=>n(e,"fill",t.cleared?null:t.toHexString())})})]},e)})})]})})};function Ar(){let e=(0,A.useContext)(TY),{selectedChart:t,chartStyle:r}=e.config,n=(t,r)=>{e.updateChartStyle({[t]:r}).render()};return T.j.jsx("div",{className:"grid grid-rows-[auto_1fr] max-h-[550px] overflow-x-clip overflow-y-auto h-full",children:T.j.jsxs("div",{className:"space-y-6",children:[T.j.jsxs("div",{className:"space-y-1.5",children:[T.j.jsx("h3",{className:"input-label dark:text-gray-300",children:"Background Color"}),T.j.jsx(T.Z,{allowClear:!0,value:r.backgroundColor||"#ffffff",onChange:e=>n("backgroundColor",e.cleared?null:e.toHexString())})]}),T.j.jsx("div",{className:"space-y-4",children:T.j.jsx("div",{className:"space-y-4",children:(()=>{switch(t){case"line":return T.j.jsx(T9,{});case"bar":return T.j.jsx(At,{});case"scatter":return T.j.jsx(Ae,{});default:return null}})()})}),T.j.jsx("div",{className:"space-y-4"})]})})}var An={exports:{}};!function(e,t){var r;M.w,e.exports=function(e,t,r){var n=function(e,t){if(!t||!t.length||1===t.length&&!t[0]||1===t.length&&Array.isArray(t[0])&&!t[0].length)return null;1===t.length&&t[0].length>0&&(t=t[0]),r=(t=t.filter(function(e){return e}))[0];for(var r,n=1;n<t.length;n+=1)t[n].isValid()&&!t[n][e](r)||(r=t[n]);return r};r.max=function(){var e=[].slice.call(arguments,0);return n("isAfter",e)},r.min=function(){var e=[].slice.call(arguments,0);return n("isBefore",e)}}}(An);var Ai=An.exports;let As=(0,M.y)(Ai),Ao=(()=>{let e=0,t=()=>`0000${(1679616*Math.random()<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function Aa(e){let t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}let Al=null;function Ac(e={}){return Al||(Al=e.includeStyleProperties?e.includeStyleProperties:Aa(window.getComputedStyle(document.documentElement)))}function Ah(e,t){let r=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return r?parseFloat(r.replace("px","")):0}function Au(e,t={}){return{width:t.width||function(e){let t=Ah(e,"border-left-width"),r=Ah(e,"border-right-width");return e.clientWidth+t+r}(e),height:t.height||function(e){let t=Ah(e,"border-top-width"),r=Ah(e,"border-bottom-width");return e.clientHeight+t+r}(e)}}function Ad(e){return new Promise((t,r)=>{let n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>t(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function Af(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function Ap(e,t,r){let n="http://www.w3.org/2000/svg",i=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return i.setAttribute("width",`${t}`),i.setAttribute("height",`${r}`),i.setAttribute("viewBox",`0 0 ${t} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(e),Af(i)}let Am=(e,t)=>{if(e instanceof t)return!0;let r=Object.getPrototypeOf(e);return null!==r&&(r.constructor.name===t.name||Am(r,t))};function Ag(e,t,r,n){let i=window.getComputedStyle(e,r),s=i.getPropertyValue("content");if(""===s||"none"===s)return;let o=Ao();try{t.className=`${t.className} ${o}`}catch{return}let a=document.createElement("style");a.appendChild(function(e,t,r,n){let i=`.${e}:${t}`,s=r.cssText?function(e){let t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}(r):Ac(n).map(e=>{let t=r.getPropertyValue(e),n=r.getPropertyPriority(e);return`${e}: ${t}${n?" !important":""};`}).join(" ");return document.createTextNode(`${i}{${s}}`)}(o,r,i,n)),t.appendChild(a)}let Ay="application/font-woff",Ab="image/jpeg",Av={woff:Ay,woff2:Ay,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Ab,jpeg:Ab,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Ax(e){return Av[(function(e){let t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""})(e).toLowerCase()]||""}function Aw(e){return -1!==e.search(/^(data:)/)}async function Ak(e,t,r){let n=await fetch(e,t);if(404===n.status)throw Error(`Resource "${n.url}" not found`);let i=await n.blob();return new Promise((e,t)=>{let s=new FileReader;s.onerror=t,s.onloadend=()=>{try{e(r({res:n,result:s.result}))}catch(e){t(e)}},s.readAsDataURL(i)})}let AO={};async function AS(e,t,r){var n,i,s,o,a;let l,c;let h=(n=e,i=t,s=r.includeQueryParams,c=n.replace(/\?.*/,""),s&&(c=n),/ttf|otf|eot|woff2?/i.test(c)&&(c=c.replace(/.*\//,"")),i?`[${i}]${c}`:c);if(null!=AO[h])return AO[h];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());try{o=await Ak(e,r.fetchRequestInit,({res:e,result:r})=>(t||(t=e.headers.get("Content-Type")||""),r.split(/,/)[1])),a=t,l=`data:${a};base64,${o}`}catch(n){l=r.imagePlaceholder||"";let t=`Failed to fetch resource: ${e}`;n&&(t="string"==typeof n?n:n.message),t&&console.warn(t)}return AO[h]=l,l}async function AC(e){let t=e.toDataURL();return"data:,"===t?e.cloneNode(!1):Ad(t)}async function AT(e,t){if(e.currentSrc){let t=document.createElement("canvas"),r=t.getContext("2d");return t.width=e.clientWidth,t.height=e.clientHeight,null==r||r.drawImage(e,0,0,t.width,t.height),Ad(t.toDataURL())}let r=e.poster,n=Ax(r);return Ad(await AS(r,n,t))}async function AA(e,t){var r;try{if(null!==(r=null==e?void 0:e.contentDocument)&&void 0!==r&&r.body)return await AD(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function AM(e,t){return Am(e,HTMLCanvasElement)?AC(e):Am(e,HTMLVideoElement)?AT(e,t):Am(e,HTMLIFrameElement)?AA(e,t):e.cloneNode(AN(e))}let AE=e=>null!=e.tagName&&"SLOT"===e.tagName.toUpperCase(),AN=e=>null!=e.tagName&&"SVG"===e.tagName.toUpperCase();async function A_(e,t,r){var n,i;if(AN(t))return t;let s=[];return 0===(s=AE(e)&&e.assignedNodes?Aa(e.assignedNodes()):Am(e,HTMLIFrameElement)&&null!==(n=e.contentDocument)&&void 0!==n&&n.body?Aa(e.contentDocument.body.childNodes):Aa((null!==(i=e.shadowRoot)&&void 0!==i?i:e).childNodes)).length||Am(e,HTMLVideoElement)||await s.reduce((e,n)=>e.then(()=>AD(n,r)).then(e=>{e&&t.appendChild(e)}),Promise.resolve()),t}async function Aj(e,t){let r=e.querySelectorAll?e.querySelectorAll("use"):[];if(0===r.length)return e;let n={};for(let i=0;i<r.length;i++){let s=r[i].getAttribute("xlink:href");if(s){let r=e.querySelector(s),i=document.querySelector(s);r||!i||n[s]||(n[s]=await AD(i,t,!0))}}let i=Object.values(n);if(i.length){let t="http://www.w3.org/1999/xhtml",r=document.createElementNS(t,"svg");r.setAttribute("xmlns",t),r.style.position="absolute",r.style.width="0",r.style.height="0",r.style.overflow="hidden",r.style.display="none";let n=document.createElementNS(t,"defs");r.appendChild(n);for(let e=0;e<i.length;e++)n.appendChild(i[e]);e.appendChild(r)}return e}async function AD(e,t,r){return r||!t.filter||t.filter(e)?Promise.resolve(e).then(e=>AM(e,t)).then(r=>A_(e,r,t)).then(r=>(Am(r,Element)&&(function(e,t,r){let n=t.style;if(!n)return;let i=window.getComputedStyle(e);i.cssText?(n.cssText=i.cssText,n.transformOrigin=i.transformOrigin):Ac(r).forEach(r=>{let s=i.getPropertyValue(r);"font-size"===r&&s.endsWith("px")&&(s=`${Math.floor(parseFloat(s.substring(0,s.length-2)))-.1}px`),Am(e,HTMLIFrameElement)&&"display"===r&&"inline"===s&&(s="block"),"d"===r&&t.getAttribute("d")&&(s=`path(${t.getAttribute("d")})`),n.setProperty(r,s,i.getPropertyPriority(r))})}(e,r,t),Ag(e,r,":before",t),Ag(e,r,":after",t),Am(e,HTMLTextAreaElement)&&(r.innerHTML=e.value),Am(e,HTMLInputElement)&&r.setAttribute("value",e.value),function(e,t){if(Am(e,HTMLSelectElement)){let r=Array.from(t.children).find(t=>e.value===t.getAttribute("value"));r&&r.setAttribute("selected","")}}(e,r)),r)).then(e=>Aj(e,t)):null}let AR=/url\((['"]?)([^'"]+?)\1\)/g,AP=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,AI=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;async function Az(e,t,r,n,i){try{let s;let o=r?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;let r=document.implementation.createHTMLDocument(),n=r.createElement("base"),i=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(i),t&&(n.href=t),i.href=e,i.href}(t,r):t,a=Ax(t);return i||(s=await AS(o,a,n)),e.replace(function(e){let t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}(t),`$1${s}$3`)}catch{}return e}function AL(e){return -1!==e.search(AR)}async function Aq(e,t,r){if(!AL(e))return e;let n=function(e,{preferredFontFormat:t}){return t?e.replace(AI,e=>{for(;;){let[r,,n]=AP.exec(e)||[];if(!n)return"";if(n===t)return`src: ${r};`}}):e}(e,r);return(function(e){let t=[];return e.replace(AR,(e,r,n)=>(t.push(n),e)),t.filter(e=>!Aw(e))})(n).reduce((e,n)=>e.then(e=>Az(e,n,t,r)),Promise.resolve(n))}async function A$(e,t,r){var n;let i=null===(n=t.style)||void 0===n?void 0:n.getPropertyValue(e);if(i){let n=await Aq(i,null,r);return t.style.setProperty(e,n,t.style.getPropertyPriority(e)),!0}return!1}async function AB(e,t){await A$("background",e,t)||await A$("background-image",e,t),await A$("mask",e,t)||await A$("-webkit-mask",e,t)||await A$("mask-image",e,t)||await A$("-webkit-mask-image",e,t)}async function AF(e,t){let r=Am(e,HTMLImageElement);if(!(r&&!Aw(e.src))&&!(Am(e,SVGImageElement)&&!Aw(e.href.baseVal)))return;let n=r?e.src:e.href.baseVal,i=await AS(n,Ax(n),t);await new Promise((n,s)=>{e.onload=n,e.onerror=t.onImageErrorHandler?(...e)=>{try{n(t.onImageErrorHandler(...e))}catch(e){s(e)}}:s,e.decode&&(e.decode=n),"lazy"===e.loading&&(e.loading="eager"),r?(e.srcset="",e.src=i):e.href.baseVal=i})}async function AQ(e,t){let r=Aa(e.childNodes).map(e=>AV(e,t));await Promise.all(r).then(()=>e)}async function AV(e,t){Am(e,Element)&&(await AB(e,t),await AF(e,t),await AQ(e,t))}let AH={};async function AW(e){let t=AH[e];if(null!=t)return t;let r=await (await fetch(e)).text();return t={url:e,cssText:r},AH[e]=t,t}async function AU(e,t){let r=e.cssText,n=/url\(["']?([^"')]+)["']?\)/g;return Promise.all((r.match(/url\([^)]+\)/g)||[]).map(async i=>{let s=i.replace(n,"$1");return s.startsWith("https://")||(s=new URL(s,e.url).href),Ak(s,t.fetchRequestInit,({result:e})=>(r=r.replace(i,`url(${e})`),[i,e]))})).then(()=>r)}function AG(e){if(null==e)return[];let t=[],r=e.replace(/(\/\*[\s\S]*?\*\/)/gi,""),n=RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){let e=n.exec(r);if(null===e)break;t.push(e[0])}r=r.replace(n,"");let i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s=RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let e=i.exec(r);if(null===e){if(null===(e=s.exec(r)))break;i.lastIndex=s.lastIndex}else s.lastIndex=i.lastIndex;t.push(e[0])}return t}async function AX(e,t){let r=[],n=[];return e.forEach(r=>{if("cssRules"in r)try{Aa(r.cssRules||[]).forEach((e,i)=>{if(e.type===CSSRule.IMPORT_RULE){let s=i+1,o=e.href,a=AW(o).then(e=>AU(e,t)).then(e=>AG(e).forEach(e=>{try{r.insertRule(e,e.startsWith("@import")?s+=1:r.cssRules.length)}catch(t){console.error("Error inserting rule from remote css",{rule:e,error:t})}})).catch(e=>{console.error("Error loading remote css",e.toString())});n.push(a)}})}catch(s){let i=e.find(e=>null==e.href)||document.styleSheets[0];null!=r.href&&n.push(AW(r.href).then(e=>AU(e,t)).then(e=>AG(e).forEach(e=>{i.insertRule(e,i.cssRules.length)})).catch(e=>{console.error("Error loading remote stylesheet",e)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(e.forEach(e=>{if("cssRules"in e)try{Aa(e.cssRules||[]).forEach(e=>{r.push(e)})}catch(t){console.error(`Error while reading CSS rules from ${e.href}`,t)}}),r))}async function AY(e,t){if(null==e.ownerDocument)throw Error("Provided element is not within a Document");let r=Aa(e.ownerDocument.styleSheets);return(await AX(r,t)).filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>AL(e.style.getPropertyValue("src")))}function AZ(e){return e.trim().replace(/["']/g,"")}async function AJ(e,t){let r=await AY(e,t),n=function(e){let t=new Set;return function e(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(e=>{t.add(AZ(e))}),Array.from(r.children).forEach(t=>{t instanceof HTMLElement&&e(t)})}(e),t}(e);return(await Promise.all(r.filter(e=>n.has(AZ(e.style.fontFamily))).map(e=>{let r=e.parentStyleSheet?e.parentStyleSheet.href:null;return Aq(e.cssText,r,t)}))).join(`
`)}async function AK(e,t){let r=null!=t.fontEmbedCSS?t.fontEmbedCSS:t.skipFonts?null:await AJ(e,t);if(r){let t=document.createElement("style"),n=document.createTextNode(r);t.appendChild(n),e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}}async function A0(e,t={}){let{width:r,height:n}=Au(e,t),i=await AD(e,t,!0);return await AK(i,t),await AV(i,t),function(e,t){let{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);let n=t.style;null!=n&&Object.keys(n).forEach(e=>{r[e]=n[e]})}(i,t),await Ap(i,r,n)}async function A1(e,t={}){let{width:r,height:n}=Au(e,t),i=await A0(e,t),s=await Ad(i),o=document.createElement("canvas"),a=o.getContext("2d"),l=t.pixelRatio||function(){let e,t;try{t=N}catch{}let r=t&&t.env?t.env.devicePixelRatio:null;return r&&Number.isNaN(e=parseInt(r,10))&&(e=1),e||window.devicePixelRatio||1}(),c=t.canvasWidth||r,h=t.canvasHeight||n;return o.width=c*l,o.height=h*l,t.skipAutoScale||(o.width>16384||o.height>16384)&&(o.width>16384&&o.height>16384?o.width>o.height?(o.height*=16384/o.width,o.width=16384):(o.width*=16384/o.height,o.height=16384):o.width>16384?(o.height*=16384/o.width,o.width=16384):(o.width*=16384/o.height,o.height=16384)),o.style.width=`${c}`,o.style.height=`${h}`,t.backgroundColor&&(a.fillStyle=t.backgroundColor,a.fillRect(0,0,o.width,o.height)),a.drawImage(s,0,0,o.width,o.height),o}async function A2(e,t={}){return(await A1(e,t)).toDataURL()}function A4(e){return null!=e&&!Number.isNaN(e)}function A5(e,t){return+A4(t)-+A4(e)||(0,T.a2)(e,t)}function A3(e,t){return+A4(t)-+A4(e)||(0,T.ab)(e,t)}function A6(e){return null!=e&&""!=`${e}`}function A7(e){return isFinite(e)?e:NaN}function A8(e){return e>0&&isFinite(e)?e:NaN}function A9(e){return e<0&&isFinite(e)?e:NaN}function Me(e,t){return`${e}`.padStart(t,"0")}let Mt=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function Mr(e,t){return Mt.test(e+="")?new Date(e):t}function Mn(e){if(null==e)return;let t=e[0],r=e[e.length-1];return(0,T.ab)(t,r)}let Mi=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",1e3],["5 seconds",5e3],["15 seconds",15e3],["30 seconds",3e4],["minute",6e4],["5 minutes",3e5],["15 minutes",9e5],["30 minutes",18e5],["hour",36e5],["3 hours",108e5],["6 hours",216e5],["12 hours",432e5],["day",864e5],["2 days",1728e5],["week",6048e5],["2 weeks",12096e5],["month",2592e6],["3 months",7776e6],["6 months",15552e6],["year",31536e6],["2 years",63072e6],["5 years",15768e7],["10 years",31536e7],["20 years",63072e7],["50 years",15768e8],["100 years",31536e8]],Ms=new Map([["second",1e3],["minute",6e4],["hour",36e5],["day",864e5],["monday",6048e5],["tuesday",6048e5],["wednesday",6048e5],["thursday",6048e5],["friday",6048e5],["saturday",6048e5],["sunday",6048e5],["week",6048e5],["month",2592e6],["year",31536e6]]),Mo=new Map([["second",s8],["minute",s9],["hour",ot],["day",on],["monday",oc],["tuesday",oh],["wednesday",ou],["thursday",od],["friday",of],["saturday",op],["sunday",ol],["week",ol],["month",oO],["year",oC]]),Ma=new Map([["second",s8],["minute",oe],["hour",or],["day",oo],["monday",oy],["tuesday",ob],["wednesday",ov],["thursday",ox],["friday",ow],["saturday",ok],["sunday",og],["week",og],["month",oS],["year",oT]]),Ml=Symbol("intervalDuration"),Mc=Symbol("intervalType");for(let[e,t]of Mo)t[Ml]=Ms.get(e),t[Mc]="time";for(let[e,t]of Ma)t[Ml]=Ms.get(e),t[Mc]="utc";let Mh=[["year",oT,"utc"],["month",oS,"utc"],["day",oo,"utc",15552e6],["hour",or,"utc",2592e5],["minute",oe,"utc",216e5],["second",s8,"utc",18e5]],Mu=[["year",oC,"time"],["month",oO,"time"],["day",on,"time",15552e6],["hour",ot,"time",2592e5],["minute",s9,"time",216e5],["second",s8,"time",18e5]],Md=[Mh[0],Mu[0],Mh[1],Mu[1],Mh[2],Mu[2],...Mh.slice(3)];function Mf(e){let t=`${e}`.toLowerCase();t.endsWith("s")&&(t=t.slice(0,-1));let r=1,n=/^(?:(\d+)\s+)/.exec(t);switch(n&&(t=t.slice(n[0].length),r=+n[1]),t){case"quarter":t="month",r*=3;break;case"half":t="month",r*=6}let i=Ma.get(t);if(!i)throw Error(`unknown interval: ${e}`);if(r>1&&!i.every)throw Error(`non-periodic interval: ${t}`);return[t,r]}function Mp(e){return Mg(Mf(e),"time")}function Mm(e){return Mg(Mf(e),"utc")}function Mg([e,t],r){let n=("time"===r?Mo:Ma).get(e);return t>1&&((n=n.every(t))[Ml]=Ms.get(e)*t,n[Mc]=r),n}function My(e,t){if(!(t>1))return;let r=e[Ml];if(!Mi.some(([,e])=>e===r)||r%864e5==0&&864e5<r&&r<2592e6)return;let[n]=Mi[(0,T.a6)(([,e])=>Math.log(e)).center(Mi,Math.log(r*t))];return("time"===e[Mc]?Mp:Mm)(n)}function Mb(e,t,r){var n;let i="time"===t?d:f;if(null==r)return i("year"===e?"%Y":"month"===e?"%Y-%m":"day"===e?"%Y-%m-%d":"hour"===e||"minute"===e?"%Y-%m-%dT%H:%M":"second"===e?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");let s="left"===(n=r)||"right"===n?(e,t)=>`
${e}
${t}`:"top"===n?(e,t)=>`${t}
${e}`:(e,t)=>`${e}
${t}`;switch(e){case"millisecond":return Mv(i(".%L"),i(":%M:%S"),s);case"second":return Mv(i(":%S"),i("%-I:%M"),s);case"minute":return Mv(i("%-I:%M"),i("%p"),s);case"hour":return Mv(i("%-I %p"),i("%b %-d"),s);case"day":return Mv(i("%-d"),i("%b"),s);case"month":return Mv(i("%b"),i("%Y"),s);case"year":return i("%Y")}throw Error("unable to format time ticks")}function Mv(e,t,r){return(n,i,s)=>{let o=e(n,i),a=t(n,i),l=i-Mn(s);return i!==l&&void 0!==s[l]&&a===t(s[l],l)?o:r(o,a)}}let Mx=Object.getPrototypeOf(Uint8Array),Mw=Object.prototype.toString;function Mk(e){return e instanceof Array||e instanceof Mx}function MO(e){var t;return e instanceof Mx&&!((t=e)instanceof BigInt64Array||t instanceof BigUint64Array)}function MS(e){var t;return(null==e?void 0:e.prototype)instanceof Mx&&(t=e)!==BigInt64Array&&t!==BigUint64Array}let MC=Symbol("reindex");function MT(e,t,r){var n,i;let s=typeof t;return"string"===s?EM(e)?ME(e.getChild(t),r):MA(e,Mj(t),r):"function"===s?MA(e,t,r):"number"===s||t instanceof Date||"boolean"===s?MK(e,MB(t),r):"function"==typeof(null==t?void 0:t.transform)?MM(t.transform(e),r):(n=MM(t,r),i=null==e?void 0:e[MC],null!=n&&i?Ee(n,i):n)}function MA(e,t,r){return MK(e,MS(r)?(e,r)=>MQ(t(e,r)):t,r)}function MM(e,t){return void 0===t?MZ(e):EE(e)?ME(e,t):e instanceof t?e:t.from(e,MS(t)&&!MO(e)?MQ:void 0)}function ME(e,t){var r;return null==e?e:(void 0===t||t===Array)&&(r=e.type)&&(8===r.typeId||10===r.typeId)&&1===r.unit?MV(MN(e)):MM(MN(e),t)}function MN(e){return e.nullCount?e.toJSON():e.toArray()}let M_=[null],Mj=e=>t=>{var r;let n=t[e];return void 0===n&&"Feature"===t.type?null==(r=t.properties)?void 0:r[e]:n},MD={transform:M9},MR={transform:e=>e},MP=()=>1,MI=()=>!0,Mz=e=>null==e?e:`${e}`,ML=e=>null==e?e:+e,Mq=e=>e?e[0]:void 0,M$=e=>e?e[1]:void 0,MB=e=>()=>e;function MF(e){return MO(e)?e:MK(e,MQ,Float64Array)}function MQ(e){return null==e?NaN:Number(e)}function MV(e){return MK(e,MH)}function MH(e){return e instanceof Date&&!isNaN(e)?e:"string"==typeof e?Mr(e):null==e||isNaN(e=Number(e))?void 0:new Date(e)}function MW(e,t){return void 0===e&&(e=t),null===e?[void 0,"none"]:Ex(e)?[void 0,e]:[e,void 0]}function MU(e,t){return void 0===e&&(e=t),null===e||"number"==typeof e?[void 0,e]:[e,void 0]}function MG(e,t,r){if(null!=e)return MX(e,t,r)}function MX(e,t,r){let n=`${e}`.toLowerCase();if(!r.includes(n))throw Error(`invalid ${t}: ${e}`);return n}function MY(e){return EM(e)?e:MZ(e)}function MZ(e){if(null==e||Mk(e))return e;if(EE(e))return ME(e);if(MJ(e))switch(e.type){case"FeatureCollection":return e.features;case"GeometryCollection":return e.geometries;default:return[e]}return Array.from(e)}function MJ(e){switch(null==e?void 0:e.type){case"FeatureCollection":case"GeometryCollection":case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":return!0;default:return!1}}function MK(e,t,r=Array){return null==e?e:e instanceof r?e.map(t):r.from(e,t)}function M0(e,t=Array){return e instanceof t?e.slice():t.from(e)}function M1({y:e,y1:t,y2:r}){return void 0!==e||void 0!==t||void 0!==r}function M2(e){return(null==e?void 0:e.toString)===Mw}function M4(e){return M2(e)&&(void 0!==e.type||void 0!==e.domain)}function M5(e){return M2(e)&&"function"!=typeof e.transform}function M3(e){return M5(e)&&void 0===e.value&&void 0===e.channel}function M6(e,t){return void 0===e&&void 0===t?[Mq,M$]:[e,t]}function M7({z:e,fill:t,stroke:r}={}){return void 0===e&&([e]=MW(t)),void 0===e&&([e]=MW(r)),e}function M8(e){return Mk(e)?e.length:null==e?void 0:e.numRows}function M9(e){let t=M8(e),r=new Uint32Array(t);for(let e=0;e<t;++e)r[e]=e;return r}function Ee(e,t){return Mk(e)?MK(t,t=>e[t],e.constructor):MK(t,t=>e.at(t))}function Et(e){return null!==e&&"object"==typeof e?e.valueOf():e}function Er(e){let t;return[{transform:()=>t,label:Ei(e)},e=>t=e]}function En(e){return null==e?[e]:Er(e)}function Ei(e,t){return"string"==typeof e?e:e&&void 0!==e.label?e.label:t}function Es(e,t){return{transform(r){let n=e.transform(r),i=t.transform(r);return Em(n)||Em(i)?MK(n,(e,t)=>new Date((+n[t]+ +i[t])/2)):MK(n,(e,t)=>(+n[t]+ +i[t])/2,Float64Array)},label:e.label}}function Eo(e,t){let r=Ea(null==t?void 0:t.interval,null==t?void 0:t.type);return r?MK(e,r):e}function Ea(e,t){let r=El(e,t);return r&&(e=>A4(e)?r.floor(e):e)}function El(e,t){if(null!=e){if("number"==typeof e)return function(e){0<(e*=1)&&e<1&&Number.isInteger(1/e)&&(e=-1/e);let t=Math.abs(e);return e<0?{floor:e=>Math.floor(e*t)/t,offset:(e,r=1)=>(e*t+Math.floor(r))/t,range:(e,r)=>(0,T.A)(Math.ceil(e*t),r*t).map(e=>e/t)}:{floor:e=>Math.floor(e/t)*t,offset:(e,r=1)=>e+t*Math.floor(r),range:(e,r)=>(0,T.A)(Math.ceil(e/t),r/t).map(e=>e*t)}}(e);if("string"==typeof e)return("time"===t?Mp:Mm)(e);if("function"!=typeof e.floor)throw Error("invalid interval; missing floor method");if("function"!=typeof e.offset)throw Error("invalid interval; missing offset method");return e}}function Ec(e,t){if((e=El(e,t))&&"function"!=typeof e.range)throw Error("invalid interval: missing range method");return e}function Eh(e){return"function"==typeof(null==e?void 0:e.range)}function Eu(e){return void 0===e||M5(e)?e:{value:e}}function Ed(e){return e&&"function"==typeof e[Symbol.iterator]}function Ef(e){for(let t of e)if(null!=t)return"object"!=typeof t||t instanceof Date}function Ep(e){for(let t of e){if(null==t)continue;let e=typeof t;return"string"===e||"boolean"===e}}function Em(e){for(let t of e)if(null!=t)return t instanceof Date}function Eg(e){for(let t of e)if(null!=t)return"string"==typeof t&&isNaN(t)&&Mr(t)}function Ey(e){for(let t of e)if(null!=t){if("string"!=typeof t)return!1;if(t.trim())return!isNaN(t)}}function Eb(e,t){let r;for(let n of e)if(null!=n){if(!t(n))return!1;r=!0}return r}let Ev=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function Ex(e){return"string"==typeof e&&(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||Ev.has(e))}function Ew(e){return"number"==typeof e&&(0<=e&&e<=1||isNaN(e))}function Ek(e){return null==e||EO(e)}function EO(e){return/^\s*none\s*$/i.test(e)}function ES(e,t){return MG(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function EC(e="middle"){return ES(e,"frameAnchor")}function ET(e){return Ed(e)?function(e){console.warn("named iterables are deprecated; please use an object instead");let t=new Set;return Object.fromEntries(Array.from(e,e=>{let{name:r}=e;if(null==r)throw Error("missing name");let n=`${r}`;if("__proto__"===n)throw Error(`illegal name: ${n}`);if(t.has(n))throw Error(`duplicate name: ${n}`);return t.add(n),[r,e]}))}(e):e}function EA(e){return!0===e?e="frame":!1===e?e=null:MJ(e)||null==e||"sphere"!==(e=MX(e,"clip",["frame","sphere"]))||(e={type:"Sphere"}),e}function EM(e){return e&&"function"==typeof e.getChild&&"function"==typeof e.toArray&&e.schema&&Array.isArray(e.schema.fields)}function EE(e){return e&&"function"==typeof e.toArray&&e.type}let EN=Symbol("position"),E_=Symbol("color"),Ej=Symbol("radius"),ED=Symbol("length"),ER=Symbol("opacity"),EP=Symbol("symbol"),EI=Symbol("projection"),Ez=new Map([["x",EN],["y",EN],["fx",EN],["fy",EN],["r",Ej],["color",E_],["opacity",ER],["symbol",EP],["length",ED],["projection",EI]]),EL=2/Math.sqrt(3),Eq=new Map([["asterisk",cg],["circle",cy],["cross",cb],["diamond",cw],["diamond2",ck],["hexagon",{draw(e,t){let r=Math.sqrt(t/Math.PI),n=r*EL,i=n/2;e.moveTo(0,n),e.lineTo(r,i),e.lineTo(r,-i),e.lineTo(0,-n),e.lineTo(-r,-i),e.lineTo(-r,i),e.closePath()}}],["plus",cO],["square",cS],["square2",cC],["star",cE],["times",cL],["triangle",c_],["triangle2",cD],["wye",cz]]);function E$(e){return e&&"function"==typeof e.draw}function EB(e){return!!E$(e)||"string"==typeof e&&Eq.has(e.toLowerCase())}function EF(e){if(null==e||E$(e))return e;let t=Eq.get(`${e}`.toLowerCase());if(t)return t;throw Error(`invalid symbol: ${e}`)}function EQ({filter:e,sort:t,reverse:r,transform:n,initializer:i,...s}={},o){if(void 0===n&&(null!=e&&(n=EU(e)),null==t||M3(t)||(n=EH(n,EX(t))),r&&(n=EH(n,EG))),null!=o&&null!=i)throw Error("transforms cannot be applied after initializers");return{...s,...(null===t||M3(t))&&{sort:t},transform:EH(n,o)}}function EV({filter:e,sort:t,reverse:r,initializer:n,...i}={},s){return void 0===n&&(null!=e&&(n=EU(e)),null==t||M3(t)||(n=EW(n,EX(t))),r&&(n=EW(n,EG))),{...i,...(null===t||M3(t))&&{sort:t},initializer:EW(n,s)}}function EH(e,t){return null==e?null===t?void 0:t:null==t?null===e?void 0:e:function(r,n,i){return{data:r,facets:n}=e.call(this,r,n,i),t.call(this,MY(r),n,i)}}function EW(e,t){return null==e?null===t?void 0:t:null==t?null===e?void 0:e:function(r,n,i,...s){let o,a,l,c,h,u;return{data:a=r,facets:l=n,channels:o}=e.call(this,r,n,i,...s),{data:h=a,facets:u=l,channels:c}=t.call(this,a,l,{...i,...o},...s),{data:h,facets:u,channels:{...o,...c}}}}function EU(e){return(t,r)=>{let n=MT(t,e);return{data:t,facets:r.map(e=>e.filter(e=>n[e]))}}}function EG(e,t){return{data:e,facets:t.map(e=>e.slice().reverse())}}function EX(e){return("function"==typeof e&&1!==e.length?function(e){return(t,r)=>{let n=Mk(t)?(r,n)=>e(t[r],t[n]):(r,n)=>e(t.get(r),t.get(n));return{data:t,facets:r.map(e=>e.slice().sort(n))}}}:function(e){let t,r;({channel:t,value:e,order:r}={...Eu(e)});let n=null==t?void 0:t.startsWith("-");if(n&&(t=t.slice(1)),void 0===r&&(r=n?A3:A5),"function"!=typeof r)switch(`${r}`.toLowerCase()){case"ascending":r=A5;break;case"descending":r=A3;break;default:throw Error(`invalid order: ${r}`)}return(n,i,s)=>{let o;if(void 0===t)o=MT(n,e);else{if(void 0===s)throw Error("channel sort requires an initializer");if(!(o=s[t]))return{};o=o.value}let a=(e,t)=>r(o[e],o[t]);return{data:n,facets:i.map(e=>e.slice().sort(a))}}})(e)}function EY(e,...t){for(let{name:r}of e)if(t.includes(r))return!0;return!1}function EZ(e,t,r=EJ){let n=Object.entries(e);return null!=t.title&&void 0===e.title&&n.push(["title",Nn]),null!=t.href&&void 0===e.href&&n.push(["href",Nr]),n.filter(([,e])=>void 0!==e).map(([e,n])=>null===n?{name:e,initialize(){},scope(){},reduce(){}}:r(e,n,t))}function EJ(e,t,r,n=EK){let i,s;M2(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);let o=n(e,t,r),[a,l]=Er(o.label);return{name:e,output:void 0===i?a:{value:a,scale:i},initialize(e){o.initialize(e),s=l([])},scope(e,t){o.scope(e,t)},reduce(e,t){s.push(o.reduce(e,t))}}}function EK(e,t,r,n=E1){let i,s;let o=function(e,t){if(void 0!==t[e])return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y"}return t[e]}(e,r),a=n(t,o);return{label:Ei(a===Ns?null:o,a.label),initialize(e){i=void 0===o?e:MT(e,o),"data"===a.scope&&(s=a.reduceIndex(M9(e),i))},scope(e,t){a.scope===e&&(s=a.reduceIndex(t,i))},reduce:(e,t)=>null==a.scope?a.reduceIndex(e,i,t):a.reduceIndex(e,i,s,t)}}function E0(e,t){return t?tX(e,e=>t[e]):[[,e]]}function E1(e,t,r=E2){var n,i;if(null==e)return r(e);if("function"==typeof e.reduceIndex)return e;if("function"==typeof e.reduce&&M2(e)){return n=e,console.warn("deprecated reduce interface; implement reduceIndex instead."),{...n,reduceIndex:n.reduce.bind(n)}}if("function"==typeof e){return i=e,{reduceIndex:(e,t,r)=>i(Ee(t,e),r)}}if(/^p\d{2}$/i.test(e))return E9(function(e){let t=+`${e}`.slice(1)/100;return(e,r)=>ro(e,t,r)}(e));switch(`${e}`.toLowerCase()){case"first":return Nr;case"last":return Ni;case"identity":return Nt;case"count":return Ns;case"distinct":return No;case"sum":return null==t?Ns:Na;case"proportion":return Nl(t,"data");case"proportion-facet":return Nl(t,"facet");case"deviation":return E9(tq);case"min":return E9(rr);case"min-index":return E9(rn);case"max":return E9(re);case"max-index":return E9(rt);case"mean":return Ne(M.z);case"median":return Ne(rc);case"variance":return E9(tL);case"mode":return E9(ru)}return r(e)}function E2(e){throw Error(`invalid reduce: ${e}`)}function E4(e,t,r){return EJ(e,t,r,E5)}function E5(e,t,r){return EK(e,t,r,E3)}function E3(e,t){return E1(e,t,E6)}function E6(e){switch(`${e}`.toLowerCase()){case"x":return Nc;case"y":return Nh;case"z":return Nu}throw Error(`invalid group reduce: ${e}`)}function E7(e,t){for(let r in t){let n=t[r];if(void 0!==n&&!e.some(e=>e.name===r))return n}}function E8(e,t,r){if(t){let r=t.output.transform(),n=(e,t)=>A5(r[e],r[t]);e.forEach(e=>e.sort(n))}r&&e.forEach(e=>e.reverse())}function E9(e){return{reduceIndex:(t,r)=>e(t,e=>r[e])}}function Ne(e){return{reduceIndex(t,r){let n=e(t,e=>r[e]);return Em(r)?new Date(n):n}}}let Nt={reduceIndex:(e,t)=>Ee(t,e)},Nr={reduceIndex:(e,t)=>t[e[0]]},Nn={reduceIndex(e,t){let r=tJ(tY(e,e=>e.length,e=>t[e]),M$),n=r.slice(-5).reverse();if(n.length<r.length){let e=r.slice(0,-4);n[4]=[` ${e.length.toLocaleString("en-US")} more`,rd(e,M$)]}return n.map(([e,t])=>`${e} (${t.toLocaleString("en-US")})`).join(`
`)}},Ni={reduceIndex:(e,t)=>t[e[e.length-1]]},Ns={label:"Frequency",reduceIndex:e=>e.length},No={label:"Distinct",reduceIndex(e,t){let r=new tQ;for(let n of e)r.add(t[n]);return r.size}},Na=E9(rd);function Nl(e,t){return null==e?{scope:t,label:"Frequency",reduceIndex:(e,t,r=1)=>e.length/r}:{scope:t,reduceIndex:(e,t,r=1)=>rd(e,e=>t[e])/r}}let Nc={reduceIndex:(e,t,{x:r})=>r},Nh={reduceIndex:(e,t,{y:r})=>r},Nu={reduceIndex:(e,t,{z:r})=>r};function Nd(e,{scale:t,type:r,value:n,filter:i,hint:s,label:o=Ei(n)},a){return void 0===s&&"function"==typeof(null==n?void 0:n.transform)&&(s=n.hint),Nf(a,{scale:t,type:r,value:MT(e,n),label:o,filter:i,hint:s})}function Nf(e,t){let{scale:r,value:n}=t;if(!0===r||"auto"===r)switch(e){case"fill":case"stroke":case"color":t.scale=!0!==r&&Eb(n,Ex)?null:"color",t.defaultScale="color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=!0!==r&&Eb(n,Ew)?null:"opacity",t.defaultScale="opacity";break;case"symbol":!0!==r&&Eb(n,EB)?(t.scale=null,t.value=MK(n,EF)):t.scale="symbol",t.defaultScale="symbol";break;default:t.scale=Ez.has(e)?e:null}else if(!1===r)t.scale=null;else if(null!=r&&!Ez.has(r))throw Error(`unknown scale: ${r}`);return t}function Np(e,t,r){let n=Nm(e,t);return MK(Nm(e,r),(e,t)=>Math.abs(e-n[t]),Float64Array)}function Nm(e,t,r){let n=e[t];if(n||void 0===r||(n=e[r]),n)return n.value;throw Error(`missing channel: ${t}`)}function Ng([e,t],[r,n]){return A5(t,n)||A5(e,r)}function Ny([e,t],[r,n]){return A3(t,n)||A5(e,r)}function Nb(e,t){let r=e[t];if(r){for(;r.source;)r=r.source;return null===r.source?null:r}}let Nv=new Map([["accent",aX],["category10",aG],["dark2",aY],["observable10",aZ],["paired",aJ],["pastel1",aK],["pastel2",a0],["set1",a1],["set2",a2],["set3",a4],["tableau10",a5]]),Nx=new Map([...Nv,["brbg",Nk(a6,a7)],["prgn",Nk(a8,a9)],["piyg",Nk(le,lt)],["puor",Nk(lr,ln)],["rdbu",Nk(li,ls)],["rdgy",Nk(lo,la)],["rdylbu",Nk(ll,lc)],["rdylgn",Nk(lh,lu)],["spectral",Nk(ld,lf)],["burd",NO(li,ls)],["buylrd",NO(ll,lc)],["blues",Nw(lL,lq)],["greens",Nw(l$,lB)],["greys",Nw(lF,lQ)],["oranges",Nw(lG,lX)],["purples",Nw(lV,lH)],["reds",Nw(lW,lU)],["turbo",NS(l6)],["viridis",NS(l8)],["magma",NS(l9)],["inferno",NS(ce)],["plasma",NS(ct)],["cividis",NS(lY)],["cubehelix",NS(lZ)],["warm",NS(lJ)],["cool",NS(lK)],["bugn",Nw(lp,lm)],["bupu",Nw(lg,ly)],["gnbu",Nw(lb,lv)],["orrd",Nw(lx,lw)],["pubu",Nw(lS,lC)],["pubugn",Nw(lk,lO)],["purd",Nw(lT,lA)],["rdpu",Nw(lM,lE)],["ylgn",Nw(lj,lD)],["ylgnbu",Nw(lN,l_)],["ylorbr",Nw(lR,lP)],["ylorrd",Nw(lI,lz)],["rainbow",NC(l1)],["sinebow",NC(l3)]]);function Nw(e,t){return({length:r})=>1===r?[e[3][1]]:2===r?[e[3][1],e[3][2]]:(r=Math.max(3,Math.floor(r)))>9?rV(t,r):e[r]}function Nk(e,t){return({length:r})=>2===r?[e[3][0],e[3][2]]:(r=Math.max(3,Math.floor(r)))>11?rV(t,r):e[r]}function NO(e,t){return({length:r})=>2===r?[e[3][2],e[3][0]]:(r=Math.max(3,Math.floor(r)))>11?rV(e=>t(1-e),r):e[r].slice().reverse()}function NS(e){return({length:t})=>rV(e,Math.max(2,Math.floor(t)))}function NC(e){return({length:t})=>rV(e,Math.floor(t)+1).slice(0,-1)}function NT(e){let t=`${e}`.toLowerCase();if(!Nx.has(t))throw Error(`unknown ordinal scheme: ${t}`);return Nx.get(t)}function NA(e,t){let r=NT(e),n="function"==typeof r?r({length:t}):r;return n.length!==t?n.slice(0,t):n}let NM=new Map([["brbg",a7],["prgn",a9],["piyg",lt],["puor",ln],["rdbu",ls],["rdgy",la],["rdylbu",lc],["rdylgn",lu],["spectral",lf],["burd",e=>ls(1-e)],["buylrd",e=>lc(1-e)],["blues",lq],["greens",lB],["greys",lQ],["purples",lH],["reds",lU],["oranges",lX],["turbo",l6],["viridis",l8],["magma",l9],["inferno",ce],["plasma",ct],["cividis",lY],["cubehelix",lZ],["warm",lJ],["cool",lK],["bugn",lm],["bupu",ly],["gnbu",lv],["orrd",lw],["pubugn",lO],["pubu",lC],["purd",lA],["rdpu",lE],["ylgnbu",l_],["ylgn",lD],["ylorbr",lP],["ylorrd",lz],["rainbow",l1],["sinebow",l3]]);function NE(e){let t=`${e}`.toLowerCase();if(!NM.has(t))throw Error(`unknown quantitative scheme: ${t}`);return NM.get(t)}let NN=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]),N_=e=>t=>e(1-t),Nj=[0,1],ND=new Map([["number",M.k],["rgb",M.l],["hsl",rq],["hcl",r$],["lab",function(e,t){var r=(0,M.q)((e=rC(e)).l,(t=rC(t)).l),n=(0,M.q)(e.a,t.a),i=(0,M.q)(e.b,t.b),s=(0,M.q)(e.opacity,t.opacity);return function(t){return e.l=r(t),e.a=n(t),e.b=i(t),e.opacity=s(t),e+""}}]]);function NR(e){let t=`${e}`.toLowerCase();if(!ND.has(t))throw Error(`unknown interpolator: ${t}`);return ND.get(t)}function NP(e,t,r,{type:n,nice:i,clamp:s,zero:o,domain:a=N$(e,r),unknown:l,round:c,scheme:h,interval:u,range:d=Ez.get(e)===Ej?function(e,t){let r=e.find(({radius:e})=>void 0!==e);if(void 0!==r)return[0,r.radius];let n=ro(e,.5,({value:e})=>void 0===e?NaN:ro(e,.25,A8)),i=t.map(e=>3*Math.sqrt(e/n)),s=30/re(i);return s<1?i.map(e=>e*s):i}(r,a):Ez.get(e)===ED?function(e,t){let r=rc(e,({value:e})=>void 0===e?NaN:rc(e,Math.abs)),n=t.map(e=>12*e/r),i=60/re(n);return i<1?n.map(e=>e*i):n}(r,a):Ez.get(e)===ER?Nj:void 0,interpolate:f=Ez.get(e)===E_?null==h&&void 0!==d?M.l:NE(void 0!==h?h:"cyclical"===n?"rainbow":"turbo"):c?rL:M.k,reverse:p}){var m,g;if(a=NI(a),u=Ec(u,n),("cyclical"===n||"sequential"===n)&&(n="linear"),"function"!=typeof f&&(f=NR(f)),p=!!p,void 0!==d&&a.length!==(d=NI(d)).length){if(1===f.length)throw Error("invalid piecewise interpolator");f=rQ(f,d),d=void 0}if(1===f.length?(p&&(f=N_(f),p=!1),void 0===d&&2===(d=Float64Array.from(a,(e,t)=>t/(a.length-1))).length&&(d=Nj),t.interpolate((d===Nj?MB:NB)(f))):t.interpolate(f),o){let[e,t]=t$(a);(e>0||t<0)&&((Mn(a=M0(a))||1)===Math.sign(e)?a[0]=0:a[a.length-1]=0)}return p&&(a=rf(a)),t.domain(a).unknown(l),i&&(t.nice((m=i,g=n,!0===m?void 0:"number"==typeof m?m:function(e,t){if((e=Ec(e,t))&&"function"!=typeof e.ceil)throw Error("invalid interval: missing ceil method");return e}(m,g))),a=t.domain()),void 0!==d&&t.range(d),s&&t.clamp(s),{type:n,domain:a,range:d,scale:t,interpolate:f,interval:u}}function NI(e){return(e=MZ(e)).length>=2?e:[e[0],e[0]]}function Nz(e,t,{exponent:r=1,...n}){return NP(e,(function e(){var t=s4(s$());return t.copy=function(){return sq(t,e()).exponent(t.exponent())},sM.apply(t,arguments),t})().exponent(r),t,{...n,type:"pow"})}function NL(e,t,{domain:r=[0],unknown:n,scheme:i="rdylbu",interpolate:s,range:o=void 0!==s?rV(s,r.length+1):Ez.get(e)===E_?NA(i,r.length+1):void 0,reverse:a}){let l=Mn(r=MZ(r));if(!isNaN(l)&&!function(e,t){for(let r=1,n=e.length,i=e[0];r<n;++r){let n=(0,T.ab)(i,i=e[r]);if(0!==n&&n!==t)return!1}return!0}(r,l))throw Error(`the ${e} scale has a non-monotonic domain`);return a&&(o=rf(o)),{type:"threshold",scale:(function e(){var t,r=[.5],n=[0,1],i=1;function s(e){return null!=e&&e<=e?n[(0,T.a5)(r,e,0,i)]:t}return s.domain=function(e){return arguments.length?(i=Math.min((r=Array.from(e)).length,n.length-1),s):r.slice()},s.range=function(e){return arguments.length?(n=Array.from(e),i=Math.min(r.length,n.length-1),s):n.slice()},s.invertExtent=function(e){var t=n.indexOf(e);return[r[t-1],r[t]]},s.unknown=function(e){return arguments.length?(t=e,s):t},s.copy=function(){return e().domain(r).range(n).unknown(t)},sM.apply(s,arguments)})(l<0?rf(r):r,void 0===o?[]:o).unknown(n),domain:r,range:o}}function Nq(e,t=A7){return e.length?[rr(e,({value:e})=>void 0===e?e:rr(e,t)),re(e,({value:e})=>void 0===e?e:re(e,t))]:[0,1]}function N$(e,t){let r=Ez.get(e);return(r===Ej||r===ER||r===ED?function(e){return[0,e.length?re(e,({value:e})=>void 0===e?e:re(e,A7)):1]}:Nq)(t)}function NB(e){return(t,r)=>n=>e(t+n*(r-t))}let NF=0,NQ;function NV(e){e!==NQ&&(NQ=e,console.warn(e),++NF)}function NH(e,t,r,n,{type:i,nice:s,clamp:o,domain:a=Nq(n),unknown:l,pivot:c=0,scheme:h,range:u,symmetric:d=!0,interpolate:f=Ez.get(e)===E_?null==h&&void 0!==u?M.l:NE(void 0!==h?h:"rdbu"):M.k,reverse:p}){c*=1;let[m,g]=a=MZ(a);if(a.length>2&&NV(`Warning: the diverging ${e} scale domain contains extra elements.`),0>(0,T.ab)(m,g)&&([m,g]=[g,m],p=!p),m=Math.min(m,c),g=Math.max(g,c),"function"!=typeof f&&(f=NR(f)),void 0!==u&&(f=1===f.length?NB(f)(...u):rQ(f,u)),p&&(f=N_(f)),d){let e=r.apply(c),t=e-r.apply(m),n=r.apply(g)-e;t<n?m=r.invert(e-n):t>n&&(g=r.invert(e+t))}return t.domain([m,c,g]).unknown(l).interpolator(f),o&&t.clamp(o),s&&t.nice(s),{type:i,domain:[m,g],pivot:c,interpolate:f,scale:t}}function NW(e,t,{exponent:r=1,...n}){var i;return NH(e,(function e(){var t=s4(aW());return t.copy=function(){return aH(t,e()).exponent(t.exponent())},sE.apply(t,arguments)})().exponent(r*=1),.5===(i=r)?NX:{apply:e=>Math.sign(e)*Math.pow(Math.abs(e),i),invert:e=>Math.sign(e)*Math.pow(Math.abs(e),1/i)},t,{...n,type:"diverging-pow"})}let NU={apply:e=>e,invert:e=>e},NG={apply:Math.log,invert:Math.exp},NX={apply:e=>Math.sign(e)*Math.sqrt(Math.abs(e)),invert:e=>e*e*Math.sign(e)},NY=Symbol("ordinal");function NZ(e,t,r,{type:n,interval:i,domain:s,range:o,reverse:a,hint:l}){return i=Ec(i,n),void 0===s&&(s=NK(r,i,e)),("categorical"===n||n===NY)&&(n="ordinal"),a&&(s=rf(s)),s=t.domain(s).domain(),void 0!==o&&("function"==typeof o&&(o=o(s)),t.range(o)),{type:n,domain:s,range:o,scale:t,hint:l,interval:i}}function NJ(e,t,r,n){let{round:i}=r;return void 0!==i&&e.round(i=!!i),(e=NZ(n,e,t,r)).round=i,e}function NK(e,t,r){let n=new tQ;for(let{value:t,domain:r}of e){if(void 0!==r)return r();if(void 0!==t)for(let e of t)n.add(e)}if(void 0!==t){let[e,r]=t$(n).map(t.floor,t);return t.range(e,t.offset(r))}if(n.size>1e4&&Ez.get(r)===EN)throw Error(`implicit ordinal domain of ${r} scale has more than 10,000 values`);return tJ(n,A5)}function N0(e,t){let r;for(let{hint:n}of e){let e=null==n?void 0:n[t];if(void 0!==e){if(void 0===r)r=e;else if(r!==e)return}}return r}function N1(e,{label:t,inset:r=0,insetTop:n=r,insetRight:i=r,insetBottom:s=r,insetLeft:o=r,round:a,nice:l,clamp:c,zero:h,align:u,padding:p,projection:m,facet:{label:g=t}={},...y}={}){let b={};for(let[r,v]of e){let e=y[r],x=function(e,t=[],r={}){var n,i,s,o,a;let l=function(e,t,{type:r,domain:n,range:i,scheme:s,pivot:o,projection:a}){var l;if(r=_e(r),"fx"===e||"fy"===e)return"band";for(let n of(("x"===e||"y"===e)&&null!=a&&(r=_t),t)){let e=_e(n.type);if(void 0!==e){if(void 0===r)r=e;else if(r!==e)throw Error(`scale incompatible with channel: ${r} !== ${e}`)}}if(r===_t)return;if(void 0!==r)return r;if(void 0===n&&!t.some(({value:e})=>void 0!==e))return;let c=Ez.get(e);if(c===Ej)return"sqrt";if(c===ER||c===ED)return"linear";if(c===EP)return"ordinal";let h=null==(l=n??i)?void 0:l.length;if(h<2||h>2)return _r(c);if(void 0!==n){if(Ep(n))return _r(c);if(Em(n))return"utc"}else{let e=t.map(({value:e})=>e).filter(e=>void 0!==e);if(e.some(Ep))return _r(c);if(e.some(Em))return"utc"}if(c===E_){if(null!=o||null!=s&&NN.has(`${s}`.toLowerCase()))return"diverging";if(null!=s&&Nv.has(`${s}`.toLowerCase()))return"categorical"}return"linear"}(e,t,r);if(void 0===r.type&&void 0===r.domain&&void 0===r.range&&null==r.interval&&"fx"!==e&&"fy"!==e&&_n({type:l})){let r=t.map(({value:e})=>e).filter(e=>void 0!==e);r.some(Em)?NV(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${N9(l)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${N9(l)}".`):r.some(Eg)?NV(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${N9(l)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${N9(l)}".`):r.some(Ey)&&NV(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${N9(l)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${N9(l)}".`)}switch(r.type=l,l){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":r=_o(t,r,MF);break;case"identity":switch(Ez.get(e)){case EN:r=_o(t,r,MF);break;case EP:r=_o(t,r,_a)}break;case"utc":case"time":r=_o(t,r,MV)}switch(l){case"diverging":return n=r,NH(e,function e(){var t=sB(aW()(sP));return t.copy=function(){return aH(t,e())},sE.apply(t,arguments)}(),NU,t,n);case"diverging-sqrt":return NW(e,t,{...r,exponent:.5});case"diverging-pow":return NW(e,t,r);case"diverging-log":return function(e,t,{base:r=10,pivot:n=1,domain:i=Nq(t,n<0?A9:A8),...s}){return NH(e,(function e(){var t=sY(aW()).domain([.1,1,10]);return t.copy=function(){return aH(t,e()).base(t.base())},sE.apply(t,arguments)})().base(r*=1),NG,t,{domain:i,pivot:n,...s})}(e,t,r);case"diverging-symlog":return function(e,t,{constant:r=1,...n}){return NH(e,(function e(){var t=sK(aW());return t.copy=function(){return aH(t,e()).constant(t.constant())},sE.apply(t,arguments)})().constant(r*=1),function(e){return{apply:t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),invert:t=>Math.sign(t)*Math.expm1(Math.abs(t))*e}}(r),t,n)}(e,t,r);case"categorical":case"ordinal":case NY:return function(e,t,{type:r,interval:n,domain:i,range:s,scheme:o,unknown:a,...l}){let c;if(n=Ec(n,r),void 0===i&&(i=NK(t,n,e)),Ez.get(e)===EP){var h;c={fill:N0(h=t,"fill"),stroke:N0(h,"stroke")},s=void 0===s?Ek(c.fill)?c$:cq:MK(s,EF)}else if(Ez.get(e)===E_&&(void 0===s&&("ordinal"===r||r===NY)&&void 0!==(s=function(e,t="greys"){let r=new Set,[n,i]=NA(t,2);for(let t of e)if(null!=t){if(!0===t)r.add(i);else{if(!1!==t)return;r.add(n)}}return[...r]}(i,o))&&(o=void 0),void 0===o&&void 0===s&&(o="ordinal"===r?"turbo":"observable10"),void 0!==o)){if(void 0!==s){let e=NE(o),t=s[0],r=s[1]-s[0];s=({length:n})=>rV(n=>e(t+r*n),n)}else s=NT(o)}if(a===sN)throw Error(`implicit unknown on ${e} scale is not supported`);return NZ(e,s_().unknown(a),t,{...l,type:r,domain:i,range:s,hint:c})}(e,t,r);case"cyclical":case"sequential":case"linear":return i=r,NP(e,sF(),t,i);case"sqrt":return Nz(e,t,{...r,exponent:.5});case"threshold":return NL(e,t,r);case"quantile":return function(e,t,{range:r,quantiles:n=void 0===r?5:(r=[...r]).length,n:i=n,scheme:s="rdylbu",domain:o=function(e){let t=[];for(let{value:r}of e)if(void 0!==r)for(let e of r)t.push(e);return t}(t),unknown:a,interpolate:l,reverse:c}){return void 0===r&&(r=void 0!==l?rV(l,i):Ez.get(e)===E_?NA(s,i):void 0),o.length>0&&(o=(function e(){var t,r=[],n=[],i=[];function s(){var e=0,t=Math.max(1,n.length);for(i=Array(t-1);++e<t;)i[e-1]=function(e,t,r=T.a3){if(!(!(n=e.length)||isNaN(t*=1))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,s=Math.floor(i),o=+r(e[s],s,e);return o+(+r(e[s+1],s+1,e)-o)*(i-s)}}(r,e/t);return o}function o(e){return null==e||isNaN(e*=1)?t:n[(0,T.a5)(i,e)]}return o.invertExtent=function(e){var t=n.indexOf(e);return t<0?[NaN,NaN]:[t>0?i[t-1]:r[0],t<i.length?i[t]:r[r.length-1]]},o.domain=function(e){if(!arguments.length)return r.slice();for(let t of(r=[],e))null==t||isNaN(t*=1)||r.push(t);return r.sort(T.a2),s()},o.range=function(e){return arguments.length?(n=Array.from(e),s()):n.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return i.slice()},o.copy=function(){return e().domain(r).range(n).unknown(t)},sM.apply(o,arguments)})(o,void 0===r?{length:i}:r).quantiles()),NL(e,t,{domain:o,range:r,reverse:c,unknown:a})}(e,t,r);case"quantize":return function(e,t,{range:r,n:n=void 0===r?5:(r=[...r]).length,scheme:i="rdylbu",domain:s=N$(e,t),unknown:o,interpolate:a,reverse:l}){let c;let[h,u]=t$(s);return void 0===r?((c=t6(h,u,n))[0]<=h&&c.splice(0,1),c[c.length-1]>=u&&c.pop(),n=c.length+1,r=void 0!==a?rV(a,n):Ez.get(e)===E_?NA(i,n):void 0):(c=rV((0,M.k)(h,u),n+1).slice(1,-1),h instanceof Date&&(c=c.map(e=>new Date(e)))),0>Mn(MZ(s))&&c.reverse(),NL(e,t,{domain:c,range:r,reverse:l,unknown:o})}(e,t,r);case"pow":return Nz(e,t,r);case"log":return function(e,t,{base:r=10,domain:n=function(e){for(let{value:t}of e)if(void 0!==t)for(let r of t){if(r>0)return Nq(e,A8);if(r<0)return Nq(e,A9)}return[1,10]}(t),...i}){return NP(e,(function e(){let t=sY(s$()).domain([1,10]);return t.copy=()=>sq(t,e()).base(t.base()),sM.apply(t,arguments),t})().base(r),t,{...i,domain:n})}(e,t,r);case"symlog":return function(e,t,{constant:r=1,...n}){return NP(e,(function e(){var t=sK(s$());return t.copy=function(){return sq(t,e()).constant(t.constant())},sM.apply(t,arguments)})().constant(r),t,n)}(e,t,r);case"utc":return s=r,NP(e,function(){return sM.apply(aV(oM,oE,oT,oS,og,oi,or,oe,s8,f).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}(),t,s);case"time":return o=r,NP(e,function(){return sM.apply(aV(oN,o_,oC,oO,ol,on,ot,s9,s8,d).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}(),t,o);case"point":return function(e,t,{align:r=.5,padding:n=.5,...i}){return NJ((function(){return function e(t){var r=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return e(r())},t}(sj.apply(null,arguments).paddingInner(1))})().align(r).padding(n),t,i,e)}(e,t,r);case"band":return function(e,t,{align:r=.5,padding:n=.1,paddingInner:i=n,paddingOuter:s="fx"===e||"fy"===e?0:n,...o}){return NJ(sj().align(r).paddingInner(i).paddingOuter(s),t,o,e)}(e,t,r);case"identity":return{type:"identity",scale:(a=Ez.get(e))===EN||a===Ej||a===ED||a===ER?function e(t){var r;function n(e){return null==e||isNaN(e*=1)?r:e}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,sD),n):t.slice()},n.unknown=function(e){return arguments.length?(r=e,n):r},n.copy=function(){return e(t).unknown(r)},t=arguments.length?Array.from(t,sD):[0,1],sB(n)}():e=>e};case void 0:return;default:throw Error(`unknown scale type: ${l}`)}}(r,v,{round:Ez.get(r)===EN?a:void 0,nice:l,clamp:c,zero:h,align:u,padding:p,projection:m,...e});if(x){let{label:a="fx"===r||"fy"===r?g:t,percent:l,transform:c,inset:h,insetTop:u=void 0!==h?h:"y"===r?n:0,insetRight:d=void 0!==h?h:"x"===r?i:0,insetBottom:f=void 0!==h?h:"y"===r?s:0,insetLeft:p=void 0!==h?h:"x"===r?o:0}=e||{};if(null==c)c=void 0;else if("function"!=typeof c)throw Error("invalid scale transform; not a function");x.percent=!!l,x.label=void 0===a?function(e=[],t){let r;for(let{label:t}of e)if(void 0!==t){if(void 0===r)r=t;else if(r!==t)return}if(void 0!==r)return!_n(t)&&t.percent&&(r=`${r} (%)`),{inferred:!0,toString:()=>r}}(v,x):a,x.transform=c,"x"===r||"fx"===r?(x.insetLeft=+p,x.insetRight=+d):("y"===r||"fy"===r)&&(x.insetTop=+u,x.insetBottom=+f),b[r]=x}}return b}function N2(e){let t={},r={scales:t};for(let[n,i]of Object.entries(e)){let{scale:e,type:s,interval:o,label:a}=i;t[n]=function({scale:e,type:t,domain:r,range:n,interpolate:i,interval:s,transform:o,percent:a,pivot:l}){if("identity"===t)return{type:"identity",apply:e=>e,invert:e=>e};let c=e.unknown?e.unknown():void 0;return{type:t,domain:M0(r),...void 0!==n&&{range:M0(n)},...void 0!==o&&{transform:o},...a&&{percent:a},...void 0!==c&&{unknown:c},...void 0!==s&&{interval:s},...void 0!==i&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...void 0!==l&&{pivot:l,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:t=>e(t),...e.invert&&{invert:t=>e.invert(t)}}}(i),r[n]=e,e.type=s,null!=o&&(e.interval=o),null!=a&&(e.label=a)}return r}function N4(e){let{marginTop:t,marginRight:r,marginBottom:n,marginLeft:i,width:s,height:o,facet:{marginTop:a,marginRight:l,marginBottom:c,marginLeft:h}}=e;return{marginTop:Math.max(t,a),marginRight:Math.max(r,l),marginBottom:Math.max(n,c),marginLeft:Math.max(i,h),width:s,height:o}}function N5({fx:e,fy:t},r){let{marginTop:n,marginRight:i,marginBottom:s,marginLeft:o,width:a,height:l}=N4(r);return{marginTop:n,marginRight:i,marginBottom:s,marginLeft:o,width:e?e.scale.bandwidth()+o+i:a,height:t?t.scale.bandwidth()+n+s:l,facet:{width:a,height:l}}}function N3(e,t){if(void 0===e.range){let{insetLeft:r,insetRight:n}=e,{width:i,marginLeft:s=0,marginRight:o=0}=t,a=s+r;e.range=[a,Math.max(a,i-o-n)],_n(e)||(e.range=N8(e)),e.scale.range(e.range)}N7(e)}function N6(e,t){if(void 0===e.range){let{insetTop:r,insetBottom:n}=e,{height:i,marginTop:s=0,marginBottom:o=0}=t,a=s+r;e.range=[Math.max(a,i-o-n),a],_n(e)?e.range.reverse():e.range=N8(e),e.scale.range(e.range)}N7(e)}function N7(e){void 0===e.round&&function({type:e}){return"point"===e||"band"===e}(e)&&30>=function({scale:e}){let t=e.domain().length,[r,n]=e.range(),i=e.paddingInner?e.paddingInner():1,s=e.paddingOuter?e.paddingOuter():e.padding(),o=t-i,a=Math.abs(n-r)/Math.max(1,o+2*s);return(a-Math.floor(a))*o}(e)&&e.scale.round(!0)}function N8(e){let t=e.scale.domain().length+_i(e);if(!(t>2))return e.range;let[r,n]=e.range;return Array.from({length:t},(e,i)=>r+i/(t-1)*(n-r))}function N9(e){return"symbol"==typeof e?e.description:e}function _e(e){return"string"==typeof e?`${e}`.toLowerCase():e}let _t={toString:()=>"projection"};function _r(e){switch(e){case EN:return"point";case E_:return NY;default:return"ordinal"}}function _n({type:e}){return"ordinal"===e||"point"===e||"band"===e||e===NY}function _i({type:e}){return"threshold"===e}function _s(e){if(void 0===e)return!0;let t=e.domain(),r=e(t[0]);for(let n=1,i=t.length;n<i;++n)if(e(t[n])-r)return!1;return!0}function _o(e,{domain:t,...r},n){var i;for(let r of e)void 0!==r.value&&(void 0===t&&(t=null==(i=r.value)?void 0:i.domain),r.value=n(r.value));return{domain:void 0===t?t:n(t),...r}}function _a(e){return MK(e,EF)}function _l(e,{fx:t,fy:r}){let n=M9(e),i=null==t?void 0:t.value,s=null==r?void 0:r.value;return t&&r?tY(n,e=>(e.fx=i[e[0]],e.fy=s[e[0]],e),e=>i[e],e=>s[e]):t?tY(n,e=>(e.fx=i[e[0]],e),e=>i[e]):tY(n,e=>(e.fy=s[e[0]],e),e=>s[e])}let _c=new Map([["top",_p],["right",_y],["bottom",_m],["left",_g],["top-left",_b(_p,_g)],["top-right",_b(_p,_y)],["bottom-left",_b(_m,_g)],["bottom-right",_b(_m,_y)],["top-empty",function(e,{y:t},{x:r,y:n,empty:i}){if(i)return!1;if(!t)return;let s=_d(t,n);if(s>0)return _f(e,r,t[s-1])}],["right-empty",function(e,{x:t},{x:r,y:n,empty:i}){if(i)return!1;if(!t)return;let s=_d(t,r);if(s<t.length-1)return _f(e,t[s+1],n)}],["bottom-empty",function(e,{y:t},{x:r,y:n,empty:i}){if(i)return!1;if(!t)return;let s=_d(t,n);if(s<t.length-1)return _f(e,r,t[s+1])}],["left-empty",function(e,{x:t},{x:r,y:n,empty:i}){if(i)return!1;if(!t)return;let s=_d(t,r);if(s>0)return _f(e,t[s-1],n)}],["empty",function(e,t,{empty:r}){return r}]]),_h=new WeakMap;function _u(e){let t=_h.get(e);return t||_h.set(e,t=new tF(MK(e,(e,t)=>[e,t]))),t}function _d(e,t){return _u(e).get(t)}function _f(e,t,r){var n,i,s;return null==(i=t,s=r,i=Et(i),s=Et(s),n=e.find(e=>Object.is(Et(e.x),i)&&Object.is(Et(e.y),s)))?void 0:n.empty}function _p(e,{y:t},{y:r}){return!t||0===_d(t,r)}function _m(e,{y:t},{y:r}){return!t||_d(t,r)===t.length-1}function _g(e,{x:t},{x:r}){return!t||0===_d(t,r)}function _y(e,{x:t},{x:r}){return!t||_d(t,r)===t.length-1}function _b(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function _v(e,{channels:{fx:t,fy:r},groups:n}){return t&&r?e.map(({x:e,y:t})=>{var r;return(null==(r=n.get(e))?void 0:r.get(t))??[]}):t?e.map(({x:e})=>n.get(e)??[]):e.map(({y:e})=>n.get(e)??[])}let _x=Math.PI,_w=2*_x;function _k(e){switch(`${e}`.toLowerCase()){case"albers-usa":return _O(se,.7463,.4673);case"albers":return _S(i9,.7463,.4673);case"azimuthal-equal-area":return _O(si,4,4);case"azimuthal-equidistant":return _O(so,_w,_w);case"conic-conformal":return _S(sd,_w,_w);case"conic-equal-area":return _S(i8,6.1702,2.9781);case"conic-equidistant":return _S(sg,7.312,3.6282);case"equal-earth":return _O(sv,5.4133,2.6347);case"equirectangular":return _O(sp,_w,_x);case"gnomonic":return _O(sw,3.4641,3.4641);case"identity":return{type:_C};case"reflect-y":return{type:_T};case"mercator":return _O(sl,_w,_w);case"orthographic":return _O(sO,2,2);case"stereographic":return _O(sC,2,2);case"transverse-mercator":return _O(sA,_w,_w);default:throw Error(`unknown projection type: ${e}`)}}function _O(e,t,r){return{type:({width:n,height:i,rotate:s,precision:o=.15,clip:a})=>{var l,c,h;let u=e();return null!=o&&(null==(l=u.precision)||l.call(u,o)),null!=s&&(null==(c=u.rotate)||c.call(u,s)),"number"==typeof a&&(null==(h=u.clipAngle)||h.call(u,a)),null!=n&&(u.scale(Math.min(n/t,i/r)),u.translate([n/2,i/2])),u},aspectRatio:r/t}}function _S(e,t,r){let{type:n,aspectRatio:i}=_O(e,t,r);return{type:e=>{let{parallels:t,domain:r,width:i,height:s}=e,o=n(e);return null!=t&&(o.parallels(t),void 0===r&&null!=i&&o.fitSize([i,s],{type:"Sphere"})),o},aspectRatio:i}}let _C=MB({stream:e=>e}),_T=MB(iW({point(e,t){this.stream.point(e,-t)}}));function _A(e={}){let{document:t="u">typeof window?window.document:void 0,clip:r}=e;return{document:t,clip:EA(r)}}function _M(e,{document:t}){return ry((0,M.A)(e).call(t.documentElement))}let _E=Symbol("unset");function _N(e){return(1===e.length?function(e){let t,r=_E;return n=>(Object.is(r,n)||(r=n,t=e(n)),t)}:function(e){let t,r;return(...n)=>(((null==r?void 0:r.length)!==n.length||r.some((e,t)=>!Object.is(e,n[t])))&&(r=n,t=e(...n)),t)})(e)}let __=_N(e=>new Intl.NumberFormat(e));_N((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{month:t}})),_N((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{weekday:t}}));let _j=function(e="en-US"){let t=function(e="en-US"){let t=__(e);return e=>null==e||isNaN(e)?void 0:t.format(e)}(e);return e=>(e instanceof Date?function(e){return function(e,t){var r;if(e instanceof Date||(e=new Date(+e)),isNaN(e))return t;let n=e.getUTCHours(),i=e.getUTCMinutes(),s=e.getUTCSeconds(),o=e.getUTCMilliseconds();return`${(r=e.getUTCFullYear())<0?`-${Me(-r,6)}`:r>9999?`+${Me(r,6)}`:Me(r,4)}-${Me(e.getUTCMonth()+1,2)}-${Me(e.getUTCDate(),2)}${n||i||s||o?`T${Me(n,2)}:${Me(i,2)}${s||o?`:${Me(s,2)}${o?`.${Me(o,3)}`:""}`:""}Z`:""}`}(e,"Invalid Date")}:"number"==typeof e?t:Mz)(e)}(),_D=.5*("u">typeof window?!(window.devicePixelRatio>1):!(typeof it>"u")),_R=0;function _P(){return`plot-clip-${++_R}`}function _I(e,t){t&&e.text(e=>_j(t[e]))}function _z(e,t){t&&e.text(([e])=>_j(t[e]))}function _L(e,{target:t,tip:r},{ariaLabel:n,title:i,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:h,href:u}){n&&_W(e,"aria-label",e=>n[e]),s&&_W(e,"fill",e=>s[e]),o&&_W(e,"fill-opacity",e=>o[e]),a&&_W(e,"stroke",e=>a[e]),l&&_W(e,"stroke-opacity",e=>l[e]),c&&_W(e,"stroke-width",e=>c[e]),h&&_W(e,"opacity",e=>h[e]),u&&_H(e,e=>u[e],t),r||i&&e.filter(e=>A6(i[e])).append("title").call(_I,i)}function _q(e,{target:t,tip:r},{ariaLabel:n,title:i,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:h,href:u}){n&&_W(e,"aria-label",([e])=>n[e]),s&&_W(e,"fill",([e])=>s[e]),o&&_W(e,"fill-opacity",([e])=>o[e]),a&&_W(e,"stroke",([e])=>a[e]),l&&_W(e,"stroke-opacity",([e])=>l[e]),c&&_W(e,"stroke-width",([e])=>c[e]),h&&_W(e,"opacity",([e])=>h[e]),u&&_H(e,([e])=>u[e],t),r||i&&e.filter(([e])=>A6(i[e])).append("title").call(_z,i)}let _$=function(e){let t=new WeakMap;return(r,n)=>{let i=t.get(r);if(!i){let s=_P();ry(r.ownerSVGElement).append("clipPath").attr("id",s).call(e,r,n),t.set(r,i=`url(#${s})`)}return i}}((e,t,r)=>{let{width:n,height:i,marginLeft:s,marginRight:o,marginTop:a,marginBottom:l}=r;e.append("rect").attr("x",s).attr("y",a).attr("width",n-o-s).attr("height",i-a-l)}),_B=new WeakMap,_F={type:"Sphere"};function _Q(e,t,r,n){(function(e,t,r,n){let i;let{clip:s=n.clip}=t;"frame"===s?(e=_M("svg:g",n).each(function(){this.appendChild(e.node()),e.node=()=>this}),i=_$(n,r)):s&&(i=function(e,t){let r,n;if((r=_B.get(t))||_B.set(t,r=new WeakMap),"Sphere"===e.type&&(e=_F),!(n=r.get(e))){let i=_P();ry(t.ownerSVGElement).append("clipPath").attr("id",i).append("path").attr("d",t.path()(e)),r.set(e,n=`url(#${i})`)}return n}(s,n)),_W(e,"aria-label",t.ariaLabel),_W(e,"aria-description",t.ariaDescription),_W(e,"aria-hidden",t.ariaHidden),_W(e,"clip-path",i)})(e,t,r,n),_W(e,"class",t.className),_W(e,"fill",t.fill),_W(e,"fill-opacity",t.fillOpacity),_W(e,"stroke",t.stroke),_W(e,"stroke-width",t.strokeWidth),_W(e,"stroke-opacity",t.strokeOpacity),_W(e,"stroke-linejoin",t.strokeLinejoin),_W(e,"stroke-linecap",t.strokeLinecap),_W(e,"stroke-miterlimit",t.strokeMiterlimit),_W(e,"stroke-dasharray",t.strokeDasharray),_W(e,"stroke-dashoffset",t.strokeDashoffset),_W(e,"shape-rendering",t.shapeRendering),_W(e,"filter",t.imageFilter),_W(e,"paint-order",t.paintOrder);let{pointerEvents:i=!1===n.pointerSticky?"none":void 0}=t;_W(e,"pointer-events",i)}function _V(e,t){var r,n,i;r=e,n="mix-blend-mode",null!=(i=t.mixBlendMode)&&r.style(n,i),_W(e,"opacity",t.opacity)}function _H(e,t,r){e.each(function(e){let n=t(e);if(null!=n){let e=this.ownerDocument.createElementNS(M.B.svg,"a");e.setAttribute("fill","inherit"),e.setAttributeNS(M.B.xlink,"href",n),null!=r&&e.setAttribute("target",r),this.parentNode.insertBefore(e,this).appendChild(this)}})}function _W(e,t,r){null!=r&&e.attr(t,r)}function _U(e,t,{x:r,y:n},i=_D,s=_D){i+=t.dx,s+=t.dy,null!=r&&r.bandwidth&&(i+=r.bandwidth()/2),null!=n&&n.bandwidth&&(s+=n.bandwidth()/2),(i||s)&&e.attr("transform",`translate(${i},${s})`)}function _G(e,t){if((e=Mz(e))!==t)return e}function _X(e,t){if((e=ML(e))!==t)return e}let _Y=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function _Z(e){if(void 0===e)return"plot-d6a7b5";if(e=`${e}`,!_Y.test(e))throw Error(`invalid class name: ${e}`);return e}function _J(e,t){if("string"==typeof t)e.property("style",t);else if(null!=t)for(let r of e)Object.assign(r.style,t)}function _K({frameAnchor:e},{width:t,height:r,marginTop:n,marginRight:i,marginBottom:s,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-i:(o+t-i)/2,/^top/.test(e)?n:/^bottom/.test(e)?r-s:(n+r-s)/2]}let _0=class{constructor(e,t={},r={},n){let{facet:i="auto",facetAnchor:s,fx:o,fy:a,sort:l,dx:c=0,dy:h=0,margin:u=0,marginTop:d=u,marginRight:f=u,marginBottom:p=u,marginLeft:m=u,className:g,clip:y=null==n?void 0:n.clip,channels:b,tip:v,render:x}=r;if(this.data=e,this.sort=M3(l)?l:null,this.initializer=EV(r).initializer,this.transform=this.initializer?r.transform:EQ(r).transform,null===i||!1===i?this.facet=null:(this.facet=MX(!0===i?"include":i,"facet",["auto","include","exclude","super"]),this.fx=e===M_&&"string"==typeof o?[o]:o,this.fy=e===M_&&"string"==typeof a?[a]:a),this.facetAnchor=function(e){if(null==e)return null;let t=_c.get(`${e}`.toLowerCase());if(t)return t;throw Error(`invalid facet anchor: ${e}`)}(s),t=ET(t),void 0!==b&&(t={...Object.fromEntries(Object.entries(ET(b)).map(([e,t])=>(void 0===(t="string"==typeof t?{value:t,label:e}:Eu(t)).filter&&null==t.scale&&(t={...t,filter:null}),[e,t]))),...t}),void 0!==n&&(t={...function(e,{title:t,href:r,ariaLabel:n,ariaDescription:i,ariaHidden:s,target:o,fill:a,fillOpacity:l,stroke:c,strokeWidth:h,strokeOpacity:u,strokeLinejoin:d,strokeLinecap:f,strokeMiterlimit:p,strokeDasharray:m,strokeDashoffset:g,opacity:y,mixBlendMode:b,imageFilter:v,paintOrder:x,pointerEvents:w,shapeRendering:k,channels:O},{ariaLabel:S,fill:C="currentColor",fillOpacity:T,stroke:A="none",strokeOpacity:M,strokeWidth:E,strokeLinecap:N,strokeLinejoin:_,strokeMiterlimit:j,paintOrder:D}){var R;null===C&&(a=null,l=null),null===A&&(c=null,u=null),Ek(C)?Ek(A)||Ek(a)&&(null==O||!O.fill)||(A="none"):Ek(A)&&(!Ek(c)||null!=O&&O.stroke)&&(C="none");let[P,I]=MW(a,C),[z,L]=MU(l,T),[q,$]=MW(c,A),[B,F]=MU(u,M),[Q,V]=MU(y);EO($)||(void 0===h&&(h=E),void 0===f&&(f=N),void 0===d&&(d=_),void 0!==p||(R=d,/^\s*round\s*$/i.test(R))||(p=j),EO(I)||void 0!==x||(x=D));let[W,U]=MU(h);return null!==C&&(e.fill=_G(I,"currentColor"),e.fillOpacity=_X(L,1)),null!==A&&(e.stroke=_G($,"none"),e.strokeWidth=_X(U,1),e.strokeOpacity=_X(F,1),e.strokeLinejoin=_G(d,"miter"),e.strokeLinecap=_G(f,"butt"),e.strokeMiterlimit=_X(p,4),e.strokeDasharray=_G(m,"none"),e.strokeDashoffset=_G(g,"0")),e.target=Mz(o),e.ariaLabel=Mz(S),e.ariaDescription=Mz(i),e.ariaHidden=Mz(s),e.opacity=_X(V,1),e.mixBlendMode=_G(b,"normal"),e.imageFilter=_G(v,"none"),e.paintOrder=_G(x,"normal"),e.pointerEvents=_G(w,"auto"),e.shapeRendering=_G(k,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:r,optional:!0,filter:null},ariaLabel:{value:n,optional:!0,filter:null},fill:{value:P,scale:"auto",optional:!0},fillOpacity:{value:z,scale:"auto",optional:!0},stroke:{value:q,scale:"auto",optional:!0},strokeOpacity:{value:B,scale:"auto",optional:!0},strokeWidth:{value:W,optional:!0},opacity:{value:Q,scale:"auto",optional:!0}}}(this,r,n),...t}),this.channels=Object.fromEntries(Object.entries(t).map(([t,r])=>{if(M5(r.value)){let{value:e,label:t=r.label,scale:n=r.scale}=r.value;r={...r,label:t,scale:n,value:e}}if(e===M_&&"string"==typeof r.value){let{value:e}=r;r={...r,value:[e]}}return[t,r]}).filter(([e,{value:t,optional:r}])=>{if(null!=t)return!0;if(r)return!1;throw Error(`missing channel value: ${e}`)})),this.dx=+c,this.dy=+h,this.marginTop=+d,this.marginRight=+f,this.marginBottom=+p,this.marginLeft=+m,this.clip=EA(y),this.tip=function(e){return!0===e?"xy":!1===e||null==e?null:"string"==typeof e?MX(e,"tip",["x","y","xy"]):e}(v),this.className=Mz(g),"super"===this.facet){if(o||a)throw Error("super-faceting cannot use fx or fy");for(let e in this.channels){let{scale:r}=t[e];if("x"===r||"y"===r)throw Error("super-faceting cannot use x or y")}}null!=x&&(this.render=_2(x,this.render))}initialize(e,t,r){var n,i;let s=MY(this.data);void 0===e&&null!=s&&(e=[M9(s)]);let o=e;null!=this.transform&&({facets:e,data:s}=this.transform(s,e,r),s=MY(s)),void 0!==e&&(e.original=o);let a=(n=this.channels,i=s,Object.fromEntries(Object.entries(n).map(([e,t])=>[e,Nd(i,t,e)])));return null!=this.sort&&function(e,t,r,n,i){let{order:s,reverse:o,reduce:a=!0,limit:l}=i;for(let c in i){if(!Ez.has(c))continue;let{value:h,order:u=s,reverse:d=o,reduce:f=a,limit:p=l}=Eu(i[c]),m=null==h?void 0:h.startsWith("-");if(m&&(h=h.slice(1)),u=void 0===u?m!==("width"===h||"height"===h)?Ny:Ng:function(e){if(null==e||"function"==typeof e)return e;switch(`${e}`.toLowerCase()){case"ascending":return Ng;case"descending":return Ny}throw Error(`invalid order: ${e}`)}(u),null==f||!1===f)continue;let g="fx"===c||"fy"===c?function(e,t){let r=e.original;if(r===e)return t;let n=t.value,i=t.value=[];for(let t=0;t<r.length;++t){let s=n[r[t][0]];for(let r of e[t])i[r]=s}return t}(t,n[c]):function(e,t){for(let r in e){let n=e[r];if(n.scale===t)return n}}(r,c);if(!g)throw Error(`missing channel for scale: ${c}`);let y=g.value,[b=0,v=1/0]=Ed(p)?p:p<0?[p]:[0,p];if(null==h)g.domain=()=>{let e=Array.from(new tQ(y));return d&&(e=e.reverse()),(0!==b||v!==1/0)&&(e=e.slice(b,v)),e};else{let t="data"===h?e:"height"===h?Np(r,"y1","y2"):"width"===h?Np(r,"x1","x2"):Nm(r,h,"y"===h?"y2":"x"===h?"x2":void 0),n=E1(!0===f?"max":f,t);g.domain=()=>{let e=function(e,t,...r){return tZ(e,Array.from,t,r)}(M9(y),e=>n.reduceIndex(e,t),e=>y[e]);return u&&e.sort(u),d&&e.reverse(),(0!==b||v!==1/0)&&(e=e.slice(b,v)),e.map(Mq)}}}}(s,e,a,t,this.sort),{data:s,facets:e,channels:a}}filter(e,t,r){for(let n in t){let{filter:i=A4}=t[n];if(null!==i){let t=r[n];e=e.filter(e=>i(t[e]))}}return e}project(e,t,r){for(let n in e)if("x"===e[n].scale&&/^x|x$/.test(n)){let i=n.replace(/^x|x$/,"y");i in e&&"y"===e[i].scale&&function(e,t,r,n){let i;let s=r[e],o=r[t],a=s.length,l=r[e]=new Float64Array(a).fill(NaN),c=r[t]=new Float64Array(a).fill(NaN),h=n.stream({point(e,t){l[i]=e,c[i]=t}});for(i=0;i<a;++i)h.point(s[i],o[i])}(n,i,t,r.projection)}}scale(e,t,r){let n=function(e,t){let r=Object.fromEntries(Object.entries(e).map(([e,{scale:r,value:n}])=>{let i=null==r?null:t[r];return[e,null==i?n:MK(n,i)]}));return r.channels=e,r}(e,t);return r.projection&&this.project(e,n,r),n}};function _1(...e){return e.plot=_0.prototype.plot,e}function _2(e,t){if(null==e)return null===t?void 0:t;if(null==t)return null===e?void 0:e;if("function"!=typeof e)throw TypeError(`invalid render transform: ${e}`);if("function"!=typeof t)throw TypeError(`invalid render transform: ${t}`);return function(r,n,i,s,o,a){return e.call(this,r,n,i,s,o,(e,r,n,i,s)=>t.call(this,e,r,n,i,s,a))}}function _4(e,t){return(null==e?void 0:e.tip)===!0?{...e,tip:t}:M2(null==e?void 0:e.tip)&&void 0===e.tip.pointer?{...e,tip:{...e.tip,pointer:t}}:e}function _5(e,t){let r;if(!t)throw Error(`aspectRatio requires ${e} scale`);let{type:n,domain:i}=t;switch(n){case"linear":case"utc":case"time":r=Number;break;case"pow":{let e=t.scale.exponent();r=t=>Math.pow(t,e);break}case"log":r=Math.log;break;case"point":case"band":return i.length;default:throw Error(`unsupported ${e} scale for aspectRatio: ${n}`)}let[s,o]=t$(i);return Math.abs(r(o)-r(s))}let _3=new WeakMap;function _6(e,t,{x:r,y:n,px:i,py:s,maxRadius:o=40,channels:a,render:l,...c}={}){return o*=1,null!=i&&(r??(r=null),a={...a,px:{value:i,scale:"x"}}),null!=s&&(n??(n=null),a={...a,py:{value:s,scale:"y"}}),{x:r,y:n,channels:a,...c,render:_2(function(r,n,i,s,a,l){let c,h,u,d,f;let p=(a={...a,pointerSticky:!1}).ownerSVGElement,{data:m}=a.getMarkState(this),g=_3.get(p);g||_3.set(p,g={sticky:!1,roots:[],renders:[]});let y=g.renders.push(j)-1,{x:b,y:v,fx:x,fy:w}=n,k=x?x(r.fx)-s.marginLeft:0,O=w?w(r.fy)-s.marginTop:0;null!=b&&b.bandwidth&&(k+=b.bandwidth()/2),null!=v&&v.bandwidth&&(O+=v.bandwidth()/2);let S=null!=r.fi;if(S){let e=g.facetStates;e||(g.facetStates=e=new Map),(c=e.get(this))||e.set(this,c=new Map)}let[C,T]=_K(this,s),{px:A,py:M}=i,E=A?e=>A[e]:je(i,C),N=M?e=>M[e]:jt(i,T);function _(e,t){if(S){if(f&&(f=cancelAnimationFrame(f)),null==e)c.delete(r.fi);else{c.set(r.fi,t),f=requestAnimationFrame(()=>{for(let[n,i]of(f=null,c))if(i<t||i===t&&n<r.fi){e=null;break}j(e)});return}}j(e)}function j(e){if(h===e&&d===g.sticky)return;h=e,d=a.pointerSticky=g.sticky;let t=null==h?[]:[h];S&&(t.fx=r.fx,t.fy=r.fy,t.fi=r.fi);let o=l(t,n,i,s,a);if(u){if(S){let e=u.parentNode,t=u.getAttribute("transform"),r=o.getAttribute("transform");t?o.setAttribute("transform",t):o.removeAttribute("transform"),r?e.setAttribute("transform",r):e.removeAttribute("transform"),o.removeAttribute("aria-label"),o.removeAttribute("aria-description"),o.removeAttribute("aria-hidden")}u.replaceWith(o)}if(g.roots[y]=u=o,!(null==h&&(null==c?void 0:c.size)>1)){let e=null==h?null:Mk(m)?m[h]:m.get(h);a.dispatchValue(e)}return o}function D(n){if(g.sticky||"mouse"===n.pointerType&&1===n.buttons)return;let[i,a]=function(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,[(n=n.matrixTransform(t.getScreenCTM().inverse())).x,n.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}(n);i-=k,a-=O;let l=i<s.marginLeft||i>s.width-s.marginRight?1:e,c=a<s.marginTop||a>s.height-s.marginBottom?1:t,h=null,u=o*o;for(let e of r){let t=l*(E(e)-i),r=c*(N(e)-a),n=t*t+r*r;n<=u&&(h=e,u=n)}if(null!=h&&(1!==e||1!==t)){let e=E(h)-i,t=N(h)-a;u=e*e+t*t}_(h,u)}return p.addEventListener("pointerenter",D),p.addEventListener("pointermove",D),p.addEventListener("pointerdown",function(e){"mouse"===e.pointerType&&null!=h&&(g.sticky&&g.roots.some(t=>null==t?void 0:t.contains(e.target))||(g.sticky?(g.sticky=!1,g.renders.forEach(e=>e(null))):(g.sticky=!0,j(h)),e.stopImmediatePropagation()))}),p.addEventListener("pointerleave",function(e){"mouse"===e.pointerType&&(g.sticky||_(null))}),j(null)},l)}}function _7(e){return _6(1,1,e)}function _8(e){return _6(1,.01,e)}function _9(e){return _6(.01,1,e)}function je({x1:e,x2:t,x:r=e},n){return e&&t?r=>(e[r]+t[r])/2:r?e=>r[e]:()=>n}function jt({y1:e,y2:t,y:r=e},n){return e&&t?r=>(e[r]+t[r])/2:r?e=>r[e]:()=>n}function jr(e){return _n(e)&&void 0===e.interval?void 0:"tabular-nums"}let jn=Math.PI/180;function ji(e,{marker:t,markerStart:r=t,markerMid:n=t,markerEnd:i=t}={}){e.markerStart=js(r),e.markerMid=js(n),e.markerEnd=js(i)}function js(e){if(null==e||!1===e)return null;if(!0===e)return jl;if("function"==typeof e)return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return jo("auto");case"arrow-reverse":return jo("auto-start-reverse");case"dot":return ja;case"circle":case"circle-fill":return jl;case"circle-stroke":return jc;case"tick":return jh("auto");case"tick-x":return jh(90);case"tick-y":return jh(0)}throw Error(`invalid marker: ${e}`)}function jo(e){return(t,r)=>_M("svg:marker",r).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(e=>e.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function ja(e,t){return _M("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(e=>e.append("circle").attr("r",2.5)).node()}function jl(e,t){return _M("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(e=>e.append("circle").attr("r",3)).node()}function jc(e,t){return _M("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",e).attr("stroke-width",1.5).call(e=>e.append("circle").attr("r",3)).node()}function jh(e){return(t,r)=>_M("svg:marker",r).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",e).attr("stroke",t).call(e=>e.append("path").attr("d","M0,-3v6")).node()}let ju=0;function jd(e,t,{stroke:r},n){return jp(e,t,r&&(e=>r[e]),null,n)}function jf(e,t,{stroke:r,z:n},i){return jp(e,t,r&&(([e])=>r[e]),n,i)}function jp(e,{markerStart:t,markerMid:r,markerEnd:n,stroke:i},s=()=>i,o,a){if(!t&&!r&&!n)return;let l=new Map,c=o&&function(e,t){let r=new Uint8Array(t.length),n=e.data().filter(e=>e.length>1),i=n.length;for(let e=0,s=_E;e<i;++e){let i=n[e];if(i.length>1){let e=i[0];s!==(s=Et(t[e]))&&(r[e]|=1)}}for(let e=i-1,s=_E;e>=0;--e){let i=n[e];if(i.length>1){let e=i[0];s!==(s=Et(t[e]))&&(r[e]|=2)}}return([e])=>r[e]}(e,o);function h(e,t,r){return function(n){if(r&&!r(n))return;let i=s(n),o=l.get(t);o||l.set(t,o=new Map);let c=o.get(i);if(!c){let e=this.parentNode.insertBefore(t(i,a),this),r=`plot-marker-${++ju}`;e.setAttribute("id",r),o.set(i,c=`url(#${r})`)}this.setAttribute(e,c)}}t&&e.each(h("marker-start",t,c&&(e=>1&c(e)))),r&&c&&e.each(h("marker-start",r,e=>!(1&c(e)))),r&&e.each(h("marker-mid",r)),n&&e.each(h("marker-end",n,c&&(e=>2&c(e))))}function jm({inset:e,insetLeft:t,insetRight:r,...n}={}){return[t,r]=jy(e,t,r),{inset:e,insetLeft:t,insetRight:r,...n}}function jg({inset:e,insetTop:t,insetBottom:r,...n}={}){return[t,r]=jy(e,t,r),{inset:e,insetTop:t,insetBottom:r,...n}}function jy(e,t,r){return void 0===e&&void 0===t&&void 0===r?_D?[1,0]:[.5,.5]:[t,r]}function jb(e,{interval:t}){return(e={...Eu(e)}).interval=El(void 0===e.interval?t:e.interval),e}function jv(e,t,r,n){let i,s;let{[e]:o,[`${e}1`]:a,[`${e}2`]:l}=r,{value:c,interval:h}=jb(o,r);if(null==c||null==h&&!n)return r;let u=Ei(o);if(null==h){let t;let i={transform:e=>t||(t=MT(e,c)),label:u};return{...r,[e]:void 0,[`${e}1`]:void 0===a?i:a,[`${e}2`]:void 0!==l||a===l&&n?l:i}}function d(e){return void 0!==s&&e===i?s:s=MK(MT(i=e,c),e=>h.floor(e))}return t({...r,[e]:void 0,[`${e}1`]:void 0===a?{transform:d,label:u}:a,[`${e}2`]:void 0===l?{transform:e=>d(e).map(e=>h.offset(e)),label:u}:l})}function jx(e,t,r){let{[e]:n}=r,{value:i,interval:s}=jb(n,r);return null==i||null==s?r:t({...r,[e]:{label:Ei(n),transform:e=>{let t=MK(MT(e,i),e=>s.floor(e)),r=t.map(e=>s.offset(e));return t.map(Em(t)?(e,t)=>null==e||isNaN(e*=1)||null==(t=r[t])||isNaN(t*=1)?void 0:new Date((e+t)/2):(e,t)=>null==e||null==(t=r[t])?NaN:(+e+ +t)/2)}}})}let jw={ariaLabel:"rule",fill:null,stroke:"currentColor"};class jk extends _0{constructor(e,t={}){let{x:r,y1:n,y2:i,inset:s=0,insetTop:o=s,insetBottom:a=s}=t;super(e,{x:{value:r,scale:"x",optional:!0},y1:{value:n,scale:"y",optional:!0},y2:{value:i,scale:"y",optional:!0}},_4(t,"x"),jw),this.insetTop=ML(o),this.insetBottom=ML(a),ji(this,t)}render(e,t,r,n,i){let{x:s,y:o}=t,{x:a,y1:l,y2:c}=r,{width:h,height:u,marginTop:d,marginRight:f,marginLeft:p,marginBottom:m}=n,{insetTop:g,insetBottom:y}=this;return _M("svg:g",i).call(_Q,this,n,i).call(_U,this,{x:a&&s},_D,0).call(t=>t.selectAll().data(e).enter().append("line").call(_V,this).attr("x1",a?e=>a[e]:(p+h-f)/2).attr("x2",a?e=>a[e]:(p+h-f)/2).attr("y1",l&&!_s(o)?e=>l[e]+g:d+g).attr("y2",c&&!_s(o)?o.bandwidth?e=>c[e]+o.bandwidth()-y:e=>c[e]-y:u-m-y).call(_L,this,r).call(jd,this,r,i)).node()}}class jO extends _0{constructor(e,t={}){let{x1:r,x2:n,y:i,inset:s=0,insetRight:o=s,insetLeft:a=s}=t;super(e,{y:{value:i,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:n,scale:"x",optional:!0}},_4(t,"y"),jw),this.insetRight=ML(o),this.insetLeft=ML(a),ji(this,t)}render(e,t,r,n,i){let{x:s,y:o}=t,{y:a,x1:l,x2:c}=r,{width:h,height:u,marginTop:d,marginRight:f,marginLeft:p,marginBottom:m}=n,{insetLeft:g,insetRight:y}=this;return _M("svg:g",i).call(_Q,this,n,i).call(_U,this,{y:a&&o},0,_D).call(t=>t.selectAll().data(e).enter().append("line").call(_V,this).attr("x1",l&&!_s(s)?e=>l[e]+g:p+g).attr("x2",c&&!_s(s)?s.bandwidth?e=>c[e]+s.bandwidth()-y:e=>c[e]-y:h-f-y).attr("y1",a?e=>a[e]:(d+u-m)/2).attr("y2",a?e=>a[e]:(d+u-m)/2).call(_L,this,r).call(jd,this,r,i)).node()}}function jS(e,t){let{x:r=MR,y:n,y1:i,y2:s,...o}=function(e={}){return jv("y",jg,e)}(t);return[i,s]=jT(n,i,s),new jk(e,{...o,x:r,y1:i,y2:s})}function jC(e,t){let{y:r=MR,x:n,x1:i,x2:s,...o}=function(e={}){return jv("x",jm,e)}(t);return[i,s]=jT(n,i,s),new jO(e,{...o,y:r,x1:i,x2:s})}function jT(e,t,r){if(null==e){if(void 0===t){if(void 0!==r)return[0,r]}else if(void 0===r)return[0,t]}else{if(void 0===t)return void 0===r?[0,e]:[e,r];if(void 0===r)return[e,t]}return[t,r]}function jA(e,...t){let r=t.length;for(let n=0,i=!0;n<r;++n)"function"!=typeof t[n]&&(i&&(e=e.slice(),i=!1),e.splice(n,2,e[n]+t[n]+e[n+1]),t.splice(n,1),--n,--r);return n=>{let i=e[0];for(let s=0;s<r;++s)i+=t[s](n)+e[s+1];return i}}let jM={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},jE=class extends _0{constructor(e,t={}){let{x:r,y:n,text:i=Ed(e)&&Ef(e)?MR:MD,frameAnchor:s,textAnchor:o=/right$/i.test(s)?"end":/left$/i.test(s)?"start":"middle",lineAnchor:a=/^top/i.test(s)?"top":/^bottom/i.test(s)?"bottom":"middle",lineHeight:l=1,lineWidth:c=1/0,textOverflow:h,monospace:u,fontFamily:d=u?"ui-monospace, monospace":void 0,fontSize:f,fontStyle:p,fontVariant:m,fontWeight:g,rotate:y}=t,[b,v]=MU(y,0),[x,w]=function(e){return null==e||"number"==typeof e?[void 0,e]:"string"!=typeof e?[e,void 0]:(e=e.trim().toLowerCase(),jI.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}(f);if(super(e,{x:{value:r,scale:"x",optional:!0},y:{value:n,scale:"y",optional:!0},fontSize:{value:x,optional:!0},rotate:{value:function(e){return null==e?null:{transform:t=>MT(t,e,Float64Array),label:Ei(e)}}(b),optional:!0},text:{value:i,filter:A6,optional:!0}},t,jM),this.rotate=v,this.textAnchor=_G(o,"middle"),this.lineAnchor=MX(a,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+l,this.lineWidth=+c,this.textOverflow=jN(h),this.monospace=!!u,this.fontFamily=Mz(d),this.fontSize=w,this.fontStyle=Mz(p),this.fontVariant=Mz(m),this.fontWeight=Mz(g),this.frameAnchor=EC(s),!(this.lineWidth>=0))throw Error(`invalid lineWidth: ${c}`);this.splitLines=j$(this),this.clipLine=jB(this)}render(e,t,r,n,i){let{x:s,y:o}=t,{x:a,y:l,rotate:c,text:h,title:u,fontSize:d}=r,{rotate:f}=this,[p,m]=_K(this,n);return _M("svg:g",i).call(_Q,this,n,i).call(jP,this,h,n).call(_U,this,{x:a&&s,y:l&&o}).call(t=>t.selectAll().data(e).enter().append("text").call(_V,this).call(j_,this,h,u).attr("transform",jA`translate(${a?e=>a[e]:p},${l?e=>l[e]:m})${c?e=>` rotate(${c[e]})`:f?` rotate(${f})`:""}`).call(_W,"font-size",d&&(e=>d[e])).call(_L,this,r)).node()}};function jN(e){return null==e?null:MX(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function j_(e,t,r,n){if(!r)return;let{lineAnchor:i,lineHeight:s,textOverflow:o,splitLines:a,clipLine:l}=t;e.each(function(e){let t=a(_j(r[e])??"").map(l),c=t.length,h="top"===i?.71:"bottom"===i?1-c:(164-100*c)/200;if(c>1){let e=0;for(let r=0;r<c;++r){if(++e,!t[r])continue;let n=this.ownerDocument.createElementNS(M.B.svg,"tspan");n.setAttribute("x",0),r===e-1?n.setAttribute("y",`${(h+r)*s}em`):n.setAttribute("dy",`${e*s}em`),n.textContent=t[r],this.appendChild(n),e=0}}else h&&this.setAttribute("y",`${h*s}em`),this.textContent=t[0];if(o&&!n&&t[0]!==r[e]){let t=this.ownerDocument.createElementNS(M.B.svg,"title");t.textContent=r[e],this.appendChild(t)}})}function jj(e,{x:t,y:r,...n}={}){return void 0===n.frameAnchor&&([t,r]=M6(t,r)),new jE(e,{...n,x:t,y:r})}function jD(e,{x:t=MR,...r}={}){return new jE(e,function(e={}){return jx("y",jg,e)}({...r,x:t}))}function jR(e,{y:t=MR,...r}={}){return new jE(e,function(e={}){return jx("x",jm,e)}({...r,y:t}))}function jP(e,t,r){var n;_W(e,"text-anchor",t.textAnchor),_W(e,"font-family",t.fontFamily),_W(e,"font-size",t.fontSize),_W(e,"font-style",t.fontStyle),_W(e,"font-variant",void 0===t.fontVariant?(n=r)&&(function(e){for(let t of e)if(null!=t)return"number"==typeof t}(n)||Em(n))?"tabular-nums":void 0:t.fontVariant),_W(e,"font-weight",t.fontWeight)}let jI=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]),jz={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function jL(e,t=0,r=e.length){let n=0;for(let i=t;i<r;i=jG(e,i))n+=jz[e[i]]??(jY(e,i)?120:jz.e);return n}function jq(e,t=0,r=e.length){let n=0;for(let i=t;i<r;i=jG(e,i))n+=jY(e,i)?126:63;return n}function j$({monospace:e,lineWidth:t,textOverflow:r}){if(null!=r||t==1/0)return e=>e.split(/\r\n?|\n/g);let n=e?jq:jL,i=100*t;return e=>(function(e,t,r){let n=[],i,s=0;for(let[o,a,l]of function*(e){let t=0,r=0,n=e.length;for(;r<n;){let n=1;switch(e[r]){case"\xad":case"-":++r,yield[t,r,!1],t=r;break;case" ":for(yield[t,r,!1];" "===e[++r];);t=r;break;case"\r":e[r+1]===`
`&&++n;case`
`:yield[t,r,!0],r+=n,t=r;break;default:++r}}yield[t,r,!0]}(e)){if(void 0===i&&(i=o),s>i&&r(e,i,a)>t&&(n.push(e.slice(i,s)+("\xad"===e[s-1]?"-":"")),i=o),l){n.push(e.slice(i,a)),i=void 0;continue}s=a}return n})(e,i,n)}function jB({monospace:e,lineWidth:t,textOverflow:r}){if(null==r||t==1/0)return e=>e;let n=e?jq:jL,i=100*t;switch(r){case"clip-start":return e=>jH(e,i,n,"");case"clip-end":return e=>jV(e,i,n,"");case"ellipsis-start":return e=>jH(e,i,n,jF);case"ellipsis-middle":return e=>(function(e,t,r,n){let i=r(e=e.trim());if(i<=t)return e;let s=r(n)/2,[o,a]=jQ(e,t/2,r,s),[l]=jQ(e,i-t/2-a+s,r,-s);return l<0?n:e.slice(0,o).trimEnd()+n+e.slice(jG(e,l)).trimStart()})(e,i,n,jF);case"ellipsis-end":return e=>jV(e,i,n,jF)}}let jF="";function jQ(e,t,r,n){let i=[],s=0;for(let o=0,a=0,l=e.length;o<l;o=a){a=jG(e,o);let l=r(e,o,a);if(s+l>t){for(s+=n;s>t&&o>0;)a=o,s-=r(e,o=i.pop(),a);return[o,t-s]}s+=l,i.push(o)}return[-1,0]}function jV(e,t,r,n){e=e.trim();let i=r(n),[s]=jQ(e,t,r,i);return s<0?e:e.slice(0,s).trimEnd()+n}function jH(e,t,r,n){let i=r(e=e.trim());if(i<=t)return e;let s=r(n),[o]=jQ(e,i-t+s,r,-s);return o<0?n:n+e.slice(jG(e,o)).trimStart()}let jW=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,jU=RegExp("\\p{Extended_Pictographic}","uy");function jG(e,t){var r,n,i,s;return t+=!function(e,t){let r=e.charCodeAt(t);if(r>=55296&&r<56320){let r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}(e,t)?1:2,!jX(r=e,n=t)&&(jW.lastIndex=n,jW.test(r))&&(t=jW.lastIndex),(i=e,s=t,8205===i.charCodeAt(s))?jG(e,t+1):t}function jX(e,t){return 128>e.charCodeAt(t)}function jY(e,t){return!jX(e,t)&&(jU.lastIndex=t,jU.test(e))}let jZ={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},jJ={draw(e,t,r){let n=t*r/17.5;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-n,n-t),e.lineTo(0,-t),e.lineTo(n,n-t)}},jK=new Map([["arrow",jJ],["spike",{draw(e,t,r){e.moveTo(-r,0),e.lineTo(0,-t),e.lineTo(r,0)}}]]);class j0 extends _0{constructor(e,t={}){let{x:r,y:n,r:i=3.5,length:s,rotate:o,shape:a=jJ,anchor:l="middle",frameAnchor:c}=t,[h,u]=MU(s,12),[d,f]=MU(o,0);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:n,scale:"y",optional:!0},length:{value:h,scale:"length",optional:!0},rotate:{value:d,optional:!0}},t,jZ),this.r=+i,this.length=u,this.rotate=f,this.shape=function(e){if(e&&"function"==typeof e.draw)return e;let t=jK.get(`${e}`.toLowerCase());if(t)return t;throw Error(`invalid shape: ${e}`)}(a),this.anchor=MX(l,"anchor",["start","middle","end"]),this.frameAnchor=EC(c)}render(e,t,r,n,i){let{x:s,y:o}=t,{x:a,y:l,length:c,rotate:h}=r,{length:u,rotate:d,anchor:f,shape:p,r:m}=this,[g,y]=_K(this,n);return _M("svg:g",i).call(_Q,this,n,i).call(_U,this,{x:a&&s,y:l&&o}).call(t=>t.selectAll().data(e).enter().append("path").call(_V,this).attr("transform",jA`translate(${a?e=>a[e]:g},${l?e=>l[e]:y})${h?e=>` rotate(${h[e]})`:d?` rotate(${d})`:""}${"start"===f?"":"end"===f?c?e=>` translate(0,${c[e]})`:` translate(0,${u})`:c?e=>` translate(0,${c[e]/2})`:` translate(0,${u/2})`}`).attr("d",c?e=>{let t=rY();return p.draw(t,c[e],m),t}:(()=>{let e=rY();return p.draw(e,u,m),e})()).call(_L,this,r)).node()}}function j1(e,t={}){let{x:r=MR,...n}=t;return new j0(e,{...n,x:r})}function j2(e,t={}){let{y:r=MR,...n}=t;return new j0(e,{...n,y:r})}function j4(e,t){return arguments.length<2&&!Ed(e)&&(t=e,e=null),void 0===t&&(t={}),[e,t]}function j5({anchor:e}={},t){return void 0===e?t[0]:MX(e,"anchor",t)}function j3(e){return j5(e,["left","right"])}function j6(e){return j5(e,["right","left"])}function j7(e){return j5(e,["bottom","top"])}function j8(e){return j5(e,["top","bottom"])}function j9(){let[e,t]=j4(...arguments);return Dn("y",j3(t),e,t)}function De(){let[e,t]=j4(...arguments);return Dn("fy",j6(t),e,t)}function Dt(){let[e,t]=j4(...arguments);return Di("x",j7(t),e,t)}function Dr(){let[e,t]=j4(...arguments);return Di("fx",j8(t),e,t)}function Dn(e,t,r,{color:n="currentColor",opacity:i=1,stroke:s=n,strokeOpacity:o=i,strokeWidth:a=1,fill:l=n,fillOpacity:c=i,textAnchor:h,textStroke:u,textStrokeOpacity:d,textStrokeWidth:f,tickSize:p=6*("y"===e),tickPadding:m,tickRotate:g,x:y,margin:b,marginTop:v=void 0===b?20:b,marginRight:x=void 0===b?40*("right"===t):b,marginBottom:w=void 0===b?20:b,marginLeft:k=void 0===b?40*("left"===t):b,label:O,labelAnchor:S,labelArrow:C,labelOffset:T,ariaLabel:A=`${e}-axis`,...M}){return p=ML(p),m=ML(m),g=ML(g),void 0!==S&&(S=MX(S,"labelAnchor",["center","top","bottom"])),C=DO(C),_1(p&&!Ek(s)?function(e,t,r,{strokeWidth:n=1,strokeLinecap:i=null,strokeLinejoin:s=null,facetAnchor:o=t+("y"===e?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetLeft:h=c,insetRight:u=c,dx:d=0,y:f="y"===e?void 0:null,ariaLabel:p,...m}){return Df(j2,e,r,{ariaLabel:`${p} tick`,ariaHidden:!0},{strokeWidth:n,strokeLinecap:i,strokeLinejoin:s,facetAnchor:o,frameAnchor:a,y:f,...m,dx:"left"===t?+d-_D+ +h:+d+_D-u,anchor:"start",length:l,shape:"left"===t?Dv:Dx})}(e,t,r,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:p,tickPadding:m,tickRotate:g,x:y,ariaLabel:A,...M}):null,Ek(l)?null:function(e,t,r,{facetAnchor:n=t+("y"===e?"-empty":""),frameAnchor:i=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>60?4*Math.cos(o*jn):0),text:l,textAnchor:c=Math.abs(o)>60?"middle":"left"===t?"end":"start",lineAnchor:h=o>60?"top":o<-60?"bottom":"middle",fontVariant:u,inset:d=0,insetLeft:f=d,insetRight:p=d,dx:m=0,ariaLabel:g,y="y"===e?void 0:null,...b}){return Df(jR,e,r,{ariaLabel:`${g} tick label`},{facetAnchor:n,frameAnchor:i,text:l,textAnchor:c,lineAnchor:h,fontVariant:u,rotate:o,y,...b,dx:"left"===t?+m-s-a+ +f:+m+ +s+ +a-p},function(e,r,n,i,s){void 0===u&&(this.fontVariant=Dw(e)),void 0===l&&(s.text=Dp(e,r,n,i,t))})}(e,t,r,{fill:l,fillOpacity:c,stroke:u,strokeOpacity:d,strokeWidth:f,textAnchor:h,tickSize:p,tickPadding:m,tickRotate:g,x:y,marginTop:v,marginRight:x,marginBottom:w,marginLeft:k,ariaLabel:A,...M}),Ek(l)||null===O?null:jj([],Dd({fill:l,fillOpacity:c,...M},function(r,n,i,s,o){let a=s[e],{marginTop:l,marginRight:c,marginBottom:h,marginLeft:u}="y"===e&&o.inset||o,d=S??(a.bandwidth?"center":"top"),f=T??("right"===t?c:u)-3;return"center"===d?(this.textAnchor=void 0,this.lineAnchor="right"===t?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor="right"===t?"end":"start",this.lineAnchor=d,this.frameAnchor=`${d}-${t}`,this.rotate=0),this.dy="top"===d?3-l:"bottom"===d?h-3:0,this.dx="right"===t?f:-f,this.ariaLabel=`${A} label`,{facets:[[0]],channels:{text:{value:[Dk(e,a,{anchor:t,label:O,labelAnchor:d,labelArrow:C})]}}}})))}function Di(e,t,r,{color:n="currentColor",opacity:i=1,stroke:s=n,strokeOpacity:o=i,strokeWidth:a=1,fill:l=n,fillOpacity:c=i,textAnchor:h,textStroke:u,textStrokeOpacity:d,textStrokeWidth:f,tickSize:p=6*("x"===e),tickPadding:m,tickRotate:g,y,margin:b,marginTop:v=void 0===b?30*("top"===t):b,marginRight:x=void 0===b?20:b,marginBottom:w=void 0===b?30*("bottom"===t):b,marginLeft:k=void 0===b?20:b,label:O,labelAnchor:S,labelArrow:C,labelOffset:T,ariaLabel:A=`${e}-axis`,...M}){return p=ML(p),m=ML(m),g=ML(g),void 0!==S&&(S=MX(S,"labelAnchor",["center","left","right"])),C=DO(C),_1(p&&!Ek(s)?function(e,t,r,{strokeWidth:n=1,strokeLinecap:i=null,strokeLinejoin:s=null,facetAnchor:o=t+("x"===e?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetTop:h=c,insetBottom:u=c,dy:d=0,x:f="x"===e?void 0:null,ariaLabel:p,...m}){return Df(j1,e,r,{ariaLabel:`${p} tick`,ariaHidden:!0},{strokeWidth:n,strokeLinejoin:s,strokeLinecap:i,facetAnchor:o,frameAnchor:a,x:f,...m,dy:"bottom"===t?+d-_D-u:+d+_D+ +h,anchor:"start",length:l,shape:"bottom"===t?Dy:Db})}(e,t,r,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:p,tickPadding:m,tickRotate:g,y,ariaLabel:A,...M}):null,Ek(l)?null:function(e,t,r,{facetAnchor:n=t+("x"===e?"-empty":""),frameAnchor:i=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>=10?4*Math.cos(o*jn):0),text:l,textAnchor:c=Math.abs(o)>=10?o<0^"bottom"===t?"start":"end":"middle",lineAnchor:h=Math.abs(o)>=10?"middle":"bottom"===t?"top":"bottom",fontVariant:u,inset:d=0,insetTop:f=d,insetBottom:p=d,dy:m=0,x:g="x"===e?void 0:null,ariaLabel:y,...b}){return Df(jD,e,r,{ariaLabel:`${y} tick label`},{facetAnchor:n,frameAnchor:i,text:void 0===l?null:l,textAnchor:c,lineAnchor:h,fontVariant:u,rotate:o,x:g,...b,dy:"bottom"===t?+m+ +s+ +a-p:+m-s-a+ +f},function(e,r,n,i,s){void 0===u&&(this.fontVariant=Dw(e)),void 0===l&&(s.text=Dp(e,r,n,i,t))})}(e,t,r,{fill:l,fillOpacity:c,stroke:u,strokeOpacity:d,strokeWidth:f,textAnchor:h,tickSize:p,tickPadding:m,tickRotate:g,y,marginTop:v,marginRight:x,marginBottom:w,marginLeft:k,ariaLabel:A,...M}),Ek(l)||null===O?null:jj([],Dd({fill:l,fillOpacity:c,...M},function(r,n,i,s,o){let a=s[e],{marginTop:l,marginRight:c,marginBottom:h,marginLeft:u}="x"===e&&o.inset||o,d=S??(a.bandwidth?"center":"right"),f=T??("top"===t?l:h)-3;return"center"===d?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${d}`,this.textAnchor="right"===d?"end":"start"),this.lineAnchor=t,this.dy="top"===t?-f:f,this.dx="right"===d?c-3:"left"===d?3-u:0,this.ariaLabel=`${A} label`,{facets:[[0]],channels:{text:{value:[Dk(e,a,{anchor:t,label:O,labelAnchor:d,labelArrow:C})]}}}})))}function Ds(){let[e,t]=j4(...arguments);return Dc("y",j3(t),e,t)}function Do(){let[e,t]=j4(...arguments);return Dc("fy",j6(t),e,t)}function Da(){let[e,t]=j4(...arguments);return Dh("x",j7(t),e,t)}function Dl(){let[e,t]=j4(...arguments);return Dh("fx",j8(t),e,t)}function Dc(e,t,r,{y:n="y"===e?void 0:null,x:i=null,x1:s="left"===t?i:null,x2:o="right"===t?i:null,ariaLabel:a=`${e}-grid`,ariaHidden:l=!0,...c}){return Df(jC,e,r,{ariaLabel:a,ariaHidden:l},{y:n,x1:s,x2:o,...Du(c)})}function Dh(e,t,r,{x:n="x"===e?void 0:null,y:i=null,y1:s="top"===t?i:null,y2:o="bottom"===t?i:null,ariaLabel:a=`${e}-grid`,ariaHidden:l=!0,...c}){return Df(jS,e,r,{ariaLabel:a,ariaHidden:l},{x:n,y1:s,y2:o,...Du(c)})}function Du({color:e="currentColor",opacity:t=.1,stroke:r=e,strokeOpacity:n=t,strokeWidth:i=1,...s}){return{stroke:r,strokeOpacity:n,strokeWidth:i,...s}}function Dd({fill:e,fillOpacity:t,fontFamily:r,fontSize:n,fontStyle:i,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:c,clip:h=!1},u){return[,e]=MW(e),[,t]=MU(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:r,fontSize:n,fontStyle:i,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:c,clip:h,initializer:u}}function Df(e,t,r,n,i,s){let o;let a=EV(i).initializer,l=e(r,EV({...i,initializer:function(e,r,n,a,l,c){let h=null==e&&("fx"===t||"fy"===t),{[t]:u}=a;if(!u)throw Error(`missing scale: ${t}`);let d=u.domain(),{interval:f,ticks:p,tickFormat:m,tickSpacing:g="x"===t?80:35}=i;if("string"==typeof p&&DS(u)&&(f=p,p=void 0),void 0===p&&(p=Ec(f,u.type)??function(e,t){let[r,n]=t$(e.range());return(n-r)/t}(u,g)),null==e){if(Ed(p))e=MZ(p);else if(Eh(p))e=Dg(p,...t$(d));else if(u.interval){let t=u.interval;if(u.ticks){let[r,n]=t$(d),i=(n-r)/t[Ml];e=Dg(t=My(t,i/p)??t,r,n)}else(t=My(t,(e=d).length/p)??t)!==u.interval&&(e=Dg(t,...t$(e)));if(t===u.interval){let t=Math.round(e.length/p);t>1&&(e=e.filter((e,r)=>r%t==0))}}else e=u.ticks?u.ticks(p):d;if(!u.ticks&&e.length&&e!==d){let r=new tQ(d);(e=e.filter(e=>r.has(e))).length||NV(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}"y"===t||"x"===t?r=[M9(e)]:o[t]={scale:t,value:MR}}null==s||s.call(this,u,e,p,m,o);let y=Object.fromEntries(Object.entries(o).map(([t,r])=>[t,{...r,value:MT(e,r.value)}]));return h&&(r=c.filterFacets(e,y)),{data:e,facets:r,channels:y}}},a));return null==r?(o=l.channels,l.channels={}):o={},void 0!==n&&Object.assign(l,n),void 0===l.clip&&(l.clip=!1),l}function Dp(e,t,r,n,i){return{value:Dm(e,t,r,n,i)}}function Dm(e,t,r,n,i){return"function"!=typeof n||"log"===e.type&&e.tickFormat?void 0===n&&t&&Em(t)?function(e,t,r){let n=re(function(e,t=function(e,t){return[e,t]}){let r=[],n,i=!1;for(let s of e)i&&r.push(t(n,s)),n=s,i=!0;return r}(t,(e,t)=>Math.abs(t-e)));if(n<1e3)return Mb("millisecond","utc",r);for(let[i,s,o,a]of"time"===e?Mu:"utc"===e?Mh:Md){if(n>a||"hour"===i&&!n)break;if(t.every(e=>s.floor(e)>=e))return Mb(i,o,r)}}(e.type,t,i)??_j:e.tickFormat?e.tickFormat("number"==typeof r?r:null,n):"string"==typeof n&&e.domain().length>0?(Em(e.domain())?f:nK)(n):void 0===n?_j:MB(n):n}function Dg(e,t,r){return e.range(t,e.offset(e.floor(r)))}let Dy={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},Db={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},Dv={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},Dx={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function Dw(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function Dk(e,t,{anchor:r,label:n=t.label,labelAnchor:i,labelArrow:s}={}){if(!(null==n||n.inferred&&DS(t)&&/^(date|time|year)$/i.test(n))){if(n=String(n),"auto"===s&&(s=(!t.bandwidth||t.interval)&&!/[]/.test(n)),!s)return n;if(!0===s){let r=Math.sign(Mn(t.domain()))*Math.sign(Mn(t.range()));r&&(s=/x$/.test(e)||"center"===i?/x$/.test(e)===r<0?"left":"right":r<0?"up":"down")}switch(s){case"left":return` ${n}`;case"right":return`${n} `;case"up":return"right"===r?`${n} `:` ${n}`;case"down":return"right"===r?`${n} `:` ${n}`}return n}}function DO(e="auto"){return!Ek(e)&&("boolean"==typeof e?e:MX(e,"labelArrow",["auto","up","right","down","left"]))}function DS(e){return Em(e.domain())}function DC(e,t){if(null==t)return t;let r=e(t);if(!r)throw Error(`scale not found: ${t}`);return r}function DT(e,t={},r){let n,{columns:i,tickFormat:s,fontVariant:o=jr(e),swatchSize:a=15,swatchWidth:l=a,swatchHeight:c=a,marginLeft:h=0,className:u,style:d,width:f}=t,p=_A(t);u=_Z(u),s=Dm(e.scale,e.domain,void 0,s);let m=_M("div",p).attr("class",`${u}-swatches ${u}-swatches-${null!=i?"columns":"wrap"}`);return null!=i?(n=`:where(.${u}-swatches-columns .${u}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${u}-swatches-columns .${u}-swatch::before) {
  flex-shrink: 0;
}
:where(.${u}-swatches-columns .${u}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,m.style("columns",i).selectAll().data(e.domain).enter().append("div").attr("class",`${u}-swatch`).call(r,e,l,c).call(e=>e.append("div").attr("class",`${u}-swatch-label`).attr("title",s).text(s))):(n=`:where(.${u}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${u}-swatches-wrap .${u}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,m.selectAll().data(e.domain).enter().append("span").attr("class",`${u}-swatch`).call(r,e,l,c).append(function(){return this.ownerDocument.createTextNode(s.apply(this,arguments))})),m.call(e=>e.insert("style","*").text(`:where(.${u}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${u}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${n}`)).style("margin-left",h?`${+h}px`:null).style("width",void 0===f?null:`${+f}px`).style("font-variant",_G(o,"normal")).call(_J,d).node()}let DA=new Map([["symbol",function(e,{fill:t=void 0!==(t=>null==(t=e.hint)?void 0:t.fill)()?e.hint.fill:"none",fillOpacity:r=1,stroke:n=void 0!==(t=>null==(t=e.hint)?void 0:t.stroke)()?e.hint.stroke:Ek(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:s=1.5,r:o=4.5,...a}={},l){let[c,h]=MW(t),[u,d]=MW(n),f=DC(l,c),p=DC(l,u),m=o*o*Math.PI;return r=MU(r)[1],i=MU(i)[1],s=MU(s)[1],DT(e,a,(t,n,o,a)=>t.append("svg").attr("viewBox","-8 -8 16 16").attr("width",o).attr("height",a).attr("fill","color"===c?e=>f.scale(e):h).attr("fill-opacity",r).attr("stroke","color"===u?e=>p.scale(e):d).attr("stroke-opacity",i).attr("stroke-width",s).append("path").attr("d",t=>{let r=rY();return e.scale(t).draw(r,m),r}))}],["color",DE],["opacity",function({type:e,interpolate:t,...r},{legend:n=!0,color:i=(0,M.u)(0,0,0),...s}){if(!t)throw Error(`${e} opacity scales are not supported`);if(!0===n&&(n="ramp"),"ramp"!==`${n}`.toLowerCase())throw Error(`${n} opacity legends are not supported`);return DE({type:e,...r,interpolate:function(e){let{r:t,g:r,b:n}=(0,M.u)(e)||(0,M.u)(0,0,0);return e=>`rgba(${t},${r},${n},${e})`}(i)},{legend:n,...s})}]]);function DM({className:e,...t},{label:r,ticks:n,tickFormat:i}={},s){return function(e={},...t){let r=e;for(let n of t)for(let t in n)if(void 0===r[t]){let i=n[t];r===e?r={...r,[t]:i}:r[t]=i}return r}(s,{className:e,...t},{label:r,ticks:n,tickFormat:i})}function DE(e,{legend:t=!0,...r}){if(!0===t&&(t="ordinal"===e.type?"swatches":"ramp"),void 0!==e.domain)switch(`${t}`.toLowerCase()){case"swatches":return function(e,{opacity:t,...r}={}){if(!_n(e)&&!_i(e))throw Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return DT(e,r,(e,r,n,i)=>e.append("svg").attr("width",n).attr("height",i).attr("fill",r.scale).attr("fill-opacity",MU(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}(e,r);case"ramp":return function(e,t){let{label:r=e.label,tickSize:n=6,width:i=240,height:s=44+n,marginTop:o=18,marginRight:a=0,marginBottom:l=16+n,marginLeft:c=0,style:h,ticks:u=(i-c-a)/64,tickFormat:d,fontVariant:f=jr(e),round:p=!0,opacity:m,className:g}=t,y=_A(t);g=_Z(g),m=MU(m)[1],null===d&&(d=()=>null);let b=_M("svg",y).attr("class",`${g}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",s).attr("viewBox",`0 0 ${i} ${s}`).call(e=>e.append("style").text(`:where(.${g}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${g}-ramp text) {
  white-space: pre;
}`)).call(_J,h),v=e=>e.selectAll(".tick line").attr("y1",o+l-s),x,w=p?(e,t)=>e.rangeRound(t):(e,t)=>e.range(t),{type:k,domain:O,range:S,interpolate:C,scale:T,pivot:A}=e;if(C){let e=void 0===S?C:rQ(1===C.length?NB(C):C,S);x=w(T.copy(),rV((0,M.k)(c,i-a),Math.min(O.length+(void 0!==A),void 0===S?1/0:S.length)));let t=y.document.createElement("canvas");t.width=256,t.height=1;let r=t.getContext("2d");for(let t=0;t<256;++t)r.fillStyle=e(t/255),r.fillRect(t,0,1,1);b.append("image").attr("opacity",m).attr("x",c).attr("y",o).attr("width",i-c-a).attr("height",s-o-l).attr("preserveAspectRatio","none").attr("xlink:href",t.toDataURL())}else if("threshold"===k){let e=void 0===d?e=>e:"string"==typeof d?nK(d):d;x=w(sF().domain([-1,S.length-1]),[c,i-a]),b.append("g").attr("fill-opacity",m).selectAll().data(S).enter().append("rect").attr("x",(e,t)=>x(t-1)).attr("y",o).attr("width",(e,t)=>x(t)-x(t-1)).attr("height",s-o-l).attr("fill",e=>e),u=MK(O,(e,t)=>t),d=t=>e(O[t],t)}else x=w(sj().domain(O),[c,i-a]),b.append("g").attr("fill-opacity",m).selectAll().data(O).enter().append("rect").attr("x",x).attr("y",o).attr("width",Math.max(0,x.bandwidth()-1)).attr("height",s-o-l).attr("fill",T),v=()=>{};return b.append("g").attr("transform",`translate(0,${s-l})`).call((function(e,t){var r=[],n=null,i=null,s=6,o=6,a=3,l="u">typeof window&&window.devicePixelRatio>1?0:.5;function c(e){var c=n??(t.ticks?t.ticks.apply(t,r):t.domain()),h=i??(t.tickFormat?t.tickFormat.apply(t,r):rp),u=Math.max(s,0)+a,d=t.range(),f=+d[0]+l,p=+d[d.length-1]+l,m=(t.bandwidth?function(e,t){return t=Math.max(0,e.bandwidth()-2*t)/2,e.round()&&(t=Math.round(t)),r=>+e(r)+t}:function(e){return t=>+e(t)})(t.copy(),l),g=e.selection?e.selection():e,y=g.selectAll(".domain").data([null]),b=g.selectAll(".tick").data(c,t).order(),v=b.exit(),x=b.enter().append("g").attr("class","tick"),w=b.select("line"),k=b.select("text");y=y.merge(y.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),b=b.merge(x),w=w.merge(x.append("line").attr("stroke","currentColor").attr("y2",+s)),k=k.merge(x.append("text").attr("fill","currentColor").attr("y",+u).attr("dy","0.71em")),e!==g&&(y=y.transition(e),b=b.transition(e),w=w.transition(e),k=k.transition(e),v=v.transition(e).attr("opacity",1e-6).attr("transform",function(e){return isFinite(e=m(e))?rm(e+l):this.getAttribute("transform")}),x.attr("opacity",1e-6).attr("transform",function(e){var t=this.parentNode.__axis;return rm((t&&isFinite(t=t(e))?t:m(e))+l)})),v.remove(),y.attr("d",o?"M"+f+","+ +o+"V"+l+"H"+p+"V"+ +o:"M"+f+","+l+"H"+p),b.attr("opacity",1).attr("transform",function(e){return rm(m(e)+l)}),w.attr("y2",+s),k.attr("y",+u).text(h),g.filter(rg).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),g.each(function(){this.__axis=m})}return c.scale=function(e){return arguments.length?(t=e,c):t},c.ticks=function(){return r=Array.from(arguments),c},c.tickArguments=function(e){return arguments.length?(r=null==e?[]:Array.from(e),c):r.slice()},c.tickValues=function(e){return arguments.length?(n=null==e?null:Array.from(e),c):n&&n.slice()},c.tickFormat=function(e){return arguments.length?(i=e,c):i},c.tickSize=function(e){return arguments.length?(s=o=+e,c):s},c.tickSizeInner=function(e){return arguments.length?(s=+e,c):s},c.tickSizeOuter=function(e){return arguments.length?(o=+e,c):o},c.tickPadding=function(e){return arguments.length?(a=+e,c):a},c.offset=function(e){return arguments.length?(l=+e,c):l},c})(0,x).ticks(Array.isArray(u)?null:u,"string"==typeof d?d:void 0).tickFormat("function"==typeof d?d:void 0).tickSize(n).tickValues(Array.isArray(u)?u:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",_G(f,"normal")).call(v).call(e=>e.select(".domain").remove()),void 0!==r&&b.append("text").attr("x",c).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(r),b.node()}(e,r);default:throw Error(`unknown legend type: ${t}`)}}let DN={length:!0};function D_(e,t){let r=0,n=0;for(let i of e){let e=t[i];e<r&&(r=e),e>n&&(n=e)}return[r,n]}function Dj(e,t,r){for(let n of e)for(let e of n){let[n,i]=D_(e,r);for(let s of e){let e=1/(i-n||1);t[s]=e*(t[s]-n),r[s]=e*(r[s]-n)}}}function DD(e,t,r){for(let n of e){for(let e of n){let[n,i]=D_(e,r);for(let s of e){let e=(i+n)/2;t[s]-=e,r[s]-=e}}DP(n,t,r)}DI(e,t,r)}function DR(e,t,r,n){for(let i of e){let e=new tF,s=0;for(let o of i){let i=-1,a=o.map(e=>Math.abs(r[e]-t[e])),l=o.map(s=>{i=n?n[s]:++i;let o=r[s]-t[s],a=e.has(i)?o-e.get(i):0;return e.set(i,o),a}),c=[0,...function(e,t){var r=0;return Float64Array.from(e,e=>r+=+e||0)}(l)];for(let e of o)t[e]+=s,r[e]+=s;let h=rd(a);h&&(s-=rd(a,(e,t)=>(l[t]/2+c[t])*e)/h)}DP(i,t,r)}DI(e,t,r)}function DP(e,t,r){let n=rr(e,e=>rr(e,e=>t[e]));for(let i of e)for(let e of i)t[e]-=n,r[e]-=n}function DI(e,t,r){let n=e.length;if(1===n)return;let i=e.map(e=>e.flat()),s=i.map(e=>(rr(e,e=>t[e])+re(e,e=>r[e]))/2),o=rr(s);for(let e=0;e<n;e++){let n=o-s[e];for(let s of i[e])t[s]+=n,r[s]+=n}}function Dz(e){return Dq(e,(e,t,r,n)=>{let i=M9(e),s=t1(i,e=>t[rs(e,e=>r[e])],e=>n[e]),o=tY(i,e=>rd(e,e=>r[e]),e=>n[e]),a=[],l=[],c=0;for(let e of s)c<0?(c+=o.get(e),a.push(e)):(c-=o.get(e),l.push(e));return l.reverse().concat(a)})}function DL(e){return t=>{let r=MT(t,e);return(e,t)=>A5(r[e],r[t])}}function Dq(e,t){return(r,n,i,s)=>{if(!s)throw Error("missing channel: z");let o=new tF(t(r,n,i,s).map((e,t)=>[e,t]));return(t,r)=>e(o.get(s[t]),o.get(s[r]))}}let D$={ariaLabel:"rect"};class DB extends _0{constructor(e,t={}){let{x1:r,y1:n,x2:i,y2:s}=t;super(e,{x1:{value:r,scale:"x",type:null!=r&&null==i?"band":void 0,optional:!0},y1:{value:n,scale:"y",type:null!=n&&null==s?"band":void 0,optional:!0},x2:{value:i,scale:"x",optional:!0},y2:{value:s,scale:"y",optional:!0}},t,D$),DF(this,t),DQ(this,t)}render(e,t,r,n,i){let{x:s,y:o}=t,{x1:a,y1:l,x2:c,y2:h}=r,{marginTop:u,marginRight:d,marginBottom:f,marginLeft:p,width:m,height:g}=n,{projection:y}=i,{insetTop:b,insetRight:v,insetBottom:x,insetLeft:w}=this,{rx:k,ry:O,rx1y1:S,rx1y2:C,rx2y1:T,rx2y2:A}=this;(a||c)&&!y&&_s(s)&&(a=c=null),(l||h)&&!y&&_s(o)&&(l=h=null);let M=null!=s&&s.bandwidth?s.bandwidth():0,E=null!=o&&o.bandwidth?o.bandwidth():0;return _M("svg:g",i).call(_Q,this,n,i).call(_U,this,{},0,0).call(t=>t.selectAll().data(e).enter().call(S||C||T||A?e=>e.append("path").call(_V,this).call(DV,a&&c?e=>a[e]+(c[e]<a[e]?-v:w):a?e=>a[e]+w:p+w,l&&h?e=>l[e]+(h[e]<l[e]?-x:b):l?e=>l[e]+b:u+b,a&&c?e=>c[e]-(c[e]<a[e]?-w:v):a?e=>a[e]+M-v:m-d-v,l&&h?e=>h[e]-(h[e]<l[e]?-b:x):l?e=>l[e]+E-x:g-f-x,this).call(_L,this,r):e=>e.append("rect").call(_V,this).attr("x",a?c?e=>Math.min(a[e],c[e])+w:e=>a[e]+w:p+w).attr("y",l?h?e=>Math.min(l[e],h[e])+b:e=>l[e]+b:u+b).attr("width",a?c?e=>Math.max(0,Math.abs(c[e]-a[e])+M-w-v):M-w-v:m-d-p-v-w).attr("height",l?h?e=>Math.max(0,Math.abs(l[e]-h[e])+E-b-x):E-b-x:g-u-f-b-x).call(_W,"rx",k).call(_W,"ry",O).call(_L,this,r))).node()}}function DF(e,{inset:t=0,insetTop:r=t,insetRight:n=t,insetBottom:i=t,insetLeft:s=t}={}){e.insetTop=ML(r),e.insetRight=ML(n),e.insetBottom=ML(i),e.insetLeft=ML(s)}function DQ(e,{r:t,rx:r,ry:n,rx1:i=t,ry1:s=t,rx2:o=t,ry2:a=t,rx1y1:l=void 0!==i?+i:void 0!==s?+s:0,rx1y2:c=void 0!==i?+i:void 0!==a?+a:0,rx2y1:h=void 0!==o?+o:void 0!==s?+s:0,rx2y2:u=void 0!==o?+o:void 0!==a?+a:0}={}){l||c||h||u?(e.rx1y1=l,e.rx1y2=c,e.rx2y1=h,e.rx2y2=u):(e.rx=_G(r,"auto"),e.ry=_G(n,"auto"))}function DV(e,t,r,n,i,s){let{rx1y1:o,rx1y2:a,rx2y1:l,rx2y2:c}=s;"function"!=typeof t&&(t=MB(t)),"function"!=typeof r&&(r=MB(r)),"function"!=typeof n&&(n=MB(n)),"function"!=typeof i&&(i=MB(i));let h=Math.max(Math.abs(o+l),Math.abs(a+c)),u=Math.max(Math.abs(o+a),Math.abs(l+c));e.attr("d",e=>{let s=t(e),d=r(e),f=n(e),p=i(e),m=s>f,g=d>p,y=m?f:s,b=m?s:f,v=g?p:d,x=g?d:p,w=Math.min(1,(b-y)/h,(x-v)/u),k=w*(m?g?c:l:g?a:o),O=w*(m?g?a:o:g?c:l),S=w*(m?g?o:a:g?l:c),C=w*(m?g?l:c:g?o:a);return`M${y},${v+DW(k,C)}A${k},${k} 0 0 ${k<0?0:1} ${y+DH(k,C)},${v}H${b-DH(O,S)}A${O},${O} 0 0 ${O<0?0:1} ${b},${v+DW(O,S)}V${x-DW(S,O)}A${S},${S} 0 0 ${S<0?0:1} ${b-DH(S,O)},${x}H${y+DH(C,k)}A${C},${C} 0 0 ${C<0?0:1} ${y},${x-DW(C,k)}Z`})}function DH(e,t){return t<0?e:Math.abs(e)}function DW(e,t){return t<0?Math.abs(e):e}let DU={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},DG={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class DX extends _0{constructor(e={}){let{anchor:t=null}=e;super(M_,void 0,e,null==t?DU:DG),this.anchor=MG(t,"anchor",["top","right","bottom","left"]),DF(this,e),t||DQ(this,e)}render(e,t,r,n,i){let{marginTop:s,marginRight:o,marginBottom:a,marginLeft:l,width:c,height:h}=n,{anchor:u,insetTop:d,insetRight:f,insetBottom:p,insetLeft:m}=this,{rx:g,ry:y,rx1y1:b,rx1y2:v,rx2y1:x,rx2y2:w}=this,k=l+m,O=c-o-f,S=s+d,C=h-a-p;return _M(u?"svg:line":b||v||x||w?"svg:path":"svg:rect",i).datum(0).call(_Q,this,n,i).call(_V,this).call(_L,this,r).call(_U,this,{}).call("left"===u?e=>e.attr("x1",k).attr("x2",k).attr("y1",S).attr("y2",C):"right"===u?e=>e.attr("x1",O).attr("x2",O).attr("y1",S).attr("y2",C):"top"===u?e=>e.attr("x1",k).attr("x2",O).attr("y1",S).attr("y2",S):"bottom"===u?e=>e.attr("x1",k).attr("x2",O).attr("y1",C).attr("y2",C):b||v||x||w?e=>e.call(DV,k,S,O,C,this):e=>e.attr("x",k).attr("y",S).attr("width",O-k).attr("height",C-S).attr("rx",g).attr("ry",y)).node()}}let DY={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},DZ=new Set(["geometry","href","src","ariaLabel","scales"]);class DJ extends _0{constructor(e,t={}){t.tip&&(t={...t,tip:!1}),void 0===t.title&&Ed(e)&&Ef(e)&&(t={...t,title:MR});let{x:r,y:n,x1:i,x2:s,y1:o,y2:a,anchor:l,preferredAnchor:c="bottom",monospace:h,fontFamily:u=h?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:f,fontVariant:p,fontWeight:m,lineHeight:g=1,lineWidth:y=20,frameAnchor:b,format:v,textAnchor:x="start",textOverflow:w,textPadding:k=8,title:O,pointerSize:S=12,pathFilter:C="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=t;for(let v in super(e,{x:{value:null!=i&&null!=s?null:r,scale:"x",optional:!0},y:{value:null!=o&&null!=a?null:n,scale:"y",optional:!0},x1:{value:i,scale:"x",optional:null==s},y1:{value:o,scale:"y",optional:null==a},x2:{value:s,scale:"x",optional:null==i},y2:{value:a,scale:"y",optional:null==o},title:{value:O,optional:!0}},t,DY),this.anchor=ES(l,"anchor"),this.preferredAnchor=ES(c,"preferredAnchor"),this.frameAnchor=EC(b),this.textAnchor=_G(x,"middle"),this.textPadding=+k,this.pointerSize=+S,this.pathFilter=Mz(C),this.lineHeight=+g,this.lineWidth=+y,this.textOverflow=jN(w),this.monospace=!!h,this.fontFamily=Mz(u),this.fontSize=ML(d),this.fontStyle=Mz(f),this.fontVariant=Mz(p),this.fontWeight=Mz(m),DY)v in this.channels&&(this[v]=DY[v]);this.splitLines=j$(this),this.clipLine=jB(this),this.format="string"==typeof v||"function"==typeof v?{title:v}:{...v}}render(e,t,r,n,i){let s,o;let a=this,{x:l,y:c,fx:h,fy:u}=t,{ownerSVGElement:d,document:f}=i,{anchor:p,monospace:m,lineHeight:g,lineWidth:y}=this,{textPadding:b,pointerSize:v,pathFilter:x}=this,{marginTop:w,marginLeft:k}=n,{x1:O,y1:S,x2:C,y2:T,x:A=O??C,y:M=S??T}=r,E=h?h(e.fx)-k:0,N=u?u(e.fy)-w:0,[_,j]=_K(this,n),D=je(r,_),R=jt(r,j),P=m?jq:jL,I=P(jF);"title"in r?(s=DK.call(this,{title:r.channels.title},t),o=D1):(s=DK.call(this,r.channels,t),o=D2);let z=_M("svg:g",i).call(_Q,this,n,i).call(jP,this).call(_U,this,{x:A&&l,y:M&&c}).call(n=>n.selectAll().data(e).enter().append("g").attr("transform",e=>`translate(${Math.round(D(e))},${Math.round(R(e))})`).call(_V,this).call(e=>e.append("path").attr("filter",x)).call(n=>n.append("text").each(function(n){let i=ry(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");let l=o.call(a,n,e,s,t,r);if("string"==typeof l)for(let e of a.splitLines(l))L(i,{value:a.clipLine(e)});else{let e=new Set;for(let t of l){let{label:r=""}=t;r&&e.has(r)||(e.add(r),L(i,t))}}})));function L(e,{label:t,value:r,color:n,opacity:i}){t??(t=""),r??(r="");let s=null!=n||null!=i,o,a=100*y,[l]=jQ(t,a,P,I);if(l>=0)t=t.slice(0,l).trimEnd()+jF,o=r.trim(),r="";else{!t&&(r||s)||(r=" "+r);let[e]=jQ(r,a-P(t),P,I);e>=0&&(o=r.trim(),r=r.slice(0,e).trimEnd()+jF)}let c=e.append("tspan").attr("x",0).attr("dy",`${g}em`).text("");t&&c.append("tspan").attr("font-weight","bold").text(t),r&&c.append(()=>f.createTextNode(r)),s&&c.append("tspan").text(" ").attr("fill",n).attr("fill-opacity",i).style("user-select","none"),o&&c.append("title").text(o)}function q(){let{width:e,height:t}=n.facet??n;z.selectChildren().each(function(r){var n,i,s;let{x:o,width:l,height:c}=this.getBBox();l=Math.round(l),c=Math.round(c);let h=p;if(void 0===h){let n=D(r)+E,i=R(r)+N,s=n+l+v+2*b<e,o=n-l-v-2*b>0,u=i+c+v+2*b<t,d=i-c-v-2*b>0;h=s&&o?u&&d?a.preferredAnchor:d?"bottom":"top":u&&d?s?"left":"right":(s||o)&&(u||d)?`${d?"bottom":"top"}-${s?"left":"right"}`:a.preferredAnchor}let u=this.firstChild,d=this.lastChild;if(u.setAttribute("d",function(e,t,r,n,i){let s=n+2*r,o=i+2*r;switch(e){case"middle":return`M${-s/2},${-o/2}h${s}v${o}h${-s}z`;case"top-left":return`M0,0l${t},${t}h${s-t}v${o}h${-s}z`;case"top":return`M0,0l${t/2},${t/2}h${(s-t)/2}v${o}h${-s}v${-o}h${(s-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-s}v${o}h${s}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-s}v${o}h${s}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${s-t}v${-o}h${-s}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(s-t)/2}v${-o}h${-s}v${o}h${(s-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-s}v${-o}h${s}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${s}v${o}h${-s}v${t/2-o/2}z`}}(h,v,b,l,c)),o)for(let e of d.childNodes)e.setAttribute("x",-o);d.setAttribute("y",`${+(n=h,i=d.childNodes.length,s=g,/^top(?:-|$)/.test(n)?.94-s:-.29-i*s).toFixed(6)}em`),d.setAttribute("transform",`translate(${function(e,t,r,n,i){switch(e){case"middle":return[-n/2,i/2];case"top-left":return[r,t+r];case"top":return[-n/2,t/2+r];case"top-right":return[-n-r,t+r];case"right":return[-t/2-n-r,i/2];case"bottom-left":return[r,-t-r];case"bottom":return[-n/2,-t/2-r];case"bottom-right":return[-n-r,-t-r];case"left":return[r+t/2,i/2]}}(h,v,b,l,c)})`)}),z.attr("visibility",null)}return e.length&&(z.attr("visibility","hidden"),d.isConnected?Promise.resolve().then(q):"u">typeof requestAnimationFrame&&requestAnimationFrame(q)),z.node()}}function DK(e,t){var r,n;let i={},s=this.format;for(let t in s=D0(s,e,"x"),s=D0(s,e,"y"),this.format=s,s){let r=s[t];if(null!==r&&!1!==r){if("fx"===t||"fy"===t)i[t]=!0;else{let r=Nb(e,t);r&&(i[t]=r)}}}for(let t in e){if(t in i||t in s||DZ.has(t)||("x"===t||"y"===t)&&e.geometry)continue;let r=Nb(e,t);if(r){if(null==r.scale&&"color"===r.defaultScale)continue;i[t]=r}}for(let e in!this.facet||(!t.fx||"fx"in s||(i.fx=!0),!t.fy||"fy"in s||(i.fy=!0)),i){let s=this.format[e];if("string"==typeof s){let o=(null==(r=i[e])?void 0:r.value)??(null==(n=t[e])?void 0:n.domain())??[];this.format[e]=(Em(o)?f:nK)(s)}else if(void 0===s||!0===s){let r=t[e];this.format[e]=null!=r&&r.bandwidth?Dm(r,r.domain()):_j}}return i}function D0(e,t,r){if(!(r in e))return e;let n=`${r}1`,i=`${r}2`;if((n in e||!(n in t))&&(i in e||!(i in t)))return e;let s=Object.entries(e),o=e[r];return s.splice(s.findIndex(([e])=>e===r)+1,0,[n,o],[i,o]),Object.fromEntries(s)}function D1(e,t,{title:r}){return this.format.title(r.value[e],e)}function*D2(e,t,r,n,i){for(let s in r){if("fx"===s||"fy"===s){yield{label:D3(n,r,s),value:this.format[s](t[s],e)};continue}if("x1"===s&&"x2"in r||"y1"===s&&"y2"in r)continue;let o=r[s];if("x2"===s&&"x1"in r)yield{label:D5(n,r,"x"),value:D4(this.format.x2,r.x1,o,e)};else if("y2"===s&&"y1"in r)yield{label:D5(n,r,"y"),value:D4(this.format.y2,r.y1,o,e)};else{let t=o.value[e],a=o.scale;if(!A4(t)&&null==a)continue;yield{label:D3(n,r,s),value:this.format[s](t,e),color:"color"===a?i[s][e]:null,opacity:"opacity"===a?i[s][e]:null}}}}function D4(e,t,r,n){var i;return null!=(i=r.hint)&&i.length?`${e(r.value[n]-t.value[n],n)}`:`${e(t.value[n],n)}${e(r.value[n],n)}`}function D5(e,t,r){let n=D3(e,t,`${r}1`,r),i=D3(e,t,`${r}2`,r);return n===i?n:`${n}${i}`}function D3(e,t,r,n=r){let i=t[r],s=e[(null==i?void 0:i.scale)??r];return String((null==s?void 0:s.label)??(null==i?void 0:i.label)??n)}function D6(e={}){let t,r;let{facet:n,style:i,title:s,subtitle:o,caption:a,ariaLabel:l,ariaDescription:c}=e,h=_Z(e.className),u=void 0===e.marks?[]:D8(e.marks);u.push(...function(e){let t=[];for(let r of e){let e=r.tip;if(e){!0===e?e={}:"string"==typeof e&&(e={pointer:e});let{pointer:n,preferredAnchor:i}=e;(e=(n=/^x$/i.test(n)?_8:/^y$/i.test(n)?_9:_7)(function(e,t={}){return EV({...t,x:null,y:null},(t,r,n,i,s,o)=>o.getMarkState(e))}(r,e))).title=null,void 0===i&&(e.preferredAnchor=n===_9?"left":"bottom");let s=function(e,{x:t,y:r,...n}={}){return void 0===n.frameAnchor&&([t,r]=M6(t,r)),new DJ(e,{...n,x:t,y:r})}(r.data,e);s.facet=r.facet,s.facetAnchor=r.facetAnchor,t.push(s)}}return t}(u));let d=function(e,t){if(null==e)return;let{x:r,y:n}=e;if(null==r&&null==n)return;let i=MY(e.data);if(null==i)throw Error("missing facet data");let s={};null!=r&&(s.fx=Nd(i,{value:r,scale:"fx"})),null!=n&&(s.fy=Nd(i,{value:n,scale:"fy"})),Rt(s,t);let o=_l(i,s);return{channels:s,groups:o,data:e.data}}(n,e),f=new Map;for(let t of u){let r=Rs(t,d,e);r&&f.set(t,r)}let p=new Map;d&&Rn(p,[d],e),Rn(p,f,e);let m=D8(function(e,t,r){let{projection:n,x:i={},y:s={},fx:o={},fy:a={},axis:l,grid:c,facet:h={},facet:{axis:u=l,grid:d}=h,x:{axis:f=l,grid:p=null===f?null:c}=i,y:{axis:m=l,grid:g=null===m?null:c}=s,fx:{axis:y=u,grid:b=null===y?null:d}=o,fy:{axis:v=u,grid:x=null===v?null:d}=a}=r;!n&&(M4(i)||Rc("x",e))||(f=p=null),!n&&(M4(s)||Rc("y",e))||(m=g=null),t.has("fx")||(y=b=null),t.has("fy")||(v=x=null),void 0===f&&(f=!Rl(e,"x")),void 0===m&&(m=!Rl(e,"y")),void 0===y&&(y=!Rl(e,"fx")),void 0===v&&(v=!Rl(e,"fy")),!0===f&&(f="bottom"),!0===m&&(m="left"),!0===y&&(y="top"===f||null===f?"bottom":"top"),!0===v&&(v="right"===m||null===m?"left":"right");let w=[];return Ra(w,x,Do,a),Ro(w,v,De,"right","left",h,a),Ra(w,b,Dl,o),Ro(w,y,Dr,"top","bottom",h,o),Ra(w,g,Ds,s),Ro(w,m,j9,"left","right",r,s),Ra(w,p,Da,i),Ro(w,f,Dt,"bottom","top",r,i),w}(u,p,e));for(let t of m){let r=Rs(t,d,e);r&&f.set(t,r)}u.unshift(...m);let g=function(e,t){let{fx:r,fy:n}=N1(e,t),i=null==r?void 0:r.scale.domain(),s=null==n?void 0:n.scale.domain();return i&&s?(function(...e){var t;let r="function"==typeof e[e.length-1]&&(t=e.pop(),e=>t(...e)),n=(e=e.map(tz)).map(tP),i=e.length-1,s=Array(i+1).fill(0),o=[];if(i<0||n.some(tI))return o;for(;;){o.push(s.map((t,r)=>e[r][t]));let t=i;for(;++s[t]===n[t];){if(0===t)return r?o.map(r):o;s[t--]=0}}})(i,s).map(([e,t],r)=>({x:e,y:t,i:r})):i?i.map((e,t)=>({x:e,i:t})):s?s.map((e,t)=>({y:e,i:t})):void 0}(p,e);if(void 0!==g){let e=d?_v(g,d):void 0;for(let t of u){if(null===t.facet||"super"===t.facet)continue;let r=f.get(t);void 0!==r&&(r.facetsIndex=null!=t.fx||null!=t.fy?_v(g,r):e)}let t=new Set;for(let{facetsIndex:e}of f.values())null==e||e.forEach((e,r)=>{(null==e?void 0:e.length)>0&&t.add(r)});for(let e of(g.forEach(0<t.size&&t.size<g.length?(e,r)=>e.empty=!t.has(r):e=>e.empty=!1),u))if("exclude"===e.facet){let t=f.get(e);void 0!==t&&(t.facetsIndex=function(e){let t=[],r=new Uint32Array(rd(e,e=>e.length));for(let n of e){let i=0;for(let t of e)n!==t&&(r.set(t,i),i+=t.length);t.push(r.slice(0,i))}return t}(t.facetsIndex))}}for(let t of Ez.keys())M4(e[t])&&"fx"!==t&&"fy"!==t&&p.set(t,[]);let y=new Map;for(let t of u){if(y.has(t))throw Error("duplicate mark; each mark must be unique");let{facetsIndex:r,channels:n}=f.get(t)??{},{data:i,facets:s,channels:o}=t.initialize(r,n,e);Rt(o,e),y.set(t,{data:i,facets:s,channels:o})}let b=N1(Rn(p,y,e),e),v=function(e,t,r={}){let n=.5-_D,i=.5+_D,s=.5+_D,o=.5-_D;for(let{marginTop:e,marginRight:r,marginBottom:a,marginLeft:l}of t)e>n&&(n=e),r>i&&(i=r),a>s&&(s=a),l>o&&(o=l);let{margin:a,marginTop:l=void 0!==a?a:n,marginRight:c=void 0!==a?a:i,marginBottom:h=void 0!==a?a:s,marginLeft:u=void 0!==a?a:o}=r;l*=1,c*=1;let{width:d=640,height:f=function({x:e,y:t,fy:r,fx:n},{projection:i,aspectRatio:s},{width:o,marginTopDefault:a,marginRightDefault:l,marginBottomDefault:c,marginLeftDefault:h}){let u=r&&r.scale.domain().length||1,d=function(e){if("function"==typeof(null==e?void 0:e.stream))return .618;if(M2(e)){let t,r;if({domain:t,type:e,...r}=e,null!=t&&null!=e){let[[n,i],[s,o]]=iH(("string"==typeof e?_k(e).type:e)({...r,width:100,height:100})).bounds(t),a=(o-i)/(s-n);return a&&isFinite(a)?a<.2?.2:a>5?5:a:.618}}if(null!=e){if("function"!=typeof e){let{aspectRatio:t}=_k(e);if(t)return t}return .618}}(i);if(d)return Math.round((o-h-l)*Math.max(.1,Math.min(10,(1.1*u-.1)/(1.1*(n?n.scale.domain().length:1)-.1)*d))+a+c);let f=t?_n(t)?t.scale.domain().length||1:Math.max(7,17/u):1;if(null!=s){if(!(isFinite(s*=1)&&s>0))throw Error(`invalid aspectRatio: ${s}`);let i=_5("y",t)/(_5("x",e)*s),u=n?n.scale.bandwidth():1,d=r?r.scale.bandwidth():1;return(i*(u*(o-h-l)-e.insetLeft-e.insetRight)+t.insetTop+t.insetBottom)/d+a+c}return!!(t||r)*Math.max(1,Math.min(60,f*u))*20+30*!!n+60}(e,r,{width:d,marginTopDefault:n,marginRightDefault:i,marginBottomDefault:s,marginLeftDefault:o})+Math.max(0,l-n+h-s)}=r,p={width:d*=1,height:f*=1,marginTop:l,marginRight:c,marginBottom:h*=1,marginLeft:u*=1};if(e.fx||e.fy){let{margin:e,marginTop:t=void 0!==e?e:l,marginRight:n=void 0!==e?e:c,marginBottom:i=void 0!==e?e:h,marginLeft:s=void 0!==e?e:u}=r.facet??{};p.facet={marginTop:t*=1,marginRight:n*=1,marginBottom:i*=1,marginLeft:s*=1}}return p}(b,u,e);!function(e,t){let{x:r,y:n,fx:i,fy:s}=e,o=i||s?N4(t):t;i&&N3(i,o),s&&N6(s,o);let a=i||s?N5(e,t):t;r&&N3(r,a),n&&N6(n,a)}(b,v);let x=N2(b),{fx:w,fy:k}=x,O=w||k?N5(b,v):v,S=w||k?function({fx:e,fy:t},r){let{marginTop:n,marginRight:i,marginBottom:s,marginLeft:o,width:a,height:l}=N4(r),c=e&&Rh(e),h=t&&Rh(t);return{marginTop:t?h[0]:n,marginRight:e?a-c[1]:i,marginBottom:t?l-h[1]:s,marginLeft:e?c[0]:o,inset:{marginTop:r.marginTop,marginRight:r.marginRight,marginBottom:r.marginBottom,marginLeft:r.marginLeft},width:a,height:l}}(x,v):v,C=_A(e),T=C.document,A=(0,M.A)("svg").call(T.documentElement),E=A;C.ownerSVGElement=A,C.className=h,C.projection=function({projection:e,inset:t=0,insetTop:r=t,insetRight:n=t,insetBottom:i=t,insetLeft:s=t}={},o){if(null==e)return;if("function"==typeof e.stream)return e;let a,l,c="frame";if(M2(e)){let t;if({type:e,domain:l,inset:t,insetTop:r=void 0!==t?t:r,insetRight:n=void 0!==t?t:n,insetBottom:i=void 0!==t?t:i,insetLeft:s=void 0!==t?t:s,clip:c=c,...a}=e,null==e)return}"function"!=typeof e&&({type:e}=_k(e));let{width:h,height:u,marginLeft:d,marginRight:f,marginTop:p,marginBottom:m}=o,g=h-d-f-s-n,y=u-p-m-r-i;if(null==(e=null==e?void 0:e({width:g,height:y,clip:c,...a})))return;c=function(e,t,r,n,i){if(!1===e||null==e||"number"==typeof e)return e=>e;if(!0===e&&(e="frame"),"frame"===`${e}`.toLowerCase())return nU(t,r,n,i);throw Error(`unknown projection clip type: ${e}`)}(c,d,p,h-f,u-m);let b=d+s,v=p+r,x;if(null!=l){let[[t,r],[n,i]]=iH(e).bounds(l),s=Math.min(g/(n-t),y/(i-r));s>0?(b-=(s*(t+n)-g)/2,v-=(s*(r+i)-y)/2,x=iW({point(e,t){this.stream.point(e*s+b,t*s+v)}})):NV("Warning: the projection could not be fit to the specified domain; using the default scale.")}return x??(x=0===b&&0===v?_C():iW({point(e,t){this.stream.point(e+b,t+v)}})),{stream:t=>e.stream(x.stream(c(t)))}}(e,O),C.path=function(){return iH(this.projection??function({x:e,y:t}){if(e||t)return e??(e=e=>e),t??(t=e=>e),iW({point(r,n){this.stream.point(e(r),t(n))}})}(x))},C.filterFacets=(e,t)=>_v(g,{channels:t,groups:_l(e,t)}),C.getMarkState=e=>{let t=y.get(e),r=f.get(e);return{...t,channels:{...t.channels,...null==r?void 0:r.channels}}},C.dispatchValue=e=>{E.value!==e&&(E.value=e,E.dispatchEvent(new C.document.defaultView.Event("input",{bubbles:!0})))};let N=new Set;for(let[t,r]of y)if(null!=t.initializer){let n="super"===t.facet?S:O,i=t.initializer(r.data,r.facets,r.channels,x,n,C);if(void 0!==i.data&&(r.data=i.data),void 0!==i.facets&&(r.facets=i.facets),void 0!==i.channels){let{fx:n,fy:s,...o}=i.channels;for(let t of(function(e){for(let t in e)Nf(t,e[t])}(o),Object.assign(r.channels,o),Object.values(o))){let{scale:r}=t;null==r||(P=Ez.get(r))===EN||P===EI||(Rr(t,e),N.add(r))}(null!=n||null!=s)&&f.set(t,!0)}}if(N.size){let t=new Map;Rn(t,y,e,e=>N.has(e)),Rn(p,y,e,e=>N.has(e));let r=function(e,t){for(let r in e){let n=e[r],i=t[r];void 0===n.label&&i&&(n.label=i.label)}return e}(N1(t,e),b),{scales:n,...i}=N2(r);Object.assign(b,r),Object.assign(x,i),Object.assign(x.scales,n)}for(let[e,n]of(void 0!==g&&(t={x:null==w?void 0:w.domain(),y:null==k?void 0:k.domain()},g=function(e,{x:t,y:r}){return t&&(t=_u(t)),r&&(r=_u(r)),e.filter(t&&r?e=>t.has(e.x)&&r.has(e.y):t?e=>t.has(e.x):e=>r.has(e.y)).sort(t&&r?(e,n)=>t.get(e.x)-t.get(n.x)||r.get(e.y)-r.get(n.y):t?(e,r)=>t.get(e.x)-t.get(r.x):(e,t)=>r.get(e.y)-r.get(t.y))}(g,t),r=function(e,t,{marginTop:r,marginLeft:n}){let i=e?({x:t})=>e(t)-n:()=>0,s=t?({y:e})=>t(e)-r:()=>0;return function(e){"svg"===this.tagName?(this.setAttribute("x",i(e)),this.setAttribute("y",s(e))):this.setAttribute("transform",`translate(${i(e)},${s(e)})`)}}(w,k,v)),y))n.values=e.scale(n.channels,x,C);let{width:_,height:j}=v;for(let e of(ry(A).attr("class",h).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",_).attr("height",j).attr("viewBox",`0 0 ${_} ${j}`).attr("aria-label",l).attr("aria-description",c).call(e=>e.append("style").text(`:where(.${h}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${h} text),
:where(.${h} tspan) {
  white-space: pre;
}`)).call(_J,i),u)){let{channels:n,values:i,facets:s}=y.get(e);if(void 0===g||"super"===e.facet){let t=null;if(s&&(t=s[0],0===(t=e.filter(t,n,i)).length))continue;let r=e.render(t,x,i,S,C);if(null==r)continue;A.appendChild(r)}else{let o;for(let r of g){if(!((null==(R=e.facetAnchor)?void 0:R.call(e,g,t,r))??!r.empty))continue;let a=null;if(s){let t=f.has(e);if(a=s[t?r.i:0],0===(a=e.filter(a,n,i)).length)continue;var D,R,P,I,z=void 0,L=void 0;t||a!==s[0]||(a=(I=a).subarray?I.subarray(void 0,void 0):I.slice(z,L)),a.fx=r.x,a.fy=r.y,a.fi=r.i}let l=e.render(a,x,i,O,C);if(null!=l)for(let e of((o??(o=ry(A).append("g"))).append(()=>l).datum(r),["aria-label","aria-description","aria-hidden","transform"]))l.hasAttribute(e)&&(o.attr(e,l.getAttribute(e)),l.removeAttribute(e))}null==o||o.selectChildren().each(r)}}let q=function(e,t,r){let n=[];for(let[i,s]of DA){let o=r[i];if(null!=o&&o.legend&&i in e){let r=s(e[i],DM(t,e[i],o),t=>e[t]);null!=r&&n.push(r)}}return n}(b,C,e),{figure:$=null!=s||null!=o||null!=a||q.length>0}=e;$&&((E=T.createElement("figure")).className=`${h}-figure`,E.style.maxWidth="initial",null!=s&&E.append(D7(T,s,"h2")),null!=o&&E.append(D7(T,o,"h3")),E.append(...q,A),null!=a&&E.append(function(e,t){let r=e.createElement("figcaption");return r.append(t),r}(T,a)),"value"in A&&(E.value=A.value,delete A.value)),E.scale=(D=x.scales,e=>{if(!Ez.has(e=`${e}`))throw Error(`unknown scale: ${e}`);return D[e]}),E.legend=function(e,t,r={}){return(n,i)=>{if(!DA.has(n))throw Error(`unknown legend type: ${n}`);if(n in e)return DA.get(n)(e[n],DM(t,r[n],i),t=>e[t])}}(b,C,e);let B=function(){let e=NF;return NF=0,NQ=void 0,e}();return B>0&&ry(A).append("text").attr("x",_).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${B.toLocaleString("en-US")} warning${1===B?"":"s"}. Please check the console.`),E}function D7(e,t,r){if(t.ownerDocument)return t;let n=e.createElement(r);return n.append(t),n}function D8(e){return e.flat(1/0).filter(e=>null!=e).map(D9)}function D9(e){return"function"==typeof e.render?e:new Re(e)}class Re extends _0{constructor(e){if("function"!=typeof e)throw TypeError("invalid mark; missing render function");super(),this.render=e}render(){}}function Rt(e,t){for(let r in e)Rr(e[r],t);return e}function Rr(e,t){let{scale:r,transform:n=!0}=e;if(null==r||!n)return;let{type:i,percent:s,interval:o,transform:a=s?e=>null==e?NaN:100*e:Ea(o,i)}=t[r]??{};null!=a&&(e.value=MK(e.value,a),e.transform=!1)}function Rn(e,t,r,n=MI){var i,s;for(let{channels:o}of t.values())for(let t in o){let a=o[t],{scale:l}=a;if(null!=l&&n(l)){if("projection"===l){if(!function({projection:e}={}){return null!=e&&("function"==typeof e.stream||(M2(e)&&(e=e.type),null!=e))}(r)){let t=(null==(i=r.x)?void 0:i.domain)===void 0,n=(null==(s=r.y)?void 0:s.domain)===void 0;if(t||n){let[r,i]=function(e){let t=[],r=[],n={point(e,n){t.push(e),r.push(n)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(let t of e.value)nk(t,n);return[{scale:"x",value:t},{scale:"y",value:r}]}(a);t&&Ri(e,"x",r),n&&Ri(e,"y",i)}}}else Ri(e,l,a)}}return e}function Ri(e,t,r){let n=e.get(t);void 0!==n?n.push(r):e.set(t,[r])}function Rs(e,t,r){if(null===e.facet||"super"===e.facet)return;let{fx:n,fy:i}=e;if(null!=n||null!=i){let t=MY(e.data??n??i);if(void 0===t)throw Error(`missing facet data in ${e.ariaLabel}`);if(null===t)return;let s={};return null!=n&&(s.fx=Nd(t,{value:n,scale:"fx"})),null!=i&&(s.fy=Nd(t,{value:i,scale:"fy"})),Rt(s,r),{channels:s,groups:_l(t,s)}}if(void 0===t)return;let{channels:s,groups:o,data:a}=t;if("auto"!==e.facet||e.data===a)return{channels:s,groups:o};a.length>0&&(o.size>1||1===o.size&&s.fx&&s.fy&&[...o][0][1].size>1)&&M8(MY(e.data))===M8(a)&&NV(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function Ro(e,t,r,n,i,s,o){var a;if(!t)return;let l=(a=t,/^\s*both\s*$/i.test(a)),{line:c}=o=function(e,t,{line:r=t.line,ticks:n,tickSize:i,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:h,ariaDescription:u,label:d=t.label,labelAnchor:f,labelArrow:p=t.labelArrow,labelOffset:m}){return{anchor:e,line:r,ticks:n,tickSize:i,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:h,ariaDescription:u,label:d,labelAnchor:f,labelArrow:p,labelOffset:m}}(l?n:t,s,o);(r===j9||r===Dt)&&c&&!EO(c)&&e.push(new DX(function(e){let{anchor:t,line:r}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:!0===r?void 0:r}}(o))),e.push(r(o)),l&&e.push(r({...o,anchor:i,label:null}))}function Ra(e,t,r,n){!t||EO(t)||e.push(r(function(e,{stroke:t=Ex(e)?e:void 0,ticks:r=!function(e){switch(typeof e){case"number":return!0;case"string":return!Ex(e)}return Ed(e)||"function"==typeof(null==e?void 0:e.range)}(e)?void 0:e,tickSpacing:n,ariaLabel:i,ariaDescription:s}){return{stroke:t,ticks:r,tickSpacing:n,ariaLabel:i,ariaDescription:s}}(t,n)))}function Rl(e,t){let r=`${t}-axis `;return e.some(e=>{var t;return null==(t=e.ariaLabel)?void 0:t.startsWith(r)})}function Rc(e,t){for(let r of t)for(let t in r.channels){let{scale:n}=r.channels[t];if(n===e||"projection"===n)return!0}return!1}function Rh(e){let t=e.domain();if(0===t.length)return[0,e.bandwidth()];let r=e(t[0]),n=e(t[t.length-1]);return n<r&&([r,n]=[n,r]),[r,n+e.bandwidth()]}let Ru=new Map([["basis",function(e){return new cQ(e)}],["basis-closed",function(e){return new cV(e)}],["basis-open",function(e){return new cH(e)}],["bundle",cU],["bump-x",function(e){return new cp(e,!0)}],["bump-y",function(e){return new cp(e,!1)}],["cardinal",cY],["cardinal-closed",cJ],["cardinal-open",c0],["catmull-rom",c4],["catmull-rom-closed",c3],["catmull-rom-open",c7],["linear",cu],["linear-closed",function(e){return new c8(e)}],["monotone-x",function(e){return new hr(e)}],["monotone-y",function(e){return new hn(e)}],["natural",function(e){return new hs(e)}],["step",function(e){return new ha(e,.5)}],["step-after",function(e){return new ha(e,1)}],["step-before",function(e){return new ha(e,0)}]]);function Rd(e){return cu(e)}function Rf(e={y:"count"},t={}){[e,t]=function({cumulative:e,domain:t,thresholds:r,interval:n,...i},s){return[i,{cumulative:e,domain:t,thresholds:r,interval:n,...s}]}(e,t);let{x:r,y:n}=t;return function(e,t,r,n,{data:i=Nt,filter:s=Ns,sort:o,reverse:a,...l}={},c={}){e=Rp(e),t=Rp(t),l=EZ(l,c,Rm),i=Ry(i,MR),o=null==o?void 0:Rm("sort",o,c),s=null==s?void 0:Rg("filter",s,c),null!=n&&EY(l,"y","y1","y2")&&(n=null);let[h,u]=En(e),[d,f]=En(e),[p,m]=En(t),[g,y]=En(t),[b,v]=null!=n?[n,"y"]:[],[x,w]=En(b),{x:k,y:O,z:S,fill:C,stroke:T,x1:A,x2:M,y1:E,y2:N,domain:_,cumulative:j,thresholds:D,interval:R,...P}=c,[I,z]=En(S),[L]=MW(C),[q]=MW(T),[$,B]=En(L),[F,Q]=En(q);return{..."z"in c&&{z:I||S},..."fill"in c&&{fill:$||C},..."stroke"in c&&{stroke:F||T},...EQ(P,(r,n,c)=>{let h=Eo(MT(r,b),null==c?void 0:c[v]),d=MT(r,S),p=MT(r,L),g=MT(r,q),x=E7(l,{z:d,fill:p,stroke:g}),k=[],O=[],C=h&&w([]),T=d&&z([]),A=p&&B([]),M=g&&Q([]),E=e&&u([]),N=e&&f([]),_=t&&m([]),j=t&&y([]),D=function(e,t,r){let n=null==e?void 0:e(r),i=null==t?void 0:t(r);return n&&i?function*(e){let t=n.bin(e);for(let[e,[s,o]]of n.entries()){let n=i.bin(t[e]);for(let[e,[t,a]]of i.entries())yield[n[e],{data:r,x1:s,y1:t,x2:o,y2:a}]}}:n?function*(e){let t=n.bin(e);for(let[e,[i,s]]of n.entries())yield[t[e],{data:r,x1:i,x2:s}]}:function*(e){let t=i.bin(e);for(let[e,[n,s]]of i.entries())yield[t[e],{data:r,y1:n,y2:s}]}}(e,t,r),R=0;for(let e of l)e.initialize(r);for(let e of(o&&o.initialize(r),s&&s.initialize(r),n)){let t=[];for(let t of l)t.scope("facet",e);for(let[n,a]of(o&&o.scope("facet",e),s&&s.scope("facet",e),E0(e,x)))for(let[e,c]of E0(a,h))for(let[a,u]of D(c))if(x&&(u.z=n),!(s&&!s.reduce(a,u))){for(let s of(t.push(R++),O.push(i.reduceIndex(a,r,u)),h&&C.push(e),d&&T.push(x===d?n:d[(a.length>0?a:c)[0]]),p&&A.push(x===p?n:p[(a.length>0?a:c)[0]]),g&&M.push(x===g?n:g[(a.length>0?a:c)[0]]),E&&(E.push(u.x1),N.push(u.x2)),_&&(_.push(u.y1),j.push(u.y2)),l))s.reduce(a,u);o&&o.reduce(a,u)}k.push(t)}return E8(k,o,a),{data:O,facets:k}}),...!EY(l,"x")&&(h?{x1:h,x2:d,x:Es(h,d)}:{x:k,x1:A,x2:M}),...!EY(l,"y")&&(p?{y1:p,y2:g,y:Es(p,g)}:{y:O,y1:E,y2:N}),...x&&{[v]:x},...Object.fromEntries(l.map(({name:e,output:t})=>[e,t]))}}(function(e,{cumulative:t,domain:r,thresholds:n,interval:i},s){return void 0===(e={...Eu(e)}).domain&&(e.domain=r),void 0===e.cumulative&&(e.cumulative=t),void 0===e.thresholds&&(e.thresholds=n),void 0===e.interval&&(e.interval=i),void 0===e.value&&(e.value=s),e.thresholds=function(e,t,r=Rv){if(void 0===e)return void 0===t?r:Ec(t);if("string"==typeof e){switch(e.toLowerCase()){case"freedman-diaconis":return ra;case"scott":return rl;case"sturges":return t9;case"auto":return Rv}return Mm(e)}return e}(e.thresholds,e.interval),e}(r,t,MR),null,0,n,e,jm(t))}function Rp(e){if(null==e)return;let{value:t,cumulative:r,domain:n=t$,thresholds:i}=e,s=e=>{let s=MT(e,t),o;if(Em(s)||function(e){return Eh(e)&&"function"==typeof(null==e?void 0:e.floor)&&e.floor()instanceof Date||Ed(e)&&Em(e)}(i)){s=MK(s,MH,Float64Array);let[e,t]="function"==typeof n?n(s):n,r="function"!=typeof i||Eh(i)?i:i(s,e,t);"number"==typeof r&&(r=oE(e,t,r)),Eh(r)&&(n===t$&&(e=r.floor(e),t=r.offset(r.floor(t))),r=r.range(e,r.offset(t))),o=r}else{s=MF(s);let[e,t]="function"==typeof n?n(s):n,r="function"!=typeof i||Eh(i)?i:i(s,e,t);if("number"==typeof r){if(n===t$){let n=t7(e,t,r);if(isFinite(n)){if(n>0){let i=Math.round(e/n),s=Math.round(t/n);i*n<=e||--i,s*n>t||++s;let o=s-i+1;r=new Float64Array(o);for(let e=0;e<o;++e)r[e]=(i+e)*n}else if(n<0){let i=Math.round(e*(n=-n)),s=Math.round(t*n);i/n<=e||--i,s/n>t||++s;let o=s-i+1;r=new Float64Array(o);for(let e=0;e<o;++e)r[e]=(i+e)/n}else r=[e]}else r=[e]}else r=t6(e,t,r)}else Eh(r)&&(n===t$&&(e=r.floor(e),t=r.offset(r.floor(t))),r=r.range(e,r.offset(t)));o=r}let a=[];if(1===o.length)a.push([o[0],o[0]]);else for(let e=1;e<o.length;++e)a.push([o[e-1],o[e]]);return a.bin=(r<0?function(e,t,r){let n=Rx(e,t,r);return e=>{let t=n(e);for(let e=t.length-2;e>=0;--e){let r=t[e+1],n=t[e];for(let e of r)n.push(e)}return t}}:r>0?function(e,t,r){let n=Rx(e,t,r);return e=>{let t=n(e);for(let e=1,r=t.length;e<r;++e){let r=t[e-1],n=t[e];for(let e of r)n.push(e)}return t}}:Rx)(a,o,s),a};return s.label=Ei(t),s}function Rm(e,t,r){return EJ(e,t,r,Rg)}function Rg(e,t,r){return EK(e,t,r,Ry)}function Ry(e,t){return E1(e,t,Rb)}function Rb(e){switch(`${e}`.toLowerCase()){case"x":return Rk;case"x1":return RS;case"x2":return RC;case"y":return RO;case"y1":return RT;case"y2":return RA;case"z":return Nu}throw Error(`invalid bin reduce: ${e}`)}function Rv(e,t,r){return Math.min(200,rl(e,t,r))}function Rx(e,t,r){return t=MF(t),n=>{var i;let s=e.map(()=>[]);for(let e of n)null==(i=s[(0,T.a5)(t,r[e])-1])||i.push(e);return s}}function Rw(e,t){let r=(+e+ +t)/2;return e instanceof Date?new Date(r):r}let Rk={reduceIndex:(e,t,{x1:r,x2:n})=>Rw(r,n)},RO={reduceIndex:(e,t,{y1:r,y2:n})=>Rw(r,n)},RS={reduceIndex:(e,t,{x1:r})=>r},RC={reduceIndex:(e,t,{x2:r})=>r},RT={reduceIndex:(e,t,{y1:r})=>r},RA={reduceIndex:(e,t,{y2:r})=>r},RM={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};class RE extends _0{constructor(e,t={}){let{x:r,y:n,r:i,rotate:s,symbol:o=cy,frameAnchor:a}=t,[l,c]=MU(s,0),[h,u]=function(e){if(null==e||E$(e))return[void 0,e];if("string"==typeof e){let t=Eq.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}(o),[d,f]=MU(i,null==h?3:4.5);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:n,scale:"y",optional:!0},r:{value:d,scale:"r",filter:A8,optional:!0},rotate:{value:l,optional:!0},symbol:{value:h,scale:"auto",optional:!0}},function(e){return void 0===e.sort&&void 0===e.reverse?function(e,{sort:t,...r}={}){return{...(M5(e)&&void 0!==e.channel?EV:function(e,t){return(null!=e.initializer?EV:EQ)(e,t)})(r,EX(e)),sort:M3(t)?t:null}}({channel:"-r"},e):e}(t),RM),this.r=f,this.rotate=c,this.symbol=u,this.frameAnchor=EC(a);let{channels:p}=this,{symbol:m}=p;if(m){let{fill:e,stroke:t}=p;m.hint={fill:e?e.value===m.value?"color":"currentColor":this.fill??"currentColor",stroke:t?t.value===m.value?"color":"currentColor":this.stroke??"none"}}}render(e,t,r,n,i){let{x:s,y:o}=t,{x:a,y:l,r:c,rotate:h,symbol:u}=r,{r:d,rotate:f,symbol:p}=this,[m,g]=_K(this,n),y=p===cy,b=c?void 0:d*d*Math.PI;return A9(d)&&(e=[]),_M("svg:g",i).call(_Q,this,n,i).call(_U,this,{x:a&&s,y:l&&o}).call(t=>t.selectAll().data(e).enter().append(y?"circle":"path").call(_V,this).call(y?e=>{e.attr("cx",a?e=>a[e]:m).attr("cy",l?e=>l[e]:g).attr("r",c?e=>c[e]:d)}:e=>{e.attr("transform",jA`translate(${a?e=>a[e]:m},${l?e=>l[e]:g})${h?e=>` rotate(${h[e]})`:f?` rotate(${f})`:""}`).attr("d",c&&u?e=>{let t=rY();return u[e].draw(t,c[e]*c[e]*Math.PI),t}:c?e=>{let t=rY();return p.draw(t,c[e]*c[e]*Math.PI),t}:u?e=>{let t=rY();return u[e].draw(t,b),t}:(()=>{let e=rY();return p.draw(e,b),e})())}).call(_L,this,r)).node()}}let RN={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class R_ extends _0{constructor(e,t={}){let{x:r,y:n,z:i,curve:s,tension:o}=t;super(e,{x:{value:r,scale:"x"},y:{value:n,scale:"y"},z:{value:M7(t),optional:!0}},t,RN),this.z=i,this.curve=function(e=Rd,t){return"function"!=typeof e&&"auto"===`${e}`.toLowerCase()?Rd:function(e=cu,t){if("function"==typeof e)return e;let r=Ru.get(`${e}`.toLowerCase());if(!r)throw Error(`unknown curve: ${e}`);if(void 0!==t){if("beta"in r)return r.beta(t);if("tension"in r)return r.tension(t);if("alpha"in r)return r.alpha(t)}return r}(e,t)}(s,o),ji(this,t)}filter(e){return e}project(e,t,r){this.curve!==Rd&&super.project(e,t,r)}render(e,t,r,n,i){let{x:s,y:o}=r,{curve:a}=this;return _M("svg:g",i).call(_Q,this,n,i).call(_U,this,t).call(t=>{var n,l,c;return t.selectAll().data(function*(e,t,r,n){let{z:i}=r,{z:s}=n,o=function({ariaLabel:e,title:t,fill:r,fillOpacity:n,stroke:i,strokeOpacity:s,strokeWidth:o,opacity:a,href:l},{tip:c}){return[e,c?void 0:t,r,n,i,s,o,a,l].filter(e=>void 0!==e)}(n,r),a=[...t,...o];for(let t of s?function(e,t,r){let n=tX(e,e=>t[e]);return void 0===r&&n.size>1+e.length>>1&&NV("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),n.values()}(e,s,i):[e]){let e,r;e:for(let n of t){for(let e of a)if(!A4(e[n])){r&&r.push(-1);continue e}if(void 0===e){r&&(yield r),e=o.map(e=>Et(e[n])),r=[n];continue}r.push(n);for(let t=0;t<o.length;++t)if(Et(o[t][n])!==e[t]){yield r,e=o.map(e=>Et(e[n])),r=[n];continue e}}r&&(yield r)}}(e,[s,o],this,r)).enter().append("path").call(_V,this).call(_q,this,r).call(jf,this,r,i).attr("d",a===Rd&&i.projection?(n=i.path(),l=s,c=o,l=MF(l),c=MF(c),e=>{let t=[],r=[t];for(let n of e)-1===n?(t=[],r.push(t)):t.push([l[n],c[n]]);return n({type:"MultiLineString",coordinates:r})}):(function(e,t){let r;var n=cn(!0),i=null,s=cu,o=null,a=(r=3,l.digits=function(e){if(!arguments.length)return r;if(null==e)r=null;else{let t=Math.floor(e);if(!(t>=0))throw RangeError(`invalid digits: ${e}`);r=t}return l},()=>new rX(r));function l(r){var l,c,h,u,d=(r="object"==typeof(l=r)&&"length"in l?l:Array.from(l)).length,f=!1;for(null==i&&(o=s(u=a())),c=0;c<=d;++c)!(c<d&&n(h=r[c],c,r))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(h,c,r),+t(h,c,r));if(u)return o=null,u+""||null}return e="function"==typeof e?e:void 0===e?cd:cn(e),t="function"==typeof t?t:void 0===t?cf:cn(t),l.x=function(t){return arguments.length?(e="function"==typeof t?t:cn(+t),l):e},l.y=function(e){return arguments.length?(t="function"==typeof e?e:cn(+e),l):t},l.defined=function(e){return arguments.length?(n="function"==typeof e?e:cn(!!e),l):n},l.curve=function(e){return arguments.length?(s=e,null!=i&&(o=s(i)),l):s},l.context=function(e){return arguments.length?(null==e?i=o=null:o=s(i=e),l):i},l})().curve(a).defined(e=>e>=0).x(e=>s[e]).y(e=>o[e]))}).node()}}_0.prototype.plot=function({marks:e=[],...t}={}){return D6({...t,marks:[...e,this]})};var Rj={exports:{}};!function(e,t){var r,n,i,s;M.w,n="minute",i=/[+-]\d\d(?::?\d\d)?/g,s=/([+-]|\d\d)/g,e.exports=function(e,t,r){var o=t.prototype;r.utc=function(e){var r={date:e,utc:!0,args:arguments};return new t(r)},o.utc=function(e){var t=r(this.toDate(),{locale:this.$L,utc:!0});return e?t.add(this.utcOffset(),n):t},o.local=function(){return r(this.toDate(),{locale:this.$L,utc:!1})};var a=o.parse;o.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),a.call(this,e)};var l=o.init;o.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else l.call(this)};var c=o.utcOffset;o.utcOffset=function(e,t){var r=this.$utils().u;if(r(e))return this.$u?0:r(this.$offset)?c.call(this):this.$offset;if("string"==typeof e&&null===(e=function(e){void 0===e&&(e="");var t=e.match(i);if(!t)return null;var r=(""+t[0]).match(s)||["-",0,0],n=r[0],o=60*+r[1]+ +r[2];return 0===o?0:"+"===n?o:-o}(e)))return this;var o=16>=Math.abs(e)?60*e:e,a=this;if(t)return a.$offset=o,a.$u=0===e,a;if(0!==e){var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(a=this.local().add(o+l,n)).$offset=o,a.$x.$localOffset=l}else a=this.utc();return a};var h=o.format;o.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return h.call(this,t)},o.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var u=o.toDate;o.toDate=function(e){return"s"===e&&this.$offset?r(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():u.call(this)};var d=o.diff;o.diff=function(e,t,n){if(e&&this.$u===e.$u)return d.call(this,e,t,n);var i=this.local(),s=r(e).local();return d.call(i,s,t,n)}}}(Rj);var RD=Rj.exports;let RR=(0,M.y)(RD);M.D.extend(RR);let RP={type:"line",x:null,y:null,xLabel:"X Axis",yLabel:"Y Axis",backgroundColor:"transparent",fontSize:12,title:"",lineWidth:3,pointColor:"steelblue",yAxisUnitLabel:"",yAxisUnitPosition:"suffix",showLabels:!1,margin:{top:20,right:30,bottom:150,left:60},dateFormat:"%Y-%m-%d",color:{legend:!0}},RI=(e,t,r,n,i)=>{var s,o,a,l,c,h,u,d;if(0===e.width||0===e.height||!t.x||!t.y||Array.isArray(t.y)&&0===t.y.length)return null;let f=t.filter&&"function"==typeof t.filter?r.filter(t.filter):r,p=function(e,t,r,n){var i;let s;let o={...RP,...t},a=function(e,t,r,n){var i;let s={line:Rz,bar:RL,scatter:Rq};return(null==(i=s[t.type])?void 0:i.call(s,e,t,r,n))||[]}(e,o,r,n);return"bar"!==t.type&&(i=o,s=Dt({lineHeight:1.2,tickSize:0,nice:!0,rotate:-45,textAnchor:"end",tickFormat:(e,t,r)=>{if("bar"===i.type)return null;if(i.xIsDate){let t;try{t=M.D.utc(e)}catch{t=e}let n=M.D.utc(r[0]),i=M.D.utc(r[r.length-1]).diff(n,"day");return i>365?1===t.date()&&t.month()%3==0?t.format("MMM YYYY"):null:i>90?1===t.date()?t.format("MMM YYYY"):null:i>14?1===t.day()?t.format("MMM DD"):null:t.format("MMM DD")}return i.xTicks&&t%Math.ceil(r.length/i.xTicks)==0?e:null}})),[...s?[s]:[],...a]}(f,{...t},n,i),m=t.xIsDate;if(void 0===m){let e=t.x;if(e&&r&&r.length>0){let t=r[0][e],n="string"==typeof t&&(/^\d{4}-\d{2}-\d{2}/.test(t)||!isNaN(new Date(t).getTime())),i="string"==typeof e&&/date|year|month|week|time/gi.test(e);m=n||i}}else m=!!m;if(t.facet&&"bar"!==t.type){let e=Array.from(new Set(f.map(e=>e[t.facet]))),r=e.map((e,t)=>t%2),n=e.map((e,t)=>parseInt(t/2));f.forEach((i,s)=>{let o=e.indexOf(i[t.facet]);i.facetIndex=o,i.facetXLocation=r[o],i.facetYLocation=n[o]}),Array.from(e).map((t,i)=>{let s=e.indexOf(t),o=r[s],a=n[s],l="string"==typeof t&&t.length>20?t.substring(0,27)+"...":t;p.push(jj([l],{fx:o,fy:a,frameAnchor:"top",monospace:!0,fontSize:12,textAnchor:"middle"}))})}let g={width:e.width,height:e.height,marginTop:(null==(s=null==t?void 0:t.margin)?void 0:s.top)??(null==(o=null==RP?void 0:RP.margin)?void 0:o.top),marginRight:(null==(a=null==t?void 0:t.margin)?void 0:a.right)??(null==(l=null==RP?void 0:RP.margin)?void 0:l.right),marginBottom:(null==(c=null==t?void 0:t.margin)?void 0:c.bottom)??(null==(h=null==RP?void 0:RP.margin)?void 0:h.bottom),marginLeft:(null==(u=null==t?void 0:t.margin)?void 0:u.left)??(null==(d=null==RP?void 0:RP.margin)?void 0:d.left),style:{backgroundColor:t.backgroundColor,overflow:"visible",fontSize:t.fontSize},color:{legend:!0,tickFormat:e=>"string"==typeof e&&e.length>25?e.substring(0,25)+(e.length>25?"...":""):e,swatchSize:10,style:{marginBottom:"1em"}},y:{grid:t.yGrid,nice:!0,label:t.yLabel||t.y,labelOffset:22},x:{grid:t.xGrid,label:t.xLabel||t.x},marks:p,facet:{label:t.xLabel}};return t.facet&&"bar"!==t.type&&(g.facet={data:f,x:"facetXLocation",y:"facetYLocation",axis:null}),g};function Rz(e,t,r,n){var i;let s=[],o=t.aggregateFunction||"sum",{x:a,y:l,facet:c,colorBy:h}=t;return n.filter(e=>"categorical"===e.variableType&&e.title!==a&&e.title!==l&&e.title!==r.x&&e.title!==t.facet&&-1===r.y.indexOf(e.title)).slice(0,5),s.push(function(e,{x:t=MD,y:r=MR,...n}={}){return new R_(e,function(e={}){return function(e,t,r={}){if((null==r?void 0:r.interval)==null)return r;let{reduce:n=Nr}=r,i={filter:null};return null!=r.y&&(i.y=n),null!=r[`${t}1`]&&(i[`${t}1`]=n),null!=r[`${t}2`]&&(i[`${t}2`]=n),e(i,r)}(Rf,"y",_4(e,"x"))}({...n,x:t,y:r}))}(e,function(e={y:"count"},t={}){let{x:r=MR}=t;if(null==r)throw Error("missing channel: x");return function(e,t,{data:r=Nt,filter:n,sort:i,reverse:s,...o}={},a={}){o=EZ(o,a,E4),r=E3(r,MR),i=null==i?void 0:E4("sort",i,a),n=null==n?void 0:E5("filter",n,a);let[l,c]=En(e),[h,u]=En(null),{z:d,fill:f,stroke:p,x1:m,x2:g,y1:y,y2:b,...v}=a,[x,w]=En(d),[k]=MW(f),[O]=MW(p),[S,C]=En(k),[T,A]=En(O);return{..."z"in a&&{z:x||d},..."fill"in a&&{fill:S||f},..."stroke"in a&&{stroke:T||p},...EQ(v,(a,l,h)=>{let f=Eo(MT(a,e),null==h?void 0:h.x),p=Eo(MT(a,t),null==h?void 0:h.y),m=MT(a,d),g=MT(a,k),y=MT(a,O),b=E7(o,{z:m,fill:g,stroke:y}),v=[],x=[],S=f&&c([]),T=p&&u([]),M=m&&w([]),E=g&&C([]),N=y&&A([]),_=0;for(let e of o)e.initialize(a);for(let e of(i&&i.initialize(a),n&&n.initialize(a),l)){let t=[];for(let t of o)t.scope("facet",e);for(let[s,l]of(i&&i.scope("facet",e),n&&n.scope("facet",e),E0(e,b)))for(let[e,c]of E0(l,p))for(let[l,h]of E0(c,f)){let c={data:a};if(f&&(c.x=l),p&&(c.y=e),b&&(c.z=s),!(n&&!n.reduce(h,c))){for(let n of(t.push(_++),x.push(r.reduceIndex(h,a,c)),f&&S.push(l),p&&T.push(e),m&&M.push(b===m?s:m[h[0]]),g&&E.push(b===g?s:g[h[0]]),y&&N.push(b===y?s:y[h[0]]),o))n.reduce(h,c);i&&i.reduce(h,c)}}v.push(t)}return E8(v,i,s),{data:x,facets:v}}),...!EY(o,"x")&&(l?{x:l}:{x1:m,x2:g}),...!EY(o,"y")&&(h?{y:h}:{y1:y,y2:b}),...Object.fromEntries(o.map(({name:e,output:t})=>[e,t]))}}(r,null,e,t)}({y:o},{x:t.x,y:t.y,filter:t.filter,stroke:h||"label",strokeWidth:e=>{var r,n;let i=null==(r=null==e?void 0:e[0])?void 0:r.label;return i&&null!=(n=t.lineOptions)&&n[i]&&t.lineOptions[i].strokeWidth?t.lineOptions[i].strokeWidth:t.lineWidth},curve:(null==(i=t.lineOptions)?void 0:i.curve)||t.curve,tip:{format:{x:e=>`${e}`,y:e=>`${e}`,strokeWidth:!1,stroke:!1}}}))),s}function RL(e,t){var r;let n;let i=t.aggregateFunction||"sum",s=(r=e.map(e=>({label:e[t.x||"label"],value:e[t.y||"value"],facet:e[t.facet||"facet"]})),n=[],"sum"==i?n=r.reduce((e,t)=>{let{label:r,value:n,facet:i}=t,s=e.find(e=>e.label===r&&e.facet===i);return s?s.value+=n:e.push({label:r,value:n,facet:i}),e},[]):"count"==i?n=r.reduce((e,t)=>{let{label:r,facet:n}=t,i=e.find(e=>e.label===r&&e.facet===n);return i?i.value+=1:e.push({label:r,value:1,facet:n}),e},[]):"mean"==i&&(n=(n=r.reduce((e,t)=>{let{label:r,value:n,facet:i}=t,s=e.find(e=>e.label===r&&e.facet===i);return s?s.value+=n:e.push({label:r,value:n,facet:i}),e},[])).map(e=>({...e,value:e.value/r.filter(t=>t.label===e.label&&t.facet===e.facet).length}))),n);return[function(e,t={}){var r;return function({x:e,x1:t,x2:r}){return void 0!==e||void 0!==t||void 0!==r}(r=t)||M1(r)||void 0!==r.interval||(t={...t,x:MD,y2:MR,interval:1}),new DB(e,function({y:e,y1:t,y2:r,...n}={}){return n=_4(n,"x"),void 0===t&&void 0===r?function(e={},t={}){1==arguments.length&&([e,t]=function(e){let{offset:t,order:r,reverse:n,...i}=e;return[{offset:t,order:r,reverse:n},i]}(e));let{x1:r,x:n=r,y:i,...s}=t,[o,a,l,c]=function(e,t=MP,r,n,{offset:i,order:s,reverse:o},a){if(null===t)throw Error("stack requires y");let l=M7(a),[c,h]=En(e),[u,d]=Er(t),[f,p]=Er(t);return u.hint=f.hint=DN,i=function(e){if(null!=e){if("function"==typeof e)return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return Dj;case"center":case"silhouette":return DD;case"wiggle":return DR}throw Error(`unknown offset: ${e}`)}}(i),s=function(e,t,r){if(void 0===e&&t===DR)return Dz(A5);if(null!=e){var n,i,s;if("string"==typeof e){let t=e.startsWith("-"),s=t?A3:A5;switch((t?e.slice(1):e).toLowerCase()){case"value":case r:return n=s,(e,t,r)=>(e,t)=>n(r[e],r[t]);case"z":return i=s,(e,t,r,n)=>(e,t)=>i(n[e],n[t]);case"sum":return Dq(s,(e,t,r,n)=>t1(M9(e),e=>rd(e,e=>r[e]),e=>n[e]));case"appearance":return Dq(s,(e,t,r,n)=>t1(M9(e),e=>t[rs(e,e=>r[e])],e=>n[e]));case"inside-out":return Dz(s)}return DL(Mj(e))}if("function"==typeof e)return(1===e.length?DL:function(e){return t=>Mk(t)?(r,n)=>e(t[r],t[n]):(r,n)=>e(t.get(r),t.get(n))})(e);if(Mk(e)){return s=e,Dq(A5,()=>s)}throw Error(`invalid order: ${e}`)}}(s,i,n),[EQ(a,(r,n,a)=>{({data:r,facets:n}=function(e,t){if(1===t.length)return{data:e,facets:t};let r=M8(e),n=new Uint8Array(r),i=0;for(let e of t)for(let t of e)n[t]&&++i,n[t]=1;if(0===i)return{data:e,facets:t};let s=(e=M0(e))[MC]=new Uint32Array(r+i);t=t.map(e=>M0(e,Uint32Array));let o=r;for(let r of(n.fill(0),t))for(let t=0,i=r.length;t<i;++t){let i=r[t];n[i]?(r[t]=o,e[o]=e[i],s[o]=i,++o):s[i]=i,n[i]=1}return{data:e,facets:t}}(r,n));let c=null==e?void 0:h(Eo(MT(r,e),null==a?void 0:a.x)),u=MT(r,t,Float64Array),f=MT(r,l),m=s&&s(r,c,u,f),g=M8(r),y=d(new Float64Array(g)),b=p(new Float64Array(g)),v=[];for(let e of n){let t=c?Array.from(tX(e,e=>c[e]).values()):[e];if(m)for(let e of t)e.sort(m);for(let e of t){let t=0,r=0;for(let n of(o&&e.reverse(),e)){let e=u[n];e<0?t=b[n]=(y[n]=t)+e:e>0?r=b[n]=(y[n]=r)+e:b[n]=y[n]=r}}v.push(t)}return i&&i(v,y,b,f),{data:r,facets:n}}),c,u,f]}(n,i,"x","y",e,s);return{...o,x1:r,x:a,y1:l,y2:c,y:Es(l,c)}}({y:e,...n}):([t,r]=function(e,t,r,n=MR){return void 0===t&&void 0===r?(t=0,r=void 0===e?n:e):void 0===t?t=void 0===e?0:e:void 0===r&&(r=void 0===e?0:e),[t,r]}(e,t,r),{...n,y1:t,y2:r})}(function(e={}){return jv("x",jm,e,!0)}(function(e={},t="y"){return M1(e)?e:{...e,[t]:MR}}(t))))}(s=t.xIsDate?s.map(e=>({...e,facet:M.D.utc(e.facet)})):function(e){let t=new Set(e.reduce((e,t)=>{let r=e.find(e=>e.facet===t.facet);return r?r.value+=t.value:e.push({...t}),e},[]).sort((e,t)=>t.value-e.value).slice(0,10).map(e=>e.facet)),r={};e.forEach(e=>{t.has(e.facet)||(r[e.label]=(r[e.label]||0)+e.value)});let n=Object.entries(r).map(([e,t])=>({label:e,value:t,facet:"Others"}));return[...e.filter(e=>t.has(e.facet)),...n]}(s),{x:"label",y:"value",fx:"facet",fill:"label",sort:t.xIsDate?void 0:{fx:{value:"-y"}},tip:{format:{x:e=>e,y:e=>e,fill:!1}}})]}function Rq(e,t,r,n){let{x:i,y:s,colorBy:o}=t;return n.filter(e=>"categorical"===e.variableType&&e.title!==i&&e.title!==s&&e.title!==r.x&&e.title!==t.facet&&-1===r.y.indexOf(e.title)).slice(0,5),[function(e,{x:t,y:r,...n}={}){return void 0===n.frameAnchor&&([t,r]=M6(t,r)),new RE(e,{...n,x:t,y:r})}(e,{x:t.x,y:t.y,filter:t.filter,fill:t.colorBy||t.pointColor,r:t.pointSize,fillOpacity:.7,tip:{format:{x:e=>e,y:e=>e}}})]}function R$(e){let t=`scheme${e}`,r=`interpolate${e}`;return cr[t]?{colorScheme:Array.isArray(cr[t].slice(-1)[0])?cr[t][5]:cr[t],schemeName:t}:cr[r]?{colorScheme:cr[r],schemeName:r}:{colorScheme:null,schemeName:null}}function RB(e,t,r){var n,i,s,o,a,l,c,h,u,d,f;let p=null,{selectedChart:m,selectedColumns:g,chartStyle:y,chartSpecificOptions:b,availableColumns:v,data:x}=r.config,w=v.find(e=>e.key===g.x);if(null!=w&&w.isDate){let e=M.D.min(x.map(e=>M.D.utc(e[w.key]))),t=(M.D.max(x.map(e=>M.D.utc(e[w.key])))-e)/1e3/60/60/24;t<14?w.rangeToShow="day":t<120?w.rangeToShow="week":t<1095?w.rangeToShow="month":w.rangeToShow="year"}if(!g.x||!g.y||Array.isArray(g.y)&&!(null!=(n=null==g?void 0:g.y)&&n.length))p=null;else{let e=x,r=v.find(e=>e.key===b[m].colorBy);if("bar"===m)try{null!=(i=b[m])&&i.filter&&"function"!=typeof b[m].filter&&(console.warn("Invalid filter option detected, removing:",b[m].filter),b[m].filter=null),e=(0,M.E)(e,g.x,g.y,b[m].colorBy,b[m].colorByIsDate,g.facet)}catch(e){console.error("Error converting wide to long format for bar chart",e)}if(null!=(s=b[m])&&s.filter&&"function"!=typeof b[m].filter&&(console.warn("Invalid filter option detected, removing:",b[m].filter),b[m].filter=null),"bar"!==m&&"line"!==m)p=RI(t,{...RP,type:m||"Bar",x:g.x||null,y:g.y||null,facet:g.facet,filter:null==(o=b[m])?void 0:o.filter,xIsDate:null==w?void 0:w.isDate,colorByIsDate:null==r?void 0:r.isDate,...y,...b[m]},e,g,v);else if("bar"===m)p=RI(t,{...RP,type:m,x:g.x&&(null==(a=null==g?void 0:g.y)?void 0:a.length)&&"label",y:g.x&&null!=(l=null==g?void 0:g.y)&&l.length?"value":null,facet:g.x||null,filter:null==(c=b[m])?void 0:c.filter,xIsDate:null==w?void 0:w.isDate,colorByIsDate:null==r?void 0:r.isDate,...y,...b[m]},e,g,v);else if("line"===m){let e=(0,M.E)(x,g.x,g.y,b[m].colorBy,null==r?void 0:r.isDate,g.facet);null!=(h=b[m])&&h.filter&&"function"!=typeof b[m].filter&&(console.warn("Invalid filter option detected for line chart, removing:",b[m].filter),b[m].filter=null),p=RI(t,{...RP,type:m,x:g.x||null,y:g.x&&g.y.length?"value":null,stroke:"label",facet:g.facet||null,filter:null==(u=b[m])?void 0:u.filter,xIsDate:null==w?void 0:w.isDate,colorByIsDate:null==r?void 0:r.isDate,...y,...b[m]},e,g,v)}}if(e.innerHTML="",e.style.padding="0 0 0 0",!x||0===x.length)return e.innerHTML=`<div class='flex items-center justify-center h-full w-full text-gray-500 dark:text-gray-400 flex-col'>
      <div class="flex items-center gap-2 mb-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <span class="text-sm font-medium">No data to display</span>
      </div>
      <p class="text-xs text-center max-w-sm">
        Please ensure data is available for visualization
      </p>
    </div>`,null;if(p){if("bar"===m){let{colorScheme:t}=R$(y.selectedScheme),r=g.y,n=(null==(d=null==b?void 0:b.bar)?void 0:d.barOptions)||{},i=-1,s=r.map(e=>n[e]&&n[e].fill?n[e].fill:Array.isArray(t)?t[++i%t.length]:t(i/r.length)),o={...p,color:b[m].colorBy?{legend:!0,tickFormat:e=>"string"==typeof e&&e.length>25?e.substring(0,25)+(e.length>25?"...":""):e,style:{marginBottom:"1em"}}:{...p.color,scheme:void 0,domain:r,range:s,legend:!0,tickFormat:e=>"string"==typeof e&&e.length>25?e.substring(0,25)+(e.length>25?"...":""):e,style:{marginBottom:"1em"}},fx:{grid:!1,tickRotate:-45,tickFormat:e=>{let t;if(null!=w&&w.isDate){let r=M.D.utc(e);t="year"===w.rangeToShow?r.format("YYYY"):"month"===w.rangeToShow?r.format("MMM YYYY"):r.format("MMM DD")}else t=String(e);return t&&t.length>18?t.substring(0,15)+"...":t},axis:"bottom",interval:null!=w&&w.isDate?w.rangeToShow:void 0},x:{axis:null,label:""}};e.appendChild(D6(o))}else if("line"===m){let{colorScheme:t}=R$(y.selectedScheme),r=g.y,n=(null==(f=null==b?void 0:b.line)?void 0:f.lineOptions)||{},i=-1,s=r.map(e=>n[e]&&n[e].stroke?n[e].stroke:Array.isArray(t)?t[++i%t.length]:t(i/r.length));e.appendChild(D6({...p,color:b[m].colorBy?{legend:!0,tickFormat:e=>"string"==typeof e&&e.length>25?e.substring(0,25)+(e.length>25?"...":""):e,style:{marginBottom:"1em"}}:{...p.color,scheme:void 0,domain:r,range:s,legend:!0,tickFormat:e=>"string"==typeof e&&e.length>25?e.substring(0,25)+(e.length>25?"...":""):e,style:{marginBottom:"1em"}}}))}else e.appendChild(D6(p));let t=e.querySelector("[aria-label^='x-axis tick label'], [aria-label^='fx-axis tick label']"),r=e.querySelector("[aria-label^='y-axis tick label']"),n=e.querySelector("[aria-label^='x-axis label'], [aria-label^='fx-axis label']"),i=e.querySelector("[aria-label^='y-axis label']"),s=0,o=0;if(t)try{let r=e.getBoundingClientRect().bottom,i=t.getBoundingClientRect().bottom-r+20;if(s=i=i>0?i:0,n){let[e,t]=n.getAttribute("transform").split("(")[1].slice(0,-1).split(",").map(e=>parseFloat(e)),r=t+i;n.setAttribute("transform",`translate(${e}, ${r})`)}}catch{}if(r)try{let t=e.getBoundingClientRect().left,n=r.getBoundingClientRect().left,s=n-t-20;if(o=s<0?Math.abs(s):0,i){let[e,t]=i.getAttribute("transform").split("(")[1].slice(0,-1).split(",").map(e=>parseFloat(e)),r=i.getBoundingClientRect().left,s=e;r>n&&(s=e-(r-n)-20),i.setAttribute("transform",`translate(${s}, ${t})`)}}catch{}let a=e.children[0];a&&(a.style.padding=`0 0 ${s}px ${o}px`)}else e.innerHTML=`<div class='flex items-center justify-center h-full w-full text-gray-500 dark:text-gray-400 flex-col'>
      <div class="flex items-center gap-2 mb-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="8" y1="6" x2="21" y2="6"></line>
          <line x1="8" y1="12" x2="21" y2="12"></line>
          <line x1="8" y1="18" x2="21" y2="18"></line>
          <line x1="3" y1="6" x2="3.01" y2="6"></line>
          <line x1="3" y1="12" x2="3.01" y2="12"></line>
          <line x1="3" y1="18" x2="3.01" y2="18"></line>
        </svg>
        <span class="text-sm font-medium">Select axes to display chart</span>
      </div>
      <p class="text-xs text-center max-w-sm">
        Please select both X and Y axes from the options panel to generate a visualization.
      </p>
    </div>`;return p&&(p.wasSampled=!1),p}M.D.extend(RR),M.D.extend(As);let RF=[{name:"square",label:T.j.jsxs("span",{children:[T.j.jsx("span",{className:"hidden md:inline",children:"Square("})," 800\xd7800",T.j.jsx("span",{className:"hidden md:inline",children:")"})]}),width:800,height:800},{name:"rectangle",label:T.j.jsxs("span",{children:[T.j.jsx("span",{className:"hidden md:inline",children:"Rectangle("})," 1280\xd7600",T.j.jsx("span",{className:"hidden md:inline",children:")"})]}),width:1280,height:600}],RQ={idle:T.j.jsxs("div",{className:"flex items-center animate-fade-up",children:[T.j.jsx(T.ac,{size:16,className:"md:mr-2"}),T.j.jsx("span",{className:"hidden md:block",children:"Download PNG"})]}),downloading:T.j.jsxs("div",{className:"flex items-center animate-fade-up",children:[T.j.jsx(T.ad,{size:16,className:"mr-2 animate-spin"}),"Downloading..."]}),saved:T.j.jsxs("div",{className:"flex items-center animate-fade-up",children:[T.j.jsx(T.ac,{size:16,className:"mr-2"}),"Saved"]})};function RV({isOpen:e,onClose:t,className:r=""}){let[n,i]=(0,A.useState)({width:800,height:800}),s=(0,A.useRef)(null),o=(0,A.useRef)(null),a=(0,A.useRef)(null),l=(0,A.useRef)(null),c=(0,A.useContext)(TY),[h,u]=(0,A.useState)("idle");(0,A.useEffect)(()=>{e&&o.current&&o.current.focus()},[e]),(0,A.useEffect)(()=>{e&&s.current&&RB(s.current,n,c)},[e,n]);let d=(e,t)=>{let r=parseInt(t)||0;i(t=>({...t,[e]:r}))};(0,A.useEffect)(()=>{e&&(d("width",n.width),d("height",n.height))},[e]);let f=()=>{setTimeout(()=>{u("idle")},2e3)},p=async()=>{try{let e=a.current.value?l.current:s.current;await function(e,t={}){if(!e)return;let{bg:r="white",width:n=1e3,height:i=1e3,filename:s="chart.png"}=t,o={width:e.style.width,height:e.style.height,position:e.style.position,overflow:e.style.overflow,transform:e.style.transform,transformOrigin:e.style.transformOrigin,padding:e.style.padding,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,backgroundColor:e.style.backgroundColor},a=e.querySelectorAll("text, .tick text, .axis-label, .title"),l=new Map;a.forEach(e=>{l.set(e,{fill:e.style.fill||window.getComputedStyle(e).fill,stroke:e.style.stroke||window.getComputedStyle(e).stroke,color:e.style.color||window.getComputedStyle(e).color})});let c=()=>{Object.assign(e.style,{width:o.width,height:o.height,position:o.position,overflow:o.overflow,transform:o.transform,transformOrigin:o.transformOrigin,padding:o.padding,backgroundColor:o.backgroundColor}),e.scrollTop=o.scrollTop,e.scrollLeft=o.scrollLeft,a.forEach(e=>{let t=l.get(e);t&&(e.style.fill=t.fill,e.style.stroke=t.stroke,e.style.color=t.color)})};try{Object.assign(e.style,{width:`${e.scrollWidth}px`,height:`${e.scrollHeight}px`,position:"relative",overflow:"visible",transform:"none",transformOrigin:"top left",padding:"0px",backgroundColor:r}),e.scrollTop=0,e.scrollLeft=0,a.forEach(e=>{e.style.fill="#000000",e.style.stroke="none",e.style.color="#000000"});let t=e.offsetWidth,o=e.offsetHeight,l=e.cloneNode(!0);Object.assign(l.style,{transform:`scale(${n/t}, ${i/o})`,transformOrigin:"top left",width:`${t}px`,height:`${o}px`});let h=document.createElement("div");return Object.assign(h.style,{position:"absolute",top:"-10000px",left:"-10000px"}),h.appendChild(l),document.body.appendChild(h),A2(l,{backgroundColor:r,pixelRatio:2,width:e.scrollWidth,height:e.scrollHeight,style:{transform:"none",transformOrigin:"top left"}}).then(e=>{let t=document.createElement("a");t.download=s,t.href=e,t.click()}).finally(()=>{c(),document.body.removeChild(h)})}catch(e){throw c(),console.error("Failed to export chart:",e),e}}(e,n),u("saved"),f()}catch(e){u("idle"),console.error("Failed to download:",e)}};return T.j.jsxs(T.e,{open:e,onCancel:t,className:r,contentClassNames:"max-w-fit",footer:!1,rootClassNames:"z-[10000] max-h-full",title:"Export Chart",children:[T.j.jsx("div",{className:"pb-4 z-10",children:T.j.jsxs("div",{className:"flex items-start md:items-center justify-between gap-2",children:[T.j.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[T.j.jsxs("div",{className:"flex items-center gap-2",children:[T.j.jsx(T.N,{ref:o,type:"number",placeholder:"Width",value:n.width,onChange:e=>d("width",e.target.value),inputClassNames:"w-24 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-blue-400"}),T.j.jsx("span",{className:"text-sm font-medium text-gray-400",children:"\xd7"}),T.j.jsx(T.N,{type:"number",placeholder:"Height",value:n.height,onChange:e=>d("height",e.target.value),inputClassNames:"w-24 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-blue-400"})]}),T.j.jsx("div",{className:"flex gap-2",children:RF.map(e=>T.j.jsx("button",{onClick:()=>i({width:e.width,height:e.height}),className:`px-3 py-1.5 rounded-md text-sm transition-all duration-200 
                    bg-white hover:bg-gray-50 border border-gray-200 hover:border-gray-300
                    shadow-sm hover:shadow backdrop-blur-sm
                    hover:-translate-y-0.5
                    dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-600`,children:e.label},e.name))})]}),T.j.jsx("button",{onClick:()=>{u("downloading"),p()},disabled:"idle"!==h,className:`flex text-center justify-center items-center px-4 py-1.5 text-sm font-medium text-white bg-blue-600 
                rounded-md hover:bg-blue-700 transition-all duration-200 
                shadow-sm hover:shadow-md hover:-translate-y-0.5
                disabled:bg-blue-400 disabled:cursor-not-allowed disabled:hover:translate-y-0
                overflow-hidden
                dark:bg-blue-700 dark:hover:bg-blue-800`,children:RQ[h]})]})}),T.j.jsxs("div",{className:"relative bg-white dark:bg-gray-900 overflow-auto max-w-full",ref:l,style:{width:n.width,height:n.height},children:[T.j.jsx(T.N,{ref:a,placeholder:"Add a title",rootClassNames:"*:!text-2xl border-0 *:!text-bold",inputClassNames:"ring-0 outline-0 border-0 !text-2xl shadow-none text-bold p-0"}),T.j.jsx("div",{ref:s,className:"[&_figure]:!p-0",style:{width:n.width,height:n.height}})]})]})}function RH(){let e=(0,A.useRef)(null),[t,r]=(0,A.useState)({width:0,height:0}),[n,i]=(0,A.useState)(!1),s=(0,A.useContext)(TY),o=(0,A.useCallback)(()=>{if(e.current){let{width:t,height:n}=e.current.getBoundingClientRect();r(e=>t!==e.width||n!==e.height?{width:t,height:n}:e)}},[]);(0,A.useEffect)(()=>{let t=new ResizeObserver(o);return e.current&&t.observe(e.current),o(),()=>t.disconnect()},[o]);let a=(0,A.useMemo)(()=>{if(e.current)return RB(e.current,t,s)},[s.config,t]);return(0,A.useEffect)(()=>{let e=e=>{document.activeElement===document.body&&!e.metaKey&&!e.ctrlKey&&!e.altKey&&!e.shiftKey&&(0,T.aa)(e.key,T.a7.SAVE_CHART)&&(i(!0),e.preventDefault())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),T.j.jsxs("div",{className:"mr-4 grow",children:[T.j.jsxs("div",{className:"flex justify-end gap-2 mb-2",children:[a&&(null==a?void 0:a.wasSampled)&&T.j.jsx("div",{className:"text-sm text-gray-500",children:"* Data has been sampled for better visualization"}),T.j.jsxs(T.D,{onClick:()=>i(!0),variant:"ghost",className:`inline-flex items-center px-2.5 py-1.5 rounded-md border border-gray-200/50 
                bg-white/95 hover:bg-gray-50/95 dark:bg-gray-800/95 dark:hover:bg-gray-700/95 
                shadow-sm backdrop-blur-sm transition-all duration-200 
                dark:border-gray-700/50 dark:hover:border-gray-600/50
                hover:shadow-md hover:-translate-y-0.5
                group`,title:`Download chart as PNG (${T.a7.SAVE_CHART})`,children:[T.j.jsx(T.ac,{size:16,className:"mr-1"}),T.j.jsx("span",{className:"mr-1 whitespace-nowrap",children:"Save as PNG"}),T.j.jsx(T.a1,{keyValue:T.a7.SAVE_CHART,className:"opacity-50 group-hover:opacity-100 transition-opacity ml-1 !py-0.5 !px-1.5"})]})]}),T.j.jsx("div",{ref:e,className:"w-full mx-6 border-gray-200 observable-plot h-[500px] overflow-visible observable-plot"}),T.j.jsx(RV,{isOpen:n,onClose:()=>i(!1),sourceChartRef:e})]})}M.D.extend(As);let RW=({isOpen:e,onClick:t})=>T.j.jsx("button",{onClick:t,className:`
      absolute -right-8 top-[50%] -translate-y-[50%]
      h-36 w-8 flex items-center justify-center group
      bg-[#F9FAFB] dark:bg-gray-800 
      border border-gray-200 dark:border-gray-700
      hover:bg-gray-50 dark:hover:bg-gray-700
      transition-colors rounded-r
       z-10
    `,title:`${e?"Collapse":"Expand"} chart options (${T.a7.TOGGLE_CHART_OPTIONS})`,children:T.j.jsxs("div",{className:"relative flex flex-col h-full",children:[T.j.jsx("div",{className:"flex items-center justify-center flex-1",children:T.j.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:T.j.jsx(er,{className:"size-5"})})}),T.j.jsx("div",{className:"absolute -translate-x-1/2 bottom-2 left-1/2",children:T.j.jsx(T.a1,{keyValue:T.a7.TOGGLE_CHART_OPTIONS,className:"scale-75 opacity-75"})})]})}),RU=({block:e,value:t,onChange:r,options:n,className:i=""})=>T.j.jsx("div",{className:`flex ${e?"w-full":"inline-flex"} justify-center  rounded-md p-0.5 bg-gray-200 dark:bg-gray-800 ${i}`,children:n.map((e,n)=>T.j.jsx("button",{onClick:()=>r(e.value),className:`
            flex w-full items-center justify-center gap-1.5 px-3 py-1.5 rounded-[4px]
            text-xs font-medium transition-all duration-150 ease-in-out
            ${t===e.value?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50"}
            ${n>0?"ml-0.5":""}
          `,children:e.label},n))});function RG({rows:e,columns:t,stepData:r,chartManager:n,initialQuestion:i=null,initialOptionsExpanded:s=!1}){let[o,a]=(0,A.useState)(s),l=(0,A.useMemo)(()=>n||(null!=r&&r.chartManager?r.chartManager:TX({data:e,availableColumns:t})),[n,r,e,t]),[c,h]=(0,A.useState)(l.config);(0,A.useEffect)(()=>{l.setConfigCallback=h},[]);let u=(0,A.useContext)(TH),d=(0,A.useContext)(Ws),{apiEndpoint:f,token:p}=u;p||(f=d.apiEndpoint,p=d.token);let m=(0,M.F)({protocol:"http",path:"edit_chart",apiEndpoint:f});(0,A.useContext)(T.a);let{selectedColumns:g}=c;(0,A.useEffect)(()=>{i&&!l.config.loading?l.editChart(p,i,m,{onError:e=>{console.warn("Chart edit warning:",null==e?void 0:e.message)}}):i||l.autoSelectVariables().render()},[]),(0,A.useEffect)(()=>{let e=e=>{document.activeElement===document.body&&e.key===T.a7.TOGGLE_CHART_OPTIONS&&(a(e=>!e),e.preventDefault())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]);let[y,b]=(0,A.useState)("primary");return T.j.jsx(TY.Provider,{value:Object.assign(l,{config:c}),children:T.j.jsx("div",{className:"relative",children:T.j.jsxs("div",{className:"relative flex flex-row gap-3",children:[T.j.jsxs("div",{className:"relative flex",children:[T.j.jsx("div",{className:`
                relative border-r border-gray-200 dark:border-gray-700
                transition-all duration-200 overflow-hidden
                ${o?"w-[350px]":"w-[0px]"}
              `,children:T.j.jsxs("div",{className:`
                  transition-all duration-200 relative
                  overflow-x-hidden h-full
                  ${o?"pr-4":"pr-0"}
                `,children:[T.j.jsx("div",{style:{width:"350px"},children:(()=>{let e=c.availableColumns;return T.j.jsxs("div",{className:"space-y-4",children:[T.j.jsx(T8,{columns:e,showChartTypeOnly:!0}),T.j.jsx("div",{className:"mr-4",children:T.j.jsx(RU,{block:!0,value:y,onChange:e=>b(e),className:"transition-none",options:[{label:T.j.jsxs("div",{className:"flex items-center mt-[0.5px] justify-center gap-1.5 px-3 py-1",children:[T.j.jsx(B,{className:"text-current",size:14}),T.j.jsx("p",{className:"font-sans text-xs font-semibold",children:"General"})]}),value:"primary"},{label:T.j.jsxs("div",{className:"flex items-center mt-[0.5px] justify-center gap-1.5 px-3 py-1",children:[T.j.jsx(et,{className:"text-current",size:14}),T.j.jsx("p",{className:"font-sans text-xs",children:"Style"})]}),value:"customization"}]})}),T.j.jsx("div",{className:"pl-1 pr-4",children:"primary"===y?T.j.jsx(T8,{columns:e,showChartTypeOnly:!1}):T.j.jsx(Ar,{})})]})})()}),T.j.jsx("div",{className:`
                    absolute inset-y-0 left-0 w-24
                    transition-opacity duration-200
                    ${o?"opacity-0 pointer-events-none":"opacity-100"}
                    bg-gradient-to-l from-transparent 
                    via-white/50 to-white
                    dark:via-gray-800/50 dark:to-gray-800
                  `})]})}),T.j.jsx(RW,{isOpen:o,onClick:()=>a(!o)})]}),T.j.jsx("div",{className:`
              transition-all duration-200 flex-1
              ${o?"w-[calc(100%-350px)]":"w-full"}
            `,children:c.loading?T.j.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-64",children:[T.j.jsx("div",{className:"flex items-center justify-center mb-3",children:T.j.jsxs("div",{className:"relative",children:[T.j.jsx(T.I,{chart:!0}),T.j.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-white dark:to-gray-900 opacity-30"})]})}),T.j.jsxs("div",{className:"flex items-center space-x-2 mt-4 text-primary-highlight dark:text-blue-400",children:[T.j.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[T.j.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),T.j.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),T.j.jsx("span",{className:"text-sm font-medium",children:"Updating chart..."})]}),T.j.jsx("p",{className:"text-xs text-center max-w-sm text-gray-500 dark:text-gray-400 mt-2",children:"Applying your changes and generating visualization"})]}):l.config&&l.config.data&&l.config.data.length>0?T.j.jsx(RH,{}):T.j.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-64 text-gray-500 dark:text-gray-400",children:[T.j.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[T.j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),T.j.jsx("span",{className:"text-sm font-medium",children:"No data to display"})]}),T.j.jsx("p",{className:"text-xs text-center max-w-sm",children:"Please ensure data is available and columns are selected for visualization"})]})})]})})})}function RX(e={},t=(0,M.g)()){let r=!function(e){if(!e||"object"!=typeof e)return!1;for(let t in e){if("string"!=typeof t)return!1;let r=e[t];if(!r||"object"!=typeof r||!r.root||!r.analysisList||"object"!=typeof r.root||!Array.isArray(r.analysisList)||!RY(r.root)||!r.analysisList.length||r.analysisList[0].analysisId!==r.root.analysisId||t!==r.root.analysisId)return!1;for(let e of r.analysisList)if(!RY(e)||e.rootAnalysisId!==r.root.analysisId)return!1}return!0}(e)?{}:e,n={},i=Object.values(r).reduce((e,t)=>({...e,[t.root.analysisId]:t.root,...t.analysisList.reduce((e,t)=>({...e,[t.analysisId]:t}),{})}),{}),s=[],o=[],a={},l=null,c=null;function h(e,t){r=e,i=t,s.forEach(e=>e())}function u(){o.forEach(e=>e())}function d(e,t){n[e]=t,a[e]||(a[e]=[]),a[e].forEach(e=>{try{e()}catch(e){console.error("Error in active tab listener",e)}})}async function f({question:e,projectName:t,analysisId:n,rootAnalysisId:s,isRoot:o=!1,directParentId:a=null,sqlOnly:l=!1,isTemp:c=!1,activeTab:u}){let f={analysisId:n,isRoot:o,rootAnalysisId:o?n:s,user_question:e,isTemp:c,projectName:t,sqlOnly:l,timestamp:Date.now(),activeTab:u};f.directParentId=a,f.createAnalysisRequestBody={initialisation_details:{user_question:e,is_root_analysis:o,root_analysis_id:s,direct_parent_id:a},sql_only:l};let p={...r};o?p[f.analysisId]={root:f,analysisList:[f]}:p[r[s].root.analysisId].analysisList.push(f);let m={...i,[f.analysisId]:f};return d(f.analysisId,u||"table"),h(p,m),{newAnalysis:f}}return{subscribeToDataChanges:function(e){return s=[...s,e],function(){s=s.filter(t=>t!==e)}},getTree:function(){return r},getNestedTree:function(){let e={};for(let t in Object.keys(i).forEach(t=>{e[t]={...i[t],children:[],parent:null,flatOrderedChildren:[],allParents:[]}}),Object.keys(e).forEach(t=>{if(e[t].directParentId){let r=e[e[t].directParentId];r&&(e[t].parent=r,e[t].allParents=function(e){let t=[],r=e;for(;r;)t.push(r),r=r.parent;return t}(r),r.children.push(e[t]),r.children.sort((e,t)=>t.timestamp-e.timestamp))}}),e)e[t].isRoot?e[t].flatOrderedChildren=function e(t){var r;let n=[];if(null!=(r=null==t?void 0:t.children)&&r.length)for(let r of t.children)n.push(r),n.push(...e(r));return n}(e[t]):delete e[t];return e},getAll:function(){return i},subscribeToActiveAnalysisIdChanges:function(e){return o.push(e),function(){o=o.filter(t=>t!==e)}},getActiveTab:function(e){return n[e]||"table"},setActiveTab:d,subscribeToActiveTabChanges:function(e,t){return e?(a[e]&&Array.isArray(a[e])||(a[e]=[]),a[e].push(t),function(){e&&a[e]&&(a[e]=a[e].filter(e=>e!==t))}):()=>{}},setActiveAnalysisId:function(e){l=e,u()},setActiveRootAnalysisId:function(e){c=e,u()},getActiveAnalysisId:function(){return l},getActiveRootAnalysisId:function(){return c},submit:f,removeAnalysis:function({analysisId:e,isRoot:t,rootAnalysisId:n}){let s={...r};t?delete s[e]:n&&r[n].root&&(s[n].analysisList=s[n].analysisList.filter(t=>t.analysisId!==e));let o={...i};delete o[e],h(s,o)},updateAnalysis:function({analysisId:e,isRoot:t,updateObj:n,emit:s=!0}){let o={...r};if(!i[e]){console.warn("Analysis not found",e);return}t&&(o[e].root={...o[e].root,...n});let a=i[e].rootAnalysisId;o[a].analysisList=o[a].analysisList.map(t=>t.analysisId===e?{...t,...n}:t);let l={...i};l[e]={...l[e],...n},h(o,l)},getMgrId:()=>t,reset:function(){h({},{})}}}function RY(e){return!(!e||"object"!=typeof e||!e.analysisId||"string"!=typeof e.analysisId||!e.createAnalysisRequestBody||"object"!=typeof e.createAnalysisRequestBody||"string"!=typeof e.directParentId&&null!==e.directParentId||"boolean"!=typeof e.isRoot||"boolean"!=typeof e.isTemp||"string"!=typeof e.projectName||"string"!=typeof e.rootAnalysisId||"boolean"!=typeof e.sqlOnly||"string"!=typeof e.user_question)}!function(e){var t,r,n=function(e){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,r=0,n={},i={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof s?new s(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++r}),e.__id},clone:function e(t,r){var n,s;switch(r=r||{},i.util.type(t)){case"Object":if(r[s=i.util.objId(t)])return r[s];for(var o in n={},r[s]=n,t)t.hasOwnProperty(o)&&(n[o]=e(t[o],r));return n;case"Array":return r[s=i.util.objId(t)]?r[s]:(n=[],r[s]=n,t.forEach(function(t,i){n[i]=e(t,r)}),n);default:return t}},getLanguage:function(e){for(;e;){var r=t.exec(e.className);if(r)return r[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,r){e.className=e.className.replace(RegExp(t,"gi"),""),e.classList.add("language-"+r)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw Error()}catch(n){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(n.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var r in t)if(t[r].src==e)return t[r]}return null}},isActive:function(e,t,r){for(var n="no-"+t;e;){var i=e.classList;if(i.contains(t))return!0;if(i.contains(n))return!1;e=e.parentElement}return!!r}},languages:{plain:n,plaintext:n,text:n,txt:n,extend:function(e,t){var r=i.util.clone(i.languages[e]);for(var n in t)r[n]=t[n];return r},insertBefore:function(e,t,r,n){var s=(n=n||i.languages)[e],o={};for(var a in s)if(s.hasOwnProperty(a)){if(a==t)for(var l in r)r.hasOwnProperty(l)&&(o[l]=r[l]);r.hasOwnProperty(a)||(o[a]=s[a])}var c=n[e];return n[e]=o,i.languages.DFS(i.languages,function(t,r){r===c&&t!=e&&(this[t]=o)}),o},DFS:function e(t,r,n,s){s=s||{};var o=i.util.objId;for(var a in t)if(t.hasOwnProperty(a)){r.call(t,a,t[a],n||a);var l=t[a],c=i.util.type(l);"Object"!==c||s[o(l)]?"Array"!==c||s[o(l)]||(s[o(l)]=!0,e(l,r,a,s)):(s[o(l)]=!0,e(l,r,null,s))}}},plugins:{},highlightAll:function(e,t){i.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,r){var n={callback:r,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",n),n.elements=Array.prototype.slice.apply(n.container.querySelectorAll(n.selector)),i.hooks.run("before-all-elements-highlight",n);for(var s,o=0;s=n.elements[o++];)i.highlightElement(s,!0===t,n.callback)},highlightElement:function(t,r,n){var s=i.util.getLanguage(t),o=i.languages[s];i.util.setLanguage(t,s);var a=t.parentElement;a&&"pre"===a.nodeName.toLowerCase()&&i.util.setLanguage(a,s);var l=t.textContent,c={element:t,language:s,grammar:o,code:l};function h(e){c.highlightedCode=e,i.hooks.run("before-insert",c),c.element.innerHTML=c.highlightedCode,i.hooks.run("after-highlight",c),i.hooks.run("complete",c),n&&n.call(c.element)}if(i.hooks.run("before-sanity-check",c),(a=c.element.parentElement)&&"pre"===a.nodeName.toLowerCase()&&!a.hasAttribute("tabindex")&&a.setAttribute("tabindex","0"),!c.code){i.hooks.run("complete",c),n&&n.call(c.element);return}if(i.hooks.run("before-highlight",c),!c.grammar){h(i.util.encode(c.code));return}if(r&&e.Worker){var u=new Worker(i.filename);u.onmessage=function(e){h(e.data)},u.postMessage(JSON.stringify({language:c.language,code:c.code,immediateClose:!0}))}else h(i.highlight(c.code,c.grammar,c.language))},highlight:function(e,t,r){var n={code:e,grammar:t,language:r};if(i.hooks.run("before-tokenize",n),!n.grammar)throw Error('The language "'+n.language+'" has no grammar.');return n.tokens=i.tokenize(n.code,n.grammar),i.hooks.run("after-tokenize",n),s.stringify(i.util.encode(n.tokens),n.language)},tokenize:function(e,t){var r=t.rest;if(r){for(var n in r)t[n]=r[n];delete t.rest}var c=new a;return l(c,c.head,e),function e(t,r,n,a,c,h){for(var u in n)if(!(!n.hasOwnProperty(u)||!n[u])){var d=n[u];d=Array.isArray(d)?d:[d];for(var f=0;f<d.length;++f){if(h&&h.cause==u+","+f)return;var p=d[f],m=p.inside,g=!!p.lookbehind,y=!!p.greedy,b=p.alias;if(y&&!p.pattern.global){var v=p.pattern.toString().match(/[imsuy]*$/)[0];p.pattern=RegExp(p.pattern.source,v+"g")}for(var x=p.pattern||p,w=a.next,k=c;w!==r.tail&&!(h&&k>=h.reach);k+=w.value.length,w=w.next){var O=w.value;if(r.length>t.length)return;if(!(O instanceof s)){var S,C=1;if(y){if(!(S=o(x,k,t,g))||S.index>=t.length)break;var T=S.index,A=S.index+S[0].length,M=k;for(M+=w.value.length;T>=M;)M+=(w=w.next).value.length;if(M-=w.value.length,k=M,w.value instanceof s)continue;for(var E=w;E!==r.tail&&(M<A||"string"==typeof E.value);E=E.next)C++,M+=E.value.length;C--,O=t.slice(k,M),S.index-=k}else if(!(S=o(x,0,O,g)))continue;var T=S.index,N=S[0],_=O.slice(0,T),j=O.slice(T+N.length),D=k+O.length;h&&D>h.reach&&(h.reach=D);var R=w.prev;if(_&&(R=l(r,R,_),k+=_.length),function(e,t,r){for(var n=t.next,i=0;i<r&&n!==e.tail;i++)n=n.next;t.next=n,n.prev=t,e.length-=i}(r,R,C),w=l(r,R,new s(u,m?i.tokenize(N,m):N,b,N)),j&&l(r,w,j),C>1){var P={cause:u+","+f,reach:D};e(t,r,n,w.prev,k,P),h&&P.reach>h.reach&&(h.reach=P.reach)}}}}}}(e,c,t,c.head,0),function(e){for(var t=[],r=e.head.next;r!==e.tail;)t.push(r.value),r=r.next;return t}(c)},hooks:{all:{},add:function(e,t){var r=i.hooks.all;r[e]=r[e]||[],r[e].push(t)},run:function(e,t){var r=i.hooks.all[e];if(!(!r||!r.length))for(var n,s=0;n=r[s++];)n(t)}},Token:s};function s(e,t,r,n){this.type=e,this.content=t,this.alias=r,this.length=0|(n||"").length}function o(e,t,r,n){e.lastIndex=t;var i=e.exec(r);if(i&&n&&i[1]){var s=i[1].length;i.index+=s,i[0]=i[0].slice(s)}return i}function a(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function l(e,t,r){var n=t.next,i={value:r,prev:t,next:n};return t.next=i,n.prev=i,e.length++,i}if(e.Prism=i,s.stringify=function e(t,r){if("string"==typeof t)return t;if(Array.isArray(t)){var n="";return t.forEach(function(t){n+=e(t,r)}),n}var s={type:t.type,content:e(t.content,r),tag:"span",classes:["token",t.type],attributes:{},language:r},o=t.alias;o&&(Array.isArray(o)?Array.prototype.push.apply(s.classes,o):s.classes.push(o)),i.hooks.run("wrap",s);var a="";for(var l in s.attributes)a+=" "+l+'="'+(s.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+s.tag+' class="'+s.classes.join(" ")+'"'+a+">"+s.content+"</"+s.tag+">"},!e.document)return e.addEventListener&&(i.disableWorkerMessageHandler||e.addEventListener("message",function(t){var r=JSON.parse(t.data),n=r.language,s=r.code,o=r.immediateClose;e.postMessage(i.highlight(s,i.languages[n],n)),o&&e.close()},!1)),i;var c=i.util.currentScript();function h(){i.manual||i.highlightAll()}if(c&&(i.filename=c.src,c.hasAttribute("data-manual")&&(i.manual=!0)),!i.manual){var u=document.readyState;"loading"===u||"interactive"===u&&c&&c.defer?document.addEventListener("DOMContentLoaded",h):window.requestAnimationFrame?window.requestAnimationFrame(h):window.setTimeout(h,16)}return i}("u">typeof window?window:"u">typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});e.exports&&(e.exports=n),"u">typeof M.w&&(M.w.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(e,t){var r={};r["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[t]},r.cdata=/^<!\[CDATA\[|\]\]>$/i;var i={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:r}};i["language-"+t]={pattern:/[\s\S]+/,inside:n.languages[t]};var s={};s[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return e}),"i"),lookbehind:!0,greedy:!0,inside:i},n.languages.insertBefore("markup","cdata",s)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(e,t){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:n.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/,n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css,(r=n.languages.markup)&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css")),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source)+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(!(typeof n>"u")&&!(typeof document>"u")){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var e={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},t="data-src-status",r="loading",i="loaded",s="pre[data-src]:not(["+t+'="'+i+'"]):not(['+t+'="'+r+'"])';n.hooks.add("before-highlightall",function(e){e.selector+=", "+s}),n.hooks.add("before-sanity-check",function(o){var a=o.element;if(a.matches(s)){o.code="",a.setAttribute(t,r);var l,c,h,u,d=a.appendChild(document.createElement("CODE"));d.textContent="Loading";var f=a.getAttribute("data-src"),p=o.language;if("none"===p){var m=(/\.(\w+)$/.exec(f)||[,"none"])[1];p=e[m]||m}n.util.setLanguage(d,p),n.util.setLanguage(a,p);var g=n.plugins.autoloader;g&&g.loadLanguages(p),l=f,c=function(e){a.setAttribute(t,i);var r=function(e){var t=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(e||"");if(t){var r=Number(t[1]),n=t[2],i=t[3];return n?i?[r,Number(i)]:[r,void 0]:[r,r]}}(a.getAttribute("data-range"));if(r){var s=e.split(/\r\n?|\n/g),o=r[0],l=null==r[1]?s.length:r[1];o<0&&(o+=s.length),o=Math.max(0,Math.min(o-1,s.length)),l<0&&(l+=s.length),l=Math.max(0,Math.min(l,s.length)),e=s.slice(o,l).join(`
`),a.hasAttribute("data-start")||a.setAttribute("data-start",String(o+1))}d.textContent=e,n.highlightElement(d)},h=function(e){a.setAttribute(t,"failed"),d.textContent=e},(u=new XMLHttpRequest).open("GET",l,!0),u.onreadystatechange=function(){var e;4==u.readyState&&(u.status<400&&u.responseText?c(u.responseText):u.status>=400?h((e=u.status," Error "+e+" while fetching file: "+u.statusText)):h(" Error: File does not exist or is empty"))},u.send(null)}}),n.plugins.fileHighlight={highlight:function(e){for(var t,r=(e||document).querySelectorAll(s),i=0;t=r[i++];)n.highlightElement(t)}};var o=!1;n.fileHighlight=function(){o||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),o=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}}()}({exports:{}}),Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/},Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python;let RZ={url:null,onMessage:()=>{},onOpen:()=>{},onClose:()=>{},onError:()=>{},onTimeout:()=>{},reconnectDelay:2e3,reconnectMaxAttempts:3,ping:!1,autoReconnect:!0,connectionTimeoutAfter:1e4,connectImmediately:!0};function RJ({projectName:e,analysisId:t,question:r,data_csv:n,apiEndpoint:i,sql:s,token:o}){let[a,l]=(0,A.useState)(""),[c,h]=(0,A.useState)(!1),u=(0,M.F)({protocol:"ws",path:"analyse_data_streaming",apiEndpoint:i});return(0,A.useEffect)(()=>{let i=(0,M.J)(t);if(i){l(i);return}let a=function(e){let t={...RZ,...e},{url:r,reconnectDelay:n,reconnectMaxAttempts:i,ping:s,autoReconnect:o,connectionTimeoutAfter:a}=t,l=null,c=!1,h=null,u=null,d=Date.now(),f=-1,p=0,m=!1,g=t.onMessage,y=t.onOpen,b=t.onClose,v=t.onError,x=t.onTimeout,w=(0,M.g)(8),k=[];function O(...e){c&&(console.groupCollapsed(w+": "+(e.length&&e[0])),console.log(...e),console.groupEnd())}function S(){f++,T(),l&&l.close&&l.readyState!==WebSocket.CLOSED&&l.close(),l=new WebSocket(r),O("connecting"),h=setTimeout(()=>{O("connection timed out"),l.readyState===WebSocket.CONNECTING&&(l.close(),f<i?(f++,setTimeout(S,n)):x&&"function"==typeof x&&x())},a),l.onopen=function(e){O("reconnected to",r),f=0,T(),y&&"function"==typeof y&&y(e)},l.onerror=function(e){O("error",r,e),v&&"function"==typeof v&&v(e)},l.onmessage=function(e){g&&"function"==typeof g&&g(e)},k.forEach(e=>{if(e.disabled)return;let t=e.event,r=e.cb;e.disabled=!1,l.addEventListener(t,r)}),l.onclose=function(e){O("closed",e),b&&"function"==typeof b&&b(e),T(),e.wasClean||m||(o&&O(`reconnecting to ${r}, in ${n} ms`),u=setTimeout(()=>{if(o){if(f>=i){O("Maximum number of reconnect attempts reached. Stopping reconnecting.");return}O("reconnecting to",r),S()}},n))}}function C(e,t=!1){l&&l.readyState===WebSocket.OPEN&&(f>=1&&!t&&p%10==0&&(O("Connection was previously lost and there might be connectivity issues while running this. Consider refreshing the page for best performance."),p++),l.send(JSON.stringify(e)))}function T(){clearTimeout(h),clearTimeout(u)}return s&&window.requestAnimationFrame(function e(){Date.now()-d>5e3&&(d=Date.now(),C({ping:"ping"},!0)),window.requestAnimationFrame(e)}),t.connectImmediately&&S(),{send:C,destroy:function(){T(),O("Closing socket and destroying manager",l),m=!0,l&&l.close(),O("destroyed")},connect:S,addEventListener:function(e,t){c&&O("adding event listeners"),l&&(l.addEventListener(e,t),k.push({event:e,cb:t,disabled:!1}))},removeEventListener:function(e,t,r){O("removing event listeners"),l&&(l.removeEventListener(e,t),-1!==r&&(k[r].disabled=!0))},isConnected:function(){return l&&l.readyState===WebSocket.OPEN},setLogging:function(e=!1){c=e},getSocket:function(){return l},getEventListeners:function(){return k}}}({url:u,onMessage:e=>{h(!1);let r=e.data;"Defog data analysis has ended"===r?(a.destroy(),l(e=>((0,M.K)(t,e),e))):l(e=>e+r)},reconnectDelay:2e3,reconnectMaxAttempts:3,connectionTimeoutAfter:1e4,onTimeout:()=>{h(!1),l("Connection timeout with the websocket server. Please try again.")},onOpen:()=>{h(!0),l(""),a.send({question:r,data_csv:n,sql:s,db_name:e,token:o})},onError:e=>{console.error(e),h(!1),l("An error occurred while analyzing data. Please try again.")}});return()=>{a.destroy()}},[]),T.j.jsxs("div",{className:"relative h-full",children:[T.j.jsx("div",{className:"pb-3 mb-4 border-b border-gray-200 dark:border-gray-700",children:T.j.jsxs("h3",{className:"font-medium text-gray-900 text-md dark:text-gray-100",children:["Insights"," ",T.j.jsx(en,{className:"inline size-4 stroke-secondary-highlight-1"})]})}),T.j.jsx("div",{className:"space-y-4",children:c?T.j.jsxs("div",{className:"flex flex-col items-center justify-center p-8 h-[400px] rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[T.j.jsx(T.d,{classNames:"mb-4"}),T.j.jsxs("div",{className:"flex flex-col items-center",children:[T.j.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Analyzing your data"}),T.j.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"This may take a few moments"})]})]}):a?T.j.jsx(ks,{customErrorMessage:a,children:T.j.jsx("div",{className:`analysis-markdown max-w-full text-sm break-words
                [&>h1]:text-xl [&>h1]:font-semibold [&>h1]:mb-4 [&>h1]:text-gray-900 [&>h1]:dark:text-gray-100
                [&>h2]:text-lg [&>h2]:font-medium [&>h2]:mb-3 [&>h2]:text-gray-800 [&>h2]:dark:text-gray-200
                [&>p]:mb-4 [&>p]:text-gray-600 [&>p]:dark:text-gray-300 [&>p]:leading-relaxed [&>p]:whitespace-pre-wrap
                [&>ul]:mb-4 [&>ul]:list-disc [&>ul]:pl-5 [&>ul]:space-y-2 [&>ul]:text-gray-600 [&>ul]:dark:text-gray-300
                [&>ol]:mb-4 [&>ol]:list-decimal [&>ol]:pl-5 [&>ol]:space-y-2 [&>ol]:text-gray-600 [&>ol]:dark:text-gray-300
                [&>blockquote]:border-l-4 [&>blockquote]:border-gray-200 [&>blockquote]:dark:border-gray-700 
                [&>blockquote]:pl-4 [&>blockquote]:italic [&>blockquote]:my-4 [&>blockquote]:text-gray-600 [&>blockquote]:dark:text-gray-300`,dangerouslySetInnerHTML:{__html:Tk(Os(a))}})}):null})]})}function RK({analysis:e,analysisManager:t}){var r;let[n,i]=(0,A.useState)(!0),[s,o]=(0,A.useState)(null==(r=null==e?void 0:e.data)?void 0:r.pdf_search_results),[a,l]=(0,A.useState)(null);return(0,A.useEffect)(()=>{var r,n,a;s||null!=(r=e.data)&&r.pdf_search_results?("string"==typeof e.data.pdf_search_results?(l(e.data.pdf_search_results),o(null)):(o(e.data.pdf_search_results),l(null)),i(!1)):null!=(n=e.data)&&n.sql&&!s?t.getPdfSearchResults():null!=(a=e.data)&&a.pdf_search_results||(i(!0),o(null),l(null))},[e]),n?T.j.jsxs("div",{className:"mt-4 text-xs h-40 flex items-center justify-center bg-gray-50 border-gray-500 text-gray-600 dark:bg-gray-800/30 dark:border-gray-500 dark:text-gray-200",children:[T.j.jsx(T.d,{classNames:"mr-2"})," Searching in your PDFs.."]}):a||!Array.isArray(s)?T.j.jsx("div",{className:"mt-4 text-xs h-40 flex items-center justify-center bg-red-100 border-red-500 text-red-800 dark:bg-red-800/30 dark:border-red-500 dark:text-red-200",children:T.j.jsx("div",{className:"text-sm",children:a})}):s&&0!==s.length?T.j.jsxs("div",{className:"mt-4 max-h-[600px] overflow-auto",children:[T.j.jsx("h3",{className:"text-sm uppercase font-semibold mb-2 text-gray-600 dark:text-gray-200",children:"Citations"}),T.j.jsx("div",{className:"space-y-4",children:s.map((e,t)=>"text"===e.type?"citations"in e&&e.citations&&e.citations.length>0?T.j.jsxs("div",{className:"p-3 bg-gray-50 rounded-md border border-gray-200 dark:bg-gray-700 dark:border-gray-600",children:[T.j.jsx("p",{className:"text-sm mb-2 dark:text-gray-200",children:e.text}),T.j.jsx("div",{className:"text-xs text-gray-500 mt-1 dark:text-gray-400",children:e.citations.map((e,t)=>T.j.jsxs("div",{className:"mt-1",children:[T.j.jsx("span",{className:"font-medium",children:e.document_title})," ","- Page",e.start_page_number===e.end_page_number?` ${e.start_page_number}`:`s ${e.start_page_number}-${e.end_page_number}`]},t))})]},t):T.j.jsx("div",{className:"text-sm",children:T.j.jsx("p",{className:"dark:text-gray-200",children:e.text})},t):null)})]}):T.j.jsx("div",{className:"mt-4 text-xs h-40 flex items-center justify-center bg-gray-100 border-gray-500 text-gray-600 dark:bg-gray-800/30 dark:border-gray-500 dark:text-gray-200",children:"No relevant citations found in PDF documents."})}let R0=({isOpen:e,onClick:t})=>T.j.jsx("button",{onClick:t,className:`
      absolute -left-8 top-1/2 -translate-y-1/2
      h-36 w-8 flex items-center justify-center group
      bg-[#F9FAFB] dark:bg-gray-800 
      border border-gray-200 dark:border-gray-700
      hover:bg-gray-50 dark:hover:bg-gray-700
      transition-colors rounded-l
      ${e?"":"z-10"}
    `,title:`${e?"Collapse":"Expand"} analysis panel (${T.a7.TOGGLE_ANALYSIS})`,children:T.j.jsxs("div",{className:"relative flex flex-col h-full",children:[T.j.jsx("div",{className:"flex items-center justify-center flex-1",children:T.j.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:T.j.jsx(en,{className:"w-4 h-4"})})}),T.j.jsx("div",{className:"absolute -translate-x-1/2 bottom-2 left-1/2",children:T.j.jsx(T.a1,{keyValue:T.a7.TOGGLE_ANALYSIS,className:"scale-75"})})]})});function R1({projectName:e,analysis:t=null,analysisManager:r,analysisTreeManager:n=null}){var i,s;let{apiEndpoint:o,token:a}=(0,A.useContext)(TH),l=(0,A.useRef)(null),[c,h]=(0,A.useState)(null==(i=null==t?void 0:t.data)?void 0:i.sql),[u,d]=(0,A.useState)(!1),[f,p]=(0,A.useState)(!0),[m,g]=(0,A.useState)(!1),y=(0,A.useContext)(T.a),b=t.analysis_id,v=null==(s=null==t?void 0:t.data)?void 0:s.parsedOutput;async function x(){if(u)return;let e="";try{let t=null==v?void 0:v.data;if(!t)return;let{columns:r,data:n}=t,i=r.filter(e=>"index"!==e.title);e=i.map(e=>e.title).join(",")+`
`;for(let t=0;t<n.length;t++){let r=n[t];for(let t=0;t<i.length;t++)e+=r[i[t].title],t<i.length-1&&(e+=",");e+=`
`}let s=new Blob([e],{type:"text/csv"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=`${b}-${new Date().toISOString().split(".")[0]}.csv`,a.click(),URL.revokeObjectURL(o),a.remove(),y.success("CSV saved.")}catch(e){console.error(e),y.error("Error saving CSV.")}finally{d(!1)}}let w=(0,A.useSyncExternalStore)(e=>n.subscribeToActiveTabChanges(t.analysis_id,e),()=>n.getActiveTab(t.analysis_id)),[k,O]=(0,A.useState)([]),S=(0,A.useMemo)(()=>{var r,n;return(null==v?void 0:v.csvString)&&T.j.jsx(RJ,{analysisId:t.analysis_id,projectName:e,question:null==(r=null==t?void 0:t.data)?void 0:r.initial_question,data_csv:null==v?void 0:v.csvString,sql:null==(n=null==t?void 0:t.data)?void 0:n.sql,apiEndpoint:o,token:a})},[t,e,o]),C=(0,A.useMemo)(()=>{var e;return v&&T.j.jsx(RG,{stepData:v,initialQuestion:null==(e=null==t?void 0:t.data)?void 0:e.initial_question,initialOptionsExpanded:m})},[t,m]),E=e=>T.j.jsxs("div",{className:"flex",children:[T.j.jsx("div",{className:`
          transition-all duration-200 pr-6
          ${f?"w-[70%]":"w-[95%]"}
        `,children:e}),T.j.jsxs("div",{className:`
          relative
          transition-all duration-200 
          border-l border-gray-200 dark:border-gray-700
          ${f?"w-[30%]":"lg:w-[5%] w-0"}
        `,children:[T.j.jsxs("div",{className:"flex items-start",children:[T.j.jsx(R0,{isOpen:f,onClick:()=>p(!f)}),T.j.jsxs("div",{className:"relative ml-2",onClick:()=>!f&&p(!0),children:[!f&&T.j.jsx("div",{className:"absolute inset-0 cursor-pointer",title:"Expand analysis panel"}),f&&T.j.jsx("div",{className:"relative w-[100%] max-h-[600px] overflow-y-auto",children:S})]})]}),T.j.jsx("div",{className:`
            absolute inset-y-0 right-0 w-24
            transition-opacity duration-200
            ${f?"opacity-0 pointer-events-none":"opacity-100"}
            bg-gradient-to-r from-transparent 
            via-white/50 to-white
            dark:via-gray-800/50 dark:to-gray-800
          `})]})]});return(0,A.useEffect)(()=>{let e=[],n=null==v?void 0:v.data;if(n){let i=(0,M.L)(n.data,n.columns);e.push({component:E(T.j.jsx(T.T,{rootClassNames:"lg:pl-0",rows:i,columns:n.columns.filter(e=>"index"!==e.title).map(e=>(e.render=e=>T.j.jsx("div",{children:e}),e)),pagination:{defaultPageSize:10,showSizeChanger:!0}})),key:"table",tabLabel:"Table",icon:T.j.jsx(es,{className:"w-4 h-4 mb-0.5 mr-1 inline"})}),null!=v&&v.data&&e.push({component:E(T.j.jsx(ks,{children:C})),key:"chart",tabLabel:"Chart",icon:T.j.jsx(L,{className:"w-4 h-4 mb-0.5 mr-1 inline"})},{component:E(T.j.jsx(ks,{children:T.j.jsx(RK,{analysis:t,analysisManager:r})})),key:"pdf",tabLabel:"From your PDFs",icon:T.j.jsx(T.a8,{className:"w-4 h-4 mb-0.5 mr-1 inline"})})}O(e)},[t,c,f]),(0,A.useEffect)(()=>{let e=e=>{document.activeElement!==document.body||e.metaKey||e.ctrlKey||e.altKey||e.shiftKey||((0,T.aa)(e.key,T.a7.TOGGLE_ANALYSIS)&&(p(e=>!e),e.preventDefault()),(0,T.aa)(e.key,T.a7.TOGGLE_CHART_OPTIONS)&&"chart"===w&&(g(e=>!e),e.preventDefault()),(0,T.aa)(e.key,T.a7.VIEW_TABLE)&&(null==n||n.setActiveTab(b,"table"),e.preventDefault()),(0,T.aa)(e.key,T.a7.VIEW_CHART)&&(null==n||n.setActiveTab(b,"chart"),e.preventDefault()))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[w,b,n]),T.j.jsx("div",{className:"table-chart-ctr",ref:l,children:T.j.jsxs("div",{className:"flex flex-col w-full",children:[T.j.jsx("div",{className:"border-b border-gray-200",children:T.j.jsxs("div",{className:"flex items-center justify-between",children:[T.j.jsx("nav",{className:"flex space-x-4","aria-label":"Tabs",children:k.map(e=>T.j.jsxs("button",{onClick:()=>n.setActiveTab(b,e.key),className:`
                    px-3 py-2 text-sm font-medium rounded-t-lg flex items-center gap-2
                    ${w===e.key?"border-b-2 border-blue-500 text-blue-600 dark:text-white":"text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}
                  `,children:[T.j.jsxs("span",{className:"flex items-center",children:[e.icon,e.tabLabel]}),"table"===e.key&&T.j.jsx(T.a1,{keyValue:T.a7.VIEW_TABLE,className:"opacity-50 px-1 py-0.5"}),"chart"===e.key&&T.j.jsx(T.a1,{keyValue:T.a7.VIEW_CHART,className:"opacity-50 px-1 py-0.5"})]},e.key))}),T.j.jsxs(T.D,{onClick:async()=>{await x()},disabled:u,variant:"secondary",className:`flex mb-2 items-center px-2.5 py-1.5 hover:text-white text-white rounded-md border border-blue-200/50 
                bg-blue-500 hover:bg-blue-600/95 dark:bg-blue-900/20 dark:hover:bg-blue-800/30 
                shadow-sm  transition-all duration-200 
                dark:border-blue-700/50 dark:hover:border-blue-600/50
                hover:shadow-md hover:-translate-y-0.5
                group`,children:[T.j.jsx(T.ac,{size:16,className:"mr-1"}),T.j.jsx("span",{children:"Download CSV"})]})]})}),T.j.jsx("div",{className:"relative mt-4",children:k.map(e=>T.j.jsx("div",{className:e.key===w?"z-2":"absolute overflow-hidden top-[-100%] z-[-1] pointer-events-none *:pointer-events-none opacity-0",children:e.component},e.key))})]})})}function R2({error_message:e=null}){return T.j.jsxs("div",{className:"p-4 mb-4 border rounded-lg bg-rose-50 dark:bg-rose-900/20 border-rose-200 dark:border-rose-800",children:[T.j.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[T.j.jsx(T.ae,{className:"w-4 h-4 text-rose-500 dark:text-rose-400"}),T.j.jsx("span",{className:"font-semibold text-rose-700 dark:text-rose-300",children:"An error occurred"})]}),T.j.jsx("div",{className:"pl-6 text-rose-600 dark:text-rose-400",children:e||"Something went wrong"})]})}function R4({initialInputs:e,handleEdit:t}){let[r,n]=(0,A.useState)(e);function i(e,i){let s={...r};s[e]=i,n(s),t&&t(e,i)}return T.j.jsxs("div",{className:"text-sm text-gray-700 tool-input-list dark:text-gray-300",children:[r.question&&T.j.jsxs("div",{className:"mb-6",children:[T.j.jsxs("div",{className:"flex flex-row flex-wrap items-center gap-3 font-mono text-xs",children:[T.j.jsx("span",{className:"p-1 mr-2 text-gray-400 bg-gray-200 rounded-lg dark:bg-gray-700 dark:text-gray-400",children:"String"}),T.j.jsx("span",{className:"font-bold",children:"question"})]}),T.j.jsx("div",{className:"mt-2",children:T.j.jsx(T.U,{rootClassNames:"w-full",textAreaClassNames:"resize-none overflow-auto text-sm",value:r.question,defaultRows:1,onChange:e=>{i("question",e.target.value)}})})]}),r.hard_filters&&T.j.jsxs("div",{className:"space-y-4",children:[T.j.jsxs("div",{className:"flex flex-row flex-wrap items-center gap-3 font-mono text-xs",children:[T.j.jsx("span",{className:"p-1 mr-2 text-gray-400 bg-gray-200 rounded-lg dark:bg-gray-700 dark:text-gray-400",children:"List"}),T.j.jsx("span",{className:"font-bold",children:"hard_filters"})]}),T.j.jsxs("div",{className:"pb-4 space-y-2",children:[r.hard_filters.map((e,t)=>T.j.jsxs("div",{className:"flex items-center gap-2 group",children:[T.j.jsx(T.N,{rootClassNames:"flex-1",value:e,placeholder:"Filter condition",onChange:e=>{let n=[...r.hard_filters];n[t]=e.target.value,i("hard_filters",n)}}),T.j.jsxs("button",{className:"p-1.5 text-gray-400  group-hover:text-red-500 transition-opacity",onClick:()=>{i("hard_filters",r.hard_filters.filter((e,r)=>r!==t))},children:[T.j.jsx("span",{className:"sr-only",children:"Remove filter"}),T.j.jsx(ea,{size:16})]})]},t)),T.j.jsxs("button",{onClick:()=>i("hard_filters",[...r.hard_filters||[],""]),className:"flex mt-4 items-center gap-1.5 text-xs font-medium text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:[T.j.jsx(Q,{size:14}),T.j.jsx("span",{children:"Add Filter"})]})]})]})]})}let R5=({projectName:e,question:t,sql:r})=>{let[n,i]=(0,A.useState)(!1),[s,o]=(0,A.useState)(!1),[a,l]=(0,A.useState)(`






`),{apiEndpoint:c,token:h}=(0,A.useContext)(TH),u=(0,A.useContext)(T.a),d=(0,A.useCallback)(e=>{l(e)},[]),f=async()=>{o(!0),!0===(await (await fetch(c+"/integration/update_golden_queries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:h,db_name:e,golden_queries:[{question:t,sql:a}]})})).json()).success?u.success("Feedback submitted successfully"):u.error("Failed to submit feedback"),o(!1),i(!1)};return T.j.jsxs("div",{className:"h-10 mt-2",children:[T.j.jsx("div",{className:"flex items-left h-10 gap-1",children:T.j.jsx("div",{className:"flex items-center justify-center w-40 h-10 rounded-full cursor-pointer",onClick:()=>{i(!0)},children:T.j.jsx("span",{className:"text-xs",children:"Bad result? Teach model to do better."})})}),T.j.jsx(T.e,{title:"Align the model by providing feedback",open:n,footer:null,onCancel:()=>i(!1),contentClassNames:"overflow-auto",children:T.j.jsxs("div",{className:"mt-4 dark:text-gray-200",children:[T.j.jsxs("p",{className:"mb-2",children:["Please provide the correct SQL query for answering this question. The question was:"," ",T.j.jsx("span",{className:"font-mono dark:text-blue-300 text-blue-500",children:t}),T.j.jsx("br",{})]}),T.j.jsx("p",{className:"mb-2",children:"The query originally generated by Defog was:"}),T.j.jsx(xJ,{theme:"dark",extensions:[kn(),fq.lineWrapping],value:r,basicSetup:{lineNumbers:!1},editable:!1,minHeight:"200px",className:"dark:bg-gray-800 rounded-md"}),T.j.jsx("p",{className:"mb-2",children:"Please enter the correct SQL query below:"}),T.j.jsx(xJ,{theme:"dark",extensions:[kn(),fq.lineWrapping],value:a,onChange:d,basicSetup:{lineNumbers:!1},editable:!0,minHeight:"200px",className:"dark:bg-gray-800 rounded-md"}),T.j.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white dark:bg-blue-600 dark:hover:bg-blue-800 font-bold py-2 px-4 rounded text-xs",onClick:f,children:"Submit SQL"})]})})]})},R3=({projectName:e,question:t,submitFollowOn:r=e=>{}})=>{let[n,i]=(0,A.useState)([]),{apiEndpoint:s,token:o}=(0,A.useContext)(TH);async function a(){try{let r=(0,M.F)({protocol:"http",path:"query-data/generate_follow_on_questions",apiEndpoint:s}),n=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_question:t,db_name:e,token:o})});if(n.ok){let e=await n.json();i(e.follow_on_questions||[])}else throw Error("Error generating follow on questions")}catch(e){console.error(e)}}return(0,A.useEffect)(()=>{a()},[]),T.j.jsx("div",{className:"p-4",children:T.j.jsx("div",{className:"max-w-[900px] w-full m-auto flex flex-row gap-4 justify-center",children:n&&n.length?n.map((e,t)=>T.j.jsx("button",{"data-testid":"follow-on-question",className:"p-2 m-1 text-sm text-gray-700 bg-white border border-gray-200 rounded-md shadow-sm cursor-pointer grow basis-1 dark:border-gray-600 dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 dark:text-gray-200",onClick:()=>{r(e)},children:e},t)):null})})};function R6({projectName:e,analysis:t,analysisBusy:r=!1,analysisManager:n,handleReRun:i=e=>{},submitFollowOn:s=e=>{},analysisTreeManager:o=null}){var a,l,c,h,u,d,f;let{hideSqlTab:p}=(0,A.useContext)(TH),m=null==t?void 0:t.data;null==t||t.analysis_id;let g=(0,A.useRef)({question:(null==(l=null==(a=null==t?void 0:t.data)?void 0:a.inputs)?void 0:l.question)||"",sql:(null==(c=null==t?void 0:t.data)?void 0:c.sql)||"",hard_filters:(null==(u=null==(h=null==t?void 0:t.data)?void 0:h.inputs)?void 0:u.hard_filters)||[]}),y=(0,A.useCallback)((e,t)=>{e&&(g.current[e]=t)},[m]),b=(0,A.useMemo)(()=>{var a,l,c;return[{name:"SQL/Code",content:T.j.jsxs(ks,{maybeOldAnalysis:!0,children:[(null==m?void 0:m.error)&&T.j.jsx(R2,{error_message:null==m?void 0:m.error}),T.j.jsx("div",{className:"flex ",children:T.j.jsx("div",{className:"w-full",children:T.j.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[T.j.jsx("div",{className:"space-y-6",children:T.j.jsxs("div",{className:"space-y-2",children:[T.j.jsx("h3",{className:"text-xs font-medium text-gray-400 uppercase",children:"Inputs"}),T.j.jsx("div",{className:"p-4 rounded-lg bg-gray-50 dark:bg-gray-800",children:T.j.jsx(R4,{initialInputs:null==m?void 0:m.inputs,handleEdit:y})})]})}),T.j.jsxs("div",{className:"space-y-6",children:[T.j.jsxs("div",{className:"space-y-2",children:[T.j.jsx("h3",{className:"text-xs font-medium text-gray-400 uppercase",children:"Generated SQL"}),T.j.jsx("div",{className:"rounded-lg ",children:T.j.jsx(ko,{className:"tool-code-ctr",code:(null==m?void 0:m.sql)||"",language:"sql",editable:!0,handleEdit:y,updateProp:"sql"})})]}),(null==m?void 0:m.instructions_used)&&T.j.jsxs("div",{className:"space-y-2",children:[T.j.jsx("h3",{className:"text-xs font-medium text-gray-400 uppercase",children:"Instructions used for this query"}),T.j.jsx("div",{className:"p-4 rounded-lg bg-gray-50 dark:bg-gray-800",children:T.j.jsx("p",{className:"text-sm leading-relaxed text-gray-600 dark:text-gray-300 whitespace-break-spaces",children:m.instructions_used})})]}),T.j.jsxs("div",{className:"flex justify-between mt-auto",children:[T.j.jsx(R5,{projectName:e,question:null==(a=null==m?void 0:m.inputs)?void 0:a.question,sql:null==m?void 0:m.sql}),T.j.jsx("div",{className:"flex justify-end ",children:T.j.jsx(T.D,{disabled:r,className:"h-10 px-4 py-2 font-mono text-white bg-gray-600 border border-gray-200 hover:bg-blue-500 hover:text-white active:hover:text-white hover:border-transparent",onClick:()=>i(g.current),children:"Re run"})})]})]})]})})})]})},{name:"Analysis",content:T.j.jsxs("div",{children:[T.j.jsx(R1,{projectName:e,analysis:t,analysisManager:n,analysisTreeManager:o}),(null==m?void 0:m.sql)&&T.j.jsx(R5,{projectName:e,question:null==(l=null==m?void 0:m.inputs)?void 0:l.question,sql:null==m?void 0:m.sql}),T.j.jsx(R3,{projectName:e,question:null==(c=null==m?void 0:m.inputs)?void 0:c.question,submitFollowOn:s}),(null==m?void 0:m.sql)&&T.j.jsx(RK,{analysis:t,analysisManager:n})]},(0,M.g)())}]},[m,r]);return null!=m&&m.parsedOutput?T.j.jsxs("div",{className:"w-full h-full tool-results-ctr",children:[r&&T.j.jsxs("div",{className:"absolute top-0 left-0 z-20 flex flex-col items-center justify-center w-full h-full bg-white dark:bg-gray-900 bg-opacity-90 dark:bg-opacity-90 text-md dark:text-gray-300",children:[T.j.jsxs("span",{className:"my-1",children:[T.j.jsx(T.d,{}),"Running"]}),T.j.jsx(T.I,{classNames:"text-gray-500 dark:text-gray-400 w-5 h-5"})]}),r?T.j.jsx("div",{className:"tool-run-loading",children:T.j.jsx(TW,{message:"Running analysis..."})}):T.j.jsx(T.j.Fragment,{children:p?T.j.jsx("div",{children:null==(f=null==(d=b.filter(e=>"Analysis"===e.name))?void 0:d[0])?void 0:f.content}):T.j.jsx(T.c,{disableSingleSelect:!0,defaultSelected:"Analysis",tabs:b})})]}):T.j.jsx(T.j.Fragment,{})}let R7=({analysisId:e,rootAnalysisId:t,projectName:r,isTemp:n=!1,metadata:i=null,sqlOnly:s=!1,rootClassNames:o="",createAnalysisRequestBody:a={},initiateAutoSubmit:l=!1,hasExternalSearchBar:c=!1,searchBarPlaceholder:h=null,extraTools:u=[],plannerQuestionSuffix:d=null,previousContextCreator:f=()=>[],setGlobalLoading:p=(...e)=>{},onManagerCreated:m=(...e)=>{},onManagerDestroyed:g=(...e)=>{},disabled:y=!1,initialConfig:b={analysisManager:null,analysisTreeManager:null},submitFollowOn:v=(...e)=>{},onHeightChange:x=(...e)=>{}})=>{var w,k,O,S,C,E,N,_,j;let{apiEndpoint:D,token:R,updateConfig:P,analysisDataCache:I}=(0,A.useContext)(TH),z=(0,A.useRef)(null),L=(0,A.useRef)(null),q=(0,A.useRef)(null);(0,A.useEffect)(()=>{var e;if(!L.current||!x)return;null==(e=q.current)||e.disconnect();let t=new ResizeObserver(e=>{e.forEach(e=>{x(e.contentRect.height)})});return t.observe(L.current),q.current=t,()=>{var e;null==(e=q.current)||e.disconnect(),q.current=null}},[x]);let $=(0,A.useContext)(T.a),B=(0,A.useMemo)(()=>b.analysisManager||function({analysisId:e,rootAnalysisId:t,apiEndpoint:r,token:n,projectName:i,metadata:s,isTemp:o,sqlOnly:a=!1,extraTools:l=[],plannerQuestionSuffix:c="",previousContextCreator:h=()=>[],onNewData:u=(...e)=>{},onManagerDestroyed:d=(...e)=>{},onAbortError:f=(...e)=>{},createAnalysisRequestBody:p={}}){let m=null,g=!1,y=[],b=!1,v=!1,x=!1,w=[],k=!1,O=(0,M.F)({protocol:"http",path:"query-data/clarify",apiEndpoint:r}),S=(0,M.F)({protocol:"http",path:"query-data/generate_analysis",apiEndpoint:r}),C=(0,M.F)({protocol:"http",path:"query-data/rerun",apiEndpoint:r});function T(e){var t;e&&(null!=(t=null==e?void 0:e.data)&&t.output&&(e.data.parsedOutput=function(e){let t={};return t.csvString=e,t.data=(0,M.p)(e),t.chartManager=TX({data:t.data.data,availableColumns:t.data.columns}),t}(e.data.output)),m=e,y.forEach(e=>e()))}function A(e){x=e,w.forEach(e=>e(x))}async function E(r,s={}){var u,d,p,g;try{if(b)throw Error("Analysis Manager already destroyed.");A(!0);let f=null!=(g=null==m?void 0:m.data)&&g.clarification_questions?"generate_analysis":"clarify",y;"clarify"===f?y=O:"generate_analysis"===f&&(y=S);let v={...s,request_type:f,analysis_id:e,user_question:r,sql_only:a,token:n,temp:o,db_name:i,db_creds:null,previous_context:h(),root_analysis_id:t,extra_tools:l,planner_question_suffix:c};if(console.groupCollapsed("Analysis Manager submitting"),console.log("Request body",v),!y)throw Error("Endpoint not found");let x=await fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(6e4),body:JSON.stringify(v)});if(!x.ok)throw Error("Failed to submit.");let w=await x.json();console.log(w),console.groupEnd(),T(w),null!=(u=null==w?void 0:w.data)&&u.sql&&!(null!=(d=null==w?void 0:w.data)&&d.error)&&!(null!=(p=null==w?void 0:w.data)&&p.pdf_search_results)&&m&&_()}catch(e){console.log(e),f(e)}finally{A(!1)}}async function N(t){var r,s,o;if(!t)throw Error("No inputs provided");try{A(!0);let a=await fetch(C,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n,db_name:i,analysis_id:e,edited_inputs:t})});if(!a.ok)throw Error("Could not rerun step");let l=await a.json();T(l),null!=(r=null==l?void 0:l.data)&&r.sql&&!(null!=(s=null==l?void 0:l.data)&&s.error)&&!(null!=(o=null==l?void 0:l.data)&&o.pdf_search_results)&&l.analysis_id&&_()}catch(e){throw Error(e instanceof Error?e.message:"Unknown error")}finally{A(!1)}}function _(){k||(k=!0,(0,M.G)(m.analysis_id,r,n).then(e=>{m&&m.data&&T({...m,data:{...m.data,pdf_search_results:e}})}).catch(e=>{console.error("Error fetching PDF search results:",e),m&&m.data&&T({...m,data:{...m.data,pdf_search_results:`Error: ${e instanceof Error?e.message:"Unknown error"}`}})}).finally(()=>{k=!1}))}return{init:async function t({question:t,existingData:s=null}){v=!0;let o=null,a=!1;if(s)o=s,a=!1;else{let t=await (0,M.H)(e,n,r);t?o=t:(o=await (0,M.I)(n,i,r,e,p),a=!0),g=a}T(o)},get wasNewAnalysisCreated(){return g},set wasNewAnalysisCreated(H){g=H},get didInit(){return v},get analysis(){return m},getAnalysis:function(){return m||null},subscribeToDataChanges:function(e){return y=[...y,e],function(){y=y.filter(t=>t!==e)}},getAnalysisBusy:function(){return x},subscribeToAnalysisBusyChanges:function(e){return w=[...w,e],function(){w=w.filter(t=>t!==e)}},setAnalysisBusy:A,submit:E,reRun:N,destroy:function(){b&&console.warn("Already destroyed"),console.groupCollapsed("Destroying. Open for trace"),console.log("Destroying"),console.trace(),console.groupEnd(),b=!0,d()},setOnNewDataCallback:function(e){},getPdfSearchResults:_}}({analysisId:e,rootAnalysisId:t,apiEndpoint:D,token:R,projectName:r,metadata:i,isTemp:n,sqlOnly:s,extraTools:u,plannerQuestionSuffix:d,previousContextCreator:f,onAbortError:e=>{$.error(e),p(!1)},onManagerDestroyed:()=>g(e,L.current),createAnalysisRequestBody:a}),[e,$]),F=(0,A.useSyncExternalStore)(B.subscribeToAnalysisBusyChanges,B.getAnalysisBusy),Q=(0,A.useSyncExternalStore)(B.subscribeToDataChanges,B.getAnalysis);(0,A.useEffect)(()=>{var t,r,n,i,s,o,a,c;l&&null!=(t=null==Q?void 0:Q.data)&&t.initial_question&&!(null!=(r=null==Q?void 0:Q.data)&&r.clarification_questions)&&W(null==(n=null==Q?void 0:Q.data)?void 0:n.initial_question,{},null),null==(i=null==Q?void 0:Q.data)||!i.clarification_questions||(null==(s=null==Q?void 0:Q.data)?void 0:s.clarification_questions.length)!==0||null!=(o=null==Q?void 0:Q.data)&&o.parsedOutput||null!=(a=null==Q?void 0:Q.data)&&a.error||W(null==(c=null==Q?void 0:Q.data)?void 0:c.initial_question,{clarification_questions:[]}),P({analysisDataCache:{...I,[e]:Q}}),p(!1)},[Q]),(0,A.useEffect)(()=>{B.didInit||t();async function t(){var t;try{await B.init({question:null==(t=null==a?void 0:a.initialisation_details)?void 0:t.user_question,existingData:(null==I?void 0:I[e])||null}),B.wasNewAnalysisCreated&&P({analysisDataCache:{...I,[e]:Q}})}catch(e){$.error(e.message),console.log(e.stack),B.destroy()}}},[]),(0,A.useEffect)(()=>{B&&m(B,e,L.current)},[B]);let W=(0,A.useCallback)((e,t={},r=null)=>{try{if(!e)throw Error("Query is empty");p(!0),B.submit(e,{...t})}catch(e){$.error(e),console.log(e.stack),p(!1),null===r&&c&&B.destroy()}},[B,p,$,s,c]),U=T.j.jsx(T.j.Fragment,{children:T.j.jsxs("div",{className:"flex flex-row flex-wrap items-center gap-4 p-6 transition-all duration-200 lg:items-start",children:[T.j.jsx("h1",{className:"font-bold text-xl text-gray-700 dark:text-gray-200 basis-0 grow min-w-[50%]",children:(0,M.M)((null==Q?void 0:Q.user_question)||a.user_question||"")}),!F&&Q&&Q&&(null!=(w=null==Q?void 0:Q.data)&&w.clarification_questions||!c)?null:T.j.jsx("div",{className:"cursor-pointer basis-0 text-nowrap whitespace-nowrap group",onClick:()=>{console.log("clicked"),p(!1),B.destroy()},children:T.j.jsx(V,{className:"w-6 h-6 text-rose-300 group-hover:text-rose-500 dark:text-rose-400 dark:group-hover:text-rose-600"})})]})});return T.j.jsx(ks,{children:T.j.jsx("div",{ref:L,id:e,className:(0,T.t)("analysis-agent-container h-max min-h-20 relative grow outline-none focus:outline-none rounded-3xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 overflow-hidden",z?"bg-gray-50 dark:bg-gray-900":"max-w-full",o),children:F?T.j.jsxs("div",{className:"flex flex-col w-full h-full bg-gray-50 dark:bg-gray-900 rounded-3xl max-h-96 border dark:border-gray-200",children:[U,T.j.jsx(TW,{message:null!=(k=null==Q?void 0:Q.data)&&k.clarification_questions?"Fetching data...":"Thinking about whether I need to clarify the question...",classNames:"m-0 h-40 bg-transparent"})]}):T.j.jsxs(T.j.Fragment,{children:[c||null!=(O=null==Q?void 0:Q.data)&&O.clarification_questions?T.j.jsx(T.j.Fragment,{}):T.j.jsx("div",{className:"relative w-10/12 mx-auto top-6",children:T.j.jsx(T.N,{ref:z,onPressEnter:e=>{W(e.target.value),e.target.value=""},placeholder:h||"Ask a question",disabled:y||F,inputClassNames:"w-full mx-auto shadow-custom hover:border-blue-500 focus:border-blue-500"})}),null!=(S=null==Q?void 0:Q.data)&&S.clarification_questions&&!(null!=(C=null==Q?void 0:Q.data)&&C.output)?T.j.jsxs("div",{className:"w-full transition-all bg-gray-50 dark:bg-gray-900 rounded-3xl",children:[U,T.j.jsx(TU,{questions:(null==(E=null==Q?void 0:Q.data)?void 0:E.clarification_questions)||[],handleSubmit:(e,t)=>{W(null==Q?void 0:Q.user_question,e,t)},globalLoading:F})]}):T.j.jsx(T.j.Fragment,{}),(null==(N=null==Q?void 0:Q.data)?void 0:N.output)&&(null==(_=null==Q?void 0:Q.data)?void 0:_.parsedOutput)&&T.j.jsx("div",{className:"flex flex-col-reverse w-full h-full analysis-content lg:flex-row",children:T.j.jsxs("div",{className:"relative flex flex-col min-w-0 analysis-results grow dark:border-gray-600",children:[U,T.j.jsx(ks,{children:(null==(j=null==Q?void 0:Q.data)?void 0:j.parsedOutput)&&T.j.jsx(R6,{analysisManager:B,projectName:r,analysis:Q,analysisBusy:F,handleReRun:async e=>{console.log(e);try{await B.reRun(e)}catch(e){console.log(e),$.error(e.message)}},analysisTreeManager:null==b?void 0:b.analysisTreeManager,submitFollowOn:e=>{console.log("clicked follow on",e),v(e)}})})]})})]})})})};function R8({analysis:e=null,activeAnalysisId:t=null,extraClasses:r="",isDummy:n=!1,onClick:i=(...e)=>{}}){let s=e&&t===e.analysisId;return T.j.jsx("div",{className:(0,T.t)("flex flex-row items-center dark:text-gray-300",n?"dummy-analysis m-0 mb-3 bg-blue-50 dark:bg-gray-700 border border-blue-200 dark:border-blue-800 shadow-sm text-blue-700 dark:text-blue-300 rounded-md":e&&e.analysisId&&"mb-1",r),children:T.j.jsxs("div",{className:"grow",children:[T.j.jsx("div",{className:n?"p-3 hover:cursor-pointer flex items-center":(0,T.t)("title hover:cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 history-item p-3 text-sm rounded-md transition-colors duration-200 mb-2 border border-transparent",s?"font-medium bg-blue-50 dark:bg-gray-700 border-blue-200 dark:border-blue-800 shadow-sm text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:border-gray-200 dark:hover:border-gray-700"),onClick:()=>{i(n?null:e)},children:n?T.j.jsxs("div",{className:"flex items-center",children:[T.j.jsx(ei,{size:18})," ",T.j.jsx("span",{className:"font-medium ml-2",children:"New Report"})]}):T.j.jsxs(T.j.Fragment,{children:[T.j.jsx("div",{className:"line-clamp-2 font-medium",children:(0,M.M)(null==e?void 0:e.user_question)}),(null==e?void 0:e.timestamp)&&T.j.jsxs("div",{className:"flex items-center text-xs mt-1.5 text-gray-500 dark:text-gray-400",children:[T.j.jsx("span",{className:"inline-block w-3 h-3 mr-1.5 rounded-full bg-blue-200 dark:bg-blue-700"}),new Date(e.timestamp).toLocaleString(void 0,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})]})]})}),!n&&e&&e.children&&e.children.length>0&&T.j.jsx("div",{className:"ml-2",children:e.children.map(e=>T.j.jsx(R8,{analysis:e,activeAnalysisId:t,isDummy:n,extraClasses:"ml-2",onClick:i},e.analysisId))})]})})}let R9=(0,A.forwardRef)(function({searchBarClasses:e="",searchBarDraggable:t=!0,loading:r=!1,handleSubmit:n,activeRootAnalysisId:i,activeAnalysisId:s,forceSqlOnly:o=!1,setSqlOnly:a,sqlOnly:l,question:c,onNewConversationTextClick:h=()=>{}},u){let d=(0,A.useRef)(null),f=(0,A.useRef)(!1);return(0,A.useEffect)(()=>{c&&(u.current.value=c,u.current.focus())},[c,u]),(0,A.useEffect)(()=>{if(t)return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)};function e(){d.current&&(d.current.style.left="0",d.current.style.right="0",d.current.style.bottom=window.innerWidth>1600?"30%":"20px")}},[t]),(0,A.useEffect)(()=>{if(t)return document.addEventListener("mousemove",e),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",r)};function e(e){if(!f.current||!d.current)return;let t=window.innerHeight-e.clientY-d.current.clientHeight,r=e.clientX,n=window.innerHeight-20-d.current.clientHeight;t<20?d.current.style.bottom="20px":t>n?d.current.style.bottom=n+"px":d.current.style.bottom=t+"px";let i=window.innerWidth-d.current.clientWidth-20;d.current.style.right="auto",r<20?d.current.style.left="20px":r>i?d.current.style.left=i+"px":d.current.style.left=r+"px"}function r(){f.current=!1}},[t]),(0,A.useEffect)(()=>{function e(e){document.activeElement===document.body&&!e.metaKey&&!e.ctrlKey&&!e.altKey&&!e.shiftKey&&((0,T.aa)(e.key,T.a7.FOCUS_SEARCH)?(e.preventDefault(),u&&"current"in u&&u.current&&u.current.focus()):(0,T.aa)(e.key,T.a7.NEW_CONVERSATION)&&(e.preventDefault(),h(),u&&"current"in u&&u.current&&u.current.focus()))}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[u,h]),T.j.jsx("div",{className:(0,T.t)("w-full lg:w-8/12 m-auto [&_textarea]:pl-2 bg-white dark:bg-gray-800 rounded-lg shadow-custom border border-gray-400 dark:border-gray-600 hover:border-blue-500 dark:hover:border-blue-500 focus:border-blue-500 dark:focus:border-blue-500",t?"fixed z-40":"",e),style:{left:"0",right:"0",bottom:t?window.innerWidth>1600?"30%":"20px":null},ref:d,children:T.j.jsxs("div",{className:"flex flex-row",children:[t&&T.j.jsx("div",{className:"flex items-center w-3 min-h-full ml-1 cursor-move group",onMouseDown:e=>{t&&(f.current=!0,e.preventDefault())},children:T.j.jsx(K,{className:"w-3 h-3 text-gray-400 dark:text-gray-500 group-hover:text-primary-text dark:group-hover:text-gray-300"})}),T.j.jsx("div",{className:"flex flex-row items-center rounded-md grow",children:T.j.jsxs("div",{className:"flex flex-row grow",children:[T.j.jsxs("div",{className:"relative flex flex-row-reverse items-center grow",children:[T.j.jsx(T.U,{rootClassNames:"grow border-none bg-transparent py-1.5 text-gray-900 dark:text-gray-100 px-2 placeholder:text-gray-400 dark:placeholder:text-gray-500 sm:leading-6 text-sm break-words focus:ring-0 focus:outline-none",textAreaClassNames:"resize-none pr-8",ref:u,id:"main-searchbar",disabled:r,defaultRows:1,onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),e.stopPropagation(),n(u.current.value,i,!i,s)):"Escape"===e.key&&(e.preventDefault(),u&&"current"in u&&u.current&&u.current.blur())},placeholder:i?"Type your next question here":"Type your question here"}),T.j.jsx(T.a1,{keyValue:T.a7.FOCUS_SEARCH,className:"absolute -translate-y-1/2 opacity-50 pointer-events-none right-3 top-1/2"}),T.j.jsxs("span",{className:"relative inline-block pl-2 group hover:cursor-pointer hover:bg-gray-100 hover:text-blue-600",onClick:()=>{h()},children:[T.j.jsxs("div",{className:"flex items-center gap-2",children:[T.j.jsx(ei,{}),T.j.jsx(T.a1,{keyValue:T.a7.NEW_CONVERSATION,className:"opacity-50"})]}),T.j.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-max px-3 py-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",children:"Start New Thread"})]})]}),T.j.jsxs("button",{type:"button",className:"relative -ml-px inline-flex items-center gap-x-1.5 rounded-r-md px-3 p-0 text-sm font-semibold text-gray-900 dark:text-gray-100 ring-1 ring-inset ring-blue-500 hover:bg-blue-500 hover:text-white dark:hover:text-white",onClick:()=>{n(u.current.value,i,!i,s)},children:[T.j.jsx(P,{className:"-ml-0.5 h-5 w-5 text-gray-400 dark:text-gray-500","aria-hidden":"true"}),"Ask"]})]})})]})})}),Pe=(e,t,r="smooth")=>{var n,i;let s=t&&(null==(i=null==(n=null==t?void 0:t.current)?void 0:n[e])?void 0:i.ctr);(s||(s=document.getElementById(e)))&&s.scrollIntoView({behavior:r,block:"start"})},Pt=(e,t)=>(0,A.useMemo)(()=>{try{let r=Object.keys(e).sort((t,r)=>{var n,i;return((null==(n=null==e?void 0:e[r])?void 0:n.timestamp)||0)-((null==(i=null==e?void 0:e[t])?void 0:i.timestamp)||0)}),n={Today:[],Yesterday:[],"Past week":[],"Past month":[],Earlier:[]},i=new Date,s=new Date(i);s.setDate(s.getDate()-1);let o=new Date(i);o.setDate(o.getDate()-7);let a=new Date(i);return a.setMonth(a.getMonth()-1),r.forEach(e=>{let r=t[e].root.timestamp,l=new Date(r);l.toDateString()===i.toDateString()?n.Today.push(e):l.toDateString()===s.toDateString()?n.Yesterday.push(e):l>=o?n["Past week"].push(e):l>=a?n["Past month"].push(e):n.Earlier.push(e)}),Object.keys(n).forEach(e=>{n[e].sort((e,r)=>{var n,i,s,o;return((null==(i=null==(n=null==t?void 0:t[r])?void 0:n.root)?void 0:i.timestamp)||0)-((null==(o=null==(s=null==t?void 0:t[e])?void 0:s.root)?void 0:o.timestamp)||0)})}),n}catch{return console.warn("Error in sorting keys. Returning as is."),{Earlier:Object.keys(e)}}},[e,t]),Pr=async(e,t,r,n,i,s,o,a,l,c)=>{let h="analysis-"+crypto.randomUUID(),{newAnalysis:u}=await e.submit({question:t,analysisId:h,rootAnalysisId:r?h:n,projectName:i,isRoot:r,directParentId:s,sqlOnly:a||o,isTemp:l,activeTab:c});return n||e.setActiveRootAnalysisId(u.analysisId),e.setActiveAnalysisId(u.analysisId),e.setActiveRootAnalysisId(u.rootAnalysisId),h},Pn=(e,t,r,n,i,s,o,a,l,c,h,u)=>(0,A.useCallback)(async(d,f=null,p=!1,m=null)=>{try{if(u(!0),!e)throw Error("Analysis tree manager not found");let c=e.getAll(),g="analysis",y="table";if(Object.keys(c).length>0){let e=await (0,M.O)(s,t,o,d);g=e.question_type,y=e.default_open_tab}if("edit-chart"===g){f?await Pi(c,d,l,a,e,s):await Pr(e,d,p,f,t,m,n,r,i,"chart");return}let b=await Pr(e,d,p,f,t,m,n,r,i,y);(0,M.P)(()=>{Pe(b,h)})}catch(e){a.error("Failed to create analysis"),console.error(e)}finally{c.current&&(c.current.value=""),u(!1)}},[e,r,n,i,t,h]),Pi=async(e,t,r,n,i,s)=>{var o,a,l,c;let h=(0,M.N)(Object.keys(e)),u=e[h.id],d=null==(l=null==(a=null==(o=null==u?void 0:u.analysisManager)?void 0:o.getAnalysis())?void 0:a.data)?void 0:l.parsedOutput;if(!d){n.error("No visible analysis found to edit chart");return}if(!(null!=(c=null==d?void 0:d.chartManager)&&c.config)){n.error("No chart found in the visible analysis");return}try{await d.chartManager.editChart(s,t,r,{onError:e=>{n.error(e.message),console.error(e)}}),i.setActiveTab(h.id,"chart")}catch(e){n.error(e.message),console.error(e)}},Ps=(e,t)=>{(0,A.useEffect)(()=>{Object.values(e).forEach(e=>{t.current[e.analysisId]={id:e.analysisId,ctr:document.getElementById(e.analysisId),analysisManager:e.analysisManager}})},[e])},Po=(e,t,r,n,i)=>{(0,A.useEffect)(()=>{n.current&&(clearTimeout(n.current),n.current=null,i.current=!1),i.current=!0,n.current=setTimeout(()=>{e&&t&&r.current[e]&&Pe(e,r),i.current=!1},500)},[])},Pa=({projectName:e,activeRootAnalysisId:t,nestedTree:r,metadata:n,analysisDomRefs:i,analysisTreeManager:s,autoScroll:o,setLoading:a,submitFollowOn:l})=>{if(!t||!r[t])return null;let c=(0,A.useSyncExternalStore)(s.subscribeToActiveAnalysisIdChanges,s.getActiveAnalysisId),h=e=>(0,T.t)("w-full mb-4 [&_.analysis-content]:min-h-96 shadow-md transition-opacity duration-200",`analysis-${e}`,e===c?"border-2 border-blue-500 dark:border-blue-400 bg-white dark:bg-gray-800 z-2 relative":"opacity-50 hover:opacity-75 bg-gray-50/80 dark:bg-gray-900/80 relative -z-0");return T.j.jsxs(T.j.Fragment,{children:[T.j.jsx(R7,{projectName:e,setGlobalLoading:a,metadata:n,rootClassNames:h(t),analysisId:t,rootAnalysisId:t,createAnalysisRequestBody:r[t].createAnalysisRequestBody,initiateAutoSubmit:!0,hasExternalSearchBar:!0,sqlOnly:r[t].sqlOnly,isTemp:r[t].isTemp,previousContextCreator:()=>[],onManagerCreated:(e,n,o)=>{i.current[n]={ctr:o,analysisManager:e,id:n},s.updateAnalysis({analysisId:t,isRoot:r[t].isRoot,updateObj:{analysisManager:e}})},onManagerDestroyed:e=>{s.removeAnalysis({analysisId:t,isRoot:r[t].isRoot,rootAnalysisId:t}),s.setActiveAnalysisId(null),t===e&&s.setActiveRootAnalysisId(null),a(!1)},initialConfig:{analysisTreeManager:s},submitFollowOn:l},t),r[t].flatOrderedChildren.map(r=>T.j.jsx(R7,{projectName:e,metadata:n,rootClassNames:h(r.analysisId),analysisId:r.analysisId,rootAnalysisId:r.rootAnalysisId,createAnalysisRequestBody:r.createAnalysisRequestBody,setGlobalLoading:a,initiateAutoSubmit:!0,hasExternalSearchBar:!0,sqlOnly:r.sqlOnly,isTemp:r.isTemp,previousContextCreator:()=>r.allParents.reverse().map(e=>{var t,r,n,i;let s=null==(t=null==e?void 0:e.analysisManager)?void 0:t.analysis;return s&&null!=s&&s.data?{question:null==(n=null==(r=null==s?void 0:s.data)?void 0:r.inputs)?void 0:n.question,sql:null==(i=null==s?void 0:s.data)?void 0:i.sql}:null}).filter(e=>e&&e.sql&&e.question),onManagerCreated:(e,t,n)=>{i.current[t]={ctr:n,analysisManager:e,id:t},s.updateAnalysis({analysisId:r.analysisId,isRoot:r.isRoot,updateObj:{analysisManager:e}})},onManagerDestroyed:e=>{s.removeAnalysis({analysisId:r.analysisId,isRoot:r.isRoot,rootAnalysisId:r.rootAnalysisId}),s.setActiveAnalysisId(null),t===e&&s.setActiveRootAnalysisId(null),a(!1)},initialConfig:{analysisTreeManager:s},submitFollowOn:l},r.analysisId))]})},Pl=({predefinedQuestions:e,handleSubmit:t,activeRootAnalysisId:r,activeAnalysisId:n})=>T.j.jsx("div",{className:"grow flex flex-col place-content-center m-auto max-w-full relative z-[1]",children:T.j.jsxs("div",{className:"text-center text-gray-400 rounded-md dark:text-gray-500",children:[T.j.jsx("p",{className:"block mb-4 text-sm font-bold cursor-default",children:"Quickstart"}),T.j.jsx("ul",{className:"font-light text-gray-500 dark:text-gray-400",children:e.map((e,i)=>T.j.jsx("li",{children:T.j.jsx("button",{className:(0,T.t)("cursor-pointer text-sm p-2 m-1 border border-gray-200 dark:border-gray-700 rounded-md shadow-sm","hover:bg-gray-50 dark:hover:bg-gray-800 hover:border"),onClick:()=>{t((0,M.M)(e),r,!r,n)},children:(0,M.M)(e)})},i))})]})});function Pc({analysisTreeManager:e,projectName:t,isTemp:r=!1,forceSqlOnly:n=!1,metadata:i=null,predefinedQuestions:s=[],autoScroll:o=!0,sideBarClasses:a="",searchBarClasses:l="",searchBarDraggable:c=!0,defaultSidebarOpen:h=!1,onTreeChange:u=()=>{},beforeTitle:d=null}){let f=(0,A.useContext)(T.a),{token:p,apiEndpoint:m}=(0,A.useContext)(TH),g=(0,A.useRef)(null),y=(0,A.useRef)({}),b=(0,A.useRef)(null),v=(0,A.useRef)(!1),[x,w]=(0,A.useState)(!1),[k,O]=(0,A.useState)(!0),[S,C]=(0,A.useState)(""),[E,N]=(0,A.useState)(h),[_,j]=(0,A.useState)(e.getActiveAnalysisId()),[D,R]=(0,A.useState)(e.getActiveRootAnalysisId()),[P,I]=(0,A.useState)(e.getAll()),z=(0,M.F)({protocol:"http",path:"edit_chart",apiEndpoint:m}),L=(0,A.useSyncExternalStore)(e.subscribeToDataChanges,e.getTree),q=(0,A.useMemo)(()=>e.getNestedTree(),[L]),$=Pt(q,L);(0,A.useEffect)(()=>{let t=e.setActiveAnalysisId;return e.setActiveAnalysisId=r=>(j(r),t.call(e,r)),()=>{e.setActiveAnalysisId=t}},[e]),(0,A.useEffect)(()=>{let t=e.setActiveRootAnalysisId;return e.setActiveRootAnalysisId=r=>(R(r),t.call(e,r)),()=>{e.setActiveRootAnalysisId=t}},[e]),(0,A.useEffect)(()=>{I(e.getAll())},[L]);let B=Pn(e,t,n,k,r,p,m,f,z,g,y,w);(0,A.useEffect)(()=>{w(!1),y.current={}},[e]),(0,A.useEffect)(()=>{r||u(t,L)},[u,t,L,r]),Ps(P,y),Po(_,o,y,b,v);let F=(0,A.useCallback)(()=>{let t=e.getAll(),{id:r}=(0,M.N)(Object.keys(t));if(!r||r===e.getActiveAnalysisId())return;let n=t[r].rootAnalysisId;e.setActiveAnalysisId(r),e.setActiveRootAnalysisId(n)},[]);return T.j.jsx(ks,{children:T.j.jsxs("div",{className:"flex flex-row w-full h-full max-w-full text-gray-600 bg-white dark:bg-gray-900 analysis-tree-viewer",children:[T.j.jsx("div",{className:"absolute left-0 top-0 z-[20] lg:sticky h-full",children:T.j.jsx(T.Q,{location:"left",open:E,onChange:e=>{N(e)},beforeTitle:d,title:T.j.jsxs("h2",{className:"font-bold text-gray-800 dark:text-gray-200 mb-3 text-lg flex items-center justify-between",children:[T.j.jsxs("span",{className:"flex items-center",children:[T.j.jsx("span",{className:"mr-2",children:"\uD83D\uDCDA"})," History"]}),T.j.jsx("span",{title:"Clear history",className:"inline-block text-xs font-medium text-gray-400 cursor-pointer dark:text-gray-500 hover:text-blue-500 dark:hover:text-blue-500 px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",onClick:()=>{e.reset(),e.setActiveAnalysisId(null),e.setActiveRootAnalysisId(null)},children:"Clear"})]}),rootClassNames:(0,T.t)("transition-all z-20 h-[calc(100%-1rem)] absolute left-0 min-h-full shadow-lg lg:shadow-none lg:sticky top-0 bg-gray-50 dark:bg-gray-800 z-20 border-r border-gray-100 dark:border-gray-700",a),contentClassNames:"w-72 p-5 rounded-tl-lg relative sm:block min-h-96 h-full overflow-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600 scrollbar-track-transparent",children:T.j.jsxs("div",{className:"flex flex-col w-full h-full space-y-4",children:[T.j.jsx("div",{className:"sticky top-0 mb-4",children:T.j.jsx(R8,{isDummy:!0,onClick:()=>{C(""),v.current=!0,e.setActiveRootAnalysisId(null),e.setActiveAnalysisId(null)}})}),Object.entries($).map(([t,r])=>0===r.length?null:T.j.jsxs("div",{className:"mb-6",children:[T.j.jsxs("div",{className:"px-2 mb-3 text-xs font-medium tracking-wide text-blue-600 dark:text-blue-400 uppercase flex items-center",children:[T.j.jsx("div",{className:"h-px bg-blue-100 dark:bg-blue-800 flex-grow mr-2"}),t,T.j.jsx("div",{className:"h-px bg-blue-100 dark:bg-blue-800 flex-grow ml-2"})]}),r.map(t=>{let r=q[t];return T.j.jsx("div",{children:T.j.jsx(R8,{analysis:r,activeAnalysisId:_,onClick:r=>{e.setActiveRootAnalysisId(t),e.setActiveAnalysisId((null==r?void 0:r.analysisId)||t),window.innerWidth<T.G.lg&&N(!1),b.current&&(clearTimeout(b.current),b.current=null,v.current=!1),b.current=setTimeout(()=>{v.current=!0,o&&Pe((null==r?void 0:r.analysisId)||t,y),v.current=!1},200)},extraClasses:(0,T.t)("ml-4")},null==r?void 0:r.analysisId)},null==r?void 0:r.analysisId)})]},t))]})})}),T.j.jsx("div",{className:(0,T.t)("absolute left-0 top-0 h-full w-full overlay lg:hidden bg-gray-800 dark:bg-gray-900 z-[11] transition-all",E?"opacity-50 block":"opacity-0 pointer-events-none"),onClick:()=>{N(!1)}}),T.j.jsxs("div",{className:(0,T.t)("relative w-full h-full min-w-0 p-2 pt-10 overflow-y-auto overflow-x-clip rounded-tr-lg sm:pt-0 grow lg:p-4",_?"":"flex flex-col"),onScroll:TF(e=>{v.current||(e.stopPropagation(),F())},100),children:[_&&D&&q[D]&&T.j.jsx(Pa,{projectName:t,activeRootAnalysisId:D,nestedTree:q,metadata:i,analysisDomRefs:y,analysisTreeManager:e,autoScroll:o,setLoading:w,submitFollowOn:C}),!_&&(x?T.j.jsx("div",{className:"flex items-center justify-center h-full",children:T.j.jsx(T.I,{})}):T.j.jsx(Pl,{predefinedQuestions:s,handleSubmit:B,activeRootAnalysisId:D,activeAnalysisId:_})),T.j.jsx("div",{className:c?"":"fixed bottom-1 z-40 lg:w-4/6 w-11/12 mx-auto left-0 right-0",children:T.j.jsx(R9,{ref:g,searchBarClasses:l,searchBarDraggable:c,handleSubmit:B,loading:x,activeRootAnalysisId:D,activeAnalysisId:_,forceSqlOnly:n,setSqlOnly:O,sqlOnly:k,question:S,onNewConversationTextClick:()=>{v.current=!0,e.setActiveRootAnalysisId(null),e.setActiveAnalysisId(null),window.innerWidth<T.G.lg&&N(!1)}})})]})]})})}let Ph=A.memo(function({selectedItem:e,selectedProjectName:t,token:r,apiEndpoint:n}){let i=(0,A.useRef)({}),[s,o]=(0,A.useState)(!1),a=(0,A.useMemo)(()=>e.treeManager||RX(e.analysisTree),[e]),l=(0,A.useSyncExternalStore)(a.subscribeToDataChanges,a.getTree),c=(0,A.useMemo)(()=>a.getNestedTree(),[l]),h=(0,A.useMemo)(()=>Object.keys(c)[0]||null,[c]),{searchBarManager:u}=(0,A.useContext)(hp);(0,A.useEffect)(()=>{h&&(a.setActiveRootAnalysisId(h),a.setActiveAnalysisId(h))},[a,h]);let d=(0,A.useCallback)(e=>{e&&u.setQuestion(e)},[u]);return h?T.j.jsx(TH.Provider,{value:{token:r,apiEndpoint:n,hiddenCharts:[],hideSqlTab:!1,hidePreviewTabs:!1,hideRawAnalysis:!0,analysisDataCache:{},updateConfig:()=>{}},children:T.j.jsx(Pa,{projectName:t,activeRootAnalysisId:h,nestedTree:c,metadata:null,analysisDomRefs:i,analysisTreeManager:a,autoScroll:!0,setLoading:o,submitFollowOn:d})}):null}),Pu=A.memo(function({apiEndpoint:e,token:t,selectedItemId:r,selectedItem:n,selectedProjectName:i,uploadNewProjectOption:s,searchBar:o,onReportDelete:a,onReportParsed:l,onThinkingStreamClosed:c,setMostVisibleAnalysisAsActive:h,onProjectCreated:u}){return T.j.jsxs("div",{className:"flex flex-col grow p-2 relative min-w-0 overflow-auto",children:[null===r&&i===s&&T.j.jsx(hc,{apiEndpoint:e,token:t,onProjectCreated:u}),r&&n&&"analysisTree"in n?T.j.jsx("div",{className:"p-4 space-y-4 max-h-full overflow-y-auto pb-48",onScroll:(0,A.useMemo)(()=>TF(e=>{e.stopPropagation(),h()},100),[h]),children:T.j.jsx(ks,{children:Object.keys(n.analysisTree).length>0&&T.j.jsx(Ph,{selectedItem:n,selectedProjectName:i,token:t,apiEndpoint:e})})}):r&&n&&"status"in n&&n.status===Wl.DONE?T.j.jsx(Wa,{reportId:r,apiEndpoint:e,projectName:i,token:t,onDelete:a,onReportParsed:l},r):r?T.j.jsx(TT,{apiEndpoint:e,token:t,reportId:r,onDelete:a,onStreamClosed:c}):null,o]})}),Pd=({error:e})=>T.j.jsxs("div",{className:"w-screen h-screen flex items-center justify-center bg-rose-50 text-rose-500",children:["Error: ",e]}),Pf=({message:e="Loading"})=>(console.log("Rendering OracleLoading with message:",e),T.j.jsx("div",{className:"w-screen h-screen flex flex-col gap-4 items-center justify-center bg-gray-50 text-gray-400",children:T.j.jsxs("div",{className:"flex items-center",children:[T.j.jsx(T.d,{})," ",T.j.jsx("span",{className:"ml-2",children:e})]})})),Pp=()=>{let e=(0,A.useCallback)(()=>{if("u">typeof window){let e=new URLSearchParams(window.location.search).get("item_id");if(e){let t=Number(e);return isNaN(t)?e:t.toString()}}return null},[])();return{urlItemIdRef:(0,A.useRef)(e),updateUrlWithItemId:(0,A.useCallback)(e=>{if("u">typeof window){let t=new URL(window.location.href);if(null!==e){let r=String(e);t.searchParams.set("item_id",r)}else t.searchParams.delete("item_id");window.history.pushState({},"",t.toString())}},[])}},Pm=(e,t,r)=>{if(!e||!t||!r||!r[e])return"Today";for(let n of Object.keys(r[e]))if(r[e][n]&&Array.isArray(r[e][n])&&r[e][n].some(e=>String(null==e?void 0:e.itemId)===String(t)))return n;return"Today"},Pg=()=>({Today:[],Yesterday:[],"Past week":[],"Past month":[],Earlier:[]}),Py=e=>{let t=new Date,r=new Date(t);r.setDate(r.getDate()-1);let n=new Date(t);n.setDate(n.getDate()-7);let i=new Date(t);return i.setMonth(i.getMonth()-1),e.toDateString()===t.toDateString()?"Today":e.toDateString()===r.toDateString()?"Yesterday":e>=n?"Past week":e>=i?"Past month":"Earlier"},Pb=e=>{Object.entries(e).forEach(([e,t])=>{t&&Array.isArray(t)&&t.sort((e,t)=>{let r="report_id"in e?new Date(e.date_created+"Z").getTime():new Date(e.date_created).getTime();return("report_id"in t?new Date(t.date_created+"Z").getTime():new Date(t.date_created).getTime())-r})})},Pv=(e,t,r=null)=>{let[n,i]=(0,A.useState)(e),[s,o]=(0,A.useState)(null),[a,l]=(0,A.useState)({}),[c,h]=(0,A.useState)(r),u=(0,A.useCallback)(e=>{o(e),t(null),h(null)},[t]),d=(0,A.useCallback)(e=>{i(t=>[...t,e]),h(null),l(t=>({...t,[e]:Pg()}))},[]);return{projectNames:n,setProjectNames:i,selectedProjectName:s,setSelectedProjectName:o,oracleHistory:a,setOracleHistory:l,selectedItemId:c,setSelectedItemId:h,handleProjectChange:u,handleNewProjectCreated:d}},Px=(e,t,r,n,i,s,o,a,l,c)=>{let h=null===i||null!==s.current;console.log("Initial loading state:",h,"Selected project:",i,"URL item:",s.current);let[u,d]=(0,A.useState)(h),[f,p]=(0,A.useState)(null),m=(0,A.useRef)(!1);return(0,A.useEffect)(()=>{let o=!1;(async function(){if(m.current||o){console.log("Skipping initial setup - already complete or running");return}console.log("Starting initial setup"),o=!0,d(!0);try{let o=s.current,h={},u=!1,d=null;for(let t of e)h[t]=Pg();if(o){if(console.log("URL contains item_id:",o,"- searching for it"),i&&i!==n)try{(await Pw(i,t,r,h,o)).foundUrlItemId&&(u=!0,d=i,console.log("Found item in initial project:",i))}catch(e){console.error("Error searching in project:",i,e)}if(!u)for(let s of e.filter(e=>e!==n&&e!==i))try{if(console.log("Checking project:",s),(await Pw(s,t,r,h,o)).foundUrlItemId){u=!0,d=s,console.log("Found item in project:",s);break}}catch(e){console.error("Error searching in project:",s,e)}}a(h),u&&d?(console.log("Setting project to",d,"and item to",o),l(d),c(o)):i?console.log("Keeping existing project selection:",i):e.length>0?(console.log("No URL item found, selecting first project"),l(e[0])):(console.log("No projects available, using upload option"),l(n)),console.log("Initial setup completed successfully"),m.current=!0}catch(e){console.error("Initial setup error:",e),p(e.message)}finally{console.log("Setting loading to false in initialSetup"),d(!1),o=!1}})();let h=setTimeout(()=>{u&&(console.log("Safety timeout reached - forcing loading to false"),d(!1),m.current=!0,p("Loading timed out - please try refreshing the page"))},5e3);return()=>clearTimeout(h)},[e,t,r,s,n,i,l,c,a,u,d,p]),(0,A.useEffect)(()=>{if(!m.current||null===i){console.log("Skipping data loading - initial setup not complete or no project selected");return}if(i===n){console.log("Skipping data loading for upload option"),d(!1);return}console.log("Loading data for project:",i);let e=!1;(async function(){if(e){console.log("Already loading data, skipping");return}e=!0,console.log("Setting loading to true for project data"),d(!0);try{let e={...o};e[i]=Pg();try{await Pw(i,t,r,e,null)}catch{p("Failed to fetch reports for project name "+i)}a(e)}catch(e){console.error("Data loading error:",e),p(e.message)}finally{console.log("Setting loading to false after project data load"),d(!1),e=!1}})()},[i,t,r,n,a,p]),{loading:u,error:f}};async function Pw(e,t,r,n,i){let s={foundUrlItemId:!1,foundUrlItemIdProjectName:null},[o,a]=await Promise.all([Wx(t,r,e),(0,M.Q)(t,r,e)]);if(a&&a.length>0&&function(e,t,r,n){let i={foundUrlItemId:!1,foundUrlItemIdProjectName:null};for(let s of e.filter(e=>e.is_root_analysis)){let o=function(e){if(!e||!Array.isArray(e)||0===e.length)return{};let t={},r={},n={};return e.forEach(e=>{var i,s;r[e.analysis_id]=e;let o={analysisId:e.analysis_id,createAnalysisRequestBody:{initialisation_details:{user_question:e.user_question,is_root_analysis:!!e.is_root_analysis,root_analysis_id:e.root_analysis_id,direct_parent_id:e.direct_parent_id},sql_only:(null==(i=e.data)?void 0:i.tool_name)==="sql_aggregator"},directParentId:e.direct_parent_id||null,timestamp:new Date(e.timestamp).getTime(),isRoot:!!e.is_root_analysis,isTemp:!1,projectName:e.db_name,rootAnalysisId:e.is_root_analysis?e.analysis_id:e.root_analysis_id,sqlOnly:(null==(s=e.data)?void 0:s.tool_name)==="sql_aggregator",user_question:e.user_question||"",activeTab:"table",analysisManager:void 0};o.isRoot&&(n[o.analysisId]=o,t[o.analysisId]={root:o,analysisList:[o]})}),e.forEach(e=>{var r,n;if(!e.is_root_analysis&&e.root_analysis_id){let i={analysisId:e.analysis_id,createAnalysisRequestBody:{initialisation_details:{user_question:e.user_question,is_root_analysis:!1,root_analysis_id:e.root_analysis_id,direct_parent_id:e.direct_parent_id},sql_only:(null==(r=e.data)?void 0:r.tool_name)==="sql_aggregator"},directParentId:e.direct_parent_id||null,timestamp:new Date(e.timestamp).getTime(),isRoot:!1,isTemp:!1,projectName:e.db_name,rootAnalysisId:e.root_analysis_id,sqlOnly:(null==(n=e.data)?void 0:n.tool_name)==="sql_aggregator",user_question:e.user_question||"",activeTab:"table",analysisManager:void 0};t[e.root_analysis_id]&&t[e.root_analysis_id].analysisList.push(i)}}),Object.keys(t).forEach(e=>{t[e].analysisList.sort((e,t)=>e.timestamp-t.timestamp)}),t}(e.filter(e=>e.root_analysis_id===s.analysis_id||e.analysis_id===s.analysis_id)),a=RX(o);n&&!i.foundUrlItemId&&String(s.analysis_id)===String(n)&&(i.foundUrlItemId=!0,i.foundUrlItemIdProjectName=r);let l={itemType:"query-data",date_created:s.timestamp,itemId:s.analysis_id,analysisTree:o,treeManager:a},c=Py(new Date(s.timestamp));t[r][c].push(l)}return i}(a,n,e,i).foundUrlItemId&&(s.foundUrlItemId=!0,s.foundUrlItemIdProjectName=e),!o)throw Error("Failed to get reports");return s.foundUrlItemId||function(e,t,r,n){let i={foundUrlItemId:!1,foundUrlItemIdProjectName:null};return n&&e.find(e=>String(e.report_id)===String(n))&&(i.foundUrlItemId=!0,i.foundUrlItemIdProjectName=r),e.filter(e=>e.status!==Wl.ERRORED&&e.status!==Wl.INITIALIZED).forEach(e=>{let n=Py(new Date(e.date_created+"Z")),i={...e,itemId:e.report_id,itemType:"report"};t[r][n].push(i)}),i}(o,n,e,i).foundUrlItemId&&(s.foundUrlItemId=!0,s.foundUrlItemIdProjectName=e),Pb(n[e]),s}let Pk=e=>({createNewFastAnalysis:(0,A.useCallback)(async function({question:t,projectName:r,analysisId:n,rootAnalysisId:i,treeManager:s=null}){try{return s?PO({question:t,projectName:r,analysisId:n,rootAnalysisId:i,treeManager:s}):PS({question:t,projectName:r,analysisId:n})}catch(t){throw console.error("Error creating new analysis:",t),e.error("Failed to create analysis: "+t.message),t}},[e])});async function PO({question:e,projectName:t,analysisId:r,rootAnalysisId:n,treeManager:i}){let{newAnalysis:s}=await i.submit({question:e,projectName:t,analysisId:r,rootAnalysisId:n,isRoot:!1,directParentId:i.getActiveAnalysisId(),activeTab:"table"});return(0,M.P)(()=>{Pe(s.analysisId)}),{rootAnalysisId:n,analysisTree:(null==i?void 0:i.getTree())||{},treeManager:i}}async function PS({question:e,projectName:t,analysisId:r}){let n=RX();return await n.submit({question:e,projectName:t,analysisId:r,rootAnalysisId:r,isRoot:!0,directParentId:null,sqlOnly:!1,isTemp:!1,activeTab:"table"}),{rootAnalysisId:r,analysisTree:n.getTree(),treeManager:n}}let PC=(e,t,r,n,i,s,o,a)=>{let l=(0,A.useCallback)(async()=>{let l=Pm(n,r,s);if(await Ww(e,r,t,n))return a.success("Report deleted"),o(e=>{let t=e[n][l].filter(e=>"report_id"in e?e.report_id!==r:e.itemId!==r),i={...e,[n]:{...e[n],[l]:t}};return 0===t.length&&delete i[n][l],i}),i(null),null;a.error("Failed to delete report")},[e,t,r,n,i,s,a,o]),c=(0,A.useCallback)(({userQuestion:e,reportId:t,status:r})=>(o(i=>{var s,o,a,l,c;let h={...i};return h[n]={...i[n],Today:[{report_id:t,report_name:e,status:r,date_created:ZN(),itemId:t,itemType:"report"},...(null==(s=null==i?void 0:i[n])?void 0:s.Today)||[]],Yesterday:(null==(o=null==i?void 0:i[n])?void 0:o.Yesterday)||[],"Past week":(null==(a=null==i?void 0:i[n])?void 0:a["Past week"])||[],"Past month":(null==(l=null==i?void 0:i[n])?void 0:l["Past month"])||[],Earlier:(null==(c=null==i?void 0:i[n])?void 0:c.Earlier)||[]},h}),i(t),t),[n,i,o]);return{onReportDelete:l,handleReportGenerated:c,handleReportParsed:(0,A.useCallback)(e=>{let t=Pm(n,r,s);o(i=>{let s=i[n][t];return{...i,[n]:{...i[n],[t]:s.map(t=>"report_id"in t&&t.report_id===r?{...t,reportData:e}:t)}}})},[n,r,s,o]),handleThinkingStreamClosed:(0,A.useCallback)((e,t)=>{if(!n||!r||!s[n]){console.warn("Stream closed but project or report data missing");return}let a=Pm(n,r,s);if(!s[n][a]){console.warn("Stream closed but report group missing:",a);return}t?function(e,t,r,n,i){return i(n=>{let i={...n};return i[e]&&i[e][r]&&Array.isArray(i[e][r])&&(i[e][r]=i[e][r].filter(e=>"report_id"in e?e.report_id!==t:e.itemId!==t)),i}),n(null),null}(n,r,a,i,o):function(e,t,r,n){n(n=>{let i={...n};return i[e]&&i[e][r]&&Array.isArray(i[e][r])&&(i[e][r]=i[e][r].map(e=>e.itemId===t?{...e,status:Wl.DONE}:e)),i})}(n,r,a,o)},[n,r,s,i,o])}},PT=A.memo(function({apiEndpoint:e,token:t,initialProjectNames:r=[]}){let{current:n}=(0,A.useRef)((0,M.g)()),i=(0,A.useRef)(hf()),s=(0,A.useRef)((0,T.M)()),{urlItemIdRef:o,updateUrlWithItemId:a}=Pp(),{projectNames:l,selectedProjectName:c,setSelectedProjectName:h,oracleHistory:u,setOracleHistory:d,selectedItemId:f,setSelectedItemId:p,handleProjectChange:m,handleNewProjectCreated:g}=Pv(r,a,o.current),{loading:y,error:b}=Px(l,e,t,n,c,o,u,d,h,p),{createNewFastAnalysis:v}=Pk(s.current),{onReportDelete:x,handleReportGenerated:w,handleReportParsed:k,handleThinkingStreamClosed:O}=PC(e,t,f,c,a,u,d,s.current);(0,A.useSyncExternalStore)(i.current.subscribeToDraftChanges,i.current.getDraft);let S=(0,A.useMemo)(()=>{if(!f||!u[c])return null;let e=Pm(c,f,u);return u[c][e]?u[c][e].find(e=>String(e.itemId)===String(f)):null},[f,u,c]),C=(0,A.useCallback)(()=>{if((null==S?void 0:S.itemType)!=="query-data"||!S.treeManager)return;let e=S.treeManager.getAll(),{id:t}=(0,M.N)(Object.keys(e));if(!t||t===S.treeManager.getActiveAnalysisId())return;let r=e[t].rootAnalysisId;S.treeManager.setActiveAnalysisId(t),S.treeManager.setActiveRootAnalysisId(r)},[S]),E=(0,A.useCallback)(e=>{p(null==e?void 0:e.itemId)},[p]),N=(0,A.useCallback)((e,t)=>{let r=(0,M.g)();return -1!==l.indexOf(t)&&S?(null==S?void 0:S.itemType)==="query-data"?v({question:e,projectName:t,analysisId:r,rootAnalysisId:S.itemId,treeManager:S.treeManager}):void 0:hO({question:e,projectName:t,analysisId:r,selectedItem:S,createNewFastAnalysis:v,setOracleHistory:d,updateUrlWithItemId:a,setSelectedItemId:p,setSelectedProjectName:h,messageManager:s.current})},[l,S,v,a,d,p,h,s]);(0,A.useEffect)(()=>{let e=()=>{a(null),p(null)};return window.addEventListener("oracle:new-report",e),()=>window.removeEventListener("oracle:new-report",e)},[a,p]);let _=(0,A.useMemo)(()=>T.j.jsx(hk,{selectedProjectName:c,projectNames:l,uploadNewProjectOption:n,hasUploadedFiles:!1,onProjectChange:m}),[c,l,n,!1,m]),j=(0,A.useMemo)(()=>T.j.jsx(hw,{uploadNewProjectOption:n,selectedItem:S,projectName:c,onNewProjectCreated:g,createNewFastAnalysis:N,onReportGenerated:w,setSelectedItemId:p},"search"),[n,S,c,g,N,w,p]);return b?T.j.jsx(Pd,{error:b}):y?(console.log("OracleEmbed is in loading state"),T.j.jsx(Pf,{message:"Loading project data..."})):T.j.jsx(hp.Provider,{value:{token:t,apiEndpoint:e,searchBarManager:i.current},children:T.j.jsxs(T.a.Provider,{value:s.current,children:[T.j.jsx(T.b,{rootClassNames:"absolute left-0 right-0"}),T.j.jsxs("div",{className:"flex flex-row min-w-full min-h-full max-h-full h-full text-gray-600 bg-white dark:bg-gray-900",children:[T.j.jsx(hh,{oracleHistory:u,selectedProjectName:c,uploadNewProjectOption:n,selectedItemId:f,updateUrlWithItemId:a,projectSelector:_,setSelectedItem:E}),T.j.jsx(Pu,{apiEndpoint:e,token:t,selectedItemId:f,selectedItem:S,selectedProjectName:c,uploadNewProjectOption:n,searchBar:j,onReportDelete:x,onReportParsed:k,onThinkingStreamClosed:O,setMostVisibleAnalysisAsActive:C,onProjectCreated:g})]})]})})});function PA(e){this.content=e}PA.prototype={constructor:PA,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return -1},get:function(e){var t=this.find(e);return -1==t?void 0:this.content[t+1]},update:function(e,t,r){var n=r&&r!=e?this.remove(r):this,i=n.find(e),s=n.content.slice();return -1==i?s.push(r||e,t):(s[i+1]=t,r&&(s[i]=r)),new PA(s)},remove:function(e){var t=this.find(e);if(-1==t)return this;var r=this.content.slice();return r.splice(t,2),new PA(r)},addToStart:function(e,t){return new PA([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var r=this.remove(e).content.slice();return r.push(e,t),new PA(r)},addBefore:function(e,t,r){var n=this.remove(t),i=n.content.slice(),s=n.find(e);return i.splice(-1==s?i.length:s,0,t,r),new PA(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=PA.from(e)).size?new PA(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=PA.from(e)).size?new PA(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=PA.from(e);for(var r=0;r<e.content.length;r+=2)t=t.remove(e.content[r]);return t},toObject:function(){var e={};return this.forEach(function(t,r){e[t]=r}),e},get size(){return this.content.length>>1}},PA.from=function(e){if(e instanceof PA)return e;var t=[];if(e)for(var r in e)t.push(r,e[r]);return new PA(t)};class PM{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let t=0;t<e.length;t++)this.size+=e[t].nodeSize}nodesBetween(e,t,r,n=0,i){for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;if(l>e&&!1!==r(a,n+o,i||null,s)&&a.content.size){let i=o+1;a.nodesBetween(Math.max(0,e-i),Math.min(a.content.size,t-i),r,n+i)}o=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,n){let i="",s=!0;return this.nodesBetween(e,t,(o,a)=>{let l=o.isText?o.text.slice(Math.max(e,a)-a,t-a):o.isLeaf?n?"function"==typeof n?n(o):n:o.type.spec.leafText?o.type.spec.leafText(o):"":"";o.isBlock&&(o.isLeaf&&l||o.isTextblock)&&r&&(s?s=!1:i+=r),i+=l},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,n=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(r)&&(n[n.length-1]=t.withText(t.text+r.text),i=1);i<e.content.length;i++)n.push(e.content[i]);return new PM(n,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let r=[],n=0;if(t>e)for(let i=0,s=0;s<t;i++){let o=this.content[i],a=s+o.nodeSize;a>e&&((s<e||a>t)&&(o=o.isText?o.cut(Math.max(0,e-s),Math.min(o.text.length,t-s)):o.cut(Math.max(0,e-s-1),Math.min(o.content.size,t-s-1))),r.push(o),n+=o.nodeSize),s=a}return new PM(r,n)}cutByIndex(e,t){return e==t?PM.empty:0==e&&t==this.content.length?this:new PM(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let n=this.content.slice(),i=this.size+t.nodeSize-r.nodeSize;return n[e]=t,new PM(n,i)}addToStart(e){return new PM([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new PM(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let n=this.content[t];e(n,r,t),r+=n.nodeSize}}findDiffStart(e,t=0){return function e(t,r,n){for(let i=0;;i++){if(i==t.childCount||i==r.childCount)return t.childCount==r.childCount?null:n;let s=t.child(i),o=r.child(i);if(s==o){n+=s.nodeSize;continue}if(!s.sameMarkup(o))return n;if(s.isText&&s.text!=o.text){for(let e=0;s.text[e]==o.text[e];e++)n++;return n}if(s.content.size||o.content.size){let t=e(s.content,o.content,n+1);if(null!=t)return t}n+=s.nodeSize}}(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return function e(t,r,n,i){for(let s=t.childCount,o=r.childCount;;){if(0==s||0==o)return s==o?null:{a:n,b:i};let a=t.child(--s),l=r.child(--o),c=a.nodeSize;if(a==l){n-=c,i-=c;continue}if(!a.sameMarkup(l))return{a:n,b:i};if(a.isText&&a.text!=l.text){let e=0,t=Math.min(a.text.length,l.text.length);for(;e<t&&a.text[a.text.length-e-1]==l.text[l.text.length-e-1];)e++,n--,i--;return{a:n,b:i}}if(a.content.size||l.content.size){let t=e(a.content,l.content,n-1,i-1);if(t)return t}n-=c,i-=c}}(this,e,t,r)}findIndex(e,t=-1){if(0==e)return PN(0,e);if(e==this.size)return PN(this.content.length,e);if(e>this.size||e<0)throw RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,n=0;;r++){let i=n+this.child(r).nodeSize;if(i>=e)return i==e||t>0?PN(r+1,i):PN(r,n);n=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return PM.empty;if(!Array.isArray(t))throw RangeError("Invalid input for Fragment.fromJSON");return new PM(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return PM.empty;let t,r=0;for(let n=0;n<e.length;n++){let i=e[n];r+=i.nodeSize,n&&i.isText&&e[n-1].sameMarkup(i)?(t||(t=e.slice(0,n)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new PM(t||e,r)}static from(e){if(!e)return PM.empty;if(e instanceof PM)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new PM([e],e.nodeSize);throw RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}PM.empty=new PM([],0);let PE={index:0,offset:0};function PN(e,t){return PE.index=e,PE.offset=t,PE}function P_(e,t){if(e===t)return!0;if(!(e&&"object"==typeof e)||!(t&&"object"==typeof t))return!1;let r=Array.isArray(e);if(Array.isArray(t)!=r)return!1;if(r){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!P_(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!P_(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let Pj=class e{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let n=0;n<e.length;n++){let i=e[n];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,n));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,n)),t.push(this),r=!0),t&&t.push(i)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&P_(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw RangeError(`There is no mark type ${t.type} in this schema`);let n=r.create(t.attrs);return r.checkAttrs(n.attrs),n}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&0==t.length)return e.none;if(t instanceof e)return[t];let r=t.slice();return r.sort((e,t)=>e.type.rank-t.type.rank),r}};Pj.none=[];class PD extends Error{}class PR{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=function e(t,r,n,i){let{index:s,offset:o}=t.findIndex(r),a=t.maybeChild(s);if(o==r||a.isText)return t.cut(0,r).append(n).append(t.cut(r));let l=e(a.content,r-o-1,n);return l&&t.replaceChild(s,a.copy(l))}(this.content,e+this.openStart,t);return r&&new PR(r,this.openStart,this.openEnd)}removeBetween(e,t){return new PR(function e(t,r,n){let{index:i,offset:s}=t.findIndex(r),o=t.maybeChild(i),{index:a,offset:l}=t.findIndex(n);if(s==r||o.isText){if(l!=n&&!t.child(a).isText)throw RangeError("Removing non-flat range");return t.cut(0,r).append(t.cut(n))}if(i!=a)throw RangeError("Removing non-flat range");return t.replaceChild(i,o.copy(e(o.content,r-s-1,n-s-1)))}(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return PR.empty;let r=t.openStart||0,n=t.openEnd||0;if("number"!=typeof r||"number"!=typeof n)throw RangeError("Invalid input for Slice.fromJSON");return new PR(PM.fromJSON(e,t.content),r,n)}static maxOpen(e,t=!0){let r=0,n=0;for(let n=e.firstChild;n&&!n.isLeaf&&(t||!n.type.spec.isolating);n=n.firstChild)r++;for(let r=e.lastChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.lastChild)n++;return new PR(e,r,n)}}function PP(e,t){if(!t.type.compatibleContent(e.type))throw new PD("Cannot join "+t.type.name+" onto "+e.type.name)}function PI(e,t,r){let n=e.node(r);return PP(n,t.node(r)),n}function Pz(e,t){let r=t.length-1;r>=0&&e.isText&&e.sameMarkup(t[r])?t[r]=e.withText(t[r].text+e.text):t.push(e)}function PL(e,t,r,n){let i=(t||e).node(r),s=0,o=t?t.index(r):i.childCount;e&&(s=e.index(r),e.depth>r?s++:e.textOffset&&(Pz(e.nodeAfter,n),s++));for(let e=s;e<o;e++)Pz(i.child(e),n);t&&t.depth==r&&t.textOffset&&Pz(t.nodeBefore,n)}function Pq(e,t){return e.type.checkContent(t),e.copy(t)}function P$(e,t,r){let n=[];return PL(null,e,r,n),e.depth>r&&Pz(Pq(PI(e,t,r+1),P$(e,t,r+1)),n),PL(t,null,r,n),new PM(n)}PR.empty=new PR(PM.empty,0,0);class PB{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],n=e.child(t);return r?e.child(t).cut(r):n}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[3*t],n=0==t?0:this.path[3*t-1]+1;for(let t=0;t<e;t++)n+=r.child(t).nodeSize;return n}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return Pj.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),n=e.maybeChild(t);if(!r){let e=r;r=n,n=e}let i=r.marks;for(var s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||n&&i[s].isInSet(n.marks)||(i=i[s--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,n=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)!1!==r[i].type.spec.inclusive||n&&r[i].isInSet(n.marks)||(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new PH(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw RangeError("Position "+t+" out of range");let r=[],n=0,i=t;for(let t=e;;){let{index:e,offset:s}=t.content.findIndex(i),o=i-s;if(r.push(t,e,n+s),!o||(t=t.child(e)).isText)break;i=o-1,n+=s+1}return new PB(t,r,i)}static resolveCached(e,t){let r=PV.get(e);if(r)for(let e=0;e<r.elts.length;e++){let n=r.elts[e];if(n.pos==t)return n}else PV.set(e,r=new PF);let n=r.elts[r.i]=PB.resolve(e,t);return r.i=(r.i+1)%PQ,n}}class PF{constructor(){this.elts=[],this.i=0}}let PQ=12,PV=new WeakMap;class PH{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}let PW=Object.create(null),PU=class e{constructor(e,t,r,n=Pj.none){this.type=e,this.attrs=t,this.marks=n,this.content=r||PM.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,n=0){this.content.nodesBetween(e,t,r,n,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,n){return this.content.textBetween(e,t,r,n)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&P_(this.attrs,t||e.defaultAttrs||PW)&&Pj.sameSet(this.marks,r||Pj.none)}copy(t=null){return t==this.content?this:new e(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new e(this.type,this.attrs,this.content,t)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return PR.empty;let n=this.resolve(e),i=this.resolve(t),s=r?0:n.sharedDepth(t),o=n.start(s);return new PR(n.node(s).content.cut(n.pos-o,i.pos-o),n.depth-s,i.depth-s)}replace(e,t,r){return function(e,t,r){if(r.openStart>e.depth)throw new PD("Inserted content deeper than insertion position");if(e.depth-r.openStart!=t.depth-r.openEnd)throw new PD("Inconsistent open depths");return function e(t,r,n,i){let s=t.index(i),o=t.node(i);if(s==r.index(i)&&i<t.depth-n.openStart){let a=e(t,r,n,i+1);return o.copy(o.content.replaceChild(s,a))}if(!n.content.size)return Pq(o,P$(t,r,i));if(n.openStart||n.openEnd||t.depth!=i||r.depth!=i){let{start:e,end:s}=function(e,t){let r=t.depth-e.openStart,n=t.node(r).copy(e.content);for(let e=r-1;e>=0;e--)n=t.node(e).copy(PM.from(n));return{start:n.resolveNoCache(e.openStart+r),end:n.resolveNoCache(n.content.size-e.openEnd-r)}}(n,t);return Pq(o,function e(t,r,n,i,s){let o=t.depth>s&&PI(t,r,s+1),a=i.depth>s&&PI(n,i,s+1),l=[];return PL(null,t,s,l),o&&a&&r.index(s)==n.index(s)?(PP(o,a),Pz(Pq(o,e(t,r,n,i,s+1)),l)):(o&&Pz(Pq(o,P$(t,r,s+1)),l),PL(r,n,s,l),a&&Pz(Pq(a,P$(n,i,s+1)),l)),PL(i,null,s,l),new PM(l)}(t,e,s,r,i))}{let e=t.parent,i=e.content;return Pq(e,i.cut(0,t.parentOffset).append(n.content).append(i.cut(r.parentOffset)))}}(e,t,r,0)}(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:n}=t.content.findIndex(e);if(!(t=t.maybeChild(r)))return null;if(n==e||t.isText)return t;e-=n+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let n=this.content.child(t-1);return{node:n,index:t-1,offset:r-n.nodeSize}}resolve(e){return PB.resolveCached(this,e)}resolveNoCache(e){return PB.resolve(this,e)}rangeHasMark(e,t,r){let n=!1;return t>e&&this.nodesBetween(e,t,e=>(r.isInSet(e.marks)&&(n=!0),!n)),n}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),PX(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=PM.empty,n=0,i=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,n,i),o=s&&s.matchFragment(this.content,t);if(!o||!o.validEnd)return!1;for(let e=n;e<i;e++)if(!this.type.allowsMarks(r.child(e).marks))return!1;return!0}canReplaceWith(e,t,r,n){if(n&&!this.type.allowsMarks(n))return!1;let i=this.contentMatchAt(e).matchType(r),s=i&&i.matchFragment(this.content,t);return!!s&&s.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Pj.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Pj.sameSet(e,this.marks))throw RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(e=>e.toJSON())),e}static fromJSON(e,t){let r;if(!t)throw RangeError("Invalid input for Node.fromJSON");if(t.marks){if(!Array.isArray(t.marks))throw RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw RangeError("Invalid text node in JSON");return e.text(t.text,r)}let n=PM.fromJSON(e,t.content),i=e.nodeType(t.type).create(t.attrs,n,r);return i.type.checkAttrs(i.attrs),i}};PU.prototype.text=void 0;let PG=class e extends PU{constructor(e,t,r,n){if(super(e,t,null,n),!r)throw RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):PX(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)}cut(e=0,t=this.text.length){return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function PX(e,t){for(let r=e.length-1;r>=0;r--)t=e[r].type.name+"("+t+")";return t}class PY{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){var r;let n,i=new PZ(e,t);if(null==i.next)return PY.empty;let s=function e(t){let r=[];do r.push(function(t){let r=[];do r.push(function(t){let r=function(t){if(t.eat("(")){let r=e(t);return t.eat(")")||t.err("Missing closing paren"),r}if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=(function(e,t){let r=e.nodeTypes,n=r[t];if(n)return[n];let i=[];for(let e in r){let n=r[e];n.isInGroup(t)&&i.push(n)}return 0==i.length&&e.err("No node type or group '"+t+"' found"),i})(t,t.next).map(e=>(null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}));return t.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}}(t);for(;;)if(t.eat("+"))r={type:"plus",expr:r};else if(t.eat("*"))r={type:"star",expr:r};else if(t.eat("?"))r={type:"opt",expr:r};else if(t.eat("{"))r=function(e,t){let r=PJ(e),n=r;return e.eat(",")&&(n="}"!=e.next?PJ(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:t}}(t,r);else break;return r}(t));while(t.next&&")"!=t.next&&"|"!=t.next);return 1==r.length?r[0]:{type:"seq",exprs:r}}(t));while(t.eat("|"));return 1==r.length?r[0]:{type:"choice",exprs:r}}(i);i.next&&i.err("Unexpected trailing text");let o=(r=function(e){let t=[[]];return i(function e(t,s){if("choice"==t.type)return t.exprs.reduce((t,r)=>t.concat(e(r,s)),[]);if("seq"==t.type)for(let n=0;;n++){let o=e(t.exprs[n],s);if(n==t.exprs.length-1)return o;i(o,s=r())}else if("star"==t.type){let o=r();return n(s,o),i(e(t.expr,o),o),[n(o)]}else if("plus"==t.type){let o=r();return i(e(t.expr,s),o),i(e(t.expr,o),o),[n(o)]}else{if("opt"==t.type)return[n(s)].concat(e(t.expr,s));if("range"==t.type){let o=s;for(let n=0;n<t.min;n++){let n=r();i(e(t.expr,o),n),o=n}if(-1==t.max)i(e(t.expr,o),o);else for(let s=t.min;s<t.max;s++){let s=r();n(o,s),i(e(t.expr,o),s),o=s}return[n(o)]}if("name"==t.type)return[n(s,void 0,t.value)];throw Error("Unknown expr type")}}(e,0),r()),t;function r(){return t.push([])-1}function n(e,r,n){let i={term:n,to:r};return t[e].push(i),i}function i(e,t){e.forEach(e=>e.to=t)}}(s),n=Object.create(null),function e(t){let i=[];t.forEach(e=>{r[e].forEach(({term:e,to:t})=>{let n;if(e){for(let t=0;t<i.length;t++)i[t][0]==e&&(n=i[t][1]);P0(r,t).forEach(t=>{n||i.push([e,n=[]]),-1==n.indexOf(t)&&n.push(t)})}})});let s=n[t.join(",")]=new PY(t.indexOf(r.length-1)>-1);for(let t=0;t<i.length;t++){let r=i[t][1].sort(PK);s.next.push({type:i[t][0],next:n[r.join(",")]||e(r)})}return s}(P0(r,0)));return function(e,t){for(let r=0,n=[e];r<n.length;r++){let e=n[r],i=!e.validEnd,s=[];for(let t=0;t<e.next.length;t++){let{type:r,next:o}=e.next[t];s.push(r.name),i&&!(r.isText||r.hasRequiredAttrs())&&(i=!1),-1==n.indexOf(o)&&n.push(o)}i&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,i),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let n=this;for(let i=t;n&&i<r;i++)n=n.matchType(e.child(i).type);return n}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let n=[this];return function i(s,o){let a=s.matchFragment(e,r);if(a&&(!t||a.validEnd))return PM.from(o.map(e=>e.createAndFill()));for(let e=0;e<s.next.length;e++){let{type:t,next:r}=s.next[e];if(!(t.isText||t.hasRequiredAttrs())&&-1==n.indexOf(r)){n.push(r);let e=i(r,o.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let n=r.shift(),i=n.match;if(i.matchType(e)){let e=[];for(let t=n;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<i.next.length;e++){let{type:s,next:o}=i.next[e];s.isLeaf||s.hasRequiredAttrs()||s.name in t||n.type&&!o.validEnd||(r.push({match:s.contentMatch,type:s,via:n}),t[s.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function t(r){e.push(r);for(let n=0;n<r.next.length;n++)-1==e.indexOf(r.next[n].next)&&t(r.next[n].next)}(this),e.map((t,r)=>{let n=r+(t.validEnd?"*":" ")+" ";for(let r=0;r<t.next.length;r++)n+=(r?", ":"")+t.next[r].type.name+"->"+e.indexOf(t.next[r].next);return n}).join(`
`)}}PY.empty=new PY(!0);class PZ{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw SyntaxError(e+" (in content expression '"+this.string+"')")}}function PJ(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function PK(e,t){return t-e}function P0(e,t){let r=[];return function t(n){let i=e[n];if(1==i.length&&!i[0].term)return t(i[0].to);r.push(n);for(let e=0;e<i.length;e++){let{term:n,to:s}=i[e];n||-1!=r.indexOf(s)||t(s)}}(t),r.sort(PK)}function P1(e){let t=Object.create(null);for(let r in e){let n=e[r];if(!n.hasDefault)return null;t[r]=n.default}return t}function P2(e,t){let r=Object.create(null);for(let n in e){let i=t&&t[n];if(void 0===i){let t=e[n];if(t.hasDefault)i=t.default;else throw RangeError("No value supplied for attribute "+n)}r[n]=i}return r}function P4(e,t,r,n){for(let n in t)if(!(n in e))throw RangeError(`Unsupported attribute ${n} for ${r} of type ${n}`);for(let r in e){let n=e[r];n.validate&&n.validate(t[r])}}function P5(e,t){let r=Object.create(null);if(t)for(let n in t)r[n]=new P6(e,n,t[n]);return r}let P3=class e{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=P5(e,r.attrs),this.defaultAttrs=P1(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==PY.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:P2(this.attrs,e)}create(e=null,t,r){if(this.isText)throw Error("NodeType.create can't construct text nodes");return new PU(this,this.computeAttrs(e),PM.from(t),Pj.setFrom(r))}createChecked(e=null,t,r){return t=PM.from(t),this.checkContent(t),new PU(this,this.computeAttrs(e),t,Pj.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),(t=PM.from(t)).size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let n=this.contentMatch.matchFragment(t),i=n&&n.fillBefore(PM.empty,!0);return i?new PU(this,e,t.append(i),Pj.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let t=0;t<e.childCount;t++)if(!this.allowsMarks(e.child(t).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){P4(this.attrs,e,"node",this.name)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){let t;if(null==this.markSet)return e;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:Pj.none:e}static compile(t,r){let n=Object.create(null);t.forEach((t,i)=>n[t]=new e(t,r,i));let i=r.spec.topNode||"doc";if(!n[i])throw RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw RangeError("Every schema needs a 'text' type");for(let e in n.text.attrs)throw RangeError("The text node type should not have attributes");return n}};class P6{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate="string"==typeof r.validate?function(e,t,r){let n=r.split("|");return r=>{let i=null===r?"null":typeof r;if(0>n.indexOf(i))throw RangeError(`Expected value of type ${n} for attribute ${t} on type ${e}, got ${i}`)}}(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class P7{constructor(e,t,r,n){this.name=e,this.rank=t,this.schema=r,this.spec=n,this.attrs=P5(e,n.attrs),this.excluded=null;let i=P1(this.attrs);this.instance=i?new Pj(this,i):null}create(e=null){return!e&&this.instance?this.instance:new Pj(this,P2(this.attrs,e))}static compile(e,t){let r=Object.create(null),n=0;return e.forEach((e,i)=>r[e]=new P7(e,n++,t,i)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){P4(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class P8{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let r in e)t[r]=e[r];t.nodes=PA.from(e.nodes),t.marks=PA.from(e.marks||{}),this.nodes=P3.compile(this.spec.nodes,this),this.marks=P7.compile(this.spec.marks,this);let r=Object.create(null);for(let e in this.nodes){if(e in this.marks)throw RangeError(e+" can not be both a node and a mark");let t=this.nodes[e],n=t.spec.content||"",i=t.spec.marks;if(t.contentMatch=r[n]||(r[n]=PY.parse(n,this.nodes)),t.inlineContent=t.contentMatch.inlineContent,t.spec.linebreakReplacement){if(this.linebreakReplacement)throw RangeError("Multiple linebreak nodes defined");if(!t.isInline||!t.isLeaf)throw RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=t}t.markSet="_"==i?null:i?P9(this,i.split(" ")):""!=i&&t.inlineContent?null:[]}for(let e in this.marks){let t=this.marks[e],r=t.spec.excludes;t.excluded=null==r?[t]:""==r?[]:P9(this,r.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,n){if("string"==typeof e)e=this.nodeType(e);else if(e instanceof P3){if(e.schema!=this)throw RangeError("Node type from different schema used ("+e.name+")")}else throw RangeError("Invalid node type: "+e);return e.createChecked(t,r,n)}text(e,t){let r=this.nodes.text;return new PG(r,r.defaultAttrs,e,Pj.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return PU.fromJSON(this,e)}markFromJSON(e){return Pj.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw RangeError("Unknown node type: "+e);return t}}function P9(e,t){let r=[];for(let n=0;n<t.length;n++){let i=t[n],s=e.marks[i],o=s;if(s)r.push(s);else for(let t in e.marks){let n=e.marks[t];("_"==i||n.spec.group&&n.spec.group.split(" ").indexOf(i)>-1)&&r.push(o=n)}if(!o)throw SyntaxError("Unknown mark type: '"+t[n]+"'")}return r}let Ie=class e{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(e=>{if(null!=e.tag)this.tags.push(e);else if(null!=e.style){let t=/[^=]*/.exec(e.style)[0];0>r.indexOf(t)&&r.push(t),this.styles.push(e)}}),this.normalizeLists=!this.tags.some(t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let r=e.nodes[t.node];return r.contentMatch.matchType(r)})}parse(e,t={}){let r=new Io(this,t,!1);return r.addAll(e,Pj.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new Io(this,t,!0);return r.addAll(e,Pj.none,t.from,t.to),PR.maxOpen(r.finish())}matchTag(e,t,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){var n,i;let r=this.tags[s];if(n=e,i=r.tag,(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,i)&&(void 0===r.namespace||e.namespaceURI==r.namespace)&&(!r.context||t.matchesContext(r.context))){if(r.getAttrs){let t=r.getAttrs(e);if(!1===t)continue;r.attrs=t||void 0}return r}}}matchStyle(e,t,r,n){for(let i=n?this.styles.indexOf(n)+1:0;i<this.styles.length;i++){let n=this.styles[i],s=n.style;if(!(0!=s.indexOf(e)||n.context&&!r.matchesContext(n.context)||s.length>e.length&&(61!=s.charCodeAt(e.length)||s.slice(e.length+1)!=t))){if(n.getAttrs){let e=n.getAttrs(t);if(!1===e)continue;n.attrs=e||void 0}return n}}}static schemaRules(e){let t=[];function r(e){let r=null==e.priority?50:e.priority,n=0;for(;n<t.length;n++){let e=t[n];if((null==e.priority?50:e.priority)<r)break}t.splice(n,0,e)}for(let t in e.marks){let n=e.marks[t].spec.parseDOM;n&&n.forEach(e=>{r(e=Ia(e)),e.mark||e.ignore||e.clearMark||(e.mark=t)})}for(let t in e.nodes){let n=e.nodes[t].spec.parseDOM;n&&n.forEach(e=>{r(e=Ia(e)),e.node||e.ignore||e.mark||(e.node=t)})}return t}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new e(t,e.schemaRules(t)))}},It={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ir={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},In={ol:!0,ul:!0};function Ii(e,t,r){return null!=t?+!!t|2*("full"===t):e&&"pre"==e.whitespace?3:-5&r}class Is{constructor(e,t,r,n,i,s){this.type=e,this.attrs=t,this.marks=r,this.solid=n,this.options=s,this.content=[],this.activeMarks=Pj.none,this.match=i||(4&s?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(PM.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let t=this.type.contentMatch,r;return(r=t.findWrapping(e.type))?(this.match=t,r):null}}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e=this.content[this.content.length-1],t;e&&e.isText&&(t=/[ \t\r\n\u000c]+$/.exec(e.text))&&(e.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=e.withText(e.text.slice(0,e.text.length-t[0].length)))}let t=PM.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(PM.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!It.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Io{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let n=t.topNode,i,s=Ii(null,t.preserveWhitespace,0)|4*!!r;i=n?new Is(n.type,n.attrs,Pj.none,!0,t.topMatch||n.type.contentMatch,s):r?new Is(null,null,Pj.none,!0,null,s):new Is(e.schema.topNodeType,null,Pj.none,!0,null,s),this.nodes=[i],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,n=this.top,i=2&n.options?"full":this.localPreserveWS||(1&n.options)>0;if("full"===i||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)r="full"!==i?r.replace(/\r?\n|\r/g," "):r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let t=n.content[n.content.length-1],i=e.previousSibling;(!t||i&&"BR"==i.nodeName||t.isText&&/[ \t\r\n\u000c]$/.test(t.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let n=this.localPreserveWS,i=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),o;In.hasOwnProperty(s)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,r=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&In.hasOwnProperty(e)&&r?(r.appendChild(t),t=r):"li"==e?r=t:e&&(r=null)}}(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(o=this.parser.matchTag(e,this,r));e:if(a?a.ignore:Ir.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,t);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let r,n=this.needsBlock;if(It.hasOwnProperty(s))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),r=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let o=a&&a.skip?t:this.readStyles(e,t);o&&this.addAll(e,o),r&&this.sync(i),this.needsBlock=n}else{let r=this.readStyles(e,t);r&&this.addElementByRule(e,a,r,!1===a.consuming?o:void 0)}this.localPreserveWS=n}leafFallback(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let e=0;e<this.parser.matchedStyles.length;e++){let n=this.parser.matchedStyles[e],i=r.getPropertyValue(n);if(i)for(let e;;){let r=this.parser.matchStyle(n,i,this,e);if(!r)break;if(r.ignore)return null;if(t=r.clearMark?t.filter(e=>!r.clearMark(e)):t.concat(this.parser.schema.marks[r.mark].create(r.attrs)),!1===r.consuming)e=r;else break}}return t}addElementByRule(e,t,r,n){let i,s;if(t.node){if((s=this.parser.schema.nodes[t.node]).isLeaf)this.insertNode(s.create(t.attrs),r)||this.leafFallback(e,r);else{let e=this.enter(s,t.attrs||null,r,t.preserveWhitespace);e&&(i=!0,r=e)}}else{let e=this.parser.schema.marks[t.mark];r=r.concat(e.create(t.attrs))}let o=this.top;if(s&&s.isLeaf)this.findInside(e);else if(n)this.addElement(e,r,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(e=>this.insertNode(e,r));else{let n=e;"string"==typeof t.contentElement?n=e.querySelector(t.contentElement):"function"==typeof t.contentElement?n=t.contentElement(e):t.contentElement&&(n=t.contentElement),this.findAround(e,n,!0),this.addAll(n,r),this.findAround(e,n,!1)}i&&this.sync(o)&&this.open--}addAll(e,t,r,n){let i=r||0;for(let s=r?e.childNodes[r]:e.firstChild,o=null==n?null:e.childNodes[n];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s,t);this.findAtPoint(e,i)}findPlace(e,t){let r,n;for(let t=this.open;t>=0;t--){let i=this.nodes[t],s=i.findWrapping(e);if(s&&(!r||r.length>s.length)&&(r=s,n=i,!s.length)||i.solid)break}if(!r)return null;this.sync(n);for(let e=0;e<r.length;e++)t=this.enterInner(r[e],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&(t=this.enterInner(e,null,t))}let r=this.findPlace(e,t);if(r){this.closeExtra();let t=this.top;t.match&&(t.match=t.match.matchType(e.type));let n=Pj.none;for(let i of r.concat(e.marks))(t.type?t.type.allowsMarkType(i.type):Il(i.type,e.type))&&(n=i.addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,r,n){let i=this.findPlace(e.create(t),r);return i&&(i=this.enterInner(e,t,r,!0,n)),i}enterInner(e,t,r,n=!1,i){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let o=Ii(e,i,s.options);4&s.options&&0==s.content.length&&(o|=4);let a=Pj.none;return r=r.filter(t=>(s.type?!s.type.allowsMarkType(t.type):!Il(t.type,e))||(a=t.addToSet(a),!1)),this.nodes.push(new Is(e,t,a,n,null,o)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=1)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let t=r.length-1;t>=0;t--)e+=r[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let n=0;n<this.find.length;n++)null==this.find[n].pos&&1==e.nodeType&&e.contains(this.find[n].node)&&t.compareDocumentPosition(this.find[n].node)&(r?2:4)&&(this.find[n].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,n=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+ +!n,s=(e,o)=>{for(;e>=0;e--){let a=t[e];if(""==a){if(e==t.length-1||0==e)continue;for(;o>=i;o--)if(s(e-1,o))return!0;return!1}{let e=o>0||0==o&&n?this.nodes[o].type:r&&o>=i?r.node(o-i).type:null;if(!e||e.name!=a&&!e.isInGroup(a))return!1;o--}}return!0};return s(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let e in this.parser.schema.nodes){let t=this.parser.schema.nodes[e];if(t.isTextblock&&t.defaultAttrs)return t}}}function Ia(e){let t={};for(let r in e)t[r]=e[r];return t}function Il(e,t){let r=t.schema.nodes;for(let n in r){let i=r[n];if(!i.allowsMarkType(e))continue;let s=[],o=e=>{s.push(e);for(let r=0;r<e.edgeCount;r++){let{type:n,next:i}=e.edge(r);if(n==t||0>s.indexOf(i)&&o(i))return!0}};if(o(i.contentMatch))return!0}}class Ic{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=Iu(t).createDocumentFragment());let n=r,i=[];return e.forEach(e=>{if(i.length||e.marks.length){let r=0,s=0;for(;r<i.length&&s<e.marks.length;){let t=e.marks[s];if(!this.marks[t.type.name]){s++;continue}if(!t.eq(i[r][0])||!1===t.type.spec.spanning)break;r++,s++}for(;r<i.length;)n=i.pop()[1];for(;s<e.marks.length;){let r=e.marks[s++],o=this.serializeMark(r,e.isInline,t);o&&(i.push([r,n]),n.appendChild(o.dom),n=o.contentDOM||o.dom)}}n.appendChild(this.serializeNodeInner(e,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:n}=If(Iu(t),this.nodes[e.type.name](e),null,e.attrs);if(n){if(e.isLeaf)throw RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,n)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let n=e.marks.length-1;n>=0;n--){let i=this.serializeMark(e.marks[n],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,t,r={}){let n=this.marks[e.type.name];return n&&If(Iu(r),n(e,t),null,e.attrs)}static renderSpec(e,t,r=null,n){return If(e,t,r,n)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Ic(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Ih(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return Ih(e.marks)}}function Ih(e){let t={};for(let r in e){let n=e[r].spec.toDOM;n&&(t[r]=n)}return t}function Iu(e){return e.document||window.document}let Id=new WeakMap;function If(e,t,r,n){let i,s;if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let o=t[0],a;if("string"!=typeof o)throw RangeError("Invalid array passed to renderSpec");if(n&&(void 0===(i=Id.get(n))&&Id.set(n,(s=null,function e(t){if(t&&"object"==typeof t){if(Array.isArray(t)){if("string"==typeof t[0])s||(s=[]),s.push(t);else for(let r=0;r<t.length;r++)e(t[r])}else for(let r in t)e(t[r])}}(n),i=s)),a=i)&&a.indexOf(t)>-1)throw RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=o.indexOf(" ");l>0&&(r=o.slice(0,l),o=o.slice(l+1));let c,h=r?e.createElementNS(r,o):e.createElement(o),u=t[1],d=1;if(u&&"object"==typeof u&&null==u.nodeType&&!Array.isArray(u)){for(let e in d=2,u)if(null!=u[e]){let t=e.indexOf(" ");t>0?h.setAttributeNS(e.slice(0,t),e.slice(t+1),u[e]):h.setAttribute(e,u[e])}}for(let i=d;i<t.length;i++){let s=t[i];if(0===s){if(i<t.length-1||i>d)throw RangeError("Content hole must be the only child of its parent node");return{dom:h,contentDOM:h}}{let{dom:t,contentDOM:i}=If(e,s,r,n);if(h.appendChild(t),i){if(c)throw RangeError("Multiple content holes");c=i}}}return{dom:h,contentDOM:c}}class Ip{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class Im{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Im.empty)return Im.empty}recover(e){let t=0,r=65535&e;if(!this.inverted)for(let e=0;e<r;e++)t+=this.ranges[3*e+2]-this.ranges[3*e+1];return this.ranges[3*r]+t+(e-(65535&e))/65536}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let n=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let a=this.ranges[o]-(this.inverted?n:0);if(a>e)break;let l=this.ranges[o+i],c=this.ranges[o+s],h=a+l;if(e<=h){let i=l?e==a?-1:e==h?1:t:t,s=a+n+(i<0?0:c);if(r)return s;let u=e==(t<0?a:h)?null:o/3+(e-a)*65536,d=e==a?2:e==h?1:4;return(t<0?e!=a:e!=h)&&(d|=8),new Ip(s,d,u)}n+=c-l}return r?e+n:new Ip(e+n,0,null)}touches(e,t){let r=0,n=65535&t,i=this.inverted?2:1,s=this.inverted?1:2;for(let t=0;t<this.ranges.length;t+=3){let o=this.ranges[t]-(this.inverted?r:0);if(o>e)break;let a=this.ranges[t+i];if(e<=o+a&&t==3*n)return!0;r+=this.ranges[t+s]-a}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let n=0,i=0;n<this.ranges.length;n+=3){let s=this.ranges[n],o=s-(this.inverted?i:0),a=s+(this.inverted?0:i),l=this.ranges[n+t],c=this.ranges[n+r];e(o,o+l,a,a+c),i+=c-l}}invert(){return new Im(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?Im.empty:new Im(e<0?[0,-e,0]:[0,0,e])}}Im.empty=new Im([]);class Ig{constructor(e=[],t,r=0,n=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=n}slice(e=0,t=this.maps.length){return new Ig(this.maps,this.mirror,e,t)}copy(){return new Ig(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let n=e.getMirror(t);this.appendMap(e.maps[t],null!=n&&n<t?r+n:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let n=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=n&&n>t?r-n-1:void 0)}}invert(){let e=new Ig;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let n=0;for(let r=this.from;r<this.to;r++){let i=this.maps[r].mapResult(e,t);if(null!=i.recover){let t=this.getMirror(r);if(null!=t&&t>r&&t<this.to){r=t,e=this.maps[t].recover(i.recover);continue}}n|=i.delInfo,e=i.pos}return r?e:new Ip(e,n,null)}}let Iy=Object.create(null);class Ib{getMap(){return Im.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw RangeError("Invalid input for Step.fromJSON");let r=Iy[t.stepType];if(!r)throw RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Iy)throw RangeError("Duplicate use of step JSON ID "+e);return Iy[e]=t,t.prototype.jsonID=e,t}}class Iv{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Iv(e,null)}static fail(e){return new Iv(null,e)}static fromReplace(e,t,r,n){try{return Iv.ok(e.replace(t,r,n))}catch(e){if(e instanceof PD)return Iv.fail(e.message);throw e}}}function Ix(e,t,r){let n=[];for(let i=0;i<e.childCount;i++){let s=e.child(i);s.content.size&&(s=s.copy(Ix(s.content,t,s))),s.isInline&&(s=t(s,r,i)),n.push(s)}return PM.fromArray(n)}class Iw extends Ib{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),n=r.node(r.sharedDepth(this.to)),i=new PR(Ix(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,n),t.openStart,t.openEnd);return Iv.fromReplace(e,this.from,this.to,i)}invert(){return new Ik(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Iw(t.pos,r.pos,this.mark)}merge(e){return e instanceof Iw&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Iw(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for AddMarkStep.fromJSON");return new Iw(t.from,t.to,e.markFromJSON(t.mark))}}Ib.jsonID("addMark",Iw);class Ik extends Ib{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new PR(Ix(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return Iv.fromReplace(e,this.from,this.to,r)}invert(){return new Iw(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Ik(t.pos,r.pos,this.mark)}merge(e){return e instanceof Ik&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ik(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ik(t.from,t.to,e.markFromJSON(t.mark))}}Ib.jsonID("removeMark",Ik);class IO extends Ib{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Iv.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Iv.fromReplace(e,this.pos,this.pos+1,new PR(PM.from(r),0,+!t.isLeaf))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let r=0;r<t.marks.length;r++)if(!t.marks[r].isInSet(e))return new IO(this.pos,t.marks[r]);return new IO(this.pos,this.mark)}}return new IS(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new IO(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new IO(t.pos,e.markFromJSON(t.mark))}}Ib.jsonID("addNodeMark",IO);class IS extends Ib{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Iv.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Iv.fromReplace(e,this.pos,this.pos+1,new PR(PM.from(r),0,+!t.isLeaf))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new IO(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new IS(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new IS(t.pos,e.markFromJSON(t.mark))}}Ib.jsonID("removeNodeMark",IS);class IC extends Ib{constructor(e,t,r,n=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=n}apply(e){return this.structure&&IA(e,this.from,this.to)?Iv.fail("Structure replace would overwrite content"):Iv.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Im([this.from,this.to-this.from,this.slice.size])}invert(e){return new IC(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new IC(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof IC)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let t=this.slice.size+e.slice.size==0?PR.empty:new PR(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new IC(e.from,this.to,t,this.structure)}}{let t=this.slice.size+e.slice.size==0?PR.empty:new PR(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new IC(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for ReplaceStep.fromJSON");return new IC(t.from,t.to,PR.fromJSON(e,t.slice),!!t.structure)}}Ib.jsonID("replace",IC);class IT extends Ib{constructor(e,t,r,n,i,s,o=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=n,this.slice=i,this.insert=s,this.structure=o}apply(e){if(this.structure&&(IA(e,this.from,this.gapFrom)||IA(e,this.gapTo,this.to)))return Iv.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Iv.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Iv.fromReplace(e,this.from,this.to,r):Iv.fail("Content does not fit in gap")}getMap(){return new Im([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new IT(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),n=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||n<t.pos||i>r.pos?null:new IT(t.pos,r.pos,n,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new IT(t.from,t.to,t.gapFrom,t.gapTo,PR.fromJSON(e,t.slice),t.insert,!!t.structure)}}function IA(e,t,r){let n=e.resolve(t),i=r-t,s=n.depth;for(;i>0&&s>0&&n.indexAfter(s)==n.node(s).childCount;)s--,i--;if(i>0){let e=n.node(s).maybeChild(n.indexAfter(s));for(;i>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,i--}}return!1}function IM(e,t,r,n=r.contentMatch,i=!0){let s=e.doc.nodeAt(t),o=[],a=t+1;for(let t=0;t<s.childCount;t++){let l=s.child(t),c=a+l.nodeSize,h=n.matchType(l.type);if(h){n=h;for(let t=0;t<l.marks.length;t++)r.allowsMarkType(l.marks[t].type)||e.step(new Ik(a,c,l.marks[t]));if(i&&l.isText&&"pre"!=r.whitespace){let e,t=/\r?\n|\r/g,n;for(;e=t.exec(l.text);)n||(n=new PR(PM.from(r.schema.text(" ",r.allowedMarks(l.marks))),0,0)),o.push(new IC(a+e.index,a+e.index+e[0].length,n))}}else o.push(new IC(a,c,PR.empty));a=c}if(!n.validEnd){let t=n.fillBefore(PM.empty,!0);e.replace(a,a,new PR(t,0,0))}for(let t=o.length-1;t>=0;t--)e.step(o[t])}function IE(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let n=e.$from.node(r),i=e.$from.index(r),s=e.$to.indexAfter(r);if(r<e.depth&&n.canReplace(i,s,t))return r;if(0==r||n.type.spec.isolating||!((0==i||n.canReplace(i,n.childCount))&&(s==n.childCount||n.canReplace(0,s))))break}return null}function IN(e,t,r=null,n=e){let i=function(e,t){let{parent:r,startIndex:n,endIndex:i}=e,s=r.contentMatchAt(n).findWrapping(t);if(!s)return null;let o=s.length?s[0]:t;return r.canReplaceWith(n,i,o)?s:null}(e,t),s=i&&function(e,t){let{parent:r,startIndex:n,endIndex:i}=e,s=r.child(n),o=t.contentMatch.findWrapping(s.type);if(!o)return null;let a=(o.length?o[o.length-1]:t).contentMatch;for(let e=n;a&&e<i;e++)a=a.matchType(r.child(e).type);return a&&a.validEnd?o:null}(n,t);return s?i.map(I_).concat({type:t,attrs:r}).concat(s.map(I_)):null}function I_(e){return{type:e,attrs:null}}function Ij(e,t,r,n){t.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let i=e.mapping.slice(n).map(r+1+s+o.index);e.replaceWith(i,i+1,t.type.schema.linebreakReplacement.create())}}})}function ID(e,t,r,n){t.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let i=e.mapping.slice(n).map(r+1+s);e.replaceWith(i,i+1,t.type.schema.text(`
`))}})}function IR(e,t,r=1,n){let i=e.resolve(t),s=i.depth-r,o=n&&n[n.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let e=i.depth-1,t=r-2;e>s;e--,t--){let r=i.node(e),s=i.index(e);if(r.type.spec.isolating)return!1;let o=r.content.cutByIndex(s,r.childCount),a=n&&n[t+1];a&&(o=o.replaceChild(0,a.type.create(a.attrs)));let l=n&&n[t]||r;if(!r.canReplace(s+1,r.childCount)||!l.type.validContent(o))return!1}let a=i.indexAfter(s),l=n&&n[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function IP(e,t){let r=e.resolve(t),n=r.index();return II(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function II(e,t){return!!(e&&t&&!e.isLeaf&&function(e,t){t.content.size||e.type.compatibleContent(t.type);let r=e.contentMatchAt(e.childCount),{linebreakReplacement:n}=e.type.schema;for(let i=0;i<t.childCount;i++){let s=t.child(i),o=s.type==n?e.type.schema.nodes.text:s.type;if(!(r=r.matchType(o))||!e.type.allowsMarks(s.marks))return!1}return r.validEnd}(e,t))}function Iz(e,t,r=-1){let n=e.resolve(t);for(let e=n.depth;;e--){let i,s,o=n.index(e);if(e==n.depth?(i=n.nodeBefore,s=n.nodeAfter):r>0?(i=n.node(e+1),o++,s=n.node(e).maybeChild(o)):(i=n.node(e).maybeChild(o-1),s=n.node(e+1)),i&&!i.isTextblock&&II(i,s)&&n.node(e).canReplace(o,o+1))return t;if(0==e)break;t=r<0?n.before(e):n.after(e)}}function IL(e,t,r){let n=e.resolve(t);if(!r.content.size)return t;let i=r.content;for(let e=0;e<r.openStart;e++)i=i.firstChild.content;for(let e=1;e<=(0==r.openStart&&r.size?2:1);e++)for(let t=n.depth;t>=0;t--){let r=t==n.depth?0:n.pos<=(n.start(t+1)+n.end(t+1))/2?-1:1,s=n.index(t)+ +(r>0),o=n.node(t),a=!1;if(1==e)a=o.canReplace(s,s,i);else{let e=o.contentMatchAt(s).findWrapping(i.firstChild.type);a=e&&o.canReplaceWith(s,s,e[0])}if(a)return 0==r?n.pos:r<0?n.before(t+1):n.after(t+1)}return null}function Iq(e,t,r=t,n=PR.empty){if(t==r&&!n.size)return null;let i=e.resolve(t),s=e.resolve(r);return I$(i,s,n)?new IC(t,r,n):new IB(i,s,n).fit()}function I$(e,t,r){return!r.openStart&&!r.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),r.content)}Ib.jsonID("replaceAround",IT);class IB{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=PM.empty;for(let t=0;t<=e.depth;t++){let r=e.node(t);this.frontier.push({type:r.type,match:r.contentMatchAt(e.indexAfter(t))})}for(let t=e.depth;t>0;t--)this.placed=PM.from(e.node(t).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,n=this.close(e<0?this.$to:r.doc.resolve(e));if(!n)return null;let i=this.placed,s=r.depth,o=n.depth;for(;s&&o&&1==i.childCount;)i=i.firstChild.content,s--,o--;let a=new PR(i,s,o);return e>-1?new IT(r.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||r.pos!=this.$to.pos?new IC(r.pos,n.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,n=this.unplaced.openEnd;r<e;r++){let i=t.firstChild;if(t.childCount>1&&(n=0),i.type.spec.isolating&&n<=r){e=r;break}t=i.content}for(let t=1;t<=2;t++)for(let r=1==t?e:this.unplaced.openStart;r>=0;r--){let e,n=null,i=(r?(n=IV(this.unplaced.content,r-1).firstChild).content:this.unplaced.content).firstChild;for(let e=this.depth;e>=0;e--){let{type:s,match:o}=this.frontier[e],a,l=null;if(1==t&&(i?o.matchType(i.type)||(l=o.fillBefore(PM.from(i),!1)):n&&s.compatibleContent(n.type)))return{sliceDepth:r,frontierDepth:e,parent:n,inject:l};if(2==t&&i&&(a=o.findWrapping(i.type)))return{sliceDepth:r,frontierDepth:e,parent:n,wrap:a};if(n&&o.matchType(n.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,n=IV(e,t);return!!n.childCount&&!n.firstChild.isLeaf&&(this.unplaced=new PR(e,t+1,Math.max(r,n.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,n=IV(e,t);if(n.childCount<=1&&t>0){let i=e.size-t<=t+n.size;this.unplaced=new PR(IF(e,t-1,1),t-1,i?t-1:r)}else this.unplaced=new PR(IF(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:n,wrap:i}){for(;this.depth>t;)this.closeFrontierNode();if(i)for(let e=0;e<i.length;e++)this.openFrontierNode(i[e]);let s=this.unplaced,o=r?r.content:s.content,a=s.openStart-e,l=0,c=[],{match:h,type:u}=this.frontier[t];if(n){for(let e=0;e<n.childCount;e++)c.push(n.child(e));h=h.matchFragment(n)}let d=o.size+e-(s.content.size-s.openEnd);for(;l<o.childCount;){let e=o.child(l),t=h.matchType(e.type);if(!t)break;(++l>1||0==a||e.content.size)&&(h=t,c.push(function e(t,r,n){if(r<=0)return t;let i=t.content;return r>1&&(i=i.replaceChild(0,e(i.firstChild,r-1,1==i.childCount?n-1:0))),r>0&&(i=t.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(t.type.contentMatch.matchFragment(i).fillBefore(PM.empty,!0)))),t.copy(i)}(e.mark(u.allowedMarks(e.marks)),1==l?a:0,l==o.childCount?d:-1)))}let f=l==o.childCount;f||(d=-1),this.placed=IQ(this.placed,t,PM.from(c)),this.frontier[t].match=h,f&&d<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let e=0,t=o;e<d;e++){let e=t.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),t=e.content}this.unplaced=f?0==e?PR.empty:new PR(IF(s.content,e-1,1),e-1,d<0?s.openEnd:e-1):new PR(IF(s.content,e,l),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return -1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!IH(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return -1;let{depth:r}=this.$to,n=this.$to.after(r);for(;r>1&&n==this.$to.end(--r);)++n;return n}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:n}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=IH(e,t,n,r,i);if(s){for(let r=t-1;r>=0;r--){let{match:t,type:n}=this.frontier[r],i=IH(e,r,n,t,!0);if(!i||i.childCount)continue e}return{depth:t,fit:s,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=IQ(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let t=e.node(r),n=t.type.contentMatch.fillBefore(t.content,!0,e.index(r));this.openFrontierNode(t.type,t.attrs,n)}return e}openFrontierNode(e,t=null,r){let n=this.frontier[this.depth];n.match=n.match.matchType(e),this.placed=IQ(this.placed,this.depth,PM.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(PM.empty,!0);e.childCount&&(this.placed=IQ(this.placed,this.frontier.length,e))}}function IF(e,t,r){return 0==t?e.cutByIndex(r,e.childCount):e.replaceChild(0,e.firstChild.copy(IF(e.firstChild.content,t-1,r)))}function IQ(e,t,r){return 0==t?e.append(r):e.replaceChild(e.childCount-1,e.lastChild.copy(IQ(e.lastChild.content,t-1,r)))}function IV(e,t){for(let r=0;r<t;r++)e=e.firstChild.content;return e}function IH(e,t,r,n,i){let s=e.node(t),o=i?e.indexAfter(t):e.index(t);if(o==s.childCount&&!r.compatibleContent(s.type))return null;let a=n.fillBefore(s.content,!0,o);return a&&!function(e,t,r){for(let n=r;n<t.childCount;n++)if(!e.allowsMarks(t.child(n).marks))return!0;return!1}(r,s.content,o)?a:null}function IW(e,t){let r=[],n=Math.min(e.depth,t.depth);for(let i=n;i>=0;i--){let n=e.start(i);if(n<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(n==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==n-1)&&r.push(i)}return r}class IU extends Ib{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Iv.fail("No node at attribute step's position");let r=Object.create(null);for(let e in t.attrs)r[e]=t.attrs[e];r[this.attr]=this.value;let n=t.type.create(r,null,t.marks);return Iv.fromReplace(e,this.pos,this.pos+1,new PR(PM.from(n),0,+!t.isLeaf))}getMap(){return Im.empty}invert(e){return new IU(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new IU(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw RangeError("Invalid input for AttrStep.fromJSON");return new IU(t.pos,t.attr,t.value)}}Ib.jsonID("attr",IU);class IG extends Ib{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let r in e.attrs)t[r]=e.attrs[r];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return Iv.ok(r)}getMap(){return Im.empty}invert(e){return new IG(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw RangeError("Invalid input for DocAttrStep.fromJSON");return new IG(t.attr,t.value)}}Ib.jsonID("docAttr",IG);let IX=class extends Error{};(IX=function e(t){let r=Error.call(this,t);return r.__proto__=e.prototype,r}).prototype=Object.create(Error.prototype),IX.prototype.constructor=IX,IX.prototype.name="TransformError";class IY{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ig}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new IX(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=PR.empty){let n=Iq(this.doc,e,t,r);return n&&this.step(n),this}replaceWith(e,t,r){return this.replace(e,t,new PR(PM.from(r),0,0))}delete(e,t){return this.replace(e,t,PR.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return function(e,t,r,n){if(!n.size)return e.deleteRange(t,r);let i=e.doc.resolve(t),s=e.doc.resolve(r);if(I$(i,s,n))return e.step(new IC(t,r,n));let o=IW(i,e.doc.resolve(r));0==o[o.length-1]&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let e=i.depth,t=i.pos-1;e>0;e--,t--){let r=i.node(e).type.spec;if(r.defining||r.definingAsContext||r.isolating)break;o.indexOf(e)>-1?a=e:i.before(e)==t&&o.splice(1,0,-e)}let l=o.indexOf(a),c=[],h=n.openStart;for(let e=n.content,t=0;;t++){let r=e.firstChild;if(c.push(r),t==n.openStart)break;e=r.content}for(let e=h-1;e>=0;e--){var u;let t=c[e],r=(u=t.type).spec.defining||u.spec.definingForContent;if(r&&!t.sameMarkup(i.node(Math.abs(a)-1)))h=e;else if(r||!t.type.isTextblock)break}for(let t=n.openStart;t>=0;t--){let a=(t+h+1)%(n.openStart+1),u=c[a];if(u)for(let t=0;t<o.length;t++){let c=o[(t+l)%o.length],h=!0;c<0&&(h=!1,c=-c);let d=i.node(c-1),f=i.index(c-1);if(d.canReplaceWith(f,f,u.type,u.marks))return e.replace(i.before(c),h?s.after(c):r,new PR(function e(t,r,n,i,s){if(r<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(e(s.content,r+1,n,i,s)))}if(r>i){let e=s.contentMatchAt(0),r=e.fillBefore(t).append(t);t=r.append(e.matchFragment(r).fillBefore(PM.empty,!0))}return t}(n.content,0,n.openStart,a),a,n.openEnd))}}let d=e.steps.length;for(let a=o.length-1;a>=0&&(e.replace(t,r,n),!(e.steps.length>d));a--){let e=o[a];e<0||(t=i.before(e),r=s.after(e))}}(this,e,t,r),this}replaceRangeWith(e,t,r){return function(e,t,r,n){if(!n.isInline&&t==r&&e.doc.resolve(t).parent.content.size){let i=function(e,t,r){let n=e.resolve(t);if(n.parent.canReplaceWith(n.index(),n.index(),r))return t;if(0==n.parentOffset)for(let e=n.depth-1;e>=0;e--){let t=n.index(e);if(n.node(e).canReplaceWith(t,t,r))return n.before(e+1);if(t>0)return null}if(n.parentOffset==n.parent.content.size)for(let e=n.depth-1;e>=0;e--){let t=n.indexAfter(e);if(n.node(e).canReplaceWith(t,t,r))return n.after(e+1);if(t<n.node(e).childCount)break}return null}(e.doc,t,n.type);null!=i&&(t=r=i)}e.replaceRange(t,r,new PR(PM.from(n),0,0))}(this,e,t,r),this}deleteRange(e,t){return function(e,t,r){let n=e.doc.resolve(t),i=e.doc.resolve(r),s=IW(n,i);for(let t=0;t<s.length;t++){let r=s[t],o=t==s.length-1;if(o&&0==r||n.node(r).type.contentMatch.validEnd)return e.delete(n.start(r),i.end(r));if(r>0&&(o||n.node(r-1).canReplace(n.index(r-1),i.indexAfter(r-1))))return e.delete(n.before(r),i.after(r))}for(let s=1;s<=n.depth&&s<=i.depth;s++)if(t-n.start(s)==n.depth-s&&r>n.end(s)&&i.end(s)-r!=i.depth-s&&n.start(s-1)==i.start(s-1)&&n.node(s-1).canReplace(n.index(s-1),i.index(s-1)))return e.delete(n.before(s),r);e.delete(t,r)}(this,e,t),this}lift(e,t){return function(e,t,r){let{$from:n,$to:i,depth:s}=t,o=n.before(s+1),a=i.after(s+1),l=o,c=a,h=PM.empty,u=0;for(let e=s,t=!1;e>r;e--)t||n.index(e)>0?(t=!0,h=PM.from(n.node(e).copy(h)),u++):l--;let d=PM.empty,f=0;for(let e=s,t=!1;e>r;e--)t||i.after(e+1)<i.end(e)?(t=!0,d=PM.from(i.node(e).copy(d)),f++):c++;e.step(new IT(l,c,o,a,new PR(h.append(d),u,f),h.size-u,!0))}(this,e,t),this}join(e,t=1){return function(e,t,r){let n=null,{linebreakReplacement:i}=e.doc.type.schema,s=e.doc.resolve(t-r),o=s.node().type;if(i&&o.inlineContent){let e="pre"==o.whitespace,t=!!o.contentMatch.matchType(i);e&&!t?n=!1:!e&&t&&(n=!0)}let a=e.steps.length;if(!1===n){let n=e.doc.resolve(t+r);ID(e,n.node(),n.before(),a)}o.inlineContent&&IM(e,t+r-1,o,s.node().contentMatchAt(s.index()),null==n);let l=e.mapping.slice(a),c=l.map(t-r);if(e.step(new IC(c,l.map(t+r,-1),PR.empty,!0)),!0===n){let t=e.doc.resolve(c);Ij(e,t.node(),t.before(),e.steps.length)}}(this,e,t),this}wrap(e,t){return function(e,t,r){let n=PM.empty;for(let e=r.length-1;e>=0;e--){if(n.size){let t=r[e].type.contentMatch.matchFragment(n);if(!t||!t.validEnd)throw RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=PM.from(r[e].type.create(r[e].attrs,n))}let i=t.start,s=t.end;e.step(new IT(i,s,i,s,new PR(n,0,0),r.length,!0))}(this,e,t),this}setBlockType(e,t=e,r,n=null){return function(e,t,r,n,i){if(!n.isTextblock)throw RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,r,(t,r)=>{var o,a,l;let c,h,u="function"==typeof i?i(t):i;if(t.isTextblock&&!t.hasMarkup(n,u)&&(o=e.doc,a=e.mapping.slice(s).map(r),l=n,h=(c=o.resolve(a)).index(),c.parent.canReplaceWith(h,h+1,l))){let i=null;if(n.schema.linebreakReplacement){let e="pre"==n.whitespace,t=!!n.contentMatch.matchType(n.schema.linebreakReplacement);e&&!t?i=!1:!e&&t&&(i=!0)}!1===i&&ID(e,t,r,s),IM(e,e.mapping.slice(s).map(r,1),n,void 0,null===i);let o=e.mapping.slice(s),a=o.map(r,1),l=o.map(r+t.nodeSize,1);return e.step(new IT(a,l,a+1,l-1,new PR(PM.from(n.create(u,null,t.marks)),0,0),1,!0)),!0===i&&Ij(e,t,r,s),!1}})}(this,e,t,r,n),this}setNodeMarkup(e,t,r=null,n){return function(e,t,r,n,i){let s=e.doc.nodeAt(t);if(!s)throw RangeError("No node at given position");r||(r=s.type);let o=r.create(n,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,o);if(!r.validContent(s.content))throw RangeError("Invalid content for node type "+r.name);e.step(new IT(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new PR(PM.from(o),0,0),1,!0))}(this,e,t,r,n),this}setNodeAttribute(e,t,r){return this.step(new IU(e,t,r)),this}setDocAttribute(e,t){return this.step(new IG(e,t)),this}addNodeMark(e,t){return this.step(new IO(e,t)),this}removeNodeMark(e,t){if(!(t instanceof Pj)){let r=this.doc.nodeAt(e);if(!r)throw RangeError("No node at position "+e);if(!(t=t.isInSet(r.marks)))return this}return this.step(new IS(e,t)),this}split(e,t=1,r){return function(e,t,r=1,n){let i=e.doc.resolve(t),s=PM.empty,o=PM.empty;for(let e=i.depth,t=i.depth-r,a=r-1;e>t;e--,a--){s=PM.from(i.node(e).copy(s));let t=n&&n[a];o=PM.from(t?t.type.create(t.attrs,o):i.node(e).copy(o))}e.step(new IC(t,t,new PR(s.append(o),r,r),!0))}(this,e,t,r),this}addMark(e,t,r){var n;let i,s,o,a;return n=this,i=[],s=[],n.doc.nodesBetween(e,t,(n,l,c)=>{if(!n.isInline)return;let h=n.marks;if(!r.isInSet(h)&&c.type.allowsMarkType(r.type)){let c=Math.max(l,e),u=Math.min(l+n.nodeSize,t),d=r.addToSet(h);for(let e=0;e<h.length;e++)h[e].isInSet(d)||(o&&o.to==c&&o.mark.eq(h[e])?o.to=u:i.push(o=new Ik(c,u,h[e])));a&&a.to==c?a.to=u:s.push(a=new Iw(c,u,r))}}),i.forEach(e=>n.step(e)),s.forEach(e=>n.step(e)),this}removeMark(e,t,r){var n;let i,s;return n=this,i=[],s=0,n.doc.nodesBetween(e,t,(n,o)=>{if(!n.isInline)return;s++;let a=null;if(r instanceof P7){let e=n.marks,t;for(;t=r.isInSet(e);)(a||(a=[])).push(t),e=t.removeFromSet(e)}else r?r.isInSet(n.marks)&&(a=[r]):a=n.marks;if(a&&a.length){let r=Math.min(o+n.nodeSize,t);for(let t=0;t<a.length;t++){let n=a[t],l;for(let e=0;e<i.length;e++){let t=i[e];t.step==s-1&&n.eq(i[e].style)&&(l=t)}l?(l.to=r,l.step=s):i.push({style:n,from:Math.max(o,e),to:r,step:s})}}}),i.forEach(e=>n.step(new Ik(e.from,e.to,e.style))),this}clearIncompatible(e,t,r){return IM(this,e,t,r),this}}let IZ=Object.create(null);class IJ{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new IK(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=PR.empty){let r=t.content.lastChild,n=null;for(let e=0;e<t.openEnd;e++)n=r,r=r.lastChild;let i=e.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:a,$to:l}=s[o],c=e.mapping.slice(i);e.replaceRange(c.map(a.pos),c.map(l.pos),o?PR.empty:t),0==o&&I9(e,i,(r?r.isInline:n&&n.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,n=this.ranges;for(let i=0;i<n.length;i++){let{$from:s,$to:o}=n[i],a=e.mapping.slice(r),l=a.map(s.pos),c=a.map(o.pos);i?e.deleteRange(l,c):(e.replaceRangeWith(l,c,t),I9(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let n=e.parent.inlineContent?new I2(e):I8(e.node(0),e.parent,e.pos,e.index(),t,r);if(n)return n;for(let n=e.depth-1;n>=0;n--){let i=t<0?I8(e.node(0),e.node(n),e.before(n+1),e.index(n),t,r):I8(e.node(0),e.node(n),e.after(n+1),e.index(n)+1,t,r);if(i)return i}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new I6(e.node(0))}static atStart(e){return I8(e,e,0,0,1)||new I6(e)}static atEnd(e){return I8(e,e,e.content.size,e.childCount,-1)||new I6(e)}static fromJSON(e,t){if(!t||!t.type)throw RangeError("Invalid input for Selection.fromJSON");let r=IZ[t.type];if(!r)throw RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in IZ)throw RangeError("Duplicate use of selection JSON ID "+e);return IZ[e]=t,t.prototype.jsonID=e,t}getBookmark(){return I2.between(this.$anchor,this.$head).getBookmark()}}IJ.prototype.visible=!0;class IK{constructor(e,t){this.$from=e,this.$to=t}}let I0=!1;function I1(e){I0||e.parent.inlineContent||(I0=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class I2 extends IJ{constructor(e,t=e){I1(e),I1(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return IJ.near(r);let n=e.resolve(t.map(this.anchor));return new I2(n.parent.inlineContent?n:r,r)}replace(e,t=PR.empty){if(super.replace(e,t),t==PR.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof I2&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new I4(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw RangeError("Invalid input for TextSelection.fromJSON");return new I2(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let n=e.resolve(t);return new this(n,r==t?n:e.resolve(r))}static between(e,t,r){let n=e.pos-t.pos;if((!r||n)&&(r=n>=0?1:-1),!t.parent.inlineContent){let e=IJ.findFrom(t,r,!0)||IJ.findFrom(t,-r,!0);if(!e)return IJ.near(t,r);t=e.$head}return e.parent.inlineContent||(0==n?e=t:(e=(IJ.findFrom(e,-r,!0)||IJ.findFrom(e,r,!0)).$anchor).pos<t.pos!=n<0&&(e=t)),new I2(e,t)}}IJ.jsonID("text",I2);class I4{constructor(e,t){this.anchor=e,this.head=t}map(e){return new I4(e.map(this.anchor),e.map(this.head))}resolve(e){return I2.between(e.resolve(this.anchor),e.resolve(this.head))}}class I5 extends IJ{constructor(e){let t=e.nodeAfter;super(e,e.node(0).resolve(e.pos+t.nodeSize)),this.node=t}map(e,t){let{deleted:r,pos:n}=t.mapResult(this.anchor),i=e.resolve(n);return r?IJ.near(i):new I5(i)}content(){return new PR(PM.from(this.node),0,0)}eq(e){return e instanceof I5&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new I3(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw RangeError("Invalid input for NodeSelection.fromJSON");return new I5(e.resolve(t.anchor))}static create(e,t){return new I5(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}I5.prototype.visible=!1,IJ.jsonID("node",I5);class I3{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new I4(r,r):new I3(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&I5.isSelectable(r)?new I5(t):IJ.near(t)}}class I6 extends IJ{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=PR.empty){if(t==PR.empty){e.delete(0,e.doc.content.size);let t=IJ.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new I6(e)}map(e){return new I6(e)}eq(e){return e instanceof I6}getBookmark(){return I7}}IJ.jsonID("all",I6);let I7={map(){return this},resolve:e=>new I6(e)};function I8(e,t,r,n,i,s=!1){if(t.inlineContent)return I2.create(e,r);for(let o=n-(i>0?0:1);i>0?o<t.childCount:o>=0;o+=i){let n=t.child(o);if(n.isAtom){if(!s&&I5.isSelectable(n))return I5.create(e,r-(i<0?n.nodeSize:0))}else{let t=I8(e,n,r+i,i<0?n.childCount:0,i,s);if(t)return t}r+=n.nodeSize*i}return null}function I9(e,t,r){let n,i=e.steps.length-1;if(i<t)return;let s=e.steps[i];(s instanceof IC||s instanceof IT)&&(e.mapping.maps[i].forEach((e,t,r,i)=>{null==n&&(n=i)}),e.setSelection(IJ.near(e.doc.resolve(n),r)))}class ze extends IY{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(1|this.updated)&-3,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return Pj.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Pj.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let n=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(n.text(e),!0):this.deleteSelection();{if(null==r&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let i=this.storedMarks;if(!i){let e=this.doc.resolve(t);i=r==t?e.marks():e.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,n.text(e,i)),this.selection.empty||this.setSelection(IJ.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function zt(e,t){return t&&e?e.bind(t):e}class zr{constructor(e,t,r){this.name=e,this.init=zt(t.init,r),this.apply=zt(t.apply,r)}}let zn=[new zr("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new zr("selection",{init:(e,t)=>e.selection||IJ.atStart(t.doc),apply:e=>e.selection}),new zr("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,r,n)=>n.selection.$cursor?e.storedMarks:null}),new zr("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class zi{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=zn.slice(),t&&t.forEach(e=>{if(this.pluginsByKey[e.key])throw RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new zr(e.key,e.spec.state,e))})}}class zs{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let t=this.config.plugins[r];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),n=null;for(;;){let i=!1;for(let s=0;s<this.config.plugins.length;s++){let o=this.config.plugins[s];if(o.spec.appendTransaction){let a=n?n[s].n:0,l=n?n[s].state:this,c=a<t.length&&o.spec.appendTransaction.call(o,a?t.slice(a):t,l,r);if(c&&r.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",e),!n){n=[];for(let e=0;e<this.config.plugins.length;e++)n.push(e<s?{state:r,n:t.length}:{state:this,n:0})}t.push(c),r=r.applyInner(c),i=!0}n&&(n[s]={state:r,n:t.length})}}if(!i)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw RangeError("Applying a mismatched transaction");let t=new zs(this.config),r=this.config.fields;for(let n=0;n<r.length;n++){let i=r[n];t[i.name]=i.apply(e,this[i.name],this,t)}return t}get tr(){return new ze(this)}static create(e){let t=new zi(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new zs(t);for(let n=0;n<t.fields.length;n++)r[t.fields[n].name]=t.fields[n].init(e,r);return r}reconfigure(e){let t=new zi(this.schema,e.plugins),r=t.fields,n=new zs(t);for(let t=0;t<r.length;t++){let i=r[t].name;n[i]=this.hasOwnProperty(i)?this[i]:r[t].init(e,n)}return n}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(e=>e.toJSON())),e&&"object"==typeof e)for(let r in e){if("doc"==r||"selection"==r)throw RangeError("The JSON fields `doc` and `selection` are reserved");let n=e[r],i=n.spec.state;i&&i.toJSON&&(t[r]=i.toJSON.call(n,this[n.key]))}return t}static fromJSON(e,t,r){if(!t)throw RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw RangeError("Required config field 'schema' missing");let n=new zi(e.schema,e.plugins),i=new zs(n);return n.fields.forEach(n=>{if("doc"==n.name)i.doc=PU.fromJSON(e.schema,t.doc);else if("selection"==n.name)i.selection=IJ.fromJSON(i.doc,t.selection);else if("storedMarks"==n.name)t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let s in r){let o=r[s],a=o.spec.state;if(o.key==n.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,s)){i[n.name]=a.fromJSON.call(o,e,t[s],i);return}}i[n.name]=n.init(e,i)}}),i}}class zo{constructor(e){this.spec=e,this.props={},e.props&&function e(t,r,n){for(let i in t){let s=t[i];s instanceof Function?s=s.bind(r):"handleDOMEvents"==i&&(s=e(s,r,{})),n[i]=s}return n}(e.props,this,this.props),this.key=e.key?e.key.key:zl("plugin")}getState(e){return e[this.key]}}let za=Object.create(null);function zl(e){return e in za?e+"$"+ ++za[e]:(za[e]=0,e+"$")}class zc{constructor(e="key"){this.key=zl(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}let zh=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},zu=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},zd=null,zf=function(e,t,r){let n=zd||(zd=document.createRange());return n.setEnd(e,r??e.nodeValue.length),n.setStart(e,t||0),n},zp=function(){zd=null},zm=function(e,t,r,n){return r&&(zy(e,t,r,n,-1)||zy(e,t,r,n,1))},zg=/^(img|br|input|textarea|hr)$/i;function zy(e,t,r,n,i){for(;;){if(e==r&&t==n)return!0;if(t==(i<0?0:zb(e))){let r=e.parentNode;if(!r||1!=r.nodeType||zv(e)||zg.test(e.nodeName)||"false"==e.contentEditable)return!1;t=zh(e)+(i<0?0:1),e=r}else{if(1!=e.nodeType||"false"==(e=e.childNodes[t+(i<0?-1:0)]).contentEditable)return!1;t=i<0?zb(e):0}}}function zb(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function zv(e){let t;for(let r=e;r&&!(t=r.pmViewDesc);r=r.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}let zx=function(e){return e.focusNode&&zm(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function zw(e,t){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=e,r.key=r.code=t,r}let zk="u">typeof navigator?navigator:null,zO="u">typeof document?document:null,zS=zk&&zk.userAgent||"",zC=/Edge\/(\d+)/.exec(zS),zT=/MSIE \d/.exec(zS),zA=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(zS),zM=!!(zT||zA||zC),zE=zT?document.documentMode:zA?+zA[1]:zC?+zC[1]:0,zN=!zM&&/gecko\/(\d+)/i.test(zS);zN&&(/Firefox\/(\d+)/.exec(zS)||[0,0])[1];let z_=!zM&&/Chrome\/(\d+)/.exec(zS),zj=!!z_,zD=z_?+z_[1]:0,zR=!zM&&!!zk&&/Apple Computer/.test(zk.vendor),zP=zR&&(/Mobile\/\w+/.test(zS)||!!zk&&zk.maxTouchPoints>2),zI=zP||!!zk&&/Mac/.test(zk.platform),zz=!!zk&&/Win/.test(zk.platform),zL=/Android \d/.test(zS),zq=!!zO&&"webkitFontSmoothing"in zO.documentElement.style,z$=zq?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function zB(e,t){return"number"==typeof e?e:e[t]}function zF(e,t,r){let n=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let o=r||e.dom;o;o=zu(o)){if(1!=o.nodeType)continue;let e=o,r=e==s.body,a=r?function(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}(s):function(e){let t=e.getBoundingClientRect(),r=t.width/e.offsetWidth||1,n=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*r,top:t.top,bottom:t.top+e.clientHeight*n}}(e),l=0,c=0;if(t.top<a.top+zB(n,"top")?c=-(a.top-t.top+zB(i,"top")):t.bottom>a.bottom-zB(n,"bottom")&&(c=t.bottom-t.top>a.bottom-a.top?t.top+zB(i,"top")-a.top:t.bottom-a.bottom+zB(i,"bottom")),t.left<a.left+zB(n,"left")?l=-(a.left-t.left+zB(i,"left")):t.right>a.right-zB(n,"right")&&(l=t.right-a.right+zB(i,"right")),l||c){if(r)s.defaultView.scrollBy(l,c);else{let r=e.scrollLeft,n=e.scrollTop;c&&(e.scrollTop+=c),l&&(e.scrollLeft+=l);let i=e.scrollLeft-r,s=e.scrollTop-n;t={left:t.left-i,top:t.top-s,right:t.right-i,bottom:t.bottom-s}}}if(r||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function zQ(e){let t=[],r=e.ownerDocument;for(let n=e;n&&(t.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),e!=r);n=zu(n));return t}function zV(e,t){for(let r=0;r<e.length;r++){let{dom:n,top:i,left:s}=e[r];n.scrollTop!=i+t&&(n.scrollTop=i+t),n.scrollLeft!=s&&(n.scrollLeft=s)}}let zH=null;function zW(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function zU(e){return e.top<e.bottom||e.left<e.right}function zG(e,t){let r=e.getClientRects();if(r.length){let e=r[t<0?0:r.length-1];if(zU(e))return e}return Array.prototype.find.call(r,zU)||e.getBoundingClientRect()}let zX=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function zY(e,t,r){let{node:n,offset:i,atom:s}=e.docView.domFromPos(t,r<0?-1:1),o=zq||zN;if(3==n.nodeType){if(o&&(zX.test(n.nodeValue)||(r<0?!i:i==n.nodeValue.length))){let e=zG(zf(n,i,i),r);if(zN&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){let t=zG(zf(n,i-1,i-1),-1);if(t.top==e.top){let r=zG(zf(n,i,i+1),-1);if(r.top!=e.top)return zZ(r,r.left<t.left)}}return e}{let e=i,t=i,s=r<0?1:-1;return r<0&&!i?(t++,s=-1):r>=0&&i==n.nodeValue.length?(e--,s=1):r<0?e--:t++,zZ(zG(zf(n,e,t),s),s<0)}}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(null==s&&i&&(r<0||i==zb(n))){let e=n.childNodes[i-1];if(1==e.nodeType)return zJ(e.getBoundingClientRect(),!1)}if(null==s&&i<zb(n)){let e=n.childNodes[i];if(1==e.nodeType)return zJ(e.getBoundingClientRect(),!0)}return zJ(n.getBoundingClientRect(),r>=0)}if(null==s&&i&&(r<0||i==zb(n))){let e=n.childNodes[i-1],t=3==e.nodeType?zf(e,zb(e)-+!o):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return zZ(zG(t,1),!1)}if(null==s&&i<zb(n)){let e=n.childNodes[i];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?zf(e,0,+!o):1==e.nodeType?e:null:null;if(t)return zZ(zG(t,-1),!0)}return zZ(zG(3==n.nodeType?zf(n):n,-r),r>=0)}function zZ(e,t){if(0==e.width)return e;let r=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:r,right:r}}function zJ(e,t){if(0==e.height)return e;let r=t?e.top:e.bottom;return{top:r,bottom:r,left:e.left,right:e.right}}function zK(e,t,r){let n=e.state,i=e.root.activeElement;n!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return r()}finally{n!=t&&e.updateState(n),i!=e.dom&&i&&i.focus()}}let z0=/[\u0590-\u08ac]/,z1=null,z2=null,z4=!1;class z5{constructor(e,t,r,n){this.parent=e,this.children=t,this.dom=r,this.contentDOM=n,this.dirty=0,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let n=this.children[t];if(n==e)return r;r+=n.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){let n;if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(r<0){let r,n;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&!((n=r.pmViewDesc)&&n.parent==this);)r=r.previousSibling;return r?this.posBeforeChild(n)+n.size:this.posAtStart}{let r,n;if(e==this.contentDOM)r=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.nextSibling}for(;r&&!((n=r.pmViewDesc)&&n.parent==this);)r=r.nextSibling;return r?this.posBeforeChild(n):this.posAtEnd}}if(e==this.dom&&this.contentDOM)n=t>zh(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))n=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){n=!1;break}if(t.previousSibling)break}if(null==n&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){n=!0;break}if(t.nextSibling)break}}return n??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,n=e;n;n=n.parentNode){let i=this.getDesc(n),s;if(i&&(!t||i.node)){if(!r||!(s=i.nodeDOM)||(1==s.nodeType?s.contains(1==e.nodeType?e:e.parentNode):s==e))return i;r=!1}}}getDesc(e){let t=e.pmViewDesc;for(let e=t;e;e=e.parent)if(e==this)return t}posFromDOM(e,t,r){for(let n=e;n;n=n.parentNode){let i=this.getDesc(n);if(i)return i.localPosFromDOM(e,t,r)}return -1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let n=this.children[t],i=r+n.size;if(r==e&&i!=r){for(;!n.border&&n.children.length;)for(let e=0;e<n.children.length;e++){let t=n.children[e];if(t.size){n=t;break}}return n}if(e<i)return n.descAt(e-r-n.border);r=i}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,n=0;for(let t=0;r<this.children.length;r++){let i=this.children[r],s=t+i.size;if(s>e||i instanceof Lt){n=e-t;break}t=s}if(n)return this.children[r].domFromPos(n-this.children[r].border,t);for(let e;r&&!(e=this.children[r-1]).size&&e instanceof z3&&e.side>=0;r--);if(t<=0){let e,n=!0;for(;!(!(e=r?this.children[r-1]:null)||e.dom.parentNode==this.contentDOM);r--,n=!1);return e&&t&&n&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?zh(e.dom)+1:0}}{let e,n=!0;for(;!(!(e=r<this.children.length?this.children[r]:null)||e.dom.parentNode==this.contentDOM);r++,n=!1);return e&&n&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?zh(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let n=-1,i=-1;for(let s=r,o=0;;o++){let r=this.children[o],a=s+r.size;if(-1==n&&e<=a){let i=s+r.border;if(e>=i&&t<=a-r.border&&r.node&&r.contentDOM&&this.contentDOM.contains(r.contentDOM))return r.parseRange(e,t,i);e=s;for(let t=o;t>0;t--){let r=this.children[t-1];if(r.size&&r.dom.parentNode==this.contentDOM&&!r.emptyChildAt(1)){n=zh(r.dom)+1;break}e-=r.size}-1==n&&(n=0)}if(n>-1&&(a>t||o==this.children.length-1)){t=a;for(let e=o+1;e<this.children.length;e++){let r=this.children[e];if(r.size&&r.dom.parentNode==this.contentDOM&&!r.emptyChildAt(-1)){i=zh(r.dom);break}t+=r.size}-1==i&&(i=this.contentDOM.childNodes.length);break}s=a}return{node:this.contentDOM,from:e,to:t,fromOffset:n,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(1!=t.nodeType||r==t.childNodes.length)throw RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,n=!1){let i=Math.min(e,t),s=Math.max(e,t);for(let o=0,a=0;o<this.children.length;o++){let l=this.children[o],c=a+l.size;if(i>a&&s<c)return l.setSelection(e-a-l.border,t-a-l.border,r,n);a=c}let o=this.domFromPos(e,e?-1:1),a=t==e?o:this.domFromPos(t,t?-1:1),l=r.root.getSelection(),c=r.domSelectionRange(),h=!1;if((zN||zR)&&e==t){let{node:e,offset:t}=o;if(3==e.nodeType){if((h=!!(t&&e.nodeValue[t-1]==`
`))&&t==e.nodeValue.length)for(let t=e,r;t;t=t.parentNode){if(r=t.nextSibling){"BR"==r.nodeName&&(o=a={node:r.parentNode,offset:zh(r)+1});break}let e=t.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let r=e.childNodes[t-1];h=r&&("BR"==r.nodeName||"false"==r.contentEditable)}}if(zN&&c.focusNode&&c.focusNode!=a.node&&1==c.focusNode.nodeType){let e=c.focusNode.childNodes[c.focusOffset];e&&"false"==e.contentEditable&&(n=!0)}if(!(n||h&&zR)&&zm(o.node,o.offset,c.anchorNode,c.anchorOffset)&&zm(a.node,a.offset,c.focusNode,c.focusOffset))return;let u=!1;if((l.extend||e==t)&&!h){l.collapse(o.node,o.offset);try{e!=t&&l.extend(a.node,a.offset),u=!0}catch{}}if(!u){if(e>t){let e=o;o=a,a=e}let r=document.createRange();r.setEnd(a.node,a.offset),r.setStart(o.node,o.offset),l.removeAllRanges(),l.addRange(r)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,n=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==s?e<=s&&t>=r:e<s&&t>r){let n=r+i.border,o=s-i.border;if(e>=n&&t<=o){this.dirty=e==r||t==s?2:1,e==n&&t==o&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=3:i.markDirty(e-n,t-n);return}i.dirty=i.dom!=i.contentDOM||i.dom.parentNode!=this.contentDOM||i.children.length?3:2}r=s}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=1==e?2:1;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class z3 extends z5{constructor(e,t,r,n){let i,s=t.type.toDOM;if("function"==typeof s&&(s=s(r,()=>i?i.parent?i.parent.posBeforeChild(i):void 0:n)),!t.type.spec.raw){if(1!=s.nodeType){let e=document.createElement("span");e.appendChild(s),s=e}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=t,this.widget=t,i=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class z6 extends z5{constructor(e,t,r,n){super(e,[],t,null),this.textDOM=r,this.text=n}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class z7 extends z5{constructor(e,t,r,n,i){super(e,[],r,n),this.mark=t,this.spec=i}static create(e,t,r,n){let i=n.nodeViews[t.type.name],s=i&&i(t,n,r);return s&&s.dom||(s=Ic.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new z7(e,t,s.dom,s.contentDOM||s.dom,s)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,t,r){let n=z7.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;t<s&&(i=Ld(i,t,s,r)),e>0&&(i=Ld(i,0,e,r));for(let e=0;e<i.length;e++)i[e].parent=n;return n.children=i,n}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class z8 extends z5{constructor(e,t,r,n,i,s,o,a,l){super(e,[],i,s),this.node=t,this.outerDeco=r,this.innerDeco=n,this.nodeDOM=o}static create(e,t,r,n,i,s){let o=i.nodeViews[t.type.name],a,l=o&&o(t,i,()=>a?a.parent?a.parent.posBeforeChild(a):void 0:s,r,n),c=l&&l.dom,h=l&&l.contentDOM;if(t.isText){if(c){if(3!=c.nodeType)throw RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text)}else c||({dom:c,contentDOM:h}=Ic.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));h||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let u=c;return c=La(c,r,t),l?a=new Lr(e,t,r,n,c,h||null,u,l,i,s+1):t.isText?new Le(e,t,r,n,c,u,i):new z8(e,t,r,n,c,h||null,u,i,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM){if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>PM.empty)}else e.contentElement=this.contentDOM}else e.getContent=()=>this.node.content;return e}matchesNode(e,t,r){return 0==this.dirty&&e.eq(this.node)&&Ll(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return+!this.node.isLeaf}updateChildren(e,t){let r=this.node.inlineContent,n=t,i=e.composing?this.localCompositionInfo(e,t):null,s=i&&i.pos>-1?i:null,o=i&&i.pos<0,a=new Lh(this,s&&s.node,e);(function(e,t,r,n){let i=t.locals(e),s=0;if(0==i.length){for(let r=0;r<e.childCount;r++){let o=e.child(r);n(o,i,t.forChild(s,o),r),s+=o.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let h,u,d,f;for(;o<i.length&&i[o].to==s;){let e=i[o++];e.widget&&(h?(u||(u=[h])).push(e):h=e)}if(h){if(u){u.sort(Lu);for(let e=0;e<u.length;e++)r(u[e],c,!!l)}else r(h,c,!!l)}if(l)f=-1,d=l,l=null;else if(c<e.childCount)f=c,d=e.child(c++);else break;for(let e=0;e<a.length;e++)a[e].to<=s&&a.splice(e--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let p=s+d.nodeSize;if(d.isText){let e=p;o<i.length&&i[o].from<e&&(e=i[o].from);for(let t=0;t<a.length;t++)a[t].to<e&&(e=a[t].to);e<p&&(l=d.cut(e-s),d=d.cut(0,e-s),p=e,f=-1)}else for(;o<i.length&&i[o].to<p;)o++;let m=d.isInline&&!d.isLeaf?a.filter(e=>!e.inline):a.slice();n(d,m,t.forChild(s,d),f),s=p}})(this.node,this.innerDeco,(t,i,s)=>{t.spec.marks?a.syncToMarks(t.spec.marks,r,e):t.type.side>=0&&!s&&a.syncToMarks(i==this.node.childCount?Pj.none:this.node.child(i).marks,r,e),a.placeWidget(t,e,n)},(t,s,l,c)=>{let h;a.syncToMarks(t.marks,r,e),a.findNodeMatch(t,s,l,c)||o&&e.state.selection.from>n&&e.state.selection.to<n+t.nodeSize&&(h=a.findIndexWithChild(i.node))>-1&&a.updateNodeAt(t,s,l,h,e)||a.updateNextNode(t,s,l,e,c,n)||a.addNode(t,s,l,e,n),n+=t.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(s&&this.protectLocalComposition(e,s),function e(t,r,n){let i=t.firstChild,s=!1;for(let o=0;o<r.length;o++){let a=r[o],l=a.dom;if(l.parentNode==t){for(;l!=i;)i=Lc(i),s=!0;i=i.nextSibling}else s=!0,t.insertBefore(l,i);if(a instanceof z7){let r=i?i.previousSibling:t.lastChild;e(a.contentDOM,a.children,n),i=r?r.nextSibling:t.firstChild}}for(;i;)i=Lc(i),s=!0;s&&n.trackWrites==t&&(n.trackWrites=null)}(this.contentDOM,this.children,e),zP&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}localCompositionInfo(e,t){let{from:r,to:n}=e.state.selection;if(!(e.state.selection instanceof I2)||r<t||n>t+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(!this.node.inlineContent)return{node:i,pos:-1,text:""};{let e=i.nodeValue,s=function(e,t,r,n){for(let i=0,s=0;i<e.childCount&&s<=n;){let o=e.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<e.childCount;){let t=e.child(i++);if(s+=t.nodeSize,!t.isText)break;l+=t.text}if(s>=r){if(s>=n&&l.slice(n-t.length-a,n-a)==t)return n-t.length;let e=a<n?l.lastIndexOf(t,n-a-1):-1;if(e>=0&&e+t.length+a>=r)return a+e;if(r==n&&l.length>=n+t.length-a&&l.slice(n-a,n-a+t.length)==t)return n}}return -1}(this.node.content,e,r-t,n-t);return s<0?null:{node:i,pos:s,text:e}}}protectLocalComposition(e,{node:t,pos:r,text:n}){if(this.getDesc(t))return;let i=t;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let s=new z6(this,i,t,n);e.input.compositionNodes.push(s),this.children=Ld(this.children,r,r+n.length,e,s)}update(e,t,r,n){return!!(3!=this.dirty&&e.sameMarkup(this.node))&&(this.updateInner(e,t,r,n),!0)}updateInner(e,t,r,n){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(n,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(Ll(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,r=this.dom;this.dom=Lo(this.dom,this.nodeDOM,Ls(this.outerDeco,this.node,t),Ls(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function z9(e,t,r,n,i){La(n,t,e);let s=new z8(void 0,e,t,r,n,n,n,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Le extends z8{constructor(e,t,r,n,i,s,o){super(e,t,r,n,i,null,s,o,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,n){return!!(3!=this.dirty&&(0==this.dirty||this.inParent())&&e.sameMarkup(this.node))&&(this.updateOuterDeco(t),(0!=this.dirty||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,n.trackWrites==this.nodeDOM&&(n.trackWrites=null)),this.node=e,this.dirty=0,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,r){let n=this.node.cut(e,t),i=document.createTextNode(n.text);return new Le(this.parent,n,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(0==e||t==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Lt extends z5{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class Lr extends z8{constructor(e,t,r,n,i,s,o,a,l,c){super(e,t,r,n,i,s,o,l,c),this.spec=a}update(e,t,r,n){if(3==this.dirty)return!1;if(!this.spec.update||this.node.type!=e.type&&!this.spec.multiType)return(!!this.contentDOM||!!e.isLeaf)&&super.update(e,t,r,n);{let i=this.spec.update(e,t,r);return i&&this.updateInner(e,t,r,n),i}}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,n){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,n)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}let Ln=function(e){e&&(this.nodeName=e)};Ln.prototype=Object.create(null);let Li=[new Ln];function Ls(e,t,r){if(0==e.length)return Li;let n=r?Li[0]:new Ln,i=[n];for(let s=0;s<e.length;s++){let o=e[s].type.attrs;if(o)for(let e in o.nodeName&&i.push(n=new Ln(o.nodeName)),o){let s=o[e];null!=s&&(r&&1==i.length&&i.push(n=new Ln(t.isInline?"span":"div")),"class"==e?n.class=(n.class?n.class+" ":"")+s:"style"==e?n.style=(n.style?n.style+";":"")+s:"nodeName"!=e&&(n[e]=s))}}return i}function Lo(e,t,r,n){if(r==Li&&n==Li)return t;let i=t;for(let t=0;t<n.length;t++){let s=n[t],o=r[t];if(t){let t;o&&o.nodeName==s.nodeName&&i!=e&&(t=i.parentNode)&&t.nodeName.toLowerCase()==s.nodeName||((t=document.createElement(s.nodeName)).pmIsDeco=!0,t.appendChild(i),o=Li[0]),i=t}!function(e,t,r){for(let n in t)"class"==n||"style"==n||"nodeName"==n||n in r||e.removeAttribute(n);for(let n in r)"class"!=n&&"style"!=n&&"nodeName"!=n&&r[n]!=t[n]&&e.setAttribute(n,r[n]);if(t.class!=r.class){let n=t.class?t.class.split(" ").filter(Boolean):[],i=r.class?r.class.split(" ").filter(Boolean):[];for(let t=0;t<n.length;t++)-1==i.indexOf(n[t])&&e.classList.remove(n[t]);for(let t=0;t<i.length;t++)-1==n.indexOf(i[t])&&e.classList.add(i[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=r.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,n;for(;n=r.exec(t.style);)e.style.removeProperty(n[1])}r.style&&(e.style.cssText+=r.style)}}(i,o||Li[0],s)}return i}function La(e,t,r){return Lo(e,e,Li,Ls(t,r,1!=e.nodeType))}function Ll(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].type.eq(t[r].type))return!1;return!0}function Lc(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class Lh{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let r=t,n=r.children.length,i=e.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(n){let e=r.children[n-1];if(e instanceof z7)r=e,n=e.children.length;else{a=e,n--;break}}else{if(r==t)break e;n=r.parent.children.indexOf(r),r=r.parent}let l=a.node;if(l){if(l!=e.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let n=0,i=this.stack.length>>1,s=Math.min(i,e.length);for(;n<s&&(n==i-1?this.top:this.stack[n+1<<1]).matchesMark(e[n])&&!1!==e[n].type.spec.spanning;)n++;for(;n<i;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let n=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let r=this.top.children[t];if(r.matchesMark(e[i])&&!this.isLocked(r.dom)){n=t;break}}if(n>-1)n>this.index&&(this.changed=!0,this.destroyBetween(this.index,n)),this.top=this.top.children[this.index];else{let n=z7.create(this.top,e[i],t,r);this.top.children.splice(this.index,0,n),this.top=n,this.changed=!0}this.index=0,i++}}findNodeMatch(e,t,r,n){let i=-1,s;if(n>=this.preMatch.index&&(s=this.preMatch.matches[n-this.preMatch.index]).parent==this.top&&s.matchesNode(e,t,r))i=this.top.children.indexOf(s,this.index);else for(let n=this.index,s=Math.min(this.top.children.length,n+5);n<s;n++){let s=this.top.children[n];if(s.matchesNode(e,t,r)&&!this.preMatch.matched.has(s)){i=n;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,r,n,i){let s=this.top.children[n];return 3==s.dirty&&s.dom==s.contentDOM&&(s.dirty=2),!!s.update(e,t,r,i)&&(this.destroyBetween(this.index,n),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return -1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t){for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e}return -1}e=t}}updateNextNode(e,t,r,n,i,s){for(let o=this.index;o<this.top.children.length;o++){let a=this.top.children[o];if(a instanceof z8){let l=this.preMatch.matched.get(a);if(null!=l&&l!=i)return!1;let c=a.dom,h,u=this.isLocked(c)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&3!=a.dirty&&Ll(t,a.outerDeco));if(!u&&a.update(e,t,r,n))return this.destroyBetween(this.index,o),a.dom!=c&&(this.changed=!0),this.index++,!0;if(!u&&(h=this.recreateWrapper(a,e,t,r,n,s)))return this.destroyBetween(this.index,o),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=2,h.updateChildren(n,s+1),h.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,n,i,s){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Ll(r,e.outerDeco)||!n.eq(e.innerDeco))return null;let o=z8.create(this.top,t,r,n,i,s);if(o.contentDOM)for(let t of(o.children=e.children,e.children=[],o.children))t.parent=o;return e.destroy(),o}addNode(e,t,r,n,i){let s=z8.create(this.top,e,t,r,n,i);s.contentDOM&&s.updateChildren(n,i+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,t,r){let n=this.index<this.top.children.length?this.top.children[this.index]:null;if(n&&n.matchesWidget(e)&&(e==n.widget||!n.widget.type.toDOM.parentNode))this.index++;else{let n=new z3(this.top,e,t,r);this.top.children.splice(this.index++,0,n),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof z7;)e=(t=e).children[t.children.length-1];(!e||!(e instanceof Le)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((zR||zj)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);"IMG"==e&&(r.className="ProseMirror-separator",r.alt=""),"BR"==e&&(r.className="ProseMirror-trailingBreak");let n=new Lt(this.top,[],r,null);t!=this.top?t.children.push(n):t.children.splice(this.index++,0,n),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function Lu(e,t){return e.type.side-t.type.side}function Ld(e,t,r,n,i){let s=[];for(let o=0,a=0;o<e.length;o++){let l=e[o],c=a,h=a+=l.size;c>=r||h<=t?s.push(l):(c<t&&s.push(l.slice(0,t-c,n)),i&&(s.push(i),i=void 0),h>r&&s.push(l.slice(r-c,l.size,n)))}return s}function Lf(e,t=null){let r=e.domSelectionRange(),n=e.state.doc;if(!r.focusNode)return null;let i=e.docView.nearestDesc(r.focusNode),s=i&&0==i.size,o=e.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(o<0)return null;let a=n.resolve(o),l,c;if(zx(r)){for(l=o;i&&!i.node;)i=i.parent;let e=i.node;if(i&&e.isAtom&&I5.isSelectable(e)&&i.parent&&!(e.isInline&&function(e,t,r){for(let n=0==t,i=t==zb(e);n||i;){if(e==r)return!0;let t=zh(e);if(!(e=e.parentNode))return!1;n=n&&0==t,i=i&&t==zb(e)}}(r.focusNode,r.focusOffset,i.dom))){let e=i.posBefore;c=new I5(o==e?a:n.resolve(e))}}else{if(r instanceof e.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let t=o,i=o;for(let n=0;n<r.rangeCount;n++){let s=r.getRangeAt(n);t=Math.min(t,e.docView.posFromDOM(s.startContainer,s.startOffset,1)),i=Math.max(i,e.docView.posFromDOM(s.endContainer,s.endOffset,-1))}if(t<0)return null;[l,o]=i==e.state.selection.anchor?[i,t]:[t,i],a=n.resolve(o)}else l=e.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(l<0)return null}let h=n.resolve(l);if(!c){let r="pointer"==t||e.state.selection.head<a.pos&&!s?1:-1;c=Lk(e,h,a,r)}return c}function Lp(e){return e.editable?e.hasFocus():LS(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Lm(e,t=!1){let r=e.state.selection;if(Lx(e,r),Lp(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&zj){let t=e.domSelectionRange(),r=e.domObserver.currentSelection;if(t.anchorNode&&r.anchorNode&&zm(t.anchorNode,t.anchorOffset,r.anchorNode,r.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection(),r=document.createRange();if(!t)return;let n=e.cursorWrapper.dom,i="IMG"==n.nodeName;i?r.setStart(n.parentNode,zh(n)+1):r.setStart(n,0),r.collapse(!0),t.removeAllRanges(),t.addRange(r),!i&&!e.state.selection.visible&&zM&&zE<=11&&(n.disabled=!0,n.disabled=!1)}(e);else{var n;let i,s,o,a,{anchor:l,head:c}=r,h,u;!Lg||r instanceof I2||(r.$from.parent.inlineContent||(h=Ly(e,r.from)),r.empty||r.$from.parent.inlineContent||(u=Ly(e,r.to))),e.docView.setSelection(l,c,e,t),Lg&&(h&&Lv(h),u&&Lv(u)),r.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&((i=(n=e).dom.ownerDocument).removeEventListener("selectionchange",n.input.hideSelectionGuard),o=(s=n.domSelectionRange()).anchorNode,a=s.anchorOffset,i.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(s.anchorNode!=o||s.anchorOffset!=a)&&(i.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!Lp(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}let Lg=zR||zj&&zD<63;function Ly(e,t){let{node:r,offset:n}=e.docView.domFromPos(t,0),i=n<r.childNodes.length?r.childNodes[n]:null,s=n?r.childNodes[n-1]:null;if(zR&&i&&"false"==i.contentEditable)return Lb(i);if((!i||"false"==i.contentEditable)&&(!s||"false"==s.contentEditable)){if(i)return Lb(i);if(s)return Lb(s)}}function Lb(e){return e.contentEditable="true",zR&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Lv(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Lx(e,t){if(t instanceof I5){let r=e.docView.descAt(t.from);r!=e.lastSelectedViewDesc&&(Lw(e),r&&r.selectNode(),e.lastSelectedViewDesc=r)}else Lw(e)}function Lw(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function Lk(e,t,r,n){return e.someProp("createSelectionBetween",n=>n(e,t,r))||I2.between(t,r,n)}function LO(e){return(!e.editable||!!e.hasFocus())&&LS(e)}function LS(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function LC(e,t){let{$anchor:r,$head:n}=e.selection,i=t>0?r.max(n):r.min(n),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&IJ.findFrom(s,t)}function LT(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function LA(e,t,r){let n=e.state.selection;if(n instanceof I2){if(r.indexOf("s")>-1){let{$head:r}=n,i=r.textOffset?null:t<0?r.nodeBefore:r.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let s=e.state.doc.resolve(r.pos+i.nodeSize*(t<0?-1:1));return LT(e,new I2(n.$anchor,s))}if(!n.empty)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){let r=LC(e.state,t);return!!r&&r instanceof I5&&LT(e,r)}if(!(zI&&r.indexOf("m")>-1)){let r=n.$head,i=r.textOffset?null:t<0?r.nodeBefore:r.nodeAfter,s;if(!i||i.isText)return!1;let o=t<0?r.pos-i.nodeSize:r.pos;return!!(i.isAtom||(s=e.docView.descAt(o))&&!s.contentDOM)&&(I5.isSelectable(i)?LT(e,new I5(t<0?e.state.doc.resolve(r.pos-i.nodeSize):r)):!!zq&&LT(e,new I2(e.state.doc.resolve(t<0?o:o+i.nodeSize))))}}else{if(n instanceof I5&&n.node.isInline)return LT(e,new I2(t>0?n.$to:n.$from));{let r=LC(e.state,t);return!!r&&LT(e,r)}}}function LM(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function LE(e,t){let r=e.pmViewDesc;return r&&0==r.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function LN(e,t){return t<0?function(e){let t=e.domSelectionRange(),r=t.focusNode,n=t.focusOffset;if(!r)return;let i,s,o=!1;for(zN&&1==r.nodeType&&n<LM(r)&&LE(r.childNodes[n],-1)&&(o=!0);;)if(n>0){if(1!=r.nodeType)break;{let e=r.childNodes[n-1];if(LE(e,-1))i=r,s=--n;else if(3==e.nodeType)n=(r=e).nodeValue.length;else break}}else{if(L_(r))break;{let t=r.previousSibling;for(;t&&LE(t,-1);)i=r.parentNode,s=zh(t),t=t.previousSibling;if(t)n=LM(r=t);else{if((r=r.parentNode)==e.dom)break;n=0}}}o?Lj(e,r,n):i&&Lj(e,i,s)}(e):function(e){let t=e.domSelectionRange(),r=t.focusNode,n=t.focusOffset;if(!r)return;let i=LM(r),s,o;for(;;)if(n<i){if(1!=r.nodeType)break;if(LE(r.childNodes[n],1))s=r,o=++n;else break}else{if(L_(r))break;{let t=r.nextSibling;for(;t&&LE(t,1);)s=t.parentNode,o=zh(t)+1,t=t.nextSibling;if(t)n=0,i=LM(r=t);else{if((r=r.parentNode)==e.dom)break;n=i=0}}}s&&Lj(e,s,o)}(e)}function L_(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Lj(e,t,r){if(3!=t.nodeType){let e,n;(n=function(e,t){for(;e&&t==e.childNodes.length&&!zv(e);)t=zh(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let r=e.childNodes[t];if(3==r.nodeType)return r;if(1==r.nodeType&&"false"==r.contentEditable)break;e=r,t=0}}(t,r))?(t=n,r=0):(e=function(e,t){for(;e&&!t&&!zv(e);)t=zh(e),e=e.parentNode;for(;e&&t;){let r=e.childNodes[t-1];if(3==r.nodeType)return r;if(1==r.nodeType&&"false"==r.contentEditable)break;t=(e=r).childNodes.length}}(t,r))&&(t=e,r=e.nodeValue.length)}let n=e.domSelection();if(!n)return;if(zx(n)){let e=document.createRange();e.setEnd(t,r),e.setStart(t,r),n.removeAllRanges(),n.addRange(e)}else n.extend&&n.extend(t,r);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&Lm(e)},50)}function LD(e,t){let r=e.state.doc.resolve(t);if(!(zj||zz)&&r.parent.inlineContent){let n=e.coordsAtPos(t);if(t>r.start()){let r=e.coordsAtPos(t-1),i=(r.top+r.bottom)/2;if(i>n.top&&i<n.bottom&&Math.abs(r.left-n.left)>1)return r.left<n.left?"ltr":"rtl"}if(t<r.end()){let r=e.coordsAtPos(t+1),i=(r.top+r.bottom)/2;if(i>n.top&&i<n.bottom&&Math.abs(r.left-n.left)>1)return r.left>n.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function LR(e,t,r){let n=e.state.selection;if(n instanceof I2&&!n.empty||r.indexOf("s")>-1||zI&&r.indexOf("m")>-1)return!1;let{$from:i,$to:s}=n;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let r=LC(e.state,t);if(r&&r instanceof I5)return LT(e,r)}if(!i.parent.inlineContent){let r=t<0?i:s,o=n instanceof I6?IJ.near(r,t):IJ.findFrom(r,t);return!!o&&LT(e,o)}return!1}function LP(e,t){if(!(e.state.selection instanceof I2))return!0;let{$head:r,$anchor:n,empty:i}=e.state.selection;if(!r.sameParent(n))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){let n=e.state.tr;return t<0?n.delete(r.pos-s.nodeSize,r.pos):n.delete(r.pos,r.pos+s.nodeSize),e.dispatch(n),!0}return!1}function LI(e,t,r){e.domObserver.stop(),t.contentEditable=r,e.domObserver.start()}function Lz(e,t){e.someProp("transformCopied",r=>{t=r(t,e)});let r=[],{content:n,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&1==n.childCount&&1==n.firstChild.childCount;){i--,s--;let e=n.firstChild;r.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),n=e.content}let o=e.someProp("clipboardSerializer")||Ic.fromSchema(e.state.schema),a=LH(),l=a.createElement("div");l.appendChild(o.serializeFragment(n,{document:a}));let c=l.firstChild,h,u=0;for(;c&&1==c.nodeType&&(h=LQ[c.nodeName.toLowerCase()]);){for(let e=h.length-1;e>=0;e--){let t=a.createElement(h[e]);for(;l.firstChild;)t.appendChild(l.firstChild);l.appendChild(t),u++}c=l.firstChild}return c&&1==c.nodeType&&c.setAttribute("data-pm-slice",`${i} ${s}${u?` -${u}`:""} ${JSON.stringify(r)}`),{dom:l,text:e.someProp("clipboardTextSerializer",r=>r(t,e))||t.content.textBetween(0,t.content.size,`

`),slice:t}}function LL(e,t,r,n,i){let s=i.parent.type.spec.code,o,a;if(!r&&!t)return null;let l=t&&(n||s||!r);if(l){if(e.someProp("transformPastedText",r=>{t=r(t,s||n,e)}),s)return t?new PR(PM.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):PR.empty;let r=e.someProp("clipboardTextParser",r=>r(t,i,n,e));if(r)a=r;else{let r=i.marks(),{schema:n}=e.state,s=Ic.fromSchema(n);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(e=>{let t=o.appendChild(document.createElement("p"));e&&t.appendChild(s.serializeNode(n.text(e,r)))})}}else e.someProp("transformPastedHTML",t=>{r=t(r,e)}),o=function(e){var t;let r,n=/^(\s*<meta [^>]*>)*/.exec(e);n&&(e=e.slice(n[0].length));let i=LH().createElement("div"),s=/<([a-z][^>\s]+)/i.exec(e),o;if((o=s&&LQ[s[1].toLowerCase()])&&(e=o.map(e=>"<"+e+">").join("")+e+o.map(e=>"</"+e+">").reverse().join("")),i.innerHTML=(t=e,(r=window.trustedTypes)?(LW||(LW=r.createPolicy("ProseMirrorClipboard",{createHTML:e=>e})),LW.createHTML(t)):t),o)for(let e=0;e<o.length;e++)i=i.querySelector(o[e])||i;return i}(r),zq&&function(e){let t=e.querySelectorAll(zj?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<t.length;r++){let n=t[r];1==n.childNodes.length&&"\xa0"==n.textContent&&n.parentNode&&n.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),n)}}(o);let c=o&&o.querySelector("[data-pm-slice]"),h=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let e=+h[3];e>0;e--){let e=o.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;o=e}if(a||(a=(e.someProp("clipboardParser")||e.someProp("domParser")||Ie.fromSchema(e.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||h),context:i,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||Lq.test(e.parentNode.nodeName)?null:{ignore:!0}})),h)a=function(e,t){if(!e.size)return e;let r=e.content.firstChild.type.schema,n;try{n=JSON.parse(t)}catch{return e}let{content:i,openStart:s,openEnd:o}=e;for(let e=n.length-2;e>=0;e-=2){let t=r.nodes[n[e]];if(!t||t.hasRequiredAttrs())break;i=PM.from(t.create(n[e+1],i)),s++,o++}return new PR(i,s,o)}(LF(a,+h[1],+h[2]),h[4]);else if((a=PR.maxOpen(function(e,t){if(e.childCount<2)return e;for(let r=t.depth;r>=0;r--){let n=t.node(r).contentMatchAt(t.index(r)),i,s=[];if(e.forEach(e=>{if(!s)return;let t=n.findWrapping(e.type),r;if(!t)return s=null;if(r=s.length&&i.length&&function e(t,r,n,i,s){if(s<t.length&&s<r.length&&t[s]==r[s]){let o=e(t,r,n,i.lastChild,s+1);if(o)return i.copy(i.content.replaceChild(i.childCount-1,o));if(i.contentMatchAt(i.childCount).matchType(s==t.length-1?n.type:t[s+1]))return i.copy(i.content.append(PM.from(L$(n,t,s+1))))}}(t,i,e,s[s.length-1],0))s[s.length-1]=r;else{s.length&&(s[s.length-1]=function e(t,r){if(0==r)return t;let n=t.content.replaceChild(t.childCount-1,e(t.lastChild,r-1)),i=t.contentMatchAt(t.childCount).fillBefore(PM.empty,!0);return t.copy(n.append(i))}(s[s.length-1],i.length));let r=L$(e,t);s.push(r),n=n.matchType(r.type),i=t}}),s)return PM.from(s)}return e}(a.content,i),!0)).openStart||a.openEnd){let e=0,t=0;for(let t=a.content.firstChild;e<a.openStart&&!t.type.spec.isolating;e++,t=t.firstChild);for(let e=a.content.lastChild;t<a.openEnd&&!e.type.spec.isolating;t++,e=e.lastChild);a=LF(a,e,t)}return e.someProp("transformPasted",t=>{a=t(a,e)}),a}let Lq=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function L$(e,t,r=0){for(let n=t.length-1;n>=r;n--)e=t[n].create(null,PM.from(e));return e}function LB(e,t,r,n,i,s){let o=t<0?e.firstChild:e.lastChild,a=o.content;return e.childCount>1&&(s=0),i<n-1&&(a=LB(a,t,r,n,i+1,s)),i>=r&&(a=t<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(PM.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(a))}function LF(e,t,r){return t<e.openStart&&(e=new PR(LB(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),r<e.openEnd&&(e=new PR(LB(e.content,1,r,e.openEnd,0,0),e.openStart,r)),e}let LQ={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},LV=null;function LH(){return LV||(LV=document.implementation.createHTMLDocument("title"))}let LW=null,LU={},LG={},LX={touchstart:!0,touchmove:!0};class LY{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function LZ(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function LJ(e){e.someProp("handleDOMEvents",t=>{for(let r in t)e.input.eventHandlers[r]||e.dom.addEventListener(r,e.input.eventHandlers[r]=t=>LK(e,t))})}function LK(e,t){return e.someProp("handleDOMEvents",r=>{let n=r[t.type];return!!n&&(n(e,t)||t.defaultPrevented)})}function L0(e){return{left:e.clientX,top:e.clientY}}function L1(e,t,r,n,i){if(-1==n)return!1;let s=e.state.doc.resolve(n);for(let n=s.depth+1;n>0;n--)if(e.someProp(t,t=>n>s.depth?t(e,r,s.nodeAfter,s.before(n),i,!0):t(e,r,s.node(n),s.before(n),i,!1)))return!0;return!1}function L2(e,t,r){if(e.focused||e.focus(),e.state.selection.eq(t))return;let n=e.state.tr.setSelection(t);n.setMeta("pointer",!0),e.dispatch(n)}LG.keydown=(e,t)=>{if(e.input.shiftKey=16==t.keyCode||t.shiftKey,!L3(e,t)&&(e.input.lastKeyCode=t.keyCode,e.input.lastKeyCodeTime=Date.now(),!(zL&&zj&&13==t.keyCode))){if(229!=t.keyCode&&e.domObserver.forceFlush(),!zP||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",r=>r(e,t))||function(e,t){let r;let n=t.keyCode,i=(r="",t.ctrlKey&&(r+="c"),t.metaKey&&(r+="m"),t.altKey&&(r+="a"),t.shiftKey&&(r+="s"),r);if(8==n||zI&&72==n&&"c"==i)return LP(e,-1)||LN(e,-1);if(46==n&&!t.shiftKey||zI&&68==n&&"c"==i)return LP(e,1)||LN(e,1);if(13==n||27==n)return!0;if(37==n||zI&&66==n&&"c"==i){let t=37==n?"ltr"==LD(e,e.state.selection.from)?-1:1:-1;return LA(e,t,i)||LN(e,t)}if(39==n||zI&&70==n&&"c"==i){let t=39==n?"ltr"==LD(e,e.state.selection.from)?1:-1:1;return LA(e,t,i)||LN(e,t)}return 38==n||zI&&80==n&&"c"==i?LR(e,-1,i)||LN(e,-1):40==n||zI&&78==n&&"c"==i?function(e){if(!zR||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:r}=e.domSelectionRange();if(t&&1==t.nodeType&&0==r&&t.firstChild&&"false"==t.firstChild.contentEditable){let r=t.firstChild;LI(e,r,"true"),setTimeout(()=>LI(e,r,"false"),20)}return!1}(e)||LR(e,1,i)||LN(e,1):i==(zI?"m":"c")&&(66==n||73==n||89==n||90==n)}(e,t)?t.preventDefault():LZ(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",t=>t(e,zw(13,"Enter"))),e.input.lastIOSEnter=0)},200)}}},LG.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},LG.keypress=(e,t)=>{if(L3(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||zI&&t.metaKey)return;if(e.someProp("handleKeyPress",r=>r(e,t))){t.preventDefault();return}let r=e.state.selection;if(!(r instanceof I2)||!r.$from.sameParent(r.$to)){let n=String.fromCharCode(t.charCode);/[\r\n]/.test(n)||e.someProp("handleTextInput",t=>t(e,r.$from.pos,r.$to.pos,n))||e.dispatch(e.state.tr.insertText(n).scrollIntoView()),t.preventDefault()}};let L4=zI?"metaKey":"ctrlKey";LU.mousedown=(e,t)=>{e.input.shiftKey=t.shiftKey;let r=L9(e),n=Date.now(),i="singleClick";n-e.input.lastClick.time<500&&function(e,t){let r=t.x-e.clientX,n=t.y-e.clientY;return r*r+n*n<100}(t,e.input.lastClick)&&!t[L4]&&("singleClick"==e.input.lastClick.type?i="doubleClick":"doubleClick"==e.input.lastClick.type&&(i="tripleClick")),e.input.lastClick={time:n,x:t.clientX,y:t.clientY,type:i};let s=e.posAtCoords(L0(t));s&&("singleClick"==i?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new L5(e,s,t,!!r)):("doubleClick"==i?function(e,t,r,n){return L1(e,"handleDoubleClickOn",t,r,n)||e.someProp("handleDoubleClick",r=>r(e,t,n))}:function(e,t,r,n){return L1(e,"handleTripleClickOn",t,r,n)||e.someProp("handleTripleClick",r=>r(e,t,n))||function(e,t,r){if(0!=r.button)return!1;let n=e.state.doc;if(-1==t)return!!n.inlineContent&&(L2(e,I2.create(n,0,n.content.size)),!0);let i=n.resolve(t);for(let t=i.depth+1;t>0;t--){let r=t>i.depth?i.nodeAfter:i.node(t),s=i.before(t);if(r.inlineContent)L2(e,I2.create(n,s+1,s+1+r.content.size));else{if(!I5.isSelectable(r))continue;L2(e,I5.create(n,s))}return!0}}(e,r,n)})(e,s.pos,s.inside,t)?t.preventDefault():LZ(e,"pointer"))};class L5{constructor(e,t,r,n){let i,s;if(this.view=e,this.pos=t,this.event=r,this.flushed=n,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[L4],this.allowDefault=r.shiftKey,t.inside>-1)i=e.state.doc.nodeAt(t.inside),s=t.inside;else{let r=e.state.doc.resolve(t.pos);i=r.parent,s=r.depth?r.before():0}let o=n?null:r.target,a=o?e.docView.nearestDesc(o,!0):null;this.target=a&&1==a.dom.nodeType?a.dom:null;let{selection:l}=e.state;(0==r.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||l instanceof I5&&l.from<=s&&l.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&zN&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),LZ(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Lm(this.view)),this.view.input.mouseDown=null}up(e){var t,r,n,i;if(this.done(),!this.view.dom.contains(e.target))return;let s=this.pos;this.view.state.doc!=this.startDoc&&(s=this.view.posAtCoords(L0(e))),this.updateAllowDefault(e),this.allowDefault||!s?LZ(this.view,"pointer"):(t=this.view,r=s.pos,n=s.inside,i=this.selectNode,L1(t,"handleClickOn",r,n,e)||t.someProp("handleClick",n=>n(t,r,e))||(i?function(e,t){if(-1==t)return!1;let r=e.state.selection,n,i;r instanceof I5&&(n=r.node);let s=e.state.doc.resolve(t);for(let e=s.depth+1;e>0;e--){let t=e>s.depth?s.nodeAfter:s.node(e);if(I5.isSelectable(t)){i=n&&r.$from.depth>0&&e>=r.$from.depth&&s.before(r.$from.depth+1)==r.$from.pos?s.before(r.$from.depth):s.before(e);break}}return null!=i&&(L2(e,I5.create(e.state.doc,i)),!0)}(t,n):function(e,t){if(-1==t)return!1;let r=e.state.doc.resolve(t),n=r.nodeAfter;return!!(n&&n.isAtom&&I5.isSelectable(n))&&(L2(e,new I5(r)),!0)}(t,n)))?e.preventDefault():0==e.button&&(this.flushed||zR&&this.mightDrag&&!this.mightDrag.node.isAtom||zj&&!this.view.state.selection.visible&&2>=Math.min(Math.abs(s.pos-this.view.state.selection.from),Math.abs(s.pos-this.view.state.selection.to)))?(L2(this.view,IJ.near(this.view.state.doc.resolve(s.pos))),e.preventDefault()):LZ(this.view,"pointer")}move(e){this.updateAllowDefault(e),LZ(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function L3(e,t){return!!e.composing||!!(zR&&500>Math.abs(t.timeStamp-e.input.compositionEndedAt))&&(e.input.compositionEndedAt=-2e8,!0)}LU.touchstart=e=>{e.input.lastTouch=Date.now(),L9(e),LZ(e,"pointer")},LU.touchmove=e=>{e.input.lastTouch=Date.now(),LZ(e,"pointer")},LU.contextmenu=e=>L9(e);let L6=zL?5e3:-1;function L7(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>L9(e),t))}function L8(e){let t;for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=((t=document.createEvent("Event")).initEvent("event",!0,!0),t.timeStamp));e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function L9(e,t=!1){if(!(zL&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),L8(e),t||e.docView&&e.docView.dirty){let r=Lf(e);return r&&!r.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(r)):(e.markCursor||t)&&!e.state.selection.empty?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}LG.compositionstart=LG.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,r=t.selection.$to;if(t.selection instanceof I2&&(t.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(e=>!1===e.type.spec.inclusive)))e.markCursor=e.state.storedMarks||r.marks(),L9(e,!0),e.markCursor=null;else if(L9(e,!t.selection.empty),zN&&t.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let t=e.domSelectionRange();for(let r=t.focusNode,n=t.focusOffset;r&&1==r.nodeType&&0!=n;){let t=n<0?r.lastChild:r.childNodes[n-1];if(!t)break;if(3==t.nodeType){let r=e.domSelection();r&&r.collapse(t,t.nodeValue.length);break}r=t,n=-1}}e.input.composing=!0}L7(e,L6)},LG.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,L7(e,20))};let qe=zM&&zE<15||zP&&z$<604;function qt(e,t,r,n,i){let s=LL(e,t,r,n,e.state.selection.$from);if(e.someProp("handlePaste",t=>t(e,i,s||PR.empty)))return!0;if(!s)return!1;let o=0==s.openStart&&0==s.openEnd&&1==s.content.childCount?s.content.firstChild:null,a=o?e.state.tr.replaceSelectionWith(o,n):e.state.tr.replaceSelection(s);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function qr(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let r=e.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}LU.copy=LG.cut=(e,t)=>{let r=e.state.selection,n="cut"==t.type;if(r.empty)return;let i=qe?null:t.clipboardData,{dom:s,text:o}=Lz(e,r.content());i?(t.preventDefault(),i.clearData(),i.setData("text/html",s.innerHTML),i.setData("text/plain",o)):function(e,t){if(!e.dom.parentNode)return;let r=e.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(t),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),e.focus()},50)}(e,s),n&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},LG.paste=(e,t)=>{if(e.composing&&!zL)return;let r=qe?null:t.clipboardData,n=e.input.shiftKey&&45!=e.input.lastKeyCode;r&&qt(e,qr(r),r.getData("text/html"),n,t)?t.preventDefault():function(e,t){if(!e.dom.parentNode)return;let r=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,n=e.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let i=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout(()=>{e.focus(),n.parentNode&&n.parentNode.removeChild(n),r?qt(e,n.value,null,i,t):qt(e,n.textContent,n.innerHTML,i,t)},50)}(e,t)};class qn{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}let qi=zI?"altKey":"ctrlKey";for(let e in LU.dragstart=(e,t)=>{let r=e.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let n=e.state.selection,i=n.empty?null:e.posAtCoords(L0(t)),s;if(!(i&&i.pos>=n.from&&i.pos<=(n instanceof I5?n.to-1:n.to))){if(r&&r.mightDrag)s=I5.create(e.state.doc,r.mightDrag.pos);else if(t.target&&1==t.target.nodeType){let r=e.docView.nearestDesc(t.target,!0);r&&r.node.type.spec.draggable&&r!=e.docView&&(s=I5.create(e.state.doc,r.posBefore))}}let o=(s||e.state.selection).content(),{dom:a,text:l,slice:c}=Lz(e,o);t.dataTransfer.files.length&&zj&&!(zD>120)||t.dataTransfer.clearData(),t.dataTransfer.setData(qe?"Text":"text/html",a.innerHTML),t.dataTransfer.effectAllowed="copyMove",qe||t.dataTransfer.setData("text/plain",l),e.dragging=new qn(c,!t[qi],s)},LU.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)},LG.dragover=LG.dragenter=(e,t)=>t.preventDefault(),LG.drop=(e,t)=>{let r=e.dragging;if(e.dragging=null,!t.dataTransfer)return;let n=e.posAtCoords(L0(t));if(!n)return;let i=e.state.doc.resolve(n.pos),s=r&&r.slice;s?e.someProp("transformPasted",t=>{s=t(s,e)}):s=LL(e,qr(t.dataTransfer),qe?null:t.dataTransfer.getData("text/html"),!1,i);let o=!!(r&&!t[qi]);if(e.someProp("handleDrop",r=>r(e,t,s||PR.empty,o))){t.preventDefault();return}if(!s)return;t.preventDefault();let a=s?IL(e.state.doc,i.pos,s):i.pos;null==a&&(a=i.pos);let l=e.state.tr;if(o){let{node:e}=r;e?e.replace(l):l.deleteSelection()}let c=l.mapping.map(a),h=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,u=l.doc;if(h?l.replaceRangeWith(c,c,s.content.firstChild):l.replaceRange(c,c,s),l.doc.eq(u))return;let d=l.doc.resolve(c);if(h&&I5.isSelectable(s.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new I5(d));else{let t=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((e,r,n,i)=>t=i),l.setSelection(Lk(e,d,l.doc.resolve(t)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))},LU.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Lm(e)},20))},LU.blur=(e,t)=>{e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),t.relatedTarget&&e.dom.contains(t.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},LU.beforeinput=(e,t)=>{if(zj&&zL&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=t||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",t=>t(e,zw(8,"Backspace")))))return;let{$cursor:r}=e.state.selection;r&&r.pos>0&&e.dispatch(e.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}},LG)LU[e]=LG[e];function qs(e,t){if(e==t)return!0;for(let r in e)if(e[r]!==t[r])return!1;for(let r in t)if(!(r in e))return!1;return!0}class qo{constructor(e,t){this.toDOM=e,this.spec=t||qu,this.side=this.spec.side||0}map(e,t,r,n){let{pos:i,deleted:s}=e.mapResult(t.from+n,this.side<0?-1:1);return s?null:new qc(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof qo&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&qs(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class qa{constructor(e,t){this.attrs=e,this.spec=t||qu}map(e,t,r,n){let i=e.map(t.from+n,this.spec.inclusiveStart?-1:1)-r,s=e.map(t.to+n,this.spec.inclusiveEnd?1:-1)-r;return i>=s?null:new qc(i,s,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof qa&&qs(this.attrs,e.attrs)&&qs(this.spec,e.spec)}static is(e){return e.type instanceof qa}destroy(){}}class ql{constructor(e,t){this.attrs=e,this.spec=t||qu}map(e,t,r,n){let i=e.mapResult(t.from+n,1);if(i.deleted)return null;let s=e.mapResult(t.to+n,-1);return s.deleted||s.pos<=i.pos?null:new qc(i.pos-r,s.pos-r,this)}valid(e,t){let{index:r,offset:n}=e.content.findIndex(t.from),i;return n==t.from&&!(i=e.child(r)).isText&&n+i.nodeSize==t.to}eq(e){return this==e||e instanceof ql&&qs(this.attrs,e.attrs)&&qs(this.spec,e.spec)}destroy(){}}class qc{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new qc(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new qc(e,e,new qo(t,r))}static inline(e,t,r,n){return new qc(e,t,new qa(r,n))}static node(e,t,r,n){return new qc(e,t,new ql(r,n))}get spec(){return this.type.spec}get inline(){return this.type instanceof qa}get widget(){return this.type instanceof qo}}let qh=[],qu={};class qd{constructor(e,t){this.local=e.length?e:qh,this.children=t.length?t:qh}static create(e,t){return t.length?qb(t,e,0,qu):qf}find(e,t,r){let n=[];return this.findInner(e??0,t??1e9,n,0,r),n}findInner(e,t,r,n,i){for(let s=0;s<this.local.length;s++){let o=this.local[s];o.from<=t&&o.to>=e&&(!i||i(o.spec))&&r.push(o.copy(o.from+n,o.to+n))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){let o=this.children[s]+1;this.children[s+2].findInner(e-o,t-o,r,n+o,i)}}map(e,t,r){return this==qf||0==e.maps.length?this:this.mapInner(e,t,0,0,r||qu)}mapInner(e,t,r,n,i){let s;for(let o=0;o<this.local.length;o++){let a=this.local[o].map(e,r,n);a&&a.type.valid(t,a)?(s||(s=[])).push(a):i.onRemove&&i.onRemove(this.local[o].spec)}return this.children.length?function(e,t,r,n,i,s,o){let a=e.slice();for(let e=0,t=s;e<r.maps.length;e++){let n=0;r.maps[e].forEach((e,r,i,s)=>{let o=s-i-(r-e);for(let i=0;i<a.length;i+=3){let s=a[i+1];if(s<0||e>s+t-n)continue;let l=a[i]+t-n;r>=l?a[i+1]=e<=l?-2:-1:e>=t&&o&&(a[i]+=o,a[i+1]+=o)}n+=o}),t=r.maps[e].map(t,-1)}let l=!1;for(let t=0;t<a.length;t+=3)if(a[t+1]<0){if(-2==a[t+1]){l=!0,a[t+1]=-1;continue}let c=r.map(e[t]+s),h=c-i;if(h<0||h>=n.content.size){l=!0;continue}let u=r.map(e[t+1]+s,-1)-i,{index:d,offset:f}=n.content.findIndex(h),p=n.maybeChild(d);if(p&&f==h&&f+p.nodeSize==u){let n=a[t+2].mapInner(r,p,c+1,e[t]+s+1,o);n!=qf?(a[t]=h,a[t+1]=u,a[t+2]=n):(a[t+1]=-2,l=!0)}else l=!0}if(l){let l=qb(function(e,t,r,n,i,s,o){for(let a=0;a<e.length;a+=3)-1==e[a+1]&&function e(t,s){for(let e=0;e<t.local.length;e++){let a=t.local[e].map(n,i,s);a?r.push(a):o.onRemove&&o.onRemove(t.local[e].spec)}for(let r=0;r<t.children.length;r+=3)e(t.children[r+2],t.children[r]+s+1)}(e[a+2],t[a]+s+1);return r}(a,e,t,r,i,s,o),n,0,o);t=l.local;for(let e=0;e<a.length;e+=3)a[e+1]<0&&(a.splice(e,3),e-=3);for(let e=0,t=0;e<l.children.length;e+=3){let r=l.children[e];for(;t<a.length&&a[t]<r;)t+=3;a.splice(t,0,l.children[e],l.children[e+1],l.children[e+2])}}return new qd(t.sort(qv),a)}(this.children,s||[],e,t,r,n,i):s?new qd(s.sort(qv),qh):qf}add(e,t){return t.length?this==qf?qd.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let n,i=0;e.forEach((e,s)=>{let o=s+r,a;if(a=qg(t,e,o)){for(n||(n=this.children.slice());i<n.length&&n[i]<s;)i+=3;n[i]==s?n[i+2]=n[i+2].addInner(e,a,o+1):n.splice(i,0,s,s+e.nodeSize,qb(a,e,o+1,qu)),i+=3}});let s=qm(i?qy(t):t,-r);for(let t=0;t<s.length;t++)s[t].type.valid(e,s[t])||s.splice(t--,1);return new qd(s.length?this.local.concat(s).sort(qv):this.local,n||this.children)}remove(e){return 0==e.length||this==qf?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,n=this.local;for(let n=0;n<r.length;n+=3){let i,s=r[n]+t,o=r[n+1]+t;for(let t=0,r;t<e.length;t++)(r=e[t])&&r.from>s&&r.to<o&&(e[t]=null,(i||(i=[])).push(r));if(!i)continue;r==this.children&&(r=this.children.slice());let a=r[n+2].removeInner(i,s+1);a!=qf?r[n+2]=a:(r.splice(n,3),n-=3)}if(n.length){for(let r=0,i;r<e.length;r++)if(i=e[r])for(let e=0;e<n.length;e++)n[e].eq(i,t)&&(n==this.local&&(n=this.local.slice()),n.splice(e--,1))}return r==this.children&&n==this.local?this:n.length||r.length?new qd(n,r):qf}forChild(e,t){let r,n;if(this==qf)return this;if(t.isLeaf)return qd.empty;for(let t=0;t<this.children.length;t+=3)if(this.children[t]>=e){this.children[t]==e&&(r=this.children[t+2]);break}let i=e+1,s=i+t.content.size;for(let e=0;e<this.local.length;e++){let t=this.local[e];if(t.from<s&&t.to>i&&t.type instanceof qa){let e=Math.max(i,t.from)-i,r=Math.min(s,t.to)-i;e<r&&(n||(n=[])).push(t.copy(e,r))}}if(n){let e=new qd(n.sort(qv),qh);return r?new qp([e,r]):e}return r||qf}eq(e){if(this==e)return!0;if(!(e instanceof qd)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return qx(this.localsInner(e))}localsInner(e){if(this==qf)return qh;if(e.inlineContent||!this.local.some(qa.is))return this.local;let t=[];for(let e=0;e<this.local.length;e++)this.local[e].type instanceof qa||t.push(this.local[e]);return t}forEachSet(e){e(this)}}qd.empty=new qd([],[]),qd.removeOverlap=qx;let qf=qd.empty;class qp{constructor(e){this.members=e}map(e,t){let r=this.members.map(r=>r.map(e,t,qu));return qp.from(r)}forChild(e,t){if(t.isLeaf)return qd.empty;let r=[];for(let n=0;n<this.members.length;n++){let i=this.members[n].forChild(e,t);i!=qf&&(i instanceof qp?r=r.concat(i.members):r.push(i))}return qp.from(r)}eq(e){if(!(e instanceof qp)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let n=0;n<this.members.length;n++){let i=this.members[n].localsInner(e);if(i.length){if(t){r&&(t=t.slice(),r=!1);for(let e=0;e<i.length;e++)t.push(i[e])}else t=i}}return t?qx(r?t:t.sort(qv)):qh}static from(e){switch(e.length){case 0:return qf;case 1:return e[0];default:return new qp(e.every(e=>e instanceof qd)?e:e.reduce((e,t)=>e.concat(t instanceof qd?t:t.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function qm(e,t){if(!t||!e.length)return e;let r=[];for(let n=0;n<e.length;n++){let i=e[n];r.push(new qc(i.from+t,i.to+t,i.type))}return r}function qg(e,t,r){if(t.isLeaf)return null;let n=r+t.nodeSize,i=null;for(let t=0,s;t<e.length;t++)(s=e[t])&&s.from>r&&s.to<n&&((i||(i=[])).push(s),e[t]=null);return i}function qy(e){let t=[];for(let r=0;r<e.length;r++)null!=e[r]&&t.push(e[r]);return t}function qb(e,t,r,n){let i=[],s=!1;t.forEach((t,o)=>{let a=qg(e,t,o+r);if(a){s=!0;let e=qb(a,t,r+o+1,n);e!=qf&&i.push(o,o+t.nodeSize,e)}});let o=qm(s?qy(e):e,-r).sort(qv);for(let e=0;e<o.length;e++)o[e].type.valid(t,o[e])||(n.onRemove&&n.onRemove(o[e].spec),o.splice(e--,1));return o.length||i.length?new qd(o,i):qf}function qv(e,t){return e.from-t.from||e.to-t.to}function qx(e){let t=e;for(let r=0;r<t.length-1;r++){let n=t[r];if(n.from!=n.to)for(let i=r+1;i<t.length;i++){let s=t[i];if(s.from==n.from){s.to!=n.to&&(t==e&&(t=e.slice()),t[i]=s.copy(s.from,n.to),qw(t,i+1,s.copy(n.to,s.to)));continue}s.from<n.to&&(t==e&&(t=e.slice()),t[r]=n.copy(n.from,s.from),qw(t,i,n.copy(s.from,n.to)));break}}return t}function qw(e,t,r){for(;t<e.length&&qv(r,e[t])>0;)t++;e.splice(t,0,r)}function qk(e){let t=[];return e.someProp("decorations",r=>{let n=r(e.state);n&&n!=qf&&t.push(n)}),e.cursorWrapper&&t.push(qd.create(e.state.doc,[e.cursorWrapper.deco])),qp.from(t)}let qO={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},qS=zM&&zE<=11;class qC{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class qT{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new qC,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);zM&&zE<=11&&e.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),qS&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,qO)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(LO(this.view)){if(this.suppressingSelectionUpdates)return Lm(this.view);if(zM&&zE<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&zm(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let r=e.focusNode;r;r=zu(r))t.add(r);for(let n=e.anchorNode;n;n=zu(n))if(t.has(n)){r=n;break}let n=r&&this.view.docView.nearestDesc(r);if(n&&n.ignoreMutation({type:"selection",target:3==r.nodeType?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){var e;let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&LO(t)&&!this.ignoreSelectionChange(n),s=-1,o=-1,a=!1,l=[];if(t.editable)for(let e=0;e<r.length;e++){let t=this.registerMutation(r[e],l);t&&(s=s<0?t.from:Math.min(t.from,s),o=o<0?t.to:Math.max(t.to,o),t.typeOver&&(a=!0))}if(zN&&l.length){let e=l.filter(e=>"BR"==e.nodeName);if(2==e.length){let[t,r]=e;t.parentNode&&t.parentNode.parentNode==r.parentNode?r.remove():t.remove()}else{let{focusNode:r}=this.currentSelection;for(let n of e){let e=n.parentNode;e&&"LI"==e.nodeName&&(!r||function(e,t){for(let r=t.parentNode;r&&r!=e.dom;r=r.parentNode){let t=e.docView.nearestDesc(r,!0);if(t&&t.node.isBlock)return r}return null}(t,r)!=e)&&n.remove()}}}let c=null;s<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&zx(n)&&(c=Lf(t))&&c.eq(IJ.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Lm(t),this.currentSelection.set(n)):(s>-1||i)&&(s>-1&&(t.docView.markDirty(s,o),e=t,qA.has(e)||(qA.set(e,null),-1===["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace))||(e.requiresGeckoHackNode=zN,qM||(console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),qM=!0))),this.handleDOMChange(s,o,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(n)||Lm(t),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(r==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if("childList"!=e.type)return"attributes"==e.type?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue});{for(let r=0;r<e.addedNodes.length;r++){let n=e.addedNodes[r];t.push(n),3==n.nodeType&&(this.lastChangedTextNode=n)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let n=e.previousSibling,i=e.nextSibling;if(zM&&zE<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:r,nextSibling:s}=e.addedNodes[t];(!r||0>Array.prototype.indexOf.call(e.addedNodes,r))&&(n=r),(!s||0>Array.prototype.indexOf.call(e.addedNodes,s))&&(i=s)}let s=n&&n.parentNode==e.target?zh(n)+1:0,o=r.localPosFromDOM(e.target,s,-1),a=i&&i.parentNode==e.target?zh(i):e.target.childNodes.length;return{from:o,to:r.localPosFromDOM(e.target,a,1)}}}}let qA=new WeakMap,qM=!1;function qE(e,t){let r=t.startContainer,n=t.startOffset,i=t.endContainer,s=t.endOffset,o=e.domAtPos(e.state.selection.anchor);return zm(o.node,o.offset,i,s)&&([r,n,i,s]=[i,s,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}}function qN(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(zR&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||zR&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}let q_=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function qj(e,t,r){return Math.max(r.anchor,r.head)>t.content.size?null:Lk(e,t.resolve(r.anchor),t.resolve(r.head))}function qD(e,t,r){let n=e.depth,i=t?e.end():e.pos;for(;n>0&&(t||e.indexAfter(n)==e.node(n).childCount);)n--,i++,t=!1;if(r){let t=e.node(n).maybeChild(e.indexAfter(n));for(;t&&!t.isLeaf;)t=t.firstChild,i++}return i}function qR(e){if(2!=e.length)return!1;let t=e.charCodeAt(0),r=e.charCodeAt(1);return t>=56320&&t<=57343&&r>=55296&&r<=56319}class qP{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new LY,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(q$),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=qL(this),qz(this),this.nodeViews=qq(this),this.docView=z9(this.state.doc,qI(this),qk(this),this.dom,this),this.domObserver=new qT(this,(e,t,r,n)=>(function(e,t,r,n,i){let s=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,r=Lf(e,t);if(r&&!e.state.selection.eq(r)){if(zj&&zL&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",t=>t(e,zw(13,"Enter"))))return;let n=e.state.tr.setSelection(r);"pointer"==t?n.setMeta("pointer",!0):"key"==t&&n.scrollIntoView(),s&&n.setMeta("composition",s),e.dispatch(n)}return}let o=e.state.doc.resolve(t),a=o.sharedDepth(r);t=o.before(a+1),r=e.state.doc.resolve(r).after(a+1);let l=e.state.selection,c=function(e,t,r){let{node:n,fromOffset:i,toOffset:s,from:o,to:a}=e.docView.parseRange(t,r),l=e.domSelectionRange(),c,h=l.anchorNode;if(h&&e.dom.contains(1==h.nodeType?h:h.parentNode)&&(c=[{node:h,offset:l.anchorOffset}],zx(l)||c.push({node:l.focusNode,offset:l.focusOffset})),zj&&8===e.input.lastKeyCode)for(let e=s;e>i;e--){let t=n.childNodes[e-1],r=t.pmViewDesc;if("BR"==t.nodeName&&!r){s=e;break}if(!r||r.size)break}let u=e.state.doc,d=e.someProp("domParser")||Ie.fromSchema(e.state.schema),f=u.resolve(o),p=null,m=d.parse(n,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:i,to:s,preserveWhitespace:"pre"!=f.parent.type.whitespace||"full",findPositions:c,ruleFromNode:qN,context:f});if(c&&null!=c[0].pos){let e=c[0].pos,t=c[1]&&c[1].pos;null==t&&(t=e),p={anchor:e+o,head:t+o}}return{doc:m,sel:p,from:o,to:a}}(e,t,r),h=e.state.doc,u=h.slice(c.from,c.to),d,f;8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(d=e.state.selection.to,f="end"):(d=e.state.selection.from,f="start"),e.input.lastKeyCode=null;let p=function(e,t,r,n,i){let s=e.findDiffStart(t,r);if(null==s)return null;let{a:o,b:a}=e.findDiffEnd(t,r+e.size,r+t.size);if("end"==i){let e=Math.max(0,s-Math.min(o,a));n-=o+e-s}if(o<s&&e.size<t.size){let e=n<=s&&n>=o?s-n:0;(s-=e)&&s<t.size&&qR(t.textBetween(s-1,s+1))&&(s+=e?1:-1),a=s+(a-o),o=s}else if(a<s){let t=n<=s&&n>=a?s-n:0;(s-=t)&&s<e.size&&qR(e.textBetween(s-1,s+1))&&(s+=t?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}(u.content,c.doc.content,c.from,d,f);if(p&&e.input.domChangeCount++,(zP&&e.input.lastIOSEnter>Date.now()-225||zL)&&i.some(e=>1==e.nodeType&&!q_.test(e.nodeName))&&(!p||p.endA>=p.endB)&&e.someProp("handleKeyDown",t=>t(e,zw(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!p){if(n&&l instanceof I2&&!l.empty&&l.$head.sameParent(l.$anchor)&&!e.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let t=qj(e,e.state.doc,c.sel);if(t&&!t.eq(e.state.selection)){let r=e.state.tr.setSelection(t);s&&r.setMeta("composition",s),e.dispatch(r)}}return}}e.state.selection.from<e.state.selection.to&&p.start==p.endB&&e.state.selection instanceof I2&&(p.start>e.state.selection.from&&p.start<=e.state.selection.from+2&&e.state.selection.from>=c.from?p.start=e.state.selection.from:p.endA<e.state.selection.to&&p.endA>=e.state.selection.to-2&&e.state.selection.to<=c.to&&(p.endB+=e.state.selection.to-p.endA,p.endA=e.state.selection.to)),zM&&zE<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&" \xa0"==c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)&&(p.start--,p.endA--,p.endB--);let m=c.doc.resolveNoCache(p.start-c.from),g=c.doc.resolveNoCache(p.endB-c.from),y=h.resolve(p.start),b=m.sameParent(g)&&m.parent.inlineContent&&y.end()>=p.endA,v;if((zP&&e.input.lastIOSEnter>Date.now()-225&&(!b||i.some(e=>"DIV"==e.nodeName||"P"==e.nodeName))||!b&&m.pos<c.doc.content.size&&!m.sameParent(g)&&(v=IJ.findFrom(c.doc.resolve(m.pos+1),1,!0))&&v.head==g.pos)&&e.someProp("handleKeyDown",t=>t(e,zw(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>p.start&&function(e,t,r,n,i){if(r-t<=i.pos-n.pos||qD(n,!0,!1)<i.pos)return!1;let s=e.resolve(t);if(!n.parent.isTextblock){let e=s.nodeAfter;return null!=e&&r==t+e.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=e.resolve(qD(s,!0,!0));return!(!o.parent.isTextblock||o.pos>r||qD(o,!0,!1)<r)&&n.parent.content.cut(n.parentOffset).eq(o.parent.content)}(h,p.start,p.endA,m,g)&&e.someProp("handleKeyDown",t=>t(e,zw(8,"Backspace")))){zL&&zj&&e.domObserver.suppressSelectionUpdates();return}zj&&p.endB==p.start&&(e.input.lastChromeDelete=Date.now()),zL&&!b&&m.start()!=g.start()&&0==g.parentOffset&&m.depth==g.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,g=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{e.someProp("handleKeyDown",function(t){return t(e,zw(13,"Enter"))})},20));let x=p.start,w=p.endA,k,O,S;if(b){if(m.pos==g.pos)zM&&zE<=11&&0==m.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Lm(e),20)),k=e.state.tr.delete(x,w),O=h.resolve(p.start).marksAcross(h.resolve(p.endA));else if(p.endA==p.endB&&(S=function(e,t){let r=e.firstChild.marks,n=t.firstChild.marks,i=r,s=n,o,a,l;for(let e=0;e<n.length;e++)i=n[e].removeFromSet(i);for(let e=0;e<r.length;e++)s=r[e].removeFromSet(s);if(1==i.length&&0==s.length)a=i[0],o="add",l=e=>e.mark(a.addToSet(e.marks));else{if(0!=i.length||1!=s.length)return null;a=s[0],o="remove",l=e=>e.mark(a.removeFromSet(e.marks))}let c=[];for(let e=0;e<t.childCount;e++)c.push(l(t.child(e)));if(PM.from(c).eq(e))return{mark:a,type:o}}(m.parent.content.cut(m.parentOffset,g.parentOffset),y.parent.content.cut(y.parentOffset,p.endA-y.start()))))k=e.state.tr,"add"==S.type?k.addMark(x,w,S.mark):k.removeMark(x,w,S.mark);else if(m.parent.child(m.index()).isText&&m.index()==g.index()-+!g.textOffset){let t=m.parent.textBetween(m.parentOffset,g.parentOffset);if(e.someProp("handleTextInput",r=>r(e,x,w,t)))return;k=e.state.tr.insertText(t,x,w)}}if(k||(k=e.state.tr.replace(x,w,c.doc.slice(p.start-c.from,p.endB-c.from))),c.sel){let t=qj(e,k.doc,c.sel);t&&!(zj&&e.composing&&t.empty&&(p.start!=p.endB||e.input.lastChromeDelete<Date.now()-100)&&(t.head==x||t.head==k.mapping.map(w)-1)||zM&&t.empty&&t.head==x)&&k.setSelection(t)}O&&k.ensureMarks(O),s&&k.setMeta("composition",s),e.dispatch(k.scrollIntoView())})(this,e,t,r,n)),this.domObserver.start(),function(e){for(let t in LU){let r=LU[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let r=t.target;r!=e.dom;r=r.parentNode)if(!r||11==r.nodeType||r.pmViewDesc&&r.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||LK(e,t)||!e.editable&&t.type in LG||r(e,t)},LX[t]?{passive:!0}:void 0)}zR&&e.dom.addEventListener("input",()=>null),LJ(e)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;for(let t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&LJ(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(q$),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let e in this._props)t[e]=this._props[e];for(let r in t.state=this.state,e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r,n,i;let s=this.state,o=!1,a=!1;e.storedMarks&&this.composing&&(L8(this),a=!0),this.state=e;let l=s.plugins!=e.plugins||this._props.plugins!=t.plugins;if(l||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=qq(this);(function(e,t){let r=0,n=0;for(let n in e){if(e[n]!=t[n])return!0;r++}for(let e in t)n++;return r!=n})(e,this.nodeViews)&&(this.nodeViews=e,o=!0)}(l||t.handleDOMEvents!=this._props.handleDOMEvents)&&LJ(this),this.editable=qL(this),qz(this);let c=qk(this),h=qI(this),u=s.plugins==e.plugins||s.doc.eq(e.doc)?e.scrollToSelection>s.scrollToSelection?"to selection":"preserve":"reset",d=o||!this.docView.matchesNode(e.doc,h,c);(d||!e.selection.eq(s.selection))&&(a=!0);let f="preserve"==u&&a&&null==this.dom.style.overflowAnchor&&function(e){let t=e.dom.getBoundingClientRect(),r=Math.max(0,t.top),n,i;for(let s=(t.left+t.right)/2,o=r+1;o<Math.min(innerHeight,t.bottom);o+=5){let t=e.root.elementFromPoint(s,o);if(!t||t==e.dom||!e.dom.contains(t))continue;let a=t.getBoundingClientRect();if(a.top>=r-20){n=t,i=a.top;break}}return{refDOM:n,refTop:i,stack:zQ(e.dom)}}(this);if(a){let t,r,a;this.domObserver.stop();let l=d&&(zM||zj)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&(n=s.selection,i=e.selection,a=Math.min(n.$anchor.sharedDepth(n.head),i.$anchor.sharedDepth(i.head)),n.$anchor.start(a)!=i.$anchor.start(a));if(d){let t=zj?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=function(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let r=function(e,t){for(;;){if(3==e.nodeType&&t)return e;if(1==e.nodeType&&t>0){if("false"==e.contentEditable)return null;t=zb(e=e.childNodes[t-1])}else{if(!e.parentNode||zv(e))return null;t=zh(e),e=e.parentNode}}}(t.focusNode,t.focusOffset),n=function(e,t){for(;;){if(3==e.nodeType&&t<e.nodeValue.length)return e;if(1==e.nodeType&&t<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[t],t=0}else{if(!e.parentNode||zv(e))return null;t=zh(e)+1,e=e.parentNode}}}(t.focusNode,t.focusOffset);if(r&&n&&r!=n){let t=n.pmViewDesc,i=e.domObserver.lastChangedTextNode;if(r==i||n==i)return i;if(!t||!t.isText(n.nodeValue))return n;if(e.input.compositionNode==n){let e=r.pmViewDesc;if(!(!e||!e.isText(r.nodeValue)))return n}}return r||n}(this)),(o||!this.docView.update(e.doc,h,c,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=z9(e.doc,h,c,this.dom,this)),t&&!this.trackWrites&&(l=!0)}l||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&(t=this.docView.domFromPos(this.state.selection.anchor,0),r=this.domSelectionRange(),zm(t.node,t.offset,r.anchorNode,r.anchorOffset)))?Lm(this,l):(Lx(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),null!==(r=this.dragging)&&void 0!==r&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),"reset"==u?this.dom.scrollTop=0:"to selection"==u?this.scrollToSelection():f&&function({refDOM:e,refTop:t,stack:r}){let n=e?e.getBoundingClientRect().top:0;zV(r,0==n?0:n-t)}(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(1==e.nodeType?e:e.parentNode))&&!this.someProp("handleScrollToSelection",e=>e(this))){if(this.state.selection instanceof I5){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&zF(this,t.getBoundingClientRect(),e)}else zF(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}updateDraggedNode(e,t){let r=e.node,n=-1;if(this.state.doc.nodeAt(r.from)==r.node)n=r.from;else{let e=r.from+(this.state.doc.content.size-t.doc.content.size);(e>0&&this.state.doc.nodeAt(e))==r.node&&(n=e)}this.dragging=new qn(e.slice,e.move,n<0?void 0:I5.create(this.state.doc,n))}someProp(e,t){let r=this._props&&this._props[e],n;if(null!=r&&(n=t?t(r):r))return n;for(let r=0;r<this.directPlugins.length;r++){let i=this.directPlugins[r].props[e];if(null!=i&&(n=t?t(i):i))return n}let i=this.state.plugins;if(i)for(let r=0;r<i.length;r++){let s=i[r].props[e];if(null!=s&&(n=t?t(s):s))return n}}hasFocus(){if(zM){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(zH)return e.focus(zH);let t=zQ(e);e.focus(null==zH?{get preventScroll(){return zH={preventScroll:!0},!0}}:void 0),zH||(zH=!1,zV(t,0))}(this.dom),Lm(this),this.domObserver.start()}get root(){let e=this._root;if(null==e){for(let e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e}return e||document}updateRoot(){this._root=null}posAtCoords(e){return function(e,t){var r;let n,i=e.dom.ownerDocument,s,o=0,a=function(e,t,r){if(e.caretPositionFromPoint)try{let n=e.caretPositionFromPoint(t,r);if(n)return{node:n.offsetNode,offset:Math.min(zb(n.offsetNode),n.offset)}}catch{}if(e.caretRangeFromPoint){let n=e.caretRangeFromPoint(t,r);if(n)return{node:n.startContainer,offset:Math.min(zb(n.startContainer),n.startOffset)}}}(i,t.left,t.top);a&&({node:s,offset:o}=a);let l=(e.root.elementFromPoint?e.root:i).elementFromPoint(t.left,t.top),c;if(!l||!e.dom.contains(1!=l.nodeType?l.parentNode:l)){let r=e.dom.getBoundingClientRect();if(!zW(t,r)||!(l=function e(t,r,n){let i=t.childNodes.length;if(i&&n.top<n.bottom)for(let s=Math.max(0,Math.min(i-1,Math.floor(i*(r.top-n.top)/(n.bottom-n.top))-2)),o=s;;){let n=t.childNodes[o];if(1==n.nodeType){let t=n.getClientRects();for(let i=0;i<t.length;i++){let s=t[i];if(zW(r,s))return e(n,r,s)}}if((o=(o+1)%i)==s)break}return t}(e.dom,t,r)))return null}if(zR)for(let e=l;s&&e;e=zu(e))e.draggable&&(s=void 0);if(l=(n=(r=l).parentNode)&&/^li$/i.test(n.nodeName)&&t.left<r.getBoundingClientRect().left?n:r,s){let r;if(zN&&1==s.nodeType&&(o=Math.min(o,s.childNodes.length))<s.childNodes.length){let e=s.childNodes[o],r;"IMG"==e.nodeName&&(r=e.getBoundingClientRect()).right<=t.left&&r.bottom>t.top&&o++}zq&&o&&1==s.nodeType&&1==(r=s.childNodes[o-1]).nodeType&&"false"==r.contentEditable&&r.getBoundingClientRect().top>=t.top&&o--,s==e.dom&&o==s.childNodes.length-1&&1==s.lastChild.nodeType&&t.top>s.lastChild.getBoundingClientRect().bottom?c=e.state.doc.content.size:(0==o||1!=s.nodeType||"BR"!=s.childNodes[o-1].nodeName)&&(c=function(e,t,r,n){let i=-1;for(let r=t,s=!1;r!=e.dom;){let t=e.docView.nearestDesc(r,!0),o;if(!t)return null;if(1==t.dom.nodeType&&(t.node.isBlock&&t.parent||!t.contentDOM)&&((o=t.dom.getBoundingClientRect()).width||o.height)&&(t.node.isBlock&&t.parent&&(!s&&o.left>n.left||o.top>n.top?i=t.posBefore:(!s&&o.right<n.left||o.bottom<n.top)&&(i=t.posAfter),s=!0),!t.contentDOM&&i<0&&!t.node.isText))return(t.node.isBlock?n.top<(o.top+o.bottom)/2:n.left<(o.left+o.right)/2)?t.posBefore:t.posAfter;r=t.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,r,-1)}(e,s,o,t))}null==c&&(c=function(e,t,r){let{node:n,offset:i}=function e(t,r){let n,i=2e8,s,o=0,a=r.top,l=r.top,c,h;for(let e=t.firstChild,u=0;e;e=e.nextSibling,u++){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=zf(e).getClientRects()}for(let d=0;d<t.length;d++){let f=t[d];if(f.top<=a&&f.bottom>=l){a=Math.max(f.bottom,a),l=Math.min(f.top,l);let t=f.left>r.left?f.left-r.left:f.right<r.left?r.left-f.right:0;if(t<i){n=e,i=t,s=t&&3==n.nodeType?{left:f.right<r.left?f.right:f.left,top:r.top}:r,1==e.nodeType&&t&&(o=u+ +(r.left>=(f.left+f.right)/2));continue}}else f.top>r.top&&!c&&f.left<=r.left&&f.right>=r.left&&(c=e,h={left:Math.max(f.left,Math.min(f.right,r.left)),top:f.top});!n&&(r.left>=f.right&&r.top>=f.top||r.left>=f.left&&r.top>=f.bottom)&&(o=u+1)}}return!n&&c&&(n=c,s=h,i=0),n&&3==n.nodeType?function(e,t){let r=e.nodeValue.length,n=document.createRange();for(let i=0;i<r;i++){n.setEnd(e,i+1),n.setStart(e,i);let r=zG(n,1);if(r.top!=r.bottom&&zW(t,r))return{node:e,offset:i+ +(t.left>=(r.left+r.right)/2)}}return{node:e,offset:0}}(n,s):!n||i&&1==n.nodeType?{node:t,offset:o}:e(n,s)}(t,r),s=-1;if(1==n.nodeType&&!n.firstChild){let e=n.getBoundingClientRect();s=e.left!=e.right&&r.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(n,i,s)}(e,l,t));let h=e.docView.nearestDesc(l,!0);return{pos:c,inside:h?h.posAtStart-h.border:-1}}(this,e)}coordsAtPos(e,t=1){return zY(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let n=this.docView.posFromDOM(e,t,r);if(null==n)throw RangeError("DOM position not inside the editor");return n}endOfTextblock(e,t){var r,n;let i,s;return r=t||this.state,z1==r&&z2==e?z4:(z1=r,z2=e,z4="up"==e||"down"==e?(n=this,i=r.selection,s="up"==e?i.$from:i.$to,zK(n,r,()=>{let{node:t}=n.docView.domFromPos(s.pos,"up"==e?-1:1);for(;;){let e=n.docView.nearestDesc(t,!0);if(!e)break;if(e.node.isBlock){t=e.contentDOM||e.dom;break}t=e.dom.parentNode}let r=zY(n,s.pos,1);for(let n=t.firstChild;n;n=n.nextSibling){let t;if(1==n.nodeType)t=n.getClientRects();else{if(3!=n.nodeType)continue;t=zf(n,0,n.nodeValue.length).getClientRects()}for(let n=0;n<t.length;n++){let i=t[n];if(i.bottom>i.top+1&&("up"==e?r.top-i.top>(i.bottom-r.top)*2:i.bottom-r.bottom>(r.bottom-i.top)*2))return!1}}return!0})):function(e,t,r){let{$head:n}=t.selection;if(!n.parent.isTextblock)return!1;let i=n.parentOffset,s=i==n.parent.content.size,o=e.domSelection();return o?z0.test(n.parent.textContent)&&o.modify?zK(e,t,()=>{let{focusNode:t,focusOffset:i,anchorNode:s,anchorOffset:a}=e.domSelectionRange(),l=o.caretBidiLevel;o.modify("move",r,"character");let c=n.depth?e.docView.domAfterPos(n.before()):e.dom,{focusNode:h,focusOffset:u}=e.domSelectionRange(),d=h&&!c.contains(1==h.nodeType?h:h.parentNode)||t==h&&i==u;try{o.collapse(s,a),t&&(t!=s||i!=a)&&o.extend&&o.extend(t,i)}catch{}return null!=l&&(o.caretBidiLevel=l),d}):"left"==r||"backward"==r?!i:s:n.pos==n.start()||n.pos==n.end()}(this,r,e))}pasteHTML(e,t){return qt(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return qt(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Lz(this,e)}destroy(){this.docView&&(function(e){for(let t in e.domObserver.stop(),e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],qk(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,zp())}get isDestroyed(){return null==this.docView}dispatchEvent(e){LK(this,e)||!LU[e.type]||!this.editable&&e.type in LG||LU[e.type](this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?zR&&11===this.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e,t){let r;if(t.getComposedRanges){let r=t.getComposedRanges(e.root)[0];if(r)return qE(e,r)}function n(e){e.preventDefault(),e.stopImmediatePropagation(),r=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",n,!0),r?qE(e,r):null}(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function qI(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",r=>{if("function"==typeof r&&(r=r(e.state)),r)for(let e in r)"class"==e?t.class+=" "+r[e]:"style"==e?t.style=(t.style?t.style+";":"")+r[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(r[e]))}),t.translate||(t.translate="no"),[qc.node(0,e.state.doc.content.size,t)]}function qz(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:qc.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function qL(e){return!e.someProp("editable",t=>!1===t(e.state))}function qq(e){let t=Object.create(null);function r(e){for(let r in e)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=e[r])}return e.someProp("nodeViews",r),e.someProp("markViews",r),t}function q$(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw RangeError("Plugins passed directly to the view must not have a state component")}let qB="u">typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function qF(e,t,r=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),r&&t.shiftKey&&(e="Shift-"+e),e}function qQ(e){let t=function(e){let t=Object.create(null);for(let r in e)t[function(e){let t,r,n,i,s=e.split(/-(?!$)/),o=s[s.length-1];"Space"==o&&(o=" ");for(let e=0;e<s.length-1;e++){let o=s[e];if(/^(cmd|meta|m)$/i.test(o))i=!0;else if(/^a(lt)?$/i.test(o))t=!0;else if(/^(c|ctrl|control)$/i.test(o))r=!0;else if(/^s(hift)?$/i.test(o))n=!0;else if(/^mod$/i.test(o))qB?i=!0:r=!0;else throw Error("Unrecognized modifier name: "+o)}return t&&(o="Alt-"+o),r&&(o="Ctrl-"+o),i&&(o="Meta-"+o),n&&(o="Shift-"+o),o}(r)]=e[r];return t}(e);return function(e,r){let n=hz(r),i,s=t[qF(n,r)];if(s&&s(e.state,e.dispatch,e))return!0;if(1==n.length&&" "!=n){if(r.shiftKey){let i=t[qF(n,r,!1)];if(i&&i(e.state,e.dispatch,e))return!0}if((r.shiftKey||r.altKey||r.metaKey||n.charCodeAt(0)>127)&&(i=h_[r.keyCode])&&i!=n){let n=t[qF(i,r)];if(n&&n(e.state,e.dispatch,e))return!0}}return!1}}let qV=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function qH(e,t){let{$cursor:r}=e.selection;return r&&(t?t.endOfTextblock("backward",e):!(r.parentOffset>0))?r:null}let qW=(e,t,r)=>{let n=qH(e,r);if(!n)return!1;let i=qJ(n);if(!i){let r=n.blockRange(),i=r&&IE(r);return null!=i&&(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)}let s=i.nodeBefore;if($r(e,i,t,-1))return!0;if(0==n.parent.content.size&&(qY(s,"end")||I5.isSelectable(s)))for(let r=n.depth;;r--){let o=Iq(e.doc,n.before(r),n.after(r),PR.empty);if(o&&o.slice.size<o.to-o.from){if(t){let r=e.tr.step(o);r.setSelection(qY(s,"end")?IJ.findFrom(r.doc.resolve(r.mapping.map(i.pos,-1)),-1):I5.create(r.doc,i.pos-s.nodeSize)),t(r.scrollIntoView())}return!0}if(1==r||n.node(r-1).childCount>1)break}return!!s.isAtom&&i.depth==n.depth-1&&(t&&t(e.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0)},qU=(e,t,r)=>{let n=qH(e,r);if(!n)return!1;let i=qJ(n);return!!i&&qX(e,i,t)},qG=(e,t,r)=>{let n=qK(e,r);if(!n)return!1;let i=q2(n);return!!i&&qX(e,i,t)};function qX(e,t,r){let n=t.nodeBefore,i=t.pos-1;for(;!n.isTextblock;i--){if(n.type.spec.isolating)return!1;let e=n.lastChild;if(!e)return!1;n=e}let s=t.nodeAfter,o=t.pos+1;for(;!s.isTextblock;o++){if(s.type.spec.isolating)return!1;let e=s.firstChild;if(!e)return!1;s=e}let a=Iq(e.doc,i,o,PR.empty);if(!a||a.from!=i||a instanceof IC&&a.slice.size>=o-i)return!1;if(r){let t=e.tr.step(a);t.setSelection(I2.create(t.doc,i)),r(t.scrollIntoView())}return!0}function qY(e,t,r=!1){for(let n=e;n;n="start"==t?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&1!=n.childCount)break}return!1}let qZ=(e,t,r)=>{let{$head:n,empty:i}=e.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",e):n.parentOffset>0)return!1;s=qJ(n)}let o=s&&s.nodeBefore;return!!(o&&I5.isSelectable(o))&&(t&&t(e.tr.setSelection(I5.create(e.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function qJ(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function qK(e,t){let{$cursor:r}=e.selection;return r&&(t?t.endOfTextblock("forward",e):!(r.parentOffset<r.parent.content.size))?r:null}let q0=(e,t,r)=>{let n=qK(e,r);if(!n)return!1;let i=q2(n);if(!i)return!1;let s=i.nodeAfter;if($r(e,i,t,1))return!0;if(0==n.parent.content.size&&(qY(s,"start")||I5.isSelectable(s))){let r=Iq(e.doc,n.before(),n.after(),PR.empty);if(r&&r.slice.size<r.to-r.from){if(t){let n=e.tr.step(r);n.setSelection(qY(s,"start")?IJ.findFrom(n.doc.resolve(n.mapping.map(i.pos)),1):I5.create(n.doc,n.mapping.map(i.pos))),t(n.scrollIntoView())}return!0}}return!!s.isAtom&&i.depth==n.depth-1&&(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0)},q1=(e,t,r)=>{let{$head:n,empty:i}=e.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)return!1;s=q2(n)}let o=s&&s.nodeAfter;return!!(o&&I5.isSelectable(o))&&(t&&t(e.tr.setSelection(I5.create(e.doc,s.pos)).scrollIntoView()),!0)};function q2(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let r=e.node(t);if(e.index(t)+1<r.childCount)return e.doc.resolve(e.after(t+1));if(r.type.spec.isolating)break}return null}let q4=(e,t)=>{let r=e.selection,n=r instanceof I5,i;if(n){if(r.node.isTextblock||!IP(e.doc,r.from))return!1;i=r.from}else if(null==(i=Iz(e.doc,r.from,-1)))return!1;if(t){let r=e.tr.join(i);n&&r.setSelection(I5.create(r.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(r.scrollIntoView())}return!0},q5=(e,t)=>{let r=e.selection,n;if(r instanceof I5){if(r.node.isTextblock||!IP(e.doc,r.to))return!1;n=r.to}else if(null==(n=Iz(e.doc,r.to,1)))return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0},q3=(e,t)=>{let{$from:r,$to:n}=e.selection,i=r.blockRange(n),s=i&&IE(i);return null!=s&&(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)},q6=(e,t)=>{let{$head:r,$anchor:n}=e.selection;return!!(r.parent.type.spec.code&&r.sameParent(n))&&(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function q7(e){for(let t=0;t<e.edgeCount;t++){let{type:r}=e.edge(t);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}let q8=(e,t)=>{let{$head:r,$anchor:n}=e.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let i=r.node(-1),s=r.indexAfter(-1),o=q7(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(t){let n=r.after(),i=e.tr.replaceWith(n,n,o.createAndFill());i.setSelection(IJ.near(i.doc.resolve(n),1)),t(i.scrollIntoView())}return!0},q9=(e,t)=>{let r=e.selection,{$from:n,$to:i}=r;if(r instanceof I6||n.parent.inlineContent||i.parent.inlineContent)return!1;let s=q7(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let r=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,o=e.tr.insert(r,s.createAndFill());o.setSelection(I2.create(o.doc,r+1)),t(o.scrollIntoView())}return!0},$e=(e,t)=>{let{$cursor:r}=e.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let n=r.before();if(IR(e.doc,n))return t&&t(e.tr.split(n).scrollIntoView()),!0}let n=r.blockRange(),i=n&&IE(n);return null!=i&&(t&&t(e.tr.lift(n,i).scrollIntoView()),!0)},$t=(e,t)=>{let{$from:r,to:n}=e.selection,i,s=r.sharedDepth(n);return 0!=s&&(i=r.before(s),t&&t(e.tr.setSelection(I5.create(e.doc,i))),!0)};function $r(e,t,r,n){let i,s,o,a=t.nodeBefore,l=t.nodeAfter,c,h,u=a.type.spec.isolating||l.type.spec.isolating;if(!u&&(i=t.nodeBefore,s=t.nodeAfter,o=t.index(),i&&s&&i.type.compatibleContent(s.type)&&(!i.content.size&&t.parent.canReplace(o-1,o)?(r&&r(e.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),!0):!!(t.parent.canReplace(o,o+1)&&(s.isTextblock||IP(e.doc,t.pos)))&&(r&&r(e.tr.join(t.pos).scrollIntoView()),!0))))return!0;let d=!u&&t.parent.canReplace(t.index(),t.index()+1);if(d&&(c=(h=a.contentMatchAt(a.childCount)).findWrapping(l.type))&&h.matchType(c[0]||l.type).validEnd){if(r){let n=t.pos+l.nodeSize,i=PM.empty;for(let e=c.length-1;e>=0;e--)i=PM.from(c[e].create(null,i));i=PM.from(a.copy(i));let s=e.tr.step(new IT(t.pos-1,n,t.pos,n,new PR(i,1,0),c.length,!0)),o=s.doc.resolve(n+2*c.length);o.nodeAfter&&o.nodeAfter.type==a.type&&IP(s.doc,o.pos)&&s.join(o.pos),r(s.scrollIntoView())}return!0}let f=l.type.spec.isolating||n>0&&u?null:IJ.findFrom(t,1),p=f&&f.$from.blockRange(f.$to),m=p&&IE(p);if(null!=m&&m>=t.depth)return r&&r(e.tr.lift(p,m).scrollIntoView()),!0;if(d&&qY(l,"start",!0)&&qY(a,"end")){let n=a,i=[];for(;i.push(n),!n.isTextblock;)n=n.lastChild;let s=l,o=1;for(;!s.isTextblock;s=s.firstChild)o++;if(n.canReplace(n.childCount,n.childCount,s.content)){if(r){let n=PM.empty;for(let e=i.length-1;e>=0;e--)n=PM.from(i[e].copy(n));r(e.tr.step(new IT(t.pos-i.length,t.pos+l.nodeSize,t.pos+o,t.pos+l.nodeSize-o,new PR(n,i.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function $n(e){return function(t,r){let n=t.selection,i=e<0?n.$from:n.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return!!i.node(s).isTextblock&&(r&&r(t.tr.setSelection(I2.create(t.doc,e<0?i.start(s):i.end(s)))),!0)}}let $i=$n(-1),$s=$n(1);function $o(e,t=null){return function(r,n){let i=!1;for(let n=0;n<r.selection.ranges.length&&!i;n++){let{$from:{pos:s},$to:{pos:o}}=r.selection.ranges[n];r.doc.nodesBetween(s,o,(n,s)=>{if(i)return!1;if(!(!n.isTextblock||n.hasMarkup(e,t))){if(n.type==e)i=!0;else{let t=r.doc.resolve(s),n=t.index();i=t.parent.canReplaceWith(n,n+1,e)}}})}if(!i)return!1;if(n){let i=r.tr;for(let n=0;n<r.selection.ranges.length;n++){let{$from:{pos:s},$to:{pos:o}}=r.selection.ranges[n];i.setBlockType(s,o,e,t)}n(i.scrollIntoView())}return!0}}function $a(...e){return function(t,r,n){for(let i=0;i<e.length;i++)if(e[i](t,r,n))return!0;return!1}}function $l(e){let{state:t,transaction:r}=e,{selection:n}=r,{doc:i}=r,{storedMarks:s}=r;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return n},get doc(){return i},get tr(){return n=r.selection,i=r.doc,s=r.storedMarks,r}}}$a(qV,qW,qZ),$a(qV,q0,q1),$a(q6,q9,$e,(e,t)=>{let{$from:r,$to:n}=e.selection;if(e.selection instanceof I5&&e.selection.node.isBlock)return!!(r.parentOffset&&IR(e.doc,r.pos))&&(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],s,o,a=!1,l=!1;for(let e=r.depth;;e--)if(r.node(e).isBlock){a=r.end(e)==r.pos+(r.depth-e),l=r.start(e)==r.pos-(r.depth-e),o=q7(r.node(e-1).contentMatchAt(r.indexAfter(e-1))),i.unshift(a&&o?{type:o}:null),s=e;break}else{if(1==e)return!1;i.unshift(null)}let c=e.tr;(e.selection instanceof I2||e.selection instanceof I6)&&c.deleteSelection();let h=c.mapping.map(r.pos),u=IR(c.doc,h,i.length,i);if(u||(i[0]=o?{type:o}:null,u=IR(c.doc,h,i.length,i)),c.split(h,i.length,i),!a&&l&&r.node(s).type!=o){let e=c.mapping.map(r.before(s)),t=c.doc.resolve(e);o&&r.node(s-1).canReplaceWith(t.index(),t.index()+1,o)&&c.setNodeMarkup(c.mapping.map(r.before(s)),o)}return t&&t(c.scrollIntoView()),!0}),"u">typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"u">typeof os&&os.platform&&os.platform();class $c{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){let{rawCommands:e,editor:t,state:r}=this,{view:n}=t,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,(...e)=>{let r=t(...e)(s);return i.getMeta("preventDispatch")||this.hasCustomState||n.dispatch(i),r}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){let{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o=[],a=!!e,l=e||i.tr,c={...Object.fromEntries(Object.entries(r).map(([e,r])=>[e,(...e)=>{let n=this.buildProps(l,t),i=r(...e)(n);return o.push(i),c}])),run:()=>(a||!t||l.getMeta("preventDispatch")||this.hasCustomState||s.dispatch(l),o.every(e=>!0===e))};return c}createCan(e){let{rawCommands:t,state:r}=this,n=e||r.tr,i=this.buildProps(n,!1);return{...Object.fromEntries(Object.entries(t).map(([e,t])=>[e,(...e)=>t(...e)({...i,dispatch:void 0})])),chain:()=>this.createChain(n,!1)}}buildProps(e,t=!0){let{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o={tr:e,editor:n,view:s,state:$l({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([e,t])=>[e,(...e)=>t(...e)(o)]))}};return o}}class $h{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){let r=this.callbacks[e];return r&&r.forEach(e=>e.apply(this,t)),this}off(e,t){let r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(e=>e!==t):delete this.callbacks[e]),this}once(e,t){let r=(...n)=>{this.off(e,r),t.apply(this,n)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function $u(e,t,r){return void 0===e.config[t]&&e.parent?$u(e.parent,t,r):"function"==typeof e.config[t]?e.config[t].bind({...r,parent:e.parent?$u(e.parent,t,r):null}):e.config[t]}function $d(e){let t=e.filter(e=>"extension"===e.type);return{baseExtensions:t,nodeExtensions:e.filter(e=>"node"===e.type),markExtensions:e.filter(e=>"mark"===e.type)}}function $f(e){let t=[],{nodeExtensions:r,markExtensions:n}=$d(e),i=[...r,...n],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(e=>{let r={name:e.name,options:e.options,storage:e.storage,extensions:i},n=$u(e,"addGlobalAttributes",r);n&&n().forEach(e=>{e.types.forEach(r=>{Object.entries(e.attributes).forEach(([e,n])=>{t.push({type:r,name:e,attribute:{...s,...n}})})})})}),i.forEach(e=>{let r={name:e.name,options:e.options,storage:e.storage},n=$u(e,"addAttributes",r);n&&Object.entries(n()).forEach(([r,n])=>{let i={...s,...n};"function"==typeof(null==i?void 0:i.default)&&(i.default=i.default()),null!=i&&i.isRequired&&(null==i?void 0:i.default)===void 0&&delete i.default,t.push({type:e.name,name:r,attribute:i})})}),t}function $p(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function $m(...e){return e.filter(e=>!!e).reduce((e,t)=>{let r={...e};return Object.entries(t).forEach(([e,t])=>{if(!r[e]){r[e]=t;return}if("class"===e){let n=t?String(t).split(" "):[],i=r[e]?r[e].split(" "):[],s=n.filter(e=>!i.includes(e));r[e]=[...i,...s].join(" ")}else if("style"===e){let n=t?t.split(";").map(e=>e.trim()).filter(Boolean):[],i=r[e]?r[e].split(";").map(e=>e.trim()).filter(Boolean):[],s=new Map;i.forEach(e=>{let[t,r]=e.split(":").map(e=>e.trim());s.set(t,r)}),n.forEach(e=>{let[t,r]=e.split(":").map(e=>e.trim());s.set(t,r)}),r[e]=Array.from(s.entries()).map(([e,t])=>`${e}: ${t}`).join("; ")}else r[e]=t}),r},{})}function $g(e,t){return t.filter(t=>t.type===e.type.name).filter(e=>e.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]}).reduce((e,t)=>$m(e,t),{})}function $y(e){return"function"==typeof e}function $b(e,t,...r){return $y(e)?t?e.bind(t)(...r):e(...r):e}function $v(e,t){return"style"in e?e:{...e,getAttrs:r=>{let n=e.getAttrs?e.getAttrs(r):e.attrs;if(!1===n)return!1;let i=t.reduce((e,t)=>{var n;let i=t.attribute.parseHTML?t.attribute.parseHTML(r):"string"!=typeof(n=r.getAttribute(t.name))?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):"true"===n||"false"!==n&&n;return null==i?e:{...e,[t.name]:i}},{});return{...n,...i}}}}function $x(e){return Object.fromEntries(Object.entries(e).filter(([e,t])=>!("attrs"===e&&function(e={}){return 0===Object.keys(e).length&&e.constructor===Object}(t))&&null!=t))}function $w(e,t){return t.nodes[e]||t.marks[e]||null}function $k(e,t){return Array.isArray(t)?t.some(t=>("string"==typeof t?t:t.name)===e.name):t}function $O(e,t){let r=Ic.fromSchema(t).serializeFragment(e),n=document.implementation.createHTMLDocument().createElement("div");return n.appendChild(r),n.innerHTML}let $S=(e,t=500)=>{let r="",n=e.parentOffset;return e.parent.nodesBetween(Math.max(0,n-t),n,(e,t,i,s)=>{var o,a;let l=(null===(a=(o=e.type.spec).toText)||void 0===a?void 0:a.call(o,{node:e,pos:t,parent:i,index:s}))||e.textContent||"%leaf%";r+=e.isAtom&&!e.isText?l:l.slice(0,Math.max(0,n-t))}),r};function $C(e){return"[object RegExp]"===Object.prototype.toString.call(e)}class $T{constructor(e){this.find=e.find,this.handler=e.handler}}let $A=(e,t)=>{if($C(t))return t.exec(e);let r=t(e);if(!r)return null;let n=[r.text];return n.index=r.index,n.input=e,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n};function $M(e){var t;let{editor:r,from:n,to:i,text:s,rules:o,plugin:a}=e,{view:l}=r;if(l.composing)return!1;let c=l.state.doc.resolve(n);if(c.parent.type.spec.code||null!==(t=c.nodeBefore||c.nodeAfter)&&void 0!==t&&t.marks.find(e=>e.type.spec.code))return!1;let h=!1,u=$S(c)+s;return o.forEach(e=>{if(h)return;let t=$A(u,e.find);if(!t)return;let o=l.state.tr,c=$l({state:l.state,transaction:o}),d={from:n-(t[0].length-s.length),to:i},{commands:f,chain:p,can:m}=new $c({editor:r,state:c});null!==e.handler({state:c,range:d,match:t,commands:f,chain:p,can:m})&&o.steps.length&&(o.setMeta(a,{transform:o,from:n,to:i,text:s}),l.dispatch(o),h=!0)}),h}function $E(e){return"Object"===Object.prototype.toString.call(e).slice(8,-1)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function $N(e,t){let r={...e};return $E(e)&&$E(t)&&Object.keys(t).forEach(n=>{$E(t[n])&&$E(e[n])?r[n]=$N(e[n],t[n]):r[n]=t[n]}),r}class $_{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=$b($u(this,"addOptions",{name:this.name}))),this.storage=$b($u(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new $_(e)}configure(e={}){let t=this.extend({...this.config,addOptions:()=>$N(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){let t=new $_(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=$b($u(t,"addOptions",{name:t.name})),t.storage=$b($u(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){let{tr:r}=e.state,n=e.state.selection.$from;if(n.pos===n.end()){let i=n.marks();if(!i.find(e=>(null==e?void 0:e.type.name)===t.name))return!1;let s=i.find(e=>(null==e?void 0:e.type.name)===t.name);return s&&r.removeStoredMark(s),r.insertText(" ",n.pos),e.view.dispatch(r),!0}return!1}}class $j{constructor(e){this.find=e.find,this.handler=e.handler}}let $D=(e,t,r)=>{if($C(t))return[...e.matchAll(t)];let n=t(e,r);return n?n.map(t=>{let r=[t.text];return r.index=t.index,r.input=e,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),r.push(t.replaceWith)),r}):[]},$R=null,$P=e=>{var t;let r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return null===(t=r.clipboardData)||void 0===t||t.setData("text/html",e),r};class $I{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=$I.resolve(e),this.schema=function(e,t){var r;let n=$f(e),{nodeExtensions:i,markExtensions:s}=$d(e),o=null===(r=i.find(e=>$u(e,"topNode")))||void 0===r?void 0:r.name;return new P8({topNode:o,nodes:Object.fromEntries(i.map(r=>{let i=n.filter(e=>e.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:t},o=$x({...e.reduce((e,t)=>{let n=$u(t,"extendNodeSchema",s);return{...e,...n?n(r):{}}},{}),content:$b($u(r,"content",s)),marks:$b($u(r,"marks",s)),group:$b($u(r,"group",s)),inline:$b($u(r,"inline",s)),atom:$b($u(r,"atom",s)),selectable:$b($u(r,"selectable",s)),draggable:$b($u(r,"draggable",s)),code:$b($u(r,"code",s)),whitespace:$b($u(r,"whitespace",s)),linebreakReplacement:$b($u(r,"linebreakReplacement",s)),defining:$b($u(r,"defining",s)),isolating:$b($u(r,"isolating",s)),attrs:Object.fromEntries(i.map(e=>{var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]}))}),a=$b($u(r,"parseHTML",s));a&&(o.parseDOM=a.map(e=>$v(e,i)));let l=$u(r,"renderHTML",s);l&&(o.toDOM=e=>l({node:e,HTMLAttributes:$g(e,i)}));let c=$u(r,"renderText",s);return c&&(o.toText=c),[r.name,o]})),marks:Object.fromEntries(s.map(r=>{let i=n.filter(e=>e.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:t},o=$x({...e.reduce((e,t)=>{let n=$u(t,"extendMarkSchema",s);return{...e,...n?n(r):{}}},{}),inclusive:$b($u(r,"inclusive",s)),excludes:$b($u(r,"excludes",s)),group:$b($u(r,"group",s)),spanning:$b($u(r,"spanning",s)),code:$b($u(r,"code",s)),attrs:Object.fromEntries(i.map(e=>{var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]}))}),a=$b($u(r,"parseHTML",s));a&&(o.parseDOM=a.map(e=>$v(e,i)));let l=$u(r,"renderHTML",s);return l&&(o.toDOM=e=>l({mark:e,HTMLAttributes:$g(e,i)})),[r.name,o]}))})}(this.extensions,t),this.setupExtensions()}static resolve(e){var t;let r=$I.sort($I.flatten(e)),n=Array.from(new Set((t=r.map(e=>e.name)).filter((e,r)=>t.indexOf(e)!==r)));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(e=>`'${e}'`).join(", ")}]. This can lead to issues.`),r}static flatten(e){return e.map(e=>{let t={name:e.name,options:e.options,storage:e.storage},r=$u(e,"addExtensions",t);return r?[e,...this.flatten(r())]:e}).flat(10)}static sort(e){return e.sort((e,t)=>{let r=$u(e,"priority")||100,n=$u(t,"priority")||100;return r>n?-1:+(r<n)})}get commands(){return this.extensions.reduce((e,t)=>{let r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:$w(t.name,this.schema)},n=$u(t,"addCommands",r);return n?{...e,...n()}:e},{})}get plugins(){let{editor:e}=this,t=$I.sort([...this.extensions].reverse()),r=[],n=[],i=t.map(t=>{let i={name:t.name,options:t.options,storage:t.storage,editor:e,type:$w(t.name,this.schema)},s=[],o=$u(t,"addKeyboardShortcuts",i),a={};if("mark"===t.type&&$u(t,"exitable",i)&&(a.ArrowRight=()=>$_.handleExit({editor:e,mark:t})),o){let t=Object.fromEntries(Object.entries(o()).map(([t,r])=>[t,()=>r({editor:e})]));a={...a,...t}}let l=new zo({props:{handleKeyDown:qQ(a)}});s.push(l);let c=$u(t,"addInputRules",i);$k(t,e.options.enableInputRules)&&c&&r.push(...c());let h=$u(t,"addPasteRules",i);$k(t,e.options.enablePasteRules)&&h&&n.push(...h());let u=$u(t,"addProseMirrorPlugins",i);if(u){let e=u();s.push(...e)}return s}).flat();return[function(e){let{editor:t,rules:r}=e,n=new zo({state:{init:()=>null,apply(e,i,s){let o=e.getMeta(n);if(o)return o;let a=e.getMeta("applyInputRules");return a&&setTimeout(()=>{let{text:e}=a;e="string"==typeof e?e:$O(PM.from(e),s.schema);let{from:i}=a,o=i+e.length;$M({editor:t,from:i,to:o,text:e,rules:r,plugin:n})}),e.selectionSet||e.docChanged?null:i}},props:{handleTextInput:(e,i,s,o)=>$M({editor:t,from:i,to:s,text:o,rules:r,plugin:n}),handleDOMEvents:{compositionend:e=>(setTimeout(()=>{let{$cursor:i}=e.state.selection;i&&$M({editor:t,from:i.pos,to:i.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(e,i){if("Enter"!==i.key)return!1;let{$cursor:s}=e.state.selection;return!!s&&$M({editor:t,from:s.pos,to:s.pos,text:`
`,rules:r,plugin:n})}},isInputRules:!0});return n}({editor:e,rules:r}),...function(e){let{editor:t,rules:r}=e,n=null,i=!1,s=!1,o="u">typeof ClipboardEvent?new ClipboardEvent("paste"):null,a;try{a="u">typeof DragEvent?new DragEvent("drop"):null}catch{a=null}let l=({state:e,from:r,to:n,rule:i,pasteEvt:s})=>{let l=e.tr;if(!(!function(e){let{editor:t,state:r,from:n,to:i,rule:s,pasteEvent:o,dropEvent:a}=e,{commands:l,chain:c,can:h}=new $c({editor:t,state:r}),u=[];return r.doc.nodesBetween(n,i,(e,t)=>{if(!e.isTextblock||e.type.spec.code)return;let d=Math.max(n,t),f=Math.min(i,t+e.content.size);$D(e.textBetween(d-t,f-t,void 0,""),s.find,o).forEach(e=>{if(void 0===e.index)return;let t=d+e.index+1,n=t+e[0].length,i={from:r.tr.mapping.map(t),to:r.tr.mapping.map(n)},f=s.handler({state:r,range:i,match:e,commands:l,chain:c,can:h,pasteEvent:o,dropEvent:a});u.push(f)})}),u.every(e=>null!==e)}({editor:t,state:$l({state:e,transaction:l}),from:Math.max(r-1,0),to:n.b-1,rule:i,pasteEvent:s,dropEvent:a})||!l.steps.length)){try{a="u">typeof DragEvent?new DragEvent("drop"):null}catch{a=null}return o="u">typeof ClipboardEvent?new ClipboardEvent("paste"):null,l}};return r.map(e=>new zo({view(e){let r=r=>{var i;(n=null!==(i=e.dom.parentElement)&&void 0!==i&&i.contains(r.target)?e.dom.parentElement:null)&&($R=t)},i=()=>{$R&&($R=null)};return window.addEventListener("dragstart",r),window.addEventListener("dragend",i),{destroy(){window.removeEventListener("dragstart",r),window.removeEventListener("dragend",i)}}},props:{handleDOMEvents:{drop:(e,t)=>{if(s=n===e.dom.parentElement,a=t,!s){let e=$R;e&&setTimeout(()=>{let t=e.state.selection;t&&e.commands.deleteRange({from:t.from,to:t.to})},10)}return!1},paste:(e,t)=>{var r;let n=null===(r=t.clipboardData)||void 0===r?void 0:r.getData("text/html");return o=t,i=!!(null!=n&&n.includes("data-pm-slice")),!1}}},appendTransaction:(t,r,n)=>{let a=t[0],c="paste"===a.getMeta("uiEvent")&&!i,h="drop"===a.getMeta("uiEvent")&&!s,u=a.getMeta("applyPasteRules"),d=!!u;if(!c&&!h&&!d)return;if(d){let{text:t}=u;t="string"==typeof t?t:$O(PM.from(t),n.schema);let{from:r}=u,i=r+t.length;return l({rule:e,state:n,from:r,to:{b:i},pasteEvt:$P(t)})}let f=r.doc.content.findDiffStart(n.doc.content),p=r.doc.content.findDiffEnd(n.doc.content);if(!("number"!=typeof f||!p||f===p.b))return l({rule:e,state:n,from:f,to:p,pasteEvt:o})}}))}({editor:e,rules:n}),...i]}get attributes(){return $f(this.extensions)}get nodeViews(){let{editor:e}=this,{nodeExtensions:t}=$d(this.extensions);return Object.fromEntries(t.filter(e=>!!$u(e,"addNodeView")).map(t=>{let r=this.attributes.filter(e=>e.type===t.name),n={name:t.name,options:t.options,storage:t.storage,editor:e,type:$p(t.name,this.schema)},i=$u(t,"addNodeView",n);return i?[t.name,(n,s,o,a,l)=>{let c=$g(n,r);return i()({node:n,view:s,getPos:o,decorations:a,innerDecorations:l,editor:e,extension:t,HTMLAttributes:c})}]:[]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;let r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:$w(e.name,this.schema)};"mark"===e.type&&(null===(t=$b($u(e,"keepOnSplit",r)))||void 0===t||t)&&this.splittableMarks.push(e.name);let n=$u(e,"onBeforeCreate",r),i=$u(e,"onCreate",r),s=$u(e,"onUpdate",r),o=$u(e,"onSelectionUpdate",r),a=$u(e,"onTransaction",r),l=$u(e,"onFocus",r),c=$u(e,"onBlur",r),h=$u(e,"onDestroy",r);n&&this.editor.on("beforeCreate",n),i&&this.editor.on("create",i),s&&this.editor.on("update",s),o&&this.editor.on("selectionUpdate",o),a&&this.editor.on("transaction",a),l&&this.editor.on("focus",l),c&&this.editor.on("blur",c),h&&this.editor.on("destroy",h)})}}class $z{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=$b($u(this,"addOptions",{name:this.name}))),this.storage=$b($u(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new $z(e)}configure(e={}){let t=this.extend({...this.config,addOptions:()=>$N(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){let t=new $z({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=$b($u(t,"addOptions",{name:t.name})),t.storage=$b($u(t,"addStorage",{name:t.name,options:t.options})),t}}function $L(e,t,r){let{from:n,to:i}=t,{blockSeparator:s=`

`,textSerializers:o={}}=r||{},a="";return e.nodesBetween(n,i,(e,r,l,c)=>{var h;e.isBlock&&r>n&&(a+=s);let u=null==o?void 0:o[e.type.name];if(u)return l&&(a+=u({node:e,pos:r,parent:l,index:c,range:t})),!1;e.isText&&(a+=null===(h=null==e?void 0:e.text)||void 0===h?void 0:h.slice(Math.max(n,r)-r,i-r))}),a}function $q(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}let $$=$z.create({name:"clipboardTextSerializer",addOptions:()=>({blockSeparator:void 0}),addProseMirrorPlugins(){return[new zo({key:new zc("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{let{editor:e}=this,{state:t,schema:r}=e,{doc:n,selection:i}=t,{ranges:s}=i,o=Math.min(...s.map(e=>e.$from.pos)),a=Math.max(...s.map(e=>e.$to.pos)),l=$q(r);return $L(n,{from:o,to:a},{...void 0!==this.options.blockSeparator?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}});function $B(e,t,r={strict:!0}){let n=Object.keys(t);return!n.length||n.every(n=>r.strict?t[n]===e[n]:$C(t[n])?t[n].test(e[n]):t[n]===e[n])}function $F(e,t,r={}){return e.find(e=>e.type===t&&$B(Object.fromEntries(Object.keys(r).map(t=>[t,e.attrs[t]])),r))}function $Q(e,t,r={}){return!!$F(e,t,r)}function $V(e,t,r){var n;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if(i.node&&i.node.marks.some(e=>e.type===t)||(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(e=>e.type===t)||(r=r||(null===(n=i.node.marks[0])||void 0===n?void 0:n.attrs),!$F([...i.node.marks],t,r)))return;let s=i.index,o=e.start()+i.offset,a=s+1,l=o+i.node.nodeSize;for(;s>0&&$Q([...e.parent.child(s-1).marks],t,r);)s-=1,o-=e.parent.child(s).nodeSize;for(;a<e.parent.childCount&&$Q([...e.parent.child(a).marks],t,r);)l+=e.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function $H(e,t){if("string"==typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function $W(e){return e instanceof I2}function $U(e=0,t=0,r=0){return Math.min(Math.max(e,t),r)}function $G(e,t=null){if(!t)return null;let r=IJ.atStart(e),n=IJ.atEnd(e);if("start"===t||!0===t)return r;if("end"===t)return n;let i=r.from,s=n.to;return"all"===t?I2.create(e,$U(0,i,s),$U(e.content.size,i,s)):I2.create(e,$U(t,i,s),$U(t,i,s))}function $X(){return"Android"===navigator.platform||/android/i.test(navigator.userAgent)}function $Y(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}let $Z=e=>{let t=e.childNodes;for(let r=t.length-1;r>=0;r-=1){let n=t[r];3===n.nodeType&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?e.removeChild(n):1===n.nodeType&&$Z(n)}return e};function $J(e){let t=`<body>${e}</body>`;return $Z(new window.DOMParser().parseFromString(t,"text/html").body)}function $K(e,t,r){if(e instanceof PU||e instanceof PM)return e;r={slice:!0,parseOptions:{},...r};let n="object"==typeof e&&null!==e,i="string"==typeof e;if(n)try{if(Array.isArray(e)&&e.length>0)return PM.fromArray(e.map(e=>t.nodeFromJSON(e)));let n=t.nodeFromJSON(e);return r.errorOnInvalidContent&&n.check(),n}catch(n){if(r.errorOnInvalidContent)throw Error("[tiptap error]: Invalid JSON content",{cause:n});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",n),$K("",t,r)}if(i){if(r.errorOnInvalidContent){let n=!1,i="",s=new P8({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:e=>(n=!0,i="string"==typeof e?e:e.outerHTML,null)}]}})});if(r.slice?Ie.fromSchema(s).parseSlice($J(e),r.parseOptions):Ie.fromSchema(s).parse($J(e),r.parseOptions),r.errorOnInvalidContent&&n)throw Error("[tiptap error]: Invalid HTML content",{cause:Error(`Invalid element found: ${i}`)})}let n=Ie.fromSchema(t);return r.slice?n.parseSlice($J(e),r.parseOptions).content:n.parse($J(e),r.parseOptions)}return $K("",t,r)}let $0=e=>!("type"in e);function $1(){return"u">typeof navigator&&/Mac/.test(navigator.platform)}function $2(e,t,r={}){let{from:n,to:i,empty:s}=e.selection,o=t?$p(t,e.schema):null,a=[];e.doc.nodesBetween(n,i,(e,t)=>{if(e.isText)return;let r=Math.max(n,t),s=Math.min(i,t+e.nodeSize);a.push({node:e,from:r,to:s})});let l=i-n,c=a.filter(e=>!o||o.name===e.node.type.name).filter(e=>$B(e.node.attrs,r,{strict:!1}));return s?!!c.length:c.reduce((e,t)=>e+t.to-t.from,0)>=l}function $4(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function $5(e,t){let r="string"==typeof t?[t]:t;return Object.keys(e).reduce((t,n)=>(r.includes(n)||(t[n]=e[n]),t),{})}function $3(e,t,r={},n={}){return $K(e,t,{slice:!1,parseOptions:r,errorOnInvalidContent:n.errorOnInvalidContent})}function $6(e,t){let r=$H(t,e.schema),{from:n,to:i,empty:s}=e.selection,o=[];s?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(n,i,e=>{o.push(...e.marks)});let a=o.find(e=>e.type.name===r.name);return a?{...a.attrs}:{}}function $7(e,t){for(let r=e.depth;r>0;r-=1){let n=e.node(r);if(t(n))return{pos:r>0?e.before(r):0,start:e.start(r),depth:r,node:n}}}function $8(e){return t=>$7(t.$from,e)}function $9(e,t,r){let n=[];return e===t?r.resolve(e).marks().forEach(t=>{let i=$V(r.resolve(e),t.type);i&&n.push({mark:t,...i})}):r.nodesBetween(e,t,(e,t)=>{e&&(null==e?void 0:e.nodeSize)!==void 0&&n.push(...e.marks.map(r=>({from:t,to:t+e.nodeSize,mark:r})))}),n}function Be(e,t,r){return Object.fromEntries(Object.entries(r).filter(([r])=>{let n=e.find(e=>e.type===t&&e.name===r);return!!n&&n.attribute.keepOnSplit}))}function Bt(e,t,r={}){let{empty:n,ranges:i}=e.selection,s=t?$H(t,e.schema):null;if(n)return!!(e.storedMarks||e.selection.$from.marks()).filter(e=>!s||s.name===e.type.name).find(e=>$B(e.attrs,r,{strict:!1}));let o=0,a=[];if(i.forEach(({$from:t,$to:r})=>{let n=t.pos,i=r.pos;e.doc.nodesBetween(n,i,(e,t)=>{if(!e.isText&&!e.marks.length)return;let r=Math.max(n,t),s=Math.min(i,t+e.nodeSize);o+=s-r,a.push(...e.marks.map(e=>({mark:e,from:r,to:s})))})}),0===o)return!1;let l=a.filter(e=>!s||s.name===e.mark.type.name).filter(e=>$B(e.mark.attrs,r,{strict:!1})).reduce((e,t)=>e+t.to-t.from,0),c=a.filter(e=>!s||e.mark.type!==s&&e.mark.type.excludes(s)).reduce((e,t)=>e+t.to-t.from,0);return(l>0?l+c:l)>=o}function Br(e,t){let{nodeExtensions:r}=$d(t),n=r.find(t=>t.name===e);if(!n)return!1;let i={name:n.name,options:n.options,storage:n.storage},s=$b($u(n,"group",i));return"string"==typeof s&&s.split(" ").includes("list")}function Bn(e,{checkChildren:t=!0,ignoreWhitespace:r=!1}={}){var n;if(r){if("hardBreak"===e.type.name)return!0;if(e.isText)return/^\s*$/m.test(null!==(n=e.text)&&void 0!==n?n:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(0===e.content.childCount)return!0;if(t){let n=!0;return e.content.forEach(e=>{!1!==n&&(Bn(e,{ignoreWhitespace:r,checkChildren:t})||(n=!1))}),n}return!1}function Bi(e,t){let r=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(r){let n=r.filter(e=>null==t?void 0:t.includes(e.type.name));e.tr.ensureMarks(n)}}let Bs=(e,t)=>{let r=$8(e=>e.type===t)(e.selection);if(!r)return!0;let n=e.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(void 0===n)return!0;let i=e.doc.nodeAt(n);return r.node.type===(null==i?void 0:i.type)&&IP(e.doc,r.pos)&&e.join(r.pos),!0},Bo=(e,t)=>{let r=$8(e=>e.type===t)(e.selection);if(!r)return!0;let n=e.doc.resolve(r.start).after(r.depth);if(void 0===n)return!0;let i=e.doc.nodeAt(n);return r.node.type===(null==i?void 0:i.type)&&IP(e.doc,n)&&e.join(n),!0};var Ba=Object.freeze({__proto__:null,blur:()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var r;e.isDestroyed||(t.dom.blur(),null===(r=null==window?void 0:window.getSelection())||void 0===r||r.removeAllRanges())}),!0),clearContent:(e=!1)=>({commands:t})=>t.setContent("",e),clearNodes:()=>({state:e,tr:t,dispatch:r})=>{let{selection:n}=t,{ranges:i}=n;return r&&i.forEach(({$from:r,$to:n})=>{e.doc.nodesBetween(r.pos,n.pos,(e,r)=>{if(e.type.isText)return;let{doc:n,mapping:i}=t,s=n.resolve(i.map(r)),o=n.resolve(i.map(r+e.nodeSize)),a=s.blockRange(o);if(!a)return;let l=IE(a);if(e.type.isTextblock){let{defaultType:e}=s.parent.contentMatchAt(s.index());t.setNodeMarkup(a.start,e)}(l||0===l)&&t.lift(a,l)})}),!0},command:e=>t=>e(t),createParagraphNear:()=>({state:e,dispatch:t})=>q9(e,t),cut:(e,t)=>({editor:r,tr:n})=>{let{state:i}=r,s=i.doc.slice(e.from,e.to);n.deleteRange(e.from,e.to);let o=n.mapping.map(t);return n.insert(o,s.content),n.setSelection(new I2(n.doc.resolve(o-1))),!0},deleteCurrentNode:()=>({tr:e,dispatch:t})=>{let{selection:r}=e,n=r.$anchor.node();if(n.content.size>0)return!1;let i=e.selection.$anchor;for(let r=i.depth;r>0;r-=1)if(i.node(r).type===n.type){if(t){let t=i.before(r),n=i.after(r);e.delete(t,n).scrollIntoView()}return!0}return!1},deleteNode:e=>({tr:t,state:r,dispatch:n})=>{let i=$p(e,r.schema),s=t.selection.$anchor;for(let e=s.depth;e>0;e-=1)if(s.node(e).type===i){if(n){let r=s.before(e),n=s.after(e);t.delete(r,n).scrollIntoView()}return!0}return!1},deleteRange:e=>({tr:t,dispatch:r})=>{let{from:n,to:i}=e;return r&&t.delete(n,i),!0},deleteSelection:()=>({state:e,dispatch:t})=>qV(e,t),enter:()=>({commands:e})=>e.keyboardShortcut("Enter"),exitCode:()=>({state:e,dispatch:t})=>q8(e,t),extendMarkRange:(e,t={})=>({tr:r,state:n,dispatch:i})=>{let s=$H(e,n.schema),{doc:o,selection:a}=r,{$from:l,from:c,to:h}=a;if(i){let e=$V(l,s,t);if(e&&e.from<=c&&e.to>=h){let t=I2.create(o,e.from,e.to);r.setSelection(t)}}return!0},first:e=>t=>{let r="function"==typeof e?e(t):e;for(let e=0;e<r.length;e+=1)if(r[e](t))return!0;return!1},focus:(e=null,t={})=>({editor:r,view:n,tr:i,dispatch:s})=>{t={scrollIntoView:!0,...t};let o=()=>{($Y()||$X())&&n.dom.focus(),requestAnimationFrame(()=>{r.isDestroyed||(n.focus(),null!=t&&t.scrollIntoView&&r.commands.scrollIntoView())})};if(n.hasFocus()&&null===e||!1===e)return!0;if(s&&null===e&&!$W(r.state.selection))return o(),!0;let a=$G(i.doc,e)||r.state.selection,l=r.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},forEach:(e,t)=>r=>e.every((e,n)=>t(e,{...r,index:n})),insertContent:(e,t)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},e,t),insertContentAt:(e,t,r)=>({tr:n,dispatch:i,editor:s})=>{var o;if(i){let i,a;r={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};try{i=$K(t,s.schema,{parseOptions:{preserveWhitespace:"full",...r.parseOptions},errorOnInvalidContent:null!==(o=r.errorOnInvalidContent)&&void 0!==o?o:s.options.enableContentCheck})}catch(e){return s.emit("contentError",{editor:s,error:e,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}="number"==typeof e?{from:e,to:e}:{from:e.from,to:e.to},h=!0,u=!0;if(($0(i)?i:[i]).forEach(e=>{e.check(),h=!!h&&e.isText&&0===e.marks.length,u=!!u&&e.isBlock}),l===c&&u){let{parent:e}=n.doc.resolve(l);!e.isTextblock||e.type.spec.code||e.childCount||(l-=1,c+=1)}if(h){if(Array.isArray(t))a=t.map(e=>e.text||"").join("");else if(t instanceof PM){let e="";t.forEach(t=>{t.text&&(e+=t.text)}),a=e}else a="object"==typeof t&&t&&t.text?t.text:t;n.insertText(a,l,c)}else a=i,n.replaceWith(l,c,a);r.updateSelection&&function(e,t,r){let n=e.steps.length-1;if(n<t)return;let i=e.steps[n];if(!(i instanceof IC||i instanceof IT))return;let s=e.mapping.maps[n],o=0;s.forEach((e,t,r,n)=>{0===o&&(o=n)}),e.setSelection(IJ.near(e.doc.resolve(o),-1))}(n,n.steps.length-1,0),r.applyInputRules&&n.setMeta("applyInputRules",{from:l,text:a}),r.applyPasteRules&&n.setMeta("applyPasteRules",{from:l,text:a})}return!0},joinBackward:()=>({state:e,dispatch:t})=>qW(e,t),joinDown:()=>({state:e,dispatch:t})=>q5(e,t),joinForward:()=>({state:e,dispatch:t})=>q0(e,t),joinItemBackward:()=>({state:e,dispatch:t,tr:r})=>{try{let n=Iz(e.doc,e.selection.$from.pos,-1);return null!=n&&(r.join(n,2),t&&t(r),!0)}catch{return!1}},joinItemForward:()=>({state:e,dispatch:t,tr:r})=>{try{let n=Iz(e.doc,e.selection.$from.pos,1);return null!=n&&(r.join(n,2),t&&t(r),!0)}catch{return!1}},joinTextblockBackward:()=>({state:e,dispatch:t})=>qU(e,t),joinTextblockForward:()=>({state:e,dispatch:t})=>qG(e,t),joinUp:()=>({state:e,dispatch:t})=>q4(e,t),keyboardShortcut:e=>({editor:t,view:r,tr:n,dispatch:i})=>{let s=(function(e){let t,r,n,i;let s=e.split(/-(?!$)/),o=s[s.length-1];"Space"===o&&(o=" ");for(let e=0;e<s.length-1;e+=1){let o=s[e];if(/^(cmd|meta|m)$/i.test(o))i=!0;else if(/^a(lt)?$/i.test(o))t=!0;else if(/^(c|ctrl|control)$/i.test(o))r=!0;else if(/^s(hift)?$/i.test(o))n=!0;else if(/^mod$/i.test(o))$Y()||$1()?i=!0:r=!0;else throw Error(`Unrecognized modifier name: ${o}`)}return t&&(o=`Alt-${o}`),r&&(o=`Ctrl-${o}`),i&&(o=`Meta-${o}`),n&&(o=`Shift-${o}`),o})(e).split(/-(?!$)/),o=s.find(e=>!["Alt","Ctrl","Meta","Shift"].includes(e)),a=new KeyboardEvent("keydown",{key:"Space"===o?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{r.someProp("handleKeyDown",e=>e(r,a))});return null==l||l.steps.forEach(e=>{let t=e.map(n.mapping);t&&i&&n.maybeStep(t)}),!0},lift:(e,t={})=>({state:r,dispatch:n})=>{let i=$p(e,r.schema);return!!$2(r,i,t)&&q3(r,n)},liftEmptyBlock:()=>({state:e,dispatch:t})=>$e(e,t),liftListItem:e=>({state:t,dispatch:r})=>(function(e){return function(t,r){let{$from:n,$to:i}=t.selection,s=n.blockRange(i,t=>t.childCount>0&&t.firstChild.type==e);return!!s&&(!r||(n.node(s.depth-1).type==e?function(e,t,r,n){let i=e.tr,s=n.end,o=n.$to.end(n.depth);s<o&&(i.step(new IT(s-1,o,s,o,new PR(PM.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new PH(i.doc.resolve(n.$from.pos),i.doc.resolve(o),n.depth));let a=IE(n);if(null==a)return!1;i.lift(n,a);let l=i.mapping.map(s,-1)-1;return IP(i.doc,l)&&i.join(l),t(i.scrollIntoView()),!0}(t,r,e,s):function(e,t,r){let n=e.tr,i=r.parent;for(let e=r.end,t=r.endIndex-1,s=r.startIndex;t>s;t--)e-=i.child(t).nodeSize,n.delete(e-1,e+1);let s=n.doc.resolve(r.start),o=s.nodeAfter;if(n.mapping.map(r.end)!=r.start+s.nodeAfter.nodeSize)return!1;let a=0==r.startIndex,l=r.endIndex==i.childCount,c=s.node(-1),h=s.index(-1);if(!c.canReplace(h+ +!a,h+1,o.content.append(l?PM.empty:PM.from(i))))return!1;let u=s.pos,d=u+o.nodeSize;return n.step(new IT(u-+!!a,d+ +!!l,u+1,d-1,new PR((a?PM.empty:PM.from(i.copy(PM.empty))).append(l?PM.empty:PM.from(i.copy(PM.empty))),+!a,+!l),+!a)),t(n.scrollIntoView()),!0}(t,r,s)))}})($p(e,t.schema))(t,r),newlineInCode:()=>({state:e,dispatch:t})=>q6(e,t),resetAttributes:(e,t)=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null,a=$4("string"==typeof e?e:e.name,n.schema);return!!a&&("node"===a&&(s=$p(e,n.schema)),"mark"===a&&(o=$H(e,n.schema)),i&&r.selection.ranges.forEach(e=>{n.doc.nodesBetween(e.$from.pos,e.$to.pos,(e,n)=>{s&&s===e.type&&r.setNodeMarkup(n,void 0,$5(e.attrs,t)),o&&e.marks.length&&e.marks.forEach(i=>{o===i.type&&r.addMark(n,n+e.nodeSize,o.create($5(i.attrs,t)))})})}),!0)},scrollIntoView:()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),selectAll:()=>({tr:e,dispatch:t})=>{if(t){let t=new I6(e.doc);e.setSelection(t)}return!0},selectNodeBackward:()=>({state:e,dispatch:t})=>qZ(e,t),selectNodeForward:()=>({state:e,dispatch:t})=>q1(e,t),selectParentNode:()=>({state:e,dispatch:t})=>$t(e,t),selectTextblockEnd:()=>({state:e,dispatch:t})=>$s(e,t),selectTextblockStart:()=>({state:e,dispatch:t})=>$i(e,t),setContent:(e,t=!1,r={},n={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{var l,c;let{doc:h}=s;if("full"!==r.preserveWhitespace){let a=$3(e,i.schema,r,{errorOnInvalidContent:null!==(l=n.errorOnInvalidContent)&&void 0!==l?l:i.options.enableContentCheck});return o&&s.replaceWith(0,h.content.size,a).setMeta("preventUpdate",!t),!0}return o&&s.setMeta("preventUpdate",!t),a.insertContentAt({from:0,to:h.content.size},e,{parseOptions:r,errorOnInvalidContent:null!==(c=n.errorOnInvalidContent)&&void 0!==c?c:i.options.enableContentCheck})},setMark:(e,t={})=>({tr:r,state:n,dispatch:i})=>{let{selection:s}=r,{empty:o,ranges:a}=s,l=$H(e,n.schema);if(i){if(o){let e=$6(n,l);r.addStoredMark(l.create({...e,...t}))}else a.forEach(e=>{let i=e.$from.pos,s=e.$to.pos;n.doc.nodesBetween(i,s,(e,n)=>{let o=Math.max(n,i),a=Math.min(n+e.nodeSize,s);e.marks.find(e=>e.type===l)?e.marks.forEach(e=>{l===e.type&&r.addMark(o,a,l.create({...e.attrs,...t}))}):r.addMark(o,a,l.create(t))})})}return function(e,t,r){var n;let{selection:i}=t,s=null;if($W(i)&&(s=i.$cursor),s){let t=null!==(n=e.storedMarks)&&void 0!==n?n:s.marks();return!!r.isInSet(t)||!t.some(e=>e.type.excludes(r))}let{ranges:o}=i;return o.some(({$from:t,$to:n})=>{let i=0===t.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(r);return e.doc.nodesBetween(t.pos,n.pos,(e,t,n)=>{if(i)return!1;if(e.isInline){let t=!n||n.type.allowsMarkType(r),s=!!r.isInSet(e.marks)||!e.marks.some(e=>e.type.excludes(r));i=t&&s}return!i}),i})}(n,r,l)},setMeta:(e,t)=>({tr:r})=>(r.setMeta(e,t),!0),setNode:(e,t={})=>({state:r,dispatch:n,chain:i})=>{let s;let o=$p(e,r.schema);return r.selection.$anchor.sameParent(r.selection.$head)&&(s=r.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:e})=>!!$o(o,{...s,...t})(r)||e.clearNodes()).command(({state:e})=>$o(o,{...s,...t})(e,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection:e=>({tr:t,dispatch:r})=>{if(r){let{doc:r}=t,n=$U(e,0,r.content.size),i=I5.create(r,n);t.setSelection(i)}return!0},setTextSelection:e=>({tr:t,dispatch:r})=>{if(r){let{doc:r}=t,{from:n,to:i}="number"==typeof e?{from:e,to:e}:e,s=I2.atStart(r).from,o=I2.atEnd(r).to,a=$U(n,s,o),l=$U(i,s,o),c=I2.create(r,a,l);t.setSelection(c)}return!0},sinkListItem:e=>({state:t,dispatch:r})=>(function(e){return function(t,r){let{$from:n,$to:i}=t.selection,s=n.blockRange(i,t=>t.childCount>0&&t.firstChild.type==e);if(!s)return!1;let o=s.startIndex;if(0==o)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=e)return!1;if(r){let n=l.lastChild&&l.lastChild.type==a.type,i=PM.from(n?e.create():null),o=new PR(PM.from(e.create(null,PM.from(a.type.create(null,i)))),n?3:1,0),c=s.start,h=s.end;r(t.tr.step(new IT(c-(n?3:1),h,c,h,o,1,!0)).scrollIntoView())}return!0}})($p(e,t.schema))(t,r),splitBlock:({keepMarks:e=!0}={})=>({tr:t,state:r,dispatch:n,editor:i})=>{let{selection:s,doc:o}=t,{$from:a,$to:l}=s,c=Be(i.extensionManager.attributes,a.node().type.name,a.node().attrs);if(s instanceof I5&&s.node.isBlock)return!!(a.parentOffset&&IR(o,a.pos))&&(n&&(e&&Bi(r,i.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;let h=l.parentOffset===l.parent.content.size,u=0===a.depth?void 0:function(e){for(let t=0;t<e.edgeCount;t+=1){let{type:r}=e.edge(t);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}(a.node(-1).contentMatchAt(a.indexAfter(-1))),d=h&&u?[{type:u,attrs:c}]:void 0,f=IR(t.doc,t.mapping.map(a.pos),1,d);if(!d&&!f&&IR(t.doc,t.mapping.map(a.pos),1,u?[{type:u}]:void 0)&&(f=!0,d=u?[{type:u,attrs:c}]:void 0),n){if(f&&(s instanceof I2&&t.deleteSelection(),t.split(t.mapping.map(a.pos),1,d),u&&!h&&!a.parentOffset&&a.parent.type!==u)){let e=t.mapping.map(a.before()),r=t.doc.resolve(e);a.node(-1).canReplaceWith(r.index(),r.index()+1,u)&&t.setNodeMarkup(t.mapping.map(a.before()),u)}e&&Bi(r,i.extensionManager.splittableMarks),t.scrollIntoView()}return f},splitListItem:(e,t={})=>({tr:r,state:n,dispatch:i,editor:s})=>{var o;let a=$p(e,n.schema),{$from:l,$to:c}=n.selection,h=n.selection.node;if(h&&h.isBlock||l.depth<2||!l.sameParent(c))return!1;let u=l.node(-1);if(u.type!==a)return!1;let d=s.extensionManager.attributes;if(0===l.parent.content.size&&l.node(-1).childCount===l.indexAfter(-1)){if(2===l.depth||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let e=PM.empty,n=l.index(-1)?1:l.index(-2)?2:3;for(let t=l.depth-n;t>=l.depth-3;t-=1)e=PM.from(l.node(t).copy(e));let i=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,s={...Be(d,l.node().type.name,l.node().attrs),...t},c=(null===(o=a.contentMatch.defaultType)||void 0===o?void 0:o.createAndFill(s))||void 0;e=e.append(PM.from(a.createAndFill(null,c)||void 0));let h=l.before(l.depth-(n-1));r.replace(h,l.after(-i),new PR(e,4-n,0));let u=-1;r.doc.nodesBetween(h,r.doc.content.size,(e,t)=>{if(u>-1)return!1;e.isTextblock&&0===e.content.size&&(u=t+1)}),u>-1&&r.setSelection(I2.near(r.doc.resolve(u))),r.scrollIntoView()}return!0}let f=c.pos===l.end()?u.contentMatchAt(0).defaultType:null,p={...Be(d,u.type.name,u.attrs),...t},m={...Be(d,l.node().type.name,l.node().attrs),...t};r.delete(l.pos,c.pos);let g=f?[{type:a,attrs:p},{type:f,attrs:m}]:[{type:a,attrs:p}];if(!IR(r.doc,l.pos,2))return!1;if(i){let{selection:e,storedMarks:t}=n,{splittableMarks:o}=s.extensionManager,a=t||e.$to.parentOffset&&e.$from.marks();if(r.split(l.pos,2,g).scrollIntoView(),!a||!i)return!0;let c=a.filter(e=>o.includes(e.type.name));r.ensureMarks(c)}return!0},toggleList:(e,t,r,n={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:h})=>{let{extensions:u,splittableMarks:d}=i.extensionManager,f=$p(e,o.schema),p=$p(t,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:b}=m,v=y.blockRange(b),x=g||m.$to.parentOffset&&m.$from.marks();if(!v)return!1;let w=$8(e=>Br(e.type.name,u))(m);if(v.depth>=1&&w&&v.depth-w.depth<=1){if(w.node.type===f)return c.liftListItem(p);if(Br(w.node.type.name,u)&&f.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,f),!0)).command(()=>Bs(s,f)).command(()=>Bo(s,f)).run()}return r&&x&&a?l().command(()=>{let e=h().wrapInList(f,n),t=x.filter(e=>d.includes(e.type.name));return s.ensureMarks(t),!!e||c.clearNodes()}).wrapInList(f,n).command(()=>Bs(s,f)).command(()=>Bo(s,f)).run():l().command(()=>!!h().wrapInList(f,n)||c.clearNodes()).wrapInList(f,n).command(()=>Bs(s,f)).command(()=>Bo(s,f)).run()},toggleMark:(e,t={},r={})=>({state:n,commands:i})=>{let{extendEmptyMarkRange:s=!1}=r,o=$H(e,n.schema);return Bt(n,o,t)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,t)},toggleNode:(e,t,r={})=>({state:n,commands:i})=>{let s;let o=$p(e,n.schema),a=$p(t,n.schema),l=$2(n,o,r);return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),l?i.setNode(a,s):i.setNode(o,{...s,...r})},toggleWrap:(e,t={})=>({state:r,commands:n})=>{let i=$p(e,r.schema);return $2(r,i,t)?n.lift(i):n.wrapIn(i,t)},undoInputRule:()=>({state:e,dispatch:t})=>{let r=e.plugins;for(let n=0;n<r.length;n+=1){let i;let s=r[n];if(s.spec.isInputRules&&(i=s.getState(e))){if(t){let t=e.tr,r=i.transform;for(let e=r.steps.length-1;e>=0;e-=1)t.step(r.steps[e].invert(r.docs[e]));if(i.text){let r=t.doc.resolve(i.from).marks();t.replaceWith(i.from,i.to,e.schema.text(i.text,r))}else t.delete(i.from,i.to)}return!0}}return!1},unsetAllMarks:()=>({tr:e,dispatch:t})=>{let{selection:r}=e,{empty:n,ranges:i}=r;return n||t&&i.forEach(t=>{e.removeMark(t.$from.pos,t.$to.pos)}),!0},unsetMark:(e,t={})=>({tr:r,state:n,dispatch:i})=>{var s;let{extendEmptyMarkRange:o=!1}=t,{selection:a}=r,l=$H(e,n.schema),{$from:c,empty:h,ranges:u}=a;if(!i)return!0;if(h&&o){let{from:e,to:t}=a,n=null===(s=c.marks().find(e=>e.type===l))||void 0===s?void 0:s.attrs,i=$V(c,l,n);i&&(e=i.from,t=i.to),r.removeMark(e,t,l)}else u.forEach(e=>{r.removeMark(e.$from.pos,e.$to.pos,l)});return r.removeStoredMark(l),!0},updateAttributes:(e,t={})=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null,a=$4("string"==typeof e?e:e.name,n.schema);return!!a&&("node"===a&&(s=$p(e,n.schema)),"mark"===a&&(o=$H(e,n.schema)),i&&r.selection.ranges.forEach(e=>{let i,a,l,c;let h=e.$from.pos,u=e.$to.pos;r.selection.empty?n.doc.nodesBetween(h,u,(e,t)=>{s&&s===e.type&&(l=Math.max(t,h),c=Math.min(t+e.nodeSize,u),i=t,a=e)}):n.doc.nodesBetween(h,u,(e,n)=>{n<h&&s&&s===e.type&&(l=Math.max(n,h),c=Math.min(n+e.nodeSize,u),i=n,a=e),n>=h&&n<=u&&(s&&s===e.type&&r.setNodeMarkup(n,void 0,{...e.attrs,...t}),o&&e.marks.length&&e.marks.forEach(i=>{if(o===i.type){let s=Math.max(n,h),a=Math.min(n+e.nodeSize,u);r.addMark(s,a,o.create({...i.attrs,...t}))}}))}),a&&(void 0!==i&&r.setNodeMarkup(i,void 0,{...a.attrs,...t}),o&&a.marks.length&&a.marks.forEach(e=>{o===e.type&&r.addMark(l,c,o.create({...e.attrs,...t}))}))}),!0)},wrapIn:(e,t={})=>({state:r,dispatch:n})=>(function(e,t=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s),a=o&&IN(o,e,t);return!!a&&(n&&n(r.tr.wrap(o,a).scrollIntoView()),!0)}})($p(e,r.schema),t)(r,n),wrapInList:(e,t={})=>({state:r,dispatch:n})=>(function(e,t=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s);if(!o)return!1;let a=n?r.tr:null;return!!function(e,t,r,n=null){let i=!1,s=t,o=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(r)&&0==t.startIndex){if(0==t.$from.index(t.depth-1))return!1;let e=o.resolve(t.start-2);s=new PH(e,e,t.depth),t.endIndex<t.parent.childCount&&(t=new PH(t.$from,o.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let a=IN(s,r,n,t);return!!a&&(e&&function(e,t,r,n,i){let s=PM.empty;for(let e=r.length-1;e>=0;e--)s=PM.from(r[e].type.create(r[e].attrs,s));e.step(new IT(t.start-2*!!n,t.end,t.start,t.end,new PR(s,0,0),r.length,!0));let o=0;for(let e=0;e<r.length;e++)r[e].type==i&&(o=e+1);let a=r.length-o,l=t.start+r.length-2*!!n,c=t.parent;for(let r=t.startIndex,n=t.endIndex,i=!0;r<n;r++,i=!1)!i&&IR(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=c.child(r).nodeSize}(e,t,a,i,r),!0)}(a,o,e,t)&&(n&&n(a.scrollIntoView()),!0)}})($p(e,r.schema),t)(r,n)});let Bl=$z.create({name:"commands",addCommands:()=>({...Ba})}),Bc=$z.create({name:"drop",addProseMirrorPlugins(){return[new zo({key:new zc("tiptapDrop"),props:{handleDrop:(e,t,r,n)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:r,moved:n})}}})]}}),Bh=$z.create({name:"editable",addProseMirrorPlugins(){return[new zo({key:new zc("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Bu=$z.create({name:"focusEvents",addProseMirrorPlugins(){let{editor:e}=this;return[new zo({key:new zc("focusEvents"),props:{handleDOMEvents:{focus:(t,r)=>{e.isFocused=!0;let n=e.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return t.dispatch(n),!1},blur:(t,r)=>{e.isFocused=!1;let n=e.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return t.dispatch(n),!1}}}})]}}),Bd=$z.create({name:"keymap",addKeyboardShortcuts(){let e=()=>this.editor.commands.first(({commands:e})=>[()=>e.undoInputRule(),()=>e.command(({tr:t})=>{let{selection:r,doc:n}=t,{empty:i,$anchor:s}=r,{pos:o,parent:a}=s,l=s.parent.isTextblock&&o>0?t.doc.resolve(o-1):s,c=l.parent.type.spec.isolating,h=s.pos-s.parentOffset,u=c&&1===l.parent.childCount?h===s.pos:IJ.atStart(n).from===o;return!!i&&!!a.type.isTextblock&&!a.textContent.length&&!!u&&(!u||"paragraph"!==s.parent.type.name)&&e.clearNodes()}),()=>e.deleteSelection(),()=>e.joinBackward(),()=>e.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:e})=>[()=>e.deleteSelection(),()=>e.deleteCurrentNode(),()=>e.joinForward(),()=>e.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:e})=>[()=>e.newlineInCode(),()=>e.createParagraphNear(),()=>e.liftEmptyBlock(),()=>e.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},n={...r},i={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return $Y()||$1()?i:n},addProseMirrorPlugins(){return[new zo({key:new zc("clearDocument"),appendTransaction:(e,t,r)=>{if(e.some(e=>e.getMeta("composition")))return;let n=e.some(e=>e.docChanged)&&!t.doc.eq(r.doc),i=e.some(e=>e.getMeta("preventClearDocument"));if(!n||i)return;let{empty:s,from:o,to:a}=t.selection,l=IJ.atStart(t.doc).from,c=IJ.atEnd(t.doc).to;if(s||o!==l||a!==c||!Bn(r.doc))return;let h=r.tr,u=$l({state:r,transaction:h}),{commands:d}=new $c({editor:this.editor,state:u});if(d.clearNodes(),h.steps.length)return h}})]}}),Bf=$z.create({name:"paste",addProseMirrorPlugins(){return[new zo({key:new zc("tiptapPaste"),props:{handlePaste:(e,t,r)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:r})}}})]}}),Bp=$z.create({name:"tabindex",addProseMirrorPlugins(){return[new zo({key:new zc("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});var Bm=Object.freeze({__proto__:null,ClipboardTextSerializer:$$,Commands:Bl,Drop:Bc,Editable:Bh,FocusEvents:Bu,Keymap:Bd,Paste:Bf,Tabindex:Bp});class Bg{get name(){return this.node.type.name}constructor(e,t,r=!1,n=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=n}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return null!==(e=this.actualDepth)&&void 0!==e?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(0===this.content.size){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+ +!this.node.isText}get parent(){if(0===this.depth)return null;let e=this.resolvedPos.start(this.resolvedPos.depth-1);return new Bg(this.resolvedPos.doc.resolve(e),this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Bg(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Bg(e,this.editor)}get children(){let e=[];return this.node.content.forEach((t,r)=>{let n=t.isBlock&&!t.isTextblock,i=t.isAtom&&!t.isText,s=this.pos+r+ +!i,o=this.resolvedPos.doc.resolve(s);if(!n&&o.depth<=this.depth)return;let a=new Bg(o,this.editor,n,n?t:null);n&&(a.actualDepth=this.depth+1),e.push(new Bg(o,this.editor,n,n?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){let e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,n=this.parent;for(;n&&!r;){if(n.node.type.name===e){if(Object.keys(t).length>0){let e=n.node.attrs,r=Object.keys(t);for(let n=0;n<r.length;n+=1){let i=r[n];if(e[i]!==t[i])break}}else r=n}n=n.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let n=[];if(!this.children||0===this.children.length)return n;let i=Object.keys(t);return this.children.forEach(s=>{r&&n.length>0||(s.node.type.name===e&&i.every(e=>t[e]===s.node.attrs[e])&&n.push(s),r&&n.length>0||(n=n.concat(s.querySelectorAll(e,t,r))))}),n}setAttribute(e){let{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}let By=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;class Bb extends $h{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:e})=>{throw e},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:e,slice:t,moved:r})=>this.options.onDrop(e,t,r)),this.on("paste",({event:e,slice:t})=>this.options.onPaste(e,t)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=function(e,t,r){let n=document.querySelector("style[data-tiptap-style]");if(null!==n)return n;let i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}(By,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){let r=$y(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}unregisterPlugin(e){if(this.isDestroyed)return;let t=this.state.plugins,r=t;if([].concat(e).forEach(e=>{let n="string"==typeof e?`${e}$`:e.key;r=t.filter(e=>!e.key.startsWith(n))}),t.length===r.length)return;let n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}createExtensionManager(){var e,t;let r=[...this.options.enableCoreExtensions?[Bh,$$.configure({blockSeparator:null===(t=null===(e=this.options.coreExtensionOptions)||void 0===e?void 0:e.clipboardTextSerializer)||void 0===t?void 0:t.blockSeparator}),Bl,Bu,Bd,Bp,Bc,Bf].filter(e=>"object"!=typeof this.options.enableCoreExtensions||!1!==this.options.enableCoreExtensions[e.name]):[],...this.options.extensions].filter(e=>["extension","node","mark"].includes(null==e?void 0:e.type));this.extensionManager=new $I(r,this)}createCommandManager(){this.commandManager=new $c({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=$3(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(e=>"collaboration"!==e.name),this.createExtensionManager()}}),t=$3(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}let r=$G(t,this.options.autofocus);this.view=new qP(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...null===(e=this.options.editorProps)||void 0===e?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:zs.create({doc:t,selection:r||void 0})});let n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews(),this.prependClass(),this.view.dom.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;let t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(e=>{var t;return null===(t=this.capturedTransaction)||void 0===t?void 0:t.step(e)});return}let t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});let n=e.getMeta("focus"),i=e.getMeta("blur");n&&this.emit("focus",{editor:this,event:n.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!e.docChanged||e.getMeta("preventUpdate")||this.emit("update",{editor:this,transaction:e})}getAttributes(e){return function(e,t){let r=$4("string"==typeof t?t:t.name,e.schema);return"node"===r?function(e,t){let r=$p(t,e.schema),{from:n,to:i}=e.selection,s=[];e.doc.nodesBetween(n,i,e=>{s.push(e)});let o=s.reverse().find(e=>e.type.name===r.name);return o?{...o.attrs}:{}}(e,t):"mark"===r?$6(e,t):{}}(this.state,e)}isActive(e,t){let r="string"==typeof e?e:null,n="string"==typeof e?t:e;return function(e,t,r={}){if(!t)return $2(e,null,r)||Bt(e,null,r);let n=$4(t,e.schema);return"node"===n?$2(e,t,r):"mark"===n&&Bt(e,t,r)}(this.state,r,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return $O(this.state.doc.content,this.schema)}getText(e){let{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return function(e,t){let r={from:0,to:e.content.size};return $L(e,r,t)}(this.state.doc,{blockSeparator:t,textSerializers:{...$q(this.schema),...r}})}get isEmpty(){return Bn(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){let e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(null!==(e=this.view)&&void 0!==e&&e.docView)}$node(e,t){var r;return(null===(r=this.$doc)||void 0===r?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return(null===(r=this.$doc)||void 0===r?void 0:r.querySelectorAll(e,t))||null}$pos(e){return new Bg(this.state.doc.resolve(e),this)}get $doc(){return this.$pos(0)}}function Bv(e){return new $T({find:e.find,handler:({state:t,range:r,match:n})=>{let i=$b(e.getAttributes,void 0,n);if(!1===i||null===i)return null;let{tr:s}=t,o=n[n.length-1],a=n[0];if(o){let n=a.search(/\S/),l=r.from+a.indexOf(o),c=l+o.length;if($9(r.from,r.to,t.doc).filter(t=>t.mark.type.excluded.find(r=>r===e.type&&r!==t.mark.type)).filter(e=>e.to>l).length)return null;c<r.to&&s.delete(c,r.to),l>r.from&&s.delete(r.from+n,l);let h=r.from+n+o.length;s.addMark(r.from+n,h,e.type.create(i||{})),s.removeStoredMark(e.type)}}})}function Bx(e){return new $T({find:e.find,handler:({state:t,range:r,match:n})=>{let i=t.doc.resolve(r.from),s=$b(e.getAttributes,void 0,n)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(r.from,r.to).setBlockType(r.from,r.from,e.type,s)}})}function Bw(e){return new $T({find:e.find,handler:({state:t,range:r,match:n,chain:i})=>{let s=$b(e.getAttributes,void 0,n)||{},o=t.tr.delete(r.from,r.to),a=o.doc.resolve(r.from).blockRange(),l=a&&IN(a,e.type,s);if(!l)return null;if(o.wrap(a,l),e.keepMarks&&e.editor){let{selection:r,storedMarks:n}=t,{splittableMarks:i}=e.editor.extensionManager,s=n||r.$to.parentOffset&&r.$from.marks();if(s){let e=s.filter(e=>i.includes(e.type.name));o.ensureMarks(e)}}if(e.keepAttributes){let t="bulletList"===e.type.name||"orderedList"===e.type.name?"listItem":"taskList";i().updateAttributes(t,s).run()}let c=o.doc.resolve(r.from-1).nodeBefore;c&&c.type===e.type&&IP(o.doc,r.from-1)&&(!e.joinPredicate||e.joinPredicate(n,c))&&o.join(r.from-1)}})}let Bk=class e{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=$b($u(this,"addOptions",{name:this.name}))),this.storage=$b($u(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new e(t)}configure(e={}){let t=this.extend({...this.config,addOptions:()=>$N(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(t={}){let r=new e(t);return r.parent=this,this.child=r,r.name=t.name?t.name:r.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${r.name}".`),r.options=$b($u(r,"addOptions",{name:r.name})),r.storage=$b($u(r,"addStorage",{name:r.name,options:r.options})),r}};class BO{constructor(e,t,r){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.innerDecorations=t.innerDecorations,this.view=t.view,this.HTMLAttributes=t.HTMLAttributes,this.getPos=t.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var t,r,n,i,s,o,a;let{view:l}=this.editor,c=e.target,h=3===c.nodeType?null===(t=c.parentElement)||void 0===t?void 0:t.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(!this.dom||null!==(r=this.contentDOM)&&void 0!==r&&r.contains(c)||!h)return;let u=0,d=0;if(this.dom!==h){let t=this.dom.getBoundingClientRect(),r=h.getBoundingClientRect(),a=null!==(n=e.offsetX)&&void 0!==n?n:null===(i=e.nativeEvent)||void 0===i?void 0:i.offsetX,l=null!==(s=e.offsetY)&&void 0!==s?s:null===(o=e.nativeEvent)||void 0===o?void 0:o.offsetY;u=r.x-t.x+a,d=r.y-t.y+l}null===(a=e.dataTransfer)||void 0===a||a.setDragImage(this.dom,u,d);let f=this.getPos();if("number"!=typeof f)return;let p=I5.create(l.state.doc,f),m=l.state.tr.setSelection(p);l.dispatch(m)}stopEvent(e){var t;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:e});let r=e.target;if(!(this.dom.contains(r)&&!(null!==(t=this.contentDOM)&&void 0!==t&&t.contains(r))))return!1;let n=e.type.startsWith("drag"),i="drop"===e.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!i&&!n)return!0;let{isEditable:s}=this.editor,{isDragging:o}=this,a=!!this.node.type.spec.draggable,l=I5.isSelectable(this.node),c="copy"===e.type,h="paste"===e.type,u="cut"===e.type,d="mousedown"===e.type;if(!a&&l&&n&&e.target===this.dom&&e.preventDefault(),a&&n&&!o&&e.target===this.dom)return e.preventDefault(),!1;if(a&&s&&!o&&d){let e=r.closest("[data-drag-handle]");e&&(this.dom===e||this.dom.contains(e))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(o||i||c||h||u||d&&l)}ignoreMutation(e){return!this.dom||!this.contentDOM||("function"==typeof this.options.ignoreMutation?this.options.ignoreMutation({mutation:e}):!!this.node.isLeaf||!!this.node.isAtom||!("selection"===e.type||this.dom.contains(e.target)&&"childList"===e.type&&($Y()||$X())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(e=>e.isContentEditable))&&(this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target)))}updateAttributes(e){this.editor.commands.command(({tr:t})=>{let r=this.getPos();return"number"==typeof r&&(t.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){let e=this.getPos();if("number"!=typeof e)return;let t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}}function BS(e){return new $j({find:e.find,handler:({state:t,range:r,match:n,pasteEvent:i})=>{let s=$b(e.getAttributes,void 0,n,i);if(!1===s||null===s)return null;let{tr:o}=t,a=n[n.length-1],l=n[0],c=r.to;if(a){let n=l.search(/\S/),i=r.from+l.indexOf(a),h=i+a.length;if($9(r.from,r.to,t.doc).filter(t=>t.mark.type.excluded.find(r=>r===e.type&&r!==t.mark.type)).filter(e=>e.to>i).length)return null;h<r.to&&o.delete(h,r.to),i>r.from&&o.delete(r.from+n,i),c=r.from+n+a.length,o.addMark(r.from+n,c,e.type.create(s||{})),o.removeStoredMark(e.type)}}})}var BC={exports:{}},BT={};BC.exports=function(){if(y)return BT;y=1;var e="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},t=A.useState,r=A.useEffect,n=A.useLayoutEffect,i=A.useDebugValue;function s(t){var r=t.getSnapshot;t=t.value;try{var n=r();return!e(t,n)}catch{return!0}}var o=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?function(e,t){return t()}:function(e,o){var a=o(),l=t({inst:{value:a,getSnapshot:o}}),c=l[0].inst,h=l[1];return n(function(){c.value=a,c.getSnapshot=o,s(c)&&h({inst:c})},[e,a,o]),r(function(){return s(c)&&h({inst:c}),e(function(){s(c)&&h({inst:c})})},[e]),i(a),a};return BT.useSyncExternalStore=void 0!==A.useSyncExternalStore?A.useSyncExternalStore:o,BT}();var BA=BC.exports;let BM=(...e)=>t=>{e.forEach(e=>{"function"==typeof e?e(t):e&&(e.current=t)})},BE=({contentComponent:e})=>{let t=BA.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return A.createElement(A.Fragment,null,Object.values(t))};class BN extends A.Component{constructor(e){var t;super(e),this.editorContentRef=A.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(null!==(t=e.editor)&&void 0!==t&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){let e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;let t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=function(){let e=new Set,t={};return{subscribe:t=>(e.add(t),()=>{e.delete(t)}),getSnapshot:()=>t,getServerSnapshot:()=>t,setRenderer(r,n){t={...t,[r]:E.createPortal(n.reactElement,n.element,r)},e.forEach(e=>e())},removeRenderer(r){let n={...t};delete n[r],t=n,e.forEach(e=>e())}}}(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(e=>e.hasContentComponentInitialized?e:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){let e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;let t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){let{editor:e,innerRef:t,...r}=this.props;return A.createElement(A.Fragment,null,A.createElement("div",{ref:BM(t,this.editorContentRef),...r}),(null==e?void 0:e.contentComponent)&&A.createElement(BE,{contentComponent:e.contentComponent}))}}let B_=(0,A.forwardRef)((e,t)=>{let r=A.useMemo(()=>Math.floor(0xffffffff*Math.random()).toString(),[e.editor]);return A.createElement(BN,{key:r,innerRef:t,...e})}),Bj=A.memo(B_);var BD=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!=i--;)if(!e(t[i],r[i]))return!1;return!0}if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(i of t.entries())if(!r.has(i[0]))return!1;for(i of t.entries())if(!e(i[1],r.get(i[0])))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(i of t.entries())if(!r.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(r)){if((n=t.length)!=r.length)return!1;for(i=n;0!=i--;)if(t[i]!==r[i])return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=n;0!=i--;){var n,i,s,o=s[i];if(!("_owner"===o&&t.$$typeof)&&!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r}),BR={exports:{}},BP={};BR.exports=function(){if(b)return BP;b=1;var e="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},t=BA.useSyncExternalStore,r=A.useRef,n=A.useEffect,i=A.useMemo,s=A.useDebugValue;return BP.useSyncExternalStoreWithSelector=function(o,a,l,c,h){var u=r(null);if(null===u.current){var d={hasValue:!1,value:null};u.current=d}else d=u.current;var f=t(o,(u=i(function(){function t(t){if(!i){if(i=!0,r=t,t=c(t),void 0!==h&&d.hasValue){var s=d.value;if(h(s,t))return n=s}return n=t}if(s=n,e(r,t))return s;var o=c(t);return void 0!==h&&h(s,o)?s:(r=t,n=o)}var r,n,i=!1,s=void 0===l?null:l;return[function(){return t(a())},null===s?void 0:function(){return t(s())}]},[a,l,c,h]))[0],u[1]);return n(function(){d.hasValue=!0,d.value=f},[f]),s(f),f},BP}();var BI=BR.exports;let Bz="u">typeof window?A.useLayoutEffect:A.useEffect;class BL{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber||(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber}),this.lastSnapshot}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){let e=()=>{this.transactionNumber+=1,this.subscribers.forEach(e=>e())},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}}let Bq=typeof window>"u",B$=Bq||!!("u">typeof window&&window.next);class BB{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(e=>e())}getInitialEditor(){return void 0===this.options.current.immediatelyRender?Bq||B$?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){return new Bb({...this.options.current,onBeforeCreate:(...e)=>{var t,r;return null===(r=(t=this.options.current).onBeforeCreate)||void 0===r?void 0:r.call(t,...e)},onBlur:(...e)=>{var t,r;return null===(r=(t=this.options.current).onBlur)||void 0===r?void 0:r.call(t,...e)},onCreate:(...e)=>{var t,r;return null===(r=(t=this.options.current).onCreate)||void 0===r?void 0:r.call(t,...e)},onDestroy:(...e)=>{var t,r;return null===(r=(t=this.options.current).onDestroy)||void 0===r?void 0:r.call(t,...e)},onFocus:(...e)=>{var t,r;return null===(r=(t=this.options.current).onFocus)||void 0===r?void 0:r.call(t,...e)},onSelectionUpdate:(...e)=>{var t,r;return null===(r=(t=this.options.current).onSelectionUpdate)||void 0===r?void 0:r.call(t,...e)},onTransaction:(...e)=>{var t,r;return null===(r=(t=this.options.current).onTransaction)||void 0===r?void 0:r.call(t,...e)},onUpdate:(...e)=>{var t,r;return null===(r=(t=this.options.current).onUpdate)||void 0===r?void 0:r.call(t,...e)},onContentError:(...e)=>{var t,r;return null===(r=(t=this.options.current).onContentError)||void 0===r?void 0:r.call(t,...e)},onDrop:(...e)=>{var t,r;return null===(r=(t=this.options.current).onDrop)||void 0===r?void 0:r.call(t,...e)},onPaste:(...e)=>{var t,r;return null===(r=(t=this.options.current).onPaste)||void 0===r?void 0:r.call(t,...e)}})}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>!!["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)||("extensions"===r&&e.extensions&&t.extensions?e.extensions.length===t.extensions.length&&e.extensions.every((e,r)=>{var n;return e===(null===(n=t.extensions)||void 0===n?void 0:n[r])}):e[r]===t[r]))}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&0===e.length?BB.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(null===this.previousDeps){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((t,r)=>t===e[r]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){let e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}let BF=(0,A.createContext)({editor:null}),BQ=BF.Consumer,BV=()=>(0,A.useContext)(BF);function BH({children:e,slotAfter:t,slotBefore:r,editorContainerProps:n={},...i}){let s=function(e={},t=[]){let r=(0,A.useRef)(e);r.current=e;let[n]=(0,A.useState)(()=>new BB(r)),i=BA.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return(0,A.useDebugValue)(i),(0,A.useEffect)(n.onRender(t)),function(e){var t;let[r]=(0,A.useState)(()=>new BL(e.editor)),n=BI.useSyncExternalStoreWithSelector(r.subscribe,r.getSnapshot,r.getServerSnapshot,e.selector,null!==(t=e.equalityFn)&&void 0!==t?t:BD);Bz(()=>r.watch(e.editor),[e.editor,r]),(0,A.useDebugValue)(n)}({editor:i,selector:({transactionNumber:t})=>!1===e.shouldRerenderOnTransaction?null:e.immediatelyRender&&0===t?0:t+1}),i}(i);return s?A.createElement(BF.Provider,{value:{editor:s}},r,A.createElement(BQ,null,({editor:e})=>A.createElement(Bj,{editor:e,...n})),e,t):null}let BW=(0,A.createContext)({onDragStart:void 0}),BU=()=>(0,A.useContext)(BW),BG=A.forwardRef((e,t)=>{let{onDragStart:r}=BU(),n=e.as||"div";return A.createElement(n,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...e.style}})});class BX{constructor(e,{editor:t,props:r={},as:n="div",className:i=""}){this.ref=null,this.id=Math.floor(0xffffffff*Math.random()).toString(),this.component=e,this.editor=t,this.props=r,this.element=document.createElement(n),this.element.classList.add("react-renderer"),i&&this.element.classList.add(...i.split(" ")),this.editor.isInitialized?(0,E.flushSync)(()=>{this.render()}):this.render()}render(){var e,t;let r=this.component,n=this.props,i=this.editor;("function"==typeof r&&r.prototype&&r.prototype.isReactComponent||"object"==typeof r&&(null===(t=r.$$typeof)||void 0===t?void 0:t.toString())==="Symbol(react.forward_ref)")&&(n.ref=e=>{this.ref=e}),this.reactElement=A.createElement(r,{...n}),null===(e=null==i?void 0:i.contentComponent)||void 0===e||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;let t=this.editor;null===(e=null==t?void 0:t.contentComponent)||void 0===e||e.removeRenderer(this.id)}updateAttributes(e){Object.keys(e).forEach(t=>{this.element.setAttribute(t,e[t])})}}class BY extends BO{mount(){let e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(e={})=>this.updateAttributes(e),deleteNode:()=>this.deleteNode()};if(!this.component.displayName){let e;this.component.displayName=(e=this.extension.name).charAt(0).toUpperCase()+e.substring(1)}let t={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:e=>{e&&this.contentDOMElement&&e.firstChild!==this.contentDOMElement&&e.appendChild(this.contentDOMElement)}},r=this.component,n=A.memo(e=>A.createElement(BW.Provider,{value:t},A.createElement(r,e)));n.displayName="ReactNodeView",this.node.isLeaf?this.contentDOMElement=null:this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.style.whiteSpace="inherit");let i=this.node.isInline?"span":"div";this.options.as&&(i=this.options.as);let{className:s=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new BX(n,{editor:this.editor,props:e,as:i,className:`node-${this.node.type.name} ${s}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(null!==(e=this.renderer.element.firstElementChild)&&void 0!==e&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){let{from:e,to:t}=this.editor.state.selection,r=this.getPos();if("number"==typeof r){if(e<=r&&t>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}}update(e,t,r){let n=e=>{this.renderer.updateProps(e),"function"==typeof this.options.attrs&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if("function"==typeof this.options.update){let i=this.node,s=this.decorations,o=this.innerDecorations;return this.node=e,this.decorations=t,this.innerDecorations=r,this.options.update({oldNode:i,oldDecorations:s,newNode:e,newDecorations:t,oldInnerDecorations:o,innerDecorations:r,updateProps:()=>n({node:e,decorations:t,innerDecorations:r})})}return e===this.node&&this.decorations===t&&this.innerDecorations===r||(this.node=e,this.decorations=t,this.innerDecorations=r,n({node:e,decorations:t,innerDecorations:r})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if("function"==typeof this.options.attrs){let t=this.editor.extensionManager.attributes,r=$g(this.node,t);e=this.options.attrs({node:this.node,HTMLAttributes:r})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}function BZ(e,t){return r=>r.editor.contentComponent?new BY(e,r,t):{}}function BJ(){return T.j.jsx("div",{className:"w-full h-full min-h-60 flex flex-col justify-center items-center text-center rounded-md p-2 bg-white dark:bg-gray-800",children:T.j.jsxs("div",{className:"mb-2 text-sm text-gray-400 dark:text-gray-200",children:[T.j.jsx(T.d,{classNames:"w-5 h-5"}),"Loading"]})})}function BK({error:e}){return T.j.jsx("div",{className:"w-full h-full min-h-60 flex flex-col justify-center items-center bg-rose-100 dark:bg-rose-900 text-red text-center rounded-md p-2",children:T.j.jsx("div",{className:"mb-2 text-sm text-rose-500 dark:text-rose-400",children:e})})}function B0({analysis:e,viewMode:t,showSqlQuery:r,setShowSqlQuery:n,setViewMode:i}){let[s,o]=(0,A.useState)(!1),[a,l]=(0,A.useState)([]),c=(0,A.useMemo)(()=>{if(!e)return null;let t=e.rows.map(t=>{let r={};return e.columns.forEach(e=>{let n=e.title||e.dataIndex;r[n]=void 0===t[n]||null===t[n]?"":t[n]}),r}),r=(0,M.T)(t),n=(0,M.p)(r),i=TX({data:n.data,availableColumns:n.columns.map(e=>({...e,description:"",isDate:e.isDate||!1,dateToUnix:e.dateToUnix||(e=>new Date(e).getTime())}))});return i.autoSelectVariables(),{csvString:r,data:n,chartManager:i,reactive_vars:{},chart_images:{},analysis:{}}},[e.analysis_id]),h=(0,A.useMemo)(()=>c&&T.j.jsx(RG,{stepData:c,initialQuestion:null==e?void 0:e.question,initialOptionsExpanded:s}),[e.analysis_id,c,s]);(0,A.useEffect)(()=>{let t=[];t.push({component:T.j.jsx("div",{className:"w-full overflow-x-auto",children:T.j.jsx(T.T,{columns:e.columns,rows:e.rows,columnHeaderClassNames:"py-2",skipColumns:["index"],rootClassNames:"shadow-sm min-w-[400px]"})}),key:"table",tabLabel:"Table",icon:T.j.jsx(es,{className:"w-4 h-4 mb-0.5 mr-1 inline"})}),t.push({component:T.j.jsx(ks,{children:h}),key:"chart",tabLabel:"Chart",icon:T.j.jsx(L,{className:"w-4 h-4 mb-0.5 mr-1 inline"})}),l(t)},[e.analysis_id,h]);let u=(0,A.useRef)(null);return(0,A.useEffect)(()=>{let e=e=>{var r;let n=document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement,s=(null==(r=u.current)?void 0:r.contains(document.activeElement))||u.current===document.activeElement;if(!n&&s){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;(0,T.aa)(e.key,T.a7.TOGGLE_CHART_OPTIONS)&&"chart"===t&&(o(e=>!e),e.preventDefault()),(0,T.aa)(e.key,T.a7.VIEW_TABLE)&&(i("table"),e.preventDefault()),(0,T.aa)(e.key,T.a7.VIEW_CHART)&&(i("chart"),e.preventDefault())}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t,i]),T.j.jsxs("div",{ref:u,className:"flex flex-col space-y-4",tabIndex:-1,children:[e.question&&T.j.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg border dark:border-gray-600",children:T.j.jsxs("div",{className:"flex items-start gap-2",children:[T.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500 dark:text-blue-400 mt-0.5 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[T.j.jsx("circle",{cx:"12",cy:"12",r:"10"}),T.j.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),T.j.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),T.j.jsxs("div",{children:[T.j.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"SQL Analysis"}),T.j.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:e.question})]})]})}),T.j.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[T.j.jsxs("span",{className:"inline-flex items-center gap-1 bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 text-xs font-medium px-2.5 py-1 rounded",children:[T.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:[T.j.jsx("path",{d:"M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"}),T.j.jsx("path",{d:"M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"}),T.j.jsx("path",{d:"M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"})]}),(null==e?void 0:e.db_name)||"Database"]}),e.rows&&T.j.jsxs("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded dark:bg-blue-900/30 dark:text-blue-300",children:[e.rows.length," ",1===e.rows.length?"row":"rows"]})]}),T.j.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-600 overflow-hidden",children:[T.j.jsxs("div",{className:"flex flex-wrap items-center justify-between p-3 border-b dark:border-gray-600 bg-gray-50 dark:bg-gray-700",children:[T.j.jsx("div",{className:"flex items-center gap-2",children:T.j.jsx("nav",{className:"flex space-x-4","aria-label":"Tabs",children:a.map(e=>T.j.jsxs("button",{onClick:()=>i(e.key),className:`
                    px-3 py-2 text-sm font-medium rounded-t-lg flex items-center gap-2
                    ${t===e.key?"border-b-2 border-blue-500 text-blue-600 dark:text-white":"text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}
                  `,children:[T.j.jsxs("span",{className:"flex items-center",children:[e.icon,e.tabLabel]}),"table"===e.key&&T.j.jsx(T.a1,{keyValue:T.a7.VIEW_TABLE,className:"opacity-50 px-1 py-0.5"}),"chart"===e.key&&T.j.jsx(T.a1,{keyValue:T.a7.VIEW_CHART,className:"opacity-50 px-1 py-0.5"})]},e.key))})}),(null==e?void 0:e.sql)&&T.j.jsxs("button",{onClick:()=>n(!r),className:"text-xs bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded px-2 py-1 transition-colors flex items-center gap-1",children:[T.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:[T.j.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),T.j.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),r?"Hide SQL":"Show SQL"]})]}),r&&(null==e?void 0:e.sql)&&T.j.jsxs("div",{className:"border-b dark:border-gray-700",children:[T.j.jsxs("div",{className:"flex flex-wrap items-center justify-between px-3 py-2 bg-gray-100 dark:bg-gray-700",children:[T.j.jsxs("div",{className:"flex items-center gap-1.5 mb-2 sm:mb-0",children:[T.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-purple-500 dark:text-purple-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[T.j.jsx("path",{d:"M8 9l3 3-3 3"}),T.j.jsx("line",{x1:"13",y1:"15",x2:"16",y2:"15"}),T.j.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"})]}),T.j.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:"SQL Query"})]}),T.j.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(e.sql||"")},className:"text-xs bg-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-300 rounded px-1.5 py-0.5 transition-colors flex items-center gap-1",children:[T.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:[T.j.jsx("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),T.j.jsx("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"})]}),"Copy"]})]}),T.j.jsx("div",{className:"max-h-[150px] sm:max-h-[200px] overflow-auto",children:T.j.jsx(ko,{code:e.sql||"",language:"sql",editable:!1,className:"text-sm"})})]}),T.j.jsx("div",{className:"p-2 sm:p-3",children:a.map(e=>T.j.jsx("div",{className:e.key===t?"z-2":"absolute overflow-hidden top-[-100%] z-[-1] pointer-events-none *:pointer-events-none opacity-0",children:e.component},e.key))})]})]})}function B1({analysis:e}){var t,r,n;return T.j.jsxs("div",{className:"flex flex-col space-y-4",children:[(null==(t=e.inputs)?void 0:t.question)&&T.j.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg border dark:border-gray-600",children:T.j.jsxs("div",{className:"flex items-start gap-2",children:[T.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500 dark:text-blue-400 mt-0.5 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[T.j.jsx("circle",{cx:"12",cy:"12",r:"10"}),T.j.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),T.j.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),T.j.jsxs("div",{children:[T.j.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Question"}),T.j.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:e.inputs.question})]})]})}),(null==(r=e.result)?void 0:r.answer)&&T.j.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-600 p-4",children:[T.j.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b dark:border-gray-600",children:[T.j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500 dark:text-green-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:T.j.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),T.j.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Answer from Web Search"})]}),T.j.jsx("div",{className:"prose dark:prose-invert prose-sm max-w-none",dangerouslySetInnerHTML:{__html:Os.parse(e.result.answer)}})]}),(null==(n=e.result)?void 0:n.reference_sources)&&Array.isArray(e.result.reference_sources)&&e.result.reference_sources.length>0&&T.j.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg border dark:border-gray-600 p-3 sm:p-4",children:[T.j.jsxs("div",{className:"flex items-center gap-2 mb-3 pb-2 border-b dark:border-gray-600",children:[T.j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-500 dark:text-indigo-400 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:T.j.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),T.j.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Reference Sources"})]}),T.j.jsx("ul",{className:"space-y-2",children:e.result.reference_sources.map((e,t)=>T.j.jsxs("li",{className:"flex items-start",children:[T.j.jsx("span",{className:"inline-flex items-center justify-center h-5 w-5 rounded-full bg-indigo-100 dark:bg-indigo-900 text-xs text-indigo-700 dark:text-indigo-300 mr-2 flex-shrink-0",children:t+1}),T.j.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 dark:text-blue-400 hover:underline hover:text-blue-800 dark:hover:text-blue-300 break-all",children:e.source})]},t))})]})]})}function B2({analysis:e}){var t;return T.j.jsxs("div",{className:"flex flex-col space-y-4",children:[(null==(t=e.inputs)?void 0:t.question)&&T.j.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg border dark:border-gray-600",children:T.j.jsxs("div",{className:"flex items-start gap-2",children:[T.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500 dark:text-blue-400 mt-0.5 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[T.j.jsx("circle",{cx:"12",cy:"12",r:"10"}),T.j.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),T.j.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),T.j.jsxs("div",{children:[T.j.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Question"}),T.j.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:e.inputs.question})]})]})}),T.j.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-600 p-3 sm:p-4",children:[T.j.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b dark:border-gray-600",children:[T.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500 dark:text-blue-400 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[T.j.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),T.j.jsx("polyline",{points:"14 2 14 8 20 8"}),T.j.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),T.j.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),T.j.jsx("polyline",{points:"10 9 9 9 8 9"})]}),T.j.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"PDF Citations"})]}),e.result.citations.map((e,t)=>T.j.jsxs("div",{className:"mb-4 relative group",children:[T.j.jsx("div",{className:"prose dark:prose-invert prose-sm max-w-none py-1",dangerouslySetInnerHTML:{__html:Os.parse(e.text)}}),e.citations&&Array.isArray(e.citations)&&e.citations.length>0&&T.j.jsxs(T.j.Fragment,{children:[T.j.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 flex flex-wrap items-center",children:[T.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1 flex-shrink-0 text-blue-500 dark:text-blue-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[T.j.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),T.j.jsx("polyline",{points:"14 2 14 8 20 8"})]}),T.j.jsx("span",{className:"italic mr-1",children:"Source:"}),T.j.jsx("span",{className:"break-all",children:e.citations[0].document_title}),e.citations[0].start_page_number&&T.j.jsxs("span",{className:"ml-1",children:["(Pages ",e.citations[0].start_page_number,"-",e.citations[0].end_page_number,")"]})]}),T.j.jsx("div",{className:"absolute left-0 right-0 -bottom-1 opacity-0 invisible group-hover:opacity-100 group-hover:visible md:transition-all md:duration-200 transform translate-y-full z-10",children:T.j.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg border dark:border-gray-600 mt-2 shadow-lg",children:[T.j.jsx("h5",{className:"text-xs font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Cited Text:"}),T.j.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300 italic bg-gray-100 dark:bg-gray-800 p-2 rounded",children:['"',e.citations[0].cited_text,'"']})]})}),T.j.jsx("button",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1 block md:hidden",onClick:e=>{var t;let r=null==(t=e.currentTarget.parentElement)?void 0:t.querySelector(".mobile-citation-panel");r&&r.classList.toggle("hidden")},children:"View citation"}),T.j.jsx("div",{className:"mobile-citation-panel hidden mt-2 md:hidden",children:T.j.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg border dark:border-gray-600 shadow-sm",children:[T.j.jsx("h5",{className:"text-xs font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Cited Text:"}),T.j.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300 italic bg-gray-100 dark:bg-gray-800 p-2 rounded",children:['"',e.citations[0].cited_text,'"']})]})})]})]},t))]})]})}class B4{constructor(e,t,r){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=t,this.end=r}static range(e,t){return t?e&&e.loc&&t.loc&&e.loc.lexer===t.loc.lexer?new B4(e.loc.lexer,e.loc.start,t.loc.end):null:e&&e.loc}}let B5=class e{constructor(e,t){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=t}range(t,r){return new e(r,B4.range(this,t))}};class B3{constructor(e,t){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var r,n,i="KaTeX parse error: "+e,s=t&&t.loc;if(s&&s.start<=s.end){var o,a=s.lexer.input;r=s.start,n=s.end,r===a.length?i+=" at end of input: ":i+=" at position "+(r+1)+": ";var l,c=a.slice(r,n).replace(/[^]/g,"$&");i+=(r>15?""+a.slice(r-15,r):a.slice(0,r))+c+(n+15<a.length?a.slice(n,n+15)+"":a.slice(n))}var h=Error(i);return h.name="ParseError",h.__proto__=B3.prototype,h.position=r,null!=r&&null!=n&&(h.length=n-r),h.rawMessage=e,h}}B3.prototype.__proto__=Error.prototype;var B6=/([A-Z])/g,B7={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},B8=/[&><"']/g,B9=function e(t){return"ordgroup"===t.type||"color"===t.type?1===t.body.length?e(t.body[0]):t:"font"===t.type?e(t.body):t},Fe=function(e){if(!e)throw Error("Expected non-null, but got "+String(e));return e},Ft={contains:function(e,t){return -1!==e.indexOf(t)},deflt:function(e,t){return void 0===e?t:e},escape:function(e){return String(e).replace(B8,e=>B7[e])},hyphenate:function(e){return e.replace(B6,"-$1").toLowerCase()},getBaseElem:B9,isCharacterBox:function(e){var t=B9(e);return"mathord"===t.type||"textord"===t.type||"atom"===t.type},protocolFromUrl:function(e){var t=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return t?":"===t[2]&&/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(t[1])?t[1].toLowerCase():null:"_relative"}},Fr={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:e=>"#"+e},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(e,t)=>(t.push(e),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:e=>Math.max(0,e),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:e=>Math.max(0,e),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:e=>Math.max(0,e),cli:"-e, --max-expand <n>",cliProcessor:e=>"Infinity"===e?1/0:parseInt(e)},globalGroup:{type:"boolean",cli:!1}};class Fn{constructor(e){for(var t in this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{},Fr)if(Fr.hasOwnProperty(t)){var r=Fr[t];this[t]=void 0!==e[t]?r.processor?r.processor(e[t]):e[t]:function(e){if(e.default)return e.default;var t=e.type,r=Array.isArray(t)?t[0]:t;if("string"!=typeof r)return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}(r)}}reportNonstrict(e,t,r){var n=this.strict;if("function"==typeof n&&(n=n(e,t,r)),!(!n||"ignore"===n)){if(!0===n||"error"===n)throw new B3("LaTeX-incompatible input and strict mode is set to 'error': "+(t+" [")+e+"]",r);"warn"===n?"u">typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" [")+e+"]"):"u">typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+n+"': "+t+" [")+e+"]")}}useStrictBehavior(e,t,r){var n=this.strict;if("function"==typeof n)try{n=n(e,t,r)}catch{n="error"}return!!n&&"ignore"!==n&&(!0===n||"error"===n||("warn"===n?"u">typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" [")+e+"]"):"u">typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+n+"': "+t+" [")+e+"]"),!1))}isTrusted(e){if(e.url&&!e.protocol){var t=Ft.protocolFromUrl(e.url);if(null==t)return!1;e.protocol=t}return!!("function"==typeof this.trust?this.trust(e):this.trust)}}class Fi{constructor(e,t,r){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=t,this.cramped=r}sup(){return Fs[Fo[this.id]]}sub(){return Fs[Fa[this.id]]}fracNum(){return Fs[Fl[this.id]]}fracDen(){return Fs[Fc[this.id]]}cramp(){return Fs[Fh[this.id]]}text(){return Fs[Fu[this.id]]}isTight(){return this.size>=2}}var Fs=[new Fi(0,0,!1),new Fi(1,0,!0),new Fi(2,1,!1),new Fi(3,1,!0),new Fi(4,2,!1),new Fi(5,2,!0),new Fi(6,3,!1),new Fi(7,3,!0)],Fo=[4,5,4,5,6,7,6,7],Fa=[5,5,5,5,7,7,7,7],Fl=[2,3,4,5,6,7,6,7],Fc=[3,3,5,5,7,7,7,7],Fh=[1,1,3,3,5,5,7,7],Fu=[0,1,2,3,2,3,2,3],Fd={DISPLAY:Fs[0],TEXT:Fs[2],SCRIPT:Fs[4],SCRIPTSCRIPT:Fs[6]},Ff=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}],Fp=[];function Fm(e){for(var t=0;t<Fp.length;t+=2)if(e>=Fp[t]&&e<=Fp[t+1])return!0;return!1}Ff.forEach(e=>e.blocks.forEach(e=>Fp.push(...e)));var Fg=function(e,t,r){t*=1e3;var n,i,s,o,a,l,c="";switch(e){case"sqrtMain":c="M95,"+(622+(n=t)+80)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+n/2.075+" -"+n+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+n)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+n)+" 80h400000v"+(40+n)+"h-400000z";break;case"sqrtSize1":c="M263,"+(601+(i=t)+80)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+i/2.084+" -"+i+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+i)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+i)+" 80h400000v"+(40+i)+"h-400000z";break;case"sqrtSize2":c="M983 "+(10+(s=t)+80)+`
l`+s/3.13+" -"+s+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+s)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+s)+" 80h400000v"+(40+s)+"h-400000z";break;case"sqrtSize3":c="M424,"+(2398+(o=t)+80)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+o/4.223+" -"+o+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+o)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+o)+" 80"+`
h400000v`+(40+o)+"h-400000z";break;case"sqrtSize4":c="M473,"+(2713+(a=t)+80)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+a/5.298+" -"+a+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+a)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+a)+" 80h400000v"+(40+a)+"H1017.7z";break;case"sqrtTall":c="M702 "+((l=t)+80)+"H400000"+(40+l)+`
H742v`+(r-54-80-l)+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+"80H400000v"+(40+l)+"H742z"}return c},Fy=function(e,t){switch(e){case"":return"M291 0 H417 V"+t+" H291z M291 0 H417 V"+t+" H291z";case"":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z";case"":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z"+("M367 0 H410 V"+t+" H367z M367 0 H410 V")+t+" H367z";case"":return"M457 0 H583 V"+t+" H457z M457 0 H583 V"+t+" H457z";case"":return"M319 0 H403 V"+t+" H319z M319 0 H403 V"+t+" H319z";case"":return"M263 0 H347 V"+t+" H263z M263 0 H347 V"+t+" H263z";case"":return"M384 0 H504 V"+t+" H384z M384 0 H504 V"+t+" H384z";case"":return"M312 0 H355 V"+t+" H312z M312 0 H355 V"+t+" H312z";case"":return"M257 0 H300 V"+t+" H257z M257 0 H300 V"+t+" H257z"+("M478 0 H521 V"+t+" H478z M478 0 H521 V")+t+" H478z";default:return""}},Fb={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},Fv=function(e,t){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+t+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+t+" v1759 h84z";case"vert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+" v585 h43z";case"doublevert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+` v585 h43z
M367 15 v585 v`+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+t+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+t+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+t+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v602 h84z
M403 1759 V0 H319 V1759 v`+t+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v602 h84z
M347 1759 V0 h-84 V1759 v`+t+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(t+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(t+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(t+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(t+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw Error("Unknown stretchy delimiter.")}};class Fx{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return Ft.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e}toText(){return this.children.map(e=>e.toText()).join("")}}var Fw={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},Fk={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},FO={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function FS(e,t,r){if(!Fw[t])throw Error("Font metrics not found for font: "+t+".");var n=e.charCodeAt(0),i=Fw[t][n];if(!i&&e[0]in FO&&(n=FO[e[0]].charCodeAt(0),i=Fw[t][n]),!i&&"text"===r&&Fm(n)&&(i=Fw[t][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var FC={},FT=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],FA=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],FM=function(e,t){return t.size<2?e:FT[e-1][t.size-1]};class FE{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||FE.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=FA[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var t={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return new FE(t)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:FM(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:FA[e-1]})}havingBaseStyle(e){e=e||this.style.text();var t=FM(FE.BASESIZE,e);return this.size===t&&this.textSize===FE.BASESIZE&&this.style===e?this:this.extend({style:e,size:t})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==FE.BASESIZE?["sizing","reset-size"+this.size,"size"+FE.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=function(e){var t;if(!FC[t=e>=5?0:e>=3?1:2]){var r=FC[t]={cssEmPerMu:Fk.quad[t]/18};for(var n in Fk)Fk.hasOwnProperty(n)&&(r[n]=Fk[n][t])}return FC[t]}(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}FE.BASESIZE=6;var FN={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:1.00375,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:1.00375},F_={ex:!0,em:!0,mu:!0},Fj=function(e){return"string"!=typeof e&&(e=e.unit),e in FN||e in F_||"ex"===e},FD=function(e,t){var r,n;if(e.unit in FN)r=FN[e.unit]/t.fontMetrics().ptPerEm/t.sizeMultiplier;else if("mu"===e.unit)r=t.fontMetrics().cssEmPerMu;else{if(n=t.style.isTight()?t.havingStyle(t.style.text()):t,"ex"===e.unit)r=n.fontMetrics().xHeight;else if("em"===e.unit)r=n.fontMetrics().quad;else throw new B3("Invalid unit: '"+e.unit+"'");n!==t&&(r*=n.sizeMultiplier/t.sizeMultiplier)}return Math.min(e.number*r,t.maxSize)},FR=function(e){return+e.toFixed(4)+"em"},FP=function(e){return e.filter(e=>e).join(" ")},FI=function(e,t,r){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=r||{},t){t.style.isTight()&&this.classes.push("mtight");var n=t.getColor();n&&(this.style.color=n)}},Fz=function(e){var t=document.createElement(e);for(var r in t.className=FP(this.classes),this.style)this.style.hasOwnProperty(r)&&(t.style[r]=this.style[r]);for(var n in this.attributes)this.attributes.hasOwnProperty(n)&&t.setAttribute(n,this.attributes[n]);for(var i=0;i<this.children.length;i++)t.appendChild(this.children[i].toNode());return t},FL=/[\s"'>/=\x00-\x1f]/,Fq=function(e){var t="<"+e;this.classes.length&&(t+=' class="'+Ft.escape(FP(this.classes))+'"');var r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=Ft.hyphenate(n)+":"+this.style[n]+";");for(var i in r&&(t+=' style="'+Ft.escape(r)+'"'),this.attributes)if(this.attributes.hasOwnProperty(i)){if(FL.test(i))throw new B3("Invalid attribute name '"+i+"'");t+=" "+i+'="'+Ft.escape(this.attributes[i])+'"'}t+=">";for(var s=0;s<this.children.length;s++)t+=this.children[s].toMarkup();return t+("</"+e)+">"};class F${constructor(e,t,r,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,FI.call(this,e,r,n),this.children=t||[]}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return Ft.contains(this.classes,e)}toNode(){return Fz.call(this,"span")}toMarkup(){return Fq.call(this,"span")}}class FB{constructor(e,t,r,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,FI.call(this,t,n),this.children=r||[],this.setAttribute("href",e)}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return Ft.contains(this.classes,e)}toNode(){return Fz.call(this,"a")}toMarkup(){return Fq.call(this,"a")}}class FF{constructor(e,t,r){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=t,this.src=e,this.classes=["mord"],this.style=r}hasClass(e){return Ft.contains(this.classes,e)}toNode(){var e=document.createElement("img");for(var t in e.src=this.src,e.alt=this.alt,e.className="mord",this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);return e}toMarkup(){var e='<img src="'+Ft.escape(this.src)+'" alt="'+Ft.escape(this.alt)+'"',t="";for(var r in this.style)this.style.hasOwnProperty(r)&&(t+=Ft.hyphenate(r)+":"+this.style[r]+";");return t&&(e+=' style="'+Ft.escape(t)+'"'),e+="'/>"}}var FQ={:"",:"",:"",:""};class FV{constructor(e,t,r,n,i,s,o,a){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=t||0,this.depth=r||0,this.italic=n||0,this.skew=i||0,this.width=s||0,this.classes=o||[],this.style=a||{},this.maxFontSize=0;var l=function(e){for(var t=0;t<Ff.length;t++)for(var r=Ff[t],n=0;n<r.blocks.length;n++){var i=r.blocks[n];if(e>=i[0]&&e<=i[1])return r.name}return null}(this.text.charCodeAt(0));l&&this.classes.push(l+"_fallback"),/[]/.test(this.text)&&(this.text=FQ[this.text])}hasClass(e){return Ft.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),t=null;for(var r in this.italic>0&&((t=document.createElement("span")).style.marginRight=FR(this.italic)),this.classes.length>0&&((t=t||document.createElement("span")).className=FP(this.classes)),this.style)this.style.hasOwnProperty(r)&&((t=t||document.createElement("span")).style[r]=this.style[r]);return t?(t.appendChild(e),t):e}toMarkup(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=Ft.escape(FP(this.classes)),t+='"');var r="";for(var n in this.italic>0&&(r+="margin-right:"+this.italic+"em;"),this.style)this.style.hasOwnProperty(n)&&(r+=Ft.hyphenate(n)+":"+this.style[n]+";");r&&(e=!0,t+=' style="'+Ft.escape(r)+'"');var i=Ft.escape(this.text);return e?(t+=">",t+=i,t+="</span>"):i}}class FH{constructor(e,t){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=t||{}}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);for(var r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+Ft.escape(this.attributes[t])+'"');e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+"</svg>"}}class FW{constructor(e,t){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=t}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?e.setAttribute("d",this.alternate):e.setAttribute("d",Fb[this.pathName]),e}toMarkup(){return this.alternate?'<path d="'+Ft.escape(this.alternate)+'"/>':'<path d="'+Ft.escape(Fb[this.pathName])+'"/>'}}class FU{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","line");for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);return e}toMarkup(){var e="<line";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+Ft.escape(this.attributes[t])+'"');return e+"/>"}}function FG(e){if(e instanceof FV)return e;throw Error("Expected symbolNode but got "+String(e)+".")}var FX={bin:1,close:1,inner:1,open:1,punct:1,rel:1},FY={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},FZ={math:{},text:{}};function FJ(e,t,r,n,i,s){FZ[e][i]={font:t,group:r,replace:n},s&&n&&(FZ[e][n]=FZ[e][i])}var FK="math",F0="text",F1="main",F2="accent-token",F4="close",F5="inner",F3="mathord",F6="op-token",F7="open",F8="punct",F9="spacing",Qe="textord";FJ(FK,F1,"rel","","\\equiv",!0),FJ(FK,F1,"rel","","\\prec",!0),FJ(FK,F1,"rel","","\\succ",!0),FJ(FK,F1,"rel","","\\sim",!0),FJ(FK,F1,"rel","","\\perp"),FJ(FK,F1,"rel","","\\preceq",!0),FJ(FK,F1,"rel","","\\succeq",!0),FJ(FK,F1,"rel","","\\simeq",!0),FJ(FK,F1,"rel","","\\mid",!0),FJ(FK,F1,"rel","","\\ll",!0),FJ(FK,F1,"rel","","\\gg",!0),FJ(FK,F1,"rel","","\\asymp",!0),FJ(FK,F1,"rel","","\\parallel"),FJ(FK,F1,"rel","","\\bowtie",!0),FJ(FK,F1,"rel","","\\smile",!0),FJ(FK,F1,"rel","","\\sqsubseteq",!0),FJ(FK,F1,"rel","","\\sqsupseteq",!0),FJ(FK,F1,"rel","","\\doteq",!0),FJ(FK,F1,"rel","","\\frown",!0),FJ(FK,F1,"rel","","\\ni",!0),FJ(FK,F1,"rel","","\\propto",!0),FJ(FK,F1,"rel","","\\vdash",!0),FJ(FK,F1,"rel","","\\dashv",!0),FJ(FK,F1,"rel","","\\owns"),FJ(FK,F1,F8,".","\\ldotp"),FJ(FK,F1,F8,"","\\cdotp"),FJ(FK,F1,Qe,"#","\\#"),FJ(F0,F1,Qe,"#","\\#"),FJ(FK,F1,Qe,"&","\\&"),FJ(F0,F1,Qe,"&","\\&"),FJ(FK,F1,Qe,"","\\aleph",!0),FJ(FK,F1,Qe,"","\\forall",!0),FJ(FK,F1,Qe,"","\\hbar",!0),FJ(FK,F1,Qe,"","\\exists",!0),FJ(FK,F1,Qe,"","\\nabla",!0),FJ(FK,F1,Qe,"","\\flat",!0),FJ(FK,F1,Qe,"","\\ell",!0),FJ(FK,F1,Qe,"","\\natural",!0),FJ(FK,F1,Qe,"","\\clubsuit",!0),FJ(FK,F1,Qe,"","\\wp",!0),FJ(FK,F1,Qe,"","\\sharp",!0),FJ(FK,F1,Qe,"","\\diamondsuit",!0),FJ(FK,F1,Qe,"","\\Re",!0),FJ(FK,F1,Qe,"","\\heartsuit",!0),FJ(FK,F1,Qe,"","\\Im",!0),FJ(FK,F1,Qe,"","\\spadesuit",!0),FJ(FK,F1,Qe,"\xa7","\\S",!0),FJ(F0,F1,Qe,"\xa7","\\S"),FJ(FK,F1,Qe,"\xb6","\\P",!0),FJ(F0,F1,Qe,"\xb6","\\P"),FJ(FK,F1,Qe,"","\\dag"),FJ(F0,F1,Qe,"","\\dag"),FJ(F0,F1,Qe,"","\\textdagger"),FJ(FK,F1,Qe,"","\\ddag"),FJ(F0,F1,Qe,"","\\ddag"),FJ(F0,F1,Qe,"","\\textdaggerdbl"),FJ(FK,F1,F4,"","\\rmoustache",!0),FJ(FK,F1,F7,"","\\lmoustache",!0),FJ(FK,F1,F4,"","\\rgroup",!0),FJ(FK,F1,F7,"","\\lgroup",!0),FJ(FK,F1,"bin","","\\mp",!0),FJ(FK,F1,"bin","","\\ominus",!0),FJ(FK,F1,"bin","","\\uplus",!0),FJ(FK,F1,"bin","","\\sqcap",!0),FJ(FK,F1,"bin","","\\ast"),FJ(FK,F1,"bin","","\\sqcup",!0),FJ(FK,F1,"bin","","\\bigcirc",!0),FJ(FK,F1,"bin","","\\bullet",!0),FJ(FK,F1,"bin","","\\ddagger"),FJ(FK,F1,"bin","","\\wr",!0),FJ(FK,F1,"bin","","\\amalg"),FJ(FK,F1,"bin","&","\\And"),FJ(FK,F1,"rel","","\\longleftarrow",!0),FJ(FK,F1,"rel","","\\Leftarrow",!0),FJ(FK,F1,"rel","","\\Longleftarrow",!0),FJ(FK,F1,"rel","","\\longrightarrow",!0),FJ(FK,F1,"rel","","\\Rightarrow",!0),FJ(FK,F1,"rel","","\\Longrightarrow",!0),FJ(FK,F1,"rel","","\\leftrightarrow",!0),FJ(FK,F1,"rel","","\\longleftrightarrow",!0),FJ(FK,F1,"rel","","\\Leftrightarrow",!0),FJ(FK,F1,"rel","","\\Longleftrightarrow",!0),FJ(FK,F1,"rel","","\\mapsto",!0),FJ(FK,F1,"rel","","\\longmapsto",!0),FJ(FK,F1,"rel","","\\nearrow",!0),FJ(FK,F1,"rel","","\\hookleftarrow",!0),FJ(FK,F1,"rel","","\\hookrightarrow",!0),FJ(FK,F1,"rel","","\\searrow",!0),FJ(FK,F1,"rel","","\\leftharpoonup",!0),FJ(FK,F1,"rel","","\\rightharpoonup",!0),FJ(FK,F1,"rel","","\\swarrow",!0),FJ(FK,F1,"rel","","\\leftharpoondown",!0),FJ(FK,F1,"rel","","\\rightharpoondown",!0),FJ(FK,F1,"rel","","\\nwarrow",!0),FJ(FK,F1,"rel","","\\rightleftharpoons",!0),FJ(FK,"ams","rel","","\\nless",!0),FJ(FK,"ams","rel","","\\@nleqslant"),FJ(FK,"ams","rel","","\\@nleqq"),FJ(FK,"ams","rel","","\\lneq",!0),FJ(FK,"ams","rel","","\\lneqq",!0),FJ(FK,"ams","rel","","\\@lvertneqq"),FJ(FK,"ams","rel","","\\lnsim",!0),FJ(FK,"ams","rel","","\\lnapprox",!0),FJ(FK,"ams","rel","","\\nprec",!0),FJ(FK,"ams","rel","","\\npreceq",!0),FJ(FK,"ams","rel","","\\precnsim",!0),FJ(FK,"ams","rel","","\\precnapprox",!0),FJ(FK,"ams","rel","","\\nsim",!0),FJ(FK,"ams","rel","","\\@nshortmid"),FJ(FK,"ams","rel","","\\nmid",!0),FJ(FK,"ams","rel","","\\nvdash",!0),FJ(FK,"ams","rel","","\\nvDash",!0),FJ(FK,"ams","rel","","\\ntriangleleft"),FJ(FK,"ams","rel","","\\ntrianglelefteq",!0),FJ(FK,"ams","rel","","\\subsetneq",!0),FJ(FK,"ams","rel","","\\@varsubsetneq"),FJ(FK,"ams","rel","","\\subsetneqq",!0),FJ(FK,"ams","rel","","\\@varsubsetneqq"),FJ(FK,"ams","rel","","\\ngtr",!0),FJ(FK,"ams","rel","","\\@ngeqslant"),FJ(FK,"ams","rel","","\\@ngeqq"),FJ(FK,"ams","rel","","\\gneq",!0),FJ(FK,"ams","rel","","\\gneqq",!0),FJ(FK,"ams","rel","","\\@gvertneqq"),FJ(FK,"ams","rel","","\\gnsim",!0),FJ(FK,"ams","rel","","\\gnapprox",!0),FJ(FK,"ams","rel","","\\nsucc",!0),FJ(FK,"ams","rel","","\\nsucceq",!0),FJ(FK,"ams","rel","","\\succnsim",!0),FJ(FK,"ams","rel","","\\succnapprox",!0),FJ(FK,"ams","rel","","\\ncong",!0),FJ(FK,"ams","rel","","\\@nshortparallel"),FJ(FK,"ams","rel","","\\nparallel",!0),FJ(FK,"ams","rel","","\\nVDash",!0),FJ(FK,"ams","rel","","\\ntriangleright"),FJ(FK,"ams","rel","","\\ntrianglerighteq",!0),FJ(FK,"ams","rel","","\\@nsupseteqq"),FJ(FK,"ams","rel","","\\supsetneq",!0),FJ(FK,"ams","rel","","\\@varsupsetneq"),FJ(FK,"ams","rel","","\\supsetneqq",!0),FJ(FK,"ams","rel","","\\@varsupsetneqq"),FJ(FK,"ams","rel","","\\nVdash",!0),FJ(FK,"ams","rel","","\\precneqq",!0),FJ(FK,"ams","rel","","\\succneqq",!0),FJ(FK,"ams","rel","","\\@nsubseteqq"),FJ(FK,"ams","bin","","\\unlhd"),FJ(FK,"ams","bin","","\\unrhd"),FJ(FK,"ams","rel","","\\nleftarrow",!0),FJ(FK,"ams","rel","","\\nrightarrow",!0),FJ(FK,"ams","rel","","\\nLeftarrow",!0),FJ(FK,"ams","rel","","\\nRightarrow",!0),FJ(FK,"ams","rel","","\\nleftrightarrow",!0),FJ(FK,"ams","rel","","\\nLeftrightarrow",!0),FJ(FK,"ams","rel","","\\vartriangle"),FJ(FK,"ams",Qe,"","\\hslash"),FJ(FK,"ams",Qe,"","\\triangledown"),FJ(FK,"ams",Qe,"","\\lozenge"),FJ(FK,"ams",Qe,"","\\circledS"),FJ(FK,"ams",Qe,"\xae","\\circledR"),FJ(F0,"ams",Qe,"\xae","\\circledR"),FJ(FK,"ams",Qe,"","\\measuredangle",!0),FJ(FK,"ams",Qe,"","\\nexists"),FJ(FK,"ams",Qe,"","\\mho"),FJ(FK,"ams",Qe,"","\\Finv",!0),FJ(FK,"ams",Qe,"","\\Game",!0),FJ(FK,"ams",Qe,"","\\backprime"),FJ(FK,"ams",Qe,"","\\blacktriangle"),FJ(FK,"ams",Qe,"","\\blacktriangledown"),FJ(FK,"ams",Qe,"","\\blacksquare"),FJ(FK,"ams",Qe,"","\\blacklozenge"),FJ(FK,"ams",Qe,"","\\bigstar"),FJ(FK,"ams",Qe,"","\\sphericalangle",!0),FJ(FK,"ams",Qe,"","\\complement",!0),FJ(FK,"ams",Qe,"\xf0","\\eth",!0),FJ(F0,F1,Qe,"\xf0","\xf0"),FJ(FK,"ams",Qe,"","\\diagup"),FJ(FK,"ams",Qe,"","\\diagdown"),FJ(FK,"ams",Qe,"","\\square"),FJ(FK,"ams",Qe,"","\\Box"),FJ(FK,"ams",Qe,"","\\Diamond"),FJ(FK,"ams",Qe,"\xa5","\\yen",!0),FJ(F0,"ams",Qe,"\xa5","\\yen",!0),FJ(FK,"ams",Qe,"","\\checkmark",!0),FJ(F0,"ams",Qe,"","\\checkmark"),FJ(FK,"ams",Qe,"","\\beth",!0),FJ(FK,"ams",Qe,"","\\daleth",!0),FJ(FK,"ams",Qe,"","\\gimel",!0),FJ(FK,"ams",Qe,"","\\digamma",!0),FJ(FK,"ams",Qe,"","\\varkappa"),FJ(FK,"ams",F7,"","\\@ulcorner",!0),FJ(FK,"ams",F4,"","\\@urcorner",!0),FJ(FK,"ams",F7,"","\\@llcorner",!0),FJ(FK,"ams",F4,"","\\@lrcorner",!0),FJ(FK,"ams","rel","","\\leqq",!0),FJ(FK,"ams","rel","","\\leqslant",!0),FJ(FK,"ams","rel","","\\eqslantless",!0),FJ(FK,"ams","rel","","\\lesssim",!0),FJ(FK,"ams","rel","","\\lessapprox",!0),FJ(FK,"ams","rel","","\\approxeq",!0),FJ(FK,"ams","bin","","\\lessdot"),FJ(FK,"ams","rel","","\\lll",!0),FJ(FK,"ams","rel","","\\lessgtr",!0),FJ(FK,"ams","rel","","\\lesseqgtr",!0),FJ(FK,"ams","rel","","\\lesseqqgtr",!0),FJ(FK,"ams","rel","","\\doteqdot"),FJ(FK,"ams","rel","","\\risingdotseq",!0),FJ(FK,"ams","rel","","\\fallingdotseq",!0),FJ(FK,"ams","rel","","\\backsim",!0),FJ(FK,"ams","rel","","\\backsimeq",!0),FJ(FK,"ams","rel","","\\subseteqq",!0),FJ(FK,"ams","rel","","\\Subset",!0),FJ(FK,"ams","rel","","\\sqsubset",!0),FJ(FK,"ams","rel","","\\preccurlyeq",!0),FJ(FK,"ams","rel","","\\curlyeqprec",!0),FJ(FK,"ams","rel","","\\precsim",!0),FJ(FK,"ams","rel","","\\precapprox",!0),FJ(FK,"ams","rel","","\\vartriangleleft"),FJ(FK,"ams","rel","","\\trianglelefteq"),FJ(FK,"ams","rel","","\\vDash",!0),FJ(FK,"ams","rel","","\\Vvdash",!0),FJ(FK,"ams","rel","","\\smallsmile"),FJ(FK,"ams","rel","","\\smallfrown"),FJ(FK,"ams","rel","","\\bumpeq",!0),FJ(FK,"ams","rel","","\\Bumpeq",!0),FJ(FK,"ams","rel","","\\geqq",!0),FJ(FK,"ams","rel","","\\geqslant",!0),FJ(FK,"ams","rel","","\\eqslantgtr",!0),FJ(FK,"ams","rel","","\\gtrsim",!0),FJ(FK,"ams","rel","","\\gtrapprox",!0),FJ(FK,"ams","bin","","\\gtrdot"),FJ(FK,"ams","rel","","\\ggg",!0),FJ(FK,"ams","rel","","\\gtrless",!0),FJ(FK,"ams","rel","","\\gtreqless",!0),FJ(FK,"ams","rel","","\\gtreqqless",!0),FJ(FK,"ams","rel","","\\eqcirc",!0),FJ(FK,"ams","rel","","\\circeq",!0),FJ(FK,"ams","rel","","\\triangleq",!0),FJ(FK,"ams","rel","","\\thicksim"),FJ(FK,"ams","rel","","\\thickapprox"),FJ(FK,"ams","rel","","\\supseteqq",!0),FJ(FK,"ams","rel","","\\Supset",!0),FJ(FK,"ams","rel","","\\sqsupset",!0),FJ(FK,"ams","rel","","\\succcurlyeq",!0),FJ(FK,"ams","rel","","\\curlyeqsucc",!0),FJ(FK,"ams","rel","","\\succsim",!0),FJ(FK,"ams","rel","","\\succapprox",!0),FJ(FK,"ams","rel","","\\vartriangleright"),FJ(FK,"ams","rel","","\\trianglerighteq"),FJ(FK,"ams","rel","","\\Vdash",!0),FJ(FK,"ams","rel","","\\shortmid"),FJ(FK,"ams","rel","","\\shortparallel"),FJ(FK,"ams","rel","","\\between",!0),FJ(FK,"ams","rel","","\\pitchfork",!0),FJ(FK,"ams","rel","","\\varpropto"),FJ(FK,"ams","rel","","\\blacktriangleleft"),FJ(FK,"ams","rel","","\\therefore",!0),FJ(FK,"ams","rel","","\\backepsilon"),FJ(FK,"ams","rel","","\\blacktriangleright"),FJ(FK,"ams","rel","","\\because",!0),FJ(FK,"ams","rel","","\\llless"),FJ(FK,"ams","rel","","\\gggtr"),FJ(FK,"ams","bin","","\\lhd"),FJ(FK,"ams","bin","","\\rhd"),FJ(FK,"ams","rel","","\\eqsim",!0),FJ(FK,F1,"rel","","\\Join"),FJ(FK,"ams","rel","","\\Doteq",!0),FJ(FK,"ams","bin","","\\dotplus",!0),FJ(FK,"ams","bin","","\\smallsetminus"),FJ(FK,"ams","bin","","\\Cap",!0),FJ(FK,"ams","bin","","\\Cup",!0),FJ(FK,"ams","bin","","\\doublebarwedge",!0),FJ(FK,"ams","bin","","\\boxminus",!0),FJ(FK,"ams","bin","","\\boxplus",!0),FJ(FK,"ams","bin","","\\divideontimes",!0),FJ(FK,"ams","bin","","\\ltimes",!0),FJ(FK,"ams","bin","","\\rtimes",!0),FJ(FK,"ams","bin","","\\leftthreetimes",!0),FJ(FK,"ams","bin","","\\rightthreetimes",!0),FJ(FK,"ams","bin","","\\curlywedge",!0),FJ(FK,"ams","bin","","\\curlyvee",!0),FJ(FK,"ams","bin","","\\circleddash",!0),FJ(FK,"ams","bin","","\\circledast",!0),FJ(FK,"ams","bin","","\\centerdot"),FJ(FK,"ams","bin","","\\intercal",!0),FJ(FK,"ams","bin","","\\doublecap"),FJ(FK,"ams","bin","","\\doublecup"),FJ(FK,"ams","bin","","\\boxtimes",!0),FJ(FK,"ams","rel","","\\dashrightarrow",!0),FJ(FK,"ams","rel","","\\dashleftarrow",!0),FJ(FK,"ams","rel","","\\leftleftarrows",!0),FJ(FK,"ams","rel","","\\leftrightarrows",!0),FJ(FK,"ams","rel","","\\Lleftarrow",!0),FJ(FK,"ams","rel","","\\twoheadleftarrow",!0),FJ(FK,"ams","rel","","\\leftarrowtail",!0),FJ(FK,"ams","rel","","\\looparrowleft",!0),FJ(FK,"ams","rel","","\\leftrightharpoons",!0),FJ(FK,"ams","rel","","\\curvearrowleft",!0),FJ(FK,"ams","rel","","\\circlearrowleft",!0),FJ(FK,"ams","rel","","\\Lsh",!0),FJ(FK,"ams","rel","","\\upuparrows",!0),FJ(FK,"ams","rel","","\\upharpoonleft",!0),FJ(FK,"ams","rel","","\\downharpoonleft",!0),FJ(FK,F1,"rel","","\\origof",!0),FJ(FK,F1,"rel","","\\imageof",!0),FJ(FK,"ams","rel","","\\multimap",!0),FJ(FK,"ams","rel","","\\leftrightsquigarrow",!0),FJ(FK,"ams","rel","","\\rightrightarrows",!0),FJ(FK,"ams","rel","","\\rightleftarrows",!0),FJ(FK,"ams","rel","","\\twoheadrightarrow",!0),FJ(FK,"ams","rel","","\\rightarrowtail",!0),FJ(FK,"ams","rel","","\\looparrowright",!0),FJ(FK,"ams","rel","","\\curvearrowright",!0),FJ(FK,"ams","rel","","\\circlearrowright",!0),FJ(FK,"ams","rel","","\\Rsh",!0),FJ(FK,"ams","rel","","\\downdownarrows",!0),FJ(FK,"ams","rel","","\\upharpoonright",!0),FJ(FK,"ams","rel","","\\downharpoonright",!0),FJ(FK,"ams","rel","","\\rightsquigarrow",!0),FJ(FK,"ams","rel","","\\leadsto"),FJ(FK,"ams","rel","","\\Rrightarrow",!0),FJ(FK,"ams","rel","","\\restriction"),FJ(FK,F1,Qe,"","`"),FJ(FK,F1,Qe,"$","\\$"),FJ(F0,F1,Qe,"$","\\$"),FJ(F0,F1,Qe,"$","\\textdollar"),FJ(FK,F1,Qe,"%","\\%"),FJ(F0,F1,Qe,"%","\\%"),FJ(FK,F1,Qe,"_","\\_"),FJ(F0,F1,Qe,"_","\\_"),FJ(F0,F1,Qe,"_","\\textunderscore"),FJ(FK,F1,Qe,"","\\angle",!0),FJ(FK,F1,Qe,"","\\infty",!0),FJ(FK,F1,Qe,"","\\prime"),FJ(FK,F1,Qe,"","\\triangle"),FJ(FK,F1,Qe,"","\\Gamma",!0),FJ(FK,F1,Qe,"","\\Delta",!0),FJ(FK,F1,Qe,"","\\Theta",!0),FJ(FK,F1,Qe,"","\\Lambda",!0),FJ(FK,F1,Qe,"","\\Xi",!0),FJ(FK,F1,Qe,"","\\Pi",!0),FJ(FK,F1,Qe,"","\\Sigma",!0),FJ(FK,F1,Qe,"","\\Upsilon",!0),FJ(FK,F1,Qe,"","\\Phi",!0),FJ(FK,F1,Qe,"","\\Psi",!0),FJ(FK,F1,Qe,"","\\Omega",!0),FJ(FK,F1,Qe,"A",""),FJ(FK,F1,Qe,"B",""),FJ(FK,F1,Qe,"E",""),FJ(FK,F1,Qe,"Z",""),FJ(FK,F1,Qe,"H",""),FJ(FK,F1,Qe,"I",""),FJ(FK,F1,Qe,"K",""),FJ(FK,F1,Qe,"M",""),FJ(FK,F1,Qe,"N",""),FJ(FK,F1,Qe,"O",""),FJ(FK,F1,Qe,"P",""),FJ(FK,F1,Qe,"T",""),FJ(FK,F1,Qe,"X",""),FJ(FK,F1,Qe,"\xac","\\neg",!0),FJ(FK,F1,Qe,"\xac","\\lnot"),FJ(FK,F1,Qe,"","\\top"),FJ(FK,F1,Qe,"","\\bot"),FJ(FK,F1,Qe,"","\\emptyset"),FJ(FK,"ams",Qe,"","\\varnothing"),FJ(FK,F1,F3,"","\\alpha",!0),FJ(FK,F1,F3,"","\\beta",!0),FJ(FK,F1,F3,"","\\gamma",!0),FJ(FK,F1,F3,"","\\delta",!0),FJ(FK,F1,F3,"","\\epsilon",!0),FJ(FK,F1,F3,"","\\zeta",!0),FJ(FK,F1,F3,"","\\eta",!0),FJ(FK,F1,F3,"","\\theta",!0),FJ(FK,F1,F3,"","\\iota",!0),FJ(FK,F1,F3,"","\\kappa",!0),FJ(FK,F1,F3,"","\\lambda",!0),FJ(FK,F1,F3,"","\\mu",!0),FJ(FK,F1,F3,"","\\nu",!0),FJ(FK,F1,F3,"","\\xi",!0),FJ(FK,F1,F3,"","\\omicron",!0),FJ(FK,F1,F3,"","\\pi",!0),FJ(FK,F1,F3,"","\\rho",!0),FJ(FK,F1,F3,"","\\sigma",!0),FJ(FK,F1,F3,"","\\tau",!0),FJ(FK,F1,F3,"","\\upsilon",!0),FJ(FK,F1,F3,"","\\phi",!0),FJ(FK,F1,F3,"","\\chi",!0),FJ(FK,F1,F3,"","\\psi",!0),FJ(FK,F1,F3,"","\\omega",!0),FJ(FK,F1,F3,"","\\varepsilon",!0),FJ(FK,F1,F3,"","\\vartheta",!0),FJ(FK,F1,F3,"","\\varpi",!0),FJ(FK,F1,F3,"","\\varrho",!0),FJ(FK,F1,F3,"","\\varsigma",!0),FJ(FK,F1,F3,"","\\varphi",!0),FJ(FK,F1,"bin","","*",!0),FJ(FK,F1,"bin","+","+"),FJ(FK,F1,"bin","","-",!0),FJ(FK,F1,"bin","","\\cdot",!0),FJ(FK,F1,"bin","","\\circ",!0),FJ(FK,F1,"bin","\xf7","\\div",!0),FJ(FK,F1,"bin","\xb1","\\pm",!0),FJ(FK,F1,"bin","\xd7","\\times",!0),FJ(FK,F1,"bin","","\\cap",!0),FJ(FK,F1,"bin","","\\cup",!0),FJ(FK,F1,"bin","","\\setminus",!0),FJ(FK,F1,"bin","","\\land"),FJ(FK,F1,"bin","","\\lor"),FJ(FK,F1,"bin","","\\wedge",!0),FJ(FK,F1,"bin","","\\vee",!0),FJ(FK,F1,Qe,"","\\surd"),FJ(FK,F1,F7,"","\\langle",!0),FJ(FK,F1,F7,"","\\lvert"),FJ(FK,F1,F7,"","\\lVert"),FJ(FK,F1,F4,"?","?"),FJ(FK,F1,F4,"!","!"),FJ(FK,F1,F4,"","\\rangle",!0),FJ(FK,F1,F4,"","\\rvert"),FJ(FK,F1,F4,"","\\rVert"),FJ(FK,F1,"rel","=","="),FJ(FK,F1,"rel",":",":"),FJ(FK,F1,"rel","","\\approx",!0),FJ(FK,F1,"rel","","\\cong",!0),FJ(FK,F1,"rel","","\\ge"),FJ(FK,F1,"rel","","\\geq",!0),FJ(FK,F1,"rel","","\\gets"),FJ(FK,F1,"rel",">","\\gt",!0),FJ(FK,F1,"rel","","\\in",!0),FJ(FK,F1,"rel","","\\@not"),FJ(FK,F1,"rel","","\\subset",!0),FJ(FK,F1,"rel","","\\supset",!0),FJ(FK,F1,"rel","","\\subseteq",!0),FJ(FK,F1,"rel","","\\supseteq",!0),FJ(FK,"ams","rel","","\\nsubseteq",!0),FJ(FK,"ams","rel","","\\nsupseteq",!0),FJ(FK,F1,"rel","","\\models"),FJ(FK,F1,"rel","","\\leftarrow",!0),FJ(FK,F1,"rel","","\\le"),FJ(FK,F1,"rel","","\\leq",!0),FJ(FK,F1,"rel","<","\\lt",!0),FJ(FK,F1,"rel","","\\rightarrow",!0),FJ(FK,F1,"rel","","\\to"),FJ(FK,"ams","rel","","\\ngeq",!0),FJ(FK,"ams","rel","","\\nleq",!0),FJ(FK,F1,F9,"\xa0","\\ "),FJ(FK,F1,F9,"\xa0","\\space"),FJ(FK,F1,F9,"\xa0","\\nobreakspace"),FJ(F0,F1,F9,"\xa0","\\ "),FJ(F0,F1,F9,"\xa0"," "),FJ(F0,F1,F9,"\xa0","\\space"),FJ(F0,F1,F9,"\xa0","\\nobreakspace"),FJ(FK,F1,F9,null,"\\nobreak"),FJ(FK,F1,F9,null,"\\allowbreak"),FJ(FK,F1,F8,",",","),FJ(FK,F1,F8,";",";"),FJ(FK,"ams","bin","","\\barwedge",!0),FJ(FK,"ams","bin","","\\veebar",!0),FJ(FK,F1,"bin","","\\odot",!0),FJ(FK,F1,"bin","","\\oplus",!0),FJ(FK,F1,"bin","","\\otimes",!0),FJ(FK,F1,Qe,"","\\partial",!0),FJ(FK,F1,"bin","","\\oslash",!0),FJ(FK,"ams","bin","","\\circledcirc",!0),FJ(FK,"ams","bin","","\\boxdot",!0),FJ(FK,F1,"bin","","\\bigtriangleup"),FJ(FK,F1,"bin","","\\bigtriangledown"),FJ(FK,F1,"bin","","\\dagger"),FJ(FK,F1,"bin","","\\diamond"),FJ(FK,F1,"bin","","\\star"),FJ(FK,F1,"bin","","\\triangleleft"),FJ(FK,F1,"bin","","\\triangleright"),FJ(FK,F1,F7,"{","\\{"),FJ(F0,F1,Qe,"{","\\{"),FJ(F0,F1,Qe,"{","\\textbraceleft"),FJ(FK,F1,F4,"}","\\}"),FJ(F0,F1,Qe,"}","\\}"),FJ(F0,F1,Qe,"}","\\textbraceright"),FJ(FK,F1,F7,"{","\\lbrace"),FJ(FK,F1,F4,"}","\\rbrace"),FJ(FK,F1,F7,"[","\\lbrack",!0),FJ(F0,F1,Qe,"[","\\lbrack",!0),FJ(FK,F1,F4,"]","\\rbrack",!0),FJ(F0,F1,Qe,"]","\\rbrack",!0),FJ(FK,F1,F7,"(","\\lparen",!0),FJ(FK,F1,F4,")","\\rparen",!0),FJ(F0,F1,Qe,"<","\\textless",!0),FJ(F0,F1,Qe,">","\\textgreater",!0),FJ(FK,F1,F7,"","\\lfloor",!0),FJ(FK,F1,F4,"","\\rfloor",!0),FJ(FK,F1,F7,"","\\lceil",!0),FJ(FK,F1,F4,"","\\rceil",!0),FJ(FK,F1,Qe,"\\","\\backslash"),FJ(FK,F1,Qe,"","|"),FJ(FK,F1,Qe,"","\\vert"),FJ(F0,F1,Qe,"|","\\textbar",!0),FJ(FK,F1,Qe,"","\\|"),FJ(FK,F1,Qe,"","\\Vert"),FJ(F0,F1,Qe,"","\\textbardbl"),FJ(F0,F1,Qe,"~","\\textasciitilde"),FJ(F0,F1,Qe,"\\","\\textbackslash"),FJ(F0,F1,Qe,"^","\\textasciicircum"),FJ(FK,F1,"rel","","\\uparrow",!0),FJ(FK,F1,"rel","","\\Uparrow",!0),FJ(FK,F1,"rel","","\\downarrow",!0),FJ(FK,F1,"rel","","\\Downarrow",!0),FJ(FK,F1,"rel","","\\updownarrow",!0),FJ(FK,F1,"rel","","\\Updownarrow",!0),FJ(FK,F1,F6,"","\\coprod"),FJ(FK,F1,F6,"","\\bigvee"),FJ(FK,F1,F6,"","\\bigwedge"),FJ(FK,F1,F6,"","\\biguplus"),FJ(FK,F1,F6,"","\\bigcap"),FJ(FK,F1,F6,"","\\bigcup"),FJ(FK,F1,F6,"","\\int"),FJ(FK,F1,F6,"","\\intop"),FJ(FK,F1,F6,"","\\iint"),FJ(FK,F1,F6,"","\\iiint"),FJ(FK,F1,F6,"","\\prod"),FJ(FK,F1,F6,"","\\sum"),FJ(FK,F1,F6,"","\\bigotimes"),FJ(FK,F1,F6,"","\\bigoplus"),FJ(FK,F1,F6,"","\\bigodot"),FJ(FK,F1,F6,"","\\oint"),FJ(FK,F1,F6,"","\\oiint"),FJ(FK,F1,F6,"","\\oiiint"),FJ(FK,F1,F6,"","\\bigsqcup"),FJ(FK,F1,F6,"","\\smallint"),FJ(F0,F1,F5,"","\\textellipsis"),FJ(FK,F1,F5,"","\\mathellipsis"),FJ(F0,F1,F5,"","\\ldots",!0),FJ(FK,F1,F5,"","\\ldots",!0),FJ(FK,F1,F5,"","\\@cdots",!0),FJ(FK,F1,F5,"","\\ddots",!0),FJ(FK,F1,Qe,"","\\varvdots"),FJ(F0,F1,Qe,"","\\varvdots"),FJ(FK,F1,F2,"","\\acute"),FJ(FK,F1,F2,"","\\grave"),FJ(FK,F1,F2,"\xa8","\\ddot"),FJ(FK,F1,F2,"~","\\tilde"),FJ(FK,F1,F2,"","\\bar"),FJ(FK,F1,F2,"","\\breve"),FJ(FK,F1,F2,"","\\check"),FJ(FK,F1,F2,"^","\\hat"),FJ(FK,F1,F2,"","\\vec"),FJ(FK,F1,F2,"","\\dot"),FJ(FK,F1,F2,"","\\mathring"),FJ(FK,F1,F3,"","\\@imath"),FJ(FK,F1,F3,"","\\@jmath"),FJ(FK,F1,Qe,"",""),FJ(FK,F1,Qe,"",""),FJ(F0,F1,Qe,"","\\i",!0),FJ(F0,F1,Qe,"","\\j",!0),FJ(F0,F1,Qe,"\xdf","\\ss",!0),FJ(F0,F1,Qe,"\xe6","\\ae",!0),FJ(F0,F1,Qe,"","\\oe",!0),FJ(F0,F1,Qe,"\xf8","\\o",!0),FJ(F0,F1,Qe,"\xc6","\\AE",!0),FJ(F0,F1,Qe,"","\\OE",!0),FJ(F0,F1,Qe,"\xd8","\\O",!0),FJ(F0,F1,F2,"","\\'"),FJ(F0,F1,F2,"","\\`"),FJ(F0,F1,F2,"","\\^"),FJ(F0,F1,F2,"","\\~"),FJ(F0,F1,F2,"","\\="),FJ(F0,F1,F2,"","\\u"),FJ(F0,F1,F2,"","\\."),FJ(F0,F1,F2,"\xb8","\\c"),FJ(F0,F1,F2,"","\\r"),FJ(F0,F1,F2,"","\\v"),FJ(F0,F1,F2,"\xa8",'\\"'),FJ(F0,F1,F2,"","\\H"),FJ(F0,F1,F2,"","\\textcircled");var Qt={"--":!0,"---":!0,"``":!0,"''":!0};FJ(F0,F1,Qe,"","--",!0),FJ(F0,F1,Qe,"","\\textendash"),FJ(F0,F1,Qe,"","---",!0),FJ(F0,F1,Qe,"","\\textemdash"),FJ(F0,F1,Qe,"","`",!0),FJ(F0,F1,Qe,"","\\textquoteleft"),FJ(F0,F1,Qe,"","'",!0),FJ(F0,F1,Qe,"","\\textquoteright"),FJ(F0,F1,Qe,"","``",!0),FJ(F0,F1,Qe,"","\\textquotedblleft"),FJ(F0,F1,Qe,"","''",!0),FJ(F0,F1,Qe,"","\\textquotedblright"),FJ(FK,F1,Qe,"\xb0","\\degree",!0),FJ(F0,F1,Qe,"\xb0","\\degree"),FJ(F0,F1,Qe,"\xb0","\\textdegree",!0),FJ(FK,F1,Qe,"\xa3","\\pounds"),FJ(FK,F1,Qe,"\xa3","\\mathsterling",!0),FJ(F0,F1,Qe,"\xa3","\\pounds"),FJ(F0,F1,Qe,"\xa3","\\textsterling",!0),FJ(FK,"ams",Qe,"","\\maltese"),FJ(F0,"ams",Qe,"","\\maltese");for(var Qr='0123456789/@."',Qn=0;Qn<Qr.length;Qn++){var Qi=Qr.charAt(Qn);FJ(FK,F1,Qe,Qi,Qi)}for(var Qs='0123456789!@*()-=+";:?/.,',Qo=0;Qo<Qs.length;Qo++){var Qa=Qs.charAt(Qo);FJ(F0,F1,Qe,Qa,Qa)}for(var Ql="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Qc=0;Qc<Ql.length;Qc++){var Qh=Ql.charAt(Qc);FJ(FK,F1,F3,Qh,Qh),FJ(F0,F1,Qe,Qh,Qh)}FJ(FK,"ams",Qe,"C",""),FJ(F0,"ams",Qe,"C",""),FJ(FK,"ams",Qe,"H",""),FJ(F0,"ams",Qe,"H",""),FJ(FK,"ams",Qe,"N",""),FJ(F0,"ams",Qe,"N",""),FJ(FK,"ams",Qe,"P",""),FJ(F0,"ams",Qe,"P",""),FJ(FK,"ams",Qe,"Q",""),FJ(F0,"ams",Qe,"Q",""),FJ(FK,"ams",Qe,"R",""),FJ(F0,"ams",Qe,"R",""),FJ(FK,"ams",Qe,"Z",""),FJ(F0,"ams",Qe,"Z",""),FJ(FK,F1,F3,"h",""),FJ(F0,F1,F3,"h","");for(var Qu="",Qd=0;Qd<Ql.length;Qd++){var Qf=Ql.charAt(Qd);FJ(FK,F1,F3,Qf,Qu=String.fromCharCode(55349,56320+Qd)),FJ(F0,F1,Qe,Qf,Qu),FJ(FK,F1,F3,Qf,Qu=String.fromCharCode(55349,56372+Qd)),FJ(F0,F1,Qe,Qf,Qu),FJ(FK,F1,F3,Qf,Qu=String.fromCharCode(55349,56424+Qd)),FJ(F0,F1,Qe,Qf,Qu),FJ(FK,F1,F3,Qf,Qu=String.fromCharCode(55349,56580+Qd)),FJ(F0,F1,Qe,Qf,Qu),FJ(FK,F1,F3,Qf,Qu=String.fromCharCode(55349,56684+Qd)),FJ(F0,F1,Qe,Qf,Qu),FJ(FK,F1,F3,Qf,Qu=String.fromCharCode(55349,56736+Qd)),FJ(F0,F1,Qe,Qf,Qu),FJ(FK,F1,F3,Qf,Qu=String.fromCharCode(55349,56788+Qd)),FJ(F0,F1,Qe,Qf,Qu),FJ(FK,F1,F3,Qf,Qu=String.fromCharCode(55349,56840+Qd)),FJ(F0,F1,Qe,Qf,Qu),FJ(FK,F1,F3,Qf,Qu=String.fromCharCode(55349,56944+Qd)),FJ(F0,F1,Qe,Qf,Qu),Qd<26&&(FJ(FK,F1,F3,Qf,Qu=String.fromCharCode(55349,56632+Qd)),FJ(F0,F1,Qe,Qf,Qu),FJ(FK,F1,F3,Qf,Qu=String.fromCharCode(55349,56476+Qd)),FJ(F0,F1,Qe,Qf,Qu))}FJ(FK,F1,F3,"k",Qu="\uD835\uDD5C"),FJ(F0,F1,Qe,"k",Qu);for(var Qp=0;Qp<10;Qp++){var Qm=Qp.toString();FJ(FK,F1,F3,Qm,Qu=String.fromCharCode(55349,57294+Qp)),FJ(F0,F1,Qe,Qm,Qu),FJ(FK,F1,F3,Qm,Qu=String.fromCharCode(55349,57314+Qp)),FJ(F0,F1,Qe,Qm,Qu),FJ(FK,F1,F3,Qm,Qu=String.fromCharCode(55349,57324+Qp)),FJ(F0,F1,Qe,Qm,Qu),FJ(FK,F1,F3,Qm,Qu=String.fromCharCode(55349,57334+Qp)),FJ(F0,F1,Qe,Qm,Qu)}for(var Qg="\xd0\xde\xfe",Qy=0;Qy<Qg.length;Qy++){var Qb=Qg.charAt(Qy);FJ(FK,F1,F3,Qb,Qb),FJ(F0,F1,Qe,Qb,Qb)}var Qv=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],Qx=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Qw=function(e,t){var r=(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320)+65536,n=+("math"!==t);if(119808<=r&&r<120484){var i=Math.floor((r-119808)/26);return[Qv[i][2],Qv[i][n]]}if(120782<=r&&r<=120831){var s=Math.floor((r-120782)/10);return[Qx[s][2],Qx[s][n]]}if(120485===r||120486===r)return[Qv[0][2],Qv[0][n]];if(120486<r&&r<120782)return["",""];throw new B3("Unsupported character: "+e)},Qk=function(e,t,r){return FZ[r][e]&&FZ[r][e].replace&&(e=FZ[r][e].replace),{value:e,metrics:FS(e,t,r)}},QO=function(e,t,r,n,i){var s,o=Qk(e,t,r),a=o.metrics;if(e=o.value,a){var l=a.italic;("text"===r||n&&"mathit"===n.font)&&(l=0),s=new FV(e,a.height,a.depth,l,a.skew,a.width,i)}else"u">typeof console&&console.warn("No character metrics "+("for '"+e+"' in style '"+t+"' and mode '")+r+"'"),s=new FV(e,0,0,0,0,0,i);if(n){s.maxFontSize=n.sizeMultiplier,n.style.isTight()&&s.classes.push("mtight");var c=n.getColor();c&&(s.style.color=c)}return s},QS=(e,t)=>{if(FP(e.classes)!==FP(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;if(1===e.classes.length){var r=e.classes[0];if("mbin"===r||"mord"===r)return!1}for(var n in e.style)if(e.style.hasOwnProperty(n)&&e.style[n]!==t.style[n])return!1;for(var i in t.style)if(t.style.hasOwnProperty(i)&&e.style[i]!==t.style[i])return!1;return!0},QC=function(e){for(var t=0,r=0,n=0,i=0;i<e.children.length;i++){var s=e.children[i];s.height>t&&(t=s.height),s.depth>r&&(r=s.depth),s.maxFontSize>n&&(n=s.maxFontSize)}e.height=t,e.depth=r,e.maxFontSize=n},QT=function(e,t,r,n){var i=new F$(e,t,r,n);return QC(i),i},QA=(e,t,r,n)=>new F$(e,t,r,n),QM=function(e){var t=new Fx(e);return QC(t),t},QE=function(e){if("individualShift"===e.positionType){for(var t,r=e.children,n=[r[0]],i=-r[0].shift-r[0].elem.depth,s=i,o=1;o<r.length;o++){var a=-r[o].shift-s-r[o].elem.depth,l=a-(r[o-1].elem.height+r[o-1].elem.depth);s+=a,n.push({type:"kern",size:l}),n.push(r[o])}return{children:n,depth:i}}if("top"===e.positionType){for(var c=e.positionData,h=0;h<e.children.length;h++){var u=e.children[h];c-="kern"===u.type?u.size:u.elem.height+u.elem.depth}t=c}else if("bottom"===e.positionType)t=-e.positionData;else{var d=e.children[0];if("elem"!==d.type)throw Error('First child must have type "elem".');if("shift"===e.positionType)t=-d.elem.depth-e.positionData;else if("firstBaseline"===e.positionType)t=-d.elem.depth;else throw Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:t}},QN=function(e,t,r){var n="";switch(e){case"amsrm":n="AMS";break;case"textrm":n="Main";break;case"textsf":n="SansSerif";break;case"texttt":n="Typewriter";break;default:n=e}return n+"-"+("textbf"===t&&"textit"===r?"BoldItalic":"textbf"===t?"Bold":"textit"===t?"Italic":"Regular")},Q_={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Qj={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},QD={fontMap:Q_,makeSymbol:QO,mathsym:function(e,t,r,n){return void 0===n&&(n=[]),"boldsymbol"===r.font&&Qk(e,"Main-Bold",t).metrics?QO(e,"Main-Bold",t,r,n.concat(["mathbf"])):"\\"===e||"main"===FZ[t][e].font?QO(e,"Main-Regular",t,r,n):QO(e,"AMS-Regular",t,r,n.concat(["amsrm"]))},makeSpan:QT,makeSvgSpan:QA,makeLineSpan:function(e,t,r){var n=QT([e],[],t);return n.height=Math.max(r||t.fontMetrics().defaultRuleThickness,t.minRuleThickness),n.style.borderBottomWidth=FR(n.height),n.maxFontSize=1,n},makeAnchor:function(e,t,r,n){var i=new FB(e,t,r,n);return QC(i),i},makeFragment:QM,wrapFragment:function(e,t){return e instanceof Fx?QT([],[e],t):e},makeVList:function(e,t){for(var r,{children:n,depth:i}=QE(e),s=0,o=0;o<n.length;o++){var a=n[o];if("elem"===a.type){var l=a.elem;s=Math.max(s,l.maxFontSize,l.height)}}s+=2;var c=QT(["pstrut"],[]);c.style.height=FR(s);for(var h=[],u=i,d=i,f=i,p=0;p<n.length;p++){var m=n[p];if("kern"===m.type)f+=m.size;else{var g=m.elem,y=QT(m.wrapperClasses||[],[c,g],void 0,m.wrapperStyle||{});y.style.top=FR(-s-f-g.depth),m.marginLeft&&(y.style.marginLeft=m.marginLeft),m.marginRight&&(y.style.marginRight=m.marginRight),h.push(y),f+=g.height+g.depth}u=Math.min(u,f),d=Math.max(d,f)}var b=QT(["vlist"],h);if(b.style.height=FR(d),u<0){var v=QT([],[]),x=QT(["vlist"],[v]);x.style.height=FR(-u);var w=QT(["vlist-s"],[new FV("")]);r=[QT(["vlist-r"],[b,w]),QT(["vlist-r"],[x])]}else r=[QT(["vlist-r"],[b])];var k=QT(["vlist-t"],r);return 2===r.length&&k.classes.push("vlist-t2"),k.height=d,k.depth=-u,k},makeOrd:function(e,t,r){var n,i,s=e.mode,o=e.text,a=["mord"],l="math"===s||"text"===s&&t.font,c=l?t.font:t.fontFamily,h="",u="";if(55349===o.charCodeAt(0)&&([h,u]=Qw(o,s)),h.length>0)return QO(o,h,s,t,a.concat(u));if(c){if("boldsymbol"===c){var d="textord"!==r&&Qk(o,"Math-BoldItalic",s).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"};n=d.fontName,i=[d.fontClass]}else l?(n=Q_[c].fontName,i=[c]):(n=QN(c,t.fontWeight,t.fontShape),i=[c,t.fontWeight,t.fontShape]);if(Qk(o,n,s).metrics)return QO(o,n,s,t,a.concat(i));if(Qt.hasOwnProperty(o)&&"Typewriter"===n.slice(0,10)){for(var f=[],p=0;p<o.length;p++)f.push(QO(o[p],n,s,t,a.concat(i)));return QM(f)}}if("mathord"===r)return QO(o,"Math-Italic",s,t,a.concat(["mathnormal"]));if("textord"===r){var m=FZ[s][o]&&FZ[s][o].font;if("ams"===m)return QO(o,QN("amsrm",t.fontWeight,t.fontShape),s,t,a.concat("amsrm",t.fontWeight,t.fontShape));if("main"===m||!m)return QO(o,QN("textrm",t.fontWeight,t.fontShape),s,t,a.concat(t.fontWeight,t.fontShape));var g=QN(m,t.fontWeight,t.fontShape);return QO(o,g,s,t,a.concat(g,t.fontWeight,t.fontShape))}throw Error("unexpected type: "+r+" in makeOrd")},makeGlue:(e,t)=>{var r=QT(["mspace"],[],t),n=FD(e,t);return r.style.marginRight=FR(n),r},staticSvg:function(e,t){var[r,n,i]=Qj[e],s=QA(["overlay"],[new FH([new FW(r)],{width:FR(n),height:FR(i),style:"width:"+FR(n),viewBox:"0 0 "+1e3*n+" "+1e3*i,preserveAspectRatio:"xMinYMin"})],t);return s.height=i,s.style.height=FR(i),s.style.width=FR(n),s},svgData:Qj,tryCombineChars:e=>{for(var t=0;t<e.length-1;t++){var r=e[t],n=e[t+1];r instanceof FV&&n instanceof FV&&QS(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,e.splice(t+1,1),t--)}return e}},QR={number:3,unit:"mu"},QP={number:4,unit:"mu"},QI={number:5,unit:"mu"},Qz={mord:{mop:QR,mbin:QP,mrel:QI,minner:QR},mop:{mord:QR,mop:QR,mrel:QI,minner:QR},mbin:{mord:QP,mop:QP,mopen:QP,minner:QP},mrel:{mord:QI,mop:QI,mopen:QI,minner:QI},mopen:{},mclose:{mop:QR,mbin:QP,mrel:QI,minner:QR},mpunct:{mord:QR,mop:QR,mrel:QI,mopen:QR,mclose:QR,mpunct:QR,minner:QR},minner:{mord:QR,mop:QR,mbin:QP,mrel:QI,mopen:QR,mpunct:QR,minner:QR}},QL={mord:{mop:QR},mop:{mord:QR,mop:QR},mbin:{},mrel:{},mopen:{},mclose:{mop:QR},mpunct:{},minner:{mop:QR}},Qq={},Q$={},QB={};function QF(e){for(var{type:t,names:r,props:n,handler:i,htmlBuilder:s,mathmlBuilder:o}=e,a={type:t,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:void 0===n.allowedInMath||n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:i},l=0;l<r.length;++l)Qq[r[l]]=a;t&&(s&&(Q$[t]=s),o&&(QB[t]=o))}function QQ(e){var{type:t,htmlBuilder:r,mathmlBuilder:n}=e;QF({type:t,names:[],props:{numArgs:0},handler(){throw Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var QV=function(e){return"ordgroup"===e.type&&1===e.body.length?e.body[0]:e},QH=function(e){return"ordgroup"===e.type?e.body:[e]},QW=QD.makeSpan,QU=["leftmost","mbin","mopen","mrel","mop","mpunct"],QG=["rightmost","mrel","mclose","mpunct"],QX={display:Fd.DISPLAY,text:Fd.TEXT,script:Fd.SCRIPT,scriptscript:Fd.SCRIPTSCRIPT},QY={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},QZ=function(e,t,r,n){void 0===n&&(n=[null,null]);for(var i=[],s=0;s<e.length;s++){var o=Q4(e[s],t);if(o instanceof Fx){var a=o.children;i.push(...a)}else i.push(o)}if(QD.tryCombineChars(i),!r)return i;var l=t;if(1===e.length){var c=e[0];"sizing"===c.type?l=t.havingSize(c.size):"styling"===c.type&&(l=t.havingStyle(QX[c.style]))}var h=QW([n[0]||"leftmost"],[],t),u=QW([n[1]||"rightmost"],[],t),d="root"===r;return QJ(i,(e,t)=>{var r=t.classes[0],n=e.classes[0];"mbin"===r&&Ft.contains(QG,n)?t.classes[0]="mord":"mbin"===n&&Ft.contains(QU,r)&&(e.classes[0]="mord")},{node:h},u,d),QJ(i,(e,t)=>{var r=Q1(t),n=Q1(e),i=r&&n?e.hasClass("mtight")?QL[r][n]:Qz[r][n]:null;if(i)return QD.makeGlue(i,l)},{node:h},u,d),i},QJ=function e(t,r,n,i,s){i&&t.push(i);for(var o=0;o<t.length;o++){let i;var a=t[o],l=QK(a);if(l){e(l.children,r,n,null,s);continue}var c=!a.hasClass("mspace");if(c){var h=r(a,n.node);h&&(n.insertAfter?n.insertAfter(h):(t.unshift(h),o++))}c?n.node=a:s&&a.hasClass("newline")&&(n.node=QW(["leftmost"])),i=o,n.insertAfter=e=>{t.splice(i+1,0,e),o++}}i&&t.pop()},QK=function(e){return e instanceof Fx||e instanceof FB||e instanceof F$&&e.hasClass("enclosing")?e:null},Q0=function e(t,r){var n=QK(t);if(n){var i=n.children;if(i.length){if("right"===r)return e(i[i.length-1],"right");if("left"===r)return e(i[0],"left")}}return t},Q1=function(e,t){return e?(t&&(e=Q0(e,t)),QY[e.classes[0]]||null):null},Q2=function(e,t){var r=["nulldelimiter"].concat(e.baseSizingClasses());return QW(t.concat(r))},Q4=function(e,t,r){if(!e)return QW();if(Q$[e.type]){var n=Q$[e.type](e,t);if(r&&t.size!==r.size){n=QW(t.sizingClasses(r),[n],t);var i=t.sizeMultiplier/r.sizeMultiplier;n.height*=i,n.depth*=i}return n}throw new B3("Got group of unknown type: '"+e.type+"'")};function Q5(e,t){var r=QW(["base"],e,t),n=QW(["strut"]);return n.style.height=FR(r.height+r.depth),r.depth&&(n.style.verticalAlign=FR(-r.depth)),r.children.unshift(n),r}function Q3(e,t){var r,n=null;1===e.length&&"tag"===e[0].type&&(n=e[0].tag,e=e[0].body);var i,s=QZ(e,t,"root");2===s.length&&s[1].hasClass("tag")&&(i=s.pop());for(var o=[],a=[],l=0;l<s.length;l++)if(a.push(s[l]),s[l].hasClass("mbin")||s[l].hasClass("mrel")||s[l].hasClass("allowbreak")){for(var c=!1;l<s.length-1&&s[l+1].hasClass("mspace")&&!s[l+1].hasClass("newline");)l++,a.push(s[l]),s[l].hasClass("nobreak")&&(c=!0);c||(o.push(Q5(a,t)),a=[])}else s[l].hasClass("newline")&&(a.pop(),a.length>0&&(o.push(Q5(a,t)),a=[]),o.push(s[l]));a.length>0&&o.push(Q5(a,t)),n?((r=Q5(QZ(n,t,!0))).classes=["tag"],o.push(r)):i&&o.push(i);var h=QW(["katex-html"],o);if(h.setAttribute("aria-hidden","true"),r){var u=r.children[0];u.style.height=FR(h.height+h.depth),h.depth&&(u.style.verticalAlign=FR(-h.depth))}return h}function Q6(e){return new Fx(e)}class Q7{constructor(e,t,r){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=t||[],this.classes=r||[]}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);this.classes.length>0&&(e.className=FP(this.classes));for(var r=0;r<this.children.length;r++)if(this.children[r]instanceof Q8&&this.children[r+1]instanceof Q8){for(var n=this.children[r].toText()+this.children[++r].toText();this.children[r+1]instanceof Q8;)n+=this.children[++r].toText();e.appendChild(new Q8(n).toNode())}else e.appendChild(this.children[r].toNode());return e}toMarkup(){var e="<"+this.type;for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=Ft.escape(this.attributes[t]),e+='"');this.classes.length>0&&(e+=' class ="'+Ft.escape(FP(this.classes))+'"'),e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+("</"+this.type)+">"}toText(){return this.children.map(e=>e.toText()).join("")}}class Q8{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return Ft.escape(this.toText())}toText(){return this.text}}class Q9{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",FR(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+FR(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var Ve={MathNode:Q7,TextNode:Q8,SpaceNode:Q9,newDocumentFragment:Q6},Vt=function(e,t,r){return FZ[t][e]&&FZ[t][e].replace&&55349!==e.charCodeAt(0)&&!(Qt.hasOwnProperty(e)&&r&&(r.fontFamily&&"tt"===r.fontFamily.slice(4,6)||r.font&&"tt"===r.font.slice(4,6)))&&(e=FZ[t][e].replace),new Ve.TextNode(e)},Vr=function(e){return 1===e.length?e[0]:new Ve.MathNode("mrow",e)},Vn=function(e,t){if("texttt"===t.fontFamily)return"monospace";if("textsf"===t.fontFamily)return"textit"===t.fontShape&&"textbf"===t.fontWeight?"sans-serif-bold-italic":"textit"===t.fontShape?"sans-serif-italic":"textbf"===t.fontWeight?"bold-sans-serif":"sans-serif";if("textit"===t.fontShape&&"textbf"===t.fontWeight)return"bold-italic";if("textit"===t.fontShape)return"italic";if("textbf"===t.fontWeight)return"bold";var r=t.font;if(!r||"mathnormal"===r)return null;var n=e.mode;if("mathit"===r)return"italic";if("boldsymbol"===r)return"textord"===e.type?"bold":"bold-italic";if("mathbf"===r)return"bold";if("mathbb"===r)return"double-struck";if("mathsfit"===r)return"sans-serif-italic";if("mathfrak"===r)return"fraktur";if("mathscr"===r||"mathcal"===r)return"script";if("mathsf"===r)return"sans-serif";if("mathtt"===r)return"monospace";var i=e.text;return Ft.contains(["\\imath","\\jmath"],i)?null:(FZ[n][i]&&FZ[n][i].replace&&(i=FZ[n][i].replace),FS(i,QD.fontMap[r].fontName,n)?QD.fontMap[r].variant:null)};function Vi(e){if(!e)return!1;if("mi"===e.type&&1===e.children.length){var t=e.children[0];return t instanceof Q8&&"."===t.text}if("mo"!==e.type||1!==e.children.length||"true"!==e.getAttribute("separator")||"0em"!==e.getAttribute("lspace")||"0em"!==e.getAttribute("rspace"))return!1;var r=e.children[0];return r instanceof Q8&&","===r.text}var Vs=function(e,t,r){if(1===e.length){var n=Va(e[0],t);return r&&n instanceof Q7&&"mo"===n.type&&(n.setAttribute("lspace","0em"),n.setAttribute("rspace","0em")),[n]}for(var i,s=[],o=0;o<e.length;o++){var a=Va(e[o],t);if(a instanceof Q7&&i instanceof Q7){if("mtext"===a.type&&"mtext"===i.type&&a.getAttribute("mathvariant")===i.getAttribute("mathvariant")){i.children.push(...a.children);continue}if("mn"===a.type&&"mn"===i.type){i.children.push(...a.children);continue}if(Vi(a)&&"mn"===i.type){i.children.push(...a.children);continue}else if("mn"===a.type&&Vi(i))a.children=[...i.children,...a.children],s.pop();else if(("msup"===a.type||"msub"===a.type)&&a.children.length>=1&&("mn"===i.type||Vi(i))){var l=a.children[0];l instanceof Q7&&"mn"===l.type&&(l.children=[...i.children,...l.children],s.pop())}else if("mi"===i.type&&1===i.children.length){var c=i.children[0];if(c instanceof Q8&&""===c.text&&("mo"===a.type||"mi"===a.type||"mn"===a.type)){var h=a.children[0];h instanceof Q8&&h.text.length>0&&(h.text=h.text.slice(0,1)+""+h.text.slice(1),s.pop())}}}s.push(a),i=a}return s},Vo=function(e,t,r){return Vr(Vs(e,t,r))},Va=function(e,t){if(!e)return new Ve.MathNode("mrow");if(QB[e.type])return QB[e.type](e,t);throw new B3("Got group of unknown type: '"+e.type+"'")};function Vl(e,t,r,n,i){var s,o=Vs(e,r);s=1===o.length&&o[0]instanceof Q7&&Ft.contains(["mrow","mtable"],o[0].type)?o[0]:new Ve.MathNode("mrow",o);var a=new Ve.MathNode("annotation",[new Ve.TextNode(t)]);a.setAttribute("encoding","application/x-tex");var l=new Ve.MathNode("semantics",[s,a]),c=new Ve.MathNode("math",[l]);return c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&c.setAttribute("display","block"),QD.makeSpan([i?"katex":"katex-mathml"],[c])}var Vc=function(e){return new FE({style:e.displayMode?Fd.DISPLAY:Fd.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},Vh=function(e,t){if(t.displayMode){var r=["katex-display"];t.leqno&&r.push("leqno"),t.fleqn&&r.push("fleqn"),e=QD.makeSpan(r,[e])}return e},Vu=function(e,t,r){var n,i=Vc(r);if("mathml"===r.output)return Vl(e,t,i,r.displayMode,!0);if("html"===r.output){var s=Q3(e,i);n=QD.makeSpan(["katex"],[s])}else{var o=Vl(e,t,i,r.displayMode,!1),a=Q3(e,i);n=QD.makeSpan(["katex"],[o,a])}return Vh(n,r)},Vd={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},Vf={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Vp={encloseSpan:function(e,t,r,n,i){var s,o=e.height+e.depth+r+n;if(/fbox|color|angl/.test(t)){if(s=QD.makeSpan(["stretchy",t],[],i),"fbox"===t){var a=i.color&&i.getColor();a&&(s.style.borderColor=a)}}else{var l=[];/^[bx]cancel$/.test(t)&&l.push(new FU({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(t)&&l.push(new FU({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var c=new FH(l,{width:"100%",height:FR(o)});s=QD.makeSvgSpan([],[c],i)}return s.height=o,s.style.height=FR(o),s},mathMLnode:function(e){var t=new Ve.MathNode("mo",[new Ve.TextNode(Vd[e.replace(/^\\/,"")])]);return t.setAttribute("stretchy","true"),t},svgSpan:function(e,t){var{span:r,minWidth:n,height:i}=function(){var r=4e5,n=e.label.slice(1);if(Ft.contains(["widehat","widecheck","widetilde","utilde"],n)){var i,s,o,a,l="ordgroup"===(i=e.base).type?i.body.length:1;if(l>5)"widehat"===n||"widecheck"===n?(s=420,r=2364,a=.42,o=n+"4"):(s=312,r=2340,a=.34,o="tilde4");else{var c=[1,1,2,2,3,3][l];"widehat"===n||"widecheck"===n?(r=[0,1062,2364,2364,2364][c],s=[0,239,300,360,420][c],a=[0,.24,.3,.3,.36,.42][c],o=n+c):(r=[0,600,1033,2339,2340][c],s=[0,260,286,306,312][c],a=[0,.26,.286,.3,.306,.34][c],o="tilde"+c)}var h=new FH([new FW(o)],{width:"100%",height:FR(a),viewBox:"0 0 "+r+" "+s,preserveAspectRatio:"none"});return{span:QD.makeSvgSpan([],[h],t),minWidth:0,height:a}}var u,d,f=[],p=Vf[n],[m,g,y]=p,b=y/1e3,v=m.length;if(1===v)u=["hide-tail"],d=[p[3]];else if(2===v)u=["halfarrow-left","halfarrow-right"],d=["xMinYMin","xMaxYMin"];else if(3===v)u=["brace-left","brace-center","brace-right"],d=["xMinYMin","xMidYMin","xMaxYMin"];else throw Error(`Correct katexImagesData or update code here to support
                    `+v+" children.");for(var x=0;x<v;x++){var w=new FH([new FW(m[x])],{width:"400em",height:FR(b),viewBox:"0 0 "+r+" "+y,preserveAspectRatio:d[x]+" slice"}),k=QD.makeSvgSpan([u[x]],[w],t);if(1===v)return{span:k,minWidth:g,height:b};k.style.height=FR(b),f.push(k)}return{span:QD.makeSpan(["stretchy"],f,t),minWidth:g,height:b}}();return r.height=i,r.style.height=FR(i),n>0&&(r.style.minWidth=FR(n)),r}};function Vm(e,t){if(!e||e.type!==t)throw Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return e}function Vg(e){var t=Vy(e);if(!t)throw Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}function Vy(e){return e&&("atom"===e.type||FY.hasOwnProperty(e.type))?e:null}var Vb=(e,t)=>{e&&"supsub"===e.type?(s=(o=Vm(e.base,"accent")).base,e.base=s,a=function(e){if(e instanceof F$)return e;throw Error("Expected span<HtmlDomNode> but got "+String(e)+".")}(Q4(e,t)),e.base=o):s=(o=Vm(e,"accent")).base;var r=Q4(s,t.havingCrampedStyle()),n=o.isShifty&&Ft.isCharacterBox(s),i=0;n&&(i=FG(Q4(Ft.getBaseElem(s),t.havingCrampedStyle())).skew);var s,o,a,l,c="\\c"===o.label,h=c?r.height+r.depth:Math.min(r.height,t.fontMetrics().xHeight);if(o.isStretchy)l=Vp.svgSpan(o,t),l=QD.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"elem",elem:l,wrapperClasses:["svg-align"],wrapperStyle:i>0?{width:"calc(100% - "+FR(2*i)+")",marginLeft:FR(2*i)}:void 0}]},t);else{"\\vec"===o.label?(u=QD.staticSvg("vec",t),d=QD.svgData.vec[1]):((u=FG(u=QD.makeOrd({mode:o.mode,text:o.label},t,"textord"))).italic=0,d=u.width,c&&(h+=u.depth)),l=QD.makeSpan(["accent-body"],[u]);var u,d,f="\\textcircled"===o.label;f&&(l.classes.push("accent-full"),h=r.height);var p=i;f||(p-=d/2),l.style.left=FR(p),"\\textcircled"===o.label&&(l.style.top=".2em"),l=QD.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:-h},{type:"elem",elem:l}]},t)}var m=QD.makeSpan(["mord","accent"],[l],t);return a?(a.children[0]=m,a.height=Math.max(m.height,a.height),a.classes[0]="mord",a):m},Vv=(e,t)=>{var r=e.isStretchy?Vp.mathMLnode(e.label):new Ve.MathNode("mo",[Vt(e.label,e.mode)]),n=new Ve.MathNode("mover",[Va(e.base,t),r]);return n.setAttribute("accent","true"),n},Vx=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(e=>"\\"+e).join("|"));QF({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{var r=QV(t[0]),n=!Vx.test(e.funcName),i=!n||"\\widehat"===e.funcName||"\\widetilde"===e.funcName||"\\widecheck"===e.funcName;return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:n,isShifty:i,base:r}},htmlBuilder:Vb,mathmlBuilder:Vv}),QF({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{var r=t[0],n=e.parser.mode;return"math"===n&&(e.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+e.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:e.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:Vb,mathmlBuilder:Vv}),QF({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=t[0];return{type:"accentUnder",mode:r.mode,label:n,base:i}},htmlBuilder:(e,t)=>{var r=Q4(e.base,t),n=Vp.svgSpan(e,t),i=.12*("\\utilde"===e.label),s=QD.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:r}]},t);return QD.makeSpan(["mord","accentunder"],[s],t)},mathmlBuilder:(e,t)=>{var r=Vp.mathMLnode(e.label),n=new Ve.MathNode("munder",[Va(e.base,t),r]);return n.setAttribute("accentunder","true"),n}});var Vw=e=>{var t=new Ve.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};QF({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:n,funcName:i}=e;return{type:"xArrow",mode:n.mode,label:i,body:t[0],below:r[0]}},htmlBuilder(e,t){var r,n,i=t.style,s=t.havingStyle(i.sup()),o=QD.wrapFragment(Q4(e.body,s,t),t),a="\\x"===e.label.slice(0,2)?"x":"cd";o.classes.push(a+"-arrow-pad"),e.below&&(s=t.havingStyle(i.sub()),(r=QD.wrapFragment(Q4(e.below,s,t),t)).classes.push(a+"-arrow-pad"));var l=Vp.svgSpan(e,t),c=-t.fontMetrics().axisHeight+.5*l.height,h=-t.fontMetrics().axisHeight-.5*l.height-.111;if((o.depth>.25||"\\xleftequilibrium"===e.label)&&(h-=o.depth),r){var u=-t.fontMetrics().axisHeight+r.height+.5*l.height+.111;n=QD.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:h},{type:"elem",elem:l,shift:c},{type:"elem",elem:r,shift:u}]},t)}else n=QD.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:h},{type:"elem",elem:l,shift:c}]},t);return n.children[0].children[0].children[1].classes.push("svg-align"),QD.makeSpan(["mrel","x-arrow"],[n],t)},mathmlBuilder(e,t){var r,n=Vp.mathMLnode(e.label);if(n.setAttribute("minsize","x"===e.label.charAt(0)?"1.75em":"3.0em"),e.body){var i=Vw(Va(e.body,t));if(e.below){var s=Vw(Va(e.below,t));r=new Ve.MathNode("munderover",[n,s,i])}else r=new Ve.MathNode("mover",[n,i])}else if(e.below){var o=Vw(Va(e.below,t));r=new Ve.MathNode("munder",[n,o])}else r=Vw(),r=new Ve.MathNode("mover",[n,r]);return r}});var Vk=QD.makeSpan;function VO(e,t){var r=QZ(e.body,t,!0);return Vk([e.mclass],r,t)}function VS(e,t){var r,n=Vs(e.body,t);return"minner"===e.mclass?r=new Ve.MathNode("mpadded",n):"mord"===e.mclass?e.isCharacterBox?(r=n[0]).type="mi":r=new Ve.MathNode("mi",n):(e.isCharacterBox?(r=n[0]).type="mo":r=new Ve.MathNode("mo",n),"mbin"===e.mclass?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):"mpunct"===e.mclass?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):"mopen"===e.mclass||"mclose"===e.mclass?(r.attributes.lspace="0em",r.attributes.rspace="0em"):"minner"===e.mclass&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}QF({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(e,t){var{parser:r,funcName:n}=e,i=t[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:QH(i),isCharacterBox:Ft.isCharacterBox(i)}},htmlBuilder:VO,mathmlBuilder:VS});var VC=e=>{var t="ordgroup"===e.type&&e.body.length?e.body[0]:e;return"atom"===t.type&&("bin"===t.family||"rel"===t.family)?"m"+t.family:"mord"};QF({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(e,t){var{parser:r}=e;return{type:"mclass",mode:r.mode,mclass:VC(t[0]),body:QH(t[1]),isCharacterBox:Ft.isCharacterBox(t[1])}}}),QF({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(e,t){var r,{parser:n,funcName:i}=e,s=t[1],o=t[0];r="\\stackrel"!==i?VC(s):"mrel";var a={type:"op",mode:s.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:"\\stackrel"!==i,body:QH(s)},l={type:"supsub",mode:o.mode,base:a,sup:"\\underset"===i?null:o,sub:"\\underset"===i?o:null};return{type:"mclass",mode:n.mode,mclass:r,body:[l],isCharacterBox:Ft.isCharacterBox(l)}},htmlBuilder:VO,mathmlBuilder:VS}),QF({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"pmb",mode:r.mode,mclass:VC(t[0]),body:QH(t[0])}},htmlBuilder(e,t){var r=QZ(e.body,t,!0),n=QD.makeSpan([e.mclass],r,t);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(e,t){var r=Vs(e.body,t),n=new Ve.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var VT={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},VA=()=>({type:"styling",body:[],mode:"math",style:"display"}),VM=e=>"textord"===e.type&&"@"===e.text,VE=(e,t)=>("mathord"===e.type||"atom"===e.type)&&e.text===t;QF({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:t[0]}},htmlBuilder(e,t){var r=t.havingStyle(t.style.sup()),n=QD.wrapFragment(Q4(e.label,r,t),t);return n.classes.push("cd-label-"+e.side),n.style.bottom=FR(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(e,t){var r=new Ve.MathNode("mrow",[Va(e.label,t)]);return(r=new Ve.MathNode("mpadded",[r])).setAttribute("width","0"),"left"===e.side&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),(r=new Ve.MathNode("mstyle",[r])).setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}}),QF({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(e,t){var{parser:r}=e;return{type:"cdlabelparent",mode:r.mode,fragment:t[0]}},htmlBuilder(e,t){var r=QD.wrapFragment(Q4(e.fragment,t),t);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder:(e,t)=>new Ve.MathNode("mrow",[Va(e.fragment,t)])}),QF({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(e,t){for(var{parser:r}=e,n=Vm(t[0],"ordgroup"),i=n.body,s="",o=0;o<i.length;o++)s+=Vm(i[o],"textord").text;var a,l=parseInt(s);if(isNaN(l))throw new B3("\\@char has non-numeric argument "+s);if(l<0||l>=1114111)throw new B3("\\@char with invalid code point "+s);return l<=65535?a=String.fromCharCode(l):(l-=65536,a=String.fromCharCode((l>>10)+55296,(1023&l)+56320)),{type:"textord",mode:r.mode,text:a}}});var VN=(e,t)=>{var r=QZ(e.body,t.withColor(e.color),!1);return QD.makeFragment(r)},V_=(e,t)=>{var r=Vs(e.body,t.withColor(e.color)),n=new Ve.MathNode("mstyle",r);return n.setAttribute("mathcolor",e.color),n};QF({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(e,t){var{parser:r}=e,n=Vm(t[0],"color-token").color,i=t[1];return{type:"color",mode:r.mode,color:n,body:QH(i)}},htmlBuilder:VN,mathmlBuilder:V_}),QF({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(e,t){var{parser:r,breakOnTokenText:n}=e,i=Vm(t[0],"color-token").color;r.gullet.macros.set("\\current@color",i);var s=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:i,body:s}},htmlBuilder:VN,mathmlBuilder:V_}),QF({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(e,t,r){var{parser:n}=e,i="["===n.gullet.future().text?n.parseSizeGroup(!0):null,s=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:s,size:i&&Vm(i,"size").value}},htmlBuilder(e,t){var r=QD.makeSpan(["mspace"],[],t);return e.newLine&&(r.classes.push("newline"),e.size&&(r.style.marginTop=FR(FD(e.size,t)))),r},mathmlBuilder(e,t){var r=new Ve.MathNode("mspace");return e.newLine&&(r.setAttribute("linebreak","newline"),e.size&&r.setAttribute("height",FR(FD(e.size,t)))),r}});var Vj={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},VD=e=>{var t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new B3("Expected a control sequence",e);return t},VR=e=>{var t=e.gullet.popToken();return"="===t.text&&" "===(t=e.gullet.popToken()).text&&(t=e.gullet.popToken()),t},VP=(e,t,r,n)=>{var i=e.gullet.macros.get(r.text);null==i&&(r.noexpand=!0,i={tokens:[r],numArgs:0,unexpandable:!e.gullet.isExpandable(r.text)}),e.gullet.macros.set(t,i,n)};QF({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t,funcName:r}=e;t.consumeSpaces();var n=t.fetch();if(Vj[n.text])return("\\global"===r||"\\\\globallong"===r)&&(n.text=Vj[n.text]),Vm(t.parseFunction(),"internal");throw new B3("Invalid token after macro prefix",n)}}),QF({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=t.gullet.popToken(),i=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new B3("Expected a control sequence",n);for(var s,o=0,a=[[]];"{"!==t.gullet.future().text;)if("#"===(n=t.gullet.popToken()).text){if("{"===t.gullet.future().text){s=t.gullet.future(),a[o].push("{");break}if(n=t.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new B3('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==o+1)throw new B3('Argument number "'+n.text+'" out of order');o++,a.push([])}else{if("EOF"===n.text)throw new B3("Expected a macro definition");a[o].push(n.text)}var{tokens:l}=t.gullet.consumeArg();return s&&l.unshift(s),("\\edef"===r||"\\xdef"===r)&&(l=t.gullet.expandTokens(l)).reverse(),t.gullet.macros.set(i,{tokens:l,numArgs:o,delimiters:a},r===Vj[r]),{type:"internal",mode:t.mode}}}),QF({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=VD(t.gullet.popToken());t.gullet.consumeSpaces();var i=VR(t);return VP(t,n,i,"\\\\globallet"===r),{type:"internal",mode:t.mode}}}),QF({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=VD(t.gullet.popToken()),i=t.gullet.popToken(),s=t.gullet.popToken();return VP(t,n,s,"\\\\globalfuture"===r),t.gullet.pushToken(s),t.gullet.pushToken(i),{type:"internal",mode:t.mode}}});var VI=function(e,t,r){var n=FS(FZ.math[e]&&FZ.math[e].replace||e,t,r);if(!n)throw Error("Unsupported symbol "+e+" and font size "+t+".");return n},Vz=function(e,t,r,n){var i=r.havingBaseStyle(t),s=QD.makeSpan(n.concat(i.sizingClasses(r)),[e],r),o=i.sizeMultiplier/r.sizeMultiplier;return s.height*=o,s.depth*=o,s.maxFontSize=i.sizeMultiplier,s},VL=function(e,t,r){var n=t.havingBaseStyle(r),i=(1-t.sizeMultiplier/n.sizeMultiplier)*t.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=FR(i),e.height-=i,e.depth+=i},Vq=function(e,t,r,n,i,s){var o=Vz(QD.makeSymbol(e,"Main-Regular",i,n),t,n,s);return r&&VL(o,n,t),o},V$=function(e,t,r,n,i,s){var o=QD.makeSymbol(e,"Size"+t+"-Regular",i,n),a=Vz(QD.makeSpan(["delimsizing","size"+t],[o],n),Fd.TEXT,n,s);return r&&VL(a,n,Fd.TEXT),a},VB=function(e,t,r){return{type:"elem",elem:QD.makeSpan(["delimsizinginner","Size1-Regular"===t?"delim-size1":"delim-size4"],[QD.makeSpan([],[QD.makeSymbol(e,t,r)])])}},VF=function(e,t,r){var n=Fw["Size4-Regular"][e.charCodeAt(0)]?Fw["Size4-Regular"][e.charCodeAt(0)][4]:Fw["Size1-Regular"][e.charCodeAt(0)][4],i=new FH([new FW("inner",Fy(e,Math.round(1e3*t)))],{width:FR(n),height:FR(t),style:"width:"+FR(n),viewBox:"0 0 "+1e3*n+" "+Math.round(1e3*t),preserveAspectRatio:"xMinYMin"}),s=QD.makeSvgSpan([],[i],r);return s.height=t,s.style.height=FR(t),s.style.width=FR(n),{type:"elem",elem:s}},VQ={type:"kern",size:-.008},VV=["|","\\lvert","\\rvert","\\vert"],VH=["\\|","\\lVert","\\rVert","\\Vert"],VW=function(e,t,r,n,i,s){var o,a,l,c,h="",u=0;o=l=c=e,a=null;var d="Size1-Regular";"\\uparrow"===e?l=c="":"\\Uparrow"===e?l=c="":"\\downarrow"===e?o=l="":"\\Downarrow"===e?o=l="":"\\updownarrow"===e?(o="\\uparrow",l="",c="\\downarrow"):"\\Updownarrow"===e?(o="\\Uparrow",l="",c="\\Downarrow"):Ft.contains(VV,e)?(l="",h="vert",u=333):Ft.contains(VH,e)?(l="",h="doublevert",u=556):"["===e||"\\lbrack"===e?(o="",l="",c="",d="Size4-Regular",h="lbrack",u=667):"]"===e||"\\rbrack"===e?(o="",l="",c="",d="Size4-Regular",h="rbrack",u=667):"\\lfloor"===e||""===e?(l=o="",c="",d="Size4-Regular",h="lfloor",u=667):"\\lceil"===e||""===e?(o="",l=c="",d="Size4-Regular",h="lceil",u=667):"\\rfloor"===e||""===e?(l=o="",c="",d="Size4-Regular",h="rfloor",u=667):"\\rceil"===e||""===e?(o="",l=c="",d="Size4-Regular",h="rceil",u=667):"("===e||"\\lparen"===e?(o="",l="",c="",d="Size4-Regular",h="lparen",u=875):")"===e||"\\rparen"===e?(o="",l="",c="",d="Size4-Regular",h="rparen",u=875):"\\{"===e||"\\lbrace"===e?(o="",a="",c="",l="",d="Size4-Regular"):"\\}"===e||"\\rbrace"===e?(o="",a="",c="",l="",d="Size4-Regular"):"\\lgroup"===e||""===e?(o="",c="",l="",d="Size4-Regular"):"\\rgroup"===e||""===e?(o="",c="",l="",d="Size4-Regular"):"\\lmoustache"===e||""===e?(o="",c="",l="",d="Size4-Regular"):("\\rmoustache"===e||""===e)&&(o="",c="",l="",d="Size4-Regular");var f=VI(o,d,i),p=f.height+f.depth,m=VI(l,d,i),g=m.height+m.depth,y=VI(c,d,i),b=y.height+y.depth,v=0,x=1;if(null!==a){var w=VI(a,d,i);v=w.height+w.depth,x=2}var k=p+b+v,O=Math.max(0,Math.ceil((t-k)/(x*g))),S=k+O*x*g,C=n.fontMetrics().axisHeight;r&&(C*=n.sizeMultiplier);var T=S/2-C,A=[];if(h.length>0){var M=Math.round(1e3*S),E=Fv(h,Math.round(1e3*(S-p-b))),N=new FW(h,E),_=(u/1e3).toFixed(3)+"em",j=(M/1e3).toFixed(3)+"em",D=new FH([N],{width:_,height:j,viewBox:"0 0 "+u+" "+M}),R=QD.makeSvgSpan([],[D],n);R.height=M/1e3,R.style.width=_,R.style.height=j,A.push({type:"elem",elem:R})}else{if(A.push(VB(c,d,i)),A.push(VQ),null===a)A.push(VF(l,S-p-b+.016,n));else{var P=(S-p-b-v)/2+.016;A.push(VF(l,P,n)),A.push(VQ),A.push(VB(a,d,i)),A.push(VQ),A.push(VF(l,P,n))}A.push(VQ),A.push(VB(o,d,i))}var I=n.havingBaseStyle(Fd.TEXT),z=QD.makeVList({positionType:"bottom",positionData:T,children:A},I);return Vz(QD.makeSpan(["delimsizing","mult"],[z],I),Fd.TEXT,n,s)},VU=function(e,t,r,n,i){var s=Fg(e,n,r),o=new FH([new FW(e,s)],{width:"400em",height:FR(t),viewBox:"0 0 400000 "+r,preserveAspectRatio:"xMinYMin slice"});return QD.makeSvgSpan(["hide-tail"],[o],i)},VG=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],VX=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],VY=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],VZ=[0,1.2,1.8,2.4,3],VJ=[{type:"small",style:Fd.SCRIPTSCRIPT},{type:"small",style:Fd.SCRIPT},{type:"small",style:Fd.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],VK=[{type:"small",style:Fd.SCRIPTSCRIPT},{type:"small",style:Fd.SCRIPT},{type:"small",style:Fd.TEXT},{type:"stack"}],V0=[{type:"small",style:Fd.SCRIPTSCRIPT},{type:"small",style:Fd.SCRIPT},{type:"small",style:Fd.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],V1=function(e){if("small"===e.type)return"Main-Regular";if("large"===e.type)return"Size"+e.size+"-Regular";if("stack"===e.type)return"Size4-Regular";throw Error("Add support for delim type '"+e.type+"' here.")},V2=function(e,t,r,n){for(var i=Math.min(2,3-n.style.size),s=i;s<r.length&&"stack"!==r[s].type;s++){var o=VI(e,V1(r[s]),"math"),a=o.height+o.depth;if("small"===r[s].type&&(a*=n.havingBaseStyle(r[s].style).sizeMultiplier),a>t)return r[s]}return r[r.length-1]},V4=function(e,t,r,n,i,s){"<"===e||"\\lt"===e||""===e?e="\\langle":(">"===e||"\\gt"===e||""===e)&&(e="\\rangle");var o=Ft.contains(VY,e)?VJ:Ft.contains(VG,e)?V0:VK,a=V2(e,t,o,n);return"small"===a.type?Vq(e,a.style,r,n,i,s):"large"===a.type?V$(e,a.size,r,n,i,s):VW(e,t,r,n,i,s)},V5={sqrtImage:function(e,t){var r,n,i=t.havingBaseSizing(),s=V2("\\surd",e*i.sizeMultiplier,V0,i),o=i.sizeMultiplier,a=Math.max(0,t.minRuleThickness-t.fontMetrics().sqrtRuleThickness),l=0,c=0,h=0;return"small"===s.type?(h=1e3+1e3*a+80,e<1?o=1:e<1.4&&(o=.7),l=(1+a+.08)/o,c=(1+a)/o,(r=VU("sqrtMain",l,h,a,t)).style.minWidth="0.853em",n=.833/o):"large"===s.type?(h=1080*VZ[s.size],c=(VZ[s.size]+a)/o,l=(VZ[s.size]+a+.08)/o,(r=VU("sqrtSize"+s.size,l,h,a,t)).style.minWidth="1.02em",n=1/o):(l=e+a+.08,c=e+a,(r=VU("sqrtTall",l,h=Math.floor(1e3*e+a)+80,a,t)).style.minWidth="0.742em",n=1.056),r.height=c,r.style.height=FR(l),{span:r,advanceWidth:n,ruleWidth:(t.fontMetrics().sqrtRuleThickness+a)*o}},sizedDelim:function(e,t,r,n,i){if("<"===e||"\\lt"===e||""===e?e="\\langle":(">"===e||"\\gt"===e||""===e)&&(e="\\rangle"),Ft.contains(VG,e)||Ft.contains(VY,e))return V$(e,t,!1,r,n,i);if(Ft.contains(VX,e))return VW(e,VZ[t],!1,r,n,i);throw new B3("Illegal delimiter: '"+e+"'")},sizeToMaxHeight:VZ,customSizedDelim:V4,leftRightDelim:function(e,t,r,n,i,s){var o=n.fontMetrics().axisHeight*n.sizeMultiplier,a=5/n.fontMetrics().ptPerEm,l=Math.max(t-o,r+o);return V4(e,Math.max(l/500*901,2*l-a),!0,n,i,s)}},V3={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},V6=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function V7(e,t){var r=Vy(e);if(r&&Ft.contains(V6,r.text))return r;throw r?new B3("Invalid delimiter '"+r.text+"' after '"+t.funcName+"'",e):new B3("Invalid delimiter type '"+e.type+"'",e)}function V8(e){if(!e.body)throw Error("Bug: The leftright ParseNode wasn't fully parsed.")}QF({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{var r=V7(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:V3[e.funcName].size,mclass:V3[e.funcName].mclass,delim:r.text}},htmlBuilder:(e,t)=>"."===e.delim?QD.makeSpan([e.mclass]):V5.sizedDelim(e.delim,e.size,t,e.mode,[e.mclass]),mathmlBuilder:e=>{var t=[];"."!==e.delim&&t.push(Vt(e.delim,e.mode));var r=new Ve.MathNode("mo",t);"mopen"===e.mclass||"mclose"===e.mclass?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=FR(V5.sizeToMaxHeight[e.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}}),QF({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=e.parser.gullet.macros.get("\\current@color");if(r&&"string"!=typeof r)throw new B3("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:e.parser.mode,delim:V7(t[0],e).text,color:r}}}),QF({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=V7(t[0],e),n=e.parser;++n.leftrightDepth;var i=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var s=Vm(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:i,left:r.text,right:s.delim,rightColor:s.color}},htmlBuilder:(e,t)=>{V8(e);for(var r,n,i=QZ(e.body,t,!0,["mopen","mclose"]),s=0,o=0,a=!1,l=0;l<i.length;l++)i[l].isMiddle?a=!0:(s=Math.max(i[l].height,s),o=Math.max(i[l].depth,o));if(s*=t.sizeMultiplier,o*=t.sizeMultiplier,r="."===e.left?Q2(t,["mopen"]):V5.leftRightDelim(e.left,s,o,t,e.mode,["mopen"]),i.unshift(r),a)for(var c=1;c<i.length;c++){var h=i[c].isMiddle;h&&(i[c]=V5.leftRightDelim(h.delim,s,o,h.options,e.mode,[]))}if("."===e.right)n=Q2(t,["mclose"]);else{var u=e.rightColor?t.withColor(e.rightColor):t;n=V5.leftRightDelim(e.right,s,o,u,e.mode,["mclose"])}return i.push(n),QD.makeSpan(["minner"],i,t)},mathmlBuilder:(e,t)=>{V8(e);var r=Vs(e.body,t);if("."!==e.left){var n=new Ve.MathNode("mo",[Vt(e.left,e.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if("."!==e.right){var i=new Ve.MathNode("mo",[Vt(e.right,e.mode)]);i.setAttribute("fence","true"),e.rightColor&&i.setAttribute("mathcolor",e.rightColor),r.push(i)}return Vr(r)}}),QF({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=V7(t[0],e);if(!e.parser.leftrightDepth)throw new B3("\\middle without preceding \\left",r);return{type:"middle",mode:e.parser.mode,delim:r.text}},htmlBuilder:(e,t)=>{var r;if("."===e.delim)r=Q2(t,[]);else{r=V5.sizedDelim(e.delim,1,t,e.mode,[]);var n={delim:e.delim,options:t};r.isMiddle=n}return r},mathmlBuilder:(e,t)=>{var r="\\vert"===e.delim||"|"===e.delim?Vt("|","text"):Vt(e.delim,e.mode),n=new Ve.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var V9=(e,t)=>{var r,n,i=QD.wrapFragment(Q4(e.body,t),t),s=e.label.slice(1),o=t.sizeMultiplier,a=0,l=Ft.isCharacterBox(e.body);if("sout"===s)(n=QD.makeSpan(["stretchy","sout"])).height=t.fontMetrics().defaultRuleThickness/o,a=-.5*t.fontMetrics().xHeight;else if("phase"===s){var c=FD({number:.6,unit:"pt"},t),h=FD({number:.35,unit:"ex"},t);o/=t.havingBaseSizing().sizeMultiplier;var u=i.height+i.depth+c+h;i.style.paddingLeft=FR(u/2+c);var d=Math.floor(1e3*u*o),f=new FH([new FW("phase","M400000 "+d+" H0 L"+d/2+" 0 l65 45 L145 "+(d-80)+" H400000z")],{width:"400em",height:FR(d/1e3),viewBox:"0 0 400000 "+d,preserveAspectRatio:"xMinYMin slice"});(n=QD.makeSvgSpan(["hide-tail"],[f],t)).style.height=FR(u),a=i.depth+c+h}else{/cancel/.test(s)?l||i.classes.push("cancel-pad"):"angl"===s?i.classes.push("anglpad"):i.classes.push("boxpad");var p=0,m=0,g=0;/box/.test(s)?(g=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),m=p=t.fontMetrics().fboxsep+("colorbox"===s?0:g)):"angl"===s?(p=4*(g=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness)),m=Math.max(0,.25-i.depth)):m=p=.2*!!l,n=Vp.encloseSpan(i,s,p,m,t),/fbox|boxed|fcolorbox/.test(s)?(n.style.borderStyle="solid",n.style.borderWidth=FR(g)):"angl"===s&&.049!==g&&(n.style.borderTopWidth=FR(g),n.style.borderRightWidth=FR(g)),a=i.depth+m,e.backgroundColor&&(n.style.backgroundColor=e.backgroundColor,e.borderColor&&(n.style.borderColor=e.borderColor))}if(e.backgroundColor)r=QD.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:a},{type:"elem",elem:i,shift:0}]},t);else{var y=/cancel|phase/.test(s)?["svg-align"]:[];r=QD.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:0},{type:"elem",elem:n,shift:a,wrapperClasses:y}]},t)}return/cancel/.test(s)&&(r.height=i.height,r.depth=i.depth),/cancel/.test(s)&&!l?QD.makeSpan(["mord","cancel-lap"],[r],t):QD.makeSpan(["mord"],[r],t)},He=(e,t)=>{var r=0,n=new Ve.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Va(e.body,t)]);switch(e.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),"\\fcolorbox"===e.label){var i=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);n.setAttribute("style","border: "+i+"em solid "+String(e.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike")}return e.backgroundColor&&n.setAttribute("mathbackground",e.backgroundColor),n};QF({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(e,t,r){var{parser:n,funcName:i}=e,s=Vm(t[0],"color-token").color,o=t[1];return{type:"enclose",mode:n.mode,label:i,backgroundColor:s,body:o}},htmlBuilder:V9,mathmlBuilder:He}),QF({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(e,t,r){var{parser:n,funcName:i}=e,s=Vm(t[0],"color-token").color,o=Vm(t[1],"color-token").color,a=t[2];return{type:"enclose",mode:n.mode,label:i,backgroundColor:o,borderColor:s,body:a}},htmlBuilder:V9,mathmlBuilder:He}),QF({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\fbox",body:t[0]}}}),QF({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e,i=t[0];return{type:"enclose",mode:r.mode,label:n,body:i}},htmlBuilder:V9,mathmlBuilder:He}),QF({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\angl",body:t[0]}}});var Ht={};function Hr(e){for(var{type:t,names:r,props:n,handler:i,htmlBuilder:s,mathmlBuilder:o}=e,a={type:t,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},l=0;l<r.length;++l)Ht[r[l]]=a;s&&(Q$[t]=s),o&&(QB[t]=o)}var Hn={};function Hi(e){var t=[];e.consumeSpaces();var r=e.fetch().text;for("\\relax"===r&&(e.consume(),e.consumeSpaces(),r=e.fetch().text);"\\hline"===r||"\\hdashline"===r;)e.consume(),t.push("\\hdashline"===r),e.consumeSpaces(),r=e.fetch().text;return t}var Hs=e=>{if(!e.parser.settings.displayMode)throw new B3("{"+e.envName+"} can be used only in display mode.")};function Ho(e){if(-1===e.indexOf("ed"))return -1===e.indexOf("*")}function Ha(e,t,r){var{hskipBeforeAndAfter:n,addJot:i,cols:s,arraystretch:o,colSeparationType:a,autoTag:l,singleRow:c,emptySingleRow:h,maxNumCols:u,leqno:d}=t;if(e.gullet.beginGroup(),c||e.gullet.macros.set("\\cr","\\\\\\relax"),!o){var f=e.gullet.expandMacroAsText("\\arraystretch");if(null==f)o=1;else if(!(o=parseFloat(f))||o<0)throw new B3("Invalid \\arraystretch: "+f)}e.gullet.beginGroup();var p=[],m=[p],g=[],y=[],b=null!=l?[]:void 0;function v(){l&&e.gullet.macros.set("\\@eqnsw","1",!0)}function x(){b&&(e.gullet.macros.get("\\df@tag")?(b.push(e.subparse([new B5("\\df@tag")])),e.gullet.macros.set("\\df@tag",void 0,!0)):b.push(!!l&&"1"===e.gullet.macros.get("\\@eqnsw")))}for(v(),y.push(Hi(e));;){var w=e.parseExpression(!1,c?"\\end":"\\\\");e.gullet.endGroup(),e.gullet.beginGroup(),w={type:"ordgroup",mode:e.mode,body:w},r&&(w={type:"styling",mode:e.mode,style:r,body:[w]}),p.push(w);var k=e.fetch().text;if("&"===k){if(u&&p.length===u){if(c||a)throw new B3("Too many tab characters: &",e.nextToken);e.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}e.consume()}else if("\\end"===k){x(),1===p.length&&"styling"===w.type&&0===w.body[0].body.length&&(m.length>1||!h)&&m.pop(),y.length<m.length+1&&y.push([]);break}else if("\\\\"===k){e.consume();var O=void 0;" "!==e.gullet.future().text&&(O=e.parseSizeGroup(!0)),g.push(O?O.value:null),x(),y.push(Hi(e)),p=[],m.push(p),v()}else throw new B3("Expected & or \\\\ or \\cr or \\end",e.nextToken)}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:i,arraystretch:o,body:m,cols:s,rowGaps:g,hskipBeforeAndAfter:n,hLinesBeforeRow:y,colSeparationType:a,tags:b,leqno:d}}function Hl(e){return"d"===e.slice(0,1)?"display":"text"}var Hc=function(e,t){var r,n,i=e.body.length,s=e.hLinesBeforeRow,o=0,a=Array(i),l=[],c=Math.max(t.fontMetrics().arrayRuleWidth,t.minRuleThickness),h=1/t.fontMetrics().ptPerEm,u=5*h;e.colSeparationType&&"small"===e.colSeparationType&&(u=.2778*(t.havingStyle(Fd.SCRIPT).sizeMultiplier/t.sizeMultiplier));var d="CD"===e.colSeparationType?FD({number:3,unit:"ex"},t):12*h,f=3*h,p=e.arraystretch*d,m=.7*p,g=.3*p,y=0;function b(e){for(var t=0;t<e.length;++t)t>0&&(y+=.25),l.push({pos:y,isDashed:e[t]})}for(b(s[0]),r=0;r<e.body.length;++r){var v=e.body[r],x=m,w=g;o<v.length&&(o=v.length);var k=Array(v.length);for(n=0;n<v.length;++n){var O=Q4(v[n],t);w<O.depth&&(w=O.depth),x<O.height&&(x=O.height),k[n]=O}var S=e.rowGaps[r],C=0;S&&(C=FD(S,t))>0&&(w<(C+=g)&&(w=C),C=0),e.addJot&&(w+=f),k.height=x,k.depth=w,k.pos=y+=x,y+=w+C,a[r]=k,b(s[r+1])}var T,A,M=y/2+t.fontMetrics().axisHeight,E=e.cols||[],N=[],_=[];if(e.tags&&e.tags.some(e=>e))for(r=0;r<i;++r){var j=a[r],D=j.pos-M,R=e.tags[r],P=void 0;(P=!0===R?QD.makeSpan(["eqn-num"],[],t):!1===R?QD.makeSpan([],[],t):QD.makeSpan([],QZ(R,t,!0),t)).depth=j.depth,P.height=j.height,_.push({type:"elem",elem:P,shift:D})}for(n=0,A=0;n<o||A<E.length;++n,++A){for(var I=E[A]||{},z=!0;"separator"===I.type;){if(z||((T=QD.makeSpan(["arraycolsep"],[])).style.width=FR(t.fontMetrics().doubleRuleSep),N.push(T)),"|"===I.separator||":"===I.separator){var L="|"===I.separator?"solid":"dashed",q=QD.makeSpan(["vertical-separator"],[],t);q.style.height=FR(y),q.style.borderRightWidth=FR(c),q.style.borderRightStyle=L,q.style.margin="0 "+FR(-c/2);var $=y-M;$&&(q.style.verticalAlign=FR(-$)),N.push(q)}else throw new B3("Invalid separator type: "+I.separator);I=E[++A]||{},z=!1}if(!(n>=o)){var B=void 0;(n>0||e.hskipBeforeAndAfter)&&0!==(B=Ft.deflt(I.pregap,u))&&((T=QD.makeSpan(["arraycolsep"],[])).style.width=FR(B),N.push(T));var F=[];for(r=0;r<i;++r){var Q=a[r],V=Q[n];if(V){var W=Q.pos-M;V.depth=Q.depth,V.height=Q.height,F.push({type:"elem",elem:V,shift:W})}}F=QD.makeVList({positionType:"individualShift",children:F},t),F=QD.makeSpan(["col-align-"+(I.align||"c")],[F]),N.push(F),(n<o-1||e.hskipBeforeAndAfter)&&0!==(B=Ft.deflt(I.postgap,u))&&((T=QD.makeSpan(["arraycolsep"],[])).style.width=FR(B),N.push(T))}}if(a=QD.makeSpan(["mtable"],N),l.length>0){for(var U=QD.makeLineSpan("hline",t,c),G=QD.makeLineSpan("hdashline",t,c),X=[{type:"elem",elem:a,shift:0}];l.length>0;){var Y=l.pop(),Z=Y.pos-M;Y.isDashed?X.push({type:"elem",elem:G,shift:Z}):X.push({type:"elem",elem:U,shift:Z})}a=QD.makeVList({positionType:"individualShift",children:X},t)}if(0===_.length)return QD.makeSpan(["mord"],[a],t);var J=QD.makeVList({positionType:"individualShift",children:_},t);return J=QD.makeSpan(["tag"],[J],t),QD.makeFragment([a,J])},Hh={c:"center ",l:"left ",r:"right "},Hu=function(e,t){for(var r=[],n=new Ve.MathNode("mtd",[],["mtr-glue"]),i=new Ve.MathNode("mtd",[],["mml-eqn-num"]),s=0;s<e.body.length;s++){for(var o=e.body[s],a=[],l=0;l<o.length;l++)a.push(new Ve.MathNode("mtd",[Va(o[l],t)]));e.tags&&e.tags[s]&&(a.unshift(n),a.push(n),e.leqno?a.unshift(i):a.push(i)),r.push(new Ve.MathNode("mtr",a))}var c=new Ve.MathNode("mtable",r),h=.5===e.arraystretch?.1:.16+e.arraystretch-1+.09*!!e.addJot;c.setAttribute("rowspacing",FR(h));var u="",d="";if(e.cols&&e.cols.length>0){var f=e.cols,p="",m=!1,g=0,y=f.length;"separator"===f[0].type&&(u+="top ",g=1),"separator"===f[f.length-1].type&&(u+="bottom ",y-=1);for(var b=g;b<y;b++)"align"===f[b].type?(d+=Hh[f[b].align],m&&(p+="none "),m=!0):"separator"===f[b].type&&m&&(p+="|"===f[b].separator?"solid ":"dashed ",m=!1);c.setAttribute("columnalign",d.trim()),/[sd]/.test(p)&&c.setAttribute("columnlines",p.trim())}if("align"===e.colSeparationType){for(var v=e.cols||[],x="",w=1;w<v.length;w++)x+=w%2?"0em ":"1em ";c.setAttribute("columnspacing",x.trim())}else"alignat"===e.colSeparationType||"gather"===e.colSeparationType?c.setAttribute("columnspacing","0em"):"small"===e.colSeparationType?c.setAttribute("columnspacing","0.2778em"):"CD"===e.colSeparationType?c.setAttribute("columnspacing","0.5em"):c.setAttribute("columnspacing","1em");var k="",O=e.hLinesBeforeRow;u+=(O[0].length>0?"left ":"")+(O[O.length-1].length>0?"right ":"");for(var S=1;S<O.length-1;S++)k+=0===O[S].length?"none ":O[S][0]?"dashed ":"solid ";return/[sd]/.test(k)&&c.setAttribute("rowlines",k.trim()),""!==u&&(c=new Ve.MathNode("menclose",[c])).setAttribute("notation",u.trim()),e.arraystretch&&e.arraystretch<1&&(c=new Ve.MathNode("mstyle",[c])).setAttribute("scriptlevel","1"),c},Hd=function(e,t){-1===e.envName.indexOf("ed")&&Hs(e);var r,n=[],i=e.envName.indexOf("at")>-1?"alignat":"align",s="split"===e.envName,o=Ha(e.parser,{cols:n,addJot:!0,autoTag:s?void 0:Ho(e.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:s?2:void 0,leqno:e.parser.settings.leqno},"display"),a=0,l={type:"ordgroup",mode:e.mode,body:[]};if(t[0]&&"ordgroup"===t[0].type){for(var c="",h=0;h<t[0].body.length;h++)c+=Vm(t[0].body[h],"textord").text;a=2*(r=Number(c))}var u=!a;o.body.forEach(function(e){for(var t=1;t<e.length;t+=2){var n=Vm(e[t],"styling");Vm(n.body[0],"ordgroup").body.unshift(l)}if(u)a<e.length&&(a=e.length);else{var i=e.length/2;if(r<i)throw new B3("Too many math in a row: expected "+r+", but got "+i,e[0])}});for(var d=0;d<a;++d){var f="r",p=0;d%2==1?f="l":d>0&&u&&(p=1),n[d]={type:"align",align:f,pregap:p,postgap:0}}return o.colSeparationType=u?"align":"alignat",o};Hr({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){var r=(Vy(t[0])?[t[0]]:Vm(t[0],"ordgroup").body).map(function(e){var t=Vg(e).text;if(-1!=="lcr".indexOf(t))return{type:"align",align:t};if("|"===t)return{type:"separator",separator:"|"};if(":"===t)return{type:"separator",separator:":"};throw new B3("Unknown column alignment: "+t,e)}),n={cols:r,hskipBeforeAndAfter:!0,maxNumCols:r.length};return Ha(e.parser,n,Hl(e.envName))},htmlBuilder:Hc,mathmlBuilder:Hu}),Hr({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if("*"===e.envName.charAt(e.envName.length-1)){var i=e.parser;if(i.consumeSpaces(),"["===i.fetch().text){if(i.consume(),i.consumeSpaces(),r=i.fetch().text,-1==="lcr".indexOf(r))throw new B3("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),n.cols=[{type:"align",align:r}]}}var s=Ha(e.parser,n,Hl(e.envName)),o=Math.max(0,...s.body.map(e=>e.length));return s.cols=Array(o).fill({type:"align",align:r}),t?{type:"leftright",mode:e.mode,body:[s],left:t[0],right:t[1],rightColor:void 0}:s},htmlBuilder:Hc,mathmlBuilder:Hu}),Hr({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){var t=Ha(e.parser,{arraystretch:.5},"script");return t.colSeparationType="small",t},htmlBuilder:Hc,mathmlBuilder:Hu}),Hr({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){var r=(Vy(t[0])?[t[0]]:Vm(t[0],"ordgroup").body).map(function(e){var t=Vg(e).text;if(-1!=="lc".indexOf(t))return{type:"align",align:t};throw new B3("Unknown column alignment: "+t,e)});if(r.length>1)throw new B3("{subarray} can contain only one column");var n={cols:r,hskipBeforeAndAfter:!1,arraystretch:.5};if((n=Ha(e.parser,n,"script")).body.length>0&&n.body[0].length>1)throw new B3("{subarray} can contain only one column");return n},htmlBuilder:Hc,mathmlBuilder:Hu}),Hr({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){var t=Ha(e.parser,{arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},Hl(e.envName));return{type:"leftright",mode:e.mode,body:[t],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Hc,mathmlBuilder:Hu}),Hr({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:Hd,htmlBuilder:Hc,mathmlBuilder:Hu}),Hr({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){Ft.contains(["gather","gather*"],e.envName)&&Hs(e);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:Ho(e.envName),emptySingleRow:!0,leqno:e.parser.settings.leqno};return Ha(e.parser,t,"display")},htmlBuilder:Hc,mathmlBuilder:Hu}),Hr({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:Hd,htmlBuilder:Hc,mathmlBuilder:Hu}),Hr({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){Hs(e);var t={autoTag:Ho(e.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:e.parser.settings.leqno};return Ha(e.parser,t,"display")},htmlBuilder:Hc,mathmlBuilder:Hu}),Hr({type:"array",names:["CD"],props:{numArgs:0},handler:e=>(Hs(e),function(e){var t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();var r=e.fetch().text;if("&"===r||"\\\\"===r)e.consume();else if("\\end"===r){0===t[t.length-1].length&&t.pop();break}else throw new B3("Expected \\\\ or \\cr or \\end",e.nextToken)}for(var n=[],i=[n],s=0;s<t.length;s++){for(var o=t[s],a=VA(),l=0;l<o.length;l++)if(VM(o[l])){n.push(a);var c=Vg(o[l+=1]).text,h=[,,];if(h[0]={type:"ordgroup",mode:"math",body:[]},h[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(c)>-1)){if("<>AV".indexOf(c)>-1)for(var u=0;u<2;u++){for(var d=!0,f=l+1;f<o.length;f++){if(VE(o[f],c)){d=!1,l=f;break}if(VM(o[f]))throw new B3("Missing a "+c+" character to complete a CD arrow.",o[f]);h[u].body.push(o[f])}if(d)throw new B3("Missing a "+c+" character to complete a CD arrow.",o[l])}else throw new B3('Expected one of "<>AV=|." after @',o[l])}var p={type:"styling",body:[function(e,t,r){var n=VT[e];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":var i=r.callFunction("\\\\cdleft",[t[0]],[]),s=r.callFunction("\\Big",[{type:"atom",text:n,mode:"math",family:"rel"}],[]),o=r.callFunction("\\\\cdright",[t[1]],[]);return r.callFunction("\\\\cdparent",[{type:"ordgroup",mode:"math",body:[i,s,o]}],[]);case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":return r.callFunction("\\Big",[{type:"textord",text:"\\Vert",mode:"math"}],[]);default:return{type:"textord",text:" ",mode:"math"}}}(c,h,e)],mode:"math",style:"display"};n.push(p),a=VA()}else a.body.push(o[l]);s%2==0?n.push(a):n.shift(),n=[],i.push(n)}e.gullet.endGroup(),e.gullet.endGroup();var m=Array(i[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:i,arraystretch:1,addJot:!0,rowGaps:[null],cols:m,colSeparationType:"CD",hLinesBeforeRow:Array(i.length+1).fill([])}}(e.parser)),htmlBuilder:Hc,mathmlBuilder:Hu}),Hn["\\nonumber"]="\\gdef\\@eqnsw{0}",Hn["\\notag"]="\\nonumber",QF({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new B3(e.funcName+" valid only within array environment")}}),QF({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(e,t){var{parser:r,funcName:n}=e,i=t[0];if("ordgroup"!==i.type)throw new B3("Invalid environment name",i);for(var s="",o=0;o<i.body.length;++o)s+=Vm(i.body[o],"textord").text;if("\\begin"===n){if(!Ht.hasOwnProperty(s))throw new B3("No such environment: "+s,i);var a=Ht[s],{args:l,optArgs:c}=r.parseArguments("\\begin{"+s+"}",a),h={mode:r.mode,envName:s,parser:r},u=a.handler(h,l,c);r.expect("\\end",!1);var d=r.nextToken,f=Vm(r.parseFunction(),"environment");if(f.name!==s)throw new B3("Mismatch: \\begin{"+s+"} matched by \\end{"+f.name+"}",d);return u}return{type:"environment",mode:r.mode,name:s,nameGroup:i}}});var Hf=(e,t)=>{var r=e.font,n=t.withFont(r);return Q4(e.body,n)},Hp=(e,t)=>{var r=e.font,n=t.withFont(r);return Va(e.body,n)},Hm={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};QF({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=QV(t[0]),s=n;return s in Hm&&(s=Hm[s]),{type:"font",mode:r.mode,font:s.slice(1),body:i}},htmlBuilder:Hf,mathmlBuilder:Hp}),QF({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(e,t)=>{var{parser:r}=e,n=t[0],i=Ft.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:VC(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:i}}}),QF({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n,breakOnTokenText:i}=e,{mode:s}=r,o=r.parseExpression(!0,i);return{type:"font",mode:s,font:"math"+n.slice(1),body:{type:"ordgroup",mode:r.mode,body:o}}},htmlBuilder:Hf,mathmlBuilder:Hp});var Hg=(e,t)=>{var r=t;return"display"===e?r=r.id>=Fd.SCRIPT.id?r.text():Fd.DISPLAY:"text"===e&&r.size===Fd.DISPLAY.size?r=Fd.TEXT:"script"===e?r=Fd.SCRIPT:"scriptscript"===e&&(r=Fd.SCRIPTSCRIPT),r},Hy=(e,t)=>{var r,n,i,s,o,a,l,c,h=Hg(e.size,t.style),u=h.fracNum(),d=h.fracDen();c=t.havingStyle(u);var f=Q4(e.numer,c,t);if(e.continued){var p=8.5/t.fontMetrics().ptPerEm,m=3.5/t.fontMetrics().ptPerEm;f.height=f.height<p?p:f.height,f.depth=f.depth<m?m:f.depth}c=t.havingStyle(d);var g,y,b,v=Q4(e.denom,c,t);if(e.hasBarLine?(e.barSize?(y=FD(e.barSize,t),g=QD.makeLineSpan("frac-line",t,y)):g=QD.makeLineSpan("frac-line",t),y=g.height,b=g.height):(g=null,y=0,b=t.fontMetrics().defaultRuleThickness),h.size===Fd.DISPLAY.size||"display"===e.size?(r=t.fontMetrics().num1,n=y>0?3*b:7*b,i=t.fontMetrics().denom1):(y>0?(r=t.fontMetrics().num2,n=b):(r=t.fontMetrics().num3,n=3*b),i=t.fontMetrics().denom2),g){var x=t.fontMetrics().axisHeight;r-f.depth-(x+.5*y)<n&&(r+=n-(r-f.depth-(x+.5*y))),x-.5*y-(v.height-i)<n&&(i+=n-(x-.5*y-(v.height-i)));var w=-(x-.5*y);s=QD.makeVList({positionType:"individualShift",children:[{type:"elem",elem:v,shift:i},{type:"elem",elem:g,shift:w},{type:"elem",elem:f,shift:-r}]},t)}else{var k=r-f.depth-(v.height-i);k<n&&(r+=.5*(n-k),i+=.5*(n-k)),s=QD.makeVList({positionType:"individualShift",children:[{type:"elem",elem:v,shift:i},{type:"elem",elem:f,shift:-r}]},t)}return c=t.havingStyle(h),s.height*=c.sizeMultiplier/t.sizeMultiplier,s.depth*=c.sizeMultiplier/t.sizeMultiplier,o=h.size===Fd.DISPLAY.size?t.fontMetrics().delim1:h.size===Fd.SCRIPTSCRIPT.size?t.havingStyle(Fd.SCRIPT).fontMetrics().delim2:t.fontMetrics().delim2,a=null==e.leftDelim?Q2(t,["mopen"]):V5.customSizedDelim(e.leftDelim,o,!0,t.havingStyle(h),e.mode,["mopen"]),l=e.continued?QD.makeSpan([]):null==e.rightDelim?Q2(t,["mclose"]):V5.customSizedDelim(e.rightDelim,o,!0,t.havingStyle(h),e.mode,["mclose"]),QD.makeSpan(["mord"].concat(c.sizingClasses(t)),[a,QD.makeSpan(["mfrac"],[s]),l],t)},Hb=(e,t)=>{var r=new Ve.MathNode("mfrac",[Va(e.numer,t),Va(e.denom,t)]);if(e.hasBarLine){if(e.barSize){var n=FD(e.barSize,t);r.setAttribute("linethickness",FR(n))}}else r.setAttribute("linethickness","0px");var i=Hg(e.size,t.style);if(i.size!==t.style.size){r=new Ve.MathNode("mstyle",[r]);var s=i.size===Fd.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",s),r.setAttribute("scriptlevel","0")}if(null!=e.leftDelim||null!=e.rightDelim){var o=[];if(null!=e.leftDelim){var a=new Ve.MathNode("mo",[new Ve.TextNode(e.leftDelim.replace("\\",""))]);a.setAttribute("fence","true"),o.push(a)}if(o.push(r),null!=e.rightDelim){var l=new Ve.MathNode("mo",[new Ve.TextNode(e.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),o.push(l)}return Vr(o)}return r};QF({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(e,t)=>{var r,{parser:n,funcName:i}=e,s=t[0],o=t[1],a=null,l=null,c="auto";switch(i){case"\\dfrac":case"\\frac":case"\\tfrac":r=!0;break;case"\\\\atopfrac":r=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":r=!1,a="(",l=")";break;case"\\\\bracefrac":r=!1,a="\\{",l="\\}";break;case"\\\\brackfrac":r=!1,a="[",l="]";break;default:throw Error("Unrecognized genfrac command")}switch(i){case"\\dfrac":case"\\dbinom":c="display";break;case"\\tfrac":case"\\tbinom":c="text"}return{type:"genfrac",mode:n.mode,continued:!1,numer:s,denom:o,hasBarLine:r,leftDelim:a,rightDelim:l,size:c,barSize:null}},htmlBuilder:Hy,mathmlBuilder:Hb}),QF({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=t[0],s=t[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:i,denom:s,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),QF({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(e){var t,{parser:r,funcName:n,token:i}=e;switch(n){case"\\over":t="\\frac";break;case"\\choose":t="\\binom";break;case"\\atop":t="\\\\atopfrac";break;case"\\brace":t="\\\\bracefrac";break;case"\\brack":t="\\\\brackfrac";break;default:throw Error("Unrecognized infix genfrac command")}return{type:"infix",mode:r.mode,replaceWith:t,token:i}}});var Hv=["display","text","script","scriptscript"],Hx=function(e){var t=null;return e.length>0&&(t="."===(t=e)?null:t),t};QF({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(e,t){var r,{parser:n}=e,i=t[4],s=t[5],o=QV(t[0]),a="atom"===o.type&&"open"===o.family?Hx(o.text):null,l=QV(t[1]),c="atom"===l.type&&"close"===l.family?Hx(l.text):null,h=Vm(t[2],"size"),u=null;r=!!h.isBlank||(u=h.value).number>0;var d="auto",f=t[3];return"ordgroup"===f.type?f.body.length>0&&(d=Hv[Number(Vm(f.body[0],"textord").text)]):d=Hv[Number((f=Vm(f,"textord")).text)],{type:"genfrac",mode:n.mode,numer:i,denom:s,continued:!1,hasBarLine:r,barSize:u,leftDelim:a,rightDelim:c,size:d}},htmlBuilder:Hy,mathmlBuilder:Hb}),QF({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(e,t){var{parser:r,funcName:n,token:i}=e;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:Vm(t[0],"size").value,token:i}}}),QF({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=t[0],s=Fe(Vm(t[1],"infix").size),o=t[2],a=s.number>0;return{type:"genfrac",mode:r.mode,numer:i,denom:o,continued:!1,hasBarLine:a,barSize:s,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:Hy,mathmlBuilder:Hb});var Hw=(e,t)=>{var r,n,i=t.style;"supsub"===e.type?(r=e.sup?Q4(e.sup,t.havingStyle(i.sup()),t):Q4(e.sub,t.havingStyle(i.sub()),t),n=Vm(e.base,"horizBrace")):n=Vm(e,"horizBrace");var s,o=Q4(n.base,t.havingBaseStyle(Fd.DISPLAY)),a=Vp.svgSpan(n,t);if(n.isOver?(s=QD.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:a}]},t)).children[0].children[0].children[1].classes.push("svg-align"):(s=QD.makeVList({positionType:"bottom",positionData:o.depth+.1+a.height,children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:o}]},t)).children[0].children[0].children[0].classes.push("svg-align"),r){var l=QD.makeSpan(["mord",n.isOver?"mover":"munder"],[s],t);s=n.isOver?QD.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:r}]},t):QD.makeVList({positionType:"bottom",positionData:l.depth+.2+r.height+r.depth,children:[{type:"elem",elem:r},{type:"kern",size:.2},{type:"elem",elem:l}]},t)}return QD.makeSpan(["mord",n.isOver?"mover":"munder"],[s],t)};QF({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:t[0]}},htmlBuilder:Hw,mathmlBuilder:(e,t)=>{var r=Vp.mathMLnode(e.label);return new Ve.MathNode(e.isOver?"mover":"munder",[Va(e.base,t),r])}}),QF({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[1],i=Vm(t[0],"url").url;return r.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:r.mode,href:i,body:QH(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(e,t)=>{var r=QZ(e.body,t,!1);return QD.makeAnchor(e.href,[],r,t)},mathmlBuilder:(e,t)=>{var r=Vo(e.body,t);return r instanceof Q7||(r=new Q7("mrow",[r])),r.setAttribute("href",e.href),r}}),QF({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=Vm(t[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var i=[],s=0;s<n.length;s++){var o=n[s];"~"===o&&(o="\\textasciitilde"),i.push({type:"textord",mode:"text",text:o})}var a={type:"text",mode:r.mode,font:"\\texttt",body:i};return{type:"href",mode:r.mode,href:n,body:QH(a)}}}),QF({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(e,t){var{parser:r}=e;return{type:"hbox",mode:r.mode,body:QH(t[0])}},htmlBuilder(e,t){var r=QZ(e.body,t,!1);return QD.makeFragment(r)},mathmlBuilder:(e,t)=>new Ve.MathNode("mrow",Vs(e.body,t))}),QF({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n,token:i}=e,s=Vm(t[0],"raw").string,o=t[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var a,l={};switch(n){case"\\htmlClass":l.class=s,a={command:"\\htmlClass",class:s};break;case"\\htmlId":l.id=s,a={command:"\\htmlId",id:s};break;case"\\htmlStyle":l.style=s,a={command:"\\htmlStyle",style:s};break;case"\\htmlData":for(var c=s.split(","),h=0;h<c.length;h++){var u=c[h].split("=");if(2!==u.length)throw new B3("Error parsing key-value for \\htmlData");l["data-"+u[0].trim()]=u[1].trim()}a={command:"\\htmlData",attributes:l};break;default:throw Error("Unrecognized html command")}return r.settings.isTrusted(a)?{type:"html",mode:r.mode,attributes:l,body:QH(o)}:r.formatUnsupportedCmd(n)},htmlBuilder:(e,t)=>{var r=QZ(e.body,t,!1),n=["enclosing"];e.attributes.class&&n.push(...e.attributes.class.trim().split(/\s+/));var i=QD.makeSpan(n,r,t);for(var s in e.attributes)"class"!==s&&e.attributes.hasOwnProperty(s)&&i.setAttribute(s,e.attributes[s]);return i},mathmlBuilder:(e,t)=>Vo(e.body,t)}),QF({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"htmlmathml",mode:r.mode,html:QH(t[0]),mathml:QH(t[1])}},htmlBuilder:(e,t)=>{var r=QZ(e.html,t,!1);return QD.makeFragment(r)},mathmlBuilder:(e,t)=>Vo(e.mathml,t)});var Hk=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new B3("Invalid size: '"+e+"' in \\includegraphics");var r={number:+(t[1]+t[2]),unit:t[3]};if(!Fj(r))throw new B3("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r};QF({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(e,t,r)=>{var{parser:n}=e,i={number:0,unit:"em"},s={number:.9,unit:"em"},o={number:0,unit:"em"},a="";if(r[0])for(var l=Vm(r[0],"raw").string,c=l.split(","),h=0;h<c.length;h++){var u=c[h].split("=");if(2===u.length){var d=u[1].trim();switch(u[0].trim()){case"alt":a=d;break;case"width":i=Hk(d);break;case"height":s=Hk(d);break;case"totalheight":o=Hk(d);break;default:throw new B3("Invalid key: '"+u[0]+"' in \\includegraphics.")}}}var f=Vm(t[0],"url").url;return""===a&&(a=(a=(a=f).replace(/^.*[\\/]/,"")).substring(0,a.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:f})?{type:"includegraphics",mode:n.mode,alt:a,width:i,height:s,totalheight:o,src:f}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(e,t)=>{var r=FD(e.height,t),n=0;e.totalheight.number>0&&(n=FD(e.totalheight,t)-r);var i=0;e.width.number>0&&(i=FD(e.width,t));var s={height:FR(r+n)};i>0&&(s.width=FR(i)),n>0&&(s.verticalAlign=FR(-n));var o=new FF(e.src,e.alt,s);return o.height=r,o.depth=n,o},mathmlBuilder:(e,t)=>{var r=new Ve.MathNode("mglyph",[]);r.setAttribute("alt",e.alt);var n=FD(e.height,t),i=0;if(e.totalheight.number>0&&(i=FD(e.totalheight,t)-n,r.setAttribute("valign",FR(-i))),r.setAttribute("height",FR(n+i)),e.width.number>0){var s=FD(e.width,t);r.setAttribute("width",FR(s))}return r.setAttribute("src",e.src),r}}),QF({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:n}=e,i=Vm(t[0],"size");if(r.settings.strict){var s="m"===n[1],o="mu"===i.value.unit;s?(o||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, not "+i.value.unit+" units"),"math"!==r.mode&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):o&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:i.value}},htmlBuilder:(e,t)=>QD.makeGlue(e.dimension,t),mathmlBuilder(e,t){var r=FD(e.dimension,t);return new Ve.SpaceNode(r)}}),QF({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=t[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:i}},htmlBuilder:(e,t)=>{"clap"===e.alignment?(r=QD.makeSpan([],[Q4(e.body,t)]),r=QD.makeSpan(["inner"],[r],t)):r=QD.makeSpan(["inner"],[Q4(e.body,t)]);var r,n=QD.makeSpan(["fix"],[]),i=QD.makeSpan([e.alignment],[r,n],t),s=QD.makeSpan(["strut"]);return s.style.height=FR(i.height+i.depth),i.depth&&(s.style.verticalAlign=FR(-i.depth)),i.children.unshift(s),i=QD.makeSpan(["thinbox"],[i],t),QD.makeSpan(["mord","vbox"],[i],t)},mathmlBuilder:(e,t)=>{var r=new Ve.MathNode("mpadded",[Va(e.body,t)]);if("rlap"!==e.alignment){var n="llap"===e.alignment?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}}),QF({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){var{funcName:r,parser:n}=e,i=n.mode;n.switchMode("math");var s="\\("===r?"\\)":"$",o=n.parseExpression(!1,s);return n.expect(s),n.switchMode(i),{type:"styling",mode:n.mode,style:"text",body:o}}}),QF({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new B3("Mismatched "+e.funcName)}});var HO=(e,t)=>{switch(t.style.size){case Fd.DISPLAY.size:return e.display;case Fd.TEXT.size:return e.text;case Fd.SCRIPT.size:return e.script;case Fd.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}};QF({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"mathchoice",mode:r.mode,display:QH(t[0]),text:QH(t[1]),script:QH(t[2]),scriptscript:QH(t[3])}},htmlBuilder:(e,t)=>{var r=QZ(HO(e,t),t,!1);return QD.makeFragment(r)},mathmlBuilder:(e,t)=>Vo(HO(e,t),t)});var HS=(e,t,r,n,i,s,o)=>{e=QD.makeSpan([],[e]);var a,l,c,h=r&&Ft.isCharacterBox(r);if(t){var u=Q4(t,n.havingStyle(i.sup()),n);c={elem:u,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-u.depth)}}if(r){var d=Q4(r,n.havingStyle(i.sub()),n);l={elem:d,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-d.height)}}if(c&&l){var f=n.fontMetrics().bigOpSpacing5+l.elem.height+l.elem.depth+l.kern+e.depth+o;a=QD.makeVList({positionType:"bottom",positionData:f,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:FR(-s)},{type:"kern",size:l.kern},{type:"elem",elem:e},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:FR(s)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(l){var p=e.height-o;a=QD.makeVList({positionType:"top",positionData:p,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:FR(-s)},{type:"kern",size:l.kern},{type:"elem",elem:e}]},n)}else{if(!c)return e;var m=e.depth+o;a=QD.makeVList({positionType:"bottom",positionData:m,children:[{type:"elem",elem:e},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:FR(s)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}var g=[a];if(l&&0!==s&&!h){var y=QD.makeSpan(["mspace"],[],n);y.style.marginRight=FR(s),g.unshift(y)}return QD.makeSpan(["mop","op-limits"],g,n)},HC=["\\smallint"],HT=(e,t)=>{var r,n,i,s,o=!1;"supsub"===e.type?(n=e.sup,i=e.sub,s=Vm(e.base,"op"),o=!0):s=Vm(e,"op");var a=t.style,l=!1;if(a.size===Fd.DISPLAY.size&&s.symbol&&!Ft.contains(HC,s.name)&&(l=!0),s.symbol){var c=l?"Size2-Regular":"Size1-Regular",h="";if(("\\oiint"===s.name||"\\oiiint"===s.name)&&(h=s.name.slice(1),s.name="oiint"===h?"\\iint":"\\iiint"),r=QD.makeSymbol(s.name,c,"math",t,["mop","op-symbol",l?"large-op":"small-op"]),h.length>0){var u=r.italic,d=QD.staticSvg(h+"Size"+(l?"2":"1"),t);r=QD.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:d,shift:.08*!!l}]},t),s.name="\\"+h,r.classes.unshift("mop"),r.italic=u}}else if(s.body){var f=QZ(s.body,t,!0);1===f.length&&f[0]instanceof FV?(r=f[0]).classes[0]="mop":r=QD.makeSpan(["mop"],f,t)}else{for(var p=[],m=1;m<s.name.length;m++)p.push(QD.mathsym(s.name[m],s.mode,t));r=QD.makeSpan(["mop"],p,t)}var g=0,y=0;return(r instanceof FV||"\\oiint"===s.name||"\\oiiint"===s.name)&&!s.suppressBaseShift&&(g=(r.height-r.depth)/2-t.fontMetrics().axisHeight,y=r.italic),o?HS(r,n,i,t,a,y,g):(g&&(r.style.position="relative",r.style.top=FR(g)),r)},HA=(e,t)=>{var r;if(e.symbol)r=new Q7("mo",[Vt(e.name,e.mode)]),Ft.contains(HC,e.name)&&r.setAttribute("largeop","false");else if(e.body)r=new Q7("mo",Vs(e.body,t));else{r=new Q7("mi",[new Q8(e.name.slice(1))]);var n=new Q7("mo",[Vt("","text")]);r=e.parentIsSupSub?new Q7("mrow",[r,n]):Q6([r,n])}return r},HM={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};QF({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=n;return 1===i.length&&(i=HM[i]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:HT,mathmlBuilder:HA}),QF({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:QH(n)}},htmlBuilder:HT,mathmlBuilder:HA});var HE={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};QF({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:HT,mathmlBuilder:HA}),QF({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:HT,mathmlBuilder:HA}),QF({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e,n=r;return 1===n.length&&(n=HE[n]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:HT,mathmlBuilder:HA});var HN=(e,t)=>{var r,n,i,s,o=!1;if("supsub"===e.type?(n=e.sup,i=e.sub,s=Vm(e.base,"operatorname"),o=!0):s=Vm(e,"operatorname"),s.body.length>0){for(var a=s.body.map(e=>{var t=e.text;return"string"==typeof t?{type:"textord",mode:e.mode,text:t}:e}),l=QZ(a,t.withFont("mathrm"),!0),c=0;c<l.length;c++){var h=l[c];h instanceof FV&&(h.text=h.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}r=QD.makeSpan(["mop"],l,t)}else r=QD.makeSpan(["mop"],[],t);return o?HS(r,n,i,t,t.style,0,0):r};function H_(e,t,r){for(var n=QZ(e,t,!1),i=t.sizeMultiplier/r.sizeMultiplier,s=0;s<n.length;s++){var o=n[s].classes.indexOf("sizing");o<0?Array.prototype.push.apply(n[s].classes,t.sizingClasses(r)):n[s].classes[o+1]==="reset-size"+t.size&&(n[s].classes[o+1]="reset-size"+r.size),n[s].height*=i,n[s].depth*=i}return QD.makeFragment(n)}QF({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=t[0];return{type:"operatorname",mode:r.mode,body:QH(i),alwaysHandleSupSub:"\\operatornamewithlimits"===n,limits:!1,parentIsSupSub:!1}},htmlBuilder:HN,mathmlBuilder:(e,t)=>{for(var r=Vs(e.body,t.withFont("mathrm")),n=!0,i=0;i<r.length;i++){var s=r[i];if(!(s instanceof Ve.SpaceNode)){if(s instanceof Ve.MathNode)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":var o=s.children[0];1===s.children.length&&o instanceof Ve.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break;default:n=!1}else n=!1}}if(n){var a=r.map(e=>e.toText()).join("");r=[new Ve.TextNode(a)]}var l=new Ve.MathNode("mi",r);l.setAttribute("mathvariant","normal");var c=new Ve.MathNode("mo",[Vt("","text")]);return e.parentIsSupSub?new Ve.MathNode("mrow",[l,c]):Ve.newDocumentFragment([l,c])}}),Hn["\\operatorname"]="\\@ifstar\\operatornamewithlimits\\operatorname@",QQ({type:"ordgroup",htmlBuilder:(e,t)=>e.semisimple?QD.makeFragment(QZ(e.body,t,!1)):QD.makeSpan(["mord"],QZ(e.body,t,!0),t),mathmlBuilder:(e,t)=>Vo(e.body,t,!0)}),QF({type:"overline",names:["\\overline"],props:{numArgs:1},handler(e,t){var{parser:r}=e,n=t[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(e,t){var r=Q4(e.body,t.havingCrampedStyle()),n=QD.makeLineSpan("overline-line",t),i=t.fontMetrics().defaultRuleThickness,s=QD.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*i},{type:"elem",elem:n},{type:"kern",size:i}]},t);return QD.makeSpan(["mord","overline"],[s],t)},mathmlBuilder(e,t){var r=new Ve.MathNode("mo",[new Ve.TextNode("")]);r.setAttribute("stretchy","true");var n=new Ve.MathNode("mover",[Va(e.body,t),r]);return n.setAttribute("accent","true"),n}}),QF({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"phantom",mode:r.mode,body:QH(n)}},htmlBuilder:(e,t)=>{var r=QZ(e.body,t.withPhantom(),!1);return QD.makeFragment(r)},mathmlBuilder:(e,t)=>{var r=Vs(e.body,t);return new Ve.MathNode("mphantom",r)}}),QF({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(e,t)=>{var r=QD.makeSpan([],[Q4(e.body,t.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=QD.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t),QD.makeSpan(["mord"],[r],t)},mathmlBuilder:(e,t)=>{var r=Vs(QH(e.body),t),n=new Ve.MathNode("mphantom",r),i=new Ve.MathNode("mpadded",[n]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}}),QF({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(e,t)=>{var r=QD.makeSpan(["inner"],[Q4(e.body,t.withPhantom())]),n=QD.makeSpan(["fix"],[]);return QD.makeSpan(["mord","rlap"],[r,n],t)},mathmlBuilder:(e,t)=>{var r=Vs(QH(e.body),t),n=new Ve.MathNode("mphantom",r),i=new Ve.MathNode("mpadded",[n]);return i.setAttribute("width","0px"),i}}),QF({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e,n=Vm(t[0],"size").value,i=t[1];return{type:"raisebox",mode:r.mode,dy:n,body:i}},htmlBuilder(e,t){var r=Q4(e.body,t),n=FD(e.dy,t);return QD.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){var r=new Ve.MathNode("mpadded",[Va(e.body,t)]),n=e.dy.number+e.dy.unit;return r.setAttribute("voffset",n),r}}),QF({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t}=e;return{type:"internal",mode:t.mode}}}),QF({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(e,t,r){var{parser:n}=e,i=r[0],s=Vm(t[0],"size"),o=Vm(t[1],"size");return{type:"rule",mode:n.mode,shift:i&&Vm(i,"size").value,width:s.value,height:o.value}},htmlBuilder(e,t){var r=QD.makeSpan(["mord","rule"],[],t),n=FD(e.width,t),i=FD(e.height,t),s=e.shift?FD(e.shift,t):0;return r.style.borderRightWidth=FR(n),r.style.borderTopWidth=FR(i),r.style.bottom=FR(s),r.width=n,r.height=i+s,r.depth=-s,r.maxFontSize=1.125*i*t.sizeMultiplier,r},mathmlBuilder(e,t){var r=FD(e.width,t),n=FD(e.height,t),i=e.shift?FD(e.shift,t):0,s=t.color&&t.getColor()||"black",o=new Ve.MathNode("mspace");o.setAttribute("mathbackground",s),o.setAttribute("width",FR(r)),o.setAttribute("height",FR(n));var a=new Ve.MathNode("mpadded",[o]);return i>=0?a.setAttribute("height",FR(i)):(a.setAttribute("height",FR(i)),a.setAttribute("depth",FR(-i))),a.setAttribute("voffset",FR(i)),a}});var Hj=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"];QF({type:"sizing",names:Hj,props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{breakOnTokenText:r,funcName:n,parser:i}=e,s=i.parseExpression(!1,r);return{type:"sizing",mode:i.mode,size:Hj.indexOf(n)+1,body:s}},htmlBuilder:(e,t)=>{var r=t.havingSize(e.size);return H_(e.body,r,t)},mathmlBuilder:(e,t)=>{var r=t.havingSize(e.size),n=Vs(e.body,r),i=new Ve.MathNode("mstyle",n);return i.setAttribute("mathsize",FR(r.sizeMultiplier)),i}}),QF({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(e,t,r)=>{var{parser:n}=e,i=!1,s=!1,o=r[0]&&Vm(r[0],"ordgroup");if(o)for(var a="",l=0;l<o.body.length;++l)if("t"===(a=o.body[l].text))i=!0;else if("b"===a)s=!0;else{i=!1,s=!1;break}else i=!0,s=!0;var c=t[0];return{type:"smash",mode:n.mode,body:c,smashHeight:i,smashDepth:s}},htmlBuilder:(e,t)=>{var r=QD.makeSpan([],[Q4(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return r;if(e.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(e.smashDepth&&(r.depth=0,r.children))for(var i=0;i<r.children.length;i++)r.children[i].depth=0;var s=QD.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t);return QD.makeSpan(["mord"],[s],t)},mathmlBuilder:(e,t)=>{var r=new Ve.MathNode("mpadded",[Va(e.body,t)]);return e.smashHeight&&r.setAttribute("height","0px"),e.smashDepth&&r.setAttribute("depth","0px"),r}}),QF({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:n}=e,i=r[0],s=t[0];return{type:"sqrt",mode:n.mode,body:s,index:i}},htmlBuilder(e,t){var r=Q4(e.body,t.havingCrampedStyle());0===r.height&&(r.height=t.fontMetrics().xHeight),r=QD.wrapFragment(r,t);var n=t.fontMetrics().defaultRuleThickness,i=n;t.style.id<Fd.TEXT.id&&(i=t.fontMetrics().xHeight);var s=n+i/4,o=r.height+r.depth+s+n,{span:a,ruleWidth:l,advanceWidth:c}=V5.sqrtImage(o,t),h=a.height-l;h>r.height+r.depth+s&&(s=(s+h-r.height-r.depth)/2);var u=a.height-r.height-s-l;r.style.paddingLeft=FR(c);var d=QD.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+u)},{type:"elem",elem:a},{type:"kern",size:l}]},t);if(!e.index)return QD.makeSpan(["mord","sqrt"],[d],t);var f=t.havingStyle(Fd.SCRIPTSCRIPT),p=Q4(e.index,f,t),m=.6*(d.height-d.depth),g=QD.makeVList({positionType:"shift",positionData:-m,children:[{type:"elem",elem:p}]},t),y=QD.makeSpan(["root"],[g]);return QD.makeSpan(["mord","sqrt"],[y,d],t)},mathmlBuilder(e,t){var{body:r,index:n}=e;return n?new Ve.MathNode("mroot",[Va(r,t),Va(n,t)]):new Ve.MathNode("msqrt",[Va(r,t)])}});var HD={display:Fd.DISPLAY,text:Fd.TEXT,script:Fd.SCRIPT,scriptscript:Fd.SCRIPTSCRIPT};QF({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e,t){var{breakOnTokenText:r,funcName:n,parser:i}=e,s=i.parseExpression(!0,r),o=n.slice(1,n.length-5);return{type:"styling",mode:i.mode,style:o,body:s}},htmlBuilder(e,t){var r=HD[e.style],n=t.havingStyle(r).withFont("");return H_(e.body,n,t)},mathmlBuilder(e,t){var r=HD[e.style],n=t.havingStyle(r),i=Vs(e.body,n),s=new Ve.MathNode("mstyle",i),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[e.style];return s.setAttribute("scriptlevel",o[0]),s.setAttribute("displaystyle",o[1]),s}});var HR=function(e,t){var r=e.base;return r?"op"===r.type?r.limits&&(t.style.size===Fd.DISPLAY.size||r.alwaysHandleSupSub)?HT:null:"operatorname"===r.type?r.alwaysHandleSupSub&&(t.style.size===Fd.DISPLAY.size||r.limits)?HN:null:"accent"===r.type?Ft.isCharacterBox(r.base)?Vb:null:"horizBrace"===r.type&&!e.sub===r.isOver?Hw:null:null};QQ({type:"supsub",htmlBuilder(e,t){var r,n,i=HR(e,t);if(i)return i(e,t);var s,o,{base:a,sup:l,sub:c}=e,h=Q4(a,t),u=t.fontMetrics(),d=0,f=0,p=a&&Ft.isCharacterBox(a);if(l){var m=t.havingStyle(t.style.sup());s=Q4(l,m,t),p||(d=h.height-m.fontMetrics().supDrop*m.sizeMultiplier/t.sizeMultiplier)}if(c){var g=t.havingStyle(t.style.sub());o=Q4(c,g,t),p||(f=h.depth+g.fontMetrics().subDrop*g.sizeMultiplier/t.sizeMultiplier)}r=t.style===Fd.DISPLAY?u.sup1:t.style.cramped?u.sup3:u.sup2;var y=t.sizeMultiplier,b=FR(.5/u.ptPerEm/y),v=null;if(o){var x=e.base&&"op"===e.base.type&&e.base.name&&("\\oiint"===e.base.name||"\\oiiint"===e.base.name);(h instanceof FV||x)&&(v=FR(-h.italic))}if(s&&o){d=Math.max(d,r,s.depth+.25*u.xHeight),f=Math.max(f,u.sub2);var w=4*u.defaultRuleThickness;if(d-s.depth-(o.height-f)<w){f=w-(d-s.depth)+o.height;var k=.8*u.xHeight-(d-s.depth);k>0&&(d+=k,f-=k)}var O=[{type:"elem",elem:o,shift:f,marginRight:b,marginLeft:v},{type:"elem",elem:s,shift:-d,marginRight:b}];n=QD.makeVList({positionType:"individualShift",children:O},t)}else if(o){f=Math.max(f,u.sub1,o.height-.8*u.xHeight);var S=[{type:"elem",elem:o,marginLeft:v,marginRight:b}];n=QD.makeVList({positionType:"shift",positionData:f,children:S},t)}else if(s)d=Math.max(d,r,s.depth+.25*u.xHeight),n=QD.makeVList({positionType:"shift",positionData:-d,children:[{type:"elem",elem:s,marginRight:b}]},t);else throw Error("supsub must have either sup or sub.");var C=Q1(h,"right")||"mord";return QD.makeSpan([C],[h,QD.makeSpan(["msupsub"],[n])],t)},mathmlBuilder(e,t){var r,n,i=!1;e.base&&"horizBrace"===e.base.type&&!!e.sup===e.base.isOver&&(i=!0,n=e.base.isOver),e.base&&("op"===e.base.type||"operatorname"===e.base.type)&&(e.base.parentIsSupSub=!0);var s=[Va(e.base,t)];if(e.sub&&s.push(Va(e.sub,t)),e.sup&&s.push(Va(e.sup,t)),i)r=n?"mover":"munder";else if(e.sub){if(e.sup){var o=e.base;r=o&&"op"===o.type&&o.limits&&t.style===Fd.DISPLAY||o&&"operatorname"===o.type&&o.alwaysHandleSupSub&&(t.style===Fd.DISPLAY||o.limits)?"munderover":"msubsup"}else{var a=e.base;r=a&&"op"===a.type&&a.limits&&(t.style===Fd.DISPLAY||a.alwaysHandleSupSub)||a&&"operatorname"===a.type&&a.alwaysHandleSupSub&&(a.limits||t.style===Fd.DISPLAY)?"munder":"msub"}}else{var l=e.base;r=l&&"op"===l.type&&l.limits&&(t.style===Fd.DISPLAY||l.alwaysHandleSupSub)||l&&"operatorname"===l.type&&l.alwaysHandleSupSub&&(l.limits||t.style===Fd.DISPLAY)?"mover":"msup"}return new Ve.MathNode(r,s)}}),QQ({type:"atom",htmlBuilder:(e,t)=>QD.mathsym(e.text,e.mode,t,["m"+e.family]),mathmlBuilder(e,t){var r=new Ve.MathNode("mo",[Vt(e.text,e.mode)]);if("bin"===e.family){var n=Vn(e,t);"bold-italic"===n&&r.setAttribute("mathvariant",n)}else"punct"===e.family?r.setAttribute("separator","true"):("open"===e.family||"close"===e.family)&&r.setAttribute("stretchy","false");return r}});var HP={mi:"italic",mn:"normal",mtext:"normal"};QQ({type:"mathord",htmlBuilder:(e,t)=>QD.makeOrd(e,t,"mathord"),mathmlBuilder(e,t){var r=new Ve.MathNode("mi",[Vt(e.text,e.mode,t)]),n=Vn(e,t)||"italic";return n!==HP[r.type]&&r.setAttribute("mathvariant",n),r}}),QQ({type:"textord",htmlBuilder:(e,t)=>QD.makeOrd(e,t,"textord"),mathmlBuilder(e,t){var r,n=Vt(e.text,e.mode,t),i=Vn(e,t)||"normal";return i!==HP[(r="text"===e.mode?new Ve.MathNode("mtext",[n]):/[0-9]/.test(e.text)?new Ve.MathNode("mn",[n]):"\\prime"===e.text?new Ve.MathNode("mo",[n]):new Ve.MathNode("mi",[n])).type]&&r.setAttribute("mathvariant",i),r}});var HI={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},Hz={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};QQ({type:"spacing",htmlBuilder(e,t){if(Hz.hasOwnProperty(e.text)){var r=Hz[e.text].className||"";if("text"!==e.mode)return QD.makeSpan(["mspace",r],[QD.mathsym(e.text,e.mode,t)],t);var n=QD.makeOrd(e,t,"textord");return n.classes.push(r),n}if(HI.hasOwnProperty(e.text))return QD.makeSpan(["mspace",HI[e.text]],[],t);throw new B3('Unknown type of space "'+e.text+'"')},mathmlBuilder(e,t){var r;if(Hz.hasOwnProperty(e.text))r=new Ve.MathNode("mtext",[new Ve.TextNode("\xa0")]);else{if(HI.hasOwnProperty(e.text))return new Ve.MathNode("mspace");throw new B3('Unknown type of space "'+e.text+'"')}return r}});var HL=()=>{var e=new Ve.MathNode("mtd",[]);return e.setAttribute("width","50%"),e};QQ({type:"tag",mathmlBuilder(e,t){var r=new Ve.MathNode("mtable",[new Ve.MathNode("mtr",[HL(),new Ve.MathNode("mtd",[Vo(e.body,t)]),HL(),new Ve.MathNode("mtd",[Vo(e.tag,t)])])]);return r.setAttribute("width","100%"),r}});var Hq={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},H$={"\\textbf":"textbf","\\textmd":"textmd"},HB={"\\textit":"textit","\\textup":"textup"},HF=(e,t)=>{var r=e.font;return r?Hq[r]?t.withTextFontFamily(Hq[r]):H$[r]?t.withTextFontWeight(H$[r]):"\\emph"===r?"textit"===t.fontShape?t.withTextFontShape("textup"):t.withTextFontShape("textit"):t.withTextFontShape(HB[r]):t};QF({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:n}=e,i=t[0];return{type:"text",mode:r.mode,body:QH(i),font:n}},htmlBuilder(e,t){var r=HF(e,t),n=QZ(e.body,r,!0);return QD.makeSpan(["mord","text"],n,r)},mathmlBuilder(e,t){var r=HF(e,t);return Vo(e.body,r)}}),QF({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"underline",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=Q4(e.body,t),n=QD.makeLineSpan("underline-line",t),i=t.fontMetrics().defaultRuleThickness,s=QD.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:i},{type:"elem",elem:n},{type:"kern",size:3*i},{type:"elem",elem:r}]},t);return QD.makeSpan(["mord","underline"],[s],t)},mathmlBuilder(e,t){var r=new Ve.MathNode("mo",[new Ve.TextNode("")]);r.setAttribute("stretchy","true");var n=new Ve.MathNode("munder",[Va(e.body,t),r]);return n.setAttribute("accentunder","true"),n}}),QF({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"vcenter",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=Q4(e.body,t),n=t.fontMetrics().axisHeight,i=.5*(r.height-n-(r.depth+n));return QD.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:r}]},t)},mathmlBuilder:(e,t)=>new Ve.MathNode("mpadded",[Va(e.body,t)],["vcenter"])}),QF({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,r){throw new B3("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(e,t){for(var r=HQ(e),n=[],i=t.havingStyle(t.style.text()),s=0;s<r.length;s++){var o=r[s];"~"===o&&(o="\\textasciitilde"),n.push(QD.makeSymbol(o,"Typewriter-Regular",e.mode,i,["mord","texttt"]))}return QD.makeSpan(["mord","text"].concat(i.sizingClasses(t)),QD.tryCombineChars(n),i)},mathmlBuilder(e,t){var r=new Ve.TextNode(HQ(e)),n=new Ve.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var HQ=e=>e.body.replace(/ /g,e.star?"":"\xa0"),HV=`[ \r
	]`,HH=`\\\\(
|[ \r	]+
?)[ \r	]*`,HW="[-]",HU=RegExp(HW+"+$"),HG="("+HV+"+)|"+HH+"|([!-\\[\\]---]"+HW+"*|[\uD800-\uDBFF][\uDC00-\uDFFF]"+HW+"*|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5|(\\\\[a-zA-Z@]+)"+HV+"*|\\\\[^\uD800-\uDFFF])";class HX{constructor(e,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=t,this.tokenRegex=RegExp(HG,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,t){this.catcodes[e]=t}lex(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new B5("EOF",new B4(this,t,t));var r=this.tokenRegex.exec(e);if(null===r||r.index!==t)throw new B3("Unexpected character: '"+e[t]+"'",new B5(e[t],new B4(this,t,t+1)));var n=r[6]||r[3]||(r[2]?"\\ ":" ");if(14===this.catcodes[n]){var i=e.indexOf(`
`,this.tokenRegex.lastIndex);return -1===i?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=i+1,this.lex()}return new B5(n,new B4(this,t,this.tokenRegex.lastIndex))}}class HY{constructor(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(0===this.undefStack.length)throw new B3("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(null==e[t]?delete this.current[t]:this.current[t]=e[t])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,t,r){if(void 0===r&&(r=!1),r){for(var n=0;n<this.undefStack.length;n++)delete this.undefStack[n][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(e)&&(i[e]=this.current[e])}null==t?delete this.current[e]:this.current[e]=t}}Hn["\\noexpand"]=function(e){var t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}},Hn["\\expandafter"]=function(e){var t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}},Hn["\\@firstoftwo"]=function(e){return{tokens:e.consumeArgs(2)[0],numArgs:0}},Hn["\\@secondoftwo"]=function(e){return{tokens:e.consumeArgs(2)[1],numArgs:0}},Hn["\\@ifnextchar"]=function(e){var t=e.consumeArgs(3);e.consumeSpaces();var r=e.future();return 1===t[0].length&&t[0][0].text===r.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}},Hn["\\@ifstar"]="\\@ifnextchar *{\\@firstoftwo{#1}}",Hn["\\TextOrMath"]=function(e){var t=e.consumeArgs(2);return"text"===e.mode?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}};var HZ={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Hn["\\char"]=function(e){var t,r,n=e.popToken(),i="";if("'"===n.text)r=8,n=e.popToken();else if('"'===n.text)r=16,n=e.popToken();else if("`"===n.text){if("\\"===(n=e.popToken()).text[0])i=n.text.charCodeAt(1);else{if("EOF"===n.text)throw new B3("\\char` missing argument");i=n.text.charCodeAt(0)}}else r=10;if(r){if(null==(i=HZ[n.text])||i>=r)throw new B3("Invalid base-"+r+" digit "+n.text);for(;null!=(t=HZ[e.future().text])&&t<r;)i*=r,i+=t,e.popToken()}return"\\@char{"+i+"}"};var HJ=(e,t,r,n)=>{var i=e.consumeArg().tokens;if(1!==i.length)throw new B3("\\newcommand's first argument must be a macro name");var s=i[0].text,o=e.isDefined(s);if(o&&!t)throw new B3("\\newcommand{"+s+"} attempting to redefine "+s+"; use \\renewcommand");if(!o&&!r)throw new B3("\\renewcommand{"+s+"} when command "+s+" does not yet exist; use \\newcommand");var a=0;if(1===(i=e.consumeArg().tokens).length&&"["===i[0].text){for(var l="",c=e.expandNextToken();"]"!==c.text&&"EOF"!==c.text;)l+=c.text,c=e.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new B3("Invalid number of arguments: "+l);a=parseInt(l),i=e.consumeArg().tokens}return o&&n||e.macros.set(s,{tokens:i,numArgs:a}),""};Hn["\\newcommand"]=e=>HJ(e,!1,!0,!1),Hn["\\renewcommand"]=e=>HJ(e,!0,!1,!1),Hn["\\providecommand"]=e=>HJ(e,!0,!0,!0),Hn["\\message"]=e=>(console.log(e.consumeArgs(1)[0].reverse().map(e=>e.text).join("")),""),Hn["\\errmessage"]=e=>(console.error(e.consumeArgs(1)[0].reverse().map(e=>e.text).join("")),""),Hn["\\show"]=e=>{var t=e.popToken(),r=t.text;return console.log(t,e.macros.get(r),Qq[r],FZ.math[r],FZ.text[r]),""},Hn["\\bgroup"]="{",Hn["\\egroup"]="}",Hn["~"]="\\nobreakspace",Hn["\\lq"]="`",Hn["\\rq"]="'",Hn["\\aa"]="\\r a",Hn["\\AA"]="\\r A",Hn["\\textcopyright"]="\\html@mathml{\\textcircled{c}}{\\char`\xa9}",Hn["\\copyright"]="\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}",Hn["\\textregistered"]="\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`\xae}",Hn[""]="\\mathscr{B}",Hn[""]="\\mathscr{E}",Hn[""]="\\mathscr{F}",Hn[""]="\\mathscr{H}",Hn[""]="\\mathscr{I}",Hn[""]="\\mathscr{L}",Hn[""]="\\mathscr{M}",Hn[""]="\\mathscr{R}",Hn[""]="\\mathfrak{C}",Hn[""]="\\mathfrak{H}",Hn[""]="\\mathfrak{Z}",Hn["\\Bbbk"]="\\Bbb{k}",Hn["\xb7"]="\\cdotp",Hn["\\llap"]="\\mathllap{\\textrm{#1}}",Hn["\\rlap"]="\\mathrlap{\\textrm{#1}}",Hn["\\clap"]="\\mathclap{\\textrm{#1}}",Hn["\\mathstrut"]="\\vphantom{(}",Hn["\\underbar"]="\\underline{\\text{#1}}",Hn["\\not"]='\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}',Hn["\\neq"]="\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}",Hn["\\ne"]="\\neq",Hn[""]="\\neq",Hn["\\notin"]="\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}",Hn[""]="\\notin",Hn[""]="\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}",Hn[""]="\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}",Hn[""]="\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}",Hn[""]="\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}",Hn[""]="\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}",Hn[""]="\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}",Hn[""]="\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}",Hn[""]="\\perp",Hn[""]="\\mathclose{!\\mkern-0.8mu!}",Hn[""]="\\notni",Hn[""]="\\ulcorner",Hn[""]="\\urcorner",Hn[""]="\\llcorner",Hn[""]="\\lrcorner",Hn["\xa9"]="\\copyright",Hn["\xae"]="\\textregistered",Hn[""]="\\textregistered",Hn["\\ulcorner"]='\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}',Hn["\\urcorner"]='\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}',Hn["\\llcorner"]='\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}',Hn["\\lrcorner"]='\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}',Hn["\\vdots"]="{\\varvdots\\rule{0pt}{15pt}}",Hn[""]="\\vdots",Hn["\\varGamma"]="\\mathit{\\Gamma}",Hn["\\varDelta"]="\\mathit{\\Delta}",Hn["\\varTheta"]="\\mathit{\\Theta}",Hn["\\varLambda"]="\\mathit{\\Lambda}",Hn["\\varXi"]="\\mathit{\\Xi}",Hn["\\varPi"]="\\mathit{\\Pi}",Hn["\\varSigma"]="\\mathit{\\Sigma}",Hn["\\varUpsilon"]="\\mathit{\\Upsilon}",Hn["\\varPhi"]="\\mathit{\\Phi}",Hn["\\varPsi"]="\\mathit{\\Psi}",Hn["\\varOmega"]="\\mathit{\\Omega}",Hn["\\substack"]="\\begin{subarray}{c}#1\\end{subarray}",Hn["\\colon"]="\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax",Hn["\\boxed"]="\\fbox{$\\displaystyle{#1}$}",Hn["\\iff"]="\\DOTSB\\;\\Longleftrightarrow\\;",Hn["\\implies"]="\\DOTSB\\;\\Longrightarrow\\;",Hn["\\impliedby"]="\\DOTSB\\;\\Longleftarrow\\;",Hn["\\dddot"]="{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}",Hn["\\ddddot"]="{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}";var HK={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Hn["\\dots"]=function(e){var t="\\dotso",r=e.expandAfterFuture().text;return r in HK?t=HK[r]:("\\not"===r.slice(0,4)||r in FZ.math&&Ft.contains(["bin","rel"],FZ.math[r].group))&&(t="\\dotsb"),t};var H0={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Hn["\\dotso"]=function(e){return e.future().text in H0?"\\ldots\\,":"\\ldots"},Hn["\\dotsc"]=function(e){var t=e.future().text;return t in H0&&","!==t?"\\ldots\\,":"\\ldots"},Hn["\\cdots"]=function(e){return e.future().text in H0?"\\@cdots\\,":"\\@cdots"},Hn["\\dotsb"]="\\cdots",Hn["\\dotsm"]="\\cdots",Hn["\\dotsi"]="\\!\\cdots",Hn["\\dotsx"]="\\ldots\\,",Hn["\\DOTSI"]="\\relax",Hn["\\DOTSB"]="\\relax",Hn["\\DOTSX"]="\\relax",Hn["\\tmspace"]="\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax",Hn["\\,"]="\\tmspace+{3mu}{.1667em}",Hn["\\thinspace"]="\\,",Hn["\\>"]="\\mskip{4mu}",Hn["\\:"]="\\tmspace+{4mu}{.2222em}",Hn["\\medspace"]="\\:",Hn["\\;"]="\\tmspace+{5mu}{.2777em}",Hn["\\thickspace"]="\\;",Hn["\\!"]="\\tmspace-{3mu}{.1667em}",Hn["\\negthinspace"]="\\!",Hn["\\negmedspace"]="\\tmspace-{4mu}{.2222em}",Hn["\\negthickspace"]="\\tmspace-{5mu}{.277em}",Hn["\\enspace"]="\\kern.5em ",Hn["\\enskip"]="\\hskip.5em\\relax",Hn["\\quad"]="\\hskip1em\\relax",Hn["\\qquad"]="\\hskip2em\\relax",Hn["\\tag"]="\\@ifstar\\tag@literal\\tag@paren",Hn["\\tag@paren"]="\\tag@literal{({#1})}",Hn["\\tag@literal"]=e=>{if(e.macros.get("\\df@tag"))throw new B3("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"},Hn["\\bmod"]="\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}",Hn["\\pod"]="\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)",Hn["\\pmod"]="\\pod{{\\rm mod}\\mkern6mu#1}",Hn["\\mod"]="\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1",Hn["\\newline"]="\\\\\\relax",Hn["\\TeX"]="\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}";var H1=FR(Fw["Main-Regular"][84][1]-.7*Fw["Main-Regular"][65][1]);Hn["\\LaTeX"]="\\textrm{\\html@mathml{L\\kern-.36em\\raisebox{"+H1+"}{\\scriptstyle A}\\kern-.15em\\TeX}{LaTeX}}",Hn["\\KaTeX"]="\\textrm{\\html@mathml{K\\kern-.17em\\raisebox{"+H1+"}{\\scriptstyle A}\\kern-.15em\\TeX}{KaTeX}}",Hn["\\hspace"]="\\@ifstar\\@hspacer\\@hspace",Hn["\\@hspace"]="\\hskip #1\\relax",Hn["\\@hspacer"]="\\rule{0pt}{0pt}\\hskip #1\\relax",Hn["\\ordinarycolon"]=":",Hn["\\vcentcolon"]="\\mathrel{\\mathop\\ordinarycolon}",Hn["\\dblcolon"]='\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}',Hn["\\coloneqq"]='\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}',Hn["\\Coloneqq"]='\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}',Hn["\\coloneq"]='\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}',Hn["\\Coloneq"]='\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}',Hn["\\eqqcolon"]='\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}',Hn["\\Eqqcolon"]='\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}',Hn["\\eqcolon"]='\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}',Hn["\\Eqcolon"]='\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}',Hn["\\colonapprox"]='\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}',Hn["\\Colonapprox"]='\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}',Hn["\\colonsim"]='\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}',Hn["\\Colonsim"]='\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}',Hn[""]="\\dblcolon",Hn[""]="\\eqcolon",Hn[""]="\\coloneqq",Hn[""]="\\eqqcolon",Hn[""]="\\Coloneqq",Hn["\\ratio"]="\\vcentcolon",Hn["\\coloncolon"]="\\dblcolon",Hn["\\colonequals"]="\\coloneqq",Hn["\\coloncolonequals"]="\\Coloneqq",Hn["\\equalscolon"]="\\eqqcolon",Hn["\\equalscoloncolon"]="\\Eqqcolon",Hn["\\colonminus"]="\\coloneq",Hn["\\coloncolonminus"]="\\Coloneq",Hn["\\minuscolon"]="\\eqcolon",Hn["\\minuscoloncolon"]="\\Eqcolon",Hn["\\coloncolonapprox"]="\\Colonapprox",Hn["\\coloncolonsim"]="\\Colonsim",Hn["\\simcolon"]="\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}",Hn["\\simcoloncolon"]="\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}",Hn["\\approxcolon"]="\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}",Hn["\\approxcoloncolon"]="\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}",Hn["\\notni"]="\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}",Hn["\\limsup"]="\\DOTSB\\operatorname*{lim\\,sup}",Hn["\\liminf"]="\\DOTSB\\operatorname*{lim\\,inf}",Hn["\\injlim"]="\\DOTSB\\operatorname*{inj\\,lim}",Hn["\\projlim"]="\\DOTSB\\operatorname*{proj\\,lim}",Hn["\\varlimsup"]="\\DOTSB\\operatorname*{\\overline{lim}}",Hn["\\varliminf"]="\\DOTSB\\operatorname*{\\underline{lim}}",Hn["\\varinjlim"]="\\DOTSB\\operatorname*{\\underrightarrow{lim}}",Hn["\\varprojlim"]="\\DOTSB\\operatorname*{\\underleftarrow{lim}}",Hn["\\gvertneqq"]="\\html@mathml{\\@gvertneqq}{}",Hn["\\lvertneqq"]="\\html@mathml{\\@lvertneqq}{}",Hn["\\ngeqq"]="\\html@mathml{\\@ngeqq}{}",Hn["\\ngeqslant"]="\\html@mathml{\\@ngeqslant}{}",Hn["\\nleqq"]="\\html@mathml{\\@nleqq}{}",Hn["\\nleqslant"]="\\html@mathml{\\@nleqslant}{}",Hn["\\nshortmid"]="\\html@mathml{\\@nshortmid}{}",Hn["\\nshortparallel"]="\\html@mathml{\\@nshortparallel}{}",Hn["\\nsubseteqq"]="\\html@mathml{\\@nsubseteqq}{}",Hn["\\nsupseteqq"]="\\html@mathml{\\@nsupseteqq}{}",Hn["\\varsubsetneq"]="\\html@mathml{\\@varsubsetneq}{}",Hn["\\varsubsetneqq"]="\\html@mathml{\\@varsubsetneqq}{}",Hn["\\varsupsetneq"]="\\html@mathml{\\@varsupsetneq}{}",Hn["\\varsupsetneqq"]="\\html@mathml{\\@varsupsetneqq}{}",Hn["\\imath"]="\\html@mathml{\\@imath}{}",Hn["\\jmath"]="\\html@mathml{\\@jmath}{}",Hn["\\llbracket"]="\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}",Hn["\\rrbracket"]="\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}",Hn[""]="\\llbracket",Hn[""]="\\rrbracket",Hn["\\lBrace"]="\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}",Hn["\\rBrace"]="\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}",Hn[""]="\\lBrace",Hn[""]="\\rBrace",Hn["\\minuso"]="\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}",Hn[""]="\\minuso",Hn["\\darr"]="\\downarrow",Hn["\\dArr"]="\\Downarrow",Hn["\\Darr"]="\\Downarrow",Hn["\\lang"]="\\langle",Hn["\\rang"]="\\rangle",Hn["\\uarr"]="\\uparrow",Hn["\\uArr"]="\\Uparrow",Hn["\\Uarr"]="\\Uparrow",Hn["\\N"]="\\mathbb{N}",Hn["\\R"]="\\mathbb{R}",Hn["\\Z"]="\\mathbb{Z}",Hn["\\alef"]="\\aleph",Hn["\\alefsym"]="\\aleph",Hn["\\Alpha"]="\\mathrm{A}",Hn["\\Beta"]="\\mathrm{B}",Hn["\\bull"]="\\bullet",Hn["\\Chi"]="\\mathrm{X}",Hn["\\clubs"]="\\clubsuit",Hn["\\cnums"]="\\mathbb{C}",Hn["\\Complex"]="\\mathbb{C}",Hn["\\Dagger"]="\\ddagger",Hn["\\diamonds"]="\\diamondsuit",Hn["\\empty"]="\\emptyset",Hn["\\Epsilon"]="\\mathrm{E}",Hn["\\Eta"]="\\mathrm{H}",Hn["\\exist"]="\\exists",Hn["\\harr"]="\\leftrightarrow",Hn["\\hArr"]="\\Leftrightarrow",Hn["\\Harr"]="\\Leftrightarrow",Hn["\\hearts"]="\\heartsuit",Hn["\\image"]="\\Im",Hn["\\infin"]="\\infty",Hn["\\Iota"]="\\mathrm{I}",Hn["\\isin"]="\\in",Hn["\\Kappa"]="\\mathrm{K}",Hn["\\larr"]="\\leftarrow",Hn["\\lArr"]="\\Leftarrow",Hn["\\Larr"]="\\Leftarrow",Hn["\\lrarr"]="\\leftrightarrow",Hn["\\lrArr"]="\\Leftrightarrow",Hn["\\Lrarr"]="\\Leftrightarrow",Hn["\\Mu"]="\\mathrm{M}",Hn["\\natnums"]="\\mathbb{N}",Hn["\\Nu"]="\\mathrm{N}",Hn["\\Omicron"]="\\mathrm{O}",Hn["\\plusmn"]="\\pm",Hn["\\rarr"]="\\rightarrow",Hn["\\rArr"]="\\Rightarrow",Hn["\\Rarr"]="\\Rightarrow",Hn["\\real"]="\\Re",Hn["\\reals"]="\\mathbb{R}",Hn["\\Reals"]="\\mathbb{R}",Hn["\\Rho"]="\\mathrm{P}",Hn["\\sdot"]="\\cdot",Hn["\\sect"]="\\S",Hn["\\spades"]="\\spadesuit",Hn["\\sub"]="\\subset",Hn["\\sube"]="\\subseteq",Hn["\\supe"]="\\supseteq",Hn["\\Tau"]="\\mathrm{T}",Hn["\\thetasym"]="\\vartheta",Hn["\\weierp"]="\\wp",Hn["\\Zeta"]="\\mathrm{Z}",Hn["\\argmin"]="\\DOTSB\\operatorname*{arg\\,min}",Hn["\\argmax"]="\\DOTSB\\operatorname*{arg\\,max}",Hn["\\plim"]="\\DOTSB\\mathop{\\operatorname{plim}}\\limits",Hn["\\bra"]="\\mathinner{\\langle{#1}|}",Hn["\\ket"]="\\mathinner{|{#1}\\rangle}",Hn["\\braket"]="\\mathinner{\\langle{#1}\\rangle}",Hn["\\Bra"]="\\left\\langle#1\\right|",Hn["\\Ket"]="\\left|#1\\right\\rangle";var H2=e=>t=>{var r=t.consumeArg().tokens,n=t.consumeArg().tokens,i=t.consumeArg().tokens,s=t.consumeArg().tokens,o=t.macros.get("|"),a=t.macros.get("\\|");t.macros.beginGroup();var l=t=>r=>{e&&(r.macros.set("|",o),i.length&&r.macros.set("\\|",a));var s=t;return!t&&i.length&&"|"===r.future().text&&(r.popToken(),s=!0),{tokens:s?i:n,numArgs:0}};t.macros.set("|",l(!1)),i.length&&t.macros.set("\\|",l(!0));var c=t.consumeArg().tokens,h=t.expandTokens([...s,...c,...r]);return t.macros.endGroup(),{tokens:h.reverse(),numArgs:0}};c=H2(!1),Hn["\\bra@ket"]=c,h=H2(!0),Hn["\\bra@set"]=h,Hn["\\Braket"]="\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}",Hn["\\Set"]="\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}",Hn["\\set"]="\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}",Hn["\\angln"]="{\\angl n}",Hn["\\blue"]="\\textcolor{##6495ed}{#1}",Hn["\\orange"]="\\textcolor{##ffa500}{#1}",Hn["\\pink"]="\\textcolor{##ff00af}{#1}",Hn["\\red"]="\\textcolor{##df0030}{#1}",Hn["\\green"]="\\textcolor{##28ae7b}{#1}",Hn["\\gray"]="\\textcolor{gray}{#1}",Hn["\\purple"]="\\textcolor{##9d38bd}{#1}",Hn["\\blueA"]="\\textcolor{##ccfaff}{#1}",Hn["\\blueB"]="\\textcolor{##80f6ff}{#1}",Hn["\\blueC"]="\\textcolor{##63d9ea}{#1}",Hn["\\blueD"]="\\textcolor{##11accd}{#1}",Hn["\\blueE"]="\\textcolor{##0c7f99}{#1}",Hn["\\tealA"]="\\textcolor{##94fff5}{#1}",Hn["\\tealB"]="\\textcolor{##26edd5}{#1}",Hn["\\tealC"]="\\textcolor{##01d1c1}{#1}",Hn["\\tealD"]="\\textcolor{##01a995}{#1}",Hn["\\tealE"]="\\textcolor{##208170}{#1}",Hn["\\greenA"]="\\textcolor{##b6ffb0}{#1}",Hn["\\greenB"]="\\textcolor{##8af281}{#1}",Hn["\\greenC"]="\\textcolor{##74cf70}{#1}",Hn["\\greenD"]="\\textcolor{##1fab54}{#1}",Hn["\\greenE"]="\\textcolor{##0d923f}{#1}",Hn["\\goldA"]="\\textcolor{##ffd0a9}{#1}",Hn["\\goldB"]="\\textcolor{##ffbb71}{#1}",Hn["\\goldC"]="\\textcolor{##ff9c39}{#1}",Hn["\\goldD"]="\\textcolor{##e07d10}{#1}",Hn["\\goldE"]="\\textcolor{##a75a05}{#1}",Hn["\\redA"]="\\textcolor{##fca9a9}{#1}",Hn["\\redB"]="\\textcolor{##ff8482}{#1}",Hn["\\redC"]="\\textcolor{##f9685d}{#1}",Hn["\\redD"]="\\textcolor{##e84d39}{#1}",Hn["\\redE"]="\\textcolor{##bc2612}{#1}",Hn["\\maroonA"]="\\textcolor{##ffbde0}{#1}",Hn["\\maroonB"]="\\textcolor{##ff92c6}{#1}",Hn["\\maroonC"]="\\textcolor{##ed5fa6}{#1}",Hn["\\maroonD"]="\\textcolor{##ca337c}{#1}",Hn["\\maroonE"]="\\textcolor{##9e034e}{#1}",Hn["\\purpleA"]="\\textcolor{##ddd7ff}{#1}",Hn["\\purpleB"]="\\textcolor{##c6b9fc}{#1}",Hn["\\purpleC"]="\\textcolor{##aa87ff}{#1}",Hn["\\purpleD"]="\\textcolor{##7854ab}{#1}",Hn["\\purpleE"]="\\textcolor{##543b78}{#1}",Hn["\\mintA"]="\\textcolor{##f5f9e8}{#1}",Hn["\\mintB"]="\\textcolor{##edf2df}{#1}",Hn["\\mintC"]="\\textcolor{##e0e5cc}{#1}",Hn["\\grayA"]="\\textcolor{##f6f7f7}{#1}",Hn["\\grayB"]="\\textcolor{##f0f1f2}{#1}",Hn["\\grayC"]="\\textcolor{##e3e5e6}{#1}",Hn["\\grayD"]="\\textcolor{##d6d8da}{#1}",Hn["\\grayE"]="\\textcolor{##babec2}{#1}",Hn["\\grayF"]="\\textcolor{##888d93}{#1}",Hn["\\grayG"]="\\textcolor{##626569}{#1}",Hn["\\grayH"]="\\textcolor{##3b3e40}{#1}",Hn["\\grayI"]="\\textcolor{##21242c}{#1}",Hn["\\kaBlue"]="\\textcolor{##314453}{#1}",Hn["\\kaGreen"]="\\textcolor{##71B307}{#1}";var H4={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class H5{constructor(e,t,r){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new HY(Hn,t.macros),this.mode=r,this.stack=[]}feed(e){this.lexer=new HX(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return 0===this.stack.length&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var t,r,n;if(e){if(this.consumeSpaces(),"["!==this.future().text)return null;t=this.popToken(),{tokens:n,end:r}=this.consumeArg(["]"])}else({tokens:n,start:t,end:r}=this.consumeArg());return this.pushToken(new B5("EOF",r.loc)),this.pushTokens(n),t.range(r,"")}consumeSpaces(){for(;;)if(" "===this.future().text)this.stack.pop();else break}consumeArg(e){var t=[],r=e&&e.length>0;r||this.consumeSpaces();var n,i=this.future(),s=0,o=0;do{if(n=this.popToken(),t.push(n),"{"===n.text)++s;else if("}"===n.text){if(-1==--s)throw new B3("Extra }",n)}else if("EOF"===n.text)throw new B3("Unexpected end of input in a macro argument, expected '"+(e&&r?e[o]:"}")+"'",n);if(e&&r){if((0===s||1===s&&"{"===e[o])&&n.text===e[o]){if(++o===e.length){t.splice(-o,o);break}}else o=0}}while(0!==s||r);return"{"===i.text&&"}"===t[t.length-1].text&&(t.pop(),t.shift()),t.reverse(),{tokens:t,start:i,end:n}}consumeArgs(e,t){if(t){if(t.length!==e+1)throw new B3("The length of delimiters doesn't match the number of args!");for(var r=t[0],n=0;n<r.length;n++){var i=this.popToken();if(r[n]!==i.text)throw new B3("Use of the macro doesn't match its definition",i)}}for(var s=[],o=0;o<e;o++)s.push(this.consumeArg(t&&t[o+1]).tokens);return s}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new B3("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var t=this.popToken(),r=t.text,n=t.noexpand?null:this._getExpansion(r);if(null==n||e&&n.unexpandable){if(e&&null==n&&"\\"===r[0]&&!this.isDefined(r))throw new B3("Undefined control sequence: "+r);return this.pushToken(t),!1}this.countExpansion(1);var i=n.tokens,s=this.consumeArgs(n.numArgs,n.delimiters);if(n.numArgs){i=i.slice();for(var o=i.length-1;o>=0;--o){var a=i[o];if("#"===a.text){if(0===o)throw new B3("Incomplete placeholder at end of macro body",a);if("#"===(a=i[--o]).text)i.splice(o+1,1);else if(/^[1-9]$/.test(a.text))i.splice(o,2,...s[+a.text-1]);else throw new B3("Not a valid argument number",a)}}}return this.pushTokens(i),i.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(!1===this.expandOnce()){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw Error()}expandMacro(e){return this.macros.has(e)?this.expandTokens([new B5(e)]):void 0}expandTokens(e){var t=[],r=this.stack.length;for(this.pushTokens(e);this.stack.length>r;)if(!1===this.expandOnce(!0)){var n=this.stack.pop();n.treatAsRelax&&(n.noexpand=!1,n.treatAsRelax=!1),t.push(n)}return this.countExpansion(t.length),t}expandMacroAsText(e){var t=this.expandMacro(e);return t&&t.map(e=>e.text).join("")}_getExpansion(e){var t=this.macros.get(e);if(null==t)return t;if(1===e.length){var r=this.lexer.catcodes[e];if(null!=r&&13!==r)return}var n="function"==typeof t?t(this):t;if("string"==typeof n){var i=0;if(-1!==n.indexOf("#"))for(var s=n.replace(/##/g,"");-1!==s.indexOf("#"+(i+1));)++i;for(var o=new HX(n,this.settings),a=[],l=o.lex();"EOF"!==l.text;)a.push(l),l=o.lex();return a.reverse(),{tokens:a,numArgs:i}}return n}isDefined(e){return this.macros.has(e)||Qq.hasOwnProperty(e)||FZ.math.hasOwnProperty(e)||FZ.text.hasOwnProperty(e)||H4.hasOwnProperty(e)}isExpandable(e){var t=this.macros.get(e);return null!=t?"string"==typeof t||"function"==typeof t||!t.unexpandable:Qq.hasOwnProperty(e)&&!Qq[e].primitive}}var H3=/^[]/,H6=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"a",:"e",:"h",:"i",:"j",:"k",:"l",:"m",:"n",:"o",:"p",:"r",:"s",:"t",:"u",:"v",:"x",:"",:"",:"",:"",:"","":"+","":"-","":"=","":"(","":")","":"0","\xb9":"1","\xb2":"2","\xb3":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"A",:"B",:"D",:"E",:"G",:"H",:"I",:"J",:"K",:"L",:"M",:"N",:"O",:"P",:"R",:"T",:"U",:"V",:"W",:"a",:"b",:"c",:"d",:"e",:"f",:"g",:"h",:"i",:"j",:"k",:"l",:"m",:"n",:"o",:"p",:"r",:"s",:"t",:"u",:"v",:"w",:"x",:"y",:"z",:"",:"",:"",:"",:"",:""}),H7={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},H8={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class H9{constructor(e,t){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new H5(e,t,this.mode),this.settings=t,this.leftrightDepth=0}expect(e,t){if(void 0===t&&(t=!0),this.fetch().text!==e)throw new B3("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());t&&this.consume()}consume(){this.nextToken=null}fetch(){return null==this.nextToken&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var t=this.nextToken;this.consume(),this.gullet.pushToken(new B5("}")),this.gullet.pushTokens(e);var r=this.parseExpression(!1);return this.expect("}"),this.nextToken=t,r}parseExpression(e,t){for(var r=[];;){"math"===this.mode&&this.consumeSpaces();var n=this.fetch();if(-1!==H9.endOfExpression.indexOf(n.text)||t&&n.text===t||e&&Qq[n.text]&&Qq[n.text].infix)break;var i=this.parseAtom(t);if(i){if("internal"===i.type)continue}else break;r.push(i)}return"text"===this.mode&&this.formLigatures(r),this.handleInfixNodes(r)}handleInfixNodes(e){for(var t,r=-1,n=0;n<e.length;n++)if("infix"===e[n].type){if(-1!==r)throw new B3("only one infix operator per group",e[n].token);r=n,t=e[n].replaceWith}if(-1===r||!t)return e;var i,s,o,a=e.slice(0,r),l=e.slice(r+1);return s=1===a.length&&"ordgroup"===a[0].type?a[0]:{type:"ordgroup",mode:this.mode,body:a},o=1===l.length&&"ordgroup"===l[0].type?l[0]:{type:"ordgroup",mode:this.mode,body:l},["\\\\abovefrac"===t?this.callFunction(t,[s,e[r],o],[]):this.callFunction(t,[s,o],[])]}handleSupSubscript(e){var t=this.fetch(),r=t.text;this.consume(),this.consumeSpaces();var n=this.parseGroup(e);if(!n)throw new B3("Expected group after '"+r+"'",t);return n}formatUnsupportedCmd(e){for(var t=[],r=0;r<e.length;r++)t.push({type:"textord",mode:"text",text:e[r]});var n={type:"text",mode:this.mode,body:t};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[n]}}parseAtom(e){var t,r,n=this.parseGroup("atom",e);if("text"===this.mode)return n;for(;;){this.consumeSpaces();var i=this.fetch();if("\\limits"===i.text||"\\nolimits"===i.text){if(n&&"op"===n.type)n.limits="\\limits"===i.text,n.alwaysHandleSupSub=!0;else if(n&&"operatorname"===n.type)n.alwaysHandleSupSub&&(n.limits="\\limits"===i.text);else throw new B3("Limit controls must follow a math operator",i);this.consume()}else if("^"===i.text){if(t)throw new B3("Double superscript",i);t=this.handleSupSubscript("superscript")}else if("_"===i.text){if(r)throw new B3("Double subscript",i);r=this.handleSupSubscript("subscript")}else if("'"===i.text){if(t)throw new B3("Double superscript",i);var s={type:"textord",mode:this.mode,text:"\\prime"},o=[s];for(this.consume();"'"===this.fetch().text;)o.push(s),this.consume();"^"===this.fetch().text&&o.push(this.handleSupSubscript("superscript")),t={type:"ordgroup",mode:this.mode,body:o}}else if(H6[i.text]){var a=H3.test(i.text),l=[];for(l.push(new B5(H6[i.text])),this.consume();;){var c=this.fetch().text;if(!H6[c]||H3.test(c)!==a)break;l.unshift(new B5(H6[c])),this.consume()}var h=this.subparse(l);a?r={type:"ordgroup",mode:"math",body:h}:t={type:"ordgroup",mode:"math",body:h}}else break}return t||r?{type:"supsub",mode:this.mode,base:n,sup:t,sub:r}:n}parseFunction(e,t){var r=this.fetch(),n=r.text,i=Qq[n];if(!i)return null;if(this.consume(),t&&"atom"!==t&&!i.allowedInArgument)throw new B3("Got function '"+n+"' with no arguments"+(t?" as "+t:""),r);if("text"===this.mode&&!i.allowedInText)throw new B3("Can't use function '"+n+"' in text mode",r);if("math"===this.mode&&!1===i.allowedInMath)throw new B3("Can't use function '"+n+"' in math mode",r);var{args:s,optArgs:o}=this.parseArguments(n,i);return this.callFunction(n,s,o,r,e)}callFunction(e,t,r,n,i){var s=Qq[e];if(s&&s.handler)return s.handler({funcName:e,parser:this,token:n,breakOnTokenText:i},t,r);throw new B3("No function handler for "+e)}parseArguments(e,t){var r=t.numArgs+t.numOptionalArgs;if(0===r)return{args:[],optArgs:[]};for(var n=[],i=[],s=0;s<r;s++){var o=t.argTypes&&t.argTypes[s],a=s<t.numOptionalArgs;(t.primitive&&null==o||"sqrt"===t.type&&1===s&&null==i[0])&&(o="primitive");var l=this.parseGroupOfType("argument to '"+e+"'",o,a);if(a)i.push(l);else if(null!=l)n.push(l);else throw new B3("Null argument, please report this as a bug")}return{args:n,optArgs:i}}parseGroupOfType(e,t,r){switch(t){case"color":return this.parseColorGroup(r);case"size":return this.parseSizeGroup(r);case"url":return this.parseUrlGroup(r);case"math":case"text":return this.parseArgumentGroup(r,t);case"hbox":var n=this.parseArgumentGroup(r,"text");return null!=n?{type:"styling",mode:n.mode,body:[n],style:"text"}:null;case"raw":var i=this.parseStringGroup("raw",r);return null!=i?{type:"raw",mode:"text",string:i.text}:null;case"primitive":if(r)throw new B3("A primitive argument cannot be optional");var s=this.parseGroup(e);if(null==s)throw new B3("Expected group as "+e,this.fetch());return s;case"original":case null:case void 0:return this.parseArgumentGroup(r);default:throw new B3("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;" "===this.fetch().text;)this.consume()}parseStringGroup(e,t){var r=this.gullet.scanArgument(t);if(null==r)return null;for(var n,i="";"EOF"!==(n=this.fetch()).text;)i+=n.text,this.consume();return this.consume(),r.text=i,r}parseRegexGroup(e,t){for(var r,n=this.fetch(),i=n,s="";"EOF"!==(r=this.fetch()).text&&e.test(s+r.text);)s+=(i=r).text,this.consume();if(""===s)throw new B3("Invalid "+t+": '"+n.text+"'",n);return n.range(i,s)}parseColorGroup(e){var t=this.parseStringGroup("color",e);if(null==t)return null;var r=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(t.text);if(!r)throw new B3("Invalid color: '"+t.text+"'",t);var n=r[0];return/^[0-9a-f]{6}$/i.test(n)&&(n="#"+n),{type:"color-token",mode:this.mode,color:n}}parseSizeGroup(e){var t,r=!1;if(this.gullet.consumeSpaces(),!(t=e||"{"===this.gullet.future().text?this.parseStringGroup("size",e):this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size")))return null;e||0!==t.text.length||(t.text="0pt",r=!0);var n=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t.text);if(!n)throw new B3("Invalid size: '"+t.text+"'",t);var i={number:+(n[1]+n[2]),unit:n[3]};if(!Fj(i))throw new B3("Invalid unit: '"+i.unit+"'",t);return{type:"size",mode:this.mode,value:i,isBlank:r}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var t=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),null==t)return null;var r=t.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:r}}parseArgumentGroup(e,t){var r=this.gullet.scanArgument(e);if(null==r)return null;var n=this.mode;t&&this.switchMode(t),this.gullet.beginGroup();var i=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var s={type:"ordgroup",mode:this.mode,loc:r.loc,body:i};return t&&this.switchMode(n),s}parseGroup(e,t){var r,n=this.fetch(),i=n.text;if("{"===i||"\\begingroup"===i){this.consume();var s="{"===i?"}":"\\endgroup";this.gullet.beginGroup();var o=this.parseExpression(!1,s),a=this.fetch();this.expect(s),this.gullet.endGroup(),r={type:"ordgroup",mode:this.mode,loc:B4.range(n,a),body:o,semisimple:"\\begingroup"===i||void 0}}else if(null==(r=this.parseFunction(t,e)||this.parseSymbol())&&"\\"===i[0]&&!H4.hasOwnProperty(i)){if(this.settings.throwOnError)throw new B3("Undefined control sequence: "+i,n);r=this.formatUnsupportedCmd(i),this.consume()}return r}formLigatures(e){for(var t=e.length-1,r=0;r<t;++r){var n=e[r],i=n.text;"-"===i&&"-"===e[r+1].text&&(r+1<t&&"-"===e[r+2].text?(e.splice(r,3,{type:"textord",mode:"text",loc:B4.range(n,e[r+2]),text:"---"}),t-=2):(e.splice(r,2,{type:"textord",mode:"text",loc:B4.range(n,e[r+1]),text:"--"}),t-=1)),("'"===i||"`"===i)&&e[r+1].text===i&&(e.splice(r,2,{type:"textord",mode:"text",loc:B4.range(n,e[r+1]),text:i+i}),t-=1)}}parseSymbol(){var e=this.fetch(),t=e.text;if(/^\\verb[^a-zA-Z]/.test(t)){this.consume();var r=t.slice(5),n="*"===r.charAt(0);if(n&&(r=r.slice(1)),r.length<2||r.charAt(0)!==r.slice(-1))throw new B3(`\\verb assertion failed --
                    please report what input caused this bug`);return{type:"verb",mode:"text",body:r=r.slice(1,-1),star:n}}H8.hasOwnProperty(t[0])&&!FZ[this.mode][t[0]]&&(this.settings.strict&&"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+t[0]+'" used in math mode',e),t=H8[t[0]]+t.slice(1));var i=HU.exec(t);if(i&&("i"===(t=t.substring(0,i.index))?t="":"j"===t&&(t="")),FZ[this.mode][t]){this.settings.strict&&"math"===this.mode&&Qg.indexOf(t)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+t[0]+'" used in math mode',e);var s,o,a=FZ[this.mode][t].group,l=B4.range(e);s=FX.hasOwnProperty(a)?{type:"atom",mode:this.mode,family:a,loc:l,text:t}:{type:a,mode:this.mode,loc:l,text:t}}else{if(!(t.charCodeAt(0)>=128))return null;this.settings.strict&&(Fm(t.charCodeAt(0))?"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+t[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+t[0]+'" ('+t.charCodeAt(0)+")",e)),s={type:"textord",mode:"text",loc:B4.range(e),text:t}}if(this.consume(),i)for(var c=0;c<i[0].length;c++){var h=i[0][c];if(!H7[h])throw new B3("Unknown accent ' "+h+"'",e);var u=H7[h][this.mode]||H7[h].text;if(!u)throw new B3("Accent "+h+" unsupported in "+this.mode+" mode",e);s={type:"accent",mode:this.mode,loc:B4.range(e),label:u,isStretchy:!1,isShifty:!0,base:s}}return s}}H9.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var We=function(e,t){if(!("string"==typeof e||e instanceof String))throw TypeError("KaTeX can only parse string typed expression");var r=new H9(e,t);delete r.gullet.macros.current["\\df@tag"];var n=r.parse();if(delete r.gullet.macros.current["\\current@color"],delete r.gullet.macros.current["\\color"],r.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new B3("\\tag works only in display equations");n=[{type:"tag",mode:"text",body:n,tag:r.subparse([new B5("\\df@tag")])}]}return n},Wt=function(e,t,r){t.textContent="";var n=Wn(e,r).toNode();t.appendChild(n)};"u">typeof document&&"CSS1Compat"!==document.compatMode&&"u">typeof console&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype.");var Wr=function(e,t,r){if(r.throwOnError||!(e instanceof B3))throw e;var n=QD.makeSpan(["katex-error"],[new FV(t)]);return n.setAttribute("title",e.toString()),n.setAttribute("style","color:"+r.errorColor),n},Wn=function(e,t){var r=new Fn(t);try{var n=We(e,r);return Vu(n,e,r)}catch(t){return Wr(t,e,r)}},Wi={renderToString:function(e,t){return Wn(e,t).toMarkup()}};let Ws=(0,A.createContext)({apiEndpoint:"",user:null,projectName:"",reportId:"",token:"",multiTables:{},tables:{},images:{},analyses:[],executiveSummary:{title:"",introduction:"",recommendations:[]},isLoading:!1,setIsLoading:()=>{}});function Wo({citations:e,setSelectedAnalysisIndex:t}){let{analyses:r}=(0,A.useContext)(Ws),[n,i]=(0,A.useState)(new Set),[s,o]=(0,A.useState)(new Set),[a,l]=(0,A.useState)({}),[c,h]=(0,A.useState)({}),[u,d]=(0,A.useState)(!1),[f,p]=(0,A.useState)({charts:!0,pdfs:!0,webSearches:!0}),m=(0,A.useMemo)(()=>{if(!e)return null;console.groupCollapsed("Parsing citations");try{return e.map(e=>{if(!e.text)return{...e,parsed:""};if(-1===e.text.indexOf("<latex-block>")&&-1===e.text.indexOf("<latex-inline>"))return{...e,parsed:Os.parse(e.text)};{let t=e.text;return{...e,parsed:function(e){try{let t=[/<latex-block>([\s\S]*?)<\/latex-block>/g,/<latex-inline>([\s\S]*?)<\/latex-inline>/g],r=[];if(!e)return null;for(let n=0;n<t.length;n++){let i;let s=t[n];do(i=s.exec(e))&&r.push(i);while(i)}if(r&&r.length>0){console.groupCollapsed("Latex Matches"),console.log(e),console.log(r.map(e=>e.index)),r.sort((e,t)=>e.index-t.index),console.log("matches",r);let t=[];r[0].index>0&&t.push(Os.parse(e.slice(0,r[0].index)));for(let n=0;n<r.length;n++){let i=r[n],s=i[0].includes("<latex-block>"),o=n<r.length-1?r[n+1].index:e.length,a=e.slice(i.index+i[0].length,o);if(s)t.push(Wi.renderToString(i[1],{displayMode:!0})),a.length>0&&t.push(a);else{let e=Wi.renderToString(i[1],{displayMode:!1});t.length>0?t[t.length-1]+=e+a:t.push(e+a)}}let n=t.map(e=>Os.parse(e));return console.log("Parsed LaTeX and markdown:",n),console.groupEnd(),n.join("").replace(/\n+/g,`

`).trim()}return console.log("No latex matches, returning text as is"),e}catch(t){return console.error(t),e}finally{}}(t)}}}).filter(e=>e.parsed)}catch(e){return console.error(e),null}finally{console.groupEnd()}},[e]);(0,A.useEffect)(()=>{if(!m||!r)return;let e=new Set;m.forEach(t=>{if(t.citations&&Array.isArray(t.citations)&&t.citations.length>0){let n=t.citations[0].document_title;if(n){let t=n.split(":");if(t.length>=2){let n=t[t.length-1].trim();r.some(e=>e.analysis_id===n)&&e.add(n)}}}}),i(e)},[m,r]);let g=(e,t)=>{let n=t.split(":");if(n.length<2)return;let i=n[n.length-1].trim();-1!==r.findIndex(e=>e.analysis_id===i)&&o(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},y=(e,t)=>{if(!r||-1===t)return null;let n=r[t];return e.includes("text_to_sql")?T.j.jsx("div",{className:"mt-2 border-l-2 border-blue-400 pl-3 py-2 bg-white dark:bg-gray-800 rounded",children:T.j.jsx(B0,{analysis:n,viewMode:a[n.analysis_id]||"table",showSqlQuery:c[n.analysis_id]||!1,setShowSqlQuery:e=>{h(t=>({...t,[n.analysis_id]:e}))},setViewMode:e=>{l(t=>({...t,[n.analysis_id]:e}))}})}):e.includes("pdf_citations")?T.j.jsx("div",{className:"mt-2 border-l-2 border-blue-400 pl-3 py-2 bg-white dark:bg-gray-800 rounded",children:T.j.jsx(B2,{analysis:n})}):e.includes("web_search")?T.j.jsx("div",{className:"mt-2 border-l-2 border-blue-400 pl-3 py-2 bg-white dark:bg-gray-800 rounded",children:T.j.jsx(B1,{analysis:n})}):T.j.jsx("div",{className:"mt-2 border-l-2 border-blue-400 pl-3 py-2 text-sm bg-white dark:bg-gray-800 rounded",children:T.j.jsx("div",{className:"font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Analysis"})})},b=(0,A.useMemo)(()=>{if(!r)return{charts:[],pdfs:[],webSearches:[]};let e=r.filter(e=>e.rows&&e.rows.length>0&&e.columns&&e.columns.length>0&&"pdf_citations_tool"!==e.function_name&&"web_search_tool"!==e.function_name),t=r.filter(e=>"pdf_citations_tool"===e.function_name&&e.result&&e.result.citations&&Array.isArray(e.result.citations)&&e.result.citations.length>0),n=r.filter(e=>"web_search_tool"===e.function_name&&e.result&&(e.result.answer||e.result.reference_sources&&Array.isArray(e.result.reference_sources)&&e.result.reference_sources.length>0));return console.log("Dashboard analyses:",{charts:e.length,pdfs:t.length,webSearches:n.length}),{charts:e,pdfs:t,webSearches:n}},[r]),v=(0,A.useMemo)(()=>b.charts.map(e=>{let t=e.rows.map(t=>{let r={};return e.columns.forEach(e=>{let n=e.title||e.dataIndex;r[n]=void 0===t[n]||null===t[n]?"":t[n]}),r}),r=(0,M.T)(t),n=(0,M.p)(r),i=n.columns.map(e=>{let t=e.isDate||!1;if(!t&&n.data.length>0){let r=n.data.slice(0,Math.min(5,n.data.length)).map(t=>t[e.key]).filter(e=>null!=e&&""!==e);r.length>0&&r.every(e=>!isNaN(new Date(e).getTime()))&&(t=!0)}return{...e,description:"",isDate:t,dateToUnix:e=>{if(!e)return null;let t=new Date(e);return isNaN(t.getTime())?null:t.getTime()}}}),s=TX({data:n.data,availableColumns:i});return s.autoSelectVariables(),{analysis:e,parsedOutputs:{csvString:r,data:n,chartManager:s,reactive_vars:{},chart_images:{},analysis:{}}}}),[r]);return(0,A.useEffect)(()=>{u&&r&&(console.log("All analyses:",r),console.log("Dashboard analyses structure:",b))},[u,r,b]),u&&(v.length>0||b.pdfs.length>0||b.webSearches.length>0)?T.j.jsxs("div",{className:"flex flex-col space-y-6 mt-10",children:[T.j.jsxs("div",{className:"flex flex-col gap-4",children:[T.j.jsxs("div",{className:"flex justify-between items-center",children:[T.j.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200",children:"Content Dashboard"}),T.j.jsxs("button",{onClick:()=>d(!1),className:"flex items-center gap-2 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-300 rounded-md px-3 py-1.5 font-medium transition-colors",children:[T.j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:T.j.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),"Back to Report"]})]}),T.j.jsxs("div",{className:"flex flex-wrap gap-3 pb-2",children:[T.j.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 self-center mr-2",children:"Show:"}),T.j.jsxs("button",{onClick:()=>p(e=>({...e,charts:!e.charts})),className:`px-3 py-1 text-sm rounded-full flex items-center gap-1 ${f.charts?"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300":"bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400"}`,children:[T.j.jsx(L,{className:"w-4 h-4"}),"Charts ",b.charts.length>0&&`(${b.charts.length})`]}),T.j.jsxs("button",{onClick:()=>p(e=>({...e,pdfs:!e.pdfs})),className:`px-3 py-1 text-sm rounded-full flex items-center gap-1 ${f.pdfs?"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300":"bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400"}`,children:[T.j.jsx(T.a8,{className:"w-4 h-4"}),"PDFs ",b.pdfs.length>0&&`(${b.pdfs.length})`]}),T.j.jsxs("button",{onClick:()=>p(e=>({...e,webSearches:!e.webSearches})),className:`px-3 py-1 text-sm rounded-full flex items-center gap-1 ${f.webSearches?"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300":"bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400"}`,children:[T.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[T.j.jsx("circle",{cx:"11",cy:"11",r:"8"}),T.j.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),"Web ",b.webSearches.length>0&&`(${b.webSearches.length})`]})]})]}),f.charts&&v.length>0&&T.j.jsxs("div",{className:"mt-4",children:[T.j.jsx("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-4 border-b pb-2 dark:border-gray-700",children:"Charts"}),T.j.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:v.map((e,t)=>T.j.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-600 p-4",children:[T.j.jsx("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-4",children:e.analysis.question}),T.j.jsx("div",{className:"h-[600px] overflow-hidden",children:T.j.jsx(ks,{children:T.j.jsx(RG,{stepData:e.parsedOutputs,initialQuestion:e.analysis.question,initialOptionsExpanded:!1},e.analysis.analysis_id)})})]},t))})]}),f.pdfs&&b.pdfs.length>0&&T.j.jsxs("div",{className:"mt-8",children:[T.j.jsxs("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-4 border-b pb-2 dark:border-gray-700",children:[T.j.jsx(T.a8,{className:"w-5 h-5 inline-block mr-2 align-text-bottom"}),"PDF Citations (",b.pdfs.length,")"]}),T.j.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:b.pdfs.map((e,t)=>{var r;return T.j.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-600 p-4",children:[T.j.jsx("h4",{className:"font-medium mb-4 text-gray-700 dark:text-gray-300 pb-2 border-b dark:border-gray-700",children:e.question||(null==(r=e.inputs)?void 0:r.question)||"PDF Citation"}),T.j.jsx("div",{className:"overflow-auto max-h-[600px]",children:T.j.jsx(ks,{children:T.j.jsx(B2,{analysis:e})})})]},t)})})]}),f.webSearches&&b.webSearches.length>0&&T.j.jsxs("div",{className:"mt-8",children:[T.j.jsxs("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-4 border-b pb-2 dark:border-gray-700",children:[T.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 inline-block mr-2 align-text-bottom",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[T.j.jsx("circle",{cx:"11",cy:"11",r:"8"}),T.j.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),"Web Search Results (",b.webSearches.length,")"]}),T.j.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:b.webSearches.map((e,t)=>{var r;return T.j.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-600 p-4",children:[T.j.jsx("h4",{className:"font-medium mb-4 text-gray-700 dark:text-gray-300 pb-2 border-b dark:border-gray-700",children:e.question||(null==(r=e.inputs)?void 0:r.question)||"Web Search"}),T.j.jsx("div",{className:"overflow-auto max-h-[600px]",children:T.j.jsx(ks,{children:T.j.jsx(B1,{analysis:e})})})]},t)})})]})]}):T.j.jsxs("div",{className:"flex flex-col space-y-4 mt-10",children:[v.length>0&&T.j.jsx("div",{className:"flex justify-end",children:T.j.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 text-sm bg-blue-50 hover:bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:hover:bg-blue-800/40 dark:text-blue-400 rounded-md px-3 py-1.5 font-medium transition-colors",children:[T.j.jsx(X,{className:"w-4 h-4"}),"View Charts Dashboard"]})}),T.j.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-600 py-3 px-3 sm:px-5 lg:px-7",children:(()=>{let e=new Set;return m.filter(e=>e.citations&&Array.isArray(e.citations)&&e.citations.length>0||e.parsed).map((t,n)=>{var i;let o=t.citations&&Array.isArray(t.citations)&&t.citations.length>0,a=o?null==(i=t.citations[0].document_title.split(":").pop())?void 0:i.trim():null,l=a&&!e.has(a);return l&&a&&e.add(a),T.j.jsxs("div",{className:"mb-4 relative group",children:[t.parsed&&T.j.jsx("div",{className:"prose dark:prose-invert prose-sm max-w-none py-1",dangerouslySetInnerHTML:{__html:t.parsed}}),o&&T.j.jsxs(T.j.Fragment,{children:[l&&T.j.jsxs("div",{className:"text-xs border border-gray-200 dark:border-gray-600 rounded-md p-2 bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 mt-1 flex flex-wrap items-center cursor-pointer hover:border-blue-400 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",onClick:()=>g(n,t.citations[0].document_title),children:[T.j.jsxs("div",{className:"flex items-center w-full",children:[t.citations[0].document_title.includes("text_to_sql")&&T.j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-1.5 flex-shrink-0 text-blue-500 dark:text-blue-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:T.j.jsx("path",{d:"M4 6h16M4 12h16m-7 6h7"})}),t.citations[0].document_title.includes("pdf_citations")&&T.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-1.5 flex-shrink-0 text-blue-500 dark:text-blue-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[T.j.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),T.j.jsx("polyline",{points:"14 2 14 8 20 8"})]}),t.citations[0].document_title.includes("web_search")&&T.j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-1.5 flex-shrink-0 text-blue-500 dark:text-blue-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[T.j.jsx("circle",{cx:"11",cy:"11",r:"8"}),T.j.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),T.j.jsx("span",{className:"break-all flex-grow",children:"Dig Deeper"}),T.j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-3.5 w-3.5 ml-1 text-blue-500 dark:text-blue-400 transition-transform ${s.has(n)?"rotate-180":""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:T.j.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),t.citations[0].start_page_number&&T.j.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs mt-1",children:["Pages ",t.citations[0].start_page_number,"-",t.citations[0].end_page_number]})]}),s.has(n)&&T.j.jsx("div",{className:"mt-2 transition-all duration-200 ease-in-out max-h-[800px] overflow-y-auto",children:y(t.citations[0].document_title,r.findIndex(e=>{var r;return e.analysis_id===(null==(r=t.citations[0].document_title.split(":").pop())?void 0:r.trim())}))})]})]},n)})})()})]})}function Wa({apiEndpoint:e,reportId:t,projectName:r,token:n,onReportParsed:i=()=>{},onDelete:s=()=>{}}){let[o,a]=(0,A.useState)({}),[l,c]=(0,A.useState)([]),[h,u]=(0,A.useState)([]),[d,f]=(0,A.useState)(null),[p,m]=(0,A.useState)(null),[g,y]=(0,A.useState)(null),[b,v]=(0,A.useState)(!0),[x,w]=(0,A.useState)(!1),[k,O]=(0,A.useState)(!1),[S,C]=(0,A.useState)(!1),M=(0,A.useRef)(null);if((0,A.useEffect)(()=>{(!1!==b||null===d)&&t&&r&&(async(t,r)=>{try{v(!0);let s=await Wv(e,t,r,n);s.parsed.mdx&&f(s.parsed.mdx),s.parsed.tables&&a(s.parsed.tables),s.analyses&&c(s.analyses),s.comments&&u(s.comments),s.report_with_citations&&m(s.report_with_citations),i&&i(s)}catch(e){console.error(e),y(e.message||String(e))}finally{v(!1)}})(t,r)},[t]),(0,A.useEffect)(()=>{let e=e=>{M.current&&!M.current.contains(e.target)&&w(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),b)return T.j.jsx(BJ,{});if(g)return T.j.jsx(BK,{error:g});l.filter(e=>!(null!=e&&e.error)||""===e.error);let E=()=>{let e=`report-${t}.md`;ZM(p?p.map(e=>e.text||"").join(`

`):d||"",e),w(!1)},N=()=>{let e=`report-${t}.pdf`;ZE(p?p.map(e=>e.text||"").join(`

`):d||"",e),w(!1)},_=()=>{try{let i=p?p.map(e=>e.text||"").join(`

`):d||"";w(!1),ZA(i,t,e,r,n,C).catch(e=>{console.error(e)})}catch(e){console.error(e)}};return T.j.jsx(Ws.Provider,{value:{apiEndpoint:e,tables:o,multiTables:{},images:{},analyses:l,executiveSummary:{title:"",introduction:"",recommendations:[]},reportId:t,projectName:r,token:n,commentManager:ZS({apiEndpoint:e,reportId:t,projectName:r,token:n,initialComments:h}),isLoading:S,setIsLoading:C},children:T.j.jsxs("div",{className:"relative overflow-auto",children:[S&&T.j.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:T.j.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-5 flex flex-col items-center shadow-lg",children:[T.j.jsx("div",{className:"w-12 h-12 border-t-4 border-blue-500 border-solid rounded-full animate-spin mb-4"}),T.j.jsx("p",{className:"text-gray-800 dark:text-gray-200 font-medium",children:"Generating podcast transcript..."}),T.j.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-2",children:"This may take a minute, please wait."})]})}),T.j.jsx("div",{className:"relative oracle-report-ctr w-full",children:p&&p.length>0?T.j.jsxs("div",{className:"w-full max-w-none sm:max-w-3xl lg:max-w-4xl xl:max-w-5xl 2xl:max-w-6xl mx-auto py-2 px-2 sm:px-4 md:px-6 mb-12 md:mb-0",children:[T.j.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 z-10 flex items-center justify-between px-4 py-2 border-b dark:border-gray-700",children:[T.j.jsx(T.D,{variant:"danger",onClick:()=>O(!0),children:"Delete"}),T.j.jsx(()=>T.j.jsxs("div",{className:"relative z-50",ref:M,children:[T.j.jsx(T.D,{variant:"secondary",onClick:()=>w(!x),className:x?"bg-gray-100 dark:bg-gray-700":"",children:T.j.jsx(T.ac,{className:"w-5 h-5"})}),x&&T.j.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg z-50 border dark:border-gray-700",children:T.j.jsxs("div",{className:"py-1",children:[T.j.jsxs("button",{onClick:E,className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center",children:[T.j.jsx(U,{className:"w-4 h-4 mr-2"}),"Export as Markdown"]}),T.j.jsxs("button",{onClick:N,className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center",children:[T.j.jsx(U,{className:"w-4 h-4 mr-2"}),"Export as PDF"]}),T.j.jsx("button",{onClick:_,disabled:S,className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center",children:S?T.j.jsxs(T.j.Fragment,{children:[T.j.jsx("div",{className:"w-4 h-4 mr-2 border-t-2 border-blue-500 border-solid rounded-full animate-spin"}),"Generating podcast..."]}):T.j.jsxs(T.j.Fragment,{children:[T.j.jsx(J,{className:"w-4 h-4 mr-2"}),"Export as Podcast"]})})]})})]}),{}),T.j.jsx(T.e,{open:k,onOk:()=>{s(t,r),O(!1)},onCancel:()=>O(!1),okText:"Yes, Delete",okVariant:"danger",title:"Delete Report",children:T.j.jsx("p",{children:"Are you sure you want to delete this report? This action cannot be undone."})})]}),T.j.jsx(Wo,{citations:p})]}):T.j.jsx(BH,{extensions:Zx,content:d,immediatelyRender:!1,editable:!1,slotBefore:T.j.jsx(Zj,{onDelete:s}),editorProps:{attributes:{class:"w-full max-w-none sm:max-w-3xl lg:max-w-4xl xl:max-w-5xl 2xl:max-w-6xl oracle-report-tiptap relative prose prose-base dark:prose-invert mx-auto py-2 px-2 sm:px-4 md:px-6 mb-12 md:mb-0 focus:outline-none *:cursor-default"}}})})]})})}let Wl={DONE:"DONE",ERRORED:"ERRORED",THINKING:"THINKING",INITIALIZED:"INITIALIZED"};function Wc(e,t){let r=[],n=new DOMParser().parseFromString(e,"text/html").querySelectorAll(t);for(let e=0;e<n.length;e++){let t=n[e],i=t.outerHTML,s={};for(let e=0;e<t.attributes.length;e++){let r=t.attributes[e];s[r.name]=r.value}let o=t.innerHTML;r.push({fullText:i,attributes:s,innerContent:o})}return r}class Wh{constructor(e,t,r,n){R(this,"mdx"),R(this,"tables"),R(this,"multiTables"),R(this,"images"),R(this,"table_csv"),R(this,"sql"),R(this,"generated_qn"),R(this,"parseTables",()=>{let e=function(e,t,r,n){let i={tables:{},multiTables:{}};for(let t of Wc(e,"table")){let r=crypto.randomUUID();e=e.replace(t.fullText,`<oracle-table id="${r}"></oracle-table>`);let{columns:s,data:o}=(0,M.p)(t.attributes.csv);i.tables[r]={columns:s,data:o,...t},i.tables[r].attributes={...i.tables[r].attributes,generated_qn:n}}for(let t of Wc(e,"multitable")){let r=crypto.randomUUID(),n=Wc(t.fullText,"oracle-table");e=e.replace(t.fullText,`<oracle-multi-table id="${r}"></oracle-multi-table>`),i.multiTables[r]={tableIds:n.map(e=>e.attributes.id),...t}}if(0===Object.keys(i.multiTables).length&&t&&r){let{columns:s,data:o}=(0,M.p)(t);i.tables["default-table"]={columns:s,data:o,attributes:{sql:r,csv:t,generated_qn:n,type:"fetched_table_csv"}},i.multiTables["default-multi-table"]={tableIds:["default-table"],attributes:{},fullText:'<multitable><oracle-table id="default-table"></oracle-table></multitable>',innerText:'<oracle-table id="default-table"></oracle-table>'},e+='<oracle-multi-table id="default-multi-table"><oracle-table id="default-table"></oracle-table></oracle-multi-table>'}return{mdx:e,...i}}(this.mdx,this.table_csv,this.sql,this.generated_qn);return this.tables=e.tables,this.multiTables=e.multiTables,this.mdx=e.mdx,this}),R(this,"parseImages",()=>{let e=function(e){let t={images:{}};for(let r of Wc(e,"image")){let n=crypto.randomUUID();e=e.replace(r.fullText,`<oracle-image id="${n}"></oracle-image>`),t.images[n]=r}return{mdx:e,...t}}(this.mdx);return this.images=e.images,this.mdx=e.mdx,this}),R(this,"cleanup",()=>{let e=Wc(this.mdx,"oracle-comment-handler");if(e.length>0)for(let t of e)this.mdx=this.mdx.replace(t.fullText,"");return this.mdx=this.mdx+`

<oracle-comment-handler/>`,this}),R(this,"getParsed",()=>Object.assign({},{mdx:this.mdx,tables:Object.assign({},this.tables),multiTables:Object.assign({},this.multiTables),images:Object.assign({},this.images)})),this.mdx=e,this.tables={},this.multiTables={},this.images={},this.table_csv=t||"",this.sql=r||"",this.generated_qn=n||""}}let Wu=(e,t,r,n)=>{let i=new Wh(e,t,r,n);return i.parseTables().parseImages().cleanup(),i.getParsed()},Wd=e=>{let t=e;return(t=(t=(t=(t=(t=t.replace(/<oracle-table[^>]*><\/oracle-table>/g,"")).replace(/<oracle-multi-table[^>]*><\/oracle-multi-table>/g,"")).replace(/<oracle-image[^>]*><\/oracle-image>/g,"")).replace(/<oracle-comment-handler\/>/g,"")).replace(/<oracle-[^>]*>/g,"")).replace(/<\/oracle-[^>]*>/g,"")},Wf=async(e,t,r,n)=>{let i=await fetch((0,M.F)({protocol:"http",path:"oracle/get_report_mdx",apiEndpoint:e}),{method:"POST",headers:{"Content-Type":"application/json",mode:"no-cors"},body:JSON.stringify({db_name:r,token:n,report_id:t})});if(!i.ok)throw Error("Failed to fetch mdx");return await i.json()},Wp=async(e,t,r,n,i)=>{if(!(await fetch((0,M.F)({protocol:"http",path:"oracle/update_report_mdx",apiEndpoint:e}),{method:"POST",headers:{"Content-Type":"application/json",mode:"no-cors"},body:JSON.stringify({db_name:r,token:n,report_id:t,tiptap_mdx:i})})).ok)throw Error("Failed to update mdx")},Wm=async(e,t,r,n,i)=>{let s=await fetch((0,M.F)({protocol:"http",path:"oracle/get_report_image",apiEndpoint:e}),{method:"POST",headers:{"Content-Type":"application/json",mode:"no-cors"},body:JSON.stringify({image_file_name:i,db_name:r,report_id:t,token:n})});if(!s.ok)throw Error("Failed to fetch image");let o=await s.json();if(!o.encoded)throw Error("Error fetching image");return o.encoded},Wg=async(e,t,r,n)=>{let i=await fetch((0,M.F)({protocol:"http",path:"oracle/get_report_comments",apiEndpoint:e}),{method:"POST",headers:{"Content-Type":"application/json",mode:"no-cors"},body:JSON.stringify({db_name:r,token:n,report_id:t})});if(!i.ok)throw Error("Failed to fetch comments");return(await i.json()).comments||[]},Wy=async(e,t,r,n,i)=>{if(!(await fetch((0,M.F)({protocol:"http",path:"oracle/update_report_comments",apiEndpoint:e}),{method:"POST",headers:{"Content-Type":"application/json",mode:"no-cors"},body:JSON.stringify({db_name:r,token:n,report_id:t,comments:i})})).ok)throw Error("Failed to update comments")},Wb=async(e,t,r,n,i,s)=>{let o=await fetch((0,M.F)({protocol:"http",path:"oracle/revise_report",apiEndpoint:e}),{method:"POST",headers:{"Content-Type":"application/json",mode:"no-cors"},body:JSON.stringify({db_name:r,token:n,report_id:t,general_comments:i,comments_with_relevant_text:s})}),a=await o.json();if(!o.ok||a.error)throw Error(a.message||"Failed to submit for revision");return a};async function Wv(e,t,r,n){let{mdx:i,analyses:s,report_with_citations:o}=await Wf(e,t,r,n);return{parsed:Wu(i),analyses:s,comments:await Wg(e,t,r,n),report_with_citations:o}}let Wx=async(e,t,r)=>{try{let n=await fetch((0,M.F)({apiEndpoint:e,protocol:"http",path:"oracle/list_reports"}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,db_name:r})});if(!n.ok)throw Error("Failed to fetch reports");return(await n.json()).reports}catch(e){return console.error("Error fetching reports:",e),null}},Ww=async(e,t,r,n)=>{try{return(await fetch((0,M.F)({apiEndpoint:e,protocol:"http",path:"oracle/delete_report"}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({db_name:n,report_id:t,token:r})})).ok}catch(e){return console.error("Error deleting report:",e),!1}},Wk=async(e,t,r,n,i,s=[],o=!0)=>{if(!t)throw Error("No token");if(!i)throw Error("No user question");if(!r)throw Error("No project name");if(!(await fetch((0,M.F)({apiEndpoint:e,protocol:"http",path:"oracle/generate_report"}),{method:"POST",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3),body:JSON.stringify({db_name:r,token:t,user_question:i,task_type:"exploration",clarifications:s,report_id:n,use_websearch:o})})).ok)throw Error("Failed to generate report")},WO=async(e,t,r,n)=>{if(!t)throw Error("No token");let i=await fetch((0,M.F)({apiEndpoint:e,protocol:"http",path:"oracle/clarify_question"}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({db_name:r,token:t,user_question:n})});if(!i.ok)throw Error(await i.text()||"Failed to get clarifications");return await i.json()},WS=async(e,t,r)=>{try{if(!t)throw Error("No token");if(!r)throw Error("No project name");let n=await fetch((0,M.F)({apiEndpoint:e,protocol:"http",path:"integration/get_tables_and_files"}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,db_name:r})});if(!n.ok)throw Error("Failed to get tables and files");let i=await n.json();return{tables:i.tables||[],pdf_files:i.pdf_files||[]}}catch(e){return console.error("Error fetching tables and files:",e),{tables:[],pdf_files:[]}}},WC=/^\s*>\s$/,WT=Bk.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:e}){return["blockquote",$m(this.options.HTMLAttributes,e),0]},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Bw({find:WC,type:this.type})]}}),WA=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,WM=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,WE=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,WN=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,W_=$_.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return["strong",$m(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Bv({find:WA,type:this.type}),Bv({find:WE,type:this.type})]},addPasteRules(){return[BS({find:WM,type:this.type}),BS({find:WN,type:this.type})]}}),Wj="textStyle",WD=/^\s*([-+*])\s$/,WR=Bk.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:e}){return["ul",$m(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(Wj)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=Bw({find:WD,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Bw({find:WD,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Wj),editor:this.editor})),[e]}}),WP=/(^|[^`])`([^`]+)`(?!`)/,WI=/(^|[^`])`([^`]+)`(?!`)/g,Wz=$_.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:e}){return["code",$m(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Bv({find:WP,type:this.type})]},addPasteRules(){return[BS({find:WI,type:this.type})]}}),WL=/^```([a-z]+)?[\s\n]$/,Wq=/^~~~([a-z]+)?[\s\n]$/,W$=Bk.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;let{languageClassPrefix:r}=this.options;return[...(null===(t=e.firstElementChild)||void 0===t?void 0:t.classList)||[]].filter(e=>e.startsWith(r)).map(e=>e.replace(r,""))[0]||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:e,HTMLAttributes:t}){return["pre",$m(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{let{empty:e,$anchor:t}=this.editor.state.selection,r=1===t.pos;return!!e&&t.parent.type.name===this.name&&(!!r||!t.parent.textContent.length)&&this.editor.commands.clearNodes()},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;let{state:t}=e,{selection:r}=t,{$from:n,empty:i}=r;if(!i||n.parent.type!==this.type)return!1;let s=n.parentOffset===n.parent.nodeSize-2,o=n.parent.textContent.endsWith(`

`);return!!s&&!!o&&e.chain().command(({tr:e})=>(e.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;let{state:t}=e,{selection:r,doc:n}=t,{$from:i,empty:s}=r;if(!s||i.parent.type!==this.type||i.parentOffset!==i.parent.nodeSize-2)return!1;let o=i.after();return void 0!==o&&(n.nodeAt(o)?e.commands.command(({tr:e})=>(e.setSelection(IJ.near(n.resolve(o))),!0)):e.commands.exitCode())}}},addInputRules(){return[Bx({find:WL,type:this.type,getAttributes:e=>({language:e[1]})}),Bx({find:Wq,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new zo({key:new zc("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;let r=t.clipboardData.getData("text/plain"),n=t.clipboardData.getData("vscode-editor-data"),i=n?JSON.parse(n):void 0,s=null==i?void 0:i.mode;if(!r||!s)return!1;let{tr:o,schema:a}=e.state,l=a.text(r.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(I2.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),e.dispatch(o),!0}}})]}}),WB=Bk.create({name:"doc",topNode:!0,content:"block+"});class WF{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(r=t.width)&&void 0!==r?r:1,this.color=!1===t.color?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(t=>{let r=e=>{this[t](e)};return e.dom.addEventListener(t,r),{name:t,handler:r}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e,t,r=this.editorView.state.doc.resolve(this.cursorPos),n=!r.parent.inlineContent,i;if(n){let e=r.nodeBefore,t=r.nodeAfter;if(e||t){let r=this.editorView.nodeDOM(this.cursorPos-(e?e.nodeSize:0));if(r){let n=r.getBoundingClientRect(),s=e?n.bottom:n.top;e&&t&&(s=(s+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),i={left:n.left,right:n.right,top:s-this.width/2,bottom:s+this.width/2}}}}if(!i){let e=this.editorView.coordsAtPos(this.cursorPos);i={left:e.left-this.width/2,right:e.left+this.width/2,top:e.top,bottom:e.bottom}}let s=this.editorView.dom.offsetParent;if(this.element||(this.element=s.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),s&&(s!=document.body||"static"!=getComputedStyle(s).position)){let r=s.getBoundingClientRect();e=r.left-s.scrollLeft,t=r.top-s.scrollTop}else e=-pageXOffset,t=-pageYOffset;this.element.style.left=i.left-e+"px",this.element.style.top=i.top-t+"px",this.element.style.width=i.right-i.left+"px",this.element.style.height=i.bottom-i.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),n=r&&r.type.spec.disableDropCursor,i="function"==typeof n?n(this.editorView,t,e):n;if(t&&!i){let e=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let t=IL(this.editorView.state.doc,e,this.editorView.dragging.slice);null!=t&&(e=t)}this.setCursor(e),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}let WQ=$z.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[function(e={}){return new zo({view:t=>new WF(t,e)})}(this.options)]}});class WV extends IJ{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return WV.valid(r)?new WV(r):IJ.near(r)}content(){return PR.empty}eq(e){return e instanceof WV&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for GapCursor.fromJSON");return new WV(e.resolve(t.pos))}getBookmark(){return new WH(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!function(e){for(let t=e.depth;t>=0;t--){let r=e.index(t),n=e.node(t);if(0==r){if(n.type.spec.isolating)return!0;continue}for(let e=n.child(r-1);;e=e.lastChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}}return!0}(e)||!function(e){for(let t=e.depth;t>=0;t--){let r=e.indexAfter(t),n=e.node(t);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let e=n.child(r);;e=e.firstChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}}return!0}(e))return!1;let r=t.type.spec.allowGapCursor;if(null!=r)return r;let n=t.contentMatchAt(e.index()).defaultType;return n&&n.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&WV.valid(e))return e;let n=e.pos,i=null;for(let r=e.depth;;r--){let s=e.node(r);if(t>0?e.indexAfter(r)<s.childCount:e.index(r)>0){i=s.child(t>0?e.indexAfter(r):e.index(r)-1);break}if(0==r)return null;n+=t;let o=e.doc.resolve(n);if(WV.valid(o))return o}for(;;){let s=t>0?i.firstChild:i.lastChild;if(!s){if(i.isAtom&&!i.isText&&!I5.isSelectable(i)){e=e.doc.resolve(n+i.nodeSize*t),r=!1;continue e}break}i=s,n+=t;let o=e.doc.resolve(n);if(WV.valid(o))return o}return null}}}WV.prototype.visible=!1,WV.findFrom=WV.findGapCursorFrom,IJ.jsonID("gapcursor",WV);class WH{constructor(e){this.pos=e}map(e){return new WH(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return WV.valid(t)?new WV(t):IJ.near(t)}}let WW=qQ({ArrowLeft:WU("horiz",-1),ArrowRight:WU("horiz",1),ArrowUp:WU("vert",-1),ArrowDown:WU("vert",1)});function WU(e,t){let r="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,n,i){let s=e.selection,o=t>0?s.$to:s.$from,a=s.empty;if(s instanceof I2){if(!i.endOfTextblock(r)||0==o.depth)return!1;a=!1,o=e.doc.resolve(t>0?o.after():o.before())}let l=WV.findGapCursorFrom(o,t,a);return!!l&&(n&&n(e.tr.setSelection(new WV(l))),!0)}}function WG(e,t,r){if(!e||!e.editable)return!1;let n=e.state.doc.resolve(t);if(!WV.valid(n))return!1;let i=e.posAtCoords({left:r.clientX,top:r.clientY});return!(i&&i.inside>-1&&I5.isSelectable(e.state.doc.nodeAt(i.inside)))&&(e.dispatch(e.state.tr.setSelection(new WV(n))),!0)}function WX(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof WV))return!1;let{$from:r}=e.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(e.state.schema.nodes.text);if(!n)return!1;let i=PM.empty;for(let e=n.length-1;e>=0;e--)i=PM.from(n[e].createAndFill(null,i));let s=e.state.tr.replace(r.pos,r.pos,new PR(i,0,0));return s.setSelection(I2.near(s.doc.resolve(r.pos+1))),e.dispatch(s),!1}function WY(e){if(!(e.selection instanceof WV))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",qd.create(e.doc,[qc.widget(e.selection.head,t,{key:"gapcursor"})])}let WZ=$z.create({name:"gapCursor",addProseMirrorPlugins:()=>[new zo({props:{decorations:WY,createSelectionBetween:(e,t,r)=>t.pos==r.pos&&WV.valid(r)?new WV(r):null,handleClick:WG,handleKeyDown:WW,handleDOMEvents:{beforeinput:WX}}})],extendNodeSchema(e){var t;let r={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:null!==(t=$b($u(e,"allowGapCursor",r)))&&void 0!==t?t:null}}}),WJ=Bk.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:e}){return["br",$m(this.options.HTMLAttributes,e)]},renderText:()=>`
`,addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:r,editor:n})=>e.first([()=>e.exitCode(),()=>e.command(()=>{let{selection:e,storedMarks:i}=r;if(e.$from.parent.type.spec.isolating)return!1;let{keepMarks:s}=this.options,{splittableMarks:o}=n.extensionManager,a=i||e.$to.parentOffset&&e.$from.marks();return t().insertContent({type:this.name}).command(({tr:e,dispatch:t})=>{if(t&&a&&s){let t=a.filter(e=>o.includes(e.type.name));e.ensureMarks(t)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),WK=Bk.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,$m(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.setNode(this.name,e),toggleHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>Bx({find:RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}});var W0=function(){};W0.prototype.append=function(e){return e.length?(e=W0.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},W0.prototype.prepend=function(e){return e.length?W0.from(e).append(this):this},W0.prototype.appendInner=function(e){return new W2(this,e)},W0.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?W0.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},W0.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},W0.prototype.forEach=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)},W0.prototype.map=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=this.length);var n=[];return this.forEach(function(t,r){return n.push(e(t,r))},t,r),n},W0.from=function(e){return e instanceof W0?e:e&&e.length?new W1(e):W0.empty};var W1=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,r){return 0==e&&r==this.length?this:new t(this.values.slice(e,r))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,r,n){for(var i=t;i<r;i++)if(!1===e(this.values[i],n+i))return!1},t.prototype.forEachInvertedInner=function(e,t,r,n){for(var i=t-1;i>=r;i--)if(!1===e(this.values[i],n+i))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=200)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=200)return new t(e.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(t.prototype,r),t}(W0);W0.empty=new W1([]);var W2=function(e){function t(t,r){e.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,r,n){var i=this.left.length;if(t<i&&!1===this.left.forEachInner(e,t,Math.min(r,i),n)||r>i&&!1===this.right.forEachInner(e,Math.max(t-i,0),Math.min(this.length,r)-i,n+i))return!1},t.prototype.forEachInvertedInner=function(e,t,r,n){var i=this.left.length;if(t>i&&!1===this.right.forEachInvertedInner(e,t-i,Math.max(r,i)-i,n+i)||r<i&&!1===this.left.forEachInvertedInner(e,Math.min(t,i),r,n))return!1},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var r=this.left.length;return t<=r?this.left.slice(e,t):e>=r?this.right.slice(e-r,t-r):this.left.slice(e,r).append(this.right.slice(0,t-r))},t.prototype.leafAppend=function(e){var r=this.right.leafAppend(e);if(r)return new t(this.left,r)},t.prototype.leafPrepend=function(e){var r=this.left.leafPrepend(e);if(r)return new t(r,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(W0);class W4{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){let r,n;if(0==this.eventCount)return null;let i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}t&&(n=(r=this.remapping(i,this.items.length)).maps.length);let s=e.tr,o,a,l=[],c=[];return this.items.forEach((e,t)=>{if(!e.step){r||(n=(r=this.remapping(i,t+1)).maps.length),n--,c.push(e);return}if(r){c.push(new W5(e.map));let t=e.step.map(r.slice(n)),i;t&&s.maybeStep(t).doc&&(i=s.mapping.maps[s.mapping.maps.length-1],l.push(new W5(i,void 0,void 0,l.length+c.length))),n--,i&&r.appendMap(i,n)}else s.maybeStep(e.step);if(e.selection)return o=r?e.selection.map(r.slice(n)):e.selection,a=new W4(this.items.slice(0,i).append(c.reverse().concat(l)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:s,selection:o}}addTransform(e,t,r,n){var i,s;let o,a=[],l=this.eventCount,c=this.items,h=!n&&c.length?c.get(c.length-1):null;for(let r=0;r<e.steps.length;r++){let i=e.steps[r].invert(e.docs[r]),s=new W5(e.mapping.maps[r],i,t),o;(o=h&&h.merge(s))&&(s=o,r?a.pop():c=c.slice(0,c.length-1)),a.push(s),t&&(l++,t=void 0),n||(h=s)}let u=l-r.depth;return u>W6&&(i=c,s=u,i.forEach((e,t)=>{if(e.selection&&0==s--)return o=t,!1}),c=i.slice(o),l-=u),new W4(c.append(a),l)}remapping(e,t){let r=new Ig;return this.items.forEach((t,n)=>{let i=null!=t.mirrorOffset&&n-t.mirrorOffset>=e?r.maps.length-t.mirrorOffset:void 0;r.appendMap(t.map,i)},e,t),r}addMaps(e){return 0==this.eventCount?this:new W4(this.items.append(e.map(e=>new W5(e))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],n=Math.max(0,this.items.length-t),i=e.mapping,s=e.steps.length,o=this.eventCount;this.items.forEach(e=>{e.selection&&o--},n);let a=t;this.items.forEach(t=>{let n=i.getMirror(--a);if(null==n)return;s=Math.min(s,n);let l=i.maps[n];if(t.step){let s=e.steps[n].invert(e.docs[n]),c=t.selection&&t.selection.map(i.slice(a+1,n));c&&o++,r.push(new W5(l,s,c))}else r.push(new W5(l))},n);let l=[];for(let e=t;e<s;e++)l.push(new W5(i.maps[e]));let c=new W4(this.items.slice(0,n).append(l).append(r),o);return c.emptyItemCount()>500&&(c=c.compress(this.items.length-r.length)),c}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,n=[],i=0;return this.items.forEach((s,o)=>{if(o>=e)n.push(s),s.selection&&i++;else if(s.step){let e=s.step.map(t.slice(r)),o=e&&e.getMap();if(r--,o&&t.appendMap(o,r),e){let a=s.selection&&s.selection.map(t.slice(r));a&&i++;let l=new W5(o.invert(),e,a),c,h=n.length-1;(c=n.length&&n[h].merge(l))?n[h]=c:n.push(l)}}else s.map&&r--},this.items.length,0),new W4(W0.from(n.reverse()),i)}}W4.empty=new W4(W0.empty,0);class W5{constructor(e,t,r,n){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=n}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new W5(t.getMap().invert(),t,this.selection)}}}class W3{constructor(e,t,r,n,i){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=n,this.prevComposition=i}}let W6=20;function W7(e){let t=[];for(let r=e.length-1;r>=0&&0==t.length;r--)e[r].forEach((e,r,n,i)=>t.push(n,i));return t}function W8(e,t){if(!e)return null;let r=[];for(let n=0;n<e.length;n+=2){let i=t.map(e[n],1),s=t.map(e[n+1],-1);i<=s&&r.push(i,s)}return r}let W9=!1,Ue=null;function Ut(e){let t=e.plugins;if(Ue!=t){W9=!1,Ue=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){W9=!0;break}}return W9}let Ur=new zc("history"),Un=new zc("closeHistory");function Ui(e,t){return(r,n)=>{let i=Ur.getState(r);if(!i||0==(e?i.undone:i.done).eventCount)return!1;if(n){let s=function(e,t,r){let n=Ut(t),i=Ur.get(t).spec.config,s=(r?e.undone:e.done).popEvent(t,n);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(r?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,n),l=new W3(r?a:s.remaining,r?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(Ur,{redo:r,historyState:l})}(i,r,e);s&&n(t?s.scrollIntoView():s)}return!0}}let Us=Ui(!1,!0),Uo=Ui(!0,!0),Ua=$z.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:e,dispatch:t})=>Us(e,t),redo:()=>({state:e,dispatch:t})=>Uo(e,t)}),addProseMirrorPlugins(){return[function(e={}){return new zo({key:Ur,state:{init:()=>new W3(W4.empty,W4.empty,null,0,-1),apply:(t,r,n)=>(function(e,t,r,n){let i=r.getMeta(Ur),s;if(i)return i.historyState;r.getMeta(Un)&&(e=new W3(e.done,e.undone,null,0,-1));let o=r.getMeta("appendedTransaction");if(0==r.steps.length)return e;if(o&&o.getMeta(Ur))return o.getMeta(Ur).redo?new W3(e.done.addTransform(r,void 0,n,Ut(t)),e.undone,W7(r.mapping.maps),e.prevTime,e.prevComposition):new W3(e.done,e.undone.addTransform(r,void 0,n,Ut(t)),null,e.prevTime,e.prevComposition);if(!1===r.getMeta("addToHistory")||o&&!1===o.getMeta("addToHistory"))return(s=r.getMeta("rebased"))?new W3(e.done.rebased(r,s),e.undone.rebased(r,s),W8(e.prevRanges,r.mapping),e.prevTime,e.prevComposition):new W3(e.done.addMaps(r.mapping.maps),e.undone.addMaps(r.mapping.maps),W8(e.prevRanges,r.mapping),e.prevTime,e.prevComposition);{let i=r.getMeta("composition"),s=0==e.prevTime||!o&&e.prevComposition!=i&&(e.prevTime<(r.time||0)-n.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let r=!1;return e.mapping.maps[0].forEach((e,n)=>{for(let i=0;i<t.length;i+=2)e<=t[i+1]&&n>=t[i]&&(r=!0)}),r}(r,e.prevRanges)),a=o?W8(e.prevRanges,r.mapping):W7(r.mapping.maps);return new W3(e.done.addTransform(r,s?t.selection.getBookmark():void 0,n,Ut(t)),W4.empty,a,r.time,i??e.prevComposition)}})(r,n,t,e)},config:e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,n="historyUndo"==r?Us:"historyRedo"==r?Uo:null;return!!n&&(t.preventDefault(),n(e.state,e.dispatch))}}}})}(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),Ul=Bk.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:e}){return["hr",$m(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{let{selection:r}=t,{$from:n,$to:i}=r,s=e();return 0===n.parentOffset?s.insertContentAt({from:Math.max(n.pos-1,0),to:i.pos},{type:this.name}):r instanceof I5?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:e,dispatch:t})=>{var r;if(t){let{$to:t}=e.selection,n=t.end();if(t.nodeAfter)t.nodeAfter.isTextblock?e.setSelection(I2.create(e.doc,t.pos+1)):t.nodeAfter.isBlock?e.setSelection(I5.create(e.doc,t.pos)):e.setSelection(I2.create(e.doc,t.pos));else{let i=null===(r=t.parent.type.contentMatch.defaultType)||void 0===r?void 0:r.create();i&&(e.insert(n,i),e.setSelection(I2.create(e.doc,n+1)))}e.scrollIntoView()}return!0}).run()}}},addInputRules(){var e;return[new $T({find:(e={find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type}).find,handler:({state:t,range:r,match:n})=>{let i=$b(e.getAttributes,void 0,n)||{},{tr:s}=t,o=r.from,a=r.to,l=e.type.create(i);if(n[1]){let e=o+n[0].lastIndexOf(n[1]);e>a?e=a:a=e+n[1].length;let t=n[0][n[0].length-1];s.insertText(t,o+n[0].length-1),s.replaceWith(e,a,l)}else if(n[0]){let t=e.type.isInline?o:o-1;s.insert(t,e.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()}})]}}),Uc=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Uh=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Uu=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Ud=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Uf=$_.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",$m(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Bv({find:Uc,type:this.type}),Bv({find:Uu,type:this.type})]},addPasteRules(){return[BS({find:Uh,type:this.type}),BS({find:Ud,type:this.type})]}}),Up=Bk.create({name:"listItem",addOptions:()=>({HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:e}){return["li",$m(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Um="textStyle",Ug=/^(\d+)\.\s$/,Uy=Bk.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:e=>e.getAttribute("type")}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:e}){let{start:t,...r}=e;return 1===t?["ol",$m(this.options.HTMLAttributes,r),0]:["ol",$m(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(Um)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=Bw({find:Ug,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Bw({find:Ug,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Um)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[e]}}),Ub=Bk.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:e}){return["p",$m(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Uv=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Ux=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Uw=$_.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("line-through")&&{}}],renderHTML({HTMLAttributes:e}){return["s",$m(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Bv({find:Uv,type:this.type})]},addPasteRules(){return[BS({find:Ux,type:this.type})]}}),Uk=Bk.create({name:"text",group:"inline"}),UO=$z.create({name:"starterKit",addExtensions(){var e,t,r,n,i,s,o,a,l,c,h,u,d,f,p,m,g,y;let b=[];return!1!==this.options.bold&&b.push(W_.configure(null===(e=this.options)||void 0===e?void 0:e.bold)),!1!==this.options.blockquote&&b.push(WT.configure(null===(t=this.options)||void 0===t?void 0:t.blockquote)),!1!==this.options.bulletList&&b.push(WR.configure(null===(r=this.options)||void 0===r?void 0:r.bulletList)),!1!==this.options.code&&b.push(Wz.configure(null===(n=this.options)||void 0===n?void 0:n.code)),!1!==this.options.codeBlock&&b.push(W$.configure(null===(i=this.options)||void 0===i?void 0:i.codeBlock)),!1!==this.options.document&&b.push(WB.configure(null===(s=this.options)||void 0===s?void 0:s.document)),!1!==this.options.dropcursor&&b.push(WQ.configure(null===(o=this.options)||void 0===o?void 0:o.dropcursor)),!1!==this.options.gapcursor&&b.push(WZ.configure(null===(a=this.options)||void 0===a?void 0:a.gapcursor)),!1!==this.options.hardBreak&&b.push(WJ.configure(null===(l=this.options)||void 0===l?void 0:l.hardBreak)),!1!==this.options.heading&&b.push(WK.configure(null===(c=this.options)||void 0===c?void 0:c.heading)),!1!==this.options.history&&b.push(Ua.configure(null===(h=this.options)||void 0===h?void 0:h.history)),!1!==this.options.horizontalRule&&b.push(Ul.configure(null===(u=this.options)||void 0===u?void 0:u.horizontalRule)),!1!==this.options.italic&&b.push(Uf.configure(null===(d=this.options)||void 0===d?void 0:d.italic)),!1!==this.options.listItem&&b.push(Up.configure(null===(f=this.options)||void 0===f?void 0:f.listItem)),!1!==this.options.orderedList&&b.push(Uy.configure(null===(p=this.options)||void 0===p?void 0:p.orderedList)),!1!==this.options.paragraph&&b.push(Ub.configure(null===(m=this.options)||void 0===m?void 0:m.paragraph)),!1!==this.options.strike&&b.push(Uw.configure(null===(g=this.options)||void 0===g?void 0:g.strike)),!1!==this.options.text&&b.push(Uk.configure(null===(y=this.options)||void 0===y?void 0:y.text)),b}});if("u">typeof WeakMap){let e=new WeakMap;v=t=>e.get(t),x=(t,r)=>(e.set(t,r),r)}else{let e=[],t=0;v=t=>{for(let r=0;r<e.length;r+=2)if(e[r]==t)return e[r+1]},x=(r,n)=>(10==t&&(t=0),e[t++]=r,e[t++]=n)}var US=class{constructor(e,t,r,n){this.width=e,this.height=t,this.map=r,this.problems=n}findCell(e){for(let t=0;t<this.map.length;t++){let r=this.map[t];if(r!=e)continue;let n=t%this.width,i=t/this.width|0,s=n+1,o=i+1;for(let e=1;s<this.width&&this.map[t+e]==r;e++)s++;for(let e=1;o<this.height&&this.map[t+this.width*e]==r;e++)o++;return{left:n,top:i,right:s,bottom:o}}throw RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw RangeError(`No cell with offset ${e} found`)}nextCell(e,t,r){let{left:n,right:i,top:s,bottom:o}=this.findCell(e);return"horiz"==t?(r<0?0==n:i==this.width)?null:this.map[s*this.width+(r<0?n-1:i)]:(r<0?0==s:o==this.height)?null:this.map[n+this.width*(r<0?s-1:o)]}rectBetween(e,t){let{left:r,right:n,top:i,bottom:s}=this.findCell(e),{left:o,right:a,top:l,bottom:c}=this.findCell(t);return{left:Math.min(r,o),top:Math.min(i,l),right:Math.max(n,a),bottom:Math.max(s,c)}}cellsInRect(e){let t=[],r={};for(let n=e.top;n<e.bottom;n++)for(let i=e.left;i<e.right;i++){let s=n*this.width+i,o=this.map[s];r[o]||(r[o]=!0,i==e.left&&i&&this.map[s-1]==o||n==e.top&&n&&this.map[s-this.width]==o||t.push(o))}return t}positionAt(e,t,r){for(let n=0,i=0;;n++){let s=i+r.child(n).nodeSize;if(n==e){let r=t+e*this.width,n=(e+1)*this.width;for(;r<n&&this.map[r]<i;)r++;return r==n?s-1:this.map[r]}i=s}}static get(e){return v(e)||x(e,function(e){if("table"!=e.type.spec.tableRole)throw RangeError("Not a table node: "+e.type.name);let t=function(e){let t=-1,r=!1;for(let n=0;n<e.childCount;n++){let i=e.child(n),s=0;if(r)for(let t=0;t<n;t++){let r=e.child(t);for(let e=0;e<r.childCount;e++){let i=r.child(e);t+i.attrs.rowspan>n&&(s+=i.attrs.colspan)}}for(let e=0;e<i.childCount;e++){let t=i.child(e);s+=t.attrs.colspan,t.attrs.rowspan>1&&(r=!0)}-1==t?t=s:t!=s&&(t=Math.max(t,s))}return t}(e),r=e.childCount,n=[],i=0,s=null,o=[];for(let e=0,i=t*r;e<i;e++)n[e]=0;for(let a=0,l=0;a<r;a++){let c=e.child(a);l++;for(let e=0;;e++){for(;i<n.length&&0!=n[i];)i++;if(e==c.childCount)break;let h=c.child(e),{colspan:u,rowspan:d,colwidth:f}=h.attrs;for(let e=0;e<d;e++){if(e+a>=r){(s||(s=[])).push({type:"overlong_rowspan",pos:l,n:d-e});break}let c=i+e*t;for(let e=0;e<u;e++){0==n[c+e]?n[c+e]=l:(s||(s=[])).push({type:"collision",row:a,pos:l,n:u-e});let r=f&&f[e];if(r){let n=(c+e)%t*2,i=o[n];null==i||i!=r&&1==o[n+1]?(o[n]=r,o[n+1]=1):i==r&&o[n+1]++}}}i+=u,l+=h.nodeSize}let h=(a+1)*t,u=0;for(;i<h;)0==n[i++]&&u++;u&&(s||(s=[])).push({type:"missing",row:a,n:u}),l++}(0===t||0===r)&&(s||(s=[])).push({type:"zero_sized"});let a=new US(t,r,n,s),l=!1;for(let e=0;!l&&e<o.length;e+=2)null!=o[e]&&o[e+1]<r&&(l=!0);return l&&function(e,t,r){e.problems||(e.problems=[]);let n={};for(let i=0;i<e.map.length;i++){let s=e.map[i];if(n[s])continue;n[s]=!0;let o=r.nodeAt(s);if(!o)throw RangeError(`No cell with offset ${s} found`);let a=null,l=o.attrs;for(let r=0;r<l.colspan;r++){let n=t[2*((i+r)%e.width)];null==n||l.colwidth&&l.colwidth[r]==n||((a||(a=function(e){if(e.colwidth)return e.colwidth.slice();let t=[];for(let r=0;r<e.colspan;r++)t.push(0);return t}(l)))[r]=n)}a&&e.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}(a,o,e),a}(e))}};function UC(e){let t=e.cached.tableNodeTypes;if(!t)for(let r in t=e.cached.tableNodeTypes={},e.nodes){let n=e.nodes[r],i=n.spec.tableRole;i&&(t[i]=n)}return t}var UT=new zc("selectingCells");function UA(e){for(let t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function UM(e){let t=e.selection.$head;for(let e=t.depth;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return!0;return!1}function UE(e){let t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&"cell"==t.node.type.spec.tableRole)return t.$anchor;let r=UA(t.$head)||function(e){for(let t=e.nodeAfter,r=e.pos;t;t=t.firstChild,r++){let n=t.type.spec.tableRole;if("cell"==n||"header_cell"==n)return e.doc.resolve(r)}for(let t=e.nodeBefore,r=e.pos;t;t=t.lastChild,r--){let n=t.type.spec.tableRole;if("cell"==n||"header_cell"==n)return e.doc.resolve(r-t.nodeSize)}}(t.$head);if(r)return r;throw RangeError(`No cell found around position ${t.head}`)}function UN(e){return"row"==e.parent.type.spec.tableRole&&!!e.nodeAfter}function U_(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function Uj(e,t,r){let n=e.node(-1),i=US.get(n),s=e.start(-1),o=i.nextCell(e.pos-s,t,r);return null==o?null:e.node(0).resolve(s+o)}function UD(e,t,r=1){let n={...e,colspan:e.colspan-r};return n.colwidth&&(n.colwidth=n.colwidth.slice(),n.colwidth.splice(t,r),n.colwidth.some(e=>e>0)||(n.colwidth=null)),n}function UR(e,t,r=1){let n={...e,colspan:e.colspan+r};if(n.colwidth){n.colwidth=n.colwidth.slice();for(let e=0;e<r;e++)n.colwidth.splice(t,0,0)}return n}var UP=class e extends IJ{constructor(e,t=e){let r=e.node(-1),n=US.get(r),i=e.start(-1),s=n.rectBetween(e.pos-i,t.pos-i),o=e.node(0),a=n.cellsInRect(s).filter(e=>e!=t.pos-i);a.unshift(t.pos-i);let l=a.map(e=>{let t=r.nodeAt(e);if(!t)throw RangeError(`No cell with offset ${e} found`);let n=i+e+1;return new IK(o.resolve(n),o.resolve(n+t.content.size))});super(l[0].$from,l[0].$to,l),this.$anchorCell=e,this.$headCell=t}map(t,r){let n=t.resolve(r.map(this.$anchorCell.pos)),i=t.resolve(r.map(this.$headCell.pos));if(UN(n)&&UN(i)&&U_(n,i)){let t=this.$anchorCell.node(-1)!=n.node(-1);return t&&this.isRowSelection()?e.rowSelection(n,i):t&&this.isColSelection()?e.colSelection(n,i):new e(n,i)}return I2.between(n,i)}content(){let e=this.$anchorCell.node(-1),t=US.get(e),r=this.$anchorCell.start(-1),n=t.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),i={},s=[];for(let r=n.top;r<n.bottom;r++){let o=[];for(let s=r*t.width+n.left,a=n.left;a<n.right;a++,s++){let r=t.map[s];if(i[r])continue;i[r]=!0;let a=t.findCell(r),l=e.nodeAt(r);if(!l)throw RangeError(`No cell with offset ${r} found`);let c=n.left-a.left,h=a.right-n.right;if(c>0||h>0){let e=l.attrs;if(c>0&&(e=UD(e,0,c)),h>0&&(e=UD(e,e.colspan-h,h)),a.left<n.left){if(!(l=l.type.createAndFill(e)))throw RangeError(`Could not create cell with attrs ${JSON.stringify(e)}`)}else l=l.type.create(e,l.content)}if(a.top<n.top||a.bottom>n.bottom){let e={...l.attrs,rowspan:Math.min(a.bottom,n.bottom)-Math.max(a.top,n.top)};l=a.top<n.top?l.type.createAndFill(e):l.type.create(e,l.content)}o.push(l)}s.push(e.child(r).copy(PM.from(o)))}let o=this.isColSelection()&&this.isRowSelection()?e:s;return new PR(PM.from(o),1,1)}replace(e,t=PR.empty){let r=e.steps.length,n=this.ranges;for(let i=0;i<n.length;i++){let{$from:s,$to:o}=n[i],a=e.mapping.slice(r);e.replace(a.map(s.pos),a.map(o.pos),i?PR.empty:t)}let i=IJ.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);i&&e.setSelection(i)}replaceWith(e,t){this.replace(e,new PR(PM.from(t),0,0))}forEachCell(e){let t=this.$anchorCell.node(-1),r=US.get(t),n=this.$anchorCell.start(-1),i=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n));for(let r=0;r<i.length;r++)e(t.nodeAt(i[r]),n+i[r])}isColSelection(){let e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);return!(Math.min(e,t)>0)&&Math.max(e+this.$anchorCell.nodeAfter.attrs.rowspan,t+this.$headCell.nodeAfter.attrs.rowspan)==this.$headCell.node(-1).childCount}static colSelection(t,r=t){let n=t.node(-1),i=US.get(n),s=t.start(-1),o=i.findCell(t.pos-s),a=i.findCell(r.pos-s),l=t.node(0);return o.top<=a.top?(o.top>0&&(t=l.resolve(s+i.map[o.left])),a.bottom<i.height&&(r=l.resolve(s+i.map[i.width*(i.height-1)+a.right-1]))):(a.top>0&&(r=l.resolve(s+i.map[a.left])),o.bottom<i.height&&(t=l.resolve(s+i.map[i.width*(i.height-1)+o.right-1]))),new e(t,r)}isRowSelection(){let e=this.$anchorCell.node(-1),t=US.get(e),r=this.$anchorCell.start(-1),n=t.colCount(this.$anchorCell.pos-r),i=t.colCount(this.$headCell.pos-r);return!(Math.min(n,i)>0)&&Math.max(n+this.$anchorCell.nodeAfter.attrs.colspan,i+this.$headCell.nodeAfter.attrs.colspan)==t.width}eq(t){return t instanceof e&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,r=t){let n=t.node(-1),i=US.get(n),s=t.start(-1),o=i.findCell(t.pos-s),a=i.findCell(r.pos-s),l=t.node(0);return o.left<=a.left?(o.left>0&&(t=l.resolve(s+i.map[o.top*i.width])),a.right<i.width&&(r=l.resolve(s+i.map[i.width*(a.top+1)-1]))):(a.left>0&&(r=l.resolve(s+i.map[a.top*i.width])),o.right<i.width&&(t=l.resolve(s+i.map[i.width*(o.top+1)-1]))),new e(t,r)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,r){return new e(t.resolve(r.anchor),t.resolve(r.head))}static create(t,r,n=r){return new e(t.resolve(r),t.resolve(n))}getBookmark(){return new UI(this.$anchorCell.pos,this.$headCell.pos)}};UP.prototype.visible=!1,IJ.jsonID("cell",UP);var UI=class e{constructor(e,t){this.anchor=e,this.head=t}map(t){return new e(t.map(this.anchor),t.map(this.head))}resolve(e){let t=e.resolve(this.anchor),r=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==r.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&r.index()<r.parent.childCount&&U_(t,r)?new UP(t,r):IJ.near(r,1)}};function Uz(e){if(!(e.selection instanceof UP))return null;let t=[];return e.selection.forEachCell((e,r)=>{t.push(qc.node(r,r+e.nodeSize,{class:"selectedCell"}))}),qd.create(e.doc,t)}var UL=new zc("fix-tables");function Uq(e,t){let r;let n=(t,n)=>{"table"==t.type.spec.tableRole&&(r=function(e,t,r,n){let i,s;let o=US.get(t);if(!o.problems)return n;n||(n=e.tr);let a=[];for(let e=0;e<o.height;e++)a.push(0);for(let e=0;e<o.problems.length;e++){let i=o.problems[e];if("collision"==i.type){let e=t.nodeAt(i.pos);if(!e)continue;let s=e.attrs;for(let e=0;e<s.rowspan;e++)a[i.row+e]+=i.n;n.setNodeMarkup(n.mapping.map(r+1+i.pos),null,UD(s,s.colspan-i.n,i.n))}else if("missing"==i.type)a[i.row]+=i.n;else if("overlong_rowspan"==i.type){let e=t.nodeAt(i.pos);if(!e)continue;n.setNodeMarkup(n.mapping.map(r+1+i.pos),null,{...e.attrs,rowspan:e.attrs.rowspan-i.n})}else if("colwidth mismatch"==i.type){let e=t.nodeAt(i.pos);if(!e)continue;n.setNodeMarkup(n.mapping.map(r+1+i.pos),null,{...e.attrs,colwidth:i.colwidth})}else if("zero_sized"==i.type){let e=n.mapping.map(r);n.delete(e,e+t.nodeSize)}}for(let e=0;e<a.length;e++)a[e]&&(null==i&&(i=e),s=e);for(let l=0,c=r+1;l<o.height;l++){let r=t.child(l),o=c+r.nodeSize,h=a[l];if(h>0){let t="cell";r.firstChild&&(t=r.firstChild.type.spec.tableRole);let a=[];for(let r=0;r<h;r++){let r=UC(e.schema)[t].createAndFill();r&&a.push(r)}let u=(0==l||i==l-1)&&s==l?c+1:o-1;n.insert(n.mapping.map(u),a)}c=o}return n.setMeta(UL,{fixTables:!0})}(e,t,n,r))};return t?t.doc!=e.doc&&function e(t,r,n,i){let s=t.childCount,o=r.childCount;e:for(let a=0,l=0;a<o;a++){let o=r.child(a);for(let e=l,r=Math.min(s,a+3);e<r;e++)if(t.child(e)==o){l=e+1,n+=o.nodeSize;continue e}i(o,n),l<s&&t.child(l).sameMarkup(o)?e(t.child(l),o,n+1,i):o.nodesBetween(0,o.content.size,i,n+1),n+=o.nodeSize}}(t.doc,e.doc,0,n):e.doc.descendants(n),r}function U$(e){let t=e.selection,r=UE(e),n=r.node(-1),i=r.start(-1),s=US.get(n);return{...t instanceof UP?s.rectBetween(t.$anchorCell.pos-i,t.$headCell.pos-i):s.findCell(r.pos-i),tableStart:i,map:s,table:n}}function UB(e,{map:t,tableStart:r,table:n},i){let s=i>0?-1:0;(function(e,t,r){let n=UC(t.type.schema).header_cell;for(let i=0;i<e.height;i++)if(t.nodeAt(e.map[r+i*e.width]).type!=n)return!1;return!0})(t,n,i+s)&&(s=0==i||i==t.width?null:0);for(let o=0;o<t.height;o++){let a=o*t.width+i;if(i>0&&i<t.width&&t.map[a-1]==t.map[a]){let s=t.map[a],l=n.nodeAt(s);e.setNodeMarkup(e.mapping.map(r+s),null,UR(l.attrs,i-t.colCount(s))),o+=l.attrs.rowspan-1}else{let l=null==s?UC(n.type.schema).cell:n.nodeAt(t.map[a+s]).type,c=t.positionAt(o,i,n);e.insert(e.mapping.map(r+c),l.createAndFill())}}return e}function UF(e,{map:t,tableStart:r,table:n},i){var s;let o=r;for(let e=0;e<i;e++)o+=n.child(e).nodeSize;let a=[],l=i>0?-1:0;(function(e,t,r){var n;let i=UC(t.type.schema).header_cell;for(let s=0;s<e.width;s++)if((null==(n=t.nodeAt(e.map[s+r*e.width]))?void 0:n.type)!=i)return!1;return!0})(t,n,i+l)&&(l=0==i||i==t.height?null:0);for(let o=0,c=t.width*i;o<t.width;o++,c++)if(i>0&&i<t.height&&t.map[c]==t.map[c-t.width]){let i=t.map[c],s=n.nodeAt(i).attrs;e.setNodeMarkup(r+i,null,{...s,rowspan:s.rowspan+1}),o+=s.colspan-1}else{let e=null==l?UC(n.type.schema).cell:null==(s=n.nodeAt(t.map[c+l*t.width]))?void 0:s.type,r=null==e?void 0:e.createAndFill();r&&a.push(r)}return e.insert(o,UC(n.type.schema).row.create(null,a)),e}function UQ(e){let t=e.content;return 1==t.childCount&&t.child(0).isTextblock&&0==t.child(0).childCount}function UV(e,t){let r=e.selection;if(!(r instanceof UP)||r.$anchorCell.pos==r.$headCell.pos)return!1;let n=U$(e),{map:i}=n;if(function({width:e,height:t,map:r},n){let i=n.top*e+n.left,s=i,o=(n.bottom-1)*e+n.left,a=i+(n.right-n.left-1);for(let t=n.top;t<n.bottom;t++){if(n.left>0&&r[s]==r[s-1]||n.right<e&&r[a]==r[a+1])return!0;s+=e,a+=e}for(let s=n.left;s<n.right;s++){if(n.top>0&&r[i]==r[i-e]||n.bottom<t&&r[o]==r[o+e])return!0;i++,o++}return!1}(i,n))return!1;if(t){let r=e.tr,s={},o=PM.empty,a,l;for(let e=n.top;e<n.bottom;e++)for(let t=n.left;t<n.right;t++){let c=i.map[e*i.width+t],h=n.table.nodeAt(c);if(!(s[c]||!h)){if(s[c]=!0,null==a)a=c,l=h;else{UQ(h)||(o=o.append(h.content));let e=r.mapping.map(c+n.tableStart);r.delete(e,e+h.nodeSize)}}}if(null==a||null==l)return!0;if(r.setNodeMarkup(a+n.tableStart,null,{...UR(l.attrs,l.attrs.colspan,n.right-n.left-l.attrs.colspan),rowspan:n.bottom-n.top}),o.size){let e=a+1+l.content.size,t=UQ(l)?a+1:e;r.replaceWith(t+n.tableStart,e+n.tableStart,o)}r.setSelection(new UP(r.doc.resolve(a+n.tableStart))),t(r)}return!0}function UH(e,t){var r;let n=UC(e.schema);return(r=({node:e})=>n[e.type.spec.tableRole],(e,t)=>{var n;let i,s;let o=e.selection;if(o instanceof UP){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;i=o.$anchorCell.nodeAfter,s=o.$anchorCell.pos}else{if(!(i=function(e){for(let t=e.depth;t>0;t--){let r=e.node(t).type.spec.tableRole;if("cell"===r||"header_cell"===r)return e.node(t)}return null}(o.$from)))return!1;s=null==(n=UA(o.$from))?void 0:n.pos}if(null==i||null==s||1==i.attrs.colspan&&1==i.attrs.rowspan)return!1;if(t){let n,a=i.attrs,l=[],c=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});let h=U$(e),u=e.tr;for(let e=0;e<h.right-h.left;e++)l.push(c?{...a,colwidth:c&&c[e]?[c[e]]:null}:a);for(let e=h.top;e<h.bottom;e++){let t=h.map.positionAt(e,h.left,h.table);e==h.top&&(t+=i.nodeSize);for(let s=h.left,o=0;s<h.right;s++,o++)s==h.left&&e==h.top||u.insert(n=u.mapping.map(t+h.tableStart,1),r({node:i,row:e,col:s}).createAndFill(l[o]))}u.setNodeMarkup(s,r({node:i,row:h.top,col:h.left}),l[0]),o instanceof UP&&u.setSelection(new UP(u.doc.resolve(o.$anchorCell.pos),n?u.doc.resolve(n):void 0)),t(u)}return!0})(e,t)}function UW(e,t,r){let n=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1});for(let e=0;e<n.length;e++){let i=t.table.nodeAt(n[e]);if(i&&i.type!==r.header_cell)return!1}return!0}function UU(e,t){return(t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(t,r){if(!UM(t))return!1;if(r){let n=UC(t.schema),i=U$(t),s=t.tr,o=i.map.cellsInRect("column"==e?{left:i.left,top:0,right:i.right,bottom:i.map.height}:"row"==e?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),a=o.map(e=>i.table.nodeAt(e));for(let e=0;e<o.length;e++)a[e].type==n.header_cell&&s.setNodeMarkup(i.tableStart+o[e],n.cell,a[e].attrs);if(0==s.steps.length)for(let e=0;e<o.length;e++)s.setNodeMarkup(i.tableStart+o[e],n.header_cell,a[e].attrs);r(s)}return!0}:function(t,r){if(!UM(t))return!1;if(r){let n=UC(t.schema),i=U$(t),s=t.tr,o=UW("row",i,n),a=UW("column",i,n),l=+("column"===e?!!o:"row"===e&&!!a),c="column"==e?{left:0,top:l,right:1,bottom:i.map.height}:"row"==e?{left:l,top:0,right:i.map.width,bottom:1}:i,h="column"==e?a?n.cell:n.header_cell:"row"==e?o?n.cell:n.header_cell:n.cell;i.map.cellsInRect(c).forEach(e=>{let t=e+i.tableStart,r=s.doc.nodeAt(t);r&&s.setNodeMarkup(t,h,r.attrs)}),r(s)}return!0}}UU("row",{useDeprecatedLogic:!0}),UU("column",{useDeprecatedLogic:!0});var UG=UU("cell",{useDeprecatedLogic:!0});function UX(e){return function(t,r){if(!UM(t))return!1;let n=function(e,t){if(t<0){let t=e.nodeBefore;if(t)return e.pos-t.nodeSize;for(let t=e.index(-1)-1,r=e.before();t>=0;t--){let n=e.node(-1).child(t),i=n.lastChild;if(i)return r-1-i.nodeSize;r-=n.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;let t=e.node(-1);for(let r=e.indexAfter(-1),n=e.after();r<t.childCount;r++){let e=t.child(r);if(e.childCount)return n+1;n+=e.nodeSize}}return null}(UE(t),e);if(null==n)return!1;if(r){let e=t.doc.resolve(n);r(t.tr.setSelection(I2.between(e,e.node(0).resolve(e.pos+e.nodeAfter.nodeSize))).scrollIntoView())}return!0}}function UY(e,t){let r=e.selection;if(!(r instanceof UP))return!1;if(t){let n=e.tr,i=UC(e.schema).cell.createAndFill().content;r.forEachCell((e,t)=>{e.content.eq(i)||n.replace(n.mapping.map(t+1),n.mapping.map(t+e.nodeSize-1),new PR(i,0,0))}),n.docChanged&&t(n)}return!0}function UZ(e,t){let r=e.createAndFill();return new IY(r).replace(0,r.content.size,t).doc}function UJ(e,t,r,n,i,s,o,a){if(0==o||o==t.height)return!1;let l=!1;for(let c=i;c<s;c++){let i=o*t.width+c,s=t.map[i];if(t.map[i-t.width]==s){l=!0;let i=r.nodeAt(s),{top:h,left:u}=t.findCell(s);e.setNodeMarkup(e.mapping.slice(a).map(s+n),null,{...i.attrs,rowspan:o-h}),e.insert(e.mapping.slice(a).map(t.positionAt(o,u,r)),i.type.createAndFill({...i.attrs,rowspan:h+i.attrs.rowspan-o})),c+=i.attrs.colspan-1}}return l}function UK(e,t,r,n,i,s,o,a){if(0==o||o==t.width)return!1;let l=!1;for(let c=i;c<s;c++){let i=c*t.width+o,s=t.map[i];if(t.map[i-1]==s){l=!0;let i=r.nodeAt(s),h=t.colCount(s),u=e.mapping.slice(a).map(s+n);e.setNodeMarkup(u,null,UD(i.attrs,o-h,i.attrs.colspan-(o-h))),e.insert(u+i.nodeSize,i.type.createAndFill(UD(i.attrs,0,o-h))),c+=i.attrs.rowspan-1}}return l}function U0(e,t,r,n,i){let s=r?e.doc.nodeAt(r-1):e.doc;if(!s)throw Error("No table found");let o=US.get(s),{top:a,left:l}=n,c=l+i.width,h=a+i.height,u=e.tr,d=0;function f(){if(!(s=r?u.doc.nodeAt(r-1):u.doc))throw Error("No table found");o=US.get(s),d=u.mapping.maps.length}(function(e,t,r,n,i,s,o){let a,l;let c=UC(e.doc.type.schema);if(i>t.width)for(let s=0,o=0;s<t.height;s++){let h;let u=r.child(s);o+=u.nodeSize;let d=[];h=null==u.lastChild||u.lastChild.type==c.cell?a||(a=c.cell.createAndFill()):l||(l=c.header_cell.createAndFill());for(let e=t.width;e<i;e++)d.push(h);e.insert(e.mapping.slice(0).map(o-1+n),d)}if(s>t.height){let h=[];for(let e=0,n=(t.height-1)*t.width;e<Math.max(t.width,i);e++){let i=!(e>=t.width)&&r.nodeAt(t.map[n+e]).type==c.header_cell;h.push(i?l||(l=c.header_cell.createAndFill()):a||(a=c.cell.createAndFill()))}let u=c.row.create(null,PM.from(h)),d=[];for(let e=t.height;e<s;e++)d.push(u);e.insert(e.mapping.slice(o).map(n+r.nodeSize-2),d)}return!!(a||l)})(u,o,s,r,c,h,0)&&f(),UJ(u,o,s,r,l,c,a,d)&&f(),UJ(u,o,s,r,l,c,h,d)&&f(),UK(u,o,s,r,a,h,l,d)&&f(),UK(u,o,s,r,a,h,c,d)&&f();for(let e=a;e<h;e++){let t=o.positionAt(e,l,s),n=o.positionAt(e,c,s);u.replace(u.mapping.slice(d).map(t+r),u.mapping.slice(d).map(n+r),new PR(i.rows[e-a],0,0))}f(),u.setSelection(new UP(u.doc.resolve(r+o.positionAt(a,l,s)),u.doc.resolve(r+o.positionAt(h-1,c-1,s)))),t(u)}var U1=qQ({ArrowLeft:U4("horiz",-1),ArrowRight:U4("horiz",1),ArrowUp:U4("vert",-1),ArrowDown:U4("vert",1),"Shift-ArrowLeft":U5("horiz",-1),"Shift-ArrowRight":U5("horiz",1),"Shift-ArrowUp":U5("vert",-1),"Shift-ArrowDown":U5("vert",1),Backspace:UY,"Mod-Backspace":UY,Delete:UY,"Mod-Delete":UY});function U2(e,t,r){return!r.eq(e.selection)&&(t&&t(e.tr.setSelection(r).scrollIntoView()),!0)}function U4(e,t){return(r,n,i)=>{if(!i)return!1;let s=r.selection;if(s instanceof UP)return U2(r,n,IJ.near(s.$headCell,t));if("horiz"!=e&&!s.empty)return!1;let o=U8(i,e,t);if(null==o)return!1;if("horiz"==e)return U2(r,n,IJ.near(r.doc.resolve(s.head+t),t));{let i;let s=r.doc.resolve(o),a=Uj(s,e,t);return i=a?IJ.near(a,1):t<0?IJ.near(r.doc.resolve(s.before(-1)),-1):IJ.near(r.doc.resolve(s.after(-1)),1),U2(r,n,i)}}}function U5(e,t){return(r,n,i)=>{let s;if(!i)return!1;let o=r.selection;if(o instanceof UP)s=o;else{let n=U8(i,e,t);if(null==n)return!1;s=new UP(r.doc.resolve(n))}let a=Uj(s.$headCell,e,t);return!!a&&U2(r,n,new UP(s.$anchorCell,a))}}function U3(e,t){let r=UA(e.state.doc.resolve(t));return!!r&&(e.dispatch(e.state.tr.setSelection(new UP(r))),!0)}function U6(e,t,r){if(!UM(e.state))return!1;let n=function(e){if(!e.size)return null;let{content:t,openStart:r,openEnd:n}=e;for(;1==t.childCount&&(r>0&&n>0||"table"==t.child(0).type.spec.tableRole);)r--,n--,t=t.child(0).content;let i=t.child(0),s=i.type.spec.tableRole,o=i.type.schema,a=[];if("row"==s)for(let e=0;e<t.childCount;e++){let i=t.child(e).content,s=e?0:Math.max(0,r-1),l=e<t.childCount-1?0:Math.max(0,n-1);(s||l)&&(i=UZ(UC(o).row,new PR(i,s,l)).content),a.push(i)}else{if("cell"!=s&&"header_cell"!=s)return null;a.push(r||n?UZ(UC(o).row,new PR(t,r,n)).content:t)}return function(e,t){let r=[];for(let e=0;e<t.length;e++){let n=t[e];for(let t=n.childCount-1;t>=0;t--){let{rowspan:i,colspan:s}=n.child(t).attrs;for(let t=e;t<e+i;t++)r[t]=(r[t]||0)+s}}let n=0;for(let e=0;e<r.length;e++)n=Math.max(n,r[e]);for(let i=0;i<r.length;i++)if(i>=t.length&&t.push(PM.empty),r[i]<n){let s=UC(e).cell.createAndFill(),o=[];for(let e=r[i];e<n;e++)o.push(s);t[i]=t[i].append(PM.from(o))}return{height:t.length,width:n,rows:t}}(o,a)}(r),i=e.state.selection;if(i instanceof UP){n||(n={width:1,height:1,rows:[PM.from(UZ(UC(e.state.schema).cell,r))]});let t=i.$anchorCell.node(-1),s=i.$anchorCell.start(-1),o=US.get(t).rectBetween(i.$anchorCell.pos-s,i.$headCell.pos-s);return n=function({width:e,height:t,rows:r},n,i){if(e!=n){let t=[],i=[];for(let e=0;e<r.length;e++){let s=r[e],o=[];for(let r=t[e]||0,i=0;r<n;i++){let a=s.child(i%s.childCount);r+a.attrs.colspan>n&&(a=a.type.createChecked(UD(a.attrs,a.attrs.colspan,r+a.attrs.colspan-n),a.content)),o.push(a),r+=a.attrs.colspan;for(let r=1;r<a.attrs.rowspan;r++)t[e+r]=(t[e+r]||0)+a.attrs.colspan}i.push(PM.from(o))}r=i,e=n}if(t!=i){let e=[];for(let n=0,s=0;n<i;n++,s++){let o=[],a=r[s%t];for(let e=0;e<a.childCount;e++){let t=a.child(e);n+t.attrs.rowspan>i&&(t=t.type.create({...t.attrs,rowspan:Math.max(1,i-t.attrs.rowspan)},t.content)),o.push(t)}e.push(PM.from(o))}r=e,t=i}return{width:e,height:t,rows:r}}(n,o.right-o.left,o.bottom-o.top),U0(e.state,e.dispatch,s,o,n),!0}if(!n)return!1;{let t=UE(e.state),r=t.start(-1);return U0(e.state,e.dispatch,r,US.get(t.node(-1)).findCell(t.pos-r),n),!0}}function U7(e,t){var r;let n;if(t.ctrlKey||t.metaKey)return;let i=U9(e,t.target);if(t.shiftKey&&e.state.selection instanceof UP)s(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&i&&null!=(n=UA(e.state.selection.$anchor))&&(null==(r=Ge(e,t))?void 0:r.pos)!=n.pos)s(n,t),t.preventDefault();else if(!i)return;function s(t,r){let n=Ge(e,r),i=null==UT.getState(e.state);if(!n||!U_(t,n)){if(!i)return;n=t}let s=new UP(t,n);if(i||!e.state.selection.eq(s)){let r=e.state.tr.setSelection(s);i&&r.setMeta(UT,t.pos),e.dispatch(r)}}function o(){e.root.removeEventListener("mouseup",o),e.root.removeEventListener("dragstart",o),e.root.removeEventListener("mousemove",a),null!=UT.getState(e.state)&&e.dispatch(e.state.tr.setMeta(UT,-1))}function a(r){let n;let a=UT.getState(e.state);if(null!=a)n=e.state.doc.resolve(a);else if(U9(e,r.target)!=i&&!(n=Ge(e,t)))return o();n&&s(n,r)}e.root.addEventListener("mouseup",o),e.root.addEventListener("dragstart",o),e.root.addEventListener("mousemove",a)}function U8(e,t,r){if(!(e.state.selection instanceof I2))return null;let{$head:n}=e.state.selection;for(let i=n.depth-1;i>=0;i--){let s=n.node(i);if((r<0?n.index(i):n.indexAfter(i))!=(r<0?0:s.childCount))break;if("cell"==s.type.spec.tableRole||"header_cell"==s.type.spec.tableRole){let s=n.before(i),o="vert"==t?r>0?"down":"up":r>0?"right":"left";return e.endOfTextblock(o)?s:null}}return null}function U9(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t;return null}function Ge(e,t){let r=e.posAtCoords({left:t.clientX,top:t.clientY});return r&&r?UA(e.state.doc.resolve(r.pos)):null}var Gt=class{constructor(e,t){this.node=e,this.defaultCellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${t}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Gr(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type==this.node.type&&(this.node=e,Gr(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))}};function Gr(e,t,r,n,i,s){var o;let a=0,l=!0,c=t.firstChild,h=e.firstChild;if(h){for(let e=0,r=0;e<h.childCount;e++){let{colspan:o,colwidth:u}=h.child(e).attrs;for(let e=0;e<o;e++,r++){let o=i==r?s:u&&u[e],h=o?o+"px":"";if(a+=o||n,o||(l=!1),c)c.style.width!=h&&(c.style.width=h),c=c.nextSibling;else{let e=document.createElement("col");e.style.width=h,t.appendChild(e)}}}for(;c;){let e=c.nextSibling;null==(o=c.parentNode)||o.removeChild(c),c=e}l?(r.style.width=a+"px",r.style.minWidth=""):(r.style.width="",r.style.minWidth=a+"px")}}var Gn=new zc("tableColumnResizing"),Gi=class e{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(t){let r=t.getMeta(Gn);if(r&&null!=r.setHandle)return new e(r.setHandle,!1);if(r&&void 0!==r.setDragging)return new e(this.activeHandle,r.setDragging);if(this.activeHandle>-1&&t.docChanged){let r=t.mapping.map(this.activeHandle,-1);return UN(t.doc.resolve(r))||(r=-1),new e(r,this.dragging)}return this}};function Gs(e,t,r,n){let i=e.posAtCoords({left:t.clientX+("right"==r?-n:n),top:t.clientY});if(!i)return -1;let{pos:s}=i,o=UA(e.state.doc.resolve(s));if(!o)return -1;if("right"==r)return o.pos;let a=US.get(o.node(-1)),l=o.start(-1),c=a.map.indexOf(o.pos-l);return c%a.width==0?-1:l+a.map[c-1]}function Go(e,t,r){let n=t.clientX-e.startX;return Math.max(r,e.startWidth+n)}function Ga(e,t){e.dispatch(e.state.tr.setMeta(Gn,{setHandle:t}))}function Gl(e,t,r,n){let i=e.state.doc.resolve(t),s=i.node(-1),o=i.start(-1),a=US.get(s).colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1,l=e.domAtPos(i.start(-1)).node;for(;l&&"TABLE"!=l.nodeName;)l=l.parentNode;l&&Gr(s,l.firstChild,l,n,a,r)}function Gc(e,t){return t?["width",`${Math.max(t,e)}px`]:["min-width",`${e}px`]}function Gh(e,t,r,n,i,s){var o;let a=0,l=!0,c=t.firstChild,h=e.firstChild;if(null!==h)for(let e=0,r=0;e<h.childCount;e+=1){let{colspan:o,colwidth:u}=h.child(e).attrs;for(let e=0;e<o;e+=1,r+=1){let o=i===r?s:u&&u[e],h=o?`${o}px`:"";if(a+=o||n,o||(l=!1),c){if(c.style.width!==h){let[e,t]=Gc(n,o);c.style.setProperty(e,t)}c=c.nextSibling}else{let e=document.createElement("col"),[r,i]=Gc(n,o);e.style.setProperty(r,i),t.appendChild(e)}}}for(;c;){let e=c.nextSibling;null===(o=c.parentNode)||void 0===o||o.removeChild(c),c=e}l?(r.style.width=`${a}px`,r.style.minWidth=""):(r.style.width="",r.style.minWidth=`${a}px`)}class Gu{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Gh(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type===this.node.type&&(this.node=e,Gh(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return"attributes"===e.type&&(e.target===this.table||this.colgroup.contains(e.target))}}function Gd(e,t){return e.createAndFill()}let Gf=({editor:e})=>{let{selection:t}=e.state;if(!(t instanceof UP))return!1;let r=0,n=$7(t.ranges[0].$from,e=>"table"===e.type.name);return null==n||n.node.descendants(e=>{if("table"===e.type.name)return!1;["tableCell","tableHeader"].includes(e.type.name)&&(r+=1)}),r===t.ranges.length&&(e.commands.deleteTable(),!0)},Gp=Bk.create({name:"table",addOptions:()=>({HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:Gu,lastColumnResizable:!0,allowTableNodeSelection:!1}),content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML:()=>[{tag:"table"}],renderHTML({node:e,HTMLAttributes:t}){let{colgroup:r,tableWidth:n,tableMinWidth:i}=function(e,t,r,n){let i=0,s=!0,o=[],a=e.firstChild;if(!a)return{};for(let e=0,r=0;e<a.childCount;e+=1){let{colspan:n,colwidth:l}=a.child(e).attrs;for(let e=0;e<n;e+=1,r+=1){let n=void 0===r?void 0:l&&l[e];i+=n||t,n||(s=!1);let[a,c]=Gc(t,n);o.push(["col",{style:`${a}: ${c}`}])}}return{colgroup:["colgroup",{},...o],tableWidth:s?`${i}px`:"",tableMinWidth:s?"":`${i}px`}}(e,this.options.cellMinWidth);return["table",$m(this.options.HTMLAttributes,t,{style:n?`width: ${n}`:`min-width: ${i}`}),r,["tbody",0]]},addCommands:()=>({insertTable:({rows:e=3,cols:t=3,withHeaderRow:r=!0}={})=>({tr:n,dispatch:i,editor:s})=>{let o=function(e,t,r,n,i){let s=function(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;let t={};return Object.keys(e.nodes).forEach(r=>{let n=e.nodes[r];n.spec.tableRole&&(t[n.spec.tableRole]=n)}),e.cached.tableNodeTypes=t,t}(e),o=[],a=[];for(let e=0;e<r;e+=1){let e=Gd(s.cell);if(e&&a.push(e),n){let e=Gd(s.header_cell);e&&o.push(e)}}let l=[];for(let e=0;e<t;e+=1)l.push(s.row.createChecked(null,n&&0===e?o:a));return s.table.createChecked(null,l)}(s.schema,e,t,r);if(i){let e=n.selection.from+1;n.replaceSelectionWith(o).scrollIntoView().setSelection(I2.near(n.doc.resolve(e)))}return!0},addColumnBefore:()=>({state:e,dispatch:t})=>(function(e,t){if(!UM(e))return!1;if(t){let r=U$(e);t(UB(e.tr,r,r.left))}return!0})(e,t),addColumnAfter:()=>({state:e,dispatch:t})=>(function(e,t){if(!UM(e))return!1;if(t){let r=U$(e);t(UB(e.tr,r,r.right))}return!0})(e,t),deleteColumn:()=>({state:e,dispatch:t})=>(function(e,t){if(!UM(e))return!1;if(t){let r=U$(e),n=e.tr;if(0==r.left&&r.right==r.map.width)return!1;for(let e=r.right-1;function(e,{map:t,table:r,tableStart:n},i){let s=e.mapping.maps.length;for(let o=0;o<t.height;){let a=o*t.width+i,l=t.map[a],c=r.nodeAt(l),h=c.attrs;if(i>0&&t.map[a-1]==l||i<t.width-1&&t.map[a+1]==l)e.setNodeMarkup(e.mapping.slice(s).map(n+l),null,UD(h,i-t.colCount(l)));else{let t=e.mapping.slice(s).map(n+l);e.delete(t,t+c.nodeSize)}o+=h.rowspan}}(n,r,e),e!=r.left;e--){let e=r.tableStart?n.doc.nodeAt(r.tableStart-1):n.doc;if(!e)throw RangeError("No table found");r.table=e,r.map=US.get(e)}t(n)}return!0})(e,t),addRowBefore:()=>({state:e,dispatch:t})=>(function(e,t){if(!UM(e))return!1;if(t){let r=U$(e);t(UF(e.tr,r,r.top))}return!0})(e,t),addRowAfter:()=>({state:e,dispatch:t})=>(function(e,t){if(!UM(e))return!1;if(t){let r=U$(e);t(UF(e.tr,r,r.bottom))}return!0})(e,t),deleteRow:()=>({state:e,dispatch:t})=>(function(e,t){if(!UM(e))return!1;if(t){let r=U$(e),n=e.tr;if(0==r.top&&r.bottom==r.map.height)return!1;for(let e=r.bottom-1;function(e,{map:t,table:r,tableStart:n},i){let s=0;for(let e=0;e<i;e++)s+=r.child(e).nodeSize;let o=s+r.child(i).nodeSize,a=e.mapping.maps.length;e.delete(s+n,o+n);let l=new Set;for(let s=0,o=i*t.width;s<t.width;s++,o++){let c=t.map[o];if(!l.has(c)){if(l.add(c),i>0&&c==t.map[o-t.width]){let t=r.nodeAt(c).attrs;e.setNodeMarkup(e.mapping.slice(a).map(c+n),null,{...t,rowspan:t.rowspan-1}),s+=t.colspan-1}else if(i<t.height&&c==t.map[o+t.width]){let o=r.nodeAt(c),l=o.attrs,h=o.type.create({...l,rowspan:o.attrs.rowspan-1},o.content),u=t.positionAt(i+1,s,r);e.insert(e.mapping.slice(a).map(n+u),h),s+=l.colspan-1}}}}(n,r,e),e!=r.top;e--){let e=r.tableStart?n.doc.nodeAt(r.tableStart-1):n.doc;if(!e)throw RangeError("No table found");r.table=e,r.map=US.get(r.table)}t(n)}return!0})(e,t),deleteTable:()=>({state:e,dispatch:t})=>(function(e,t){let r=e.selection.$anchor;for(let n=r.depth;n>0;n--)if("table"==r.node(n).type.spec.tableRole)return t&&t(e.tr.delete(r.before(n),r.after(n)).scrollIntoView()),!0;return!1})(e,t),mergeCells:()=>({state:e,dispatch:t})=>UV(e,t),splitCell:()=>({state:e,dispatch:t})=>UH(e,t),toggleHeaderColumn:()=>({state:e,dispatch:t})=>UU("column")(e,t),toggleHeaderRow:()=>({state:e,dispatch:t})=>UU("row")(e,t),toggleHeaderCell:()=>({state:e,dispatch:t})=>UG(e,t),mergeOrSplit:()=>({state:e,dispatch:t})=>!!UV(e,t)||UH(e,t),setCellAttribute:(e,t)=>({state:r,dispatch:n})=>(function(e,t){return function(r,n){if(!UM(r))return!1;let i=UE(r);if(i.nodeAfter.attrs[e]===t)return!1;if(n){let s=r.tr;r.selection instanceof UP?r.selection.forEachCell((r,n)=>{r.attrs[e]!==t&&s.setNodeMarkup(n,null,{...r.attrs,[e]:t})}):s.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[e]:t}),n(s)}return!0}})(e,t)(r,n),goToNextCell:()=>({state:e,dispatch:t})=>UX(1)(e,t),goToPreviousCell:()=>({state:e,dispatch:t})=>UX(-1)(e,t),fixTables:()=>({state:e,dispatch:t})=>(t&&Uq(e),!0),setCellSelection:e=>({tr:t,dispatch:r})=>{if(r){let r=UP.create(t.doc,e.anchorCell,e.headCell);t.setSelection(r)}return!0}}),addKeyboardShortcuts(){return{Tab:()=>!!this.editor.commands.goToNextCell()||!!this.editor.can().addRowAfter()&&this.editor.chain().addRowAfter().goToNextCell().run(),"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:Gf,"Mod-Backspace":Gf,Delete:Gf,"Mod-Delete":Gf}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[function({handleWidth:e=5,cellMinWidth:t=25,defaultCellMinWidth:r=100,View:n=Gt,lastColumnResizable:i=!0}={}){let s=new zo({key:Gn,state:{init(e,t){var i,o;let a=null==(o=null==(i=s.spec)?void 0:i.props)?void 0:o.nodeViews,l=UC(t.schema).table.name;return n&&a&&(a[l]=(e,t)=>new n(e,r,t)),new Gi(-1,!1)},apply:(e,t)=>t.apply(e)},props:{attributes:e=>{let t=Gn.getState(e);return t&&t.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(t,r)=>{!function(e,t,r,n){if(!e.editable)return;let i=Gn.getState(e.state);if(i&&!i.dragging){let s=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target),o=-1;if(s){let{left:n,right:i}=s.getBoundingClientRect();t.clientX-n<=r?o=Gs(e,t,"left",r):i-t.clientX<=r&&(o=Gs(e,t,"right",r))}if(o!=i.activeHandle){if(!n&&-1!==o){let t=e.state.doc.resolve(o),r=t.node(-1),n=US.get(r),i=t.start(-1);if(n.colCount(t.pos-i)+t.nodeAfter.attrs.colspan-1==n.width-1)return}Ga(e,o)}}}(t,r,e,i)},mouseleave:e=>{!function(e){if(!e.editable)return;let t=Gn.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&Ga(e,-1)}(e)},mousedown:(e,n)=>{!function(e,t,r,n){var i;if(!e.editable)return;let s=null!=(i=e.dom.ownerDocument.defaultView)?i:window,o=Gn.getState(e.state);if(!o||-1==o.activeHandle||o.dragging)return;let a=e.state.doc.nodeAt(o.activeHandle),l=function(e,t,{colspan:r,colwidth:n}){let i=n&&n[n.length-1];if(i)return i;let s=e.domAtPos(t),o=s.node.childNodes[s.offset].offsetWidth,a=r;if(n)for(let e=0;e<r;e++)n[e]&&(o-=n[e],a--);return o/a}(e,o.activeHandle,a.attrs);function c(t){s.removeEventListener("mouseup",c),s.removeEventListener("mousemove",h);let n=Gn.getState(e.state);null!=n&&n.dragging&&(function(e,t,r){let n=e.state.doc.resolve(t),i=n.node(-1),s=US.get(i),o=n.start(-1),a=s.colCount(n.pos-o)+n.nodeAfter.attrs.colspan-1,l=e.state.tr;for(let e=0;e<s.height;e++){let t=e*s.width+a;if(e&&s.map[t]==s.map[t-s.width])continue;let n=s.map[t],c=i.nodeAt(n).attrs,h=1==c.colspan?0:a-s.colCount(n);if(c.colwidth&&c.colwidth[h]==r)continue;let u=c.colwidth?c.colwidth.slice():Array(c.colspan).fill(0);u[h]=r,l.setNodeMarkup(o+n,null,{...c,colwidth:u})}l.docChanged&&e.dispatch(l)}(e,n.activeHandle,Go(n.dragging,t,r)),e.dispatch(e.state.tr.setMeta(Gn,{setDragging:null})))}function h(t){if(!t.which)return c(t);let i=Gn.getState(e.state);if(i&&i.dragging){let s=Go(i.dragging,t,r);Gl(e,i.activeHandle,s,n)}}e.dispatch(e.state.tr.setMeta(Gn,{setDragging:{startX:t.clientX,startWidth:l}})),Gl(e,o.activeHandle,l,n),s.addEventListener("mouseup",c),s.addEventListener("mousemove",h),t.preventDefault()}(e,n,t,r)}},decorations:e=>{let t=Gn.getState(e);if(t&&t.activeHandle>-1)return function(e,t){var r;let n=[],i=e.doc.resolve(t),s=i.node(-1);if(!s)return qd.empty;let o=US.get(s),a=i.start(-1),l=o.colCount(i.pos-a)+i.nodeAfter.attrs.colspan-1;for(let t=0;t<o.height;t++){let i=l+t*o.width;if((l==o.width-1||o.map[i]!=o.map[i+1])&&(0==t||o.map[i]!=o.map[i-o.width])){let t=o.map[i],l=a+t+s.nodeAt(t).nodeSize-1,c=document.createElement("div");c.className="column-resize-handle",null!=(r=Gn.getState(e))&&r.dragging&&n.push(qc.node(a+t,a+t+s.nodeAt(t).nodeSize,{class:"column-resize-dragging"})),n.push(qc.widget(l,c))}}return qd.create(e.doc,n)}(e,t.activeHandle)},nodeViews:{}}});return s}({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],function({allowTableNodeSelection:e=!1}={}){return new zo({key:UT,state:{init:()=>null,apply(e,t){let r=e.getMeta(UT);if(null!=r)return -1==r?null:r;if(null==t||!e.docChanged)return t;let{deleted:n,pos:i}=e.mapping.mapResult(t);return n?null:i}},props:{decorations:Uz,handleDOMEvents:{mousedown:U7},createSelectionBetween:e=>null!=UT.getState(e.state)?e.state.selection:null,handleTripleClick:U3,handleKeyDown:U1,handlePaste:U6},appendTransaction:(t,r,n)=>(function(e,t,r){let n,i;let s=(t||e).selection,o=(t||e).doc;if(s instanceof I5&&(i=s.node.type.spec.tableRole)){if("cell"==i||"header_cell"==i)n=UP.create(o,s.from);else if("row"==i){let e=o.resolve(s.from+1);n=UP.rowSelection(e,e)}else if(!r){let e=US.get(s.node),t=s.from+1,r=t+e.map[e.width*e.height-1];n=UP.create(o,t+1,r)}}else s instanceof I2&&function({$from:e,$to:t}){if(e.pos==t.pos||e.pos<t.pos-6)return!1;let r=e.pos,n=t.pos,i=e.depth;for(;i>=0&&!(e.after(i+1)<e.end(i));i--,r++);for(let e=t.depth;e>=0&&!(t.before(e+1)>t.start(e));e--,n--);return r==n&&/row|table/.test(e.node(i).type.spec.tableRole)}(s)?n=I2.create(o,s.from):s instanceof I2&&function({$from:e,$to:t}){let r,n;for(let t=e.depth;t>0;t--){let n=e.node(t);if("cell"===n.type.spec.tableRole||"header_cell"===n.type.spec.tableRole){r=n;break}}for(let e=t.depth;e>0;e--){let r=t.node(e);if("cell"===r.type.spec.tableRole||"header_cell"===r.type.spec.tableRole){n=r;break}}return r!==n&&0===t.parentOffset}(s)&&(n=I2.create(o,s.$from.start(),s.$from.end()));return n&&(t||(t=e.tr)).setSelection(n),t})(n,Uq(n,r),e)})}({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(e){let t={name:e.name,options:e.options,storage:e.storage};return{tableRole:$b($u(e,"tableRole",t))}}}),Gm=Bk.create({name:"tableRow",addOptions:()=>({HTMLAttributes:{}}),content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML:()=>[{tag:"tr"}],renderHTML({HTMLAttributes:e}){return["tr",$m(this.options.HTMLAttributes,e),0]}}),Gg=Bk.create({name:"tableHeader",addOptions:()=>({HTMLAttributes:{}}),content:"block+",addAttributes:()=>({colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{let t=e.getAttribute("colwidth");return t?t.split(",").map(e=>parseInt(e,10)):null}}}),tableRole:"header_cell",isolating:!0,parseHTML:()=>[{tag:"th"}],renderHTML({HTMLAttributes:e}){return["th",$m(this.options.HTMLAttributes,e),0]}}),Gy=Bk.create({name:"tableCell",addOptions:()=>({HTMLAttributes:{}}),content:"block+",addAttributes:()=>({colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{let t=e.getAttribute("colwidth");return t?t.split(",").map(e=>parseInt(e,10)):null}}}),tableRole:"cell",isolating:!0,parseHTML:()=>[{tag:"td"}],renderHTML({HTMLAttributes:e}){return["td",$m(this.options.HTMLAttributes,e),0]}}),Gb={};function Gv(e,t){"string"!=typeof t&&(t=Gv.defaultChars);let r=function(e){let t=Gb[e];if(t)return t;t=Gb[e]=[];for(let e=0;e<128;e++){let r=String.fromCharCode(e);t.push(r)}for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);t[n]="%"+("0"+n.toString(16).toUpperCase()).slice(-2)}return t}(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(e){let t="";for(let n=0,i=e.length;n<i;n+=3){let s=parseInt(e.slice(n+1,n+3),16);if(s<128){t+=r[s];continue}if((224&s)==192&&n+3<i){let r=parseInt(e.slice(n+4,n+6),16);if((192&r)==128){let e=s<<6&1984|63&r;e<128?t+="":t+=String.fromCharCode(e),n+=3;continue}}if((240&s)==224&&n+6<i){let r=parseInt(e.slice(n+4,n+6),16),i=parseInt(e.slice(n+7,n+9),16);if((192&r)==128&&(192&i)==128){let e=s<<12&61440|r<<6&4032|63&i;e<2048||e>=55296&&e<=57343?t+="":t+=String.fromCharCode(e),n+=6;continue}}if((248&s)==240&&n+9<i){let r=parseInt(e.slice(n+4,n+6),16),i=parseInt(e.slice(n+7,n+9),16),o=parseInt(e.slice(n+10,n+12),16);if((192&r)==128&&(192&i)==128&&(192&o)==128){let e=s<<18&1835008|r<<12&258048|i<<6&4032|63&o;e<65536||e>1114111?t+="":(e-=65536,t+=String.fromCharCode(55296+(e>>10),56320+(1023&e))),n+=9;continue}}t+=""}return t})}Gv.defaultChars=";/?:@&=+$,#",Gv.componentChars="";let Gx={};function Gw(e,t,r){"string"!=typeof t&&(r=t,t=Gw.defaultChars),typeof r>"u"&&(r=!0);let n=function(e){let t=Gx[e];if(t)return t;t=Gx[e]=[];for(let e=0;e<128;e++){let r=String.fromCharCode(e);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2))}for(let r=0;r<e.length;r++)t[e.charCodeAt(r)]=e[r];return t}(t),i="";for(let t=0,s=e.length;t<s;t++){let o=e.charCodeAt(t);if(r&&37===o&&t+2<s&&/^[0-9a-f]{2}$/i.test(e.slice(t+1,t+3))){i+=e.slice(t,t+3),t+=2;continue}if(o<128){i+=n[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&t+1<s){let r=e.charCodeAt(t+1);if(r>=56320&&r<=57343){i+=encodeURIComponent(e[t]+e[t+1]),t++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(e[t])}return i}function Gk(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&-1!==e.hostname.indexOf(":")?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||""}function GO(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}Gw.defaultChars=";/?:@&=+$,-_.!~*'()#",Gw.componentChars="-_.!~*'()";let GS=/^([a-z0-9.+-]+:)/i,GC=/:[0-9]*$/,GT=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,GA=["%","/","?",";","#"].concat(["'"].concat(["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]))),GM=["/","?","#"],GE=/^[+a-z0-9A-Z_-]{0,63}$/,GN=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,G_={javascript:!0,"javascript:":!0},Gj={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function GD(e,t){if(e&&e instanceof GO)return e;let r=new GO;return r.parse(e,t),r}GO.prototype.parse=function(e,t){let r,n,i,s=e;if(s=s.trim(),!t&&1===e.split("#").length){let e=GT.exec(s);if(e)return this.pathname=e[1],e[2]&&(this.search=e[2]),this}let o=GS.exec(s);if(o&&(r=(o=o[0]).toLowerCase(),this.protocol=o,s=s.substr(o.length)),(t||o||s.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i="//"===s.substr(0,2))&&!(o&&G_[o])&&(s=s.substr(2),this.slashes=!0),!G_[o]&&(i||o&&!Gj[o])){let e,t,r=-1;for(let e=0;e<GM.length;e++)-1!==(n=s.indexOf(GM[e]))&&(-1===r||n<r)&&(r=n);-1!==(t=-1===r?s.lastIndexOf("@"):s.lastIndexOf("@",r))&&(e=s.slice(0,t),s=s.slice(t+1),this.auth=e),r=-1;for(let e=0;e<GA.length;e++)-1!==(n=s.indexOf(GA[e]))&&(-1===r||n<r)&&(r=n);-1===r&&(r=s.length),":"===s[r-1]&&r--;let i=s.slice(0,r);s=s.slice(r),this.parseHost(i),this.hostname=this.hostname||"";let o="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!o){let e=this.hostname.split(/\./);for(let t=0,r=e.length;t<r;t++){let r=e[t];if(r&&!r.match(GE)){let n="";for(let e=0,t=r.length;e<t;e++)r.charCodeAt(e)>127?n+="x":n+=r[e];if(!n.match(GE)){let n=e.slice(0,t),i=e.slice(t+1),o=r.match(GN);o&&(n.push(o[1]),i.unshift(o[2])),i.length&&(s=i.join(".")+s),this.hostname=n.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),o&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}let a=s.indexOf("#");-1!==a&&(this.hash=s.substr(a),s=s.slice(0,a));let l=s.indexOf("?");return -1!==l&&(this.search=s.substr(l),s=s.slice(0,l)),s&&(this.pathname=s),Gj[r]&&this.hostname&&!this.pathname&&(this.pathname=""),this},GO.prototype.parseHost=function(e){let t=GC.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};let GR=Object.freeze(Object.defineProperty({__proto__:null,decode:Gv,encode:Gw,format:Gk,parse:GD},Symbol.toStringTag,{value:"Module"})),GP=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,GI=/[\0-\x1F\x7F-\x9F]/,Gz=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,GL=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,Gq=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,G$=Object.freeze(Object.defineProperty({__proto__:null,Any:GP,Cc:GI,Cf:/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,P:Gz,S:GL,Z:Gq},Symbol.toStringTag,{value:"Module"})),GB=new Uint16Array('<\xd5\0\0\0\0\0\0EMabcfglmnoprstu\\bfms\x7f\x84\x8b\x90\x95\x98\xa6\xb3\xb9\xc8\xcflig\xc6P&cute\xc1reve;iyx}rc\xc2;r;\uD835\uDD04rave\xc0pha;acr;d;gp\x9d\xa1on;f;\uD835\uDD38plyFunction;ing\xc5cs\xbe\xc3r;\uD835\uDC9Cign;ilde\xc3ml\xc4aceforsu\xe5\xfb\xfecr\xea\xf2kslash;\xf6\xf8;ed;y;crtause;noullis;a;r;\uD835\uDD05pf;\uD835\uDD39eve;c\xf2mpeq;HOacdefhilorsucy;PY\xa9cpyute;;italDifferentialD;leys;aeioron;dil\xc7rc;nint;ot;dnilla;terDot;\xf2i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;\uD835\uDC9Ep;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;\uD835\uDD07afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;\uD835\uDD3B;DEot;qual;bleCDLRUVontourIntegra\xeco\0\0\xbbnArrow;eoftARTrrow;ightArrow;e\xe5ngLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;\uD835\uDC9Frok;NTacdfglmopqstuxG;H\xd0cute\xc9aiyron;rc\xca;ot;r;\uD835\uDD08rave\xc8ement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;\uD835\uDD3Csilon;uail;Tilde;librium;cir;m;a;ml\xcbipsts;onentialE;cfiosy;r;\uD835\uDD09lled\0\0mallSquare;erySmallSquare;\0\0\0f;\uD835\uDD3DAll;riertrf;c\xf2JTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;\uD835\uDD0A;pf;\uD835\uDD3EeaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;\uD835\uDCA2;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ct\xf2rok;mpownHum\xf0qual;EJOacdfgmnostucy;lig;cy;cute\xcdiyrc\xce;ot;r;rave\xcc;apcgr;inaryI;lie\xf3\0;egrral;section;isibleCTomma;imes;gpton;f;\uD835\uDD40a;cr;ilde;\0cy;l\xcfcfosuiyrc;;r;\uD835\uDD0Dpf;\uD835\uDD41\0r;\uD835\uDCA5rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;\uD835\uDD0Epf;\uD835\uDD42cr;\uD835\uDCA6JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ight\xe1sEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;\uD835\uDD0F;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftaright\xe1ight\xe1f;\uD835\uDD43erLReftArrow;ightArrow;cht\xf2;rok;;acefiosup;y;dliumSpace;lintrf;r;\uD835\uDD10nusPlus;pf;\uD835\uDD44c\xf2;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicn\xeberyThi\xeetedGLreaterGreate\xf2essLes\xf3Line;r;\uD835\uDD11Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;\uD835\uDCA9ilde\xd1;Eacdfgmoprstuvlig;cute\xd3iyrc\xd4;blac;r;\uD835\uDD12rave\xd2aeicr;ga;cron;pf;\uD835\uDD46enCurlyDQoubleQuote;uote;;clr;\uD835\uDCAAash\xd8ide\xd5es;ml\xd6erBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;\uD835\uDD13i;;usMinus;ipncareplan\xe5f;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;\uD835\uDCAB;UfosOT"r;\uD835\uDD14pf;cr;\uD835\uDCACBEacefhiorsuarr;G\xaecnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;r\xbbo;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;\uD835\uDD16ortDLRUownArrow\xbbeftArrow\xbbightArrow\xbbpArrow;gma;allCircle;pf;\uD835\uDD4A\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;\uD835\uDCAEar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th\xe1;;esrset;Equal;et\xbbHRSacfhiorsORN\xdeADE;Hccy;y;bu;;aeyron;dil;;r;\uD835\uDD17ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;\uD835\uDD4BipleDot;ctr;\uD835\uDCAFrok;\0\0\0\0\0\0\0crute\xdar;ocir;r\0y;ve;iyrc\xdb;blac;r;\uD835\uDD18rave\xd9acr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;\uD835\uDD4CADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;own\xe1erLReftArrow;ightArrow;i;lon;ing;cr;\uD835\uDCB0ilde;ml\xdcDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;\uD835\uDD19pf;\uD835\uDD4Dcr;\uD835\uDCB1dash;cefosirc;dge;r;\uD835\uDD1Apf;\uD835\uDD4Ecr;\uD835\uDCB2fiosr;\uD835\uDD1B;pf;\uD835\uDD4Fcr;\uD835\uDCB3AIUacfosucy;cy;cy;cute\xddiyrc;;r;\uD835\uDD1Cpf;\uD835\uDD50cr;\uD835\uDCB4ml;Hacdefoscy;cute;ayron;;ot;\0oWidt\xe8a;r;pf;cr;\uD835\uDCB5\0\0\0\0\0\0\0cute\xe1reve;;Ediuy;;rc\xe2te\xb4;lig\xe6;r\xb2;\uD835\uDD1Erave\xe0epfpsym;\xe8ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;e\xbbsd;a;;;;;;;;t;vb;d;pth;\xbb\xb9arr;gpon;f;\uD835\uDD52;Eaeiop;cir;;d;s;rox;e\xf1ing\xe5ctyr;\uD835\uDCB6;mp;e\xf1ilde\xe3ml\xe4cionin\xf4nt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;ge\xbbrk;tbrk;oy;quo;cmprtaus;eptyv;s\xe9no\xf5ahw;;een;r;\uD835\uDD1Fgcostuvwaiu\xf0rc;p\xbbdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;e\xe5\xe5arow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;\uD835\uDD53;tom\xbbtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbar\xa6ceior;\uD835\uDCB7mi;m;el;bh;sub;l;et\xbbp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;\xeeaeiu\0s;on;dil\xe7rc;ps;sm;ot;dmnil\xb8ptyv;t\xa2;er\xe4r;\uD835\uDD20ceiy;ck;mark\xbb;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd\xbb;st;irc;ash;nint;id;cir;ubs;uit\xbb\0on;e;q\xc7\xc6\0\0a;t;;fl\xeeemxent\xbbe\xf3\0;dot;n\xf4fry;\uD835\uDD54o\xe4\xa9;sr;aorr;ss;cur;\uD835\uDCB8bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0re\xe3u\xe3ee;edge;en\xa4earrowlreft\xbbight\xbbe\xe4cionin\xf4nt;lcty;AHabcdefhijlorstuwzr\xf2ar;glrsger;eth;\xf2h;v\xbbarow;a\xe3ayron;;;aogrr;tseq;glm\xb0ta;ptyv;irsht;;\uD835\uDD21arlr\xbb\xbbaegsvm;osnd;suit;amma;in;;iode\xf7;ontimes;n\xf8cy;c\0\0rn;op;lptuwlar;f;\uD835\uDD55;empsq;dot;inus;lus;quare;blebarwedg\xe5\xfanadhownarrow\xf3arpoonlref\xf4igh\xf4karo\xf7\0\0rn;op;cotry;\uD835\uDCB9;l;rok;drot;i;fahr\xf2a\xf2angle;ciy;grarr;DacdefglmnopqrstuxDoo\xf4csute\xe9ter;aioyron;r;c\xealon;;ot;Drot;;\uD835\uDD22;rsave\xe8;dot;;ilsnters;;;dot;apscr;ty;svet\xbbp1;;;gs;p;gpon;f;\uD835\uDD56alsr;sl;us;i;lvon\xbb;csuviorc\xbb\0\0\xedantgltr\xbbess\xbbaeils;st;v;DD;parsl;Daot;rr;cdir;o\xf4ah;\xf0mrl\xebo;cipl;s\xf4eoctatio\xeenential\xe5\0\0\0\0\0\0\0llingdotse\xf1y;male;ilrlig;\0\0g;ig;;\uD835\uDD23lig;lig;fjaltt;ig;ns;of;\0f;\uD835\uDD57ak;v;artint;aocs\0\0\xbd;\xbc;;;\0;;\0\0\xbe;;5;\0;;8;l;wn;cr;\uD835\uDCBBEabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan\xf4;cdlc;ot;o;l;;es;r;\uD835\uDD24;gmel;cy;;Eaj;;;Eaes;p;prox\xbb;q;qim;pf;\uD835\uDD58cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pro\xf8r;qlqles\xf3i\xedenrtneqq;\xc5Aabcefkosyr\xf2ilmrrs\xf0f\xbbil\xf4drcy;;cwir;;ar;irc;alrrts;uit\xbblip;con;r;\uD835\uDD25sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;\uD835\uDD59bar;cltr;\uD835\uDCBDas\xe8rok;bpull;hen\xbb\0\0\0\0\0\0cute\xed;iyrc\xee;cxy;cl\xa1fr;\uD835\uDD26rave\xec;inoinnt;t;fin;ta;lig;aopcgtr;elpin\xe5ar\xf4h;f;ed;;cfotare;in;tie;do\xf4;celpal;grer\xf3\xe3arhk;rod;cgpty;on;f;\uD835\uDD5Aa;uest\xbfcir;\uD835\uDCBEn;Edsv;ot;;v;;ilde;\0cy;l\xefcfmosuiyrc;;r;\uD835\uDD27ath;pf;\uD835\uDD5B\0r;\uD835\uDCBFrcy;kcy;acfghjosppa;v;eydil;;r;\uD835\uDD28reen;cy;cy;pf;\uD835\uDD5Ccr;\uD835\uDCC0ABEHabcdefghjlmnoprstuvartr\xf2\xf2ail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;ra\xeebda;g;dl;\xe5;uo\xabr;bfhlpst;fs;s;\xebp;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;\xec\xe2;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;ta\xe9arpoonduown\xbbp\xbbeftarrows;ightahsrrow;sarpoon\xf3quigarro\xf7hreetimes;;qslan\xf4;cdgsc;ot;o;r;;es;adegsppro\xf8ot;qgq\xf4gt\xf2\xf4i\xedilrsht;;\uD835\uDD29;E;rdu;l;lk;cy;;achtr\xf2orne\xf2ard;ri;iodot;ust;ache\xbbEaes;p;prox\xbb;q;qim;abnoptwznrg;r;r\xebglmreftaright\xe1apsto;ight\xe1parrowlref\xf4ight;aflr;;\uD835\uDD5Dus;imes;st;\xe1;efnge\xbbar;lt;achmtr\xf2orne\xf2ar;d;;ri;achiqtquo;r;\uD835\uDCC1m;eg;;buo;r;rok;<;cdhilqrci;r;re\xe5mes;arr;uest;Piar;;efrdushar;har;enrtneqq;\xc5DacdefhilnopsuDot;clprr\xafet;;ese\xbb;sto;dluow\xeeef\xf4\xf0ker;oymma;;ash;asuredangle\xbbr;\uD835\uDD2Ao;cdnro\xb5;acds\xf4ir;ot\xb7us;bd;u;p;\xf2\xf0dpels;f;\uD835\uDD5Ectr;\uD835\uDCC2pos\xbb;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptla\xbbute;g;;Eiop;d;s;ro\xf8ur;al;s\0p\xa0mp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;ui\xf6eiar;\xedist;sr;\uD835\uDD2BEest;qs;qslan\xf4i\xed;r\xbbAapr\xf2rr;ar;;sv;d;cy;AEadestr\xf2;rr;r;;fqstarrro\xf7ightarro\xf7;qslan\xf4;s\xbbi\xed;ri;ei\xe4ptf;\uD835\uDD5F\xac;inn;Edv;ot;;;i;v;;aorr;astlle\xecl;;lint;;ceu\xe5;c;e\xf1Aaitr\xf2rr;cw;;ghtarrow\xbbri;echimpqu;ceru\xe5;\uD835\uDCC3ort\0\0ar\xe1m;e;qsubp\xe5\xe5bcp;Ees;et;eq;qc;e\xf1;Ees;et;eq;qgilr\xeclde\xf1\xe7ianglelreft;e\xf1ight;e\xf1;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csute\xf3iyr;c\xf4;abioslac;v;old;lig;crir;;\uD835\uDD2C\0\0\0n;ave\xf2;bmar;acitr\xf2irr;oss;n\xe5;aeicr;ga;cdnron;;pf;\uD835\uDD60aelr;rp;;adiosvr\xf2;efmr;of\xbb\xaa\xbagof;r;lope;;clo\xf2ash\xf8l;ide\xf5es;as;ml\xf6bar;\0\0\0\0\0\0\0\0\0r;ast\xb6;lle\xec\0\0m;;y;rcimptnt;od;il;enk;r;\uD835\uDD2Dimo;v;ma\xf4ne;;tvchfork\xbb;aunckk;h;\xf6s;abcdemstcir;ir;ou;;n\xb1im;wo;ipuntint;f;\uD835\uDD61nd\xa3;Eaceinosu;p;u\xe5;c;acensppro\xf8urlye\xf1\xf1aespprox;qq;im;i\xedme;sEas\xf0dfpalslar;ine;urf;;t\xefrel;cir;\uD835\uDCC5;ncsp;fiopsur;\uD835\uDD2Epf;\uD835\uDD62rime;cr;\uD835\uDCC6aeoteirnion\xf3nt;st;e\xf1\xf4ABHabcdefhilmnoprstuxartr\xf2\xf2ail;ar\xf2ar;cdenqrteu;te;i\xe3mptyv;g;del;;\xe5uo\xbbr;abcfhlpstwp;;fs;;s;\xeb\xf0l;im;l;;aiil;o;nal\xf3abrr\xf2rk;akcek;;es;ldu;;aeuyron;diil;\xec\xe2;clqsa;dhar;uo;rh;acgl;ipsn\xe5ar\xf4t;ilrsht;;\uD835\uDD2Faordu\xbb;l;;v;gnshtahlrstrrow;ta\xe9arpoonduow\xeep\xbbeftahrrow\xf3arpoon\xf3ightarrows;quigarro\xf7hreetimes;g;ingdotse\xf1ahmr\xf2a\xf2;oust;ache\xbbmid;abptnrg;r;r\xebaflr;;\uD835\uDD63us;imes;apr;gt;olint;ar\xf2achqquo;r;\uD835\uDCC7buo;rhirre\xe5mes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu\xef;Eaceinpsy;\0;on;u\xe5;dil;rc;Eas;p;im;olint;i\xed;ot;be;Aacmstxrr;rhr\xeb;ot\xa7i;war;min\xf0nu\xf3\xf1t;r;o\uD835\uDD30acoyrp;hycy;;rt\0\0i\xe4ara\xec\xadgmma;fv;;deglnprot;;q;E;;E;e;lus;arr;ar\xf2aeitlslsetm\xe9hp;parsl;dle;;e;s;flptcy;;b;ar;f;\uD835\uDD64adres;uit\xbbcsuaup;s;p;s;ubp;eset;e\xf1;eset;e\xf1;afr\xbbar\xf2cemtr;\uD835\uDCC8tm\xee\xf1i\xecar\xe6arr;fanighteppsilo\xeeh\xe9s\xbbbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acensppro\xf8urlye\xf1\xf1aesppro\xf8q\xf1g;123;Edehlmnps\xb9\xb2\xb3;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr\xeb;owar;lig\xdf\0\0\0\0\0\0\0\0\0\0\0\0get;;r\xebaeyron;dil;;lrec;r;\uD835\uDD31eiko\0e4fa;svym;cnkasppro\xf8im\xbbs\xf0as\xf0rn\xfees\xd7;bd;ar;;eps\xe1;bcfot;ir;;o\uD835\uDD65rk;\xe1rime;aipd\xe5adempstngle;dlqrown\xbbeft;e\xf1;ight;e\xf1ot;inus;lus;b;ime;ezium;chtry;\uD835\uDCC9;cy;rok;iox\xf4headlreftarro\xf7ightarrow\xbbAHabcdfghlmoprstuwr\xf2ar;crute\xfa\xf2r\0y;ve;iyrc\xfb;abhr\xf2lac;a\xf2irsht;;\uD835\uDD32rave\xf9rlr\xbb\xbblk;ct\0\0rn;er\xbbop;ri;alcr;\xa8gpon;f;\uD835\uDD66adhlsuown\xe1arpoonlref\xf4igh\xf4i;hl\xbbon\xbbparrows;cit\0\0rn;er\xbbop;ng;ri;cr;\uD835\uDCCAdirot;lde;i;f\xbbamr\xf2l\xfcangle;ABDacdeflnoprszr\xf2ar;v;as\xe8nrgrt;eknprstapp\xe1othin\xe7hirop\xf4;h\xefiugm\xe1bpsetneq;q;setneq;q;hret\xe1ianglelreft\xbbight\xbby;ash\xbbelr;bear;q;lip;bta\xf2r;\uD835\uDD33tr\xe9subp\xbb\xbbpf;\uD835\uDD67ro\xf0tr\xe9cur;\uD835\uDCCBbpnEe\xbbnEe\xbbigzag;cefoprsirc;dibgar;e;q;erp;r;\uD835\uDD34pf;\uD835\uDD68;eat\xe8cr;\uD835\uDCCC\0\0\0\0\0\0\0tr\xe9r;\uD835\uDD35Aar\xf2r\xf2;Aar\xf2r\xf2a\xf0is;dptfl;\uD835\uDD69im\xe5Aar\xf2r\xf2cqr;\uD835\uDCCDptr\xe9acefiosucuyte\xfd;iyrc;;n\xa5r;\uD835\uDD36cy;pf;\uD835\uDD6Acr;\uD835\uDCCEcmy;l\xffacdefhioswcute;ayron;;ot;ettr\xe6a;r;\uD835\uDD37cy;grarr;pf;\uD835\uDD6Bcr;\uD835\uDCCFjn;j;'.split("").map(e=>e.charCodeAt(0))),GF=new Uint16Array("aglq	\x15\x18\x1b\x0f\0\0\x12p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0))),GQ=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),GV=null!==(w=String.fromCodePoint)&&void 0!==w?w:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)};function GH(e){return e>=k.ZERO&&e<=k.NINE}!function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"}(k||(k={})),!function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"}(O||(O={})),!function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"}(S||(S={})),function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"}(C||(C={}));class GW{constructor(e,t,r){this.decodeTree=e,this.emitCodePoint=t,this.errors=r,this.state=S.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=C.Strict}startEntity(e){this.decodeMode=e,this.state=S.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case S.EntityStart:return e.charCodeAt(t)===k.NUM?(this.state=S.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=S.NamedEntity,this.stateNamedEntity(e,t));case S.NumericStart:return this.stateNumericStart(e,t);case S.NumericDecimal:return this.stateNumericDecimal(e,t);case S.NumericHex:return this.stateNumericHex(e,t);case S.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===k.LOWER_X?(this.state=S.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=S.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,r,n){if(t!==r){let i=r-t;this.result=this.result*Math.pow(n,i)+parseInt(e.substr(t,i),n),this.consumed+=i}}stateNumericHex(e,t){let r=t;for(;t<e.length;){var n;let i=e.charCodeAt(t);if(!GH(i)&&(!((n=i)>=k.UPPER_A)||!(n<=k.UPPER_F))&&(!(n>=k.LOWER_A)||!(n<=k.LOWER_F)))return this.addToNumericResult(e,r,t,16),this.emitNumericEntity(i,3);t+=1}return this.addToNumericResult(e,r,t,16),-1}stateNumericDecimal(e,t){let r=t;for(;t<e.length;){let n=e.charCodeAt(t);if(!GH(n))return this.addToNumericResult(e,r,t,10),this.emitNumericEntity(n,2);t+=1}return this.addToNumericResult(e,r,t,10),-1}emitNumericEntity(e,t){var r,n,i;if(this.consumed<=t)return null===(r=this.errors)||void 0===r||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===k.SEMI)this.consumed+=1;else if(this.decodeMode===C.Strict)return 0;return this.emitCodePoint((n=this.result)>=55296&&n<=57343||n>1114111?65533:null!==(i=GQ.get(n))&&void 0!==i?i:n,this.consumed),this.errors&&(e!==k.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){let{decodeTree:r}=this,n=r[this.treeIndex],i=(n&O.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){let s=e.charCodeAt(t);if(this.treeIndex=function(e,t,r,n){let i=(t&O.BRANCH_LENGTH)>>7,s=t&O.JUMP_TABLE;if(0===i)return 0!==s&&n===s?r:-1;if(s){let t=n-s;return t<0||t>=i?-1:e[r+t]-1}let o=r,a=o+i-1;for(;o<=a;){let t=o+a>>>1,r=e[t];if(r<n)o=t+1;else{if(!(r>n))return e[t+i];a=t-1}}return -1}(r,n,this.treeIndex+Math.max(1,i),s),this.treeIndex<0)return 0===this.result||this.decodeMode===C.Attribute&&(0===i||function(e){var t;return e===k.EQUALS||(t=e)>=k.UPPER_A&&t<=k.UPPER_Z||t>=k.LOWER_A&&t<=k.LOWER_Z||GH(t)}(s))?0:this.emitNotTerminatedNamedEntity();if(0!=(i=((n=r[this.treeIndex])&O.VALUE_LENGTH)>>14)){if(s===k.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==C.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return -1}emitNotTerminatedNamedEntity(){var e;let{result:t,decodeTree:r}=this,n=(r[t]&O.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,n,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,r){let{decodeTree:n}=this;return this.emitCodePoint(1===t?n[e]&~O.VALUE_LENGTH:n[e+1],r),3===t&&this.emitCodePoint(n[e+2],r),r}end(){var e;switch(this.state){case S.NamedEntity:return 0!==this.result&&(this.decodeMode!==C.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case S.NumericDecimal:return this.emitNumericEntity(0,2);case S.NumericHex:return this.emitNumericEntity(0,3);case S.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case S.EntityStart:return 0}}}function GU(e){let t="",r=new GW(e,e=>t+=GV(e));return function(e,n){let i=0,s=0;for(;(s=e.indexOf("&",s))>=0;){t+=e.slice(i,s),r.startEntity(n);let o=r.write(e,s+1);if(o<0){i=s+r.end();break}i=s+o,s=0===o?i+1:i}let o=t+e.slice(i);return t="",o}}let GG=GU(GB);function GX(e,t=C.Legacy){return GG(e,t)}function GY(e){return"[object String]"===Object.prototype.toString.call(e)}GU(GF);let GZ=Object.prototype.hasOwnProperty;function GJ(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(t){if("object"!=typeof t)throw TypeError(t+"must be object");Object.keys(t).forEach(function(r){e[r]=t[r]})}}),e}function GK(e,t,r){return[].concat(e.slice(0,t),r,e.slice(t+1))}function G0(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(65535&e)==65535||(65535&e)==65534||e>=0&&e<=8||11===e||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function G1(e){return e>65535?String.fromCharCode(55296+((e-=65536)>>10),56320+(1023&e)):String.fromCharCode(e)}let G2=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,G4=RegExp(G2.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),G5=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function G3(e){return 0>e.indexOf("\\")&&0>e.indexOf("&")?e:e.replace(G4,function(e,t,r){return t||function(e,t){if(35===t.charCodeAt(0)&&G5.test(t)){let r="x"===t[1].toLowerCase()?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return G0(r)?G1(r):e}let r=GX(e);return r!==e?r:e}(e,r)})}let G6=/[&<>"]/,G7=/[&<>"]/g,G8={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function G9(e){return G8[e]}function Xe(e){return G6.test(e)?e.replace(G7,G9):e}let Xt=/[.?*+^$[\]\\(){}|-]/g;function Xr(e){switch(e){case 9:case 32:return!0}return!1}function Xn(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Xi(e){return Gz.test(e)||GL.test(e)}function Xs(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Xo(e){return(e=e.trim().replace(/\s+/g," ")).toLowerCase().toUpperCase()}let Xa=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:GK,assign:GJ,escapeHtml:Xe,escapeRE:function(e){return e.replace(Xt,"\\$&")},fromCodePoint:G1,has:function(e,t){return GZ.call(e,t)},isMdAsciiPunct:Xs,isPunctChar:Xi,isSpace:Xr,isString:GY,isValidEntityCode:G0,isWhiteSpace:Xn,lib:{mdurl:GR,ucmicro:G$},normalizeReference:Xo,unescapeAll:G3,unescapeMd:function(e){return 0>e.indexOf("\\")?e:e.replace(G2,"$1")}},Symbol.toStringTag,{value:"Module"})),Xl=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:function(e,t,r){let n,i=t,s={ok:!1,pos:0,str:""};if(60===e.charCodeAt(i)){for(i++;i<r&&10!==(n=e.charCodeAt(i))&&60!==n;){if(62===n)return s.pos=i+1,s.str=G3(e.slice(t+1,i)),s.ok=!0,s;if(92===n&&i+1<r){i+=2;continue}i++}return s}let o=0;for(;i<r&&!(32===(n=e.charCodeAt(i))||n<32||127===n);){if(92===n&&i+1<r){if(32===e.charCodeAt(i+1))break;i+=2;continue}if(40===n&&++o>32)return s;if(41===n){if(0===o)break;o--}i++}return t===i||0!==o||(s.str=G3(e.slice(t,i)),s.pos=i,s.ok=!0),s},parseLinkLabel:function(e,t,r){let n,i,s,o;let a=e.posMax,l=e.pos;for(e.pos=t+1,n=1;e.pos<a;){if(93===(s=e.src.charCodeAt(e.pos))&&0==--n){i=!0;break}if(o=e.pos,e.md.inline.skipToken(e),91===s){if(o===e.pos-1)n++;else if(r)return e.pos=l,-1}}let c=-1;return i&&(c=e.pos),e.pos=l,c},parseLinkTitle:function(e,t,r,n){let i,s=t,o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(n)o.str=n.str,o.marker=n.marker;else{if(s>=r)return o;let n=e.charCodeAt(s);if(34!==n&&39!==n&&40!==n)return o;t++,s++,40===n&&(n=41),o.marker=n}for(;s<r;){if((i=e.charCodeAt(s))===o.marker)return o.pos=s+1,o.str+=G3(e.slice(t,s)),o.ok=!0,o;if(40===i&&41===o.marker)return o;92===i&&s+1<r&&s++,s++}return o.can_continue=!0,o.str+=G3(e.slice(t,s)),o}},Symbol.toStringTag,{value:"Module"})),Xc={};function Xh(){this.rules=GJ({},Xc)}function Xu(){this.__rules__=[],this.__cache__=null}function Xd(e,t,r){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=r,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}function Xf(e,t,r){this.src=e,this.env=r,this.tokens=[],this.inlineMode=!1,this.md=t}Xc.code_inline=function(e,t,r,n,i){let s=e[t];return"<code"+i.renderAttrs(s)+">"+Xe(s.content)+"</code>"},Xc.code_block=function(e,t,r,n,i){let s=e[t];return"<pre"+i.renderAttrs(s)+"><code>"+Xe(e[t].content)+`</code></pre>
`},Xc.fence=function(e,t,r,n,i){let s;let o=e[t],a=o.info?G3(o.info).trim():"",l="",c="";if(a){let e=a.split(/(\s+)/g);l=e[0],c=e.slice(2).join("")}if(0===(s=r.highlight&&r.highlight(o.content,l,c)||Xe(o.content)).indexOf("<pre"))return s+`
`;if(a){let e=o.attrIndex("class"),t=o.attrs?o.attrs.slice():[];return e<0?t.push(["class",r.langPrefix+l]):(t[e]=t[e].slice(),t[e][1]+=" "+r.langPrefix+l),`<pre><code${i.renderAttrs({attrs:t})}>${s}</code></pre>
`}return`<pre><code${i.renderAttrs(o)}>${s}</code></pre>
`},Xc.image=function(e,t,r,n,i){let s=e[t];return s.attrs[s.attrIndex("alt")][1]=i.renderInlineAsText(s.children,r,n),i.renderToken(e,t,r)},Xc.hardbreak=function(e,t,r){return r.xhtmlOut?`<br />
`:`<br>
`},Xc.softbreak=function(e,t,r){return r.breaks?r.xhtmlOut?`<br />
`:`<br>
`:`
`},Xc.text=function(e,t){return Xe(e[t].content)},Xc.html_block=function(e,t){return e[t].content},Xc.html_inline=function(e,t){return e[t].content},Xh.prototype.renderAttrs=function(e){let t,r,n;if(!e.attrs)return"";for(n="",t=0,r=e.attrs.length;t<r;t++)n+=" "+Xe(e.attrs[t][0])+'="'+Xe(e.attrs[t][1])+'"';return n},Xh.prototype.renderToken=function(e,t,r){let n=e[t],i="";if(n.hidden)return"";n.block&&-1!==n.nesting&&t&&e[t-1].hidden&&(i+=`
`),i+=(-1===n.nesting?"</":"<")+n.tag,i+=this.renderAttrs(n),0===n.nesting&&r.xhtmlOut&&(i+=" /");let s=!1;if(n.block&&(s=!0,1===n.nesting&&t+1<e.length)){let r=e[t+1];("inline"===r.type||r.hidden||-1===r.nesting&&r.tag===n.tag)&&(s=!1)}return i+(s?`>
`:">")},Xh.prototype.renderInline=function(e,t,r){let n="",i=this.rules;for(let s=0,o=e.length;s<o;s++){let o=e[s].type;"u">typeof i[o]?n+=i[o](e,s,t,r,this):n+=this.renderToken(e,s,t)}return n},Xh.prototype.renderInlineAsText=function(e,t,r){let n="";for(let i=0,s=e.length;i<s;i++)switch(e[i].type){case"text":case"html_inline":case"html_block":n+=e[i].content;break;case"image":n+=this.renderInlineAsText(e[i].children,t,r);break;case"softbreak":case"hardbreak":n+=`
`}return n},Xh.prototype.render=function(e,t,r){let n="",i=this.rules;for(let s=0,o=e.length;s<o;s++){let o=e[s].type;"inline"===o?n+=this.renderInline(e[s].children,t,r):"u">typeof i[o]?n+=i[o](e,s,t,r,this):n+=this.renderToken(e,s,t,r)}return n},Xu.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return -1},Xu.prototype.__compile__=function(){let e=this,t=[""];e.__rules__.forEach(function(e){e.enabled&&e.alt.forEach(function(e){0>t.indexOf(e)&&t.push(e)})}),e.__cache__={},t.forEach(function(t){e.__cache__[t]=[],e.__rules__.forEach(function(r){r.enabled&&(t&&0>r.alt.indexOf(t)||e.__cache__[t].push(r.fn))})})},Xu.prototype.at=function(e,t,r){let n=this.__find__(e);if(-1===n)throw Error("Parser rule not found: "+e);this.__rules__[n].fn=t,this.__rules__[n].alt=(r||{}).alt||[],this.__cache__=null},Xu.prototype.before=function(e,t,r,n){let i=this.__find__(e);if(-1===i)throw Error("Parser rule not found: "+e);this.__rules__.splice(i,0,{name:t,enabled:!0,fn:r,alt:(n||{}).alt||[]}),this.__cache__=null},Xu.prototype.after=function(e,t,r,n){let i=this.__find__(e);if(-1===i)throw Error("Parser rule not found: "+e);this.__rules__.splice(i+1,0,{name:t,enabled:!0,fn:r,alt:(n||{}).alt||[]}),this.__cache__=null},Xu.prototype.push=function(e,t,r){this.__rules__.push({name:e,enabled:!0,fn:t,alt:(r||{}).alt||[]}),this.__cache__=null},Xu.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);let r=[];return e.forEach(function(e){let n=this.__find__(e);if(n<0){if(t)return;throw Error("Rules manager: invalid rule name "+e)}this.__rules__[n].enabled=!0,r.push(e)},this),this.__cache__=null,r},Xu.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(e){e.enabled=!1}),this.enable(e,t)},Xu.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);let r=[];return e.forEach(function(e){let n=this.__find__(e);if(n<0){if(t)return;throw Error("Rules manager: invalid rule name "+e)}this.__rules__[n].enabled=!1,r.push(e)},this),this.__cache__=null,r},Xu.prototype.getRules=function(e){return null===this.__cache__&&this.__compile__(),this.__cache__[e]||[]},Xd.prototype.attrIndex=function(e){if(!this.attrs)return -1;let t=this.attrs;for(let r=0,n=t.length;r<n;r++)if(t[r][0]===e)return r;return -1},Xd.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]},Xd.prototype.attrSet=function(e,t){let r=this.attrIndex(e),n=[e,t];r<0?this.attrPush(n):this.attrs[r]=n},Xd.prototype.attrGet=function(e){let t=this.attrIndex(e),r=null;return t>=0&&(r=this.attrs[t][1]),r},Xd.prototype.attrJoin=function(e,t){let r=this.attrIndex(e);r<0?this.attrPush([e,t]):this.attrs[r][1]=this.attrs[r][1]+" "+t},Xf.prototype.Token=Xd;let Xp=/\r\n?|\n/g,Xm=/\0/g,Xg=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Xy=/\((c|tm|r)\)/i,Xb=/\((c|tm|r)\)/ig,Xv={c:"\xa9",r:"\xae",tm:""};function Xx(e,t){return Xv[t.toLowerCase()]}let Xw=/['"]/,Xk=/['"]/g;function XO(e,t,r){return e.slice(0,t)+r+e.slice(t+1)}let XS=[["normalize",function(e){let t;t=(t=e.src.replace(Xp,`
`)).replace(Xm,""),e.src=t}],["block",function(e){let t;e.inlineMode?((t=new e.Token("inline","",0)).content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}],["inline",function(e){let t=e.tokens;for(let r=0,n=t.length;r<n;r++){let n=t[r];"inline"===n.type&&e.md.inline.parse(n.content,e.md,e.env,n.children)}}],["linkify",function(e){let t=e.tokens;if(e.md.options.linkify)for(let i=0,s=t.length;i<s;i++){if("inline"!==t[i].type||!e.md.linkify.pretest(t[i].content))continue;let s=t[i].children,o=0;for(let a=s.length-1;a>=0;a--){var r,n;let l=s[a];if("link_close"===l.type){for(a--;s[a].level!==l.level&&"link_open"!==s[a].type;)a--;continue}if("html_inline"===l.type&&(r=l.content,/^<a[>\s]/i.test(r)&&o>0&&o--,n=l.content,/^<\/a\s*>/i.test(n)&&o++),!(o>0)&&"text"===l.type&&e.md.linkify.test(l.content)){let r=l.content,n=e.md.linkify.match(r),o=[],c=l.level,h=0;n.length>0&&0===n[0].index&&a>0&&"text_special"===s[a-1].type&&(n=n.slice(1));for(let t=0;t<n.length;t++){let i=n[t].url,s=e.md.normalizeLink(i);if(!e.md.validateLink(s))continue;let a=n[t].text;a=n[t].schema?"mailto:"!==n[t].schema||/^mailto:/i.test(a)?e.md.normalizeLinkText(a):e.md.normalizeLinkText("mailto:"+a).replace(/^mailto:/,""):e.md.normalizeLinkText("http://"+a).replace(/^http:\/\//,"");let l=n[t].index;if(l>h){let t=new e.Token("text","",0);t.content=r.slice(h,l),t.level=c,o.push(t)}let u=new e.Token("link_open","a",1);u.attrs=[["href",s]],u.level=c++,u.markup="linkify",u.info="auto",o.push(u);let d=new e.Token("text","",0);d.content=a,d.level=c,o.push(d);let f=new e.Token("link_close","a",-1);f.level=--c,f.markup="linkify",f.info="auto",o.push(f),h=n[t].lastIndex}if(h<r.length){let t=new e.Token("text","",0);t.content=r.slice(h),t.level=c,o.push(t)}t[i].children=s=GK(s,a,o)}}}}],["replacements",function(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&(Xy.test(e.tokens[t].content)&&function(e){let t=0;for(let r=e.length-1;r>=0;r--){let n=e[r];"text"!==n.type||t||(n.content=n.content.replace(Xb,Xx)),"link_open"===n.type&&"auto"===n.info&&t--,"link_close"===n.type&&"auto"===n.info&&t++}}(e.tokens[t].children),Xg.test(e.tokens[t].content)&&function(e){let t=0;for(let r=e.length-1;r>=0;r--){let n=e[r];"text"===n.type&&!t&&Xg.test(n.content)&&(n.content=n.content.replace(/\+-/g,"\xb1").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),"link_open"===n.type&&"auto"===n.info&&t--,"link_close"===n.type&&"auto"===n.info&&t++}}(e.tokens[t].children))}],["smartquotes",function(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&Xw.test(e.tokens[t].content)&&function(e,t){let r;let n=[];for(let i=0;i<e.length;i++){let s=e[i],o=e[i].level;for(r=n.length-1;r>=0&&!(n[r].level<=o);r--);if(n.length=r+1,"text"!==s.type)continue;let a=s.content,l=0,c=a.length;e:for(;l<c;){Xk.lastIndex=l;let h=Xk.exec(a);if(!h)break;let u=!0,d=!0;l=h.index+1;let f="'"===h[0],p=32;if(h.index-1>=0)p=a.charCodeAt(h.index-1);else for(r=i-1;r>=0&&"softbreak"!==e[r].type&&"hardbreak"!==e[r].type;r--)if(e[r].content){p=e[r].content.charCodeAt(e[r].content.length-1);break}let m=32;if(l<c)m=a.charCodeAt(l);else for(r=i+1;r<e.length&&"softbreak"!==e[r].type&&"hardbreak"!==e[r].type;r++)if(e[r].content){m=e[r].content.charCodeAt(0);break}let g=Xs(p)||Xi(String.fromCharCode(p)),y=Xs(m)||Xi(String.fromCharCode(m)),b=Xn(p),v=Xn(m);if(v?u=!1:y&&(b||g||(u=!1)),b?d=!1:g&&(v||y||(d=!1)),34===m&&'"'===h[0]&&p>=48&&p<=57&&(d=u=!1),u&&d&&(u=g,d=y),!u&&!d){f&&(s.content=XO(s.content,h.index,""));continue}if(d)for(r=n.length-1;r>=0;r--){let u=n[r];if(n[r].level<o)break;if(u.single===f&&n[r].level===o){let o,d;u=n[r],f?(o=t.md.options.quotes[2],d=t.md.options.quotes[3]):(o=t.md.options.quotes[0],d=t.md.options.quotes[1]),s.content=XO(s.content,h.index,d),e[u.token].content=XO(e[u.token].content,u.pos,o),l+=d.length-1,u.token===i&&(l+=o.length-1),c=(a=s.content).length,n.length=r;continue e}}u?n.push({token:i,pos:h.index,single:f,level:o}):d&&f&&(s.content=XO(s.content,h.index,""))}}}(e.tokens[t].children,e)}],["text_join",function(e){let t,r;let n=e.tokens,i=n.length;for(let e=0;e<i;e++){if("inline"!==n[e].type)continue;let i=n[e].children,s=i.length;for(t=0;t<s;t++)"text_special"===i[t].type&&(i[t].type="text");for(t=r=0;t<s;t++)"text"===i[t].type&&t+1<s&&"text"===i[t+1].type?i[t+1].content=i[t].content+i[t+1].content:(t!==r&&(i[r]=i[t]),r++);t!==r&&(i.length=r)}}]];function XC(){this.ruler=new Xu;for(let e=0;e<XS.length;e++)this.ruler.push(XS[e][0],XS[e][1])}function XT(e,t,r,n){this.src=e,this.md=t,this.env=r,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;let i=this.src;for(let e=0,t=0,r=0,n=0,s=i.length,o=!1;t<s;t++){let a=i.charCodeAt(t);if(!o){if(Xr(a)){r++,9===a?n+=4-n%4:n++;continue}o=!0}(10===a||t===s-1)&&(10!==a&&t++,this.bMarks.push(e),this.eMarks.push(t),this.tShift.push(r),this.sCount.push(n),this.bsCount.push(0),o=!1,r=0,n=0,e=t+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}function XA(e,t){let r=e.bMarks[t]+e.tShift[t],n=e.eMarks[t];return e.src.slice(r,n)}function XM(e){let t=[],r=e.length,n=0,i=e.charCodeAt(n),s=!1,o=0,a="";for(;n<r;)124===i&&(s?(a+=e.substring(o,n-1),o=n):(t.push(a+e.substring(o,n)),a="",o=n+1)),s=92===i,n++,i=e.charCodeAt(n);return t.push(a+e.substring(o)),t}function XE(e,t){let r=e.eMarks[t],n=e.bMarks[t]+e.tShift[t],i=e.src.charCodeAt(n++);return 42!==i&&45!==i&&43!==i||n<r&&!Xr(e.src.charCodeAt(n))?-1:n}function XN(e,t){let r=e.bMarks[t]+e.tShift[t],n=e.eMarks[t],i=r;if(i+1>=n)return -1;let s=e.src.charCodeAt(i++);if(s<48||s>57)return -1;for(;;){if(i>=n)return -1;if((s=e.src.charCodeAt(i++))>=48&&s<=57){if(i-r>=10)return -1;continue}if(41===s||46===s)break;return -1}return i<n&&!Xr(s=e.src.charCodeAt(i))?-1:i}XC.prototype.process=function(e){let t=this.ruler.getRules("");for(let r=0,n=t.length;r<n;r++)t[r](e)},XC.prototype.State=Xf,XT.prototype.push=function(e,t,r){let n=new Xd(e,t,r);return n.block=!0,r<0&&this.level--,n.level=this.level,r>0&&this.level++,this.tokens.push(n),n},XT.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]},XT.prototype.skipEmptyLines=function(e){for(let t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e},XT.prototype.skipSpaces=function(e){for(let t=this.src.length;e<t&&Xr(this.src.charCodeAt(e));e++);return e},XT.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!Xr(this.src.charCodeAt(--e)))return e+1;return e},XT.prototype.skipChars=function(e,t){for(let r=this.src.length;e<r&&this.src.charCodeAt(e)===t;e++);return e},XT.prototype.skipCharsBack=function(e,t,r){if(e<=r)return e;for(;e>r;)if(t!==this.src.charCodeAt(--e))return e+1;return e},XT.prototype.getLines=function(e,t,r,n){if(e>=t)return"";let i=Array(t-e);for(let s=0,o=e;o<t;o++,s++){let e=0,a=this.bMarks[o],l=a,c;for(c=o+1<t||n?this.eMarks[o]+1:this.eMarks[o];l<c&&e<r;){let t=this.src.charCodeAt(l);if(Xr(t))9===t?e+=4-(e+this.bsCount[o])%4:e++;else if(l-a<this.tShift[o])e++;else break;l++}e>r?i[s]=Array(e-r+1).join(" ")+this.src.slice(l,c):i[s]=this.src.slice(l,c)}return i.join("")},XT.prototype.Token=Xd;let X_="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",Xj="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",XD=RegExp("^(?:"+X_+"|"+Xj+"|\x3c!---?>|\x3c!--(?:[^-]|-[^-]|--[^>])*--\x3e|<[?][\\s\\S]*?[?]>|<![A-Za-z][^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),XR=RegExp("^(?:"+X_+"|"+Xj+")"),XP=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[RegExp("^</?(address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?=(\\s|/?>|$))","i"),/^$/,!0],[RegExp(XR.source+"\\s*$"),/^$/,!1]],XI=[["table",function(e,t,r,n){if(t+2>r)return!1;let i=t+1;if(e.sCount[i]<e.blkIndent||e.sCount[i]-e.blkIndent>=4)return!1;let s=e.bMarks[i]+e.tShift[i];if(s>=e.eMarks[i])return!1;let o=e.src.charCodeAt(s++);if(124!==o&&45!==o&&58!==o||s>=e.eMarks[i])return!1;let a=e.src.charCodeAt(s++);if(124!==a&&45!==a&&58!==a&&!Xr(a)||45===o&&Xr(a))return!1;for(;s<e.eMarks[i];){let t=e.src.charCodeAt(s);if(124!==t&&45!==t&&58!==t&&!Xr(t))return!1;s++}let l=XA(e,t+1),c=l.split("|"),h=[];for(let e=0;e<c.length;e++){let t=c[e].trim();if(!t){if(0===e||e===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(t))return!1;58===t.charCodeAt(t.length-1)?h.push(58===t.charCodeAt(0)?"center":"right"):58===t.charCodeAt(0)?h.push("left"):h.push("")}if(-1===(l=XA(e,t).trim()).indexOf("|")||e.sCount[t]-e.blkIndent>=4)return!1;(c=XM(l)).length&&""===c[0]&&c.shift(),c.length&&""===c[c.length-1]&&c.pop();let u=c.length;if(0===u||u!==h.length)return!1;if(n)return!0;let d=e.parentType;e.parentType="table";let f=e.md.block.ruler.getRules("blockquote"),p=e.push("table_open","table",1),m=[t,0];p.map=m,e.push("thead_open","thead",1).map=[t,t+1],e.push("tr_open","tr",1).map=[t,t+1];for(let t=0;t<c.length;t++){let r=e.push("th_open","th",1);h[t]&&(r.attrs=[["style","text-align:"+h[t]]]);let n=e.push("inline","",0);n.content=c[t].trim(),n.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let g,y=0;for(i=t+2;i<r&&!(e.sCount[i]<e.blkIndent);i++){let n=!1;for(let t=0,s=f.length;t<s;t++)if(f[t](e,i,r,!0)){n=!0;break}if(n||!(l=XA(e,i).trim())||e.sCount[i]-e.blkIndent>=4||((c=XM(l)).length&&""===c[0]&&c.shift(),c.length&&""===c[c.length-1]&&c.pop(),(y+=u-c.length)>65536))break;i===t+2&&(e.push("tbody_open","tbody",1).map=g=[t+2,0]),e.push("tr_open","tr",1).map=[i,i+1];for(let t=0;t<u;t++){let r=e.push("td_open","td",1);h[t]&&(r.attrs=[["style","text-align:"+h[t]]]);let n=e.push("inline","",0);n.content=c[t]?c[t].trim():"",n.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return g&&(e.push("tbody_close","tbody",-1),g[1]=i),e.push("table_close","table",-1),m[1]=i,e.parentType=d,e.line=i,!0},["paragraph","reference"]],["code",function(e,t,r){if(e.sCount[t]-e.blkIndent<4)return!1;let n=t+1,i=n;for(;n<r;){if(e.isEmpty(n)){n++;continue}if(e.sCount[n]-e.blkIndent>=4){i=++n;continue}break}e.line=i;let s=e.push("code_block","code",0);return s.content=e.getLines(t,i,4+e.blkIndent,!1)+`
`,s.map=[t,e.line],!0}],["fence",function(e,t,r,n){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||i+3>s)return!1;let o=e.src.charCodeAt(i);if(126!==o&&96!==o)return!1;let a=i,l=(i=e.skipChars(i,o))-a;if(l<3)return!1;let c=e.src.slice(a,i),h=e.src.slice(i,s);if(96===o&&h.indexOf(String.fromCharCode(o))>=0)return!1;if(n)return!0;let u=t,d=!1;for(;!(++u>=r||(i=a=e.bMarks[u]+e.tShift[u])<(s=e.eMarks[u])&&e.sCount[u]<e.blkIndent);)if(e.src.charCodeAt(i)===o&&!(e.sCount[u]-e.blkIndent>=4)&&!((i=e.skipChars(i,o))-a<l)&&!((i=e.skipSpaces(i))<s)){d=!0;break}l=e.sCount[t],e.line=u+ +!!d;let f=e.push("fence","code",0);return f.info=h,f.content=e.getLines(t+1,u,l,!0),f.markup=c,f.map=[t,e.line],!0},["paragraph","reference","blockquote","list"]],["blockquote",function(e,t,r,n){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t],o=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||62!==e.src.charCodeAt(i))return!1;if(n)return!0;let a=[],l=[],c=[],h=[],u=e.md.block.ruler.getRules("blockquote"),d=e.parentType;e.parentType="blockquote";let f=!1,p;for(p=t;p<r;p++){let t=e.sCount[p]<e.blkIndent;if((i=e.bMarks[p]+e.tShift[p])>=(s=e.eMarks[p]))break;if(62===e.src.charCodeAt(i++)&&!t){let t=e.sCount[p]+1,r,n;32===e.src.charCodeAt(i)?(i++,t++,n=!1,r=!0):9===e.src.charCodeAt(i)?(r=!0,(e.bsCount[p]+t)%4==3?(i++,t++,n=!1):n=!0):r=!1;let o=t;for(a.push(e.bMarks[p]),e.bMarks[p]=i;i<s;){let t=e.src.charCodeAt(i);if(Xr(t))9===t?o+=4-(o+e.bsCount[p]+ +!!n)%4:o++;else break;i++}f=i>=s,l.push(e.bsCount[p]),e.bsCount[p]=e.sCount[p]+1+ +!!r,c.push(e.sCount[p]),e.sCount[p]=o-t,h.push(e.tShift[p]),e.tShift[p]=i-e.bMarks[p];continue}if(f)break;let n=!1;for(let t=0,i=u.length;t<i;t++)if(u[t](e,p,r,!0)){n=!0;break}if(n){e.lineMax=p,0!==e.blkIndent&&(a.push(e.bMarks[p]),l.push(e.bsCount[p]),h.push(e.tShift[p]),c.push(e.sCount[p]),e.sCount[p]-=e.blkIndent);break}a.push(e.bMarks[p]),l.push(e.bsCount[p]),h.push(e.tShift[p]),c.push(e.sCount[p]),e.sCount[p]=-1}let m=e.blkIndent;e.blkIndent=0;let g=e.push("blockquote_open","blockquote",1);g.markup=">";let y=[t,0];g.map=y,e.md.block.tokenize(e,t,p),e.push("blockquote_close","blockquote",-1).markup=">",e.lineMax=o,e.parentType=d,y[1]=e.line;for(let r=0;r<h.length;r++)e.bMarks[r+t]=a[r],e.tShift[r+t]=h[r],e.sCount[r+t]=c[r],e.bsCount[r+t]=l[r];return e.blkIndent=m,!0},["paragraph","reference","blockquote","list"]],["hr",function(e,t,r,n){let i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let s=e.bMarks[t]+e.tShift[t],o=e.src.charCodeAt(s++);if(42!==o&&45!==o&&95!==o)return!1;let a=1;for(;s<i;){let t=e.src.charCodeAt(s++);if(t!==o&&!Xr(t))return!1;t===o&&a++}if(a<3)return!1;if(n)return!0;e.line=t+1;let l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(a+1).join(String.fromCharCode(o)),!0},["paragraph","reference","blockquote","list"]],["list",function(e,t,r,n){let i,s,o,a,l,c,h,u=t,d=!0;if(e.sCount[u]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[u]-e.listIndent>=4&&e.sCount[u]<e.blkIndent)return!1;let f=!1;if(n&&"paragraph"===e.parentType&&e.sCount[u]>=e.blkIndent&&(f=!0),(o=XN(e,u))>=0){if(i=!0,c=e.bMarks[u]+e.tShift[u],s=Number(e.src.slice(c,o-1)),f&&1!==s)return!1}else{if(!((o=XE(e,u))>=0))return!1;i=!1}if(f&&e.skipSpaces(o)>=e.eMarks[u])return!1;if(n)return!0;let p=e.src.charCodeAt(o-1),m=e.tokens.length;i?(h=e.push("ordered_list_open","ol",1),1!==s&&(h.attrs=[["start",s]])):h=e.push("bullet_list_open","ul",1);let g=[u,0];h.map=g,h.markup=String.fromCharCode(p);let y=!1,b=e.md.block.ruler.getRules("list"),v=e.parentType;for(e.parentType="list";u<r;){let t;l=o,a=e.eMarks[u];let n=e.sCount[u]+o-(e.bMarks[u]+e.tShift[u]),s=n;for(;l<a;){let t=e.src.charCodeAt(l);if(9===t)s+=4-(s+e.bsCount[u])%4;else if(32===t)s++;else break;l++}let f=l;(t=f>=a?1:s-n)>4&&(t=1);let m=n+t;(h=e.push("list_item_open","li",1)).markup=String.fromCharCode(p);let g=[u,0];h.map=g,i&&(h.info=e.src.slice(c,o-1));let v=e.tight,x=e.tShift[u],w=e.sCount[u],k=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=m,e.tight=!0,e.tShift[u]=f-e.bMarks[u],e.sCount[u]=s,f>=a&&e.isEmpty(u+1)?e.line=Math.min(e.line+2,r):e.md.block.tokenize(e,u,r,!0),(!e.tight||y)&&(d=!1),y=e.line-u>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=k,e.tShift[u]=x,e.sCount[u]=w,e.tight=v,(h=e.push("list_item_close","li",-1)).markup=String.fromCharCode(p),u=e.line,g[1]=u,u>=r||e.sCount[u]<e.blkIndent||e.sCount[u]-e.blkIndent>=4)break;let O=!1;for(let t=0,n=b.length;t<n;t++)if(b[t](e,u,r,!0)){O=!0;break}if(O)break;if(i){if((o=XN(e,u))<0)break;c=e.bMarks[u]+e.tShift[u]}else if((o=XE(e,u))<0)break;if(p!==e.src.charCodeAt(o-1))break}return(h=i?e.push("ordered_list_close","ol",-1):e.push("bullet_list_close","ul",-1)).markup=String.fromCharCode(p),g[1]=u,e.line=u,e.parentType=v,d&&function(e,t){let r=e.level+2;for(let n=t+2,i=e.tokens.length-2;n<i;n++)e.tokens[n].level===r&&"paragraph_open"===e.tokens[n].type&&(e.tokens[n+2].hidden=!0,e.tokens[n].hidden=!0,n+=2)}(e,m),!0},["paragraph","reference","blockquote"]],["reference",function(e,t,r,n){let i,s=e.bMarks[t]+e.tShift[t],o=e.eMarks[t],a=t+1;if(e.sCount[t]-e.blkIndent>=4||91!==e.src.charCodeAt(s))return!1;function l(t){let r=e.lineMax;if(t>=r||e.isEmpty(t))return null;let n=!1;if(e.sCount[t]-e.blkIndent>3&&(n=!0),e.sCount[t]<0&&(n=!0),!n){let n=e.md.block.ruler.getRules("reference"),i=e.parentType;e.parentType="reference";let s=!1;for(let i=0,o=n.length;i<o;i++)if(n[i](e,t,r,!0)){s=!0;break}if(e.parentType=i,s)return null}let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];return e.src.slice(i,s+1)}let c=e.src.slice(s,o+1);o=c.length;let h=-1;for(s=1;s<o;s++){let e=c.charCodeAt(s);if(91===e)return!1;if(93===e){h=s;break}if(10===e){let e=l(a);null!==e&&(c+=e,o=c.length,a++)}else if(92===e&&++s<o&&10===c.charCodeAt(s)){let e=l(a);null!==e&&(c+=e,o=c.length,a++)}}if(h<0||58!==c.charCodeAt(h+1))return!1;for(s=h+2;s<o;s++){let e=c.charCodeAt(s);if(10===e){let e=l(a);null!==e&&(c+=e,o=c.length,a++)}else if(!Xr(e))break}let u=e.md.helpers.parseLinkDestination(c,s,o);if(!u.ok)return!1;let d=e.md.normalizeLink(u.str);if(!e.md.validateLink(d))return!1;let f=s=u.pos,p=a,m=s;for(;s<o;s++){let e=c.charCodeAt(s);if(10===e){let e=l(a);null!==e&&(c+=e,o=c.length,a++)}else if(!Xr(e))break}let g=e.md.helpers.parseLinkTitle(c,s,o);for(;g.can_continue;){let t=l(a);if(null===t)break;c+=t,s=o,o=c.length,a++,g=e.md.helpers.parseLinkTitle(c,s,o,g)}for(s<o&&m!==s&&g.ok?(i=g.str,s=g.pos):(i="",s=f,a=p);s<o&&Xr(c.charCodeAt(s));)s++;if(s<o&&10!==c.charCodeAt(s)&&i)for(i="",s=f,a=p;s<o&&Xr(c.charCodeAt(s));)s++;if(s<o&&10!==c.charCodeAt(s))return!1;let y=Xo(c.slice(1,h));return!!y&&(n||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[y]>"u"&&(e.env.references[y]={title:i,href:d}),e.line=a),!0)}],["html_block",function(e,t,r,n){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||60!==e.src.charCodeAt(i))return!1;let o=e.src.slice(i,s),a=0;for(;a<XP.length&&!XP[a][0].test(o);a++);if(a===XP.length)return!1;if(n)return XP[a][2];let l=t+1;if(!XP[a][1].test(o)){for(;l<r&&!(e.sCount[l]<e.blkIndent);l++)if(i=e.bMarks[l]+e.tShift[l],s=e.eMarks[l],o=e.src.slice(i,s),XP[a][1].test(o)){0!==o.length&&l++;break}}e.line=l;let c=e.push("html_block","",0);return c.map=[t,l],c.content=e.getLines(t,l,e.blkIndent,!0),!0},["paragraph","reference","blockquote"]],["heading",function(e,t,r,n){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.src.charCodeAt(i);if(35!==o||i>=s)return!1;let a=1;for(o=e.src.charCodeAt(++i);35===o&&i<s&&a<=6;)a++,o=e.src.charCodeAt(++i);if(a>6||i<s&&!Xr(o))return!1;if(n)return!0;s=e.skipSpacesBack(s,i);let l=e.skipCharsBack(s,35,i);l>i&&Xr(e.src.charCodeAt(l-1))&&(s=l),e.line=t+1;let c=e.push("heading_open","h"+String(a),1);c.markup="########".slice(0,a),c.map=[t,e.line];let h=e.push("inline","",0);return h.content=e.src.slice(i,s).trim(),h.map=[t,e.line],h.children=[],e.push("heading_close","h"+String(a),-1).markup="########".slice(0,a),!0},["paragraph","reference","blockquote"]],["lheading",function(e,t,r){let n=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.parentType;e.parentType="paragraph";let s=0,o,a=t+1;for(;a<r&&!e.isEmpty(a);a++){if(e.sCount[a]-e.blkIndent>3)continue;if(e.sCount[a]>=e.blkIndent){let t=e.bMarks[a]+e.tShift[a],r=e.eMarks[a];if(t<r&&(45===(o=e.src.charCodeAt(t))||61===o)&&(t=e.skipChars(t,o),(t=e.skipSpaces(t))>=r)){s=61===o?1:2;break}}if(e.sCount[a]<0)continue;let t=!1;for(let i=0,s=n.length;i<s;i++)if(n[i](e,a,r,!0)){t=!0;break}if(t)break}if(!s)return!1;let l=e.getLines(t,a,e.blkIndent,!1).trim();e.line=a+1;let c=e.push("heading_open","h"+String(s),1);c.markup=String.fromCharCode(o),c.map=[t,e.line];let h=e.push("inline","",0);return h.content=l,h.map=[t,e.line-1],h.children=[],e.push("heading_close","h"+String(s),-1).markup=String.fromCharCode(o),e.parentType=i,!0}],["paragraph",function(e,t,r){let n=e.md.block.ruler.getRules("paragraph"),i=e.parentType,s=t+1;for(e.parentType="paragraph";s<r&&!e.isEmpty(s);s++){if(e.sCount[s]-e.blkIndent>3||e.sCount[s]<0)continue;let t=!1;for(let i=0,o=n.length;i<o;i++)if(n[i](e,s,r,!0)){t=!0;break}if(t)break}let o=e.getLines(t,s,e.blkIndent,!1).trim();e.line=s,e.push("paragraph_open","p",1).map=[t,e.line];let a=e.push("inline","",0);return a.content=o,a.map=[t,e.line],a.children=[],e.push("paragraph_close","p",-1),e.parentType=i,!0}]];function Xz(){this.ruler=new Xu;for(let e=0;e<XI.length;e++)this.ruler.push(XI[e][0],XI[e][1],{alt:(XI[e][2]||[]).slice()})}function XL(e,t,r,n){this.src=e,this.env=r,this.md=t,this.tokens=n,this.tokens_meta=Array(n.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Xz.prototype.tokenize=function(e,t,r){let n=this.ruler.getRules(""),i=n.length,s=e.md.options.maxNesting,o=t,a=!1;for(;o<r&&(e.line=o=e.skipEmptyLines(o),!(o>=r||e.sCount[o]<e.blkIndent));){if(e.level>=s){e.line=r;break}let t=e.line,l=!1;for(let s=0;s<i;s++)if(l=n[s](e,o,r,!1)){if(t>=e.line)throw Error("block rule didn't increment state.line");break}if(!l)throw Error("none of the block rules matched");e.tight=!a,e.isEmpty(e.line-1)&&(a=!0),(o=e.line)<r&&e.isEmpty(o)&&(a=!0,e.line=++o)}},Xz.prototype.parse=function(e,t,r,n){if(!e)return;let i=new this.State(e,t,r,n);this.tokenize(i,i.line,i.lineMax)},Xz.prototype.State=XT,XL.prototype.pushPending=function(){let e=new Xd("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e},XL.prototype.push=function(e,t,r){this.pending&&this.pushPending();let n=new Xd(e,t,r),i=null;return r<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),n.level=this.level,r>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(n),this.tokens_meta.push(i),n},XL.prototype.scanDelims=function(e,t){let r=this.posMax,n=this.src.charCodeAt(e),i=e>0?this.src.charCodeAt(e-1):32,s=e;for(;s<r&&this.src.charCodeAt(s)===n;)s++;let o=s-e,a=s<r?this.src.charCodeAt(s):32,l=Xs(i)||Xi(String.fromCharCode(i)),c=Xs(a)||Xi(String.fromCharCode(a)),h=Xn(i),u=Xn(a),d=!u&&(!c||h||l),f=!h&&(!l||u||c);return{can_open:d&&(t||!f||l),can_close:f&&(t||!d||c),length:o}},XL.prototype.Token=Xd;let Xq=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i,X$=[];for(let e=0;e<256;e++)X$.push(0);function XB(e,t){let r;let n=[],i=t.length;for(let s=0;s<i;s++){let i=t[s];if(126!==i.marker||-1===i.end)continue;let o=t[i.end];(r=e.tokens[i.token]).type="s_open",r.tag="s",r.nesting=1,r.markup="~~",r.content="",(r=e.tokens[o.token]).type="s_close",r.tag="s",r.nesting=-1,r.markup="~~",r.content="","text"===e.tokens[o.token-1].type&&"~"===e.tokens[o.token-1].content&&n.push(o.token-1)}for(;n.length;){let t=n.pop(),i=t+1;for(;i<e.tokens.length&&"s_close"===e.tokens[i].type;)i++;t!==--i&&(r=e.tokens[i],e.tokens[i]=e.tokens[t],e.tokens[t]=r)}}"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){X$[e.charCodeAt(0)]=1});let XF={tokenize:function(e,t){let r;let n=e.pos,i=e.src.charCodeAt(n);if(t||126!==i)return!1;let s=e.scanDelims(e.pos,!0),o=s.length,a=String.fromCharCode(i);if(o<2)return!1;o%2&&(e.push("text","",0).content=a,o--);for(let t=0;t<o;t+=2)e.push("text","",0).content=a+a,e.delimiters.push({marker:i,length:0,token:e.tokens.length-1,end:-1,open:s.can_open,close:s.can_close});return e.pos+=s.length,!0},postProcess:function(e){let t=e.tokens_meta,r=e.tokens_meta.length;XB(e,e.delimiters);for(let n=0;n<r;n++)t[n]&&t[n].delimiters&&XB(e,t[n].delimiters)}};function XQ(e,t){let r=t.length;for(let n=r-1;n>=0;n--){let r=t[n];if(95!==r.marker&&42!==r.marker||-1===r.end)continue;let i=t[r.end],s=n>0&&t[n-1].end===r.end+1&&t[n-1].marker===r.marker&&t[n-1].token===r.token-1&&t[r.end+1].token===i.token+1,o=String.fromCharCode(r.marker),a=e.tokens[r.token];a.type=s?"strong_open":"em_open",a.tag=s?"strong":"em",a.nesting=1,a.markup=s?o+o:o,a.content="";let l=e.tokens[i.token];l.type=s?"strong_close":"em_close",l.tag=s?"strong":"em",l.nesting=-1,l.markup=s?o+o:o,l.content="",s&&(e.tokens[t[n-1].token].content="",e.tokens[t[r.end+1].token].content="",n--)}}let XV={tokenize:function(e,t){let r=e.pos,n=e.src.charCodeAt(r);if(t||95!==n&&42!==n)return!1;let i=e.scanDelims(e.pos,42===n);for(let t=0;t<i.length;t++)e.push("text","",0).content=String.fromCharCode(n),e.delimiters.push({marker:n,length:i.length,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0},postProcess:function(e){let t=e.tokens_meta,r=e.tokens_meta.length;XQ(e,e.delimiters);for(let n=0;n<r;n++)t[n]&&t[n].delimiters&&XQ(e,t[n].delimiters)}},XH=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,XW=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/,XU=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,XG=/^&([a-z][a-z0-9]{1,31});/i;function XX(e){let t={},r=e.length;if(!r)return;let n=0,i=-2,s=[];for(let o=0;o<r;o++){let r=e[o];if(s.push(0),(e[n].marker!==r.marker||i!==r.token-1)&&(n=o),i=r.token,r.length=r.length||0,!r.close)continue;t.hasOwnProperty(r.marker)||(t[r.marker]=[-1,-1,-1,-1,-1,-1]);let a=t[r.marker][3*!!r.open+r.length%3],l=n-s[n]-1,c=l;for(;l>a;l-=s[l]+1){let t=e[l];if(t.marker===r.marker&&t.open&&t.end<0){let n=!1;if((t.close||r.open)&&(t.length+r.length)%3==0&&(t.length%3!=0||r.length%3!=0)&&(n=!0),!n){let n=l>0&&!e[l-1].open?s[l-1]+1:0;s[o]=o-l+n,s[l]=n,r.open=!1,t.end=o,t.close=!1,c=-1,i=-2;break}}}-1!==c&&(t[r.marker][3*!!r.open+(r.length||0)%3]=c)}}let XY=[["text",function(e,t){let r=e.pos;for(;r<e.posMax&&!function(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}(e.src.charCodeAt(r));)r++;return r!==e.pos&&(t||(e.pending+=e.src.slice(e.pos,r)),e.pos=r,!0)}],["linkify",function(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;let r=e.pos;if(r+3>e.posMax||58!==e.src.charCodeAt(r)||47!==e.src.charCodeAt(r+1)||47!==e.src.charCodeAt(r+2))return!1;let n=e.pending.match(Xq);if(!n)return!1;let i=n[1],s=e.md.linkify.matchAtStart(e.src.slice(r-i.length));if(!s)return!1;let o=s.url;if(o.length<=i.length)return!1;o=o.replace(/\*+$/,"");let a=e.md.normalizeLink(o);if(!e.md.validateLink(a))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);let t=e.push("link_open","a",1);t.attrs=[["href",a]],t.markup="linkify",t.info="auto",e.push("text","",0).content=e.md.normalizeLinkText(o);let r=e.push("link_close","a",-1);r.markup="linkify",r.info="auto"}return e.pos+=o.length-i.length,!0}],["newline",function(e,t){let r=e.pos;if(10!==e.src.charCodeAt(r))return!1;let n=e.pending.length-1,i=e.posMax;if(!t){if(n>=0&&32===e.pending.charCodeAt(n)){if(n>=1&&32===e.pending.charCodeAt(n-1)){let t=n-1;for(;t>=1&&32===e.pending.charCodeAt(t-1);)t--;e.pending=e.pending.slice(0,t),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0)}else e.push("softbreak","br",0)}for(r++;r<i&&Xr(e.src.charCodeAt(r));)r++;return e.pos=r,!0}],["escape",function(e,t){let r=e.pos,n=e.posMax;if(92!==e.src.charCodeAt(r)||++r>=n)return!1;let i=e.src.charCodeAt(r);if(10===i){for(t||e.push("hardbreak","br",0),r++;r<n&&Xr(i=e.src.charCodeAt(r));)r++;return e.pos=r,!0}let s=e.src[r];if(i>=55296&&i<=56319&&r+1<n){let t=e.src.charCodeAt(r+1);t>=56320&&t<=57343&&(s+=e.src[r+1],r++)}let o="\\"+s;if(!t){let t=e.push("text_special","",0);i<256&&0!==X$[i]?t.content=s:t.content=o,t.markup=o,t.info="escape"}return e.pos=r+1,!0}],["backticks",function(e,t){let r=e.pos;if(96!==e.src.charCodeAt(r))return!1;let n=r;r++;let i=e.posMax;for(;r<i&&96===e.src.charCodeAt(r);)r++;let s=e.src.slice(n,r),o=s.length;if(e.backticksScanned&&(e.backticks[o]||0)<=n)return t||(e.pending+=s),e.pos+=o,!0;let a=r,l;for(;-1!==(l=e.src.indexOf("`",a));){for(a=l+1;a<i&&96===e.src.charCodeAt(a);)a++;let n=a-l;if(n===o){if(!t){let t=e.push("code_inline","code",0);t.markup=s,t.content=e.src.slice(r,l).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=a,!0}e.backticks[n]=l}return e.backticksScanned=!0,t||(e.pending+=s),e.pos+=o,!0}],["strikethrough",XF.tokenize],["emphasis",XV.tokenize],["link",function(e,t){let r,n,i,s,o="",a="",l=e.pos,c=!0;if(91!==e.src.charCodeAt(e.pos))return!1;let h=e.pos,u=e.posMax,d=e.pos+1,f=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(f<0)return!1;let p=f+1;if(p<u&&40===e.src.charCodeAt(p)){for(c=!1,p++;p<u&&!(!Xr(r=e.src.charCodeAt(p))&&10!==r);p++);if(p>=u)return!1;if(l=p,(i=e.md.helpers.parseLinkDestination(e.src,p,e.posMax)).ok){for(o=e.md.normalizeLink(i.str),e.md.validateLink(o)?p=i.pos:o="",l=p;p<u&&!(!Xr(r=e.src.charCodeAt(p))&&10!==r);p++);if(i=e.md.helpers.parseLinkTitle(e.src,p,e.posMax),p<u&&l!==p&&i.ok)for(a=i.str,p=i.pos;p<u&&!(!Xr(r=e.src.charCodeAt(p))&&10!==r);p++);}(p>=u||41!==e.src.charCodeAt(p))&&(c=!0),p++}if(c){if(typeof e.env.references>"u")return!1;if(p<u&&91===e.src.charCodeAt(p)?(l=p+1,(p=e.md.helpers.parseLinkLabel(e,p))>=0?n=e.src.slice(l,p++):p=f+1):p=f+1,n||(n=e.src.slice(d,f)),!(s=e.env.references[Xo(n)]))return e.pos=h,!1;o=s.href,a=s.title}if(!t){e.pos=d,e.posMax=f;let t=e.push("link_open","a",1),r=[["href",o]];t.attrs=r,a&&r.push(["title",a]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=p,e.posMax=u,!0}],["image",function(e,t){let r,n,i,s,o,a,l,c,h="",u=e.pos,d=e.posMax;if(33!==e.src.charCodeAt(e.pos)||91!==e.src.charCodeAt(e.pos+1))return!1;let f=e.pos+2,p=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(p<0)return!1;if((s=p+1)<d&&40===e.src.charCodeAt(s)){for(s++;s<d&&!(!Xr(r=e.src.charCodeAt(s))&&10!==r);s++);if(s>=d)return!1;for(c=s,(a=e.md.helpers.parseLinkDestination(e.src,s,e.posMax)).ok&&(h=e.md.normalizeLink(a.str),e.md.validateLink(h)?s=a.pos:h=""),c=s;s<d&&!(!Xr(r=e.src.charCodeAt(s))&&10!==r);s++);if(a=e.md.helpers.parseLinkTitle(e.src,s,e.posMax),s<d&&c!==s&&a.ok)for(l=a.str,s=a.pos;s<d&&!(!Xr(r=e.src.charCodeAt(s))&&10!==r);s++);else l="";if(s>=d||41!==e.src.charCodeAt(s))return e.pos=u,!1;s++}else{if(typeof e.env.references>"u")return!1;if(s<d&&91===e.src.charCodeAt(s)?(c=s+1,(s=e.md.helpers.parseLinkLabel(e,s))>=0?i=e.src.slice(c,s++):s=p+1):s=p+1,i||(i=e.src.slice(f,p)),!(o=e.env.references[Xo(i)]))return e.pos=u,!1;h=o.href,l=o.title}if(!t){n=e.src.slice(f,p);let t=[];e.md.inline.parse(n,e.md,e.env,t);let r=e.push("image","img",0),i=[["src",h],["alt",""]];r.attrs=i,r.children=t,r.content=n,l&&i.push(["title",l])}return e.pos=s,e.posMax=d,!0}],["autolink",function(e,t){let r=e.pos;if(60!==e.src.charCodeAt(r))return!1;let n=e.pos,i=e.posMax;for(;;){if(++r>=i)return!1;let t=e.src.charCodeAt(r);if(60===t)return!1;if(62===t)break}let s=e.src.slice(n+1,r);if(XW.test(s)){let r=e.md.normalizeLink(s);if(!e.md.validateLink(r))return!1;if(!t){let t=e.push("link_open","a",1);t.attrs=[["href",r]],t.markup="autolink",t.info="auto",e.push("text","",0).content=e.md.normalizeLinkText(s);let n=e.push("link_close","a",-1);n.markup="autolink",n.info="auto"}return e.pos+=s.length+2,!0}if(XH.test(s)){let r=e.md.normalizeLink("mailto:"+s);if(!e.md.validateLink(r))return!1;if(!t){let t=e.push("link_open","a",1);t.attrs=[["href",r]],t.markup="autolink",t.info="auto",e.push("text","",0).content=e.md.normalizeLinkText(s);let n=e.push("link_close","a",-1);n.markup="autolink",n.info="auto"}return e.pos+=s.length+2,!0}return!1}],["html_inline",function(e,t){if(!e.md.options.html)return!1;let r=e.posMax,n=e.pos;if(60!==e.src.charCodeAt(n)||n+2>=r)return!1;let i=e.src.charCodeAt(n+1);if(33!==i&&63!==i&&47!==i&&!function(e){let t=32|e;return t>=97&&t<=122}(i))return!1;let s=e.src.slice(n).match(XD);if(!s)return!1;if(!t){var o,a;let t=e.push("html_inline","",0);t.content=s[0],o=t.content,/^<a[>\s]/i.test(o)&&e.linkLevel++,a=t.content,/^<\/a\s*>/i.test(a)&&e.linkLevel--}return e.pos+=s[0].length,!0}],["entity",function(e,t){let r=e.pos,n=e.posMax;if(38!==e.src.charCodeAt(r)||r+1>=n)return!1;if(35===e.src.charCodeAt(r+1)){let n=e.src.slice(r).match(XU);if(n){if(!t){let t="x"===n[1][0].toLowerCase()?parseInt(n[1].slice(1),16):parseInt(n[1],10),r=e.push("text_special","",0);r.content=G0(t)?G1(t):G1(65533),r.markup=n[0],r.info="entity"}return e.pos+=n[0].length,!0}}else{let n=e.src.slice(r).match(XG);if(n){let r=GX(n[0]);if(r!==n[0]){if(!t){let t=e.push("text_special","",0);t.content=r,t.markup=n[0],t.info="entity"}return e.pos+=n[0].length,!0}}}return!1}]],XZ=[["balance_pairs",function(e){let t=e.tokens_meta,r=e.tokens_meta.length;XX(e.delimiters);for(let e=0;e<r;e++)t[e]&&t[e].delimiters&&XX(t[e].delimiters)}],["strikethrough",XF.postProcess],["emphasis",XV.postProcess],["fragments_join",function(e){let t,r,n=0,i=e.tokens,s=e.tokens.length;for(t=r=0;t<s;t++)i[t].nesting<0&&n--,i[t].level=n,i[t].nesting>0&&n++,"text"===i[t].type&&t+1<s&&"text"===i[t+1].type?i[t+1].content=i[t].content+i[t+1].content:(t!==r&&(i[r]=i[t]),r++);t!==r&&(i.length=r)}]];function XJ(){this.ruler=new Xu;for(let e=0;e<XY.length;e++)this.ruler.push(XY[e][0],XY[e][1]);this.ruler2=new Xu;for(let e=0;e<XZ.length;e++)this.ruler2.push(XZ[e][0],XZ[e][1])}function XK(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){t&&Object.keys(t).forEach(function(r){e[r]=t[r]})}),e}function X0(e){return Object.prototype.toString.call(e)}function X1(e){return"[object Function]"===X0(e)}function X2(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}XJ.prototype.skipToken=function(e){let t=e.pos,r=this.ruler.getRules(""),n=r.length,i=e.md.options.maxNesting,s=e.cache;if("u">typeof s[t]){e.pos=s[t];return}let o=!1;if(e.level<i){for(let i=0;i<n;i++)if(e.level++,o=r[i](e,!0),e.level--,o){if(t>=e.pos)throw Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;o||e.pos++,s[t]=e.pos},XJ.prototype.tokenize=function(e){let t=this.ruler.getRules(""),r=t.length,n=e.posMax,i=e.md.options.maxNesting;for(;e.pos<n;){let s=e.pos,o=!1;if(e.level<i){for(let n=0;n<r;n++)if(o=t[n](e,!1)){if(s>=e.pos)throw Error("inline rule didn't increment state.pos");break}}if(o){if(e.pos>=n)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()},XJ.prototype.parse=function(e,t,r,n){let i=new this.State(e,t,r,n);this.tokenize(i);let s=this.ruler2.getRules(""),o=s.length;for(let e=0;e<o;e++)s[e](i)},XJ.prototype.State=XL;let X4={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1},X5={"http:":{validate:function(e,t,r){let n=e.slice(t);return r.re.http||(r.re.http=RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(n)?n.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,r){let n=e.slice(t);return r.re.no_http||(r.re.no_http=RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(n)?t>=3&&":"===e[t-3]||t>=3&&"/"===e[t-3]?0:n.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,r){let n=e.slice(t);return r.re.mailto||(r.re.mailto=RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(n)?n.match(r.re.mailto)[0].length:0}}},X3="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function X6(){return function(e,t){t.normalize(e)}}function X7(e){let t=e.re=function(e){let t={};e=e||{},t.src_Any=GP.source,t.src_Cc=GI.source,t.src_Z=Gq.source,t.src_P=Gz.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");let r="[><]";return t.src_pseudo_letter="(?:(?!"+r+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+r+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+r+"|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+r+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}(e.__opts__),r=e.__tlds__.slice();function n(e){return e.replace("%TLDS%",t.src_tlds)}e.onCompile(),e.__tlds_replaced__||r.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),r.push(t.src_xn),t.src_tlds=r.join("|"),t.email_fuzzy=RegExp(n(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(n(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(n(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(n(t.tpl_host_fuzzy_test),"i");let i=[];function s(e,t){throw Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}e.__compiled__={},Object.keys(e.__schemas__).forEach(function(t){let r=e.__schemas__[t];if(null===r)return;let n={validate:null,link:null};if(e.__compiled__[t]=n,"[object Object]"===X0(r)){var o;"[object RegExp]"===X0(r.validate)?(o=r.validate,n.validate=function(e,t){let r=e.slice(t);return o.test(r)?r.match(o)[0].length:0}):X1(r.validate)?n.validate=r.validate:s(t,r),X1(r.normalize)?n.normalize=r.normalize:r.normalize?s(t,r):n.normalize=X6();return}if("[object String]"===X0(r)){i.push(t);return}s(t,r)}),i.forEach(function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)}),e.__compiled__[""]={validate:null,normalize:X6()};let o=Object.keys(e.__compiled__).filter(function(t){return t.length>0&&e.__compiled__[t]}).map(X2).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),e.__index__=-1,e.__text_cache__=""}function X8(e,t){let r=e.__index__,n=e.__last_index__,i=e.__text_cache__.slice(r,n);this.schema=e.__schema__.toLowerCase(),this.index=r+t,this.lastIndex=n+t,this.raw=i,this.text=i,this.url=i}function X9(e,t){let r=new X8(e,t);return e.__compiled__[r.schema].normalize(r,e),r}function Ye(e,t){if(!(this instanceof Ye))return new Ye(e,t);t||Object.keys(e||{}).reduce(function(e,t){return e||X4.hasOwnProperty(t)},!1)&&(t=e,e={}),this.__opts__=XK({},X4,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=XK({},X5,e),this.__compiled__={},this.__tlds__=X3,this.__tlds_replaced__=!1,this.re={},X7(this)}Ye.prototype.add=function(e,t){return this.__schemas__[e]=t,X7(this),this},Ye.prototype.set=function(e){return this.__opts__=XK(this.__opts__,e),this},Ye.prototype.test=function(e){let t,r,n,i,s,o,a,l;if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;if(this.re.schema_test.test(e)){for((a=this.re.schema_search).lastIndex=0;null!==(t=a.exec(e));)if(i=this.testSchemaAt(e,t[2],a.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||l<this.__index__)&&null!==(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(s=r.index+r[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=r.index+r[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&e.indexOf("@")>=0&&null!==(n=e.match(this.re.email_fuzzy))&&(s=n.index+n[1].length,o=n.index+n[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=o)),this.__index__>=0},Ye.prototype.pretest=function(e){return this.re.pretest.test(e)},Ye.prototype.testSchemaAt=function(e,t,r){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,r,this):0},Ye.prototype.match=function(e){let t=[],r=0;this.__index__>=0&&this.__text_cache__===e&&(t.push(X9(this,r)),r=this.__last_index__);let n=r?e.slice(r):e;for(;this.test(n);)t.push(X9(this,r)),n=n.slice(this.__last_index__),r+=this.__last_index__;return t.length?t:null},Ye.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;let t=this.re.schema_at_start.exec(e);if(!t)return null;let r=this.testSchemaAt(e,t[2],t[0].length);return r?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+r,X9(this,0)):null},Ye.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?this.__tlds__=this.__tlds__.concat(e).sort().filter(function(e,t,r){return e!==r[t-1]}).reverse():(this.__tlds__=e.slice(),this.__tlds_replaced__=!0),X7(this),this},Ye.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},Ye.prototype.onCompile=function(){};let Yt=/^xn--/,Yr=/[^\0-\x7F]/,Yn=/[\x2E\u3002\uFF0E\uFF61]/g,Yi={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ys=Math.floor,Yo=String.fromCharCode;function Ya(e){throw RangeError(Yi[e])}function Yl(e,t){let r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+(function(e,t){let r=[],n=e.length;for(;n--;)r[n]=t(e[n]);return r})((e=e.replace(Yn,".")).split("."),t).join(".")}let Yc=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},Yh=function(e,t,r){let n=0;for(e=r?Ys(e/700):e>>1,e+=Ys(e/t);e>455;n+=36)e=Ys(e/35);return Ys(n+36*e/(e+38))},Yu=function(e){let t=[],r=e.length,n=0,i=128,s=72,o=e.lastIndexOf("-");o<0&&(o=0);for(let r=0;r<o;++r)e.charCodeAt(r)>=128&&Ya("not-basic"),t.push(e.charCodeAt(r));for(let l=o>0?o+1:0;l<r;){let o=n;for(let t=1,i=36;;i+=36){var a;l>=r&&Ya("invalid-input");let o=(a=e.charCodeAt(l++))>=48&&a<58?26+(a-48):a>=65&&a<91?a-65:a>=97&&a<123?a-97:36;o>=36&&Ya("invalid-input"),o>Ys((0x7fffffff-n)/t)&&Ya("overflow"),n+=o*t;let c=i<=s?1:i>=s+26?26:i-s;if(o<c)break;let h=36-c;t>Ys(0x7fffffff/h)&&Ya("overflow"),t*=h}let c=t.length+1;s=Yh(n-o,c,0==o),Ys(n/c)>0x7fffffff-i&&Ya("overflow"),i+=Ys(n/c),n%=c,t.splice(n++,0,i)}return String.fromCodePoint(...t)},Yd=function(e){let t=[],r=(e=function(e){let t=[],r=0,n=e.length;for(;r<n;){let i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){let n=e.charCodeAt(r++);(64512&n)==56320?t.push(((1023&i)<<10)+(1023&n)+65536):(t.push(i),r--)}else t.push(i)}return t}(e)).length,n=128,i=0,s=72;for(let r of e)r<128&&t.push(Yo(r));let o=t.length,a=o;for(o&&t.push("-");a<r;){let r=0x7fffffff;for(let t of e)t>=n&&t<r&&(r=t);let l=a+1;for(let c of(r-n>Ys((0x7fffffff-i)/l)&&Ya("overflow"),i+=(r-n)*l,n=r,e))if(c<n&&++i>0x7fffffff&&Ya("overflow"),c===n){let e=i;for(let r=36;;r+=36){let n=r<=s?1:r>=s+26?26:r-s;if(e<n)break;let i=e-n,o=36-n;t.push(Yo(Yc(n+i%o,0))),e=Ys(i/o)}t.push(Yo(Yc(e,0))),s=Yh(i,l,a===o),i=0,++a}++i,++n}return t.join("")},Yf={toASCII:function(e){return Yl(e,function(e){return Yr.test(e)?"xn--"+Yd(e):e})},toUnicode:function(e){return Yl(e,function(e){return Yt.test(e)?Yu(e.slice(4).toLowerCase()):e})}},Yp={default:{options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},zero:{options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},commonmark:{options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}}},Ym=/^(vbscript|javascript|file|data):/,Yg=/^data:image\/(gif|png|jpeg|webp);/;function Yy(e){let t=e.trim().toLowerCase();return!Ym.test(t)||Yg.test(t)}let Yb=["http:","https:","mailto:"];function Yv(e){let t=GD(e,!0);if(t.hostname&&(!t.protocol||Yb.indexOf(t.protocol)>=0))try{t.hostname=Yf.toASCII(t.hostname)}catch{}return Gw(Gk(t))}function Yx(e){let t=GD(e,!0);if(t.hostname&&(!t.protocol||Yb.indexOf(t.protocol)>=0))try{t.hostname=Yf.toUnicode(t.hostname)}catch{}return Gv(Gk(t),Gv.defaultChars+"%")}function Yw(e,t){if(!(this instanceof Yw))return new Yw(e,t);t||GY(e)||(t=e||{},e="default"),this.inline=new XJ,this.block=new Xz,this.core=new XC,this.renderer=new Xh,this.linkify=new Ye,this.validateLink=Yy,this.normalizeLink=Yv,this.normalizeLinkText=Yx,this.utils=Xa,this.helpers=GJ({},Xl),this.options={},this.configure(e),t&&this.set(t)}Yw.prototype.set=function(e){return GJ(this.options,e),this},Yw.prototype.configure=function(e){let t=this;if(GY(e)){let t=e;if(!(e=Yp[t]))throw Error('Wrong `markdown-it` preset "'+t+'", check name')}if(!e)throw Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(r){e.components[r].rules&&t[r].ruler.enableOnly(e.components[r].rules),e.components[r].rules2&&t[r].ruler2.enableOnly(e.components[r].rules2)}),this},Yw.prototype.enable=function(e,t){let r=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(t){r=r.concat(this[t].ruler.enable(e,!0))},this),r=r.concat(this.inline.ruler2.enable(e,!0));let n=e.filter(function(e){return 0>r.indexOf(e)});if(n.length&&!t)throw Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this},Yw.prototype.disable=function(e,t){let r=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(t){r=r.concat(this[t].ruler.disable(e,!0))},this),r=r.concat(this.inline.ruler2.disable(e,!0));let n=e.filter(function(e){return 0>r.indexOf(e)});if(n.length&&!t)throw Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this},Yw.prototype.use=function(e){let t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this},Yw.prototype.parse=function(e,t){if("string"!=typeof e)throw Error("Input data should be a String");let r=new this.core.State(e,this,t);return this.core.process(r),r.tokens},Yw.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)},Yw.prototype.parseInline=function(e,t){let r=new this.core.State(e,this,t);return r.inlineMode=!0,this.core.process(r),r.tokens},Yw.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};let Yk=new P8({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:()=>["p",0]},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["div",["hr"]]},heading:{attrs:{level:{default:1}},content:"(text | image)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:e=>["h"+e.attrs.level,0]},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>({params:e.getAttribute("data-params")||""})}],toDOM:e=>["pre",e.attrs.params?{"data-params":e.attrs.params}:{},["code",0]]},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs:e=>({order:e.hasAttribute("start")?+e.getAttribute("start"):1,tight:e.hasAttribute("data-tight")})}],toDOM:e=>["ol",{start:1==e.attrs.order?null:e.attrs.order,"data-tight":e.attrs.tight?"true":null},0]},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:e=>({tight:e.hasAttribute("data-tight")})}],toDOM:e=>["ul",{"data-tight":e.attrs.tight?"true":null},0]},list_item:{content:"block+",defining:!0,parseDOM:[{tag:"li"}],toDOM:()=>["li",0]},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:e=>({src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt")})}],toDOM:e=>["img",e.attrs]},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:e=>"em"==e.type.name}],toDOM:()=>["em"]},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!=e.style.fontWeight&&null},{style:"font-weight=400",clearMark:e=>"strong"==e.type.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM:()=>["strong"]},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:e=>({href:e.getAttribute("href"),title:e.getAttribute("title")})}],toDOM:e=>["a",e.attrs]},code:{parseDOM:[{tag:"code"}],toDOM:()=>["code"]}}});class YO{constructor(e,t){this.schema=e,this.tokenHandlers=t,this.stack=[{type:e.topNodeType,attrs:null,content:[],marks:Pj.none}]}top(){return this.stack[this.stack.length-1]}push(e){this.stack.length&&this.top().content.push(e)}addText(e){if(!e)return;let t=this.top(),r=t.content,n=r[r.length-1],i=this.schema.text(e,t.marks),s;n&&(s=function(e,t){if(e.isText&&t.isText&&Pj.sameSet(e.marks,t.marks))return e.withText(e.text+t.text)}(n,i))?r[r.length-1]=s:r.push(i)}openMark(e){let t=this.top();t.marks=e.addToSet(t.marks)}closeMark(e){let t=this.top();t.marks=e.removeFromSet(t.marks)}parseTokens(e){for(let t=0;t<e.length;t++){let r=e[t],n=this.tokenHandlers[r.type];if(!n)throw Error("Token type `"+r.type+"` not supported by Markdown parser");n(this,r,e,t)}}addNode(e,t,r){let n=this.top(),i=e.createAndFill(t,r,n?n.marks:[]);return i?(this.push(i),i):null}openNode(e,t){this.stack.push({type:e,attrs:t,content:[],marks:Pj.none})}closeNode(){let e=this.stack.pop();return this.addNode(e.type,e.attrs,e.content)}}function YS(e,t,r,n){return e.getAttrs?e.getAttrs(t,r,n):e.attrs instanceof Function?e.attrs(t):e.attrs}function YC(e,t){return e.noCloseToken||"code_inline"==t||"code_block"==t||"fence"==t}function YT(e){return e[e.length-1]==`
`?e.slice(0,e.length-1):e}function YA(){}function YM(e,t){for(;++t<e.length;)if("list_item_open"!=e[t].type)return e[t].hidden;return!1}new class{constructor(e,t,r){this.schema=e,this.tokenizer=t,this.tokens=r,this.tokenHandlers=function(e,t){let r=Object.create(null);for(let n in t){let i=t[n];if(i.block){let t=e.nodeType(i.block);YC(i,n)?r[n]=(e,r,n,s)=>{e.openNode(t,YS(i,r,n,s)),e.addText(YT(r.content)),e.closeNode()}:(r[n+"_open"]=(e,r,n,s)=>e.openNode(t,YS(i,r,n,s)),r[n+"_close"]=e=>e.closeNode())}else if(i.node){let t=e.nodeType(i.node);r[n]=(e,r,n,s)=>e.addNode(t,YS(i,r,n,s))}else if(i.mark){let t=e.marks[i.mark];YC(i,n)?r[n]=(e,r,n,s)=>{e.openMark(t.create(YS(i,r,n,s))),e.addText(YT(r.content)),e.closeMark(t)}:(r[n+"_open"]=(e,r,n,s)=>e.openMark(t.create(YS(i,r,n,s))),r[n+"_close"]=e=>e.closeMark(t))}else if(i.ignore)YC(i,n)?r[n]=YA:(r[n+"_open"]=YA,r[n+"_close"]=YA);else throw RangeError("Unrecognized parsing spec "+JSON.stringify(i))}return r.text=(e,t)=>e.addText(t.content),r.inline=(e,t)=>e.parseTokens(t.children),r.softbreak=r.softbreak||(e=>e.addText(" ")),r}(e,r)}parse(e,t={}){let r=new YO(this.schema,this.tokenHandlers),n;r.parseTokens(this.tokenizer.parse(e,t));do n=r.closeNode();while(r.stack.length);return n||this.schema.topNodeType.createAndFill()}}(Yk,Yw("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list",getAttrs:(e,t,r)=>({tight:YM(t,r)})},ordered_list:{block:"ordered_list",getAttrs:(e,t,r)=>({order:+e.attrGet("start")||1,tight:YM(t,r)})},heading:{block:"heading",getAttrs:e=>({level:+e.tag.slice(1)})},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:e=>({params:e.info||""}),noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:e=>({src:e.attrGet("src"),title:e.attrGet("title")||null,alt:e.children[0]&&e.children[0].content||null})},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:e=>({href:e.attrGet("href"),title:e.attrGet("title")||null})},code_inline:{mark:"code",noCloseToken:!0}});let YE={open:"",close:"",mixable:!0},YN=new class{constructor(e,t,r={}){this.nodes=e,this.marks=t,this.options=r}serialize(e,t={}){t=Object.assign({},this.options,t);let r=new Yj(this.nodes,this.marks,t);return r.renderContent(e),r.out}}({blockquote(e,t){e.wrapBlock("> ",null,t,()=>e.renderContent(t))},code_block(e,t){let r=t.textContent.match(/`{3,}/gm),n=r?r.sort().slice(-1)[0]+"`":"```";e.write(n+(t.attrs.params||"")+`
`),e.text(t.textContent,!1),e.write(`
`),e.write(n),e.closeBlock(t)},heading(e,t){e.write(e.repeat("#",t.attrs.level)+" "),e.renderInline(t,!1),e.closeBlock(t)},horizontal_rule(e,t){e.write(t.attrs.markup||"---"),e.closeBlock(t)},bullet_list(e,t){e.renderList(t,"  ",()=>(t.attrs.bullet||"*")+" ")},ordered_list(e,t){let r=t.attrs.order||1,n=String(r+t.childCount-1).length,i=e.repeat(" ",n+2);e.renderList(t,i,t=>{let i=String(r+t);return e.repeat(" ",n-i.length)+i+". "})},list_item(e,t){e.renderContent(t)},paragraph(e,t){e.renderInline(t),e.closeBlock(t)},image(e,t){e.write("!["+e.esc(t.attrs.alt||"")+"]("+t.attrs.src.replace(/[\(\)]/g,"\\$&")+(t.attrs.title?' "'+t.attrs.title.replace(/"/g,'\\"')+'"':"")+")")},hard_break(e,t,r,n){for(let i=n+1;i<r.childCount;i++)if(r.child(i).type!=t.type){e.write(`\\
`);return}},text(e,t){e.text(t.text,!e.inAutolink)}},{em:{open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},strong:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},link:{open:(e,t,r,n)=>(e.inAutolink=function(e,t,r){if(e.attrs.title||!/^\w+:/.test(e.attrs.href))return!1;let n=t.child(r);return!!n.isText&&n.text==e.attrs.href&&n.marks[n.marks.length-1]==e&&(r==t.childCount-1||!e.isInSet(t.child(r+1).marks))}(t,r,n),e.inAutolink?"<":"["),close(e,t,r,n){let{inAutolink:i}=e;return e.inAutolink=void 0,i?">":"]("+t.attrs.href.replace(/[\(\)"]/g,"\\$&")+(t.attrs.title?` "${t.attrs.title.replace(/"/g,'\\"')}"`:"")+")"},mixable:!0},code:{open:(e,t,r,n)=>Y_(r.child(n),-1),close:(e,t,r,n)=>Y_(r.child(n-1),1),escape:!1}});function Y_(e,t){let r=/`+/g,n,i=0;if(e.isText)for(;n=r.exec(e.text);)i=Math.max(i,n[0].length);let s=i>0&&t>0?" `":"`";for(let e=0;e<i;e++)s+="`";return i>0&&t<0&&(s+=" "),s}let Yj=class{constructor(e,t,r){this.nodes=e,this.marks=t,this.options=r,this.delim="",this.out="",this.closed=null,this.inAutolink=void 0,this.atBlockStart=!1,this.inTightList=!1,typeof this.options.tightLists>"u"&&(this.options.tightLists=!1),typeof this.options.hardBreakNodeName>"u"&&(this.options.hardBreakNodeName="hard_break")}flushClose(e=2){if(this.closed){if(this.atBlank()||(this.out+=`
`),e>1){let t=this.delim,r=/\s+$/.exec(t);r&&(t=t.slice(0,t.length-r[0].length));for(let r=1;r<e;r++)this.out+=t+`
`}this.closed=null}}getMark(e){let t=this.marks[e];if(!t){if(!1!==this.options.strict)throw Error(`Mark type \`${e}\` not supported by Markdown renderer`);t=YE}return t}wrapBlock(e,t,r,n){let i=this.delim;this.write(t??e),this.delim+=e,n(),this.delim=i,this.closeBlock(r)}atBlank(){return/(^|\n)$/.test(this.out)}ensureNewLine(){this.atBlank()||(this.out+=`
`)}write(e){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),e&&(this.out+=e)}closeBlock(e){this.closed=e}text(e,t=!0){let r=e.split(`
`);for(let e=0;e<r.length;e++)this.write(),!t&&"["==r[e][0]&&/(^|[^\\])\!$/.test(this.out)&&(this.out=this.out.slice(0,this.out.length-1)+"\\!"),this.out+=t?this.esc(r[e],this.atBlockStart):r[e],e!=r.length-1&&(this.out+=`
`)}render(e,t,r){if(this.nodes[e.type.name])this.nodes[e.type.name](this,e,t,r);else{if(!1!==this.options.strict)throw Error("Token type `"+e.type.name+"` not supported by Markdown renderer");e.type.isLeaf||(e.type.inlineContent?this.renderInline(e):this.renderContent(e),e.isBlock&&this.closeBlock(e))}}renderContent(e){e.forEach((t,r,n)=>this.render(t,e,n))}renderInline(e,t=!0){this.atBlockStart=t;let r=[],n="",i=(t,i,s)=>{let o=t?t.marks:[];t&&t.type.name===this.options.hardBreakNodeName&&(o=o.filter(t=>{if(s+1==e.childCount)return!1;let r=e.child(s+1);return t.isInSet(r.marks)&&(!r.isText||/\S/.test(r.text))}));let a=n;if(n="",t&&t.isText&&o.some(e=>{let t=this.getMark(e.type.name);return t&&t.expelEnclosingWhitespace&&!e.isInSet(r)})){let[e,n,i]=/^(\s*)(.*)$/m.exec(t.text);n&&(a+=n,(t=i?t.withText(i):null)||(o=r))}if(t&&t.isText&&o.some(t=>{let r=this.getMark(t.type.name);return r&&r.expelEnclosingWhitespace&&(s==e.childCount-1||!t.isInSet(e.child(s+1).marks))})){let[e,i,s]=/^(.*?)(\s*)$/m.exec(t.text);s&&(n=s,(t=i?t.withText(i):null)||(o=r))}let l=o.length?o[o.length-1]:null,c=l&&!1===this.getMark(l.type.name).escape,h=o.length-+!!c;e:for(let e=0;e<h;e++){let t=o[e];if(!this.getMark(t.type.name).mixable)break;for(let n=0;n<r.length;n++){let i=r[n];if(!this.getMark(i.type.name).mixable)break;if(t.eq(i)){e>n?o=o.slice(0,n).concat(t).concat(o.slice(n,e)).concat(o.slice(e+1,h)):n>e&&(o=o.slice(0,e).concat(o.slice(e+1,n)).concat(t).concat(o.slice(n,h)));continue e}}}let u=0;for(;u<Math.min(r.length,h)&&o[u].eq(r[u]);)++u;for(;u<r.length;)this.text(this.markString(r.pop(),!1,e,s),!1);if(a&&this.text(a),t){for(;r.length<h;){let t=o[r.length];r.push(t),this.text(this.markString(t,!0,e,s),!1),this.atBlockStart=!1}c&&t.isText?this.text(this.markString(l,!0,e,s)+t.text+this.markString(l,!1,e,s+1),!1):this.render(t,e,s),this.atBlockStart=!1}null!=t&&t.isText&&t.nodeSize>0&&(this.atBlockStart=!1)};e.forEach(i),i(null,0,e.childCount),this.atBlockStart=!1}renderList(e,t,r){this.closed&&this.closed.type==e.type?this.flushClose(3):this.inTightList&&this.flushClose(1);let n="u">typeof e.attrs.tight?e.attrs.tight:this.options.tightLists,i=this.inTightList;this.inTightList=n,e.forEach((i,s,o)=>{o&&n&&this.flushClose(1),this.wrapBlock(t,r(o),e,()=>this.render(i,e,o))}),this.inTightList=i}esc(e,t=!1){return e=e.replace(/[`*\\~\[\]_]/g,(t,r)=>"_"==t&&r>0&&r+1<e.length&&e[r-1].match(/\w/)&&e[r+1].match(/\w/)?t:"\\"+t),t&&(e=e.replace(/^(\+[ ]|[\-*>])/,"\\$&").replace(/^(\s*)(#{1,6})(\s|$)/,"$1\\$2$3").replace(/^(\s*\d+)\.\s/,"$1\\. ")),this.options.escapeExtraCharacters&&(e=e.replace(this.options.escapeExtraCharacters,"\\$&")),e}quote(e){let t=-1==e.indexOf('"')?'""':-1==e.indexOf("'")?"''":"()";return t[0]+e+t[1]}repeat(e,t){let r="";for(let n=0;n<t;n++)r+=e;return r}markString(e,t,r,n){let i=this.getMark(e.type.name),s=t?i.open:i.close;return"string"==typeof s?s:s(this,e,r,n)}getEnclosingWhitespace(e){return{leading:(e.match(/^(\s+)/)||[void 0])[0],trailing:(e.match(/(\s+)$/)||[void 0])[0]}}};var YD=!0,YR=!1,YP=!1;function YI(e,t,r){var n=e.attrIndex(t),i=[t,r];n<0?e.attrPush(i):e.attrs[n]=i}let Yz=(0,M.y)(function(e,t){t&&(YD=!t.enabled,YR=!!t.label,YP=!!t.labelAfter),e.core.ruler.after("inline","github-task-lists",function(e){for(var t=e.tokens,r=2;r<t.length;r++)(function(e,t){var r;return"inline"===e[t].type&&"paragraph_open"===e[t-1].type&&"list_item_open"===e[t-2].type&&(0===(r=e[t]).content.indexOf("[ ] ")||0===r.content.indexOf("[x] ")||0===r.content.indexOf("[X] "))})(t,r)&&(function(e,t){if(e.children.unshift(function(e,t){var r=new t("html_inline","",0),n=YD?' disabled="" ':"";return 0===e.content.indexOf("[ ] ")?r.content='<input class="task-list-item-checkbox"'+n+'type="checkbox">':(0===e.content.indexOf("[x] ")||0===e.content.indexOf("[X] "))&&(r.content='<input class="task-list-item-checkbox" checked=""'+n+'type="checkbox">'),r}(e,t)),e.children[1].content=e.children[1].content.slice(3),e.content=e.content.slice(3),YR){if(YP){e.children.pop();var r="task-item-"+Math.ceil(1e4*1e3*Math.random()-1e3);e.children[0].content=e.children[0].content.slice(0,-1)+' id="'+r+'">',e.children.push(function(e,t,r){var n=new r("html_inline","",0);return n.content='<label class="task-list-item-label" for="'+t+'">'+e+"</label>",n.attrs=[{for:t}],n}(e.content,r,t))}else e.children.unshift(function(e){var t=new e("html_inline","",0);return t.content="<label>",t}(t)),e.children.push(function(e){var t=new e("html_inline","",0);return t.content="</label>",t}(t))}}(t[r],e.Token),YI(t[r-2],"class","task-list-item"+(YD?"":" enabled")),YI(t[function(e,t){for(var r=e[t].level-1,n=t-1;n>=0;n--)if(e[n].level===r)return n;return -1}(t,r-2)],"class","contains-task-list"))})});var YL=Object.defineProperty,Yq=(e,t,r)=>t in e?YL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Y$=(e,t,r)=>(Yq(e,"symbol"!=typeof t?t+"":t,r),r);let YB=$z.create({name:"markdownTightLists",addOptions:()=>({tight:!0,tightClass:"tight",listTypes:["bulletList","orderedList"]}),addGlobalAttributes(){return[{types:this.options.listTypes,attributes:{tight:{default:this.options.tight,parseHTML:e=>"true"===e.getAttribute("data-tight")||!e.querySelector("p"),renderHTML:e=>({class:e.tight?this.options.tightClass:null,"data-tight":e.tight?"true":null})}}}]},addCommands(){var e=this;return{toggleTight:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return r=>{let{editor:n,commands:i}=r;return e.options.listTypes.some(e=>(function(e){if(!n.isActive(e))return!1;let r=n.getAttributes(e);return i.updateAttributes(e,{tight:t??!(null!=r&&r.tight)})})(e))}}}}}),YF=Yw();function YQ(e,t){return YF.inline.State.prototype.scanDelims.call({src:e,posMax:e.length}),new YF.inline.State(e,null,null,[]).scanDelims(t,!0)}function YV(e,t,r,n){let i=e.substring(0,r)+e.substring(r+t.length);return i.substring(0,r+n)+t+i.substring(r+n)}class YH extends Yj{constructor(e,t,r){super(e,t,r??{}),Y$(this,"inTable",!1),this.inlines=[]}render(e,t,r){super.render(e,t,r);let n=this.inlines[this.inlines.length-1];if(null!=n&&n.start&&null!=n&&n.end){let e;let{delimiter:t,start:r,end:i}=this.normalizeInline(n);this.out=((e=function(e,t,r,n){let i=n,s=e;for(;i>r&&!YQ(s,i).can_close;)s=YV(s,t,i,-1),i--;return{text:s,from:r,to:i}}((e=function(e,t,r,n){let i=r,s=e;for(;i<n&&!YQ(s,i).can_open;)s=YV(s,t,i,1),i++;return{text:s,from:i,to:n}}((e={text:this.out,from:r,to:i}).text,t,e.from,e.to)).text,t,e.from,e.to)).to-e.from<t.length+1&&(e.text=e.text.substring(0,e.from)+e.text.substring(e.to+t.length)),e.text),this.inlines.pop()}}markString(e,t,r,n){let i=this.marks[e.type.name];if(i.expelEnclosingWhitespace){if(t)this.inlines.push({start:this.out.length,delimiter:i.open});else{let e=this.inlines.pop();this.inlines.push({...e,end:this.out.length})}}return super.markString(e,t,r,n)}normalizeInline(e){let{start:t,end:r}=e;for(;this.out.charAt(t).match(/\s/);)t++;return{...e,start:t}}}let YW=$_.create({name:"markdownHTMLMark",addStorage:()=>({markdown:{serialize:{open(e,t){var r,n;return this.editor.storage.markdown.options.html?null!==(r=null===(n=YU(t))||void 0===n?void 0:n[0])&&void 0!==r?r:"":(console.warn(`Tiptap Markdown: "${t.type.name}" mark is only available in html mode`),"")},close(e,t){var r,n;return this.editor.storage.markdown.options.html&&null!==(r=null===(n=YU(t))||void 0===n?void 0:n[1])&&void 0!==r?r:""}},parse:{}}})});function YU(e){let t=e.type.schema,r=t.text(" ",[e]),n=$O(PM.from(r),t).match(/^(<.*?>) (<\/.*?>)$/);return n?[n[1],n[2]]:null}function YG(e){let t=`<body>${e}</body>`;return new window.DOMParser().parseFromString(t,"text/html").body}let YX=Bk.create({name:"markdownHTMLNode",addStorage:()=>({markdown:{serialize(e,t,r){this.editor.storage.markdown.options.html?e.write(function(e,t){let r=e.type.schema,n=$O(PM.from(e),r);return e.isBlock&&(t instanceof PM||t.type.name===r.topNodeType.name)?function(e){let t=YG(e).firstElementChild;return t.innerHTML=t.innerHTML.trim()?`
${t.innerHTML}
`:`
`,t.outerHTML}(n):n}(t,r)):(console.warn(`Tiptap Markdown: "${t.type.name}" node is only available in html mode`),e.write(`[${t.type.name}]`)),t.isBlock&&e.closeBlock(t)},parse:{}}})}),YY=Bk.create({name:"blockquote"}).extend({addStorage:()=>({markdown:{serialize:YN.nodes.blockquote,parse:{}}})}),YZ=Bk.create({name:"bulletList"}).extend({addStorage:()=>({markdown:{serialize(e,t){return e.renderList(t,"  ",()=>(this.editor.storage.markdown.options.bulletListMarker||"-")+" ")},parse:{}}})}),YJ=Bk.create({name:"codeBlock"}).extend({addStorage:()=>({markdown:{serialize(e,t){e.write("```"+(t.attrs.language||"")+`
`),e.text(t.textContent,!1),e.ensureNewLine(),e.write("```"),e.closeBlock(t)},parse:{setup(e){var t;e.set({langPrefix:null!==(t=this.options.languageClassPrefix)&&void 0!==t?t:"language-"})},updateDOM(e){e.innerHTML=e.innerHTML.replace(/\n<\/code><\/pre>/g,"</code></pre>")}}}})}),YK=Bk.create({name:"hardBreak"}).extend({addStorage:()=>({markdown:{serialize(e,t,r,n){for(let i=n+1;i<r.childCount;i++)if(r.child(i).type!=t.type){e.write(e.inTable?YX.storage.markdown.serialize.call(this,e,t,r):`\\
`);return}},parse:{}}})}),Y0=Bk.create({name:"heading"}).extend({addStorage:()=>({markdown:{serialize:YN.nodes.heading,parse:{}}})}),Y1=Bk.create({name:"horizontalRule"}).extend({addStorage:()=>({markdown:{serialize:YN.nodes.horizontal_rule,parse:{}}})}),Y2=Bk.create({name:"image"}).extend({addStorage:()=>({markdown:{serialize:YN.nodes.image,parse:{}}})}),Y4=Bk.create({name:"listItem"}).extend({addStorage:()=>({markdown:{serialize:YN.nodes.list_item,parse:{}}})}),Y5=Bk.create({name:"orderedList"}).extend({addStorage:()=>({markdown:{serialize(e,t,r,n){let i=t.attrs.start||1,s=String(i+t.childCount-1).length,o=e.repeat(" ",s+2),a=function(e,t,r){let n=0;for(;r-n>0&&t.child(r-n-1).type.name===e.type.name;n++);return n}(t,r,n)%2?") ":". ";e.renderList(t,o,t=>{let r=String(i+t);return e.repeat(" ",s-r.length)+r+a})},parse:{}}})}),Y3=Bk.create({name:"paragraph"}).extend({addStorage:()=>({markdown:{serialize:YN.nodes.paragraph,parse:{}}})});function Y6(e){var t,r;return null!==(t=null==e||null===(r=e.content)||void 0===r?void 0:r.content)&&void 0!==t?t:[]}let Y7=Bk.create({name:"table"}).extend({addStorage:()=>({markdown:{serialize(e,t,r){if(!function(e){let t=Y6(e),r=t[0],n=t.slice(1);return!(Y6(r).some(e=>"tableHeader"!==e.type.name||Y8(e)||e.childCount>1)||n.some(e=>Y6(e).some(e=>"tableHeader"===e.type.name||Y8(e)||e.childCount>1)))}(t)){YX.storage.markdown.serialize.call(this,e,t,r);return}e.inTable=!0,t.forEach((t,r,n)=>{if(e.write("| "),t.forEach((t,r,n)=>{n&&e.write(" | ");let i=t.firstChild;i.textContent.trim()&&e.renderInline(i)}),e.write(" |"),e.ensureNewLine(),!n){let r=Array.from({length:t.childCount}).map(()=>"---").join(" | ");e.write(`| ${r} |`),e.ensureNewLine()}}),e.closeBlock(t),e.inTable=!1},parse:{}}})});function Y8(e){return e.attrs.colspan>1||e.attrs.rowspan>1}let Y9=Bk.create({name:"taskItem"}).extend({addStorage:()=>({markdown:{serialize(e,t){let r=t.attrs.checked?"[x]":"[ ]";e.write(`${r} `),e.renderContent(t)},parse:{updateDOM(e){[...e.querySelectorAll(".task-list-item")].forEach(e=>{let t=e.querySelector("input");e.setAttribute("data-type","taskItem"),t&&(e.setAttribute("data-checked",t.checked),t.remove())})}}}})}),Ze=Bk.create({name:"taskList"}).extend({addStorage:()=>({markdown:{serialize:YZ.storage.markdown.serialize,parse:{setup(e){e.use(Yz)},updateDOM(e){[...e.querySelectorAll(".contains-task-list")].forEach(e=>{e.setAttribute("data-type","taskList")})}}}})}),Zt=Bk.create({name:"text"}).extend({addStorage:()=>({markdown:{serialize(e,t){var r;e.text(null==(r=t.text)?void 0:r.replace(/</g,"&lt;").replace(/>/g,"&gt;"))},parse:{}}})}),Zr=$_.create({name:"bold"}).extend({addStorage:()=>({markdown:{serialize:YN.marks.strong,parse:{}}})}),Zn=$_.create({name:"code"}).extend({addStorage:()=>({markdown:{serialize:YN.marks.code,parse:{}}})}),Zi=$_.create({name:"italic"}).extend({addStorage:()=>({markdown:{serialize:YN.marks.em,parse:{}}})}),Zs=[YY,YZ,YJ,YK,Y0,Y1,YX,Y2,Y4,Y5,Y3,Y7,Y9,Ze,Zt,Zr,Zn,YW,Zi,$_.create({name:"link"}).extend({addStorage:()=>({markdown:{serialize:YN.marks.link,parse:{}}})}),$_.create({name:"strike"}).extend({addStorage:()=>({markdown:{serialize:{open:"~~",close:"~~",expelEnclosingWhitespace:!0},parse:{}}})})];function Zo(e){var t,r;let n=null===(t=e.storage)||void 0===t?void 0:t.markdown,i=null===(r=Zs.find(t=>t.name===e.name))||void 0===r?void 0:r.storage.markdown;return n||i?{...i,...n}:null}class Za{constructor(e){Y$(this,"editor",null),this.editor=e}serialize(e){let t=new YH(this.nodes,this.marks,{hardBreakNodeName:YK.name});return t.renderContent(e),t.out}get nodes(){var e;return{...Object.fromEntries(Object.keys(this.editor.schema.nodes).map(e=>[e,this.serializeNode(YX)])),...Object.fromEntries(null!==(e=this.editor.extensionManager.extensions.filter(e=>"node"===e.type&&this.serializeNode(e)).map(e=>[e.name,this.serializeNode(e)]))&&void 0!==e?e:[])}}get marks(){var e;return{...Object.fromEntries(Object.keys(this.editor.schema.marks).map(e=>[e,this.serializeMark(YW)])),...Object.fromEntries(null!==(e=this.editor.extensionManager.extensions.filter(e=>"mark"===e.type&&this.serializeMark(e)).map(e=>[e.name,this.serializeMark(e)]))&&void 0!==e?e:[])}}serializeNode(e){var t;return null===(t=Zo(e))||void 0===t||null===(t=t.serialize)||void 0===t?void 0:t.bind({editor:this.editor,options:e.options})}serializeMark(e){var t;let r=null===(t=Zo(e))||void 0===t?void 0:t.serialize;return r?{...r,open:"function"==typeof r.open?r.open.bind({editor:this.editor,options:e.options}):r.open,close:"function"==typeof r.close?r.close.bind({editor:this.editor,options:e.options}):r.close}:null}}class Zl{constructor(e,t){Y$(this,"editor",null),Y$(this,"md",null);let{html:r,linkify:n,breaks:i}=t;this.editor=e,this.md=this.withPatchedRenderer(Yw({html:r,linkify:n,breaks:i}))}parse(e){let{inline:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){this.editor.extensionManager.extensions.forEach(e=>{var t;return null===(t=Zo(e))||void 0===t||null===(t=t.parse)||void 0===t||null===(t=t.setup)||void 0===t?void 0:t.call({editor:this.editor,options:e.options},this.md)});let r=YG(this.md.render(e));return this.editor.extensionManager.extensions.forEach(e=>{var t;return null===(t=Zo(e))||void 0===t||null===(t=t.parse)||void 0===t||null===(t=t.updateDOM)||void 0===t?void 0:t.call({editor:this.editor,options:e.options},r)}),this.normalizeDOM(r,{inline:t,content:e}),r.innerHTML}return e}normalizeDOM(e,t){let{inline:r,content:n}=t;return this.normalizeBlocks(e),e.querySelectorAll("*").forEach(e=>{var t;(null===(t=e.nextSibling)||void 0===t?void 0:t.nodeType)!==Node.TEXT_NODE||e.closest("pre")||(e.nextSibling.textContent=e.nextSibling.textContent.replace(/^\n/,""))}),r&&this.normalizeInline(e,n),e}normalizeBlocks(e){let t=Object.values(this.editor.schema.nodes).filter(e=>e.isBlock).map(e=>{var t;return null===(t=e.spec.parseDOM)||void 0===t?void 0:t.map(e=>e.tag)}).flat().filter(Boolean).join(",");t&&[...e.querySelectorAll(t)].forEach(e=>{e.parentElement.matches("p")&&function(e){let t=e.parentElement,r=t.cloneNode();for(;t.firstChild&&t.firstChild!==e;)r.appendChild(t.firstChild);r.childNodes.length>0&&t.parentElement.insertBefore(r,t),t.parentElement.insertBefore(e,t),0===t.childNodes.length&&t.remove()}(e)})}normalizeInline(e,t){var r,n,i,s,o;if(null!==(r=e.firstElementChild)&&void 0!==r&&r.matches("p")){let r=e.firstElementChild,{nextElementSibling:a}=r,l=null!==(n=null===(i=t.match(/^\s+/))||void 0===i?void 0:i[0])&&void 0!==n?n:"",c=a?"":null!==(s=null===(o=t.match(/\s+$/))||void 0===o?void 0:o[0])&&void 0!==s?s:"";if(t.match(/^\n\n/)){r.innerHTML=`${r.innerHTML}${c}`;return}(function(e){let t=e.parentNode;for(;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)})(r),e.innerHTML=`${l}${e.innerHTML}${c}`}}withPatchedRenderer(e){let t=e=>function(){let t=e(...arguments);return t===`
`?t:t[t.length-1]===`
`?t.slice(0,-1):t};return e.renderer.rules.hardbreak=t(e.renderer.rules.hardbreak),e.renderer.rules.softbreak=t(e.renderer.rules.softbreak),e.renderer.rules.fence=t(e.renderer.rules.fence),e.renderer.rules.code_block=t(e.renderer.rules.code_block),e.renderer.renderToken=t(e.renderer.renderToken.bind(e.renderer)),e}}let Zc=$z.create({name:"markdownClipboard",addOptions:()=>({transformPastedText:!1,transformCopiedText:!1}),addProseMirrorPlugins(){return[new zo({key:new zc("markdownClipboard"),props:{clipboardTextParser:(e,t,r)=>{if(r||!this.options.transformPastedText)return null;let n=this.editor.storage.markdown.parser.parse(e,{inline:!0});return Ie.fromSchema(this.editor.schema).parseSlice(YG(n),{preserveWhitespace:!0,context:t})},clipboardTextSerializer:e=>this.options.transformCopiedText?this.editor.storage.markdown.serializer.serialize(e.content):null}})]}}),Zh=$z.create({name:"markdown",priority:50,addOptions:()=>({html:!0,tightLists:!0,tightListClass:"tight",bulletListMarker:"-",linkify:!1,breaks:!1,transformPastedText:!1,transformCopiedText:!1}),addCommands(){let e=Bm.Commands.config.addCommands();return{setContent:(t,r,n)=>i=>e.setContent(i.editor.storage.markdown.parser.parse(t),r,n)(i),insertContentAt:(t,r,n)=>i=>e.insertContentAt(t,i.editor.storage.markdown.parser.parse(r,{inline:!0}),n)(i)}},onBeforeCreate(){this.editor.storage.markdown={options:{...this.options},parser:new Zl(this.editor,this.options),serializer:new Za(this.editor),getMarkdown:()=>this.editor.storage.markdown.serializer.serialize(this.editor.state.doc)},this.editor.options.initialContent=this.editor.options.content,this.editor.options.content=this.editor.storage.markdown.parser.parse(this.editor.options.content)},onCreate(){this.editor.options.content=this.editor.options.initialContent,delete this.editor.options.initialContent},addStorage:()=>({}),addExtensions(){return[YB.configure({tight:this.options.tightLists,tightClass:this.options.tightListClass}),Zc.configure({transformPastedText:this.options.transformPastedText,transformCopiedText:this.options.transformCopiedText})]}}),Zu=$_.create({name:"comment",addOptions:()=>({HTMLAttributes:{},onCommentActivated:()=>{}}),addAttributes:()=>({commentId:{default:null,parseHTML:e=>e.getAttribute("data-comment-id"),renderHTML:e=>({"data-comment-id":e.commentId})}}),parseHTML:()=>[{tag:"span[data-comment-id]",getAttrs:e=>{var t;return!!(null!==(t=e.getAttribute("data-comment-id"))&&void 0!==t&&t.trim())&&null}}],renderHTML({HTMLAttributes:e}){return["span",$m(this.options.HTMLAttributes,e),0]},onSelectionUpdate(){let{$from:e}=this.editor.state.selection,t=e.marks();if(!t.length){this.storage.activeCommentId=null,this.options.onCommentActivated(this.storage.activeCommentId);return}let r=this.editor.schema.marks.comment,n=t.find(e=>e.type===r);this.storage.activeCommentId=(null==n?void 0:n.attrs.commentId)||null,this.options.onCommentActivated(this.storage.activeCommentId)},addStorage:()=>({activeCommentId:null}),addCommands:()=>({setComment:e=>({commands:t})=>{if(!e)return!1;t.setMark("comment",{commentId:e})},unsetComment:e=>({tr:t,dispatch:r})=>{if(!e)return!1;let n=[];return t.doc.descendants((t,r)=>{let i=t.marks.find(t=>"comment"===t.type.name&&t.attrs.commentId===e);i&&n.push({mark:i,range:{from:r,to:r+t.nodeSize}})}),n.forEach(({mark:e,range:r})=>{t.removeMark(r.from,r.to,e)}),null==r?void 0:r(t)}})});function Zd({node:e}){let{multiTables:t,tables:r}=(0,A.useContext)(Ws),n=t[e.attrs.id],i=Array.isArray(null==n?void 0:n.tableIds)?n.tableIds:[],[s,o]=(0,A.useState)(i.length>0?i[0]:null),a=(0,A.useMemo)(()=>{let e={};return i.forEach(t=>{let{columns:n,data:i,attributes:s}=r[t]||{};e[t]=[{name:"Table",content:T.j.jsx(T.T,{columns:n,rows:i,columnHeaderClassNames:"py-2",skipColumns:["index"]})},{name:"Chart",content:T.j.jsx(ks,{children:T.j.jsx(RG,{rows:i,columns:n,initialQuestion:null==s?void 0:s.generated_qn,initialOptionsExpanded:!1})})},s.sql?{name:"SQL",content:T.j.jsx("pre",{className:"whitespace-pre-wrap px-2 py-4 bg-gray-800",children:T.j.jsx("code",{children:s.sql})})}:null]}),e},[r]);return T.j.jsxs(BG,{as:"div",className:"react-component react-multitable-container not-prose lg:-mx-40 my-10","data-id":e.attrs.id,children:[i&&i.length>1&&T.j.jsx("div",{className:"table-selection flex flex-row gap-2 w-100 overflow-auto mb-4",children:i.map(e=>{var t,n;return T.j.jsx("div",{className:`p-2 bg-gray-200 border border-gray-300 rounded-full cursor-pointer whitespace-nowrap text-xs ${s===e?"bg-gray-600 border-transparent text-white":"text-gray-500 hover:bg-gray-300"}`,onClick:()=>o(e),children:ZC[null==(t=r[e])?void 0:t.type]||(null==(n=r[e])?void 0:n.type)||"Table"},e)})}),s&&a[s]&&T.j.jsx(T.c,{tabs:a[s].filter(Boolean),size:"small",contentClassNames:"border dark:border-gray-600",defaultSelected:s})]})}let Zf=Bk.create({name:"oracle-multi-table",group:"block",content:"text*",addAttributes:()=>({id:{default:null,isRequired:!0}}),parseHTML:()=>[{tag:"oracle-multi-table"}],renderHTML:({HTMLAttributes:e})=>["oracle-multi-table",$m(e)],addNodeView:()=>BZ(Zd)});function Zp({node:e}){let{apiEndpoint:t,images:r,projectName:n,reportId:i,token:s}=(0,A.useContext)(Ws),{src:o,alt:a}=r[e.attrs.id]||{},[l,c]=(0,A.useState)(null),[h,u]=(0,A.useState)(null);return(0,A.useEffect)(()=>{(async function(){try{let e=await Wm(t,i,n,s,o);u(null),c("data:image/png;base64,"+e)}catch(e){console.error(e),u("Error fetching image")}})()},[]),T.j.jsx(BG,{className:"react-component not-prose",children:h?T.j.jsx("div",{className:"bg-rose-100 text-red text-center rounded-md p-2",children:h}):l?T.j.jsx("img",{src:l,alt:a}):T.j.jsx(T.d,{})})}let Zm=Bk.create({name:"oracle-image",group:"block",addAttributes:()=>({id:{default:null,isRequired:!0}}),parseHTML:()=>[{tag:"oracle-image"}],renderHTML:({HTMLAttributes:e})=>["oracle-image",$m(e)],addNodeView:()=>BZ(Zp)});function Zg({comment:e,onUpdate:t,onDelete:r,anchorEl:n,isEditing:i}){let s=(0,A.useRef)(null),o=(0,A.useRef)(null);(0,A.useEffect)(()=>{if(o.current&&n){let e=n.getBoundingClientRect(),t=o.current;t.style.position="fixed",t.style.left=`${e.left+e.width/2-t.offsetWidth/2}px`,t.style.top=`${e.top-t.offsetHeight-8}px`,e.top<t.offsetHeight+16&&(t.style.top=`${e.bottom+8}px`)}},[n]);let[a,l]=(0,A.useState)(!1);return(0,A.useEffect)(()=>{i&&s.current&&s.current.focus()},[i]),n?T.j.jsxs("div",{ref:o,className:"fixed z-50 p-2 border rounded-lg bg-white shadow-custom comment-popover not-prose border-gray-300 overflow-hidden dark:bg-gray-700 dark:border-gray-600 w-80",onClick:e=>e.stopPropagation(),children:[T.j.jsxs("div",{className:"text-xs flex flex-row mb-1 items-center",children:[T.j.jsx("p",{className:"text-gray-400",children:i?a?"Commenting":"Posted":"Click to edit comment"}),T.j.jsx("div",{className:"flex gap-2 ml-auto",children:i&&T.j.jsxs(T.j.Fragment,{children:[T.j.jsx("button",{onClick:()=>{if(s.current){let r={...e,content:s.current.value};null==t||t(r),s.current.blur()}},className:`cursor-pointer ${a?"text-blue-500 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300":"text-gray-400 hover:text-gray-500 dark:text-gray-500 dark:hover:text-gray-400"}`,children:"Submit"}),T.j.jsx("div",{className:"text-gray-400 hover:text-rose-500 dark:hover:text-rose-300 cursor-pointer",onClick:r,children:"Delete"})]})})]}),T.j.jsx(T.U,{ref:s,defaultValue:e.content,defaultRows:2,textAreaHtmlProps:{onBlur:r=>{l(!1);let n={...e,content:r.target.value};null==t||t(n)},onFocus:()=>{l(!0)},onKeyDown:r=>{if("Enter"===r.key&&!r.shiftKey){r.preventDefault();let n={...e,content:r.currentTarget.value};null==t||t(n),r.currentTarget.blur()}},onClick:e=>e.stopPropagation()},textAreaClassNames:(0,T.t)("w-full bg-transparent text-sm border-none focus:outline-none focus:ring-1 focus:ring-blue-500 rounded px-1 resize-none overflow-hidden dark:bg-gray-800 dark:text-gray-400 dark:border-none",i?"cursor-text dark:text-gray-200":"cursor-default text-gray-500 dark:text-gray-400"),disabled:!i,autoResize:!0,placeholder:"Type your comment here"})]}):null}function Zy({editor:e,commentManager:t}){let r=(0,A.useSyncExternalStore)(t.subscribeToCommentUpdates,t.getComments),{interactionState:n,setInteractionState:i}=function(e){let[t,r]=(0,A.useState)({hoveredId:null,hoveredElement:null,editingId:null,relativeTop:null,pmPos:null,pmNode:null});return(0,A.useEffect)(()=>{if(!e)return;let n=n=>{let i=n.target,s=i.getAttribute("data-comment-id"),o=i.classList.contains("oracle-report-tiptap"),a=i.closest(".oracle-comment-handler"),l=i.closest(".oracle-report-tiptap");if(!t.editingId&&!o&&!a&&l){let t=e.view.dom.getBoundingClientRect().top,o=i.getBoundingClientRect().top-t,a=e.view.posAtCoords({left:n.clientX,top:n.clientY});if(!a)return;let l=e.view.nodeDOM(a.inside);r(e=>({...e,hoveredId:s,hoveredElement:i,relativeTop:o,pmPos:a,pmNode:l}))}},i=e=>{let t=e.target,n=t.getAttribute("data-comment-id");"svg"===t.tagName||"path"===t.tagName||t.closest(".comment-icon")||n&&(e.stopPropagation(),r(e=>({...e,editingId:n,hoveredId:n,hoveredElement:t})))};return e.view.dom.addEventListener("mousemove",n,!0),e.view.dom.addEventListener("click",i,!0),()=>{e.view.dom.removeEventListener("mousemove",n,!0),e.view.dom.removeEventListener("click",i,!0)}},[e,t.editingId]),{interactionState:t,setInteractionState:r}}(e);(0,A.useEffect)(()=>{let e=e=>{let t=e.target;"svg"===t.tagName||"path"===t.tagName||t.closest(".comment-icon")||t.closest(".comment-popover")||t.getAttribute("data-comment-id")||i(()=>({hoveredId:null,hoveredElement:null,editingId:null,relativeTop:null,pmPos:null,pmNode:null}))};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[i]),(0,A.useEffect)(()=>(e.on("commentCreated",n=>{t.updateComments(e,[...r,n]),i(e=>({...e,editingId:n.id,hoveredElement:document.querySelector(`[data-comment-id="${n.id}"]`)}))}),()=>{e.off("commentCreated")}),[e,r,t,i]);let s=r.find(e=>e.id===n.hoveredId||e.id===n.editingId);return T.j.jsxs(BG,{className:"h-full w-0 absolute top-0 right-0 oracle-comment-handler",children:[s&&T.j.jsx(Zg,{onDelete:()=>{e.commands.unsetComment(s.id);let n=r.filter(e=>e.id!==s.id);t.updateComments(e,n),i(e=>({...e,editingId:null}))},comment:s,anchorEl:n.hoveredElement,isEditing:n.editingId===s.id,onUpdate:n=>{t.updateComments(e,r.map(e=>e.id===n.id?n:e))}}),T.j.jsx("div",{className:"comment-ramp h-full absolute -right-2 top-0",children:n.hoveredElement&&!n.editingId&&!n.hoveredId&&T.j.jsx(Y,{className:"comment-icon absolute w-5 left-2 cursor-pointer text-gray-400 hover:scale-110 hover:text-gray-500 transition-none",style:{top:`${n.relativeTop}px`},onClick:()=>{n.pmPos&&n.pmNode&&e.chain().setNodeSelection(n.pmPos.inside).addComment({id:(0,M.g)(),content:"",user:localStorage.getItem("user")}).run()}})})]})}function Zb(){let{editor:e}=BV(),{commentManager:t}=(0,A.useContext)(Ws);return e&&t?T.j.jsx(Zy,{editor:e,commentManager:t}):null}let Zv=Bk.create({name:"oracle-comment-handler",group:"block",parseHTML:()=>[{tag:"oracle-comment-handler"}],renderHTML:({HTMLAttributes:e})=>["oracle-comment-handler",$m(e)],addNodeView:()=>BZ(Zb),addOptions:()=>({HTMLAttributes:{class:"oracle-comment-handler"}}),addStorage:()=>({comments:[]}),addCommands:()=>({addComment:e=>({tr:t,chain:r})=>{let{$from:n,$to:i}=t.selection,s=t.mapping.map(n.pos);if(s!==t.mapping.map(i.pos))return r().setComment(e.id).run(),r().setTextSelection(s).command(({editor:t})=>(t.emit("commentCreated",e),!0)).run(),!0}})}),Zx=[UO,Gp.configure({resizable:!0}),Gm,Gg,Gy,Zv,Zu.configure({HTMLAttributes:{class:"oracle-report-comment"}}),Zh],Zw=[UO,Gp.configure({resizable:!0}),Gm,Gg,Gy,Zf,Zm,Zu.configure({HTMLAttributes:{class:"oracle-report-comment"}}),Zh],Zk=TF(async(e,t,r,n,i,s)=>{if(!(!r||!n))try{await Promise.all([Wy(e,r,n,i,s),Wp(e,r,n,i,null==t?void 0:t.storage.markdown.getMarkdown())])}catch(e){console.error("Error updating comments:",e)}},500),ZO=(e,t,r,n,i,s)=>{t.storage["oracle-comment-handler"].comments=s,Zk(e,t,r,n,i,s)},ZS=({apiEndpoint:e,reportId:t,projectName:r,token:n,initialComments:i})=>{let s=i,o=[];return{subscribeToCommentUpdates:e=>(o.push(e),function(){o=o.filter(t=>t!==e)}),getComments:()=>s,updateComments:(i,a)=>{ZO(e,i,t,r,n,s=a),o.forEach(e=>e())}}},ZC={table_csv:"Aggregated data",fetched_table_csv:"Fetched data",anomalies_csv:"Anomalies data"},ZT=(e,t,r)=>{let n=new Blob([e],{type:r}),i=URL.createObjectURL(n),s=document.createElement("a");s.href=i,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)},ZA=async(e,t,r,n,i,s)=>{try{null==s||s(!0);let e=await fetch(`${r}/oracle/export_podcast`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({db_name:n,report_id:parseInt(t),token:i})});if(!e.ok)throw Error(`Error exporting podcast: ${e.statusText}`);let o=await e.json();ZT(o.transcript,`podcast-transcript-${t}.txt`,"text/plain")}catch(e){throw console.error("Error exporting podcast:",e),e}finally{null==s||s(!1)}},ZM=(e,t="report.md")=>{ZT(Wd(e),t,"text/markdown")},ZE=async(e,t="report.pdf")=>{let r=Wd(e),n=await Os.parse(r),i=document.createElement("div");i.innerHTML=n,i.style.position="absolute",i.style.left="-9999px",i.style.top="-9999px",i.style.width="800px",i.classList.add("prose","prose-base"),document.body.appendChild(i);try{let e=window.open("","_blank");if(!e)throw Error("Could not open print window");let r=e.document;r.write(`
      <html>
        <head>
          <title>${t}</title>
          <style>
            body {
              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
              line-height: 1.6;
              color: #333;
              max-width: 800px;
              margin: 0 auto;
              padding: 20px;
            }
            h1, h2, h3, h4, h5, h6 {
              margin-top: 1.5em;
              margin-bottom: 0.5em;
              font-weight: 600;
            }
            h1 { font-size: 2em; }
            h2 { font-size: 1.5em; }
            h3 { font-size: 1.25em; }
            p { margin: 1em 0; }
            ul, ol { padding-left: 2em; }
            blockquote {
              border-left: 4px solid #ddd;
              padding-left: 1em;
              color: #666;
              margin: 1em 0;
            }
            code {
              font-family: Menlo, Monaco, 'Courier New', monospace;
              background-color: #f5f5f5;
              padding: 0.2em 0.4em;
              border-radius: 3px;
              font-size: 0.9em;
            }
            pre {
              background-color: #f5f5f5;
              padding: 1em;
              border-radius: 5px;
              overflow-x: auto;
            }
            pre code {
              background-color: transparent;
              padding: 0;
            }
            table {
              border-collapse: collapse;
              width: 100%;
              margin: 1em 0;
            }
            th, td {
              text-align: left;
              padding: 8px;
              border-bottom: 1px solid #ddd;
            }
            th {
              background-color: #f5f5f5;
              font-weight: 600;
            }
            img {
              max-width: 100%;
              height: auto;
            }
            a {
              color: #0366d6;
              text-decoration: none;
            }
            /* Print-specific styles */
            @media print {
              /* General print settings */
              body {
                padding: 0;
                margin: 0;
              }
              
              /* Hide URL, date, and page numbers */
              @page {
                margin: 1cm;
                size: auto;
              }
              
              /* Chrome, Safari, Edge */
              @page {
                size: auto;
                margin: 5mm 10mm;
                margin-header: 0;
                margin-footer: 0;
              }
              
              /* Hide header and footer completely */
              html {
                -webkit-print-color-adjust: exact !important;
              }
              
              /* Hide any browser-specific headers and footers */
              body {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
              }
            }
          </style>
        </head>
        <body>
          ${n}
          
          <script>
            // This script runs in the print window to assist with print settings
            document.addEventListener('DOMContentLoaded', function() {
              // Add a small delay for browsers to process the content
              setTimeout(function() {
                // Some additional print settings via script
                const style = document.createElement('style');
                style.textContent = 
                  "@media print {" +
                    "/* More specific fixes for different browsers */" +
                    "body::before, body::after { display: none !important; }" +
                    "header, footer { display: none !important; }" +
                    
                    "/* Ensure our content is visible */" +
                    "body { -webkit-print-color-adjust: exact !important; }" +
                  "}";
                document.head.appendChild(style);
              }, 100);
            });
          </script>
        </body>
      </html>
    `),r.close(),setTimeout(()=>{e.matchMedia&&e.matchMedia("print").addEventListener("change",function(t){t.matches||setTimeout(()=>e.close(),100)}),e.print()},500)}finally{document.body.removeChild(i)}},ZN=(e=new Date)=>e.toISOString().replace("Z","");function Z_({onClose:e}){let{commentManager:t}=(0,A.useContext)(Ws),r=(0,A.useSyncExternalStore)((null==t?void 0:t.subscribeToCommentUpdates)||(()=>()=>{}),(null==t?void 0:t.getComments)||(()=>[]));return T.j.jsxs("div",{className:"w-64 h-full flex flex-col",children:[T.j.jsx("div",{className:"h-[3.5rem] invisible"}),T.j.jsxs("div",{className:"flex-1 border-l border-gray-200 dark:border-gray-700 overflow-y-auto bg-white dark:bg-gray-800 shadow-lg",children:[T.j.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:T.j.jsxs("div",{className:"flex items-center justify-between",children:[T.j.jsxs("div",{className:"flex items-center gap-2",children:[T.j.jsx(Z,{className:"w-5 h-5"}),T.j.jsx("h2",{className:"text-lg font-semibold",children:"Comments"}),T.j.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",r.length,")"]})]}),T.j.jsx(T.D,{variant:"secondary",onClick:e,className:"hover:bg-gray-100 dark:hover:bg-gray-700 p-1",children:T.j.jsx(T.X,{className:"w-5 h-5"})})]})}),T.j.jsx("div",{className:"p-4",children:0===r.length?T.j.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No comments yet"}):T.j.jsx("div",{className:"space-y-4",children:r.map(e=>T.j.jsxs("div",{className:"p-3 rounded-lg bg-gray-50 dark:bg-gray-700",children:[e.user&&T.j.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e.user}),T.j.jsx("div",{className:(0,T.t)("text-sm text-gray-600 dark:text-gray-300",!e.content&&"text-gray-300"),children:e.content||"Blank comment"})]},e.id))})})]})]})}let Zj=({onDelete:e=()=>{}})=>{let[t,r]=(0,A.useState)(!1),[n,i]=(0,A.useState)(!1),s=(0,A.useContext)(T.a),{apiEndpoint:o,reportId:a,projectName:l,token:c,commentManager:h,isLoading:u,setIsLoading:d}=(0,A.useContext)(Ws),f=(0,A.useRef)(null),[p,m]=(0,A.useState)(null),g=(0,A.useSyncExternalStore)((null==h?void 0:h.subscribeToCommentUpdates)||(()=>()=>{}),(null==h?void 0:h.getComments)||(()=>[])),{editor:y}=BV(),b=(0,A.useRef)({});(0,A.useEffect)(()=>{if(g&&g.length>0){let e={};g.forEach(t=>{e[t.id]={id:t.id,commentContent:t.content,user:t.user,htmlSnippet:"",commentRelevantText:t.content}}),b.current=e}},[g]);let v=null==p?void 0:p.startsWith("Revision in progress"),x=()=>{b.current={};let e=null==y?void 0:y.state.doc;e&&(e.nodesBetween(0,e.content.size,(e,t,r)=>{var n;for(let r of e.marks)if("comment"===r.type.name){let i=t+e.textContent.length,s=r.attrs.commentId,o=g.find(e=>e.id===s);if(!o)continue;let a=!1,l=0,c=e,h=t;for(;!a&&l<10&&c;){y.commands.setNodeSelection(h);let e=y.state.selection.$from.parent;"doc"===e.type.name?a=!0:(c=e,h=null==(n=y.state.selection)?void 0:n.from),y.commands.selectParentNode(),l++}b.current[s]?(b.current[s].topParent=c,b.current[s].topParentPos=h,t<b.current[s].startPos&&(b.current[s].startPos=t),i>b.current[s].endPos&&(b.current[s].endPos=i)):b.current[s]={id:s,topParent:c,topParentPos:h,htmlSnippet:"",commentContent:o.content,commentRelevantText:"",startPos:t,endPos:i,user:o.user}}return!0}),Object.values(b.current).forEach(e=>{let t="",r=(t="text"===e.topParent.type.name?"<span class='oracle-report-comment' data-comment-id='temp'>"+e.topParent.textContent+"</span>":"recommendationTitle"===e.topParent.type.name?"## <span class='oracle-report-comment' data-comment-id='temp'>"+e.topParent.textContent+"</span>":'<span class="oracle-report-comment" data-comment-id="temp">'+y.storage.markdown.serializer.serialize(e.topParent)+"</span>").replace(/<span[^>]*>/g,"").replace(/<\/span>/g,"");e.commentRelevantText=r,e.htmlSnippet=t}))},[w,k]=(0,A.useState)(!1);if(!y)return null;let[O,S]=(0,A.useState)(!1),C=(0,A.useRef)(null);return(0,A.useEffect)(()=>{let e=e=>{C.current&&!C.current.contains(e.target)&&S(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),T.j.jsxs("div",{className:"flex flex-col",children:[u&&T.j.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:T.j.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-5 flex flex-col items-center shadow-lg",children:[T.j.jsx("div",{className:"w-12 h-12 border-t-4 border-blue-500 border-solid rounded-full animate-spin mb-4"}),T.j.jsx("p",{className:"text-gray-800 dark:text-gray-200 font-medium",children:"Generating podcast transcript..."}),T.j.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-2",children:"This may take a minute, please wait."})]})}),T.j.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b dark:border-gray-700",children:[T.j.jsx(T.D,{variant:"danger",onClick:()=>k(!0),children:"Delete"}),T.j.jsxs("div",{className:"relative flex gap-2",children:[T.j.jsxs("div",{className:"relative",children:[T.j.jsx(T.D,{variant:"secondary",onClick:()=>{x(),i(!n)},className:n?"bg-gray-100 dark:bg-gray-700":"",children:T.j.jsx(Z,{className:"w-5 h-5"})}),g.length>0&&T.j.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center",children:g.length})]}),T.j.jsxs("div",{className:"relative",ref:C,children:[T.j.jsx(T.D,{variant:"secondary",onClick:()=>S(!O),className:O?"bg-gray-100 dark:bg-gray-700":"",children:T.j.jsx(T.ac,{className:"w-5 h-5"})}),O&&T.j.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg z-50 border dark:border-gray-700",children:T.j.jsxs("div",{className:"py-1",children:[T.j.jsxs("button",{onClick:()=>{y&&(ZM(y.storage.markdown.getMarkdown(),`report-${a}.md`),S(!1))},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center",children:[T.j.jsx(U,{className:"w-4 h-4 mr-2"}),"Export as Markdown"]}),T.j.jsxs("button",{onClick:()=>{y&&(ZE(y.storage.markdown.getMarkdown(),`report-${a}.pdf`),S(!1))},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center",children:[T.j.jsx(U,{className:"w-4 h-4 mr-2"}),"Export as PDF"]}),T.j.jsxs("button",{onClick:()=>{if(y)try{let e=y.storage.markdown.getMarkdown();S(!1),ZA(e,a,o,l,c,d).catch(e=>{s.error("Failed to export podcast. Please try again."),console.error(e)})}catch(e){s.error("Failed to export podcast. Please try again."),console.error(e)}},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center",children:[T.j.jsx(J,{className:"w-4 h-4 mr-2"}),"Export as Podcast"]})]})})]})]}),T.j.jsx(T.e,{open:w,onOk:()=>{e(a,l),k(!1)},onCancel:()=>k(!1),okText:"Yes",okVariant:"danger",children:"Are you sure?"})]}),v&&T.j.jsxs("div",{className:"w-96 my-4 rounded-full border dark:border-none mx-auto bg-gray-50 dark:bg-gray-600 text-sm text-gray-600 dark:text-gray-300 p-4 flex flex-row shadow-md items-center",children:[T.j.jsx(T.af,{className:"min-w-6 mr-2 text-blue-500 dark:text-blue-400"}),T.j.jsx("p",{children:"This report is currently being revised. This page will refresh when the revision completes."})]}),n&&T.j.jsx("div",{className:"fixed right-0 top-0 bottom-0 z-[100]",children:T.j.jsx(Z_,{onClose:()=>i(!1)})}),p&&T.j.jsx("div",{className:`fixed bottom-6 ${n?"right-72":"right-6"} z-[110] transition-all duration-200`,children:T.j.jsx(T.D,{variant:"primary",onClick:()=>{x(),r(!0)},disabled:!p||v,className:"shadow-lg hover:shadow-xl transition-shadow",children:"Submit for revision"})}),T.j.jsx(T.e,{rootClassNames:"w-full z-10",open:t,onCancel:()=>r(!1),onOk:()=>{var e;try{Wb(o,a,l,c,null==(e=f.current)?void 0:e.value,g.map(e=>({relevant_text:e.content,comment_text:e.content}))).then(e=>{r(!1)}).catch(e=>{console.error(e),s.error(e.message)})}catch(e){s.error(e.message)}},title:"Revise report",okText:"Submit",className:"dark:bg-gray-800 dark:text-gray-200",contentClassNames:"overflow-auto",children:T.j.jsxs("div",{className:"flex flex-row flex-wrap gap-4",children:[Object.values(b.current).map((e,t)=>T.j.jsxs("div",{className:"revise-modal-comment-container w-full",children:[T.j.jsx("div",{className:"revise-modal-header",children:"Highlighted text"}),T.j.jsx(BH,{content:e.htmlSnippet,extensions:Zw,immediatelyRender:!1,editable:!1,editorProps:{attributes:{class:"revise-modal-highlight prose prose-sm dark:prose-invert focus:outline-none *:cursor-default"}}}),T.j.jsx("div",{className:"revise-modal-header",children:"Your comment"}),T.j.jsx("textarea",{className:"text-sm revise-modal-comment-text w-full h-full focus:ring-0 border-none outline-none",defaultValue:e.commentContent,placeholder:"Type your comment here",onChange:t=>{b.current[e.id].commentContent=t.target.value,null==h||h.updateComments(y,Object.values(b.current).map(e=>({id:e.id,content:e.commentContent,user:e.user})))}})]},e.id)),T.j.jsxs("div",{className:"w-full revise-modal-comment-container overflow-hidden",children:[T.j.jsx("div",{className:"revise-modal-header",children:"General comments"}),T.j.jsx(T.U,{autoResize:!0,placeholder:"Add general comments here",rootClassNames:"border-none",textAreaClassNames:"rounded-none ring-0",ref:f,textAreaHtmlProps:{resize:"none"}})]})]})})]})}}}]);