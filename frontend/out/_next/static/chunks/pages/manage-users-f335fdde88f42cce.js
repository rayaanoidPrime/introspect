(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[594],{1676:(e,r,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage-users",function(){return s(5633)}])},2563:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});var a=s(385);let t=(e,r)=>{if("http"!==e&&"ws"!==e)throw Error("Protocol not supported");return""!==r?"ws"===e?"".concat((a.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"").replace("http","ws"),"/").concat(r):"".concat(a.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"","/").concat(r):"".concat(a.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"")}},5270:(e,r,s)=>{"use strict";s.d(r,{A:()=>i});var a=s(8017),t=s(4109),d=s(2183),o=s(4790),n=s(6476),l=s(2074);let i=e=>{let{id:r,userType:s,children:i,rootClassNames:c="",contentClassNames:u="max-h-full h-full",containerClassNames:m="flex flex-col md:min-h-screen relative container mx-auto"}=e,[g,x]=(0,t.useState)([]),h=(0,d.useRouter)(),y=e=>{h.push(e)},b=()=>{localStorage.removeItem("defogUser"),localStorage.removeItem("defogToken"),localStorage.removeItem("defogUserType"),y("/log-in")},p=(0,n.usePathname)();return(0,t.useEffect)(()=>{let e=[];x(("ADMIN"==s?[{title:"Admin",href:"#!",children:[{key:"manage-database",title:"Manage Database",href:"/extract-metadata"},{key:"manage-users",title:"Manage Users",href:"/manage-users"},{key:"align-model",title:"Align Model",href:"/align-model"}]},{key:"reports",title:"Reports",href:"/reports"},{key:"logout",classNames:"self-end",title:"Logout",href:"#",onClick:b}]:s?[{key:"reports",title:"Reports",href:"/reports"},{key:"logout",classNames:"self-end",title:"Logout",href:"#",onClick:b}]:[]).map(e=>(e.current=e.href==p,e)).map(e=>(e.children&&(e.children=e.children.map(e=>(e.current=e.href==p,e))),e)))},[s]),(0,a.jsxs)("div",{className:(0,l.QP)(m,c),children:[g.length?(0,a.jsx)(o.jq,{rootClassNames:(0,l.QP)("border-b dark:border-dark-border","bg-white dark:bg-dark-bg-primary","text-primary-text dark:text-dark-text-primary"),items:g.map(e=>({...e,classNames:(0,l.QP)(e.classNames,"hover:bg-gray-100 dark:hover:bg-dark-hover",e.current&&"bg-gray-100 dark:bg-dark-hover")}))}):(0,a.jsx)(a.Fragment,{}),(0,a.jsx)("div",{className:u,children:i})]})}},5633:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>S});var a=s(8017),t=s(4109),d=s(2183),o=s(6921),n=s(5270),l=s(2563),i=s(8239),c=s(3720),u=s(3146),m=s.n(u),g=s(4790);let x=e=>{let{loading:r,getUserDets:s}=e,[d,o]=(0,t.useState)([{username:"",password:"",userType:""}]),[n,u]=(0,t.useState)("username,password,user_type\n"),[x,h]=(0,t.useState)(""),[y,b]=(0,t.useState)(!1),p=(0,t.useContext)(g.oS),f=t.useRef(null);(0,t.useEffect)(()=>{let e=d.filter(e=>e.username&&e.password&&e.userType).map(e=>"".concat(e.username,",").concat(e.password,",").concat(e.userType)).join("\n");u("username,password,user_type\n".concat(e))},[d]);let w=e=>(m().parse(e,{error:e=>{p.error("There was an error parsing the CSV file.")},complete:e=>{o(e.data.map(e=>({username:e.username,password:e.password,userType:e.user_type}))),b(!0),h(""),p.success("CSV file parsed successfully. Please hit 'Add Users' to proceed.")},header:!0,skipEmptyLines:!0}),!1),k=async e=>{e.preventDefault();try{let e=localStorage.getItem("defogToken"),r="username,password,user_type"!==n.trim()?{users_csv:n,token:e}:{gsheets_url:x,token:e},a=await fetch((0,l.A)("http","admin/add_users"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));let t=await a.json();if("success"===t.status)p.success("Users added successfully! Refreshing the user data..."),o([{username:"",password:"",userType:""}]);else throw Error(t.message||"There was an error adding the users.");await s()}catch(e){console.error("Error:",e),p.error(e.message||"There was an error adding the users. Please try again.")}finally{b(!1),u("username,password,user_type\n")}};return(0,a.jsxs)("div",{className:"w-3/4 p-6 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg bg-white dark:bg-gray-800",children:[(0,a.jsxs)("h1",{className:"flex items-center justify-center text-2xl mb-8 dark:text-gray-100",children:[(0,a.jsx)(i.A,{size:24,className:"mr-2 dark:text-blue-400"}),"Add Users via File"]}),(0,a.jsxs)("form",{onSubmit:k,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-lg font-semibold mb-4 dark:text-gray-200",children:"Upload CSV File"}),(0,a.jsxs)("div",{className:"mb-4",children:[!y&&(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Expected columns in the file: username,password,user_type,allowed_dbs. For users that must login via SSO, please set the password column to blank."}),(0,a.jsx)("input",{type:"file",ref:f,accept:".csv",onChange:e=>{let r=e.target.files[0];r&&w(r)},className:"hidden",disabled:y||r}),(0,a.jsxs)("button",{type:"button",onClick:()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.click()},disabled:y||r,className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(c.A,{size:20,className:"mr-2"}),y?"Uploaded":"Upload CSV"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-lg font-semibold mb-4 dark:text-gray-200",children:"Or a paste publicly accessible Google Sheets URL"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Google Sheets URL"}),(0,a.jsx)("input",{type:"text",value:x,onChange:e=>h(e.target.value),className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 dark:bg-gray-700 dark:text-gray-200 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",disabled:r})]})]}),y&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Generated CSV String"}),(0,a.jsx)("textarea",{value:n,readOnly:!0,rows:4,className:"mt-1 block w-full font-mono border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 bg-gray-100 dark:bg-gray-700 dark:text-gray-200 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,a.jsx)("button",{type:"submit",disabled:"username,password,user_type"===n.trim()&&!x||r,className:"w-1/3 mx-auto block px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Users"})]})]})};var h=s(573),y=s(6282),b=s(385);let p=e=>{let{loading:r,getUserDets:s}=e,[d,o]=(0,t.useState)([{username:"",password:"",userType:"",userDb:[]}]),[n,i]=(0,t.useState)("username,password,user_type,allowed_dbs\n"),[c,u]=(0,t.useState)([]),[m,x]=(0,t.useState)([]),p=(0,t.useContext)(g.oS),f=async()=>{let e=localStorage.getItem("defogToken"),r=await fetch((b.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"")+"/get_db_names",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})});if(!r.ok)throw Error("Failed to get api key names - are you sure your network is working?");u((await r.json()).db_names)};(0,t.useEffect)(()=>{f();let e=d.filter(e=>e.username&&e.userType).map(e=>"".concat(e.username,",").concat(e.password||"",",").concat(e.userType,",").concat(e.userDb.join("|"))).join("\n");i("username,password,user_type,allowed_dbs\n".concat(e))},[d]);let w=e=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e),k=e=>{if(!e)return!0;if(e.length<8)return!1;let r=/[A-Z]/.test(e),s=/[a-z]/.test(e),a=/\d/.test(e),t=/[^A-Za-z0-9]/.test(e);return r&&s&&a&&t},j=(e,r,s)=>{let a=[...d];a[e][r]=s,o(a),N(a)},N=e=>{let r=[];return e.forEach((e,s)=>{e.username&&!w(e.username)&&r.push("User ".concat(s+1,": Invalid email format for username")),e.password&&!k(e.password)&&r.push("User ".concat(s+1,": Password must be at least 8 characters with uppercase, lowercase, number, and special character"))}),x(r),0===r.length},v=async e=>{if(e.preventDefault(),!N(d)){p.error("Please fix validation errors before submitting");return}let r=localStorage.getItem("defogToken");try{let e=await fetch((0,l.A)("http","admin/add_users"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({users_csv:n,token:r})}),s=await e.json();"success"===s.status?(p.success(s.message||"Users added successfully! Refreshing the user data..."),o([{username:"",password:"",userType:"",userDb:[]}]),x([])):s.detail&&Array.isArray(s.detail)?(x(s.detail),p.error("There were errors with the submitted users. Please fix them and try again.")):p.error(s.message||"There was an error adding the users. Please try again.")}catch(e){console.error(e),p.error("An unexpected error occurred. Please try again.")}await s()},S=e=>{1===d.length?o([{username:"",password:"",userType:"",userDb:[]}]):o(d.filter((r,s)=>s!==e))};return(0,a.jsxs)("div",{className:"w-3/4 p-6 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg bg-white dark:bg-gray-800",children:[(0,a.jsxs)("h1",{className:"flex items-center justify-center text-2xl mb-8 dark:text-gray-100",children:[(0,a.jsx)(h.A,{size:24,className:"mr-2 dark:text-blue-400"}),"Add Users Manually"]}),m.length>0&&(0,a.jsxs)("div",{className:"mb-6 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[(0,a.jsxs)("div",{className:"flex items-center text-red-600 dark:text-red-400 font-medium mb-2",children:[(0,a.jsx)(y.A,{size:18,className:"mr-2"}),"Please fix the following errors:"]}),(0,a.jsx)("ul",{className:"list-disc list-inside text-sm text-red-600 dark:text-red-400",children:m.map((e,r)=>(0,a.jsx)("li",{children:e},r))})]}),(0,a.jsxs)("form",{onSubmit:v,className:"w-full space-y-6",children:[d.map((e,s)=>(0,a.jsxs)("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-md bg-gray-50 dark:bg-gray-800",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("h3",{className:"text-md font-medium dark:text-gray-200",children:["User ",s+1]}),(0,a.jsx)("button",{type:"button",onClick:()=>S(s),className:"text-red-500 hover:text-red-700 text-sm",disabled:r,children:"Remove"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap -mx-2",children:[(0,a.jsxs)("div",{className:"w-1/2 px-2 mb-4",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Email Address",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"email",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2 dark:bg-gray-700 dark:text-gray-200",value:e.username,onChange:e=>j(s,"username",e.target.value),required:!0,disabled:r,placeholder:"user@example.com"}),e.username&&!w(e.username)&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:"Please enter a valid email address"})]}),(0,a.jsxs)("div",{className:"w-1/2 px-2 mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password (leave blank for SSO users)"}),(0,a.jsx)("input",{type:"password",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2 dark:bg-gray-700 dark:text-gray-200",value:e.password,onChange:e=>j(s,"password",e.target.value),disabled:r}),e.password&&!k(e.password)&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:"Password must be at least 8 characters with uppercase, lowercase, digit, and special character"}),!e.password&&(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"For SSO users, leave this field blank"})]}),(0,a.jsxs)("div",{className:"w-1/2 px-2 mb-4",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["User Type",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{className:"w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2 dark:bg-gray-700 dark:text-gray-200",value:e.userType,onChange:e=>j(s,"userType",e.target.value),required:!0,disabled:r,children:[(0,a.jsx)("option",{value:"",children:"Select type"}),(0,a.jsx)("option",{value:"ADMIN",children:"Admin"}),(0,a.jsx)("option",{value:"GENERAL",children:"General"})]})]})]})]},s)),(0,a.jsx)("button",{type:"button",onClick:()=>{o([...d,{username:"",password:"",userType:"",userDb:[]}])},className:"w-full py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 dark:focus:ring-gray-400",disabled:r,children:"Add Another User"}),"username,password,user_type,allowed_dbs"!==n.trim()&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Generated CSV String"}),(0,a.jsx)("textarea",{value:n,readOnly:!0,rows:2,className:"w-full font-mono border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-gray-100 dark:bg-gray-700 dark:text-gray-200 p-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,a.jsx)("button",{type:"submit",className:"w-1/3 mx-auto block mt-10 py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",disabled:r||"username,password,user_type,allowed_dbs"===n.trim()||m.length>0,children:"Add Users"})]})]})};var f=s(4775),w=s(8891),k=s(4028),j=s(7870);let N=e=>{let{userDets:r,getUserDets:s,loading:d,setLoading:o}=e,n=(0,t.useContext)(g.oS),[i,c]=(0,t.useState)(null),[u,m]=(0,t.useState)(""),x=async e=>{if(confirm("Are you sure you want to delete user ".concat(e,"?"))){o(!0);let r=localStorage.getItem("defogToken"),a=await fetch((0,l.A)("http","admin/delete_user"),{method:"POST",body:JSON.stringify({username:e,token:r}),headers:{"Content-Type":"application/json"}}),t=await a.json();"success"===t.status?n.success("User deleted successfully! Refreshing the user data..."):n.error(t.message||"There was an error deleting the user. Please try again."),await s(),o(!1)}},h=async(e,r)=>{let a="ACTIVE"===r?"INACTIVE":"ACTIVE";o(!0);let t=localStorage.getItem("defogToken");try{let r=await fetch((0,l.A)("http","admin/update_user_status"),{method:"POST",body:JSON.stringify({username:e,status:a,token:t}),headers:{"Content-Type":"application/json"}}),s=await r.json();"success"===s.status?n.success("User status updated to ".concat(a)):n.error(s.message||"Failed to update user status")}catch(e){n.error("An error occurred while updating user status"),console.error(e)}finally{await s(),o(!1)}},y=async e=>{if(e.preventDefault(),!i)return;o(!0);let r=localStorage.getItem("defogToken");try{let e=await fetch((0,l.A)("http","admin/reset_password"),{method:"POST",body:JSON.stringify({username:i,password:u,token:r}),headers:{"Content-Type":"application/json"}}),s=await e.json();"success"===s.status?(n.success("Password reset successfully"),c(null),m("")):n.error(s.detail||s.message||"Failed to reset password")}catch(e){n.error("An error occurred while resetting password"),console.error(e)}finally{o(!1)}},b=e=>e?new Date(e).toLocaleString():"Never",p=[{title:"Username",dataIndex:"username",key:"username",width:"25%",sorter:(e,r)=>e.username.localeCompare(r.username)},{title:"User Type",dataIndex:"user_type",key:"user_type",width:"10%",sorter:(e,r)=>e.user_type.localeCompare(r.user_type),render:e=>(0,a.jsx)("span",{className:"ADMIN"===e?"text-blue-600 dark:text-blue-400 font-semibold":"",children:e})},{title:"Status",dataIndex:"status",key:"status",width:"10%",sorter:(e,r)=>e.status.localeCompare(r.status),render:e=>(0,a.jsx)("span",{className:"ACTIVE"===e?"text-green-600 dark:text-green-400 font-semibold":"text-red-600 dark:text-red-400 font-semibold",children:e})},{title:"Created At",dataIndex:"created_at",key:"created_at",width:"15%",sorter:(e,r)=>new Date(e.created_at||0)-new Date(r.created_at||0),render:e=>b(e)},{title:"Last Login",dataIndex:"last_login",key:"last_login",width:"15%",sorter:(e,r)=>new Date(e.last_login||0)-new Date(r.last_login||0),render:e=>b(e)},{title:"Actions",dataIndex:"__actions",key:"actions",width:"25%",render:(e,r)=>(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(g.$n,{variant:"normal",icon:"ACTIVE"===r.status?(0,a.jsx)(f.A,{size:18}):(0,a.jsx)(w.A,{size:18}),onClick:()=>h(r.username,r.status),className:"hover:bg-gray-100 dark:hover:bg-gray-700",tooltip:"ACTIVE"===r.status?"Deactivate User":"Activate User"}),(0,a.jsx)(g.$n,{variant:"normal",icon:(0,a.jsx)(k.A,{size:18}),onClick:()=>c(r.username),className:"hover:bg-gray-100 dark:hover:bg-gray-700",tooltip:"Reset Password"}),(0,a.jsx)(g.$n,{variant:"normal",icon:(0,a.jsx)(j.A,{size:18}),onClick:()=>x(r.username),className:"hover:bg-gray-100 dark:hover:bg-gray-700 text-red-500",tooltip:"Delete User"})]})}];return(0,a.jsx)("div",{className:"w-4/6 max-h-screen overflow-y-auto mb-4",children:(0,a.jsxs)("div",{className:"relative mt-10",children:[d&&(0,a.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-white/70 dark:bg-gray-900/70 backdrop-blur-[1px] z-10",children:[(0,a.jsx)(g.c5,{classNames:"text-blue-500 h-6 w-6"}),(0,a.jsx)("span",{className:"mt-2 text-sm font-medium text-gray-600 dark:text-gray-300",children:"Processing User Action"})]}),i&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-1/3",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 dark:text-white",children:"Reset Password"}),(0,a.jsxs)("form",{onSubmit:y,children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Username"}),(0,a.jsx)("input",{type:"text",value:i,disabled:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"New Password"}),(0,a.jsx)("input",{type:"password",value:u,onChange:e=>m(e.target.value),required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-md p-2 dark:bg-gray-700 dark:text-white",placeholder:"Enter new password"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Password must be at least 8 characters with uppercase, lowercase, number, and special character."})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{c(null),m("")},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",disabled:!u||u.length<8,children:"Reset Password"})]})]})]})}),(0,a.jsx)(g.XI,{columns:p,rows:r.map((e,r)=>({...e,key:"row-".concat(r),__origIndex:r})),rowCellRender:e=>{let{cellValue:r,row:s,dataIndex:t,column:d}=e;return"function"==typeof d.render?(0,a.jsx)("td",{className:"px-6 py-4 text-left text-sm text-gray-700 dark:text-gray-200 border-b border-gray-200 dark:border-gray-700",children:d.render(r,s)},s.key+"-"+t):(0,a.jsx)("td",{className:"px-6 py-4 text-left text-sm text-gray-700 dark:text-gray-200 border-b border-gray-200 dark:border-gray-700 whitespace-nowrap",children:r},s.key+"-"+t)},headerCellRender:e=>{let{column:r}=e;return(0,a.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",style:{width:r.width},children:r.title},r.key)},rootClassNames:"border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg bg-white dark:bg-dark-bg-secondary overflow-hidden",pagination:{defaultPageSize:10,showSizeChanger:!0,pageSizeOptions:[10,20,50]},paginationPosition:"bottom",showSearch:!0,searchPlaceholder:"Search by username...",searchFields:["username"]})]})})};var v=s(7539);let S=()=>{let[e,r]=(0,t.useState)(!1),[s,i]=(0,t.useState)([]),c=(0,t.useContext)(g.oS),u=(0,d.useRouter)(),m=async()=>{r(!0);let e=localStorage.getItem("defogToken");if(!e){r(!1),c.error("It seems like there was no token found in your session. Please try to log in again.");return}let s=await fetch((0,l.A)("http","admin/get_users"),{method:"POST",body:JSON.stringify({token:e}),headers:{"Content-Type":"application/json"}}),a=await s.json();a.users?i(a.users):c.error("There was an error fetching the user data. Please try again."),r(!1)};return(0,t.useEffect)(()=>{let e=localStorage.getItem("defogUser"),r=localStorage.getItem("defogToken"),s=localStorage.getItem("defogUserType");if(!e||!r||!s){u.push("/log-in");return}r?m():u.push("/log-in")},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.A,{}),(0,a.jsxs)(n.A,{id:"manage-users",userType:"ADMIN",children:[(0,a.jsxs)("div",{className:"flex justify-center items-center flex-col p-1 mt-5",children:[(0,a.jsxs)("h1",{children:[(0,a.jsx)(v.A,{size:48,className:"text-blue-500 dark:text-blue-400"})," "]}),(0,a.jsx)("h1",{className:"text-3xl mt-4 dark:text-gray-100",children:"Manage Users"})]}),(0,a.jsx)("div",{className:"flex justify-center items-center flex-col p-1",children:(0,a.jsx)(N,{userDets:s,getUserDets:m,loading:e,setLoading:r})}),(0,a.jsx)("div",{className:"flex justify-center items-center flex-col p-1 w-full",children:(0,a.jsx)(x,{loading:e,getUserDets:m})}),(0,a.jsx)("div",{className:"flex justify-center items-center flex-col p-1 w-full mt-4 mb-4",children:(0,a.jsx)(p,{loading:e,getUserDets:m})})]})]})}},6921:(e,r,s)=>{"use strict";s.d(r,{A:()=>o});var a=s(8017),t=s(5484),d=s.n(t);let o=()=>(0,a.jsxs)(d(),{children:[(0,a.jsx)("title",{children:"Defog.ai - AI Assistant for Data Analysis"}),(0,a.jsx)("meta",{name:"description",content:"Train your AI data assistant on your own device"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]})}},e=>{var r=r=>e(e.s=r);e.O(0,[264,320,636,593,792],()=>r(1676)),_N_E=e.O()}]);