(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[103],{800:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(5948).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},1596:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>N});var r=a(8017),s=a(4109),n=a(1085),l=a(5183),i=a(6428),o=a(3557),d=a(694);let c=e=>{let{title:t,description:a,instructions:s,setInstructions:n,updateInstructions:l,updateInstructionsLoadingFunction:i,isLoading:o,isUpdatingInstructions:c}=e;return(0,r.jsxs)("div",{className:"w-full p-4 bg-gray-50 dark:bg-dark-bg-secondary mb-5",children:[(0,r.jsx)("h2",{className:"text-xl mb-3 font-semibold dark:text-dark-text-primary",children:t}),(0,r.jsx)("p",{className:"mb-4 text-gray-700 dark:text-dark-text-secondary",children:a}),(0,r.jsxs)("div",{className:"relative",children:[(o||c)&&(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-white bg-opacity-70 z-10",children:[(0,r.jsx)(d.c5,{className:"text-blue-500"}),(0,r.jsx)("span",{className:"mt-2 text-gray-600",children:c?"Updating Instructions...":"Loading Instructions"})]}),(0,r.jsxs)("div",{className:o||c?"pointer-events-none":"",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold dark:text-dark-text-primary",children:"Text to SQL Instructions"}),(0,r.jsx)("p",{className:"text-sm text-gray-700 dark:text-dark-text-secondary mb-2",children:"These are the instructions that the model is given for every single SQL query that it generates."}),(0,r.jsx)("textarea",{className:"w-full min-h-40 p-2 border rounded border-gray-300 dark:border-dark-border shadow-sm focus:border-gray-500 focus:ring focus:ring-gray-200 transition duration resize-y text-sm text-gray-900 dark:text-dark-text-primary dark:bg-dark-bg-primary leading-normal",value:s,onChange:e=>n(e.target.value),rows:8,disabled:o})]})]}),(0,r.jsx)(d.$n,{variant:"primary",className:"mt-4 px-4 py-2 min-w-[200px] flex items-center justify-center",onClick:()=>l(s,i),disabled:o||c,children:"Update Instructions"})]})};var u=a(5948);let m=(0,u.A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),h=(0,u.A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var x=a(800);let g=e=>{let{helperText:t,mainText:a,onUpdate:n,isEditable:l,inputModeOn:i=!1}=e,[o,c]=(0,s.useState)(a),[u,m]=(0,s.useState)(i),x=()=>{n(o),m(!1)};return(0,r.jsxs)("div",{className:"bg-[#FFFAF0] border-l-4 border-[#FFA500] p-2.5 my-2.5 font-mono text-gray-700 flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"shrink-0",children:[t,"\xa0"]}),(0,r.jsx)("div",{className:"flex-1 min-w-0",children:u?(0,r.jsx)(d.pd,{value:o,onChange:e=>c(e.target.value),onKeyDown:e=>"Enter"===e.key&&x(),onBlur:x,autoFocus:!0,inputClassNames:"w-full bg-white dark:bg-dark-bg-secondary border border-gray-300 dark:border-dark-border dark:text-dark-text-primary"}):(0,r.jsx)("span",{children:o})}),l&&(0,r.jsx)(h,{onClick:()=>m(!u),className:"cursor-pointer text-[#FFA500] ml-2.5 hover:opacity-80 shrink-0"})]})},y=(0,u.A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),p=e=>{let{handleOk:t,handleCancel:a,newQuestion:n,setNewQuestion:l,newSql:i,setNewSql:o,generateSqlQuery:c}=e,[u,m]=(0,s.useState)(!1),[h,x]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{h&&n&&c&&(async()=>{m(!0),o("Generating SQL...");try{let e=await c(n);o(e)}catch(e){o("// Error generating SQL")}finally{m(!1),x(!1)}})()},[h,n,c,o]),(0,r.jsxs)(d.aF,{open:!0,onCancel:a,footer:(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)(d.$n,{variant:"secondary",onClick:a,children:"Cancel"}),(0,r.jsx)(d.$n,{variant:"primary",onClick:()=>t(n,i),disabled:!n||!i,children:"Ok"})]}),title:(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center text-xl mb-4 dark:text-dark-text-primary",children:[(0,r.jsx)(y,{className:"text-yellow-500 mb-4 font-bold",style:{fontSize:"3em"}}),(0,r.jsx)("h1",{children:"Add Golden Query"})]}),contentClassNames:"w-full max-w-3xl",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-gray-700 dark:text-gray-300 mb-2",children:"Question:"}),(0,r.jsx)(d.pd,{placeholder:"Enter your question",value:n,onChange:e=>{l(e.target.value),x(!0)},inputClassNames:"w-full bg-white dark:bg-dark-bg-secondary border border-gray-300 dark:border-dark-border dark:text-dark-text-primary"})]}),(0,r.jsxs)("div",{className:"relative mt-4",children:[u&&(0,r.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80 dark:bg-gray-900/80 z-10",children:[(0,r.jsx)(d.c5,{classNames:"text-blue-500 h-6 w-6"}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-300",children:"Give us a few seconds..."})]}),(0,r.jsx)("label",{className:"block text-gray-700 dark:text-gray-300 mb-2",children:"SQL Query:"}),(0,r.jsx)(d.pd,{textArea:!0,placeholder:"SQL Query",value:i,onChange:e=>o(e.target.value),inputClassNames:"font-mono text-sm p-2 bg-gray-50 dark:bg-dark-bg-secondary border border-gray-300 dark:border-dark-border dark:text-dark-text-primary min-h-[8rem] w-full",disabled:u})]})]})},f=e=>{let{token:t,apiKeyName:a,goldenQueries:n,setGoldenQueries:l,isLoading:i,updateGoldenQueries:o,deleteGoldenQueries:c,isUpdatingGoldenQueries:u}=e,[y,f]=(0,s.useState)({});(0,s.useEffect)(()=>{f({})},[n.length]);let[b,k]=(0,s.useState)(!1),[j,N]=(0,s.useState)(""),[v,w]=(0,s.useState)(""),S=e=>{f(t=>({...t,[e]:!t[e]}))},_=()=>{N(""),w(""),k(!1)},C=[{title:"Question",dataIndex:"question",key:"question",width:"30%",render:(e,t)=>y[t.__origIndex]?(0,r.jsx)(d.pd,{value:e,onChange:e=>{let a=e.target.value;l(e=>{let r=[...e];return r[t.__origIndex].question=a,r})},disabled:i||u,inputClassNames:"min-h-[2.5rem] resize-y"}):(0,r.jsx)(g,{helperText:"",mainText:e,onUpdate:()=>{},isEditable:!1})},{title:"SQL Query",dataIndex:"sql",key:"sql",width:"55%",render:(e,t)=>y[t.__origIndex]?(0,r.jsx)(d.pd,{value:e,onChange:e=>{let a=e.target.value;l(e=>{let r=[...e];return r[t.__origIndex].sql=a,r})},disabled:i||u,inputClassNames:"font-mono text-sm min-h-[6rem] resize-y bg-gray-50 dark:bg-dark-bg-secondary border border-gray-300 dark:border-dark-border dark:text-dark-text-primary"}):(0,r.jsx)("pre",{className:"whitespace-pre-wrap bg-gray-100 dark:bg-dark-bg-secondary dark:text-dark-text-primary max-h-72 overflow-auto px-2 py-1",children:e})},{title:"Actions",dataIndex:"__actions",key:"actions",width:"15%",render:(e,t)=>{let a=y[t.__origIndex];return(0,r.jsxs)("div",{className:"flex items-center gap-2 justify-center",children:[(0,r.jsx)(d.$n,{variant:a?"primary":"normal",icon:a?(0,r.jsx)(m,{}):(0,r.jsx)(h,{}),onClick:()=>{a&&o(t.question,t.sql),S(t.__origIndex)},disabled:i||u}),(0,r.jsx)(d.$n,{variant:"danger",icon:(0,r.jsx)(x.A,{}),onClick:()=>{c(t.question)},disabled:i||u})]})}}],A=n.map((e,t)=>({...e,key:"row-".concat(t),__origIndex:t}));return(0,r.jsxs)("div",{className:"w-full p-4 mb-4",children:[(0,r.jsx)("h2",{className:"text-xl mb-3 font-semibold",children:"Golden Queries"}),(0,r.jsx)("p",{className:"mb-6 text-gray-700",children:"The golden queries are SQL queries used as examples by the model to learn about how your database is structured. You can see and edit them below."}),(0,r.jsxs)("div",{className:"relative",children:[(i||u)&&(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-white/70 dark:bg-gray-900/70 backdrop-blur-[1px] z-10",children:[(0,r.jsx)(d.c5,{classNames:"text-blue-500 h-6 w-6"}),(0,r.jsx)("span",{className:"mt-2 text-gray-600 dark:text-gray-300",children:u?"Updating Golden Queries...":"Loading Golden Queries"})]}),(0,r.jsx)(d.XI,{columns:C,rows:A,rowCellRender:e=>{let{cellValue:t,row:a,dataIndex:s,column:n}=e;return"function"==typeof n.render?(0,r.jsx)("td",{className:"px-3 py-2 align-top text-sm text-gray-700 dark:text-gray-200",children:n.render(t,a)},a.key+"-"+s):(0,r.jsx)("td",{className:"px-3 py-2 align-top text-sm text-gray-700 dark:text-gray-200",children:t},a.key+"-"+s)},rootClassNames:"max-h-screen overflow-auto",pagination:{defaultPageSize:A.length,showSizeChanger:!1},paginationPosition:"bottom",showSearch:!1})]}),(0,r.jsx)(d.$n,{variant:"primary",className:"mt-4 px-4 py-2 min-w-[200px]",onClick:()=>k(!0),disabled:i||u,children:"Add new Question and Query"}),b&&(0,r.jsx)(p,{handleOk:(e,t)=>{e&&t&&(o(e,t),_(),l(a=>[...a,{question:e,sql:t}]))},handleCancel:_,newQuestion:j,setNewQuestion:N,newSql:v,setNewSql:w})]})},b=e=>{let{token:t,apiKeyName:a,guidelineType:n}=e,[l,i]=(0,s.useState)(""),[c,u]=(0,s.useState)(!1),m=(0,s.useContext)(d.oS),h=async()=>{u(!0);let e=await fetch((0,o.A)("http","oracle/get_guidelines"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,db_name:a,guideline_type:n})});u(!1),i((await e.json()).guidelines)},x=async()=>{u(!0);let e=await fetch((0,o.A)("http","oracle/set_guidelines"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,db_name:a,guideline_type:n,guidelines:l})});u(!1),await e.json(),m.success("Your changes have been saved!")};return(0,s.useEffect)(()=>{t&&a&&h()},[t,a]),(0,r.jsxs)("div",{className:"w-full max-w-4xl mx-auto p-6 space-y-6",children:[(0,r.jsxs)("h1",{className:"text-2xl font-semibold text-gray-800 mb-4 capitalize",children:[n.replaceAll("_"," ")," Guidelines"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(d.fs,{value:l,onChange:e=>i(e.target.value),className:"w-full min-h-[200px] p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,r.jsx)("div",{onClick:x,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 flex items-center justify-center min-w-[100px] text-sm hover:cursor-pointer",disabled:c,children:c?(0,r.jsx)(d.c5,{className:"w-5 h-5"}):"Update"})]})]})},k=(0,u.A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var j=a(9678);let N=()=>{let e=(0,n.useRouter)(),[t,a]=(0,s.useState)(""),[u,m]=(0,s.useState)([]),[h,x]=(0,s.useState)(""),[g,y]=(0,s.useState)(!1),[p,N]=(0,s.useState)(!1),[v,w]=(0,s.useState)(!1),[S,_]=(0,s.useState)(!1),C=(0,s.useContext)(d.oS),[A,T]=(0,s.useState)([]),I=async e=>{let t=await fetch((j.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"")+"/get_db_names",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})});if(!t.ok)throw Error("Failed to get api key names - are you sure your network is working?");let a=await t.json();T(a.db_names),E(a.db_names[0])},[q,E]=(0,s.useState)(null);(0,s.useEffect)(()=>{let t=localStorage.getItem("defogToken");if(!t){y(!0),setTimeout(()=>{let t=window.location.pathname+window.location.search;e.push({pathname:"/log-in",query:{message:"You are not logged in. Please log in to access model configuration.",returnUrl:t}})},1500);return}I(t)},[e]),(0,s.useEffect)(()=>{let e=localStorage.getItem("defogToken");x(e),q&&e&&Q()},[q]);let Q=async()=>{N(!0);let e=localStorage.getItem("defogToken");try{let t=await fetch((0,o.A)("http","integration/get_instructions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,db_name:q})}),r=await t.json();a(r.instructions);let s=await fetch((0,o.A)("http","integration/get_golden_queries"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,db_name:q})}),n=await s.json();m(n.golden_queries),N(!1)}catch(e){console.error(e),N(!1),C.error("Failed to get instructions. Are you sure you have updated your database credentials?")}},L=async(e,t)=>{t(!0);let a=await fetch((0,o.A)("http","integration/update_instructions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({instructions:e,token:h,db_name:q})}),r=await a.json();t(!1),console.log(r),!0===r.success&&C.success("Instructions updated successfully!")},P=async(e,t)=>{if(h){_(!0);let a=await fetch((0,o.A)("http","integration/update_golden_queries"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:h,db_name:q,golden_queries:[{question:e,sql:t}]})}),r=await a.json();_(!1),!0===r.success&&C.success("Golden queries updated successfully!")}},O=async e=>{if(!h||!q){C.error("Please log in to continue");return}if(confirm("Are you sure you want to delete this golden query?"))try{(await fetch((0,o.A)("http","integration/delete_golden_queries"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:h,db_name:q,questions:[e]})})).ok?C.success("Golden query deleted successfully"):C.error("Failed to delete golden query");let t=[...u],a=t.findIndex(t=>t.question===e);t.splice(a,1),m(t)}catch(e){console.error("Error deleting golden query:",e)}},F=[{key:"text-to-sql-instructions",name:"Text-to-SQL",content:(0,r.jsx)(c,{title:"Instructions",description:"This the information about your data that the model considers when generating your SQL queries. Feel free to edit these instructions to get the best results.",instructions:t,setInstructions:a,updateInstructions:L,updateInstructionsLoadingFunction:w,isLoading:p,isUpdatingInstructions:v})},{key:"golden-queries",name:"Golden Queries",content:(0,r.jsx)(f,{token:h,apiKeyName:q,goldenQueries:u,setGoldenQueries:m,updateGoldenQueries:P,deleteGoldenQueries:O,isLoading:p,isUpdatingGoldenQueries:S})},{key:"clarification-guidelines",name:"Clarifications",content:(0,r.jsx)(b,{token:h,apiKeyName:q,guidelineType:"clarification"})}];return g?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{}),(0,r.jsx)("div",{className:"h-screen flex flex-col items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Not Logged In"}),(0,r.jsx)("p",{className:"mb-4",children:"You are not logged in. Redirecting to login page..."}),(0,r.jsx)(d.c5,{})]})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{}),(0,r.jsxs)(i.A,{id:"align-model",userType:"ADMIN",children:[A.length>1?(0,r.jsx)("div",{className:"p-1 mt-1 w-full",children:(0,r.jsx)(d.Z,{onChange:e=>{E(e)},options:A.map(e=>({value:e,key:e,label:e})),value:q})}):null,(0,r.jsxs)("div",{className:"flex justify-center items-center flex-col p-1 mt-1",children:[(0,r.jsxs)("h1",{children:[(0,r.jsx)(k,{size:48,color:"#1890ff"})," "]}),(0,r.jsx)("h1",{className:"text-3xl mt-4",children:"Align Model"}),(0,r.jsx)("p",{className:"m-4",children:"Here, you can see the instructions and golden queries that the model is currently using to create SQL queries. Feel free to change them to get the best results."})]}),(0,r.jsx)("div",{className:"flex flex-col p-1 border border-gray-3200 rounded-lg",children:(0,r.jsx)(d.tU,{size:"normal",tabs:F,defaultSelected:"instructions"})})]})]})}},3557:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(9678);let s=(e,t)=>{if("http"!==e&&"ws"!==e)throw Error("Protocol not supported");return""!==t?"ws"===e?"".concat((r.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"").replace("http","ws"),"/").concat(t):"".concat(r.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"","/").concat(t):"".concat(r.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"")}},4012:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/align-model",function(){return a(1596)}])},5183:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var r=a(8017),s=a(1326),n=a.n(s);let l=()=>(0,r.jsxs)(n(),{children:[(0,r.jsx)("title",{children:"Defog.ai - AI Assistant for Data Analysis"}),(0,r.jsx)("meta",{name:"description",content:"Train your AI data assistant on your own device"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]})},5948:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var r=a(4109);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:t,...l,width:s,height:s,stroke:a,strokeWidth:o?24*Number(i)/Number(s):i,className:n("lucide",d),...m},[...u.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let a=(0,r.forwardRef)((a,l)=>{let{className:o,...d}=a;return(0,r.createElement)(i,{ref:l,iconNode:t,className:n("lucide-".concat(s(e)),o),...d})});return a.displayName="".concat(e),a}},6428:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var r=a(8017),s=a(4109),n=a(1085),l=a(694),i=a(3930),o=a(2074);let d=e=>{let{id:t,userType:a,children:d,rootClassNames:c="",contentClassNames:u="max-h-full h-full",containerClassNames:m="flex flex-col md:min-h-screen relative container mx-auto"}=e,[h,x]=(0,s.useState)([]),g=(0,n.useRouter)(),y=e=>{g.push(e)},p=()=>{localStorage.removeItem("defogUser"),localStorage.removeItem("defogToken"),localStorage.removeItem("defogUserType"),y("/log-in")},f=(0,i.usePathname)();return(0,s.useEffect)(()=>{let e=[];x(("ADMIN"==a?[{title:"Admin",href:"#!",children:[{key:"manage-database",title:"Manage Database",href:"/extract-metadata"},{key:"manage-users",title:"Manage Users",href:"/manage-users"},{key:"align-model",title:"Align Model",href:"/align-model"}]},{key:"reports",title:"Reports",href:"/reports"},{key:"logout",classNames:"self-end",title:"Logout",href:"#",onClick:p}]:a?[{key:"reports",title:"Reports",href:"/reports"},{key:"logout",classNames:"self-end",title:"Logout",href:"#",onClick:p}]:[]).map(e=>(e.current=e.href==f,e)).map(e=>(e.children&&(e.children=e.children.map(e=>(e.current=e.href==f,e))),e)))},[a]),(0,r.jsxs)("div",{className:(0,o.QP)(m,c),children:[h.length?(0,r.jsx)(l.jq,{rootClassNames:(0,o.QP)("border-b dark:border-dark-border","bg-white dark:bg-dark-bg-primary","text-primary-text dark:text-dark-text-primary"),items:h.map(e=>({...e,classNames:(0,o.QP)(e.classNames,"hover:bg-gray-100 dark:hover:bg-dark-hover",e.current&&"bg-gray-100 dark:bg-dark-hover")}))}):(0,r.jsx)(r.Fragment,{}),(0,r.jsx)("div",{className:u,children:d})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[628,636,593,792],()=>t(4012)),_N_E=e.O()}]);